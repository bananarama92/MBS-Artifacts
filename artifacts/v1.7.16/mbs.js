/*!
 * MBS: Maid's Bondage Scripts
 *
 * Copyright (C) 2023-2024 Bananarama92
 *
 * This program is free software: you can redistribute it and/or modify it under the terms of
 * the GNU General Public License as published by the Free Software Foundation,
 * either version 3 of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program.
 * If not, see https://www.gnu.org/licenses/.
 *
 * An exception is made for the "mbs.css" API, which is licensed under the terms of GNU LGPL
 * version 3 (see https://www.gnu.org/licenses/lgpl-3.0.en.html).
 */
var mbs=function(e){"use strict";const t="1.7.16";var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o={},i={};Object.defineProperty(i,"__esModule",{value:!0});i.setAttributes=void 0;function a(e,t){for(const r of Object.keys(e))r in t&&(t[r]=e[r])}i.setAttributes=function(e,t){for(const r of Object.keys(t)){if("__source"===r||"__self"===r)continue;const n=t[r];if(r.startsWith("on")){const t=r.replace(/Capture$/,""),o=r!==t,i=t.toLowerCase().substring(2);e.addEventListener(i,n,o)}else"style"===r&&"string"!=typeof n?a(n,e.style):"dangerouslySetInnerHTML"===r?e.innerHTML=n:!0===n?e.setAttribute(r,r):(n||0===n)&&e.setAttribute(r,n.toString())}};var s={};Object.defineProperty(s,"__esModule",{value:!0});s.createDomElement=s.applyChildren=void 0;function l(e,t){t instanceof Element?e.appendChild(t):"string"==typeof t||"number"==typeof t?e.appendChild(document.createTextNode(t.toString())):console.warn("Unknown type to append: ",t)}s.applyChildren=function e(t,r){for(const n of r)(n||0===n)&&(Array.isArray(n)?e(t,n):l(t,n))};s.createDomElement=function(e,t){const r=(null==t?void 0:t.is)?{is:t.is}:void 0;return(null==t?void 0:t.xmlns)?document.createElementNS(t.xmlns,e,r):document.createElement(e,r)},Object.defineProperty(o,"__esModule",{value:!0});o.jsxDEV=p=o.jsxs=h=o.jsx=void 0;const c=i,u=s;function d(e,t){if("function"==typeof e)return e(t);const{children:r,...n}=t,o=(0,u.createDomElement)(e,n);return n&&(0,c.setAttributes)(o,n),(0,u.applyChildren)(o,[r]),o}var h=o.jsx=d,p=o.jsxs=d;o.jsxDEV=d;var f={},m={};Object.defineProperty(m,"__esModule",{value:!0});m.h=m.createElement=void 0;const g=i,R=s;function v(e,t,...r){if("function"==typeof e)return e({...t,children:r});const n=(0,R.createDomElement)(e,t);return t&&(0,g.setAttributes)(n,t),(0,R.applyChildren)(n,r),n}m.createElement=v;m.h=v;var y={};Object.defineProperty(y,"__esModule",{value:!0}),function(e){var t=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=r&&r.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),n(m,e),n(o,e),n(y,e)}(f);Object.create;Object.create;function b(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function S(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}"function"==typeof SuppressedError&&SuppressedError;var C="object"==typeof global&&global&&global.Object===Object&&global,w="object"==typeof self&&self&&self.Object===Object&&self,k=C||w||Function("return this")(),B=k.Symbol,P=Object.prototype,x=P.hasOwnProperty,M=P.toString,I=B?B.toStringTag:void 0;var E=Object.prototype.toString;var _="[object Null]",F="[object Undefined]",O=B?B.toStringTag:void 0;function $(e){return null==e?void 0===e?F:_:O&&O in Object(e)?function(e){var t=x.call(e,I),r=e[I];try{e[I]=void 0;var n=!0}catch(e){}var o=M.call(e);return n&&(t?e[I]=r:delete e[I]),o}(e):function(e){return E.call(e)}(e)}function L(e){return null!=e&&"object"==typeof e}var T="[object Symbol]";function A(e){return"symbol"==typeof e||L(e)&&$(e)==T}var H=NaN;function N(e){return"number"==typeof e?e:A(e)?H:+e}function D(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var G=Array.isArray,j=1/0,W=B?B.prototype:void 0,z=W?W.toString:void 0;function V(e){if("string"==typeof e)return e;if(G(e))return D(e,V)+"";if(A(e))return z?z.call(e):"";var t=e+"";return"0"==t&&1/e==-j?"-0":t}function q(e,t){return function(r,n){var o;if(void 0===r&&void 0===n)return t;if(void 0!==r&&(o=r),void 0!==n){if(void 0===o)return n;"string"==typeof r||"string"==typeof n?(r=V(r),n=V(n)):(r=N(r),n=N(n)),o=e(r,n)}return o}}var U=q((function(e,t){return e+t}),0),K=/\s/;function J(e){for(var t=e.length;t--&&K.test(e.charAt(t)););return t}var Y=/^\s+/;function Z(e){return e?e.slice(0,J(e)+1).replace(Y,""):e}function X(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Q=NaN,ee=/^[-+]0x[0-9a-f]+$/i,te=/^0b[01]+$/i,re=/^0o[0-7]+$/i,ne=parseInt;function oe(e){if("number"==typeof e)return e;if(A(e))return Q;if(X(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=X(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Z(e);var r=te.test(e);return r||re.test(e)?ne(e.slice(2),r?2:8):ee.test(e)?Q:+e}var ie=1/0,ae=17976931348623157e292;function se(e){return e?(e=oe(e))===ie||e===-ie?(e<0?-1:1)*ae:e==e?e:0:0===e?e:0}function le(e){var t=se(e),r=t%1;return t==t?r?t-r:t:0}function ce(e){return e}var ue="[object AsyncFunction]",de="[object Function]",he="[object GeneratorFunction]",pe="[object Proxy]";function fe(e){if(!X(e))return!1;var t=$(e);return t==de||t==he||t==ue||t==pe}var me,ge=k["__core-js_shared__"],Re=(me=/[^.]+$/.exec(ge&&ge.keys&&ge.keys.IE_PROTO||""))?"Symbol(src)_1."+me:"";var ve=Function.prototype.toString;function ye(e){if(null!=e){try{return ve.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var be=/^\[object .+?Constructor\]$/,Se=Function.prototype,Ce=Object.prototype,we=Se.toString,ke=Ce.hasOwnProperty,Be=RegExp("^"+we.call(ke).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Pe(e){return!(!X(e)||function(e){return!!Re&&Re in e}(e))&&(fe(e)?Be:be).test(ye(e))}function xe(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Pe(r)?r:void 0}var Me=xe(k,"WeakMap"),Ie=Me&&new Me,Ee=Ie?function(e,t){return Ie.set(e,t),e}:ce,_e=Object.create,Fe=function(){function e(){}return function(t){if(!X(t))return{};if(_e)return _e(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Oe(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Fe(e.prototype),n=e.apply(r,t);return X(n)?n:r}}var $e=1;function Le(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Te=Math.max;function Ae(e,t,r,n){for(var o=-1,i=e.length,a=r.length,s=-1,l=t.length,c=Te(i-a,0),u=Array(l+c),d=!n;++s<l;)u[s]=t[s];for(;++o<a;)(d||o<i)&&(u[r[o]]=e[o]);for(;c--;)u[s++]=e[o++];return u}var He=Math.max;function Ne(e,t,r,n){for(var o=-1,i=e.length,a=-1,s=r.length,l=-1,c=t.length,u=He(i-s,0),d=Array(u+c),h=!n;++o<u;)d[o]=e[o];for(var p=o;++l<c;)d[p+l]=t[l];for(;++a<s;)(h||o<i)&&(d[p+r[a]]=e[o++]);return d}function De(){}var Ge=4294967295;function je(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ge,this.__views__=[]}function We(){}je.prototype=Fe(De.prototype),je.prototype.constructor=je;var ze=Ie?function(e){return Ie.get(e)}:We,Ve={},qe=Object.prototype.hasOwnProperty;function Ue(e){for(var t=e.name+"",r=Ve[t],n=qe.call(Ve,t)?r.length:0;n--;){var o=r[n],i=o.func;if(null==i||i==e)return o.name}return t}function Ke(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Je(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function Ye(e){if(e instanceof je)return e.clone();var t=new Ke(e.__wrapped__,e.__chain__);return t.__actions__=Je(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}Ke.prototype=Fe(De.prototype),Ke.prototype.constructor=Ke;var Ze=Object.prototype.hasOwnProperty;function Xe(e){if(L(e)&&!G(e)&&!(e instanceof je)){if(e instanceof Ke)return e;if(Ze.call(e,"__wrapped__"))return Ye(e)}return new Ke(e)}function Qe(e){var t=Ue(e),r=Xe[t];if("function"!=typeof r||!(t in je.prototype))return!1;if(e===r)return!0;var n=ze(r);return!!n&&e===n[0]}Xe.prototype=De.prototype,Xe.prototype.constructor=Xe;var et=Date.now;function tt(e){var t=0,r=0;return function(){var n=et(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var rt=tt(Ee),nt=/\{\n\/\* \[wrapped with (.+)\] \*/,ot=/,? & /;var it=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function at(e){return function(){return e}}var st=function(){try{var e=xe(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),lt=st?function(e,t){return st(e,"toString",{configurable:!0,enumerable:!1,value:at(t),writable:!0})}:ce,ct=tt(lt);function ut(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function dt(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function ht(e){return e!=e}function pt(e,t,r){return t==t?function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}(e,t,r):dt(e,ht,r)}function ft(e,t){return!!(null==e?0:e.length)&&pt(e,t,0)>-1}var mt=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function gt(e,t,r){var n=t+"";return ct(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(it,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return ut(mt,(function(r){var n="_."+r[0];t&r[1]&&!ft(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(nt);return t?t[1].split(ot):[]}(n),r)))}var Rt=1,vt=2,yt=4,bt=8,St=32,Ct=64;function wt(e,t,r,n,o,i,a,s,l,c){var u=t&bt;t|=u?St:Ct,(t&=~(u?Ct:St))&yt||(t&=~(Rt|vt));var d=[e,t,o,u?i:void 0,u?a:void 0,u?void 0:i,u?void 0:a,s,l,c],h=r.apply(void 0,d);return Qe(e)&&rt(h,d),h.placeholder=n,gt(h,e,t)}function kt(e){return e.placeholder}var Bt=9007199254740991,Pt=/^(?:0|[1-9]\d*)$/;function xt(e,t){var r=typeof e;return!!(t=null==t?Bt:t)&&("number"==r||"symbol"!=r&&Pt.test(e))&&e>-1&&e%1==0&&e<t}var Mt=Math.min;var It="__lodash_placeholder__";function Et(e,t){for(var r=-1,n=e.length,o=0,i=[];++r<n;){var a=e[r];a!==t&&a!==It||(e[r]=It,i[o++]=r)}return i}var _t=1,Ft=2,Ot=8,$t=16,Lt=128,Tt=512;function At(e,t,r,n,o,i,a,s,l,c){var u=t&Lt,d=t&_t,h=t&Ft,p=t&(Ot|$t),f=t&Tt,m=h?void 0:Oe(e);return function g(){for(var R=arguments.length,v=Array(R),y=R;y--;)v[y]=arguments[y];if(p)var b=kt(g),S=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(v,b);if(n&&(v=Ae(v,n,o,p)),i&&(v=Ne(v,i,a,p)),R-=S,p&&R<c){var C=Et(v,b);return wt(e,t,At,g.placeholder,r,v,C,s,l,c-R)}var w=d?r:this,B=h?w[e]:e;return R=v.length,s?v=function(e,t){for(var r=e.length,n=Mt(t.length,r),o=Je(e);n--;){var i=t[n];e[n]=xt(i,r)?o[i]:void 0}return e}(v,s):f&&R>1&&v.reverse(),u&&l<R&&(v.length=l),this&&this!==k&&this instanceof g&&(B=m||Oe(B)),B.apply(w,v)}}var Ht=1;var Nt="__lodash_placeholder__",Dt=1,Gt=2,jt=4,Wt=8,zt=128,Vt=256,qt=Math.min;var Ut="Expected a function",Kt=1,Jt=2,Yt=8,Zt=16,Xt=32,Qt=64,er=Math.max;function tr(e,t,r,n,o,i,a,s){var l=t&Jt;if(!l&&"function"!=typeof e)throw new TypeError(Ut);var c=n?n.length:0;if(c||(t&=~(Xt|Qt),n=o=void 0),a=void 0===a?a:er(le(a),0),s=void 0===s?s:le(s),c-=o?o.length:0,t&Qt){var u=n,d=o;n=o=void 0}var h=l?void 0:ze(e),p=[e,t,r,n,o,u,d,i,a,s];if(h&&function(e,t){var r=e[1],n=t[1],o=r|n,i=o<(Dt|Gt|zt),a=n==zt&&r==Wt||n==zt&&r==Vt&&e[7].length<=t[8]||n==(zt|Vt)&&t[7].length<=t[8]&&r==Wt;if(!i&&!a)return e;n&Dt&&(e[2]=t[2],o|=r&Dt?0:jt);var s=t[3];if(s){var l=e[3];e[3]=l?Ae(l,s,t[4]):s,e[4]=l?Et(e[3],Nt):t[4]}(s=t[5])&&(l=e[5],e[5]=l?Ne(l,s,t[6]):s,e[6]=l?Et(e[5],Nt):t[6]),(s=t[7])&&(e[7]=s),n&zt&&(e[8]=null==e[8]?t[8]:qt(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o}(p,h),e=p[0],t=p[1],r=p[2],n=p[3],o=p[4],!(s=p[9]=void 0===p[9]?l?0:e.length:er(p[9]-c,0))&&t&(Yt|Zt)&&(t&=~(Yt|Zt)),t&&t!=Kt)f=t==Yt||t==Zt?function(e,t,r){var n=Oe(e);return function o(){for(var i=arguments.length,a=Array(i),s=i,l=kt(o);s--;)a[s]=arguments[s];var c=i<3&&a[0]!==l&&a[i-1]!==l?[]:Et(a,l);return(i-=c.length)<r?wt(e,t,At,o.placeholder,void 0,a,c,void 0,void 0,r-i):Le(this&&this!==k&&this instanceof o?n:e,this,a)}}(e,t,s):t!=Xt&&t!=(Kt|Xt)||o.length?At.apply(void 0,p):function(e,t,r,n){var o=t&Ht,i=Oe(e);return function t(){for(var a=-1,s=arguments.length,l=-1,c=n.length,u=Array(c+s),d=this&&this!==k&&this instanceof t?i:e;++l<c;)u[l]=n[l];for(;s--;)u[l++]=arguments[++a];return Le(d,o?r:this,u)}}(e,t,r,n);else var f=function(e,t,r){var n=t&$e,o=Oe(e);return function t(){return(this&&this!==k&&this instanceof t?o:e).apply(n?r:this,arguments)}}(e,t,r);return gt((h?Ee:rt)(f,p),e,t)}var rr=128;function nr(e,t,r){return t=r?void 0:t,t=e&&null==t?e.length:t,tr(e,rr,void 0,void 0,void 0,void 0,t)}function or(e,t,r){"__proto__"==t&&st?st(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function ir(e,t){return e===t||e!=e&&t!=t}var ar=Object.prototype.hasOwnProperty;function sr(e,t,r){var n=e[t];ar.call(e,t)&&ir(n,r)&&(void 0!==r||t in e)||or(e,t,r)}function lr(e,t,r,n){var o=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var s=t[i],l=n?n(r[s],e[s],s,r,e):void 0;void 0===l&&(l=e[s]),o?or(r,s,l):sr(r,s,l)}return r}var cr=Math.max;function ur(e,t,r){return t=cr(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=cr(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(a),Le(e,this,s)}}function dr(e,t){return ct(ur(e,t,ce),e+"")}var hr=9007199254740991;function pr(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=hr}function fr(e){return null!=e&&pr(e.length)&&!fe(e)}function mr(e,t,r){if(!X(r))return!1;var n=typeof t;return!!("number"==n?fr(r)&&xt(t,r.length):"string"==n&&t in r)&&ir(r[t],e)}function gr(e){return dr((function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&mr(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n,i)}return t}))}var Rr=Object.prototype;function vr(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Rr)}function yr(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function br(e){return L(e)&&"[object Arguments]"==$(e)}var Sr=Object.prototype,Cr=Sr.hasOwnProperty,wr=Sr.propertyIsEnumerable,kr=br(function(){return arguments}())?br:function(e){return L(e)&&Cr.call(e,"callee")&&!wr.call(e,"callee")};function Br(){return!1}var Pr="object"==typeof e&&e&&!e.nodeType&&e,xr=Pr&&"object"==typeof module&&module&&!module.nodeType&&module,Mr=xr&&xr.exports===Pr?k.Buffer:void 0,Ir=(Mr?Mr.isBuffer:void 0)||Br,Er={};function _r(e){return function(t){return e(t)}}Er["[object Float32Array]"]=Er["[object Float64Array]"]=Er["[object Int8Array]"]=Er["[object Int16Array]"]=Er["[object Int32Array]"]=Er["[object Uint8Array]"]=Er["[object Uint8ClampedArray]"]=Er["[object Uint16Array]"]=Er["[object Uint32Array]"]=!0,Er["[object Arguments]"]=Er["[object Array]"]=Er["[object ArrayBuffer]"]=Er["[object Boolean]"]=Er["[object DataView]"]=Er["[object Date]"]=Er["[object Error]"]=Er["[object Function]"]=Er["[object Map]"]=Er["[object Number]"]=Er["[object Object]"]=Er["[object RegExp]"]=Er["[object Set]"]=Er["[object String]"]=Er["[object WeakMap]"]=!1;var Fr="object"==typeof e&&e&&!e.nodeType&&e,Or=Fr&&"object"==typeof module&&module&&!module.nodeType&&module,$r=Or&&Or.exports===Fr&&C.process,Lr=function(){try{var e=Or&&Or.require&&Or.require("util").types;return e||$r&&$r.binding&&$r.binding("util")}catch(e){}}(),Tr=Lr&&Lr.isTypedArray,Ar=Tr?_r(Tr):function(e){return L(e)&&pr(e.length)&&!!Er[$(e)]},Hr=Object.prototype.hasOwnProperty;function Nr(e,t){var r=G(e),n=!r&&kr(e),o=!r&&!n&&Ir(e),i=!r&&!n&&!o&&Ar(e),a=r||n||o||i,s=a?yr(e.length,String):[],l=s.length;for(var c in e)!t&&!Hr.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||xt(c,l))||s.push(c);return s}function Dr(e,t){return function(r){return e(t(r))}}var Gr=Dr(Object.keys,Object),jr=Object.prototype.hasOwnProperty;function Wr(e){if(!vr(e))return Gr(e);var t=[];for(var r in Object(e))jr.call(e,r)&&"constructor"!=r&&t.push(r);return t}function zr(e){return fr(e)?Nr(e):Wr(e)}var Vr=Object.prototype.hasOwnProperty,qr=gr((function(e,t){if(vr(t)||fr(t))lr(t,zr(t),e);else for(var r in t)Vr.call(t,r)&&sr(e,r,t[r])}));var Ur=Object.prototype.hasOwnProperty;function Kr(e){if(!X(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=vr(e),r=[];for(var n in e)("constructor"!=n||!t&&Ur.call(e,n))&&r.push(n);return r}function Jr(e){return fr(e)?Nr(e,!0):Kr(e)}var Yr=gr((function(e,t){lr(t,Jr(t),e)})),Zr=gr((function(e,t,r,n){lr(t,Jr(t),e,n)})),Xr=gr((function(e,t,r,n){lr(t,zr(t),e,n)})),Qr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,en=/^\w*$/;function tn(e,t){if(G(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!A(e))||(en.test(e)||!Qr.test(e)||null!=t&&e in Object(t))}var rn=xe(Object,"create");var nn=Object.prototype.hasOwnProperty;var on=Object.prototype.hasOwnProperty;function an(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function sn(e,t){for(var r=e.length;r--;)if(ir(e[r][0],t))return r;return-1}an.prototype.clear=function(){this.__data__=rn?rn(null):{},this.size=0},an.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},an.prototype.get=function(e){var t=this.__data__;if(rn){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return nn.call(t,e)?t[e]:void 0},an.prototype.has=function(e){var t=this.__data__;return rn?void 0!==t[e]:on.call(t,e)},an.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=rn&&void 0===t?"__lodash_hash_undefined__":t,this};var ln=Array.prototype.splice;function cn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}cn.prototype.clear=function(){this.__data__=[],this.size=0},cn.prototype.delete=function(e){var t=this.__data__,r=sn(t,e);return!(r<0)&&(r==t.length-1?t.pop():ln.call(t,r,1),--this.size,!0)},cn.prototype.get=function(e){var t=this.__data__,r=sn(t,e);return r<0?void 0:t[r][1]},cn.prototype.has=function(e){return sn(this.__data__,e)>-1},cn.prototype.set=function(e,t){var r=this.__data__,n=sn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var un=xe(k,"Map");function dn(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function hn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}hn.prototype.clear=function(){this.size=0,this.__data__={hash:new an,map:new(un||cn),string:new an}},hn.prototype.delete=function(e){var t=dn(this,e).delete(e);return this.size-=t?1:0,t},hn.prototype.get=function(e){return dn(this,e).get(e)},hn.prototype.has=function(e){return dn(this,e).has(e)},hn.prototype.set=function(e,t){var r=dn(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var pn="Expected a function";function fn(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(pn);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(fn.Cache||hn),r}fn.Cache=hn;var mn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gn=/\\(\\)?/g,Rn=function(e){var t=fn(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(mn,(function(e,r,n,o){t.push(n?o.replace(gn,"$1"):r||e)})),t}));function vn(e){return null==e?"":V(e)}function yn(e,t){return G(e)?e:tn(e,t)?[e]:Rn(vn(e))}var bn=1/0;function Sn(e){if("string"==typeof e||A(e))return e;var t=e+"";return"0"==t&&1/e==-bn?"-0":t}function Cn(e,t){for(var r=0,n=(t=yn(t,e)).length;null!=e&&r<n;)e=e[Sn(t[r++])];return r&&r==n?e:void 0}function wn(e,t,r){var n=null==e?void 0:Cn(e,t);return void 0===n?r:n}function kn(e,t){for(var r=-1,n=t.length,o=Array(n),i=null==e;++r<n;)o[r]=i?void 0:wn(e,t[r]);return o}function Bn(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var Pn=B?B.isConcatSpreadable:void 0;function xn(e){return G(e)||kr(e)||!!(Pn&&e&&e[Pn])}function Mn(e,t,r,n,o){var i=-1,a=e.length;for(r||(r=xn),o||(o=[]);++i<a;){var s=e[i];t>0&&r(s)?t>1?Mn(s,t-1,r,n,o):Bn(o,s):n||(o[o.length]=s)}return o}function In(e){return(null==e?0:e.length)?Mn(e,1):[]}function En(e){return ct(ur(e,void 0,In),e+"")}var _n=En(kn),Fn=Dr(Object.getPrototypeOf,Object),On="[object Object]",$n=Function.prototype,Ln=Object.prototype,Tn=$n.toString,An=Ln.hasOwnProperty,Hn=Tn.call(Object);function Nn(e){if(!L(e)||$(e)!=On)return!1;var t=Fn(e);if(null===t)return!0;var r=An.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Tn.call(r)==Hn}var Dn="[object DOMException]",Gn="[object Error]";function jn(e){if(!L(e))return!1;var t=$(e);return t==Gn||t==Dn||"string"==typeof e.message&&"string"==typeof e.name&&!Nn(e)}var Wn=dr((function(e,t){try{return Le(e,void 0,t)}catch(e){return jn(e)?e:new Error(e)}})),zn="Expected a function";function Vn(e,t){var r;if("function"!=typeof t)throw new TypeError(zn);return e=le(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}}var qn=dr((function(e,t,r){var n=1;if(r.length){var o=Et(r,kt(qn));n|=32}return tr(e,n,t,r,o)}));qn.placeholder={};var Un=En((function(e,t){return ut(t,(function(t){t=Sn(t),or(e,t,qn(e[t],e))})),e})),Kn=dr((function(e,t,r){var n=3;if(r.length){var o=Et(r,kt(Kn));n|=32}return tr(t,n,e,r,o)}));function Jn(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}function Yn(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:Jn(e,t,r)}Kn.placeholder={};var Zn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Xn(e){return Zn.test(e)}var Qn="\\ud800-\\udfff",eo="["+Qn+"]",to="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ro="\\ud83c[\\udffb-\\udfff]",no="[^"+Qn+"]",oo="(?:\\ud83c[\\udde6-\\uddff]){2}",io="[\\ud800-\\udbff][\\udc00-\\udfff]",ao="(?:"+to+"|"+ro+")"+"?",so="[\\ufe0e\\ufe0f]?",lo=so+ao+("(?:\\u200d(?:"+[no,oo,io].join("|")+")"+so+ao+")*"),co="(?:"+[no+to+"?",to,oo,io,eo].join("|")+")",uo=RegExp(ro+"(?="+ro+")|"+co+lo,"g");function ho(e){return Xn(e)?function(e){return e.match(uo)||[]}(e):function(e){return e.split("")}(e)}function po(e){return function(t){var r=Xn(t=vn(t))?ho(t):void 0,n=r?r[0]:t.charAt(0),o=r?Yn(r,1).join(""):t.slice(1);return n[e]()+o}}var fo=po("toUpperCase");function mo(e){return fo(vn(e).toLowerCase())}function go(e,t,r,n){var o=-1,i=null==e?0:e.length;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}function Ro(e){return function(t){return null==e?void 0:e[t]}}var vo=Ro({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),yo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bo=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");function So(e){return(e=vn(e))&&e.replace(yo,vo).replace(bo,"")}var Co=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var wo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var ko="\\ud800-\\udfff",Bo="\\u2700-\\u27bf",Po="a-z\\xdf-\\xf6\\xf8-\\xff",xo="A-Z\\xc0-\\xd6\\xd8-\\xde",Mo="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Io="["+Mo+"]",Eo="\\d+",_o="["+Bo+"]",Fo="["+Po+"]",Oo="[^"+ko+Mo+Eo+Bo+Po+xo+"]",$o="(?:\\ud83c[\\udde6-\\uddff]){2}",Lo="[\\ud800-\\udbff][\\udc00-\\udfff]",To="["+xo+"]",Ao="(?:"+Fo+"|"+Oo+")",Ho="(?:"+To+"|"+Oo+")",No="(?:['’](?:d|ll|m|re|s|t|ve))?",Do="(?:['’](?:D|LL|M|RE|S|T|VE))?",Go="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",jo="[\\ufe0e\\ufe0f]?",Wo=jo+Go+("(?:\\u200d(?:"+["[^"+ko+"]",$o,Lo].join("|")+")"+jo+Go+")*"),zo="(?:"+[_o,$o,Lo].join("|")+")"+Wo,Vo=RegExp([To+"?"+Fo+"+"+No+"(?="+[Io,To,"$"].join("|")+")",Ho+"+"+Do+"(?="+[Io,To+Ao,"$"].join("|")+")",To+"?"+Ao+"+"+No,To+"+"+Do,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Eo,zo].join("|"),"g");function qo(e,t,r){return e=vn(e),void 0===(t=r?void 0:t)?function(e){return wo.test(e)}(e)?function(e){return e.match(Vo)||[]}(e):function(e){return e.match(Co)||[]}(e):e.match(t)||[]}var Uo=RegExp("['’]","g");function Ko(e){return function(t){return go(qo(So(t).replace(Uo,"")),e,"")}}var Jo=Ko((function(e,t,r){return t=t.toLowerCase(),e+(r?mo(t):t)}));var Yo=k.isFinite,Zo=Math.min;function Xo(e){var t=Math[e];return function(e,r){if(e=oe(e),(r=null==r?0:Zo(le(r),292))&&Yo(e)){var n=(vn(e)+"e").split("e");return+((n=(vn(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Qo=Xo("ceil");function ei(e){var t=Xe(e);return t.__chain__=!0,t}var ti=Math.ceil,ri=Math.max;function ni(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}function oi(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=oe(r))==r?r:0),void 0!==t&&(t=(t=oe(t))==t?t:0),ni(oe(e),t,r)}function ii(e){var t=this.__data__=new cn(e);this.size=t.size}function ai(e,t){return e&&lr(t,zr(t),e)}ii.prototype.clear=function(){this.__data__=new cn,this.size=0},ii.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ii.prototype.get=function(e){return this.__data__.get(e)},ii.prototype.has=function(e){return this.__data__.has(e)},ii.prototype.set=function(e,t){var r=this.__data__;if(r instanceof cn){var n=r.__data__;if(!un||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new hn(n)}return r.set(e,t),this.size=r.size,this};var si="object"==typeof e&&e&&!e.nodeType&&e,li=si&&"object"==typeof module&&module&&!module.nodeType&&module,ci=li&&li.exports===si?k.Buffer:void 0,ui=ci?ci.allocUnsafe:void 0;function di(e,t){if(t)return e.slice();var r=e.length,n=ui?ui(r):new e.constructor(r);return e.copy(n),n}function hi(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}function pi(){return[]}var fi=Object.prototype.propertyIsEnumerable,mi=Object.getOwnPropertySymbols,gi=mi?function(e){return null==e?[]:(e=Object(e),hi(mi(e),(function(t){return fi.call(e,t)})))}:pi;var Ri=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Bn(t,gi(e)),e=Fn(e);return t}:pi;function vi(e,t,r){var n=t(e);return G(e)?n:Bn(n,r(e))}function yi(e){return vi(e,zr,gi)}function bi(e){return vi(e,Jr,Ri)}var Si=xe(k,"DataView"),Ci=xe(k,"Promise"),wi=xe(k,"Set"),ki="[object Map]",Bi="[object Promise]",Pi="[object Set]",xi="[object WeakMap]",Mi="[object DataView]",Ii=ye(Si),Ei=ye(un),_i=ye(Ci),Fi=ye(wi),Oi=ye(Me),$i=$;(Si&&$i(new Si(new ArrayBuffer(1)))!=Mi||un&&$i(new un)!=ki||Ci&&$i(Ci.resolve())!=Bi||wi&&$i(new wi)!=Pi||Me&&$i(new Me)!=xi)&&($i=function(e){var t=$(e),r="[object Object]"==t?e.constructor:void 0,n=r?ye(r):"";if(n)switch(n){case Ii:return Mi;case Ei:return ki;case _i:return Bi;case Fi:return Pi;case Oi:return xi}return t});var Li=$i,Ti=Object.prototype.hasOwnProperty;var Ai=k.Uint8Array;function Hi(e){var t=new e.constructor(e.byteLength);return new Ai(t).set(new Ai(e)),t}var Ni=/\w*$/;var Di=B?B.prototype:void 0,Gi=Di?Di.valueOf:void 0;function ji(e,t){var r=t?Hi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Wi="[object Boolean]",zi="[object Date]",Vi="[object Map]",qi="[object Number]",Ui="[object RegExp]",Ki="[object Set]",Ji="[object String]",Yi="[object Symbol]",Zi="[object ArrayBuffer]",Xi="[object DataView]",Qi="[object Float32Array]",ea="[object Float64Array]",ta="[object Int8Array]",ra="[object Int16Array]",na="[object Int32Array]",oa="[object Uint8Array]",ia="[object Uint8ClampedArray]",aa="[object Uint16Array]",sa="[object Uint32Array]";function la(e,t,r){var n,o=e.constructor;switch(t){case Zi:return Hi(e);case Wi:case zi:return new o(+e);case Xi:return function(e,t){var r=t?Hi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case Qi:case ea:case ta:case ra:case na:case oa:case ia:case aa:case sa:return ji(e,r);case Vi:return new o;case qi:case Ji:return new o(e);case Ui:return function(e){var t=new e.constructor(e.source,Ni.exec(e));return t.lastIndex=e.lastIndex,t}(e);case Ki:return new o;case Yi:return n=e,Gi?Object(Gi.call(n)):{}}}function ca(e){return"function"!=typeof e.constructor||vr(e)?{}:Fe(Fn(e))}var ua=Lr&&Lr.isMap,da=ua?_r(ua):function(e){return L(e)&&"[object Map]"==Li(e)};var ha=Lr&&Lr.isSet,pa=ha?_r(ha):function(e){return L(e)&&"[object Set]"==Li(e)},fa=1,ma=2,ga=4,Ra="[object Arguments]",va="[object Function]",ya="[object GeneratorFunction]",ba="[object Object]",Sa={};function Ca(e,t,r,n,o,i){var a,s=t&fa,l=t&ma,c=t&ga;if(r&&(a=o?r(e,n,o,i):r(e)),void 0!==a)return a;if(!X(e))return e;var u=G(e);if(u){if(a=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Ti.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!s)return Je(e,a)}else{var d=Li(e),h=d==va||d==ya;if(Ir(e))return di(e,s);if(d==ba||d==Ra||h&&!o){if(a=l||h?{}:ca(e),!s)return l?function(e,t){return lr(e,Ri(e),t)}(e,function(e,t){return e&&lr(t,Jr(t),e)}(a,e)):function(e,t){return lr(e,gi(e),t)}(e,ai(a,e))}else{if(!Sa[d])return o?e:{};a=la(e,d,s)}}i||(i=new ii);var p=i.get(e);if(p)return p;i.set(e,a),pa(e)?e.forEach((function(n){a.add(Ca(n,t,r,n,e,i))})):da(e)&&e.forEach((function(n,o){a.set(o,Ca(n,t,r,o,e,i))}));var f=u?void 0:(c?l?bi:yi:l?Jr:zr)(e);return ut(f||e,(function(n,o){f&&(n=e[o=n]),sr(a,o,Ca(n,t,r,o,e,i))})),a}Sa[Ra]=Sa["[object Array]"]=Sa["[object ArrayBuffer]"]=Sa["[object DataView]"]=Sa["[object Boolean]"]=Sa["[object Date]"]=Sa["[object Float32Array]"]=Sa["[object Float64Array]"]=Sa["[object Int8Array]"]=Sa["[object Int16Array]"]=Sa["[object Int32Array]"]=Sa["[object Map]"]=Sa["[object Number]"]=Sa[ba]=Sa["[object RegExp]"]=Sa["[object Set]"]=Sa["[object String]"]=Sa["[object Symbol]"]=Sa["[object Uint8Array]"]=Sa["[object Uint8ClampedArray]"]=Sa["[object Uint16Array]"]=Sa["[object Uint32Array]"]=!0,Sa["[object Error]"]=Sa[va]=Sa["[object WeakMap]"]=!1;var wa=4;function ka(e){return Ca(e,wa)}var Ba=1,Pa=4;function xa(e){return Ca(e,Ba|Pa)}function Ma(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new hn;++t<r;)this.add(e[t])}function Ia(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function Ea(e,t){return e.has(t)}Ma.prototype.add=Ma.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ma.prototype.has=function(e){return this.__data__.has(e)};var _a=1,Fa=2;function Oa(e,t,r,n,o,i){var a=r&_a,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,p=r&Fa?new Ma:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var f=e[d],m=t[d];if(n)var g=a?n(m,f,d,t,e,i):n(f,m,d,e,t,i);if(void 0!==g){if(g)continue;h=!1;break}if(p){if(!Ia(t,(function(e,t){if(!Ea(p,t)&&(f===e||o(f,e,r,n,i)))return p.push(t)}))){h=!1;break}}else if(f!==m&&!o(f,m,r,n,i)){h=!1;break}}return i.delete(e),i.delete(t),h}function $a(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function La(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var Ta=1,Aa=2,Ha="[object Boolean]",Na="[object Date]",Da="[object Error]",Ga="[object Map]",ja="[object Number]",Wa="[object RegExp]",za="[object Set]",Va="[object String]",qa="[object Symbol]",Ua="[object ArrayBuffer]",Ka="[object DataView]",Ja=B?B.prototype:void 0,Ya=Ja?Ja.valueOf:void 0;var Za=1,Xa=Object.prototype.hasOwnProperty;var Qa=1,es="[object Arguments]",ts="[object Array]",rs="[object Object]",ns=Object.prototype.hasOwnProperty;function os(e,t,r,n,o,i){var a=G(e),s=G(t),l=a?ts:Li(e),c=s?ts:Li(t),u=(l=l==es?rs:l)==rs,d=(c=c==es?rs:c)==rs,h=l==c;if(h&&Ir(e)){if(!Ir(t))return!1;a=!0,u=!1}if(h&&!u)return i||(i=new ii),a||Ar(e)?Oa(e,t,r,n,o,i):function(e,t,r,n,o,i,a){switch(r){case Ka:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ua:return!(e.byteLength!=t.byteLength||!i(new Ai(e),new Ai(t)));case Ha:case Na:case ja:return ir(+e,+t);case Da:return e.name==t.name&&e.message==t.message;case Wa:case Va:return e==t+"";case Ga:var s=$a;case za:var l=n&Ta;if(s||(s=La),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;n|=Aa,a.set(e,t);var u=Oa(s(e),s(t),n,o,i,a);return a.delete(e),u;case qa:if(Ya)return Ya.call(e)==Ya.call(t)}return!1}(e,t,l,r,n,o,i);if(!(r&Qa)){var p=u&&ns.call(e,"__wrapped__"),f=d&&ns.call(t,"__wrapped__");if(p||f){var m=p?e.value():e,g=f?t.value():t;return i||(i=new ii),o(m,g,r,n,i)}}return!!h&&(i||(i=new ii),function(e,t,r,n,o,i){var a=r&Za,s=yi(e),l=s.length;if(l!=yi(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:Xa.call(t,u)))return!1}var d=i.get(e),h=i.get(t);if(d&&h)return d==t&&h==e;var p=!0;i.set(e,t),i.set(t,e);for(var f=a;++c<l;){var m=e[u=s[c]],g=t[u];if(n)var R=a?n(g,m,u,t,e,i):n(m,g,u,e,t,i);if(!(void 0===R?m===g||o(m,g,r,n,i):R)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var v=e.constructor,y=t.constructor;v==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(p=!1)}return i.delete(e),i.delete(t),p}(e,t,r,n,o,i))}function is(e,t,r,n,o){return e===t||(null==e||null==t||!L(e)&&!L(t)?e!=e&&t!=t:os(e,t,r,n,is,o))}var as=1,ss=2;function ls(e,t,r,n){var o=r.length,i=o,a=!n;if(null==e)return!i;for(e=Object(e);o--;){var s=r[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var l=(s=r[o])[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var d=new ii;if(n)var h=n(c,u,l,e,t,d);if(!(void 0===h?is(u,c,as|ss,n,d):h))return!1}}return!0}function cs(e){return e==e&&!X(e)}function us(e){for(var t=zr(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,cs(o)]}return t}function ds(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}function hs(e){var t=us(e);return 1==t.length&&t[0][2]?ds(t[0][0],t[0][1]):function(r){return r===e||ls(r,e,t)}}function ps(e,t){return null!=e&&t in Object(e)}function fs(e,t,r){for(var n=-1,o=(t=yn(t,e)).length,i=!1;++n<o;){var a=Sn(t[n]);if(!(i=null!=e&&r(e,a)))break;e=e[a]}return i||++n!=o?i:!!(o=null==e?0:e.length)&&pr(o)&&xt(a,o)&&(G(e)||kr(e))}function ms(e,t){return null!=e&&fs(e,t,ps)}var gs=1,Rs=2;function vs(e,t){return tn(e)&&cs(t)?ds(Sn(e),t):function(r){var n=wn(r,e);return void 0===n&&n===t?ms(r,e):is(t,n,gs|Rs)}}function ys(e){return function(t){return null==t?void 0:t[e]}}function bs(e){return tn(e)?ys(Sn(e)):function(e){return function(t){return Cn(t,e)}}(e)}function Ss(e){return"function"==typeof e?e:null==e?ce:"object"==typeof e?G(e)?vs(e[0],e[1]):hs(e):bs(e)}function Cs(e,t,r){var n=r.length;if(null==e)return!n;for(e=Object(e);n--;){var o=r[n],i=t[o],a=e[o];if(void 0===a&&!(o in e)||!i(a))return!1}return!0}function ws(e,t,r,n){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(n,a,r(a),e)}return n}function ks(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),s=a.length;s--;){var l=a[e?s:++o];if(!1===r(i[l],l,i))break}return t}}var Bs=ks();function Ps(e,t){return e&&Bs(e,t,zr)}function xs(e,t){return function(r,n){if(null==r)return r;if(!fr(r))return e(r,n);for(var o=r.length,i=t?o:-1,a=Object(r);(t?i--:++i<o)&&!1!==n(a[i],i,a););return r}}var Ms=xs(Ps);function Is(e,t,r,n){return Ms(e,(function(e,o,i){t(n,e,r(e),i)})),n}function Es(e,t){return function(r,n){var o=G(r)?ws:Is,i=t?t():{};return o(r,e,Ss(n),i)}}var _s=Object.prototype.hasOwnProperty,Fs=Es((function(e,t,r){_s.call(e,r)?++e[r]:or(e,r,1)}));function Os(e,t,r){var n=tr(e,8,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=Os.placeholder,n}Os.placeholder={};function $s(e,t,r){var n=tr(e,16,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=$s.placeholder,n}$s.placeholder={};var Ls=function(){return k.Date.now()},Ts="Expected a function",As=Math.max,Hs=Math.min;function Ns(e,t,r){var n,o,i,a,s,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(Ts);function p(t){var r=n,i=o;return n=o=void 0,c=t,a=e.apply(i,r)}function f(e){var r=e-l;return void 0===l||r>=t||r<0||d&&e-c>=i}function m(){var e=Ls();if(f(e))return g(e);s=setTimeout(m,function(e){var r=t-(e-l);return d?Hs(r,i-(e-c)):r}(e))}function g(e){return s=void 0,h&&n?p(e):(n=o=void 0,a)}function R(){var e=Ls(),r=f(e);if(n=arguments,o=this,l=e,r){if(void 0===s)return function(e){return c=e,s=setTimeout(m,t),u?p(e):a}(l);if(d)return clearTimeout(s),s=setTimeout(m,t),p(l)}return void 0===s&&(s=setTimeout(m,t)),a}return t=oe(t)||0,X(r)&&(u=!!r.leading,i=(d="maxWait"in r)?As(oe(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h),R.cancel=function(){void 0!==s&&clearTimeout(s),c=0,n=l=o=s=void 0},R.flush=function(){return void 0===s?a:g(Ls())},R}var Ds=Object.prototype,Gs=Ds.hasOwnProperty,js=dr((function(e,t){e=Object(e);var r=-1,n=t.length,o=n>2?t[2]:void 0;for(o&&mr(t[0],t[1],o)&&(n=1);++r<n;)for(var i=t[r],a=Jr(i),s=-1,l=a.length;++s<l;){var c=a[s],u=e[c];(void 0===u||ir(u,Ds[c])&&!Gs.call(e,c))&&(e[c]=i[c])}return e}));function Ws(e,t,r){(void 0!==r&&!ir(e[t],r)||void 0===r&&!(t in e))&&or(e,t,r)}function zs(e){return L(e)&&fr(e)}function Vs(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function qs(e){return lr(e,Jr(e))}function Us(e,t,r,n,o){e!==t&&Bs(t,(function(i,a){if(o||(o=new ii),X(i))!function(e,t,r,n,o,i,a){var s=Vs(e,r),l=Vs(t,r),c=a.get(l);if(c)Ws(e,r,c);else{var u=i?i(s,l,r+"",e,t,a):void 0,d=void 0===u;if(d){var h=G(l),p=!h&&Ir(l),f=!h&&!p&&Ar(l);u=l,h||p||f?G(s)?u=s:zs(s)?u=Je(s):p?(d=!1,u=di(l,!0)):f?(d=!1,u=ji(l,!0)):u=[]:Nn(l)||kr(l)?(u=s,kr(s)?u=qs(s):X(s)&&!fe(s)||(u=ca(l))):d=!1}d&&(a.set(l,u),o(u,l,n,i,a),a.delete(l)),Ws(e,r,u)}}(e,t,a,r,Us,n,o);else{var s=n?n(Vs(e,a),i,a+"",e,t,o):void 0;void 0===s&&(s=i),Ws(e,a,s)}}),Jr)}function Ks(e,t,r,n,o,i){return X(e)&&X(t)&&(i.set(t,e),Us(e,t,void 0,Ks,i),i.delete(t)),e}var Js=gr((function(e,t,r,n){Us(e,t,r,n)})),Ys=dr((function(e){return e.push(void 0,Ks),Le(Js,void 0,e)}));function Zs(e,t,r){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,r)}),t)}var Xs=dr((function(e,t){return Zs(e,1,t)})),Qs=dr((function(e,t,r){return Zs(e,oe(t)||0,r)}));function el(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}var tl=200;function rl(e,t,r,n){var o=-1,i=ft,a=!0,s=e.length,l=[],c=t.length;if(!s)return l;r&&(t=D(t,_r(r))),n?(i=el,a=!1):t.length>=tl&&(i=Ea,a=!1,t=new Ma(t));e:for(;++o<s;){var u=e[o],d=null==r?u:r(u);if(u=n||0!==u?u:0,a&&d==d){for(var h=c;h--;)if(t[h]===d)continue e;l.push(u)}else i(t,d,n)||l.push(u)}return l}var nl=dr((function(e,t){return zs(e)?rl(e,Mn(t,1,zs,!0)):[]}));function ol(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var il=dr((function(e,t){var r=ol(t);return zs(r)&&(r=void 0),zs(e)?rl(e,Mn(t,1,zs,!0),Ss(r)):[]})),al=dr((function(e,t){var r=ol(t);return zs(r)&&(r=void 0),zs(e)?rl(e,Mn(t,1,zs,!0),void 0,r):[]})),sl=q((function(e,t){return e/t}),1);function ll(e,t,r,n){for(var o=e.length,i=n?o:-1;(n?i--:++i<o)&&t(e[i],i,e););return r?Jn(e,n?0:i,n?i+1:o):Jn(e,n?i+1:0,n?o:i)}function cl(e){return"function"==typeof e?e:ce}function ul(e,t){return(G(e)?ut:Ms)(e,cl(t))}function dl(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}var hl=ks(!0);function pl(e,t){return e&&hl(e,t,zr)}var fl=xs(pl,!0);function ml(e,t){return(G(e)?dl:fl)(e,cl(t))}function gl(e){return function(t){var r=Li(t);return"[object Map]"==r?$a(t):"[object Set]"==r?function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}(t):function(e,t){return D(t,(function(t){return[t,e[t]]}))}(t,e(t))}}var Rl=gl(zr),vl=gl(Jr),yl=Ro({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),bl=/[&<>"']/g,Sl=RegExp(bl.source);function Cl(e){return(e=vn(e))&&Sl.test(e)?e.replace(bl,yl):e}var wl=/[\\^$.*+?()[\]{}|]/g,kl=RegExp(wl.source);function Bl(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Pl(e,t){var r=!0;return Ms(e,(function(e,n,o){return r=!!t(e,n,o)})),r}var xl=4294967295;function Ml(e){return e?ni(le(e),0,xl):0}function Il(e,t){var r=[];return Ms(e,(function(e,n,o){t(e,n,o)&&r.push(e)})),r}function El(e){return function(t,r,n){var o=Object(t);if(!fr(t)){var i=Ss(r);t=zr(t),r=function(e){return i(o[e],e,o)}}var a=e(t,r,n);return a>-1?o[i?t[a]:a]:void 0}}var _l=Math.max;function Fl(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=null==r?0:le(r);return o<0&&(o=_l(n+o,0)),dt(e,Ss(t),o)}var Ol=El(Fl);function $l(e,t,r){var n;return r(e,(function(e,r,o){if(t(e,r,o))return n=r,!1})),n}var Ll=Math.max,Tl=Math.min;function Al(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=n-1;return void 0!==r&&(o=le(r),o=r<0?Ll(n+o,0):Tl(o,n-1)),dt(e,Ss(t),o,!0)}var Hl=El(Al);function Nl(e){return e&&e.length?e[0]:void 0}function Dl(e,t){var r=-1,n=fr(e)?Array(e.length):[];return Ms(e,(function(e,o,i){n[++r]=t(e,o,i)})),n}function Gl(e,t){return(G(e)?D:Dl)(e,Ss(t))}var jl=1/0;var Wl=1/0;var zl=Xo("floor");function Vl(e){return En((function(t){var r=t.length,n=r,o=Ke.prototype.thru;for(e&&t.reverse();n--;){var i=t[n];if("function"!=typeof i)throw new TypeError("Expected a function");if(o&&!a&&"wrapper"==Ue(i))var a=new Ke([],!0)}for(n=a?n:r;++n<r;){var s=Ue(i=t[n]),l="wrapper"==s?ze(i):void 0;a=l&&Qe(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?a[Ue(l[0])].apply(a,l[3]):1==i.length&&Qe(i)?a[s]():a.thru(i)}return function(){var e=arguments,n=e[0];if(a&&1==e.length&&G(n))return a.plant(n).value();for(var o=0,i=r?t[o].apply(this,e):n;++o<r;)i=t[o].call(this,i);return i}}))}var ql=Vl(),Ul=Vl(!0);function Kl(e,t){return hi(t,(function(t){return fe(e[t])}))}var Jl=Object.prototype.hasOwnProperty,Yl=Es((function(e,t,r){Jl.call(e,r)?e[r].push(t):or(e,r,[t])}));function Zl(e,t){return e>t}function Xl(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=oe(t),r=oe(r)),e(t,r)}}var Ql=Xl(Zl),ec=Xl((function(e,t){return e>=t})),tc=Object.prototype.hasOwnProperty;function rc(e,t){return null!=e&&tc.call(e,t)}var nc=Math.max,oc=Math.min;var ic="[object String]";function ac(e){return"string"==typeof e||!G(e)&&L(e)&&$(e)==ic}function sc(e,t){return D(t,(function(t){return e[t]}))}function lc(e){return null==e?[]:sc(e,zr(e))}var cc=Math.max;var uc=Math.max;var dc=Math.min;function hc(e,t,r){for(var n=r?el:ft,o=e[0].length,i=e.length,a=i,s=Array(i),l=1/0,c=[];a--;){var u=e[a];a&&t&&(u=D(u,_r(t))),l=dc(u.length,l),s[a]=!r&&(t||o>=120&&u.length>=120)?new Ma(a&&u):void 0}u=e[0];var d=-1,h=s[0];e:for(;++d<o&&c.length<l;){var p=u[d],f=t?t(p):p;if(p=r||0!==p?p:0,!(h?Ea(h,f):n(c,f,r))){for(a=i;--a;){var m=s[a];if(!(m?Ea(m,f):n(e[a],f,r)))continue e}h&&h.push(f),c.push(p)}}return c}function pc(e){return zs(e)?e:[]}var fc=dr((function(e){var t=D(e,pc);return t.length&&t[0]===e[0]?hc(t):[]})),mc=dr((function(e){var t=ol(e),r=D(e,pc);return t===ol(r)?t=void 0:r.pop(),r.length&&r[0]===e[0]?hc(r,Ss(t)):[]})),gc=dr((function(e){var t=ol(e),r=D(e,pc);return(t="function"==typeof t?t:void 0)&&r.pop(),r.length&&r[0]===e[0]?hc(r,void 0,t):[]}));function Rc(e,t){return function(r,n){return function(e,t,r,n){return Ps(e,(function(e,o,i){t(n,r(e),o,i)})),n}(r,e,t(n),{})}}var vc=Object.prototype.toString,yc=Rc((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=vc.call(t)),e[t]=r}),at(ce)),bc=Object.prototype,Sc=bc.hasOwnProperty,Cc=bc.toString,wc=Rc((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Cc.call(t)),Sc.call(e,t)?e[t].push(r):e[t]=[r]}),Ss);function kc(e,t){return t.length<2?e:Cn(e,Jn(t,0,-1))}function Bc(e,t,r){var n=null==(e=kc(e,t=yn(t,e)))?e:e[Sn(ol(t))];return null==n?void 0:Le(n,e,r)}var Pc=dr(Bc),xc=dr((function(e,t,r){var n=-1,o="function"==typeof t,i=fr(e)?Array(e.length):[];return Ms(e,(function(e){i[++n]=o?Le(t,e,r):Bc(e,t,r)})),i}));var Mc=Lr&&Lr.isArrayBuffer,Ic=Mc?_r(Mc):function(e){return L(e)&&"[object ArrayBuffer]"==$(e)};var Ec=Lr&&Lr.isDate,_c=Ec?_r(Ec):function(e){return L(e)&&"[object Date]"==$(e)};var Fc=Object.prototype.hasOwnProperty;function Oc(e,t){return is(e,t)}var $c=k.isFinite;function Lc(e){return"number"==typeof e&&e==le(e)}var Tc="[object Number]";function Ac(e){return"number"==typeof e||L(e)&&$(e)==Tc}var Hc=ge?fe:Br;var Nc=Lr&&Lr.isRegExp,Dc=Nc?_r(Nc):function(e){return L(e)&&"[object RegExp]"==$(e)},Gc=9007199254740991;var jc=Array.prototype.join;var Wc=Ko((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),zc=Es((function(e,t,r){or(e,r,t)}));var Vc=Math.max,qc=Math.min;var Uc=Ko((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Kc=po("toLowerCase");function Jc(e,t){return e<t}var Yc=Xl(Jc),Zc=Xl((function(e,t){return e<=t}));function Xc(e,t,r){for(var n=-1,o=e.length;++n<o;){var i=e[n],a=t(i);if(null!=a&&(void 0===s?a==a&&!A(a):r(a,s)))var s=a,l=i}return l}function Qc(e,t){for(var r,n=-1,o=e.length;++n<o;){var i=t(e[n]);void 0!==i&&(r=void 0===r?i:r+i)}return r}var eu=NaN;function tu(e,t){var r=null==e?0:e.length;return r?Qc(e,t)/r:eu}var ru=gr((function(e,t,r){Us(e,t,r)})),nu=dr((function(e,t){return function(r){return Bc(r,e,t)}})),ou=dr((function(e,t){return function(r){return Bc(e,r,t)}}));function iu(e,t,r){var n=zr(t),o=Kl(t,n),i=!(X(r)&&"chain"in r&&!r.chain),a=fe(e);return ut(o,(function(r){var n=t[r];e[r]=n,a&&(e.prototype[r]=function(){var t=this.__chain__;if(i||t){var r=e(this.__wrapped__);return(r.__actions__=Je(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Bn([this.value()],arguments))})})),e}var au=q((function(e,t){return e*t}),1),su="Expected a function";function lu(e){if("function"!=typeof e)throw new TypeError(su);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var cu="[object Map]",uu="[object Set]",du=B?B.iterator:void 0;function hu(e){if(!e)return[];if(fr(e))return ac(e)?ho(e):Je(e);if(du&&e[du])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[du]());var t=Li(e);return(t==cu?$a:t==uu?La:lc)(e)}function pu(e,t){var r=e.length;if(r)return xt(t+=t<0?r:0,r)?e[t]:void 0}function fu(e,t){return null==(e=kc(e,t=yn(t,e)))||delete e[Sn(ol(t))]}function mu(e){return Nn(e)?void 0:e}var gu=En((function(e,t){var r={};if(null==e)return r;var n=!1;t=D(t,(function(t){return t=yn(t,e),n||(n=t.length>1),t})),lr(e,bi(e),r),n&&(r=Ca(r,7,mu));for(var o=t.length;o--;)fu(r,t[o]);return r}));function Ru(e,t,r,n){if(!X(e))return e;for(var o=-1,i=(t=yn(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var l=Sn(t[o]),c=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=a){var u=s[l];void 0===(c=n?n(u,l,s):void 0)&&(c=X(u)?u:xt(t[o+1])?[]:{})}sr(s,l,c),s=s[l]}return e}function vu(e,t,r){for(var n=-1,o=t.length,i={};++n<o;){var a=t[n],s=Cn(e,a);r(s,a)&&Ru(i,yn(a,e),s)}return i}function yu(e,t){if(null==e)return{};var r=D(bi(e),(function(e){return[e]}));return t=Ss(t),vu(e,r,(function(e,r){return t(e,r[0])}))}function bu(e,t){if(e!==t){var r=void 0!==e,n=null===e,o=e==e,i=A(e),a=void 0!==t,s=null===t,l=t==t,c=A(t);if(!s&&!c&&!i&&e>t||i&&a&&l&&!s&&!c||n&&a&&l||!r&&l||!o)return 1;if(!n&&!i&&!c&&e<t||c&&r&&o&&!n&&!i||s&&r&&o||!a&&o||!l)return-1}return 0}function Su(e,t,r){t=t.length?D(t,(function(e){return G(e)?function(t){return Cn(t,1===e.length?e[0]:e)}:e})):[ce];var n=-1;t=D(t,_r(Ss));var o=Dl(e,(function(e,r,o){var i=D(t,(function(t){return t(e)}));return{criteria:i,index:++n,value:e}}));return function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(o,(function(e,t){return function(e,t,r){for(var n=-1,o=e.criteria,i=t.criteria,a=o.length,s=r.length;++n<a;){var l=bu(o[n],i[n]);if(l)return n>=s?l:l*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}))}function Cu(e){return En((function(t){return t=D(t,_r(Ss)),dr((function(r){var n=this;return e(t,(function(e){return Le(e,n,r)}))}))}))}var wu=Cu(D),ku=dr,Bu=Math.min,Pu=ku((function(e,t){var r=(t=1==t.length&&G(t[0])?D(t[0],_r(Ss)):D(Mn(t,1),_r(Ss))).length;return dr((function(n){for(var o=-1,i=Bu(n.length,r);++o<i;)n[o]=t[o].call(this,n[o]);return Le(e,this,n)}))})),xu=Cu(Bl),Mu=Cu(Ia),Iu=9007199254740991,Eu=Math.floor;function _u(e,t){var r="";if(!e||t<1||t>Iu)return r;do{t%2&&(r+=e),(t=Eu(t/2))&&(e+=e)}while(t);return r}var Fu=ys("length"),Ou="\\ud800-\\udfff",$u="["+Ou+"]",Lu="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Tu="\\ud83c[\\udffb-\\udfff]",Au="[^"+Ou+"]",Hu="(?:\\ud83c[\\udde6-\\uddff]){2}",Nu="[\\ud800-\\udbff][\\udc00-\\udfff]",Du="(?:"+Lu+"|"+Tu+")"+"?",Gu="[\\ufe0e\\ufe0f]?",ju=Gu+Du+("(?:\\u200d(?:"+[Au,Hu,Nu].join("|")+")"+Gu+Du+")*"),Wu="(?:"+[Au+Lu+"?",Lu,Hu,Nu,$u].join("|")+")",zu=RegExp(Tu+"(?="+Tu+")|"+Wu+ju,"g");function Vu(e){return Xn(e)?function(e){for(var t=zu.lastIndex=0;zu.test(e);)++t;return t}(e):Fu(e)}var qu=Math.ceil;function Uu(e,t){var r=(t=void 0===t?" ":V(t)).length;if(r<2)return r?_u(t,e):t;var n=_u(t,qu(e/Vu(t)));return Xn(t)?Yn(ho(n),0,e).join(""):n.slice(0,e)}var Ku=Math.ceil,Ju=Math.floor;var Yu=/^\s+/,Zu=k.parseInt;var Xu=dr((function(e,t){return tr(e,32,void 0,t,Et(t,kt(Xu)))}));Xu.placeholder={};var Qu=dr((function(e,t){return tr(e,64,void 0,t,Et(t,kt(Qu)))}));Qu.placeholder={};var ed=Es((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]}));var td=En((function(e,t){return null==e?{}:function(e,t){return vu(e,t,(function(t,r){return ms(e,r)}))}(e,t)}));function rd(e,t,r,n){for(var o=r-1,i=e.length;++o<i;)if(n(e[o],t))return o;return-1}var nd=Array.prototype.splice;function od(e,t,r,n){var o=n?rd:pt,i=-1,a=t.length,s=e;for(e===t&&(t=Je(t)),r&&(s=D(e,_r(r)));++i<a;)for(var l=0,c=t[i],u=r?r(c):c;(l=o(s,u,l,n))>-1;)s!==e&&nd.call(s,l,1),nd.call(e,l,1);return e}function id(e,t){return e&&e.length&&t&&t.length?od(e,t):e}var ad=dr(id);var sd=Array.prototype.splice;function ld(e,t){for(var r=e?t.length:0,n=r-1;r--;){var o=t[r];if(r==n||o!==i){var i=o;xt(o)?sd.call(e,o,1):fu(e,o)}}return e}var cd=En((function(e,t){var r=null==e?0:e.length,n=kn(e,t);return ld(e,D(t,(function(e){return xt(e,r)?+e:e})).sort(bu)),n})),ud=Math.floor,dd=Math.random;function hd(e,t){return e+ud(dd()*(t-e+1))}var pd=parseFloat,fd=Math.min,md=Math.random;var gd=Math.ceil,Rd=Math.max;function vd(e){return function(t,r,n){return n&&"number"!=typeof n&&mr(t,r,n)&&(r=n=void 0),t=se(t),void 0===r?(r=t,t=0):r=se(r),function(e,t,r,n){for(var o=-1,i=Rd(gd((t-e)/(r||1)),0),a=Array(i);i--;)a[n?i:++o]=e,e+=r;return a}(t,r,n=void 0===n?t<r?1:-1:se(n),e)}}var yd=vd(),bd=vd(!0),Sd=En((function(e,t){return tr(e,256,void 0,void 0,void 0,t)}));function Cd(e,t,r,n,o){return o(e,(function(e,o,i){r=n?(n=!1,e):t(r,e,o,i)})),r}function wd(e,t,r,n){var o=null==e?0:e.length;for(n&&o&&(r=e[--o]);o--;)r=t(r,e[o],o,e);return r}var kd=Array.prototype.reverse;function Bd(e){return null==e?e:kd.call(e)}var Pd=Xo("round");function xd(e){var t=e.length;return t?e[hd(0,t-1)]:void 0}function Md(e){return xd(lc(e))}function Id(e){return(G(e)?xd:Md)(e)}function Ed(e,t){var r=-1,n=e.length,o=n-1;for(t=void 0===t?n:t;++r<t;){var i=hd(r,o),a=e[i];e[i]=e[r],e[r]=a}return e.length=t,e}function _d(e,t){return Ed(Je(e),ni(t,0,e.length))}function Fd(e,t){var r=lc(e);return Ed(r,ni(t,0,r.length))}function Od(e){return Ed(Je(e))}function $d(e){return Ed(lc(e))}var Ld=Ko((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}));function Td(e,t){var r;return Ms(e,(function(e,n,o){return!(r=t(e,n,o))})),!!r}var Ad=dr((function(e,t){if(null==e)return[];var r=t.length;return r>1&&mr(e,t[0],t[1])?t=[]:r>2&&mr(t[0],t[1],t[2])&&(t=[t[0]]),Su(e,Mn(t,1),[])})),Hd=4294967294,Nd=Math.floor,Dd=Math.min;function Gd(e,t,r,n){var o=0,i=null==e?0:e.length;if(0===i)return 0;for(var a=(t=r(t))!=t,s=null===t,l=A(t),c=void 0===t;o<i;){var u=Nd((o+i)/2),d=r(e[u]),h=void 0!==d,p=null===d,f=d==d,m=A(d);if(a)var g=n||f;else g=c?f&&(n||h):s?f&&h&&(n||!p):l?f&&h&&!p&&(n||!m):!p&&!m&&(n?d<=t:d<t);g?o=u+1:i=u}return Dd(i,Hd)}var jd=2147483647;function Wd(e,t,r){var n=0,o=null==e?n:e.length;if("number"==typeof t&&t==t&&o<=jd){for(;n<o;){var i=n+o>>>1,a=e[i];null!==a&&!A(a)&&(r?a<=t:a<t)?n=i+1:o=i}return o}return Gd(e,t,ce,r)}function zd(e,t){for(var r=-1,n=e.length,o=0,i=[];++r<n;){var a=e[r],s=t?t(a):a;if(!r||!ir(s,l)){var l=s;i[o++]=0===a?0:a}}return i}var Vd=Math.max;var qd=Ko((function(e,t,r){return e+(r?" ":"")+fo(t)}));var Ud=q((function(e,t){return e-t}),0);function Kd(e,t){return e&&e.length?Qc(e,Ss(t)):0}var Jd=Object.prototype,Yd=Jd.hasOwnProperty;function Zd(e,t,r,n){return void 0===e||ir(e,Jd[r])&&!Yd.call(n,r)?t:e}var Xd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function Qd(e){return"\\"+Xd[e]}var eh=/<%=([\s\S]+?)%>/g,th={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:eh,variable:"",imports:{_:{escape:Cl}}},rh=/\b__p \+= '';/g,nh=/\b(__p \+=) '' \+/g,oh=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ih=/[()=,{}\[\]\/\s]/,ah=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sh=/($^)/,lh=/['\n\r\u2028\u2029\\]/g,ch=Object.prototype.hasOwnProperty;function uh(e,t){return t(e)}var dh=4294967295,hh=Math.min;function ph(e,t){var r=e;return r instanceof je&&(r=r.value()),go(t,(function(e,t){return t.func.apply(t.thisArg,Bn([e],t.args))}),r)}function fh(){return ph(this.__wrapped__,this.__actions__)}var mh=9007199254740991;function gh(e,t){for(var r=e.length;r--&&pt(t,e[r],0)>-1;);return r}function Rh(e,t){for(var r=-1,n=e.length;++r<n&&pt(t,e[r],0)>-1;);return r}var vh=/^\s+/;var yh=/\w*$/;var bh=Ro({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Sh=/&(?:amp|lt|gt|quot|#39);/g,Ch=RegExp(Sh.source);var wh=wi&&1/La(new wi([,-0]))[1]==1/0?function(e){return new wi(e)}:We,kh=200;function Bh(e,t,r){var n=-1,o=ft,i=e.length,a=!0,s=[],l=s;if(r)a=!1,o=el;else if(i>=kh){var c=t?null:wh(e);if(c)return La(c);a=!1,o=Ea,l=new Ma}else l=t?[]:s;e:for(;++n<i;){var u=e[n],d=t?t(u):u;if(u=r||0!==u?u:0,a&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),s.push(u)}else o(l,d,r)||(l!==s&&l.push(d),s.push(u))}return s}var Ph=dr((function(e){return Bh(Mn(e,1,zs,!0))})),xh=dr((function(e){var t=ol(e);return zs(t)&&(t=void 0),Bh(Mn(e,1,zs,!0),Ss(t))})),Mh=dr((function(e){var t=ol(e);return t="function"==typeof t?t:void 0,Bh(Mn(e,1,zs,!0),void 0,t)}));var Ih=0;var Eh=Math.max;function _h(e){if(!e||!e.length)return[];var t=0;return e=hi(e,(function(e){if(zs(e))return t=Eh(e.length,t),!0})),yr(t,(function(t){return D(e,ys(t))}))}function Fh(e,t){if(!e||!e.length)return[];var r=_h(e);return null==t?r:D(r,(function(e){return Le(t,void 0,e)}))}function Oh(e,t,r,n){return Ru(e,t,r(Cn(e,t)),n)}var $h=Ko((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}));var Lh=dr((function(e,t){return zs(e)?rl(e,t):[]}));var Th=En((function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,o=function(t){return kn(t,e)};return!(t>1||this.__actions__.length)&&n instanceof je&&xt(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:uh,args:[o],thisArg:void 0}),new Ke(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(o)}));function Ah(e,t,r){var n=e.length;if(n<2)return n?Bh(e[0]):[];for(var o=-1,i=Array(n);++o<n;)for(var a=e[o],s=-1;++s<n;)s!=o&&(i[o]=rl(i[o]||a,e[s],t,r));return Bh(Mn(i,1),t,r)}var Hh=dr((function(e){return Ah(hi(e,zs))})),Nh=dr((function(e){var t=ol(e);return zs(t)&&(t=void 0),Ah(hi(e,zs),Ss(t))})),Dh=dr((function(e){var t=ol(e);return t="function"==typeof t?t:void 0,Ah(hi(e,zs),void 0,t)})),Gh=dr(_h);function jh(e,t,r){for(var n=-1,o=e.length,i=t.length,a={};++n<o;){var s=n<i?t[n]:void 0;r(a,e[n],s)}return a}var Wh=dr((function(e){var t=e.length,r=t>1?e[t-1]:void 0;return r="function"==typeof r?(e.pop(),r):void 0,Fh(e,r)})),zh={chunk:function(e,t,r){t=(r?mr(e,t,r):void 0===t)?1:ri(le(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var o=0,i=0,a=Array(ti(n/t));o<n;)a[i++]=Jn(e,o,o+=t);return a},compact:function(e){for(var t=-1,r=null==e?0:e.length,n=0,o=[];++t<r;){var i=e[t];i&&(o[n++]=i)}return o},concat:function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Bn(G(r)?Je(r):[r],Mn(t,1))},difference:nl,differenceBy:il,differenceWith:al,drop:function(e,t,r){var n=null==e?0:e.length;return n?Jn(e,(t=r||void 0===t?1:le(t))<0?0:t,n):[]},dropRight:function(e,t,r){var n=null==e?0:e.length;return n?Jn(e,0,(t=n-(t=r||void 0===t?1:le(t)))<0?0:t):[]},dropRightWhile:function(e,t){return e&&e.length?ll(e,Ss(t),!0,!0):[]},dropWhile:function(e,t){return e&&e.length?ll(e,Ss(t),!0):[]},fill:function(e,t,r,n){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&mr(e,t,r)&&(r=0,n=o),function(e,t,r,n){var o=e.length;for((r=le(r))<0&&(r=-r>o?0:o+r),(n=void 0===n||n>o?o:le(n))<0&&(n+=o),n=r>n?0:Ml(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},findIndex:Fl,findLastIndex:Al,first:Nl,flatten:In,flattenDeep:function(e){return(null==e?0:e.length)?Mn(e,Wl):[]},flattenDepth:function(e,t){return(null==e?0:e.length)?Mn(e,t=void 0===t?1:le(t)):[]},fromPairs:function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var o=e[t];n[o[0]]=o[1]}return n},head:Nl,indexOf:function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=null==r?0:le(r);return o<0&&(o=uc(n+o,0)),pt(e,t,o)},initial:function(e){return(null==e?0:e.length)?Jn(e,0,-1):[]},intersection:fc,intersectionBy:mc,intersectionWith:gc,join:function(e,t){return null==e?"":jc.call(e,t)},last:ol,lastIndexOf:function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=n;return void 0!==r&&(o=(o=le(r))<0?Vc(n+o,0):qc(o,n-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,o):dt(e,ht,o,!0)},nth:function(e,t){return e&&e.length?pu(e,le(t)):void 0},pull:ad,pullAll:id,pullAllBy:function(e,t,r){return e&&e.length&&t&&t.length?od(e,t,Ss(r)):e},pullAllWith:function(e,t,r){return e&&e.length&&t&&t.length?od(e,t,void 0,r):e},pullAt:cd,remove:function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,o=[],i=e.length;for(t=Ss(t);++n<i;){var a=e[n];t(a,n,e)&&(r.push(a),o.push(n))}return ld(e,o),r},reverse:Bd,slice:function(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&mr(e,t,r)?(t=0,r=n):(t=null==t?0:le(t),r=void 0===r?n:le(r)),Jn(e,t,r)):[]},sortedIndex:function(e,t){return Wd(e,t)},sortedIndexBy:function(e,t,r){return Gd(e,t,Ss(r))},sortedIndexOf:function(e,t){var r=null==e?0:e.length;if(r){var n=Wd(e,t);if(n<r&&ir(e[n],t))return n}return-1},sortedLastIndex:function(e,t){return Wd(e,t,!0)},sortedLastIndexBy:function(e,t,r){return Gd(e,t,Ss(r),!0)},sortedLastIndexOf:function(e,t){if(null==e?0:e.length){var r=Wd(e,t,!0)-1;if(ir(e[r],t))return r}return-1},sortedUniq:function(e){return e&&e.length?zd(e):[]},sortedUniqBy:function(e,t){return e&&e.length?zd(e,Ss(t)):[]},tail:function(e){var t=null==e?0:e.length;return t?Jn(e,1,t):[]},take:function(e,t,r){return e&&e.length?Jn(e,0,(t=r||void 0===t?1:le(t))<0?0:t):[]},takeRight:function(e,t,r){var n=null==e?0:e.length;return n?Jn(e,(t=n-(t=r||void 0===t?1:le(t)))<0?0:t,n):[]},takeRightWhile:function(e,t){return e&&e.length?ll(e,Ss(t),!1,!0):[]},takeWhile:function(e,t){return e&&e.length?ll(e,Ss(t)):[]},union:Ph,unionBy:xh,unionWith:Mh,uniq:function(e){return e&&e.length?Bh(e):[]},uniqBy:function(e,t){return e&&e.length?Bh(e,Ss(t)):[]},uniqWith:function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Bh(e,void 0,t):[]},unzip:_h,unzipWith:Fh,without:Lh,xor:Hh,xorBy:Nh,xorWith:Dh,zip:Gh,zipObject:function(e,t){return jh(e||[],t||[],sr)},zipObjectDeep:function(e,t){return jh(e||[],t||[],Ru)},zipWith:Wh},Vh={countBy:Fs,each:ul,eachRight:ml,every:function(e,t,r){var n=G(e)?Bl:Pl;return r&&mr(e,t,r)&&(t=void 0),n(e,Ss(t))},filter:function(e,t){return(G(e)?hi:Il)(e,Ss(t))},find:Ol,findLast:Hl,flatMap:function(e,t){return Mn(Gl(e,t),1)},flatMapDeep:function(e,t){return Mn(Gl(e,t),jl)},flatMapDepth:function(e,t,r){return r=void 0===r?1:le(r),Mn(Gl(e,t),r)},forEach:ul,forEachRight:ml,groupBy:Yl,includes:function(e,t,r,n){e=fr(e)?e:lc(e),r=r&&!n?le(r):0;var o=e.length;return r<0&&(r=cc(o+r,0)),ac(e)?r<=o&&e.indexOf(t,r)>-1:!!o&&pt(e,t,r)>-1},invokeMap:xc,keyBy:zc,map:Gl,orderBy:function(e,t,r,n){return null==e?[]:(G(t)||(t=null==t?[]:[t]),G(r=n?void 0:r)||(r=null==r?[]:[r]),Su(e,t,r))},partition:ed,reduce:function(e,t,r){var n=G(e)?go:Cd,o=arguments.length<3;return n(e,Ss(t),r,o,Ms)},reduceRight:function(e,t,r){var n=G(e)?wd:Cd,o=arguments.length<3;return n(e,Ss(t),r,o,fl)},reject:function(e,t){return(G(e)?hi:Il)(e,lu(Ss(t)))},sample:Id,sampleSize:function(e,t,r){return t=(r?mr(e,t,r):void 0===t)?1:le(t),(G(e)?_d:Fd)(e,t)},shuffle:function(e){return(G(e)?Od:$d)(e)},size:function(e){if(null==e)return 0;if(fr(e))return ac(e)?Vu(e):e.length;var t=Li(e);return"[object Map]"==t||"[object Set]"==t?e.size:Wr(e).length},some:function(e,t,r){var n=G(e)?Ia:Td;return r&&mr(e,t,r)&&(t=void 0),n(e,Ss(t))},sortBy:Ad},qh=Ls,Uh={after:function(e,t){if("function"!=typeof t)throw new TypeError("Expected a function");return e=le(e),function(){if(--e<1)return t.apply(this,arguments)}},ary:nr,before:Vn,bind:qn,bindKey:Kn,curry:Os,curryRight:$s,debounce:Ns,defer:Xs,delay:Qs,flip:function(e){return tr(e,512)},memoize:fn,negate:lu,once:function(e){return Vn(2,e)},overArgs:Pu,partial:Xu,partialRight:Qu,rearg:Sd,rest:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return dr(e,t=void 0===t?t:le(t))},spread:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=null==t?0:Vd(le(t),0),dr((function(r){var n=r[t],o=Yn(r,0,t);return n&&Bn(o,n),Le(e,this,o)}))},throttle:function(e,t,r){var n=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return X(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),Ns(e,t,{leading:n,maxWait:t,trailing:o})},unary:function(e){return nr(e,1)},wrap:function(e,t){return Xu(cl(t),e)}},Kh={castArray:function(){if(!arguments.length)return[];var e=arguments[0];return G(e)?e:[e]},clone:ka,cloneDeep:xa,cloneDeepWith:function(e,t){return Ca(e,5,t="function"==typeof t?t:void 0)},cloneWith:function(e,t){return Ca(e,4,t="function"==typeof t?t:void 0)},conformsTo:function(e,t){return null==t||Cs(e,t,zr(t))},eq:ir,gt:Ql,gte:ec,isArguments:kr,isArray:G,isArrayBuffer:Ic,isArrayLike:fr,isArrayLikeObject:zs,isBoolean:function(e){return!0===e||!1===e||L(e)&&"[object Boolean]"==$(e)},isBuffer:Ir,isDate:_c,isElement:function(e){return L(e)&&1===e.nodeType&&!Nn(e)},isEmpty:function(e){if(null==e)return!0;if(fr(e)&&(G(e)||"string"==typeof e||"function"==typeof e.splice||Ir(e)||Ar(e)||kr(e)))return!e.length;var t=Li(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(vr(e))return!Wr(e).length;for(var r in e)if(Fc.call(e,r))return!1;return!0},isEqual:Oc,isEqualWith:function(e,t,r){var n=(r="function"==typeof r?r:void 0)?r(e,t):void 0;return void 0===n?is(e,t,void 0,r):!!n},isError:jn,isFinite:function(e){return"number"==typeof e&&$c(e)},isFunction:fe,isInteger:Lc,isLength:pr,isMap:da,isMatch:function(e,t){return e===t||ls(e,t,us(t))},isMatchWith:function(e,t,r){return r="function"==typeof r?r:void 0,ls(e,t,us(t),r)},isNaN:function(e){return Ac(e)&&e!=+e},isNative:function(e){if(Hc(e))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pe(e)},isNil:function(e){return null==e},isNull:function(e){return null===e},isNumber:Ac,isObject:X,isObjectLike:L,isPlainObject:Nn,isRegExp:Dc,isSafeInteger:function(e){return Lc(e)&&e>=-9007199254740991&&e<=Gc},isSet:pa,isString:ac,isSymbol:A,isTypedArray:Ar,isUndefined:function(e){return void 0===e},isWeakMap:function(e){return L(e)&&"[object WeakMap]"==Li(e)},isWeakSet:function(e){return L(e)&&"[object WeakSet]"==$(e)},lt:Yc,lte:Zc,toArray:hu,toFinite:se,toInteger:le,toLength:Ml,toNumber:oe,toPlainObject:qs,toSafeInteger:function(e){return e?ni(le(e),-9007199254740991,mh):0===e?e:0},toString:vn},Jh={add:U,ceil:Qo,divide:sl,floor:zl,max:function(e){return e&&e.length?Xc(e,ce,Zl):void 0},maxBy:function(e,t){return e&&e.length?Xc(e,Ss(t),Zl):void 0},mean:function(e){return tu(e,ce)},meanBy:function(e,t){return tu(e,Ss(t))},min:function(e){return e&&e.length?Xc(e,ce,Jc):void 0},minBy:function(e,t){return e&&e.length?Xc(e,Ss(t),Jc):void 0},multiply:au,round:Pd,subtract:Ud,sum:function(e){return e&&e.length?Qc(e,ce):0},sumBy:Kd},Yh=oi,Zh=function(e,t,r){return t=se(t),void 0===r?(r=t,t=0):r=se(r),function(e,t,r){return e>=oc(t,r)&&e<nc(t,r)}(e=oe(e),t,r)},Xh=function(e,t,r){if(r&&"boolean"!=typeof r&&mr(e,t,r)&&(t=r=void 0),void 0===r&&("boolean"==typeof t?(r=t,t=void 0):"boolean"==typeof e&&(r=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=se(e),void 0===t?(t=e,e=0):t=se(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var o=md();return fd(e+o*(t-e+pd("1e-"+((o+"").length-1))),t)}return hd(e,t)},Qh={assign:qr,assignIn:Yr,assignInWith:Zr,assignWith:Xr,at:_n,create:function(e,t){var r=Fe(e);return null==t?r:ai(r,t)},defaults:js,defaultsDeep:Ys,entries:Rl,entriesIn:vl,extend:Yr,extendWith:Zr,findKey:function(e,t){return $l(e,Ss(t),Ps)},findLastKey:function(e,t){return $l(e,Ss(t),pl)},forIn:function(e,t){return null==e?e:Bs(e,cl(t),Jr)},forInRight:function(e,t){return null==e?e:hl(e,cl(t),Jr)},forOwn:function(e,t){return e&&Ps(e,cl(t))},forOwnRight:function(e,t){return e&&pl(e,cl(t))},functions:function(e){return null==e?[]:Kl(e,zr(e))},functionsIn:function(e){return null==e?[]:Kl(e,Jr(e))},get:wn,has:function(e,t){return null!=e&&fs(e,t,rc)},hasIn:ms,invert:yc,invertBy:wc,invoke:Pc,keys:zr,keysIn:Jr,mapKeys:function(e,t){var r={};return t=Ss(t),Ps(e,(function(e,n,o){or(r,t(e,n,o),e)})),r},mapValues:function(e,t){var r={};return t=Ss(t),Ps(e,(function(e,n,o){or(r,n,t(e,n,o))})),r},merge:ru,mergeWith:Js,omit:gu,omitBy:function(e,t){return yu(e,lu(Ss(t)))},pick:td,pickBy:yu,result:function(e,t,r){var n=-1,o=(t=yn(t,e)).length;for(o||(o=1,e=void 0);++n<o;){var i=null==e?void 0:e[Sn(t[n])];void 0===i&&(n=o,i=r),e=fe(i)?i.call(e):i}return e},set:function(e,t,r){return null==e?e:Ru(e,t,r)},setWith:function(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:Ru(e,t,r,n)},toPairs:Rl,toPairsIn:vl,transform:function(e,t,r){var n=G(e),o=n||Ir(e)||Ar(e);if(t=Ss(t),null==r){var i=e&&e.constructor;r=o?n?new i:[]:X(e)&&fe(i)?Fe(Fn(e)):{}}return(o?ut:Ps)(e,(function(e,n,o){return t(r,e,n,o)})),r},unset:function(e,t){return null==e||fu(e,t)},update:function(e,t,r){return null==e?e:Oh(e,t,cl(r))},updateWith:function(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:Oh(e,t,cl(r),n)},values:lc,valuesIn:function(e){return null==e?[]:sc(e,Jr(e))}},ep={at:Th,chain:ei,commit:function(){return new Ke(this.value(),this.__chain__)},lodash:Xe,next:function(){void 0===this.__values__&&(this.__values__=hu(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},plant:function(e){for(var t,r=this;r instanceof De;){var n=Ye(r);n.__index__=0,n.__values__=void 0,t?o.__wrapped__=n:t=n;var o=n;r=r.__wrapped__}return o.__wrapped__=e,t},reverse:function(){var e=this.__wrapped__;if(e instanceof je){var t=e;return this.__actions__.length&&(t=new je(this)),(t=t.reverse()).__actions__.push({func:uh,args:[Bd],thisArg:void 0}),new Ke(t,this.__chain__)}return this.thru(Bd)},tap:function(e,t){return t(e),e},thru:uh,toIterator:function(){return this},toJSON:fh,value:fh,valueOf:fh,wrapperChain:function(){return ei(this)}},tp={camelCase:Jo,capitalize:mo,deburr:So,endsWith:function(e,t,r){e=vn(e),t=V(t);var n=e.length,o=r=void 0===r?n:ni(le(r),0,n);return(r-=t.length)>=0&&e.slice(r,o)==t},escape:Cl,escapeRegExp:function(e){return(e=vn(e))&&kl.test(e)?e.replace(wl,"\\$&"):e},kebabCase:Wc,lowerCase:Uc,lowerFirst:Kc,pad:function(e,t,r){e=vn(e);var n=(t=le(t))?Vu(e):0;if(!t||n>=t)return e;var o=(t-n)/2;return Uu(Ju(o),r)+e+Uu(Ku(o),r)},padEnd:function(e,t,r){e=vn(e);var n=(t=le(t))?Vu(e):0;return t&&n<t?e+Uu(t-n,r):e},padStart:function(e,t,r){e=vn(e);var n=(t=le(t))?Vu(e):0;return t&&n<t?Uu(t-n,r)+e:e},parseInt:function(e,t,r){return r||null==t?t=0:t&&(t=+t),Zu(vn(e).replace(Yu,""),t||0)},repeat:function(e,t,r){return t=(r?mr(e,t,r):void 0===t)?1:le(t),_u(vn(e),t)},replace:function(){var e=arguments,t=vn(e[0]);return e.length<3?t:t.replace(e[1],e[2])},snakeCase:Ld,split:function(e,t,r){return r&&"number"!=typeof r&&mr(e,t,r)&&(t=r=void 0),(r=void 0===r?4294967295:r>>>0)?(e=vn(e))&&("string"==typeof t||null!=t&&!Dc(t))&&!(t=V(t))&&Xn(e)?Yn(ho(e),0,r):e.split(t,r):[]},startCase:qd,startsWith:function(e,t,r){return e=vn(e),r=null==r?0:ni(le(r),0,e.length),t=V(t),e.slice(r,r+t.length)==t},template:function(e,t,r){var n=th.imports._.templateSettings||th;r&&mr(e,t,r)&&(t=void 0),e=vn(e),t=Zr({},t,n,Zd);var o,i,a=Zr({},t.imports,n.imports,Zd),s=zr(a),l=sc(a,s),c=0,u=t.interpolate||sh,d="__p += '",h=RegExp((t.escape||sh).source+"|"+u.source+"|"+(u===eh?ah:sh).source+"|"+(t.evaluate||sh).source+"|$","g"),p=ch.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(h,(function(t,r,n,a,s,l){return n||(n=a),d+=e.slice(c,l).replace(lh,Qd),r&&(o=!0,d+="' +\n__e("+r+") +\n'"),s&&(i=!0,d+="';\n"+s+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),d+="';\n";var f=ch.call(t,"variable")&&t.variable;if(f){if(ih.test(f))throw new Error("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(i?d.replace(rh,""):d).replace(nh,"$1").replace(oh,"$1;"),d="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Wn((function(){return Function(s,p+"return "+d).apply(void 0,l)}));if(m.source=d,jn(m))throw m;return m},templateSettings:th,toLower:function(e){return vn(e).toLowerCase()},toUpper:function(e){return vn(e).toUpperCase()},trim:function(e,t,r){if((e=vn(e))&&(r||void 0===t))return Z(e);if(!e||!(t=V(t)))return e;var n=ho(e),o=ho(t);return Yn(n,Rh(n,o),gh(n,o)+1).join("")},trimEnd:function(e,t,r){if((e=vn(e))&&(r||void 0===t))return e.slice(0,J(e)+1);if(!e||!(t=V(t)))return e;var n=ho(e);return Yn(n,0,gh(n,ho(t))+1).join("")},trimStart:function(e,t,r){if((e=vn(e))&&(r||void 0===t))return e.replace(vh,"");if(!e||!(t=V(t)))return e;var n=ho(e);return Yn(n,Rh(n,ho(t))).join("")},truncate:function(e,t){var r=30,n="...";if(X(t)){var o="separator"in t?t.separator:o;r="length"in t?le(t.length):r,n="omission"in t?V(t.omission):n}var i=(e=vn(e)).length;if(Xn(e)){var a=ho(e);i=a.length}if(r>=i)return e;var s=r-Vu(n);if(s<1)return n;var l=a?Yn(a,0,s).join(""):e.slice(0,s);if(void 0===o)return l+n;if(a&&(s+=l.length-s),Dc(o)){if(e.slice(s).search(o)){var c,u=l;for(o.global||(o=RegExp(o.source,vn(yh.exec(o))+"g")),o.lastIndex=0;c=o.exec(u);)var d=c.index;l=l.slice(0,void 0===d?s:d)}}else if(e.indexOf(V(o),s)!=s){var h=l.lastIndexOf(o);h>-1&&(l=l.slice(0,h))}return l+n},unescape:function(e){return(e=vn(e))&&Ch.test(e)?e.replace(Sh,bh):e},upperCase:$h,upperFirst:fo,words:qo},rp={attempt:Wn,bindAll:Un,cond:function(e){var t=null==e?0:e.length,r=Ss;return e=t?D(e,(function(e){if("function"!=typeof e[1])throw new TypeError("Expected a function");return[r(e[0]),e[1]]})):[],dr((function(r){for(var n=-1;++n<t;){var o=e[n];if(Le(o[0],this,r))return Le(o[1],this,r)}}))},conforms:function(e){return function(e){var t=zr(e);return function(r){return Cs(r,e,t)}}(Ca(e,1))},constant:at,defaultTo:function(e,t){return null==e||e!=e?t:e},flow:ql,flowRight:Ul,identity:ce,iteratee:function(e){return Ss("function"==typeof e?e:Ca(e,1))},matches:function(e){return hs(Ca(e,1))},matchesProperty:function(e,t){return vs(e,Ca(t,1))},method:nu,methodOf:ou,mixin:iu,noop:We,nthArg:function(e){return e=le(e),dr((function(t){return pu(t,e)}))},over:wu,overEvery:xu,overSome:Mu,property:bs,propertyOf:function(e){return function(t){return null==e?void 0:Cn(e,t)}},range:yd,rangeRight:bd,stubArray:pi,stubFalse:Br,stubObject:function(){return{}},stubString:function(){return""},stubTrue:function(){return!0},times:function(e,t){if((e=le(e))<1||e>9007199254740991)return[];var r=dh,n=hh(e,dh);t=cl(t),e-=dh;for(var o=yr(n,t);++r<e;)t(r);return o},toPath:function(e){return G(e)?D(e,Sn):A(e)?[e]:Je(Rn(vn(e)))},uniqueId:function(e){var t=++Ih;return vn(e)+t}};var np=Math.max,op=Math.min;var ip=Math.min;
/**
	 * @license
	 * Lodash (Custom Build) <https://lodash.com/>
	 * Build: `lodash modularize exports="es" -o ./`
	 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	 * Released under MIT license <https://lodash.com/license>
	 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 */
var ap,sp=4294967295,lp=Array.prototype,cp=Object.prototype.hasOwnProperty,up=B?B.iterator:void 0,dp=Math.max,hp=Math.min,pp=function(e){return function(t,r,n){if(null==n){var o=X(r),i=o&&zr(r),a=i&&i.length&&Kl(r,i);(a?a.length:o)||(n=r,r=t,t=this)}return e(t,r,n)}}(iu);Xe.after=Uh.after,Xe.ary=Uh.ary,Xe.assign=Qh.assign,Xe.assignIn=Qh.assignIn,Xe.assignInWith=Qh.assignInWith,Xe.assignWith=Qh.assignWith,Xe.at=Qh.at,Xe.before=Uh.before,Xe.bind=Uh.bind,Xe.bindAll=rp.bindAll,Xe.bindKey=Uh.bindKey,Xe.castArray=Kh.castArray,Xe.chain=ep.chain,Xe.chunk=zh.chunk,Xe.compact=zh.compact,Xe.concat=zh.concat,Xe.cond=rp.cond,Xe.conforms=rp.conforms,Xe.constant=rp.constant,Xe.countBy=Vh.countBy,Xe.create=Qh.create,Xe.curry=Uh.curry,Xe.curryRight=Uh.curryRight,Xe.debounce=Uh.debounce,Xe.defaults=Qh.defaults,Xe.defaultsDeep=Qh.defaultsDeep,Xe.defer=Uh.defer,Xe.delay=Uh.delay,Xe.difference=zh.difference,Xe.differenceBy=zh.differenceBy,Xe.differenceWith=zh.differenceWith,Xe.drop=zh.drop,Xe.dropRight=zh.dropRight,Xe.dropRightWhile=zh.dropRightWhile,Xe.dropWhile=zh.dropWhile,Xe.fill=zh.fill,Xe.filter=Vh.filter,Xe.flatMap=Vh.flatMap,Xe.flatMapDeep=Vh.flatMapDeep,Xe.flatMapDepth=Vh.flatMapDepth,Xe.flatten=zh.flatten,Xe.flattenDeep=zh.flattenDeep,Xe.flattenDepth=zh.flattenDepth,Xe.flip=Uh.flip,Xe.flow=rp.flow,Xe.flowRight=rp.flowRight,Xe.fromPairs=zh.fromPairs,Xe.functions=Qh.functions,Xe.functionsIn=Qh.functionsIn,Xe.groupBy=Vh.groupBy,Xe.initial=zh.initial,Xe.intersection=zh.intersection,Xe.intersectionBy=zh.intersectionBy,Xe.intersectionWith=zh.intersectionWith,Xe.invert=Qh.invert,Xe.invertBy=Qh.invertBy,Xe.invokeMap=Vh.invokeMap,Xe.iteratee=rp.iteratee,Xe.keyBy=Vh.keyBy,Xe.keys=zr,Xe.keysIn=Qh.keysIn,Xe.map=Vh.map,Xe.mapKeys=Qh.mapKeys,Xe.mapValues=Qh.mapValues,Xe.matches=rp.matches,Xe.matchesProperty=rp.matchesProperty,Xe.memoize=Uh.memoize,Xe.merge=Qh.merge,Xe.mergeWith=Qh.mergeWith,Xe.method=rp.method,Xe.methodOf=rp.methodOf,Xe.mixin=pp,Xe.negate=lu,Xe.nthArg=rp.nthArg,Xe.omit=Qh.omit,Xe.omitBy=Qh.omitBy,Xe.once=Uh.once,Xe.orderBy=Vh.orderBy,Xe.over=rp.over,Xe.overArgs=Uh.overArgs,Xe.overEvery=rp.overEvery,Xe.overSome=rp.overSome,Xe.partial=Uh.partial,Xe.partialRight=Uh.partialRight,Xe.partition=Vh.partition,Xe.pick=Qh.pick,Xe.pickBy=Qh.pickBy,Xe.property=rp.property,Xe.propertyOf=rp.propertyOf,Xe.pull=zh.pull,Xe.pullAll=zh.pullAll,Xe.pullAllBy=zh.pullAllBy,Xe.pullAllWith=zh.pullAllWith,Xe.pullAt=zh.pullAt,Xe.range=rp.range,Xe.rangeRight=rp.rangeRight,Xe.rearg=Uh.rearg,Xe.reject=Vh.reject,Xe.remove=zh.remove,Xe.rest=Uh.rest,Xe.reverse=zh.reverse,Xe.sampleSize=Vh.sampleSize,Xe.set=Qh.set,Xe.setWith=Qh.setWith,Xe.shuffle=Vh.shuffle,Xe.slice=zh.slice,Xe.sortBy=Vh.sortBy,Xe.sortedUniq=zh.sortedUniq,Xe.sortedUniqBy=zh.sortedUniqBy,Xe.split=tp.split,Xe.spread=Uh.spread,Xe.tail=zh.tail,Xe.take=zh.take,Xe.takeRight=zh.takeRight,Xe.takeRightWhile=zh.takeRightWhile,Xe.takeWhile=zh.takeWhile,Xe.tap=ep.tap,Xe.throttle=Uh.throttle,Xe.thru=uh,Xe.toArray=Kh.toArray,Xe.toPairs=Qh.toPairs,Xe.toPairsIn=Qh.toPairsIn,Xe.toPath=rp.toPath,Xe.toPlainObject=Kh.toPlainObject,Xe.transform=Qh.transform,Xe.unary=Uh.unary,Xe.union=zh.union,Xe.unionBy=zh.unionBy,Xe.unionWith=zh.unionWith,Xe.uniq=zh.uniq,Xe.uniqBy=zh.uniqBy,Xe.uniqWith=zh.uniqWith,Xe.unset=Qh.unset,Xe.unzip=zh.unzip,Xe.unzipWith=zh.unzipWith,Xe.update=Qh.update,Xe.updateWith=Qh.updateWith,Xe.values=Qh.values,Xe.valuesIn=Qh.valuesIn,Xe.without=zh.without,Xe.words=tp.words,Xe.wrap=Uh.wrap,Xe.xor=zh.xor,Xe.xorBy=zh.xorBy,Xe.xorWith=zh.xorWith,Xe.zip=zh.zip,Xe.zipObject=zh.zipObject,Xe.zipObjectDeep=zh.zipObjectDeep,Xe.zipWith=zh.zipWith,Xe.entries=Qh.toPairs,Xe.entriesIn=Qh.toPairsIn,Xe.extend=Qh.assignIn,Xe.extendWith=Qh.assignInWith,pp(Xe,Xe),Xe.add=Jh.add,Xe.attempt=rp.attempt,Xe.camelCase=tp.camelCase,Xe.capitalize=tp.capitalize,Xe.ceil=Jh.ceil,Xe.clamp=Yh,Xe.clone=Kh.clone,Xe.cloneDeep=Kh.cloneDeep,Xe.cloneDeepWith=Kh.cloneDeepWith,Xe.cloneWith=Kh.cloneWith,Xe.conformsTo=Kh.conformsTo,Xe.deburr=tp.deburr,Xe.defaultTo=rp.defaultTo,Xe.divide=Jh.divide,Xe.endsWith=tp.endsWith,Xe.eq=Kh.eq,Xe.escape=tp.escape,Xe.escapeRegExp=tp.escapeRegExp,Xe.every=Vh.every,Xe.find=Vh.find,Xe.findIndex=zh.findIndex,Xe.findKey=Qh.findKey,Xe.findLast=Vh.findLast,Xe.findLastIndex=zh.findLastIndex,Xe.findLastKey=Qh.findLastKey,Xe.floor=Jh.floor,Xe.forEach=Vh.forEach,Xe.forEachRight=Vh.forEachRight,Xe.forIn=Qh.forIn,Xe.forInRight=Qh.forInRight,Xe.forOwn=Qh.forOwn,Xe.forOwnRight=Qh.forOwnRight,Xe.get=Qh.get,Xe.gt=Kh.gt,Xe.gte=Kh.gte,Xe.has=Qh.has,Xe.hasIn=Qh.hasIn,Xe.head=zh.head,Xe.identity=ce,Xe.includes=Vh.includes,Xe.indexOf=zh.indexOf,Xe.inRange=Zh,Xe.invoke=Qh.invoke,Xe.isArguments=Kh.isArguments,Xe.isArray=G,Xe.isArrayBuffer=Kh.isArrayBuffer,Xe.isArrayLike=Kh.isArrayLike,Xe.isArrayLikeObject=Kh.isArrayLikeObject,Xe.isBoolean=Kh.isBoolean,Xe.isBuffer=Kh.isBuffer,Xe.isDate=Kh.isDate,Xe.isElement=Kh.isElement,Xe.isEmpty=Kh.isEmpty,Xe.isEqual=Kh.isEqual,Xe.isEqualWith=Kh.isEqualWith,Xe.isError=Kh.isError,Xe.isFinite=Kh.isFinite,Xe.isFunction=Kh.isFunction,Xe.isInteger=Kh.isInteger,Xe.isLength=Kh.isLength,Xe.isMap=Kh.isMap,Xe.isMatch=Kh.isMatch,Xe.isMatchWith=Kh.isMatchWith,Xe.isNaN=Kh.isNaN,Xe.isNative=Kh.isNative,Xe.isNil=Kh.isNil,Xe.isNull=Kh.isNull,Xe.isNumber=Kh.isNumber,Xe.isObject=X,Xe.isObjectLike=Kh.isObjectLike,Xe.isPlainObject=Kh.isPlainObject,Xe.isRegExp=Kh.isRegExp,Xe.isSafeInteger=Kh.isSafeInteger,Xe.isSet=Kh.isSet,Xe.isString=Kh.isString,Xe.isSymbol=Kh.isSymbol,Xe.isTypedArray=Kh.isTypedArray,Xe.isUndefined=Kh.isUndefined,Xe.isWeakMap=Kh.isWeakMap,Xe.isWeakSet=Kh.isWeakSet,Xe.join=zh.join,Xe.kebabCase=tp.kebabCase,Xe.last=ol,Xe.lastIndexOf=zh.lastIndexOf,Xe.lowerCase=tp.lowerCase,Xe.lowerFirst=tp.lowerFirst,Xe.lt=Kh.lt,Xe.lte=Kh.lte,Xe.max=Jh.max,Xe.maxBy=Jh.maxBy,Xe.mean=Jh.mean,Xe.meanBy=Jh.meanBy,Xe.min=Jh.min,Xe.minBy=Jh.minBy,Xe.stubArray=rp.stubArray,Xe.stubFalse=rp.stubFalse,Xe.stubObject=rp.stubObject,Xe.stubString=rp.stubString,Xe.stubTrue=rp.stubTrue,Xe.multiply=Jh.multiply,Xe.nth=zh.nth,Xe.noop=rp.noop,Xe.now=qh,Xe.pad=tp.pad,Xe.padEnd=tp.padEnd,Xe.padStart=tp.padStart,Xe.parseInt=tp.parseInt,Xe.random=Xh,Xe.reduce=Vh.reduce,Xe.reduceRight=Vh.reduceRight,Xe.repeat=tp.repeat,Xe.replace=tp.replace,Xe.result=Qh.result,Xe.round=Jh.round,Xe.sample=Vh.sample,Xe.size=Vh.size,Xe.snakeCase=tp.snakeCase,Xe.some=Vh.some,Xe.sortedIndex=zh.sortedIndex,Xe.sortedIndexBy=zh.sortedIndexBy,Xe.sortedIndexOf=zh.sortedIndexOf,Xe.sortedLastIndex=zh.sortedLastIndex,Xe.sortedLastIndexBy=zh.sortedLastIndexBy,Xe.sortedLastIndexOf=zh.sortedLastIndexOf,Xe.startCase=tp.startCase,Xe.startsWith=tp.startsWith,Xe.subtract=Jh.subtract,Xe.sum=Jh.sum,Xe.sumBy=Jh.sumBy,Xe.template=tp.template,Xe.times=rp.times,Xe.toFinite=Kh.toFinite,Xe.toInteger=le,Xe.toLength=Kh.toLength,Xe.toLower=tp.toLower,Xe.toNumber=Kh.toNumber,Xe.toSafeInteger=Kh.toSafeInteger,Xe.toString=Kh.toString,Xe.toUpper=tp.toUpper,Xe.trim=tp.trim,Xe.trimEnd=tp.trimEnd,Xe.trimStart=tp.trimStart,Xe.truncate=tp.truncate,Xe.unescape=tp.unescape,Xe.uniqueId=rp.uniqueId,Xe.upperCase=tp.upperCase,Xe.upperFirst=tp.upperFirst,Xe.each=Vh.forEach,Xe.eachRight=Vh.forEachRight,Xe.first=zh.head,pp(Xe,(ap={},Ps(Xe,(function(e,t){cp.call(Xe.prototype,t)||(ap[t]=e)})),ap),{chain:!1}),Xe.VERSION="4.17.21",(Xe.templateSettings=tp.templateSettings).imports._=Xe,ut(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Xe[e].placeholder=Xe})),ut(["drop","take"],(function(e,t){je.prototype[e]=function(r){r=void 0===r?1:dp(le(r),0);var n=this.__filtered__&&!t?new je(this):this.clone();return n.__filtered__?n.__takeCount__=hp(r,n.__takeCount__):n.__views__.push({size:hp(r,sp),type:e+(n.__dir__<0?"Right":"")}),n},je.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),ut(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;je.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ss(e),type:r}),t.__filtered__=t.__filtered__||n,t}})),ut(["head","last"],(function(e,t){var r="take"+(t?"Right":"");je.prototype[e]=function(){return this[r](1).value()[0]}})),ut(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");je.prototype[e]=function(){return this.__filtered__?new je(this):this[r](1)}})),je.prototype.compact=function(){return this.filter(ce)},je.prototype.find=function(e){return this.filter(e).head()},je.prototype.findLast=function(e){return this.reverse().find(e)},je.prototype.invokeMap=dr((function(e,t){return"function"==typeof e?new je(this):this.map((function(r){return Bc(r,e,t)}))})),je.prototype.reject=function(e){return this.filter(lu(Ss(e)))},je.prototype.slice=function(e,t){e=le(e);var r=this;return r.__filtered__&&(e>0||t<0)?new je(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),void 0!==t&&(r=(t=le(t))<0?r.dropRight(-t):r.take(t-e)),r)},je.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},je.prototype.toArray=function(){return this.take(sp)},Ps(je.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),o=Xe[n?"take"+("last"==t?"Right":""):t],i=n||/^find/.test(t);o&&(Xe.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,s=t instanceof je,l=a[0],c=s||G(t),u=function(e){var t=o.apply(Xe,Bn([e],a));return n&&d?t[0]:t};c&&r&&"function"==typeof l&&1!=l.length&&(s=c=!1);var d=this.__chain__,h=!!this.__actions__.length,p=i&&!d,f=s&&!h;if(!i&&c){t=f?t:new je(this);var m=e.apply(t,a);return m.__actions__.push({func:uh,args:[u],thisArg:void 0}),new Ke(m,d)}return p&&f?e.apply(this,a):(m=this.thru(u),p?n?m.value()[0]:m.value():m)})})),ut(["pop","push","shift","sort","splice","unshift"],(function(e){var t=lp[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Xe.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var o=this.value();return t.apply(G(o)?o:[],e)}return this[r]((function(r){return t.apply(G(r)?r:[],e)}))}})),Ps(je.prototype,(function(e,t){var r=Xe[t];if(r){var n=r.name+"";cp.call(Ve,n)||(Ve[n]=[]),Ve[n].push({name:t,func:r})}})),Ve[At(void 0,2).name]=[{name:"wrapper",func:void 0}],je.prototype.clone=function(){var e=new je(this.__wrapped__);return e.__actions__=Je(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Je(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Je(this.__views__),e},je.prototype.reverse=function(){if(this.__filtered__){var e=new je(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},je.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=G(e),n=t<0,o=r?e.length:0,i=function(e,t,r){for(var n=-1,o=r.length;++n<o;){var i=r[n],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=op(t,e+a);break;case"takeRight":e=np(e,t-a)}}return{start:e,end:t}}(0,o,this.__views__),a=i.start,s=i.end,l=s-a,c=n?s:a-1,u=this.__iteratees__,d=u.length,h=0,p=ip(l,this.__takeCount__);if(!r||!n&&o==l&&p==l)return ph(e,this.__actions__);var f=[];e:for(;l--&&h<p;){for(var m=-1,g=e[c+=t];++m<d;){var R=u[m],v=R.iteratee,y=R.type,b=v(g);if(2==y)g=b;else if(!b){if(1==y)continue e;break e}}f[h++]=g}return f},Xe.prototype.at=ep.at,Xe.prototype.chain=ep.wrapperChain,Xe.prototype.commit=ep.commit,Xe.prototype.next=ep.next,Xe.prototype.plant=ep.plant,Xe.prototype.reverse=ep.reverse,Xe.prototype.toJSON=Xe.prototype.valueOf=Xe.prototype.value=ep.value,Xe.prototype.first=Xe.prototype.head,up&&(Xe.prototype[up]=ep.toIterator)
/**
	 * @license
	 * Lodash (Custom Build) <https://lodash.com/>
	 * Build: `lodash modularize exports="es" -o ./`
	 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	 * Released under MIT license <https://lodash.com/license>
	 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 */;var fp={};!function(e){!function(){const t="1.2.0";function r(e){alert("Mod ERROR:\n"+e);const t=new Error(e);throw console.error(t),t}const n=new TextEncoder;function o(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function i(e){const t=new Set;return e.filter((e=>!t.has(e)&&t.add(e)))}const a=new Map,s=new Set;function l(e){s.has(e)||(s.add(e),console.warn(e))}function c(e){const t=[],r=new Map,n=new Set;for(const o of p.values()){const i=o.patching.get(e.name);if(i){t.push(...i.hooks);for(const[t,a]of i.patches.entries())r.has(t)&&r.get(t)!==a&&l(`ModSDK: Mod '${o.name}' is patching function ${e.name} with same pattern that is already applied by different mod, but with different pattern:\nPattern:\n${t}\nPatch1:\n${r.get(t)||""}\nPatch2:\n${a}`),r.set(t,a),n.add(o.name)}}t.sort(((e,t)=>t.priority-e.priority));const o=function(e,t){if(0===t.size)return e;let r=e.toString().replaceAll("\r\n","\n");for(const[n,o]of t.entries())r.includes(n)||l(`ModSDK: Patching ${e.name}: Patch ${n} not applied`),r=r.replaceAll(n,o);return(0,eval)(`(${r})`)}(e.original,r);let i=function(t){var r,i;const a=null===(i=(r=R.errorReporterHooks).hookChainExit)||void 0===i?void 0:i.call(r,e.name,n),s=o.apply(this,t);return null==a||a(),s};for(let r=t.length-1;r>=0;r--){const n=t[r],o=i;i=function(t){var r,i;const a=null===(i=(r=R.errorReporterHooks).hookEnter)||void 0===i?void 0:i.call(r,e.name,n.mod),s=n.hook.apply(this,[t,e=>{if(1!==arguments.length||!Array.isArray(t))throw new Error(`Mod ${n.mod} failed to call next hook: Expected args to be array, got ${typeof e}`);return o.call(this,e)}]);return null==a||a(),s}}return{hooks:t,patches:r,patchesSources:n,enter:i,final:o}}function u(e,t=!1){let r=a.get(e);if(r)t&&(r.precomputed=c(r));else{let t=window;const i=e.split(".");for(let r=0;r<i.length-1;r++)if(t=t[i[r]],!o(t))throw new Error(`ModSDK: Function ${e} to be patched not found; ${i.slice(0,r+1).join(".")} is not object`);const s=t[i[i.length-1]];if("function"!=typeof s)throw new Error(`ModSDK: Function ${e} to be patched not found`);const l=function(e){let t=-1;for(const r of n.encode(e)){let e=255&(t^r);for(let t=0;t<8;t++)e=1&e?-306674912^e>>>1:e>>>1;t=t>>>8^e}return(~t>>>0).toString(16).padStart(8,"0").toUpperCase()}(s.toString().replaceAll("\r\n","\n")),u={name:e,original:s,originalHash:l};r=Object.assign(Object.assign({},u),{precomputed:c(u),router:()=>{},context:t,contextProperty:i[i.length-1]}),r.router=function(e){return function(...t){return e.precomputed.enter.apply(this,[t])}}(r),a.set(e,r),t[r.contextProperty]=r.router}return r}function d(){for(const e of a.values())e.precomputed=c(e)}function h(){const e=new Map;for(const[t,r]of a)e.set(t,{name:t,original:r.original,originalHash:r.originalHash,sdkEntrypoint:r.router,currentEntrypoint:r.context[r.contextProperty],hookedByMods:i(r.precomputed.hooks.map((e=>e.mod))),patchedByMods:Array.from(r.precomputed.patchesSources)});return e}const p=new Map;function f(e){p.get(e.name)!==e&&r(`Failed to unload mod '${e.name}': Not registered`),p.delete(e.name),e.loaded=!1,d()}function m(e,t){e&&"object"==typeof e||r("Failed to register mod: Expected info object, got "+typeof e),"string"==typeof e.name&&e.name||r("Failed to register mod: Expected name to be non-empty string, got "+typeof e.name);let n=`'${e.name}'`;"string"==typeof e.fullName&&e.fullName||r(`Failed to register mod ${n}: Expected fullName to be non-empty string, got ${typeof e.fullName}`),n=`'${e.fullName} (${e.name})'`,"string"!=typeof e.version&&r(`Failed to register mod ${n}: Expected version to be string, got ${typeof e.version}`),e.repository||(e.repository=void 0),void 0!==e.repository&&"string"!=typeof e.repository&&r(`Failed to register mod ${n}: Expected repository to be undefined or string, got ${typeof e.version}`),null==t&&(t={}),t&&"object"==typeof t||r(`Failed to register mod ${n}: Expected options to be undefined or object, got ${typeof t}`);const i=!0===t.allowReplace,a=p.get(e.name);a&&(a.allowReplace&&i||r(`Refusing to load mod ${n}: it is already loaded and doesn't allow being replaced.\nWas the mod loaded multiple times?`),f(a));const s=e=>{let t=h.patching.get(e.name);return t||(t={hooks:[],patches:new Map},h.patching.set(e.name,t)),t},l=(e,t)=>(...o)=>{var i,a;const s=null===(a=(i=R.errorReporterHooks).apiEndpointEnter)||void 0===a?void 0:a.call(i,e,h.name);h.loaded||r(`Mod ${n} attempted to call SDK function after being unloaded`);const l=t(...o);return null==s||s(),l},c={unload:l("unload",(()=>f(h))),hookFunction:l("hookFunction",((e,t,o)=>{"string"==typeof e&&e||r(`Mod ${n} failed to patch a function: Expected function name string, got ${typeof e}`);const i=u(e),a=s(i);"number"!=typeof t&&r(`Mod ${n} failed to hook function '${e}': Expected priority number, got ${typeof t}`),"function"!=typeof o&&r(`Mod ${n} failed to hook function '${e}': Expected hook function, got ${typeof o}`);const l={mod:h.name,priority:t,hook:o};return a.hooks.push(l),d(),()=>{const e=a.hooks.indexOf(l);e>=0&&(a.hooks.splice(e,1),d())}})),patchFunction:l("patchFunction",((e,t)=>{"string"==typeof e&&e||r(`Mod ${n} failed to patch a function: Expected function name string, got ${typeof e}`);const i=u(e),a=s(i);o(t)||r(`Mod ${n} failed to patch function '${e}': Expected patches object, got ${typeof t}`);for(const[o,i]of Object.entries(t))"string"==typeof i?a.patches.set(o,i):null===i?a.patches.delete(o):r(`Mod ${n} failed to patch function '${e}': Invalid format of patch '${o}'`);d()})),removePatches:l("removePatches",(e=>{"string"==typeof e&&e||r(`Mod ${n} failed to patch a function: Expected function name string, got ${typeof e}`);const t=u(e);s(t).patches.clear(),d()})),callOriginal:l("callOriginal",((e,t,o)=>{"string"==typeof e&&e||r(`Mod ${n} failed to call a function: Expected function name string, got ${typeof e}`);const i=u(e);return Array.isArray(t)||r(`Mod ${n} failed to call a function: Expected args array, got ${typeof t}`),i.original.apply(null!=o?o:globalThis,t)})),getOriginalHash:l("getOriginalHash",(e=>("string"==typeof e&&e||r(`Mod ${n} failed to get hash: Expected function name string, got ${typeof e}`),u(e).originalHash)))},h={name:e.name,fullName:e.fullName,version:e.version,repository:e.repository,allowReplace:i,api:c,loaded:!0,patching:new Map};return p.set(e.name,h),Object.freeze(c)}function g(){const e=[];for(const t of p.values())e.push({name:t.name,fullName:t.fullName,version:t.version,repository:t.repository});return e}let R;const v=void 0===window.bcModSdk?window.bcModSdk=function(){const e={version:t,apiVersion:1,registerMod:m,getModsInfo:g,getPatchingInfo:h,errorReporterHooks:Object.seal({apiEndpointEnter:null,hookEnter:null,hookChainExit:null})};return R=e,Object.freeze(e)}():(o(window.bcModSdk)||r("Failed to init Mod SDK: Name already in use"),1!==window.bcModSdk.apiVersion&&r(`Failed to init Mod SDK: Different version already loaded ('1.2.0' vs '${window.bcModSdk.version}')`),window.bcModSdk.version!==t&&alert(`Mod SDK warning: Loading different but compatible versions ('1.2.0' vs '${window.bcModSdk.version}')\nOne of mods you are using is using an old version of SDK. It will work for now but please inform author to update`),window.bcModSdk);Object.defineProperty(e,"__esModule",{value:!0}),e.default=v}()}(fp);var mp,gp,Rp=n(fp);const vp=Array.isArray,yp=Object.keys,bp=Object.entries,Sp=Object.fromEntries;function Cp(e,t){return e.includes(t)}const wp=Number.isInteger;mp=new WeakSet,gp=function(e,t){const r=new Date(Date.now());console[e]("MBS:",...t),this.push({date:r,level:e,args:t})};const kp=new class extends Array{constructor(){super(...arguments),mp.add(this)}debug(...e){b(this,mp,"m",gp).call(this,"debug",e)}log(...e){b(this,mp,"m",gp).call(this,"log",e)}warn(...e){b(this,mp,"m",gp).call(this,"warn",e)}error(...e){b(this,mp,"m",gp).call(this,"error",e)}toJSON(){return this.map((e=>({date:e.date.toUTCString(),level:e.level,args:e.args.map((e=>e instanceof Map||e instanceof Set?Array.from(e):e))})))}};async function Bp(e,t=100){for(;!e();)await new Promise((e=>setTimeout(e,t)));return!0}var Pp,xp,Mp,Ip;const Ep=Object.freeze(["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]),_p=/^(v?)([0-9]+)\.([0-9]+)\.([0-9]+)(\.\S+)?$/;function Fp(e,t,r=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){if(!(Number.isInteger(e)&&e>=r&&e<=n))throw"number"!=typeof e?new TypeError(`Invalid "${t}" type: ${typeof e}`):Number.isInteger(e)?new RangeError(`"${t}" must fall in the [${r}, ${n}] interval: ${e}`):new Error(`"${t}" must be an integer: ${e}`)}function Op(e,t,r){if(Fp(t,"n",0),!Array.isArray(e))throw new TypeError('Invalid "list" type: '+typeof e);const n=t-e.length;return n>0&&e.push(...Array(n).fill(r)),e}function $p(e,t){if(Fp(t,"n",0),!Array.isArray(e))throw new TypeError('Invalid "list" type: '+typeof e);const r=e.length-t;return r>0&&e.splice(t,r),e}function Lp(e){return Fp(e,"n",0,8),yd(0,e).map((e=>Id(Ep))).join("")}const Tp=Rp.registerMod({name:"MBS",fullName:"Maid's Bondage Scripts",repository:"https://github.com/bananarama92/MBS",version:t});Pp=new WeakMap;const Ap=new class{constructor(){Pp.set(this,null)}get modName(){return"MBS"}getRuleState(e){return null===b(this,Pp,"f")&&"undefined"!=typeof bcx&&S(this,Pp,bcx.getModApi("MBS"),"f"),b(this,Pp,"f")?.getRuleState(e)??null}};function Hp(e,t){let r=`${e}(`;return r+=Object.values(t).map((e=>String(e))).join(", "),r+=")",r}class Np{get index(){return b(this,Mp,"f")}set index(e){this.setPosition(e)}get value(){return b(this,xp,"f")[b(this,Mp,"f")]}get list(){return b(this,xp,"f")}constructor(e,t=0){if(xp.set(this,void 0),Mp.set(this,void 0),!Gp(e))throw new TypeError('Invalid "iterable" type: '+typeof e);const r=Object.freeze([...e]);if(0===r.length)throw new Error('Passed "iterable" must contain at least one element');Fp(t,"index",0,r.length-1),S(this,xp,r,"f"),S(this,Mp,t,"f")}*[(xp=new WeakMap,Mp=new WeakMap,Symbol.iterator)](){for(;;)yield this.next()}next(e=!0){const t=(b(this,Mp,"f")+1)%b(this,xp,"f").length;return e&&S(this,Mp,t,"f"),b(this,xp,"f")[t]}previous(e=!0){const t=(b(this,Mp,"f")+b(this,xp,"f").length-1)%b(this,xp,"f").length;return e&&S(this,Mp,t,"f"),b(this,xp,"f")[t]}setPosition(e){Fp(e,"index",0,b(this,xp,"f").length-1),S(this,Mp,e,"f")}toString(){return Hp(typeof this,this.toJSON())}toJSON(){return{list:this.list,index:this.index}}}function Dp(e,t){if(Fp(e,"start",0,65535),!vp(t))throw new TypeError('Invalid "indices" type: '+typeof t);const r=e+Math.max(0,...t)+1;Fp(r,"stop",e+1,65535);const n=yd(e,r);return t.map((e=>String.fromCharCode(n[e])))}function Gp(e){return Symbol.iterator in Object(e)}class jp{constructor(e=0,t=0,r=0,n=!1){if(Ip.set(this,void 0),Fp(e,"major",0,65535),Fp(t,"minor",0,65535),Fp(r,"micro",0,65535),"boolean"!=typeof n)throw new TypeError('Invalid "beta" type: '+typeof n);this.major=e,this.minor=t,this.micro=r,this.beta=n,S(this,Ip,[e,t,r].map((e=>String.fromCharCode(e)))+String.fromCharCode(n?0:1),"f"),Object.freeze(this)}equal(e){return e instanceof jp&&this.valueOf()===e.valueOf()}greater(e){return e instanceof jp&&this.valueOf()>e.valueOf()}lesser(e){return e instanceof jp&&this.valueOf()<e.valueOf()}greaterOrEqual(e){return e instanceof jp&&this.valueOf()>=e.valueOf()}lesserOrEqual(e){return e instanceof jp&&this.valueOf()<=e.valueOf()}static fromVersion(e){const t=_p.exec(e);if(null===t)throw new Error(`Invalid "version": ${e}`);return new jp(Number(t[2]),Number(t[3]),Number(t[4]),void 0!==t[5])}static fromBCVersion(e){const t=GameVersionFormat.exec(e);if(null===t)throw new Error(`Invalid BC version: "${e}"`);return new jp(Number(t[1]),0,0,void 0!==t[2])}toString(){return Hp(typeof this,this.toJSON())}valueOf(){return b(this,Ip,"f")}toJSON(){return{major:this.major,minor:this.minor,micro:this.micro,beta:this.beta}}}Ip=new WeakMap;const Wp=Object.freeze(Object.fromEntries([["CraftingSaveServer",["025B434F"]],["CraftingClick",["9169F897"]],["CraftingRun",["51577F65"]],["SpeechTransformProcess",["666DDA2F"]],["SpeechTransformGagGarble",["C056FE08"]],["PreferenceLoad",["8BAC28C8"]],["WheelFortuneLoad",["204D57D4"]],["WheelFortuneClick",["21CCD6B4"]],["WheelFortuneRun",["150059B6"]],["WheelFortuneMouseUp",["1465BDFA"]],["WheelFortuneMouseDown",["306C80B6"]],["WheelFortuneCustomizeLoad",["97F0A81E"]],["WheelFortuneDrawWheel",["A8BF62A5"]]].map((e=>{const[t,r]=e,n=new Set(r.filter((e=>null!=e)));return[t,Object.freeze(n)]}))));function zp(e,t,r){if(lg(t),null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);ExtendedItemSetOptionByRecord(t,e,r,{refresh:!1,push:!1})}function Vp(e,t,r){const n={Asset:e};return ExtendedItemInit(t,n,!1,!1),r&&zp(n,t,r),n.Property??{}}const qp=Object.freeze({NONE:0,CLOTHES:1,UNDERWEAR:2,COSPLAY:3,ALL:4});let Up;function Kp(e,t){switch(e){case qp.NONE:return()=>!1;case qp.CLOTHES:return e=>e.Group.AllowNone&&!e.BodyCosplay&&!e.Group.Underwear;case qp.UNDERWEAR:return e=>e.Group.AllowNone&&!e.BodyCosplay;case qp.COSPLAY:return e=>!cg(t)?e.Group.AllowNone&&!e.BodyCosplay:e.Group.AllowNone;case qp.ALL:return e=>!!cg(t)||e.Group.AllowNone&&!e.BodyCosplay;default:throw new Error(`Invalid "stripLevel" value: ${e}`)}}function Jp(e,t){if(void 0===t)return[-1,!1];if(void 0!==t.priority&&void 0!==t.blocksSubSet)return[t.priority,t.blocksSubSet];if(0===t.block.size)return t.priority=0,t.blocksSubSet=!1,[t.priority,t.blocksSubSet];{const r=[];for(const n of t.block)r.push(Jp(e,e.get(n)));return t.priority=1+Math.max(0,...r.map((e=>e[0]))),t.blocksSubSet=t.superSet&&r.some((e=>e[1])),[t.priority,t.blocksSubSet]}}function Yp(e,t,r=[]){if(!vp(e))throw new TypeError('Invalid "itemList" type: '+typeof e);const n=new Map;[e,r].forEach(((e,r)=>{for(const{Group:o,Name:i,TypeRecord:a}of e){if(n.has(o))continue;const e=AssetGet(t.AssetFamily,o,i);if(null==e)throw new Error(`Unknown asset: ${o}${i}`);if("Item"!==e.Group.Category)continue;const s=Vp(e,t,a),l={superSet:1===r,block:new Set(...e.Block??[],...s.Block??[])};(e.Effect?.includes("Enclose")||s.Effect?.includes("Enclose"))&&(l.priority=AssetGroup.length,l.blocksSubSet=l.superSet),n.set(o,l)}}));for(const[e,t]of n)Jp(n,t);return n}Bp(dg).then((()=>Up=CharacterLoadSimple("MBSDummy")));const Zp=new Map;function Xp(e,t){const r=InventoryGetLock(e);if(!InventoryItemHasEffect(e,"Lock"))return!0;if("Decoy"===e.Craft?.Property){if(null==r)return!1;return!["OwnerOnly","LoverOnly","FamilyOnly"].some((t=>r.Asset[t]||e.Asset[t]))}const n=Ap.getRuleState("block_keyuse_self"),o=t.IsPlayer()&&n?.inEffect&&n?.isEnforced;switch(r?.Asset?.Name){case"SafewordPadlock":return!0;case"MetalPadlock":case"MistressPadlock":case"MistressTimerPadlock":case"PandoraPadlock":{if(o||LogQuery("KeyDeposit","Cell"))return!1;let e=Zp.get(`${t.ID}:${r.Asset.Name}`);return void 0===e&&(e=t.Inventory.some((e=>e.Asset.Name===`${r.Asset.Name}Key`)),Zp.set(`${t.ID}:${r.Asset.Name}`,e)),e}case"TimerPasswordPadlock":case"PasswordPadlock":case"CombinationPadlock":return Number(e.Property?.LockMemberNumber)===t.MemberNumber;case"HighSecurityPadlock":{const r=(e?.Property?.MemberNumberListKeys??"").split(",").map(Number);return!o&&Cp(r,t.MemberNumber)}default:return!1}}function Qp(e,t,r,n=null,o=null,i=Player){if(!vp(t))throw new TypeError('Invalid "itemList" type: '+typeof t);if(function(e){const t=e.Appearance.find((e=>InventoryItemHasEffect(e,"Enclose")));return null!=t&&!Xp(t,e)}(i))return void kp.log(`Failed to equip all "${e}" wheel of fortune items: cannot unlock enclosing item`);!function(e,t){lg(t);const r=Kp(e,t),n=t.Appearance;for(let e=n.length-1;e>=0;e--){const t=n[e].Asset;t.Group.AllowNone&&"Appearance"===t.Group.Category&&r(t)&&n.splice(e,1)}}(r,i),"function"==typeof o&&(t=o(t,i));const a=function(e,t,r){const n=Yp(e,r,t);return t.filter((e=>n.get(e.Group)?.blocksSubSet))}(t,i.Appearance.map((e=>({Group:e.Asset.Group.Name,Name:e.Asset.Name,TypeRecord:e.Property?.TypeRecord,NoEquip:!0}))),i);Zp.clear();const s={},l=new Set,c=i.IsPlayer()&&LogQuery("ClubSlave","Management");for(const{Name:e,Group:r,Equip:n,NoEquip:o}of[...a,...t]){const t=AssetGet(i.AssetFamily,r,e),a=InventoryGet(i,r),u="function"!=typeof n||n(i);if(null!=t)if(u){const e={InventoryGroupIsBlockedForCharacter:InventoryGroupIsBlockedForCharacter(i,r,!1),InventoryGroupIsBlockedByOwnerRule:InventoryGroupIsBlockedByOwnerRule(i,r),"Locked item equipped":null!=a&&!Xp(a,i)};o||(e.InventoryBlockedOrLimited=InventoryBlockedOrLimited(i,{Asset:t}),e.InventoryChatRoomAllow=!InventoryChatRoomAllow(t.Category??[]),e["Blocked via Club Slave Collar"]=c&&"Appearance"===t.Group.Category);const n=bp(e).filter((e=>e[1]));0!==n.length?s[t.Description]=n.map((e=>e[0])):null!=a&&InventoryRemove(i,r,!1)}else l.add(r);else s[e]=["Unknown asset"]}for(const{Name:e,Group:r,Craft:o,ItemCallback:a,Color:c,TypeRecord:u,Property:d}of t){const t=AssetGet(i.AssetFamily,r,e),h=s[t?.Description??e];if(null==t||void 0!==h||l.has(r))continue;if(!InventoryAllow(i,t,t.Prerequisite,!1)){s[t.Description]=["InventoryAllow"];continue}const p=[...c??t.DefaultColor],f=CharacterAppearanceSetItem(i,r,t,p,SkillGetWithRatio(i,"Bondage"),i.MemberNumber,!1);null!=f&&(u&&zp(f,i,u),void 0!==o&&(f.Craft=xa(o),InventoryCraft(i,i,r,f.Craft,!1,!1)),f.Property=Object.assign(f.Property??{},xa(d)),"function"==typeof a&&a(f,i),"function"==typeof n&&n(f,i))}if(CharacterRefresh(i,!1,!1),i.IsPlayer()){ChatRoomCharacterUpdate(i);const t=Object.values(s).length;0!==t&&kp.log(`Failed to equip ${t} "${e}" wheel of fortune items`,s)}}function ef(e,t,r){if("string"!=typeof t||!DynamicDrawTextRegex.test(t))return!1;const n=`${r.Group.Name}${r.Name}`,[o,i]=bp(TextItemDataLookup).find((([e])=>e.includes(n)))??["",null];return null!==i&&t.length<=(i.maxLength[e]??-1)}const tf=Object.freeze({OverridePriority:(e,t)=>{if(wp(e))return!0;if(CommonIsObject(e)){const r=t.Layer.map((e=>e.Name));return bp(e).every((([e,t])=>r.includes(e)&&wp(t)))}return!1},Opacity:(e,t)=>"number"==typeof e&&e<=t.MaxOpacity&&e>=t.MinOpacity,Text:(e,t)=>ef("Text",e,t),Text2:(e,t)=>ef("Text2",e,t),Text3:(e,t)=>ef("Text3",e,t),ShowText:(e,t)=>"boolean"==typeof e,TriggerValues:(e,t)=>"string"==typeof e&&e.split(",").length===ItemVulvaFuturisticVibratorTriggers.length,AccessMode:(e,t)=>"string"==typeof e&&ItemVulvaFuturisticVibratorAccessModes.includes(e),PunishOrgasm:(e,t)=>"boolean"==typeof e,PunishStandup:(e,t)=>"boolean"==typeof e,Texts:(e,t)=>!!Array.isArray(e)&&(!(e.length<ItemDevicesLuckyWheelMinTexts||e.length>ItemDevicesLuckyWheelMaxTexts)&&e.every((e=>"string"==typeof e&&e.length<=ItemDevicesLuckyWheelMaxTextLength))),TargetAngle:(e,t)=>"number"==typeof e&&e>=0&&e<=360,OverrideHeight:function(e,t){const r=VariableHeightDataLookup[`${t.Group.Name}${t.Name}`];if(void 0===r)return!1;const n=e;return null!==n&&"object"==typeof n&&Number.isInteger(n.Priority)&&"number"==typeof n.Height&&n.Height<=r.maxHeight&&n.Height>=r.minHeight&&(null==n.HeightRatioProportion||"number"==typeof n.HeightRatioProportion&&n.HeightRatioProportion>=0&&n.HeightRatioProportion<=1)},PunishStruggle:(e,t)=>"boolean"==typeof e,PunishStruggleOther:(e,t)=>"boolean"==typeof e,PunishRequiredSpeechWord:(e,t)=>"string"==typeof e&&e.length<=70,PunishProhibitedSpeechWords:(e,t)=>"string"==typeof e&&e.length<=70,PunishSpeech:(e,t)=>wp(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PunishRequiredSpeech:(e,t)=>wp(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PunishProhibitedSpeech:(e,t)=>wp(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PublicModeCurrent:(e,t)=>wp(e)&&e>=0&&e<FuturisticTrainingBeltModes.length,PublicModePermission:(e,t)=>wp(e)&&e>=0&&e<FuturisticTrainingBeltPermissions.length,ShockLevel:(e,t)=>wp(e)&&e>=0&&e<=2,PortalLinkCode:(e,t)=>"string"==typeof e&&PortalLinkCodeRegex.test(e)});function rf(e,t){if(null===t||"object"!=typeof t)return{};const r=new Set(["OverridePriority"]);if(e.Archetype){const n=ExtendedItemGatherOptions({Asset:e,Property:t});for(const e of n){"VariableHeightOption"===e.OptionType&&r.add("OverrideHeight");for(const t of yp(e.ParentData.baselineProperty??{}))CraftingPropertyExclude.has(t)||r.add(t)}}const n={};for(const[o,i]of bp(t)){const t=tf[o];null!=i&&r.has(o)&&void 0!==t&&(t(i,e)&&(n[o]=i))}return n}const nf=Object.freeze(new Map([["Unknown asset",e=>null==e],["Unsupported owner-only asset",e=>e?.OwnerOnly],["Unsupported lovers-only asset",e=>e?.LoverOnly],["Unsupported D/S family-only asset",e=>e?.FamilyOnly],["Unsupported disabled asset",e=>!e?.Enable],["Unsupported script-asset",e=>"Script"===e?.Group?.Category]]));function of(e,t,r=!0){for(const[r,n]of nf)if(n(e))throw new Error(`${r}: ${t.Group}${t.Name}`);let n,o;"string"==typeof t.Color?n=[t.Color]:Array.isArray(t.Color)&&t.Color.every((e=>"string"==typeof e))&&(n=[...t.Color]),null!==t.Craft&&"object"==typeof t.Craft&&(o=Object.assign(xa(t.Craft),{TypeRecord:void 0,OverridePriority:null,Lock:""}),CraftingValidate(o,e,!1));const i=t.Property??{};let a;return CommonIsObject(i.TypeRecord)?a=Object.freeze({...i.TypeRecord}):"string"==typeof i.Type||null===i.Type?a=ExtendedItemTypeToRecord(e,i.Type):"string"==typeof i.Mode&&(a=ExtendedItemTypeToRecord(e,i.Mode)),Object.freeze({Name:t.Name,Group:t.Group,Custom:r,Property:Object.freeze(rf(e,t.Property)),TypeRecord:a,Color:n,Craft:Object.freeze(o),ItemCallback:void 0,Equip:void 0})}function af(e,t){if(!vp(e))throw new TypeError('Invalid "items" type: '+typeof e);return e.map((e=>function(e,t){const{Group:r,Name:n,Color:o,Craft:i,TypeRecord:a,Property:s}=e,l=AssetGet(t.AssetFamily,r,n);if(null==l)throw new Error(`Unknown asset: ${r}${n}`);return{Group:r,Name:n,Color:ka(o),Craft:ka(i),Property:Object.assign(Vp(l,t,a),xa(s))}}(e,t)))}var sf;class lf{get screen(){return this.constructor.screen}get ids(){return this.constructor.ids}get rootParams(){return this.screenParams[this.constructor.ids.root]}constructor(e,t,r){this.parent=e,this.screenParams=ru(xa(t),r??{}),this.child=null}resize(e){const t=MainCanvas.canvas.clientHeight/1e3,r=MainCanvas.canvas.clientWidth/2e3;for(const[n,{shape:o,visibility:i}]of bp(this.screenParams)){const a={left:`${MainCanvas.canvas.offsetLeft+o[0]*r}px`,top:`${MainCanvas.canvas.offsetTop+o[1]*t}px`,width:`${o[2]*r}px`,height:`${o[3]*t}px`};e&&(a.fontFamily=CommonGetFontName(),a.visibility=i);const s=document.getElementById(n);Object.assign(s.style,a)}}unload(){for(const e of yp(this.screenParams)){const t=document.getElementById(e);null!==t&&(t.style.visibility="hidden")}}exit(){for(const e of yp(this.screenParams))ElementRemove(e)}load(){const e=CurrentScreen;CurrentScreenFunctions?.Unload?.(),ControllerIsActive()&&ControllerClearAreas(),CurrentScreen=this.screen,CurrentScreenFunctions=this.getFunctions(),CurrentDarkFactor=1,CommonGetFont.clearCache(),CommonGetFontName.clearCache(),CurrentScreenFunctions?.Resize?.(!0),"ChatSearch"!=e&&"ChatCreate"!=e||ChatRoomStimulationMessage("Walk")}loadChild(e,...t){return this.child&&this.child.exit(),this.child=new e(this,...t),this.child.load(),this.child}exitScreens(e){let t=this.parent,r=this.child;for(;null!=r?.child;)r=r.child;for(;r&&r!==this;)r.child=null,r.exit(),r=r.parent;if(e)for(;null!==t&&!(t instanceof cf);)t.child=null,t.exit(),t=t.parent;null!==t&&(t.load(),t.child=null)}getFunctions(){return{Run:this.run?.bind(this)??CommonNoop,Draw:this.draw?.bind(this),Click:this.click?.bind(this)??CommonNoop,Load:this.load.bind(this),Unload:this.unload?.bind(this),Resize:this.resize?.bind(this),Exit:this.exit.bind(this)}}}lf.background="Sheet",lf.screen="",lf.screenParamsDefault={};class cf extends lf{constructor(e,t,r,n){super(e,cf.screenParamsDefault,null),this.module=t,this.background=r,this.screenFunctions=Object.freeze({...n})}run(e){return this.screenFunctions.Run(e)}draw(){return this.screenFunctions.Draw?.()}click(e){return this.screenFunctions.Click(e)}load(){return this.screenFunctions.Load?.()}unload(){return this.screenFunctions.Unload?.()}resize(e){return this.screenFunctions.Resize?.(e)}keyDown(e){return this.screenFunctions.KeyDown?.(e)??!1}exit(){return this.screenFunctions.Exit?.()}}cf.screenParamsDefault={};const uf=Object.freeze({NONE:0,SAVE:1,DELETE:2});class df extends lf{get index(){return b(this,sf,"f")}set index(e){Fp(e,"index",0,this.mbsList.length-1),S(this,sf,e,"f")}get mbsObject(){return this.mbsList[b(this,sf,"f")]}hasStorageSpace(){return null!==this.mbsList[this.index]||this.dataSize.value<=this.dataSize.max*this.dataSize.marigin}constructor(e,t,r,n,o,i){super(e,o,i),sf.set(this,0),this.character=n,this.mbsList=t,this.index=r,this.dataSize=Object.seal({value:0,valueRecord:{},max:Im,marigin:.9})}load(){const e=Em(this.character.OnlineSharedSettings);this.dataSize.value=Kd(Object.values(e),(e=>Number.isNaN(e)?0:e)),this.dataSize.valueRecord=e,super.load()}exit(e=!0,t=uf.NONE){if(super.exit(),!this.character.IsPlayer())return this.exitScreens(e);switch(t){case uf.NONE:break;case uf.SAVE:this.settings.isValid(this.index)&&this.hasStorageSpace()&&(this.mbsList[this.index]=this.settings.writeSettings(),this.mbsList[this.index]?.register());break;case uf.DELETE:{const e=this.mbsList[this.index];this.mbsList[this.index]=null,e?.unregister();break}default:throw new Error(`Unsupported action: ${t}`)}this.exitScreens(e)}}sf=new WeakMap;var hf,pf,ff,mf,gf;const Rf=Object.freeze({[qp.NONE]:"None",[qp.CLOTHES]:"Clothes",[qp.UNDERWEAR]:"Clothes and underwear",[qp.COSPLAY]:"Clothes, underwear and cosplay items",[qp.ALL]:"Clothes, underwear, cosplay items and body"});function vf(e){e=Number.isNaN(e)?60:oi(e,60,14400);const t={h:0,m:0,s:0};return t.h=Math.floor(e/3600),e-=3600*t.h,t.m=Math.floor(e/60),e-=60*t.m,t.s=e,`${t.h.toString().padStart(2,"0")}:${t.m.toString().padStart(2,"0")}:${t.s.toString().padStart(2,"0")}`}function yf(e,t,r){return p("div",{id:e.inputID,class:"mbs-dropdown",onWheel:r=>{const n=document.getElementById(e.buttonID);if(n.disabled)return;let o;if(r.deltaY<0)o=oi(t[e.level]-1,qp.NONE,qp.COSPLAY);else{if(!(r.deltaY>0))return;o=oi(t[e.level]+1,qp.NONE,qp.COSPLAY)}t[e.level]=o,n.innerText=Rf[t[e.level]]},children:[h("button",{class:"mbs-button",disabled:r,id:e.buttonID,children:Rf[qp.UNDERWEAR]}),p("div",{class:"mbs-dropdown-content",id:e.dropdownID,children:[" ",Object.values(Rf).slice(0,4).map(((n,o)=>h("button",{class:"mbs-button mbs-dropdown-button",disabled:r,"data-level":o,id:e.optionID+o.toString(),onClick:r=>{const n=r.target;t[e.level]=oi(Number.parseInt(n.dataset.level),qp.NONE,qp.COSPLAY);document.getElementById(e.buttonID).innerText=Rf[t[e.level]]},children:n})))," "]})]})}const bf="mbs-fwitemset",Sf=Object.freeze({root:bf,styles:`${bf}-style`,delete:`${bf}-delete`,deleteButton:`${bf}-delete-button`,deleteTooltip:`${bf}-delete-tooltip`,accept:`${bf}-accept`,acceptButton:`${bf}-accept-button`,acceptTooltip:`${bf}-accept-tooltip`,cancel:`${bf}-cancel`,cancelButton:`${bf}-cancel-button`,cancelTooltip:`${bf}-cancel-tooltip`,exit:`${bf}-exit`,exitButton:`${bf}-exit-button`,exitTooltip:`${bf}-exit-tooltip`,header:`${bf}-header`,midDiv:`${bf}-mid-grid`,botDiv:`${bf}-bot-grid`,outfitName:`${bf}-outfit-name`,outfitInput:`${bf}-outfit-input`,outfitDiv:`${bf}-outfit-div`,outfitButton:`${bf}-outfit-button`,outfitTooltip:`${bf}-outfit-tooltip`,stripHeader:`${bf}-strip-header`,stripInput:`${bf}-strip-dropdown`,stripButton:`${bf}-strip-dropdown-button`,stripDropdown:`${bf}-strip-dropdown-content`,stripOption:`${bf}-strip-dropdown-option`,equipHeader:`${bf}-equip-header`,equipInput:`${bf}-equip-dropdown`,equipButton:`${bf}-equip-dropdown-button`,equipDropdown:`${bf}-equip-dropdown-content`,equipOption:`${bf}-equip-dropdown-option`,weightHeader:`${bf}-weight-header`,weightInput:`${bf}-weight-input`,lockHeader:`${bf}-lock-header`,lockGrid:`${bf}-lock-grid`,lockContainer:`${bf}-lock-container`,lockCheckbox:`${bf}-lock-checkbox`,lockTimer:`${bf}-lock-timer`});class Cf extends df{constructor(e,t,r,n,o=null){const i=!n.IsPlayer();super(e,t,r,n,Cf.screenParamsDefault,o),hf.add(this),this.settings=new gg(t),this.preview=CharacterLoadSimple("MBSFortuneWheelPreview"),document.body.appendChild(p("div",{id:Sf.root,class:"mbs-screen",children:[h("style",{id:Sf.styles,children:'#mbs-fwitemset {\n  grid-template: "delete header header header accept cancel exit" min(9dvh, 4.5dvw) ". . name-input name-input . . ." min(7dvh, 3.5dvw) ". . outfit-input outfit-input outfit-button outfit-button outfit-button" min(7dvh, 3.5dvw) ". . strip-header lock-header lock-header lock-header lock-header" min(7dvh, 3.5dvw) ". . strip-input lock-grid lock-grid lock-grid lock-grid" min(7dvh, 3.5dvw) ". . equip-header lock-grid lock-grid lock-grid lock-grid" min(7dvh, 3.5dvw) ". . equip-input lock-grid lock-grid lock-grid lock-grid" min(7dvh, 3.5dvw) ". . weight-header lock-grid lock-grid lock-grid lock-grid" min(7dvh, 3.5dvw) ". . weight-input lock-grid lock-grid lock-grid lock-grid" min(7dvh, 3.5dvw)/min(9dvh, 4.5dvw) min(40dvh, 20dvw) auto min(38dvh, 19dvw) min(16dvh, 8dvw) min(9dvh, 4.5dvw) min(9dvh, 4.5dvw);\n}\n#mbs-fwitemset span {\n  place-self: end start;\n}\n\n#mbs-fwitemset-delete {\n  grid-area: delete;\n}\n\n#mbs-fwitemset-header {\n  grid-area: header;\n  margin-left: min(20dvh, 10dvw);\n}\n\n#mbs-fwitemset-accept {\n  grid-area: accept;\n  justify-self: end;\n}\n\n#mbs-fwitemset-cancel {\n  grid-area: cancel;\n}\n\n#mbs-fwitemset-exit {\n  grid-area: exit;\n}\n\n#mbs-fwitemset-outfit-name {\n  grid-area: name-input;\n}\n\n#mbs-fwitemset-outfit-input {\n  grid-area: outfit-input;\n}\n\n#mbs-fwitemset-outfit-div {\n  grid-area: outfit-button;\n  grid-template-columns: auto;\n  grid-template-rows: min(7dvh, 3.5dvw) auto;\n}\n\n#mbs-fwitemset-strip-header {\n  grid-area: strip-header;\n}\n\n#mbs-fwitemset-strip-dropdown {\n  grid-area: strip-input;\n  width: min(40dvh, 20dvw);\n}\n\n#mbs-fwitemset-equip-header {\n  grid-area: equip-header;\n}\n\n#mbs-fwitemset-equip-dropdown {\n  grid-area: equip-input;\n  width: min(40dvh, 20dvw);\n}\n\n#mbs-fwitemset-weight-header {\n  grid-area: weight-header;\n}\n\n#mbs-fwitemset-weight-input {\n  align-self: start;\n  grid-area: weight-input;\n  height: 100%;\n  width: calc(min(7dvh, 3.5dvw) + 16px);\n}\n\n#mbs-fwitemset-lock-header {\n  grid-area: lock-header;\n}\n\n#mbs-fwitemset-lock-grid {\n  align-self: start;\n  display: grid;\n  gap: min(2dvh, 1dvw);\n  grid-area: lock-grid;\n  grid-template-columns: min(38dvh, 19dvw) min(38dvh, 19dvw);\n  overflow-y: scroll;\n}\n\n.mbs-fwitemset-lock-container {\n  align-items: center;\n  display: grid;\n  word-wrap: break-word;\n  gap: min(2dvh, 1dvw);\n  grid-template-columns: min(7dvh, 3.5dvw) auto;\n}\n\n.mbs-timer {\n  height: 100%;\n  text-align: center;\n  width: 100%;\n}\n\n#mbs-fwitemset-strip-dropdown-content, #mbs-fwitemset-equip-dropdown-content {\n  width: min-content;\n}'.toString()}),h("h1",{id:Sf.header,children:`Customize wheel of fortune item set ${this.index}`}),p("div",{id:Sf.delete,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:Sf.deleteButton,style:{backgroundImage:"url('./Icons/Trash.png')"},onClick:()=>this.exit(!1,uf.DELETE),disabled:i}),h("div",{class:"mbs-button-tooltip",id:Sf.deleteTooltip,style:{justifySelf:"left"},children:"Delete item set"})]}),p("div",{id:Sf.accept,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:Sf.acceptButton,style:{backgroundImage:"url('./Icons/Accept.png')"},onClick:()=>this.exit(!1,uf.SAVE),disabled:!0}),h("div",{class:"mbs-button-tooltip",id:Sf.acceptTooltip,style:{justifySelf:"right"},children:"Save item set:\\nMissing outfit"})]}),p("div",{id:Sf.cancel,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:Sf.cancelButton,style:{backgroundImage:"url('./Icons/Cancel.png')"},onClick:()=>this.exit(!1,uf.NONE)}),h("div",{class:"mbs-button-tooltip",id:Sf.cancelTooltip,style:{justifySelf:"right"},children:"Cancel"})]}),p("div",{id:Sf.exit,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:Sf.exitButton,style:{backgroundImage:"url('./Icons/Exit.png')"},onClick:()=>this.exit(!0,uf.NONE)}),h("div",{class:"mbs-button-tooltip",id:Sf.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),h("input",{type:"text",id:Sf.outfitName,placeholder:"Name",disabled:i,maxLength:70,onInput:e=>{this.settings.name=e.target.value,b(this,hf,"m",ff).call(this,Sf.acceptButton)},onFocus:e=>e.target.select()}),h("input",{type:"text",id:Sf.outfitInput,placeholder:"Outfit code",disabled:i,onInput:e=>{this.settings.outfitCache=e.target.value,b(this,hf,"m",ff).call(this,Sf.outfitButton)},onFocus:e=>e.target.select()}),p("div",{id:Sf.outfitDiv,class:"mbs-button-div",children:[h("button",{class:"mbs-button",disabled:!0,id:Sf.outfitButton,onClick:()=>b(this,hf,"m",ff).call(this,Sf.acceptButton,!0),children:"Parse"}),h("div",{class:"mbs-button-tooltip",id:Sf.outfitTooltip,children:"Parse the outfit code"})]}),h("span",{id:Sf.stripHeader,children:"Clothing strip level:"}),h("span",{id:Sf.equipHeader,children:"Clothing equip level:"}),h("span",{id:Sf.weightHeader,children:"Wheel option weight:"}),h("span",{id:Sf.lockHeader,children:"Enabled lock types:"}),h("input",{type:"number",id:Sf.weightInput,min:1,max:9,value:1,disabled:i,onInput:e=>{const t=e.target;this.settings.weight=oi(Number.parseInt(t.value,10),1,9)},onWheel:e=>{const t=e.target;if(!t.disabled){if(e.deltaY<0)t.stepUp(1);else{if(!(e.deltaY>0))return;t.stepDown(1)}this.settings.weight=oi(Number.parseInt(t.value,10),1,9)}},onFocus:e=>e.target.select()}),yf({inputID:Sf.stripInput,buttonID:Sf.stripButton,optionID:Sf.stripOption,dropdownID:Sf.stripDropdown,level:"stripLevel"},this.settings,i),yf({inputID:Sf.equipInput,buttonID:Sf.equipButton,optionID:Sf.equipOption,dropdownID:Sf.equipDropdown,level:"equipLevel"},this.settings,i),p("div",{id:Sf.lockGrid,children:[" ",this.settings.flags.map(((e,t)=>{let r;if("TimerPasswordPadlock"===e.type)r=function(e,t,r){return h("input",{type:"text",class:"mbs-timer",id:Sf.lockTimer+t.toString(),disabled:r,value:vf(e.time),pattern:/([0]?[0-4]:)?([0-6]?[0-9]:)?([0-6]?[0-9])?/.source,maxLength:8,onInput:t=>{const r=t.target,[n,o]=[r.selectionStart,r.selectionEnd],i=r.value;if(r.value=i.replace(/[^0-9:]/g,""),r.value!==i&&(null!==n||null!==o)){const e=/[^0-9:]/g,t=Array.from(i).map(((t,r)=>e.test(t)?r:-1)).filter((e=>-1!==e));null!==n&&(r.selectionStart=t.reduce(((e,t)=>e+(n>=t?-1:0)),n)),null!==o&&(r.selectionEnd=t.reduce(((e,t)=>e+(o>=t?-1:0)),o))}const[a,s,l]=r.value.split(":").slice(-3).map((e=>Number.parseInt(e,10)||0)),c=3600*a+60*s+l;e.time=oi(c,60,14400)},onBlur:t=>{const r=t.target;if(r.disabled)return;const[n,o,i]=r.value.split(":").slice(-3).map((e=>Number.parseInt(e,10)||0)),a=3600*n+60*o+i;r.value=vf(a),e.time=oi(a,60,14400)},onFocus:e=>{const t=e.target,r=t.selectionStart;null!==r&&(r<=2?(t.selectionStart=0,t.selectionEnd=2):r<=5?(t.selectionStart=3,t.selectionEnd=5):r<=8&&(t.selectionStart=6,t.selectionEnd=8))},onWheel:t=>{const r=t.target;if(r.disabled)return;const n=r.value.replace(/[^0-9:]/g,""),[o,i,a]=n.split(":").slice(-3).map((e=>Number.parseInt(e,10)||0));let s=3600*o+60*i+a;if(t.deltaY<0)s+=120;else{if(!(t.deltaY>0))return;s-=120}r.value=vf(s),e.time=oi(s,60,14400)}})}(e,t,i);else r=e.description;return p("div",{class:Sf.lockContainer,id:Sf.lockContainer+t.toString(),children:[h("input",{type:"checkbox",class:Sf.lockCheckbox,id:Sf.lockCheckbox+t.toString(),disabled:i,checked:e.enabled,onClick:()=>{e.enabled=!e.enabled,b(this,hf,"m",ff).call(this,Sf.acceptButton)}}),r]})}))," "]})]}))}load(){super.load();const e=this.mbsObject;if(null!==e){this.settings.readSettings(e),this.settings.outfitCache=LZString.compressToBase64(JSON.stringify(af(e.itemList,this.preview))),ElementValue(Sf.outfitName,e.name),ElementValue(Sf.weightInput,e.weight.toString()),ElementValue(Sf.outfitInput,this.settings.outfitCache);for(const[e,t]of this.settings.flags.entries()){if(document.getElementById(`${Sf.lockCheckbox}${e}`).checked=t.enabled,"TimerPasswordPadlock"===t.type)ElementValue(`${Sf.lockTimer}${e}`,vf(t.time))}const t=document.getElementById(Sf.equipButton),r=document.getElementById(Sf.stripButton);t.innerText=Rf[this.settings.equipLevel],r.innerText=Rf[this.settings.stripLevel],b(this,hf,"m",ff).call(this,Sf.acceptButton,!0),b(this,hf,"m",ff).call(this,Sf.outfitButton)}else this.settings.reset(),b(this,hf,"m",ff).call(this,Sf.acceptButton),b(this,hf,"m",ff).call(this,Sf.outfitButton);b(this,hf,"m",gf).call(this)}draw(){DrawCharacter(this.preview,200,175,.78,!1)}exit(e,t){CharacterDelete(this.preview),super.exit(e,t)}}hf=new WeakSet,pf=function(){return this.settings.isValid(this.index)&&this.hasStorageSpace()},ff=function(e,t=!1){const r=document.getElementById(e),n=!this.character.IsPlayer();switch(e){case Sf.acceptButton:if(t){const e=this.settings.loadFromBase64();r.disabled=n||!(e&&b(this,hf,"m",pf).call(this)),!n&&e&&b(this,hf,"m",gf).call(this)}else r.disabled=n||!(null!==this.settings.itemList&&b(this,hf,"m",pf).call(this));b(this,hf,"m",mf).call(this,Sf.acceptTooltip);break;case Sf.outfitButton:r.disabled=n||!this.settings.outfitCache,b(this,hf,"m",mf).call(this,Sf.outfitTooltip);break;default:throw new Error(`Unsupported tooltip type: ${e}`)}},mf=function(e){const t=document.getElementById(e);switch(e){case Sf.acceptTooltip:{const e="Save item set";this.settings.loadFromBase64()?b(this,hf,"m",pf).call(this)?t.innerText=e:this.settings.name?this.settings.flags.every((e=>!e.enabled))?t.innerText=`${e}:\nMust enable at least one lock type`:this.hasStorageSpace()?t.innerText=`${e}:\nMax allowed OnlineSharedSettings storage size exceeded (${_m(this.dataSize.value)} / ${_m(this.dataSize.max)}`:t.innerText=`${e}:\nDuplicate name`:t.innerText=`${e}:\nMissing name`:t.innerText=`${e}:\nMissing outfit`;break}case Sf.outfitTooltip:{const e="Parse outfit code";this.settings.outfitCache?t.innerText=e:t.innerText=`${e}:\nMissing code`;break}default:throw new Error(`Unsupported tooltip type: ${e}`)}},gf=function(){if(this.preview.Appearance=[...this.character.Appearance],this.preview.OnlineSharedSettings=this.character.OnlineSharedSettings,CharacterReleaseTotal(this.preview),null===this.settings.itemList)return;const e=Kp(this.settings.equipLevel,this.preview),t=this.preview.AssetFamily;Qp("MBSPreview",this.settings.itemList.filter((({Name:r,Group:n})=>{const o=AssetGet(t,n,r);return null!=o&&("Appearance"!==o.Group.Category||e(o))})),this.settings.stripLevel,null,null,this.preview)},Cf.ids=Sf,Cf.screen="MBS_FWItemSetScreen",Cf.background="Sheet",Cf.screenParamsDefault={[bf]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};const wf="mbs-fwcommand",kf=Object.freeze({root:wf,styles:`${wf}-style`,delete:`${wf}-delete`,deleteButton:`${wf}-delete-button`,deleteTooltip:`${wf}-delete-tooltip`,accept:`${wf}-accept`,acceptButton:`${wf}-accept-button`,acceptTooltip:`${wf}-accept-tooltip`,cancel:`${wf}-cancel`,cancelButton:`${wf}-cancel-button`,cancelTooltip:`${wf}-cancel-tooltip`,exit:`${wf}-exit`,exitButton:`${wf}-exit-button`,exitTooltip:`${wf}-exit-tooltip`,header:`${wf}-header`,commandInput:`${wf}-command-input`,weightHeader:`${wf}-weight-header`,weightInput:`${wf}-weight-input`});class Bf extends df{constructor(e,t,r,n,o=null){super(e,t,r,n,Bf.screenParamsDefault,o),this.settings=new Rg(t);const i=!n.IsPlayer();document.body.appendChild(p("div",{id:kf.root,class:"mbs-screen",children:[h("style",{id:kf.styles,children:'#mbs-fwcommand {\n  grid-template: "delete header accept cancel exit" min(9dvh, 4.5dvw) "commandInput commandInput commandInput commandInput commandInput" min(7dvh, 3.5dvw) "weightHeader weightHeader weightHeader weightHeader weightHeader" min(7dvh, 3.5dvw) "weightInput weightInput weightInput weightInput weightInput" min(7dvh, 3.5dvw)/min(9dvh, 4.5dvw) auto min(9dvh, 4.5dvw) min(9dvh, 4.5dvw) min(9dvh, 4.5dvw);\n}\n\n#mbs-fwcommand-delete {\n  grid-area: delete;\n}\n\n#mbs-fwcommand-header {\n  grid-area: header;\n  margin-left: min(20dvh, 10dvw);\n}\n\n#mbs-fwcommand-accept {\n  grid-area: accept;\n}\n\n#mbs-fwcommand-cancel {\n  grid-area: cancel;\n}\n\n#mbs-fwcommand-exit {\n  grid-area: exit;\n}\n\n#mbs-fwcommand-command-input {\n  grid-area: commandInput;\n  height: min(7dvh, 3.5dvw);\n  place-self: self-end center;\n  width: 50%;\n}\n\n#mbs-fwcommand-weight-header {\n  align-self: self-end;\n  grid-area: weightHeader;\n}\n\n#mbs-fwcommand-weight-input {\n  grid-area: weightInput;\n  height: 100%;\n  place-self: start center;\n  width: calc(min(7dvh, 3.5dvw) + 16px);\n}'.toString()}),h("h1",{id:kf.header,children:`Customize wheel of fortune command ${this.index}`}),p("div",{id:kf.delete,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:kf.deleteButton,style:{backgroundImage:"url('./Icons/Trash.png')"},onClick:()=>this.exit(!1,uf.DELETE),disabled:i}),h("div",{class:"mbs-button-tooltip",id:kf.deleteTooltip,style:{justifySelf:"left"},children:"Delete command"})]}),p("div",{id:kf.accept,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:kf.acceptButton,style:{backgroundImage:"url('./Icons/Accept.png')"},onClick:()=>this.exit(!1,uf.SAVE),disabled:!0}),h("div",{class:"mbs-button-tooltip",id:kf.acceptTooltip,style:{justifySelf:"right"},children:"Save command"})]}),p("div",{id:kf.cancel,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:kf.cancelButton,style:{backgroundImage:"url('./Icons/Cancel.png')"},onClick:()=>this.exit(!1,uf.NONE)}),h("div",{class:"mbs-button-tooltip",id:kf.cancelTooltip,style:{justifySelf:"right"},children:"Cancel"})]}),p("div",{id:kf.exit,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:kf.exitButton,style:{backgroundImage:"url('./Icons/Exit.png')"},onClick:()=>this.exit(!0,uf.NONE)}),h("div",{class:"mbs-button-tooltip",id:kf.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),h("input",{type:"text",id:kf.commandInput,placeholder:"Role play command",disabled:i,maxLength:70,onInput:e=>{this.settings.name=e.target.value;document.getElementById(kf.acceptButton).disabled=0===this.settings.name.length},onFocus:e=>e.target.select()}),h("div",{id:kf.weightHeader,children:"Wheel option weight:"}),h("input",{type:"number",id:kf.weightInput,min:1,max:9,value:1,disabled:i,onInput:e=>{const t=e.target;this.settings.weight=oi(Number.parseInt(t.value,10),1,9)},onWheel:e=>{const t=e.target;if(!t.disabled){if(e.deltaY<0)t.stepUp(1);else{if(!(e.deltaY>0))return;t.stepDown(1)}this.settings.weight=oi(Number.parseInt(t.value,10),1,9)}},onFocus:e=>e.target.select()})]}))}load(){if(super.load(),null!==this.mbsObject){this.settings.readSettings(this.mbsObject),ElementValue(kf.commandInput,this.mbsObject.name),ElementValue(kf.weightInput,this.mbsObject.weight.toString());document.getElementById(kf.acceptButton).disabled=this.character.IsPlayer()}else this.settings.reset()}}Bf.ids=kf,Bf.screen="MBS_FWCommandScreen",Bf.background="Sheet",Bf.screenParamsDefault={[wf]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};var Pf,xf;function Mf(e,t,r){const n=Tm(e.OnlineSharedSettings?.MBS,"OnlineSharedSettings",!1);let o,i=void 0===n?void 0:n[t];if(Array.isArray(i)||(void 0!==i&&kp.warn(`Failed to load "${e.AccountName}" wheel of fortune ${r}`),i=Array(ig).fill(null)),e.IsPlayer())o=Player.MBSSettings[t];else{const e=[];o=$m("FortuneWheelItemSets"===t?bg.fromObject:Sg.fromObject,i,e),e.forEach((e=>console.warn(e)))}return o.forEach((e=>e?.register(!1))),o}function If(e,t){return h("button",{class:"mbs-button",id:_f.button+t.toString(),style:{height:"min(7dvh, 3.5dvw)"},onClick:()=>{if(t<ig){const r={[Cf.ids.root]:{shape:e.rootParams.shape}};return e.loadChild(Cf,e.wheelStruct.FortuneWheelItemSets,t,e.character,r)}{const r={[Bf.ids.root]:{shape:e.rootParams.shape}};return e.loadChild(Bf,e.wheelStruct.FortuneWheelCommands,t-ig,e.character,r)}}})}const Ef="mbs-fwselect",_f=Object.freeze({root:Ef,styles:`${Ef}-style`,exit:`${Ef}-exit`,exitButton:`${Ef}-exit-button`,exitTooltip:`${Ef}-exit-tooltip`,storage:`${Ef}-storage`,storageInner:`${Ef}-storage-cover`,storageTooltip:`${Ef}-storage-tooltip`,storageFooter:`${Ef}-storage-footer`,buttonOuterGrid:`${Ef}-button-grid-outer`,buttonInnerGrid0:`${Ef}-button-grid-inner0`,buttonInnerGrid1:`${Ef}-button-grid-inner1`,button:`${Ef}-button`,itemSets:`${Ef}-header0`,commandSets:`${Ef}-header1`});class Ff extends lf{get wheelList(){return[...this.wheelStruct.FortuneWheelItemSets,...this.wheelStruct.FortuneWheelCommands]}constructor(e,t,r,n=null){super(e,Ff.screenParamsDefault,n),Pf.add(this),this.wheelStruct=t,this.character=r,this.dataSize=Object.seal({value:0,valueRecord:{},max:Im,marigin:.9});const o=this.character.IsPlayer();document.body.appendChild(p("div",{id:_f.root,class:"mbs-screen",children:[h("style",{id:_f.styles,children:'#mbs-fwselect {\n  grid-template: ". buttonOuterGrid exit" min(9dvh, 4.5dvw) "storage buttonOuterGrid ." auto "storageFooter buttonOuterGrid ." min(14dvh, 7dvw)/min(30dvh, 15dvw) auto min(20dvh, 10dvw);\n}\n\n#mbs-fwselect-exit {\n  grid-area: exit;\n  height: min(9dvh, 4.5dvw);\n  justify-self: end;\n  width: min(9dvh, 4.5dvw);\n}\n\n#mbs-fwselect-storage {\n  background-image: linear-gradient(180deg, #d80000, #d80000 10%, #00d800 60%, #00d800) !important;\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  display: grid;\n  grid-area: storage;\n  height: 100%;\n  justify-self: center;\n  width: 35%;\n}\n#mbs-fwselect-storage #mbs-fwselect-storage-tooltip {\n  bottom: unset;\n  left: 15%;\n  position: absolute;\n  visibility: hidden;\n}\n#mbs-fwselect-storage:hover #mbs-fwselect-storage-tooltip {\n  visibility: visible;\n}\n\n#mbs-fwselect-storage-cover {\n  width: 100%;\n}\n\n#mbs-fwselect-storage-footer {\n  grid-area: storageFooter;\n  height: min(7dvh, 3.5dvw);\n  padding-top: min(1dvh, 0.5dvw);\n}\n\n#mbs-fwselect-button-grid-outer {\n  display: grid;\n  grid-area: buttonOuterGrid;\n  grid-template-rows: min(9dvh, 4.5dvw) auto min(9dvh, 4.5dvw) auto;\n  height: 94%;\n  overflow-y: scroll;\n  padding-left: min(2dvh, 1dvw);\n  padding-right: min(2dvh, 1dvw);\n}\n\n#mbs-fwselect-button-grid-inner0, #mbs-fwselect-button-grid-inner1 {\n  display: grid;\n  grid-template-columns: minmax(0, 4fr) minmax(0, 4fr);\n  grid-gap: min(2dvh, 1dvw);\n  padding-bottom: min(2dvh, 1dvw);\n  padding-top: min(2dvh, 1dvw);\n}\n\n#mbs-fwselect-header0, #mbs-fwselect-header1 {\n  background-color: var(--mbs-background-color);\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  position: sticky;\n  top: 0%;\n}'.toString()}),p("div",{id:_f.buttonOuterGrid,children:[h("h1",{id:_f.itemSets,"z-index":1,children:o?"Fortune wheel item sets":`${this.character.Nickname??this.character.Name}'s fortune wheel item sets`}),h("div",{id:_f.buttonInnerGrid0,children:yd(0,ig).map((e=>If(this,e)))}),h("h1",{id:_f.commandSets,"z-index":1,children:o?"Fortune wheel commands":`${this.character.Nickname??this.character.Name}'s fortune wheel commands`}),h("div",{id:_f.buttonInnerGrid1,children:yd(ig,2*ig).map((e=>If(this,e)))})]}),p("div",{id:_f.exit,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:_f.exitButton,onClick:this.exit.bind(this),style:{backgroundImage:"url('./Icons/Exit.png')"}}),h("span",{class:"mbs-button-tooltip",id:_f.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),p("div",{id:_f.storage,children:[h("div",{id:_f.storageInner}),p("div",{id:_f.storageTooltip,class:"mbs-button-tooltip",children:[h("h2",{id:_f.storageTooltip+"-header",children:"OnlineSharedSettings Data Usage"}),h("ul",{id:_f.storageTooltip+"-list"})]})]}),h("div",{id:_f.storageFooter})]}))}load(){const e=Em(this.character.OnlineSharedSettings);this.dataSize.value=Kd(Object.values(e),(e=>Number.isNaN(e)?0:e)),this.dataSize.valueRecord=e,b(this,Pf,"m",xf).call(this),super.load()}exit(){super.exit(),this.exitScreens(!1)}}Pf=new WeakSet,xf=function(){const e=this.character.IsPlayer();for(const[t,r]of this.wheelList.entries()){const n=document.getElementById(`${_f.button}${t}`);n.innerText=`${(t%ig).toString().padStart(2)}: ${r?.name??"<Empty>"}`,n.disabled=null===r&&!e}const t=document.getElementById(_f.storage),r=document.getElementById(_f.storageInner),n=document.getElementById(_f.storageFooter);if(e){const e=oi(_m(this.dataSize.value),0,9999),o=100*e/(Im/1e3);n.innerText=`${e} / ${Im/1e3} KB`,r.style.height=100-o+"%",r.style.backgroundColor="var(--mbs-background-color)",r.style.borderBottom="min(0.3dvh, 0.15dvw) solid var(--mbs-border-color)",o>=90&&(t.style.boxShadow="0 0 min(2dvh, 1dvw) red");const i=/\W/g;let a=Object.entries(this.dataSize.valueRecord).map((([e,t])=>[e.replaceAll(i,""),Number.isNaN(t)?"Unknown":`${_m(t)} KB`]));a.length>=11&&(a=a.slice(0,10),a.push(["...",""]));const s=document.getElementById(_f.storageTooltip+"-list");s.innerHTML="";for(const[e,t]of a)s.appendChild(p("li",{children:[h("span",{style:{float:"left"},children:e}),h("span",{style:{float:"right",paddingLeft:"min(7dvh, 3.5dvw)"},children:t})]}))}else{const e=document.getElementById(_f.storageTooltip);n.innerText=`- / ${Im/1e3} KB`,r.style.height="100%",r.style.backgroundColor="gray",e.style.display="none"}},Ff.ids=_f,Ff.screen="MBS_FWSelectScreen",Ff.background="Sheet",Ff.screenParamsDefault={[Ef]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};const Of=Object.freeze(["Exclusive","5 Minutes","15 Minutes","1 Hour","4 Hours","High Security"]),$f=Object.freeze([Object.freeze({type:"ExclusivePadlock",description:"Exclusive",enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:300,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:900,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:3600,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:14400,enabled:!1}),Object.freeze({type:"HighSecurityPadlock",description:"High security",enabled:!1}),Object.freeze({type:null,description:"No lock",enabled:!1})]);function Lf(e,t,r){Fp(t,"seconds",60,14400),Af(e,"TimerPasswordPadlock",r)&&(null==e.Property&&(e.Property={}),e.Property.RemoveTimer=CurrentTime+1e3*t,e.Property.RemoveItem=!0,e.Property.LockSet=!0,e.Property.Password=Lp(8))}function Tf(e,t){Af(e,"HighSecurityPadlock",t),null==e.Property&&(e.Property={}),e.Property.MemberNumberListKeys=""}function Af(e,t,r){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);if("string"!=typeof t)throw new TypeError('Invalid "lockName" type: '+typeof t);lg(r);const n=AssetGet(r.AssetFamily,"ItemMisc",t);if(null==n)throw new Error(`Invalid "lockName" value: ${t}`);return!(null!=InventoryGetLock(e)||!InventoryDoesItemAllowLock(e)||InventoryBlockedOrLimited(r,{Asset:n}))&&(InventoryLock(r,e,{Asset:n},null,!1),!0)}function Hf(e,t){return e.forEach(((e,r)=>{e.enabled=t.includes(r)})),e}function Nf(e){switch(e.type){case"ExclusivePadlock":return"Exclusive";case"HighSecurityPadlock":return"High Security";case"TimerPasswordPadlock":return`${Math.floor(e.time/60)} Minutes`;case null:return"No Lock";default:throw new Error(`Invalid flag type: ${e.type}`)}}var Df,Gf,jf,Wf,zf,Vf,qf,Uf;let Kf;const Jf=Object.freeze({builtinBC:0,builtinMBS:1,customMBS:2});let Yf,Zf,Xf,Qf;Bp(dg).then((async()=>{Kf=await TextCache.buildAsync("Screens/MiniGame/WheelFortune/Text_WheelFortune.csv")}));const em="mbs-fwpreset",tm=Object.freeze({root:em,styles:`${em}-style`,delete:`${em}-delete`,deleteButton:`${em}-delete-button`,deleteTooltip:`${em}-delete-tooltip`,accept:`${em}-accept`,acceptButton:`${em}-accept-button`,acceptTooltip:`${em}-accept-tooltip`,save:`${em}-save`,saveButton:`${em}-save-button`,saveTooltip:`${em}-save-tooltip`,exit:`${em}-exit`,exitButton:`${em}-exit-button`,exitTooltip:`${em}-exit-tooltip`,header:`${em}-header`,midDiv:`${em}-mid-div`,nameDiv:`${em}-name-div`,nameHeader:`${em}-name-header`,nameInput:`${em}-name-input`,nameDropdown:`${em}-name-dropdown`,nameDropdownDiv:`${em}-name-dropdown-div`,nameDropdownContent:`${em}-name-dropdown-content`,builtinBC:`${em}-builtin-bc`,builtinBCColor:`${em}-builtin-bc-color`,builtinBCTooltip:`${em}-builtin-bc-tooltip`,builtinBCTooltipHeader:`${em}-builtin-bc-tooltip-header`,builtinBCTooltipList:`${em}-builtin-bc-tooltip-list`,builtinBCDiv:`${em}-builtin-bc-div`,builtinBCHeader:`${em}-builtin-bc-header`,builtinMBS:`${em}-builtin-mbs`,builtinMBSColor:`${em}-builtin-mbs-color`,builtinMBSTooltip:`${em}-builtin-mbs-button-tooltip`,builtinMBSTooltipHeader:`${em}-builtin-mbs-button-tooltip-header`,builtinMBSTooltipList:`${em}-builtin-mbs-button-tooltip-list`,builtinMBSDiv:`${em}-builtin-mbs-div`,builtinMBSHeader:`${em}-builtin-mbs-header`,customMBS:`${em}-custom-mbs`,customMBSColor:`${em}-custom-mbs-color`,customMBSTooltip:`${em}-custom-mbs-button-tooltip`,customMBSTooltipHeader:`${em}-custom-mbs-button-tooltip-header`,customMBSTooltipList:`${em}-custom-mbs-button-tooltip-list`,customMBSDiv:`${em}-custom-mbs-div`,customMBSHeader:`${em}-custom-mbs-header`});class rm extends lf{get index(){return b(this,Gf,"f")}set index(e){Fp(e,"index",0,this.presets.length-1),b(this,Gf,"f")!==e&&(S(this,Gf,e,"f"),b(this,Df,"m",Uf).call(this))}constructor(e,t,r=null){!function(){if(void 0!==Yf)return;const e=/^([a-zA-Z0-9_\s]+) for ([0-9]+) (minutes|hours)$/,t=WheelFortuneOption.filter((e=>void 0===e.Custom)),r=new Set,n={};for(const o of t){const t=Kf.get(`Option${o.ID}`),i=e.exec(t);if(!i){n[o.ID]={header:t,type:Jf.builtinBC},r.add(t);continue}const[a,s]=[i[1],i[3]];let l=Number.parseInt(i[2]);"hours"===s&&(l*=60),r.add(a),n[o.ID]={header:a,description:`${l} Minutes`,type:Jf.builtinBC}}Yf=Array.from(r),Zf=Object.fromEntries(Object.entries(n).map((([e,t])=>[e,{...t,index:Yf.indexOf(t.header)}])));const o=256;Xf=Object.fromEntries(am.flatMap(((e,t)=>e.flags.map(((r,n)=>[String.fromCharCode(o+16*t+n),{header:e.name,description:Nf(r),index:t,type:Jf.builtinMBS}]))))),Qf=Object.fromEntries(yd(512,1536).map(((e,t)=>{const r=String.fromCharCode(e),n=Math.floor(t/o);let i;switch(n){case 0:case 2:i=(0===n?0:16)+Math.floor(t%o/16);break;case 1:case 3:i=(1===n?0:16)+Math.floor(t%o/16)+32;break;default:throw new RangeError(`Index ${t} lies out of the [0, 2**10) range`)}return[r,{header:"<Empty>",type:Jf.customMBS,index:i}]})))}(),super(e,rm.screenParamsDefault,r),Df.add(this),this.activePreset={name:"<PLACEHOLDER>",ids:new Set},Gf.set(this,0),this.presets=t,this.queueServer=new Set,this.idMapping={...xa(Zf),...xa(Xf),...xa(Qf)},document.body.appendChild(p("div",{id:tm.root,class:"mbs-screen",children:[h("style",{id:tm.styles,children:'#mbs-fwpreset {\n  grid-template: "delete header accept save exit" min(9dvh, 4.5dvw) "mid mid mid mid mid" auto/min(9dvh, 4.5dvw) auto min(9dvh, 4.5dvw) min(9dvh, 4.5dvw) min(9dvh, 4.5dvw);\n}\n\n#mbs-fwpreset-delete {\n  grid-area: delete;\n}\n\n#mbs-fwpreset-header {\n  grid-area: header;\n  margin-left: min(20dvh, 10dvw);\n}\n\n#mbs-fwpreset-accept {\n  grid-area: accept;\n}\n\n#mbs-fwpreset-save {\n  grid-area: save;\n}\n\n#mbs-fwpreset-exit {\n  grid-area: exit;\n}\n\n#mbs-fwpreset-mid-div {\n  display: grid;\n  grid-area: mid;\n  text-align: center;\n  grid-gap: min(2dvh, 1dvw);\n  grid-template: "name-header builtin-bc-header builtin-mbs-header custom-mbs-header" min(9dvh, 4.5dvw) "name builtin-bc builtin-mbs custom-mbs" auto/auto min-content min-content min-content;\n  justify-items: center;\n  justify-self: center;\n  width: 100%;\n}\n#mbs-fwpreset-mid-div > p {\n  text-wrap: nowrap;\n}\n\n#mbs-fwpreset-name-header {\n  grid-area: name-header;\n}\n\n#mbs-fwpreset-builtin-bc-header {\n  grid-area: builtin-bc-header;\n}\n\n#mbs-fwpreset-builtin-mbs-header {\n  grid-area: builtin-mbs-header;\n}\n\n#mbs-fwpreset-custom-mbs-header {\n  grid-area: custom-mbs-header;\n}\n\n.mbs-fwpreset-grid {\n  display: grid;\n  grid-gap: min(1.2dvh, 0.6dvw);\n  grid-auto-flow: column;\n  grid-template-rows: repeat(8, min(7dvh, 3.5dvw));\n  width: fit-content;\n}\n\n#mbs-fwpreset-name-div {\n  grid-area: name;\n}\n\n#mbs-fwpreset-name-input {\n  height: min(7dvh, 3.5dvw);\n  width: min(35dvh, 17.5dvw);\n}\n\n#mbs-fwpreset-name-dropdown-div {\n  height: min(7dvh, 3.5dvw);\n  position: relative;\n  text-wrap: auto;\n  top: 5%;\n  width: min(36dvh, 18dvw);\n}\n\n#mbs-fwpreset-builtin-bc-div {\n  grid-area: builtin-bc;\n  grid-template-columns: repeat(4, min(7dvh, 3.5dvw));\n}\n\n#mbs-fwpreset-builtin-mbs-div {\n  grid-area: builtin-mbs;\n  grid-template-columns: min(7dvh, 3.5dvw);\n}\n\n#mbs-fwpreset-custom-mbs-div {\n  grid-area: custom-mbs;\n  grid-template-columns: repeat(8, min(7dvh, 3.5dvw));\n}\n\n.mbs-fwpreset-color {\n  border: unset !important;\n  height: 84%;\n  left: 4%;\n  position: relative;\n  top: 4%;\n  width: 84%;\n}\n.mbs-fwpreset-color[data-color=red] {\n  background-color: red;\n}\n.mbs-fwpreset-color[data-color=green] {\n  background-color: green;\n}\n.mbs-fwpreset-color:focus {\n  filter: brightness(60%);\n}\n.mbs-fwpreset-color + .mbs-button-tooltip {\n  z-index: 2;\n}\n.mbs-fwpreset-color:focus + .mbs-button-tooltip {\n  visibility: visible;\n  z-index: 1;\n}\n\n.mbs-fwpreset {\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  display: grid;\n  grid-template-columns: min(7dvh, 3.5dvw);\n  grid-template-rows: min(7dvh, 3.5dvw) auto;\n}\n.mbs-fwpreset:hover .mbs-fwpreset-color {\n  filter: brightness(60%);\n}\n.mbs-fwpreset:hover .mbs-button-tooltip {\n  visibility: visible;\n}'.toString()}),p("h1",{id:tm.header,children:["Wheel of Fortune preset ",this.index]}),p("div",{id:tm.delete,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:tm.deleteButton,style:{backgroundImage:"url('./Icons/Trash.png')"},onClick:this.deletePreset.bind(this),disabled:!0}),h("div",{class:"mbs-button-tooltip",id:tm.deleteTooltip,style:{justifySelf:"left"},children:"Delete the current preset"})]}),p("div",{id:tm.accept,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:tm.acceptButton,style:{backgroundImage:"url('./Icons/Accept.png')"},onClick:this.equipPreset.bind(this),disabled:!0}),h("div",{class:"mbs-button-tooltip",id:tm.acceptTooltip,style:{justifySelf:"right"},children:"Equip the current preset"})]}),p("div",{id:tm.save,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:tm.saveButton,style:{backgroundImage:"url('./Icons/Save.png')"},onClick:this.savePreset.bind(this)}),h("div",{class:"mbs-button-tooltip",id:tm.saveTooltip,style:{justifySelf:"right"},children:"Save the current preset"})]}),p("div",{id:tm.exit,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:tm.exitButton,style:{backgroundImage:"url('./Icons/Exit.png')"},onClick:()=>this.exit(!1)}),h("div",{class:"mbs-button-tooltip",id:tm.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),p("div",{id:tm.midDiv,children:[h("p",{id:tm.nameHeader,children:"Preset Name"}),h("p",{id:tm.builtinBCHeader,children:"Builtin BC Options"}),h("p",{id:tm.builtinMBSHeader,children:"Builtin MBS Options"}),h("p",{id:tm.customMBSHeader,children:"Custom MBS Options"}),p("div",{id:tm.nameDiv,children:[h("input",{type:"text",id:tm.nameInput,maxLength:20,onFocus:e=>e.target.select(),onInput:e=>this.activePreset.name=e.target.value}),p("div",{id:tm.nameDropdownDiv,class:"mbs-dropdown",onWheel:e=>this.index=oi(this.index+Math.sign(e.deltaY),0,this.presets.length-1),children:[h("button",{class:"mbs-button",id:tm.nameDropdown}),p("div",{class:"mbs-dropdown-content",id:tm.nameDropdownContent,children:[" ",Object.values(this.presets).map(((e,t)=>h("button",{class:"mbs-button mbs-dropdown-button",id:tm.nameDropdown+t.toString(),onClick:()=>this.index=t,children:`${t}: ${e?.name??"<Empty>"}`})))," "]})]})]}),h("div",{id:tm.builtinBCDiv,class:"mbs-fwpreset-grid",children:b(this,Df,"m",zf).call(this,Jf.builtinBC)}),h("div",{id:tm.builtinMBSDiv,class:"mbs-fwpreset-grid",children:b(this,Df,"m",zf).call(this,Jf.builtinMBS)}),h("div",{id:tm.customMBSDiv,class:"mbs-fwpreset-grid",children:b(this,Df,"m",zf).call(this,Jf.customMBS)})]})]}))}savePreset(){const e=this.presets[this.index],t={name:this.activePreset.name,ids:ug(Array.from(this.activePreset.ids).sort().join(""))};t.name===e?.name&&t.ids===e?.ids||(this.presets[this.index]=t,this.queueServer.add(Fm.SETTINGS),b(this,Df,"m",qf).call(this))}equipPreset(){const e=ug(Array.from(this.activePreset.ids).sort().join(""));Player.OnlineSharedSettings&&Player.OnlineSharedSettings.WheelFortune!==e&&(Player.OnlineSharedSettings.WheelFortune=e,this.queueServer.add(Fm.SHARED))}deletePreset(){null!==this.presets[this.index]&&(this.queueServer.add(Fm.SETTINGS),this.presets[this.index]=null,b(this,Df,"m",Uf).call(this))}load(){super.load(),b(this,Df,"m",jf).call(this),b(this,Df,"m",Uf).call(this)}exit(e=!0){super.exit(),this.queueServer.size&&Hm(Array.from(this.queueServer),!0),this.exitScreens(e)}}function nm(e,t,r){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);if(!vp(r))throw new TypeError('Invalid "indices" type: '+typeof r);if(null===t||"object"!=typeof t)throw new TypeError('Invalid "character" type: '+typeof t);if(!t.IsSimple()&&!t.IsPlayer())throw new Error("Expected a simple or player character");const n=t.Appearance.find((e=>"HairFront"===e.Asset.Group.Name));if(void 0===n)return;const o=Math.max(0,...r);let i;"string"==typeof e.Color?e.Color=i=Op([e.Color],o,"Default"):Array.isArray(e.Color)&&0!==e.Color.length?i=e.Color:e.Color=i=Array(o).fill("Default"),"string"==typeof n.Color?r.forEach((e=>i[e]=n.Color)):Array.isArray(n.Color)&&n.Color.length>=1&&r.forEach((e=>i[e]=n.Color[0]))}function om(e,t){if(null===t||"object"!=typeof t)throw new TypeError('Invalid "character" type: '+typeof t);if(!t.IsSimple()&&!t.IsPlayer())throw new Error("Expected a simple or player character");if(cg(t)){!function(e,t,r){if(!vp(e))throw new TypeError('Invalid "groupNames" type: '+typeof e);if("string"!=typeof r)throw new TypeError('Invalid "color" type: '+typeof e);for(const n of e){const e=InventoryGet(t,n);null!=e&&(e.Color=Array(e.Asset.ColorableLayerCount).fill(r))}}(["HairAccessory1","HairAccessory2","HairAccessory3","HairBack","HairFront","BodyUpper","BodyLower","Wings","TailStraps","Nipples","Blush","Mouth"],t,"#484747")}return e}let im,am,sm,lm,cm;Gf=new WeakMap,Df=new WeakSet,jf=function(){const e=[...Player.MBSSettings.FortuneWheelItemSets,...Player.MBSSettings.FortuneWheelCommands];for(const[t,r]of e.entries()){let e=512;if(e+=t<32?t>=16?16*(16+t):16*t:t>=48?16*t:16*(16+t),r instanceof bg)for(const[t,n]of r.flags.entries()){const o=String.fromCharCode(e+t);this.idMapping[o].description=Nf(n),this.idMapping[o].header=r.name}else if(r instanceof Sg){const t=String.fromCharCode(e);this.idMapping[t].header=r.name,delete this.idMapping[t].description}else for(const t of yd(16)){const r=String.fromCharCode(e+t);this.idMapping[r].header="<Empty>",delete this.idMapping[r].description}}},Wf=function(e,t,r,n){const o=e.toString();return p("div",{id:n.root+o,class:"mbs-fwpreset",children:[h("button",{id:n.color+o,class:"mbs-fwpreset-color","data-color":"red",onClick:e=>e.target.focus()}),p("div",{id:n.tooltip+o,class:"mbs-button-tooltip",style:{justifySelf:r},children:[h("h2",{id:n.tooltipHeader+o,"data-prefix":t??""}),h("ul",{id:n.tooltipList+o})]})]})},zf=function(e){let t,r,n;const o=b(this,Df,"m",Vf).call(this,e);switch(e){case Jf.builtinBC:t=Yf,r="left";break;case Jf.builtinMBS:t=am,r="center";break;case Jf.customMBS:t=[...Player.MBSSettings.FortuneWheelItemSets,...Player.MBSSettings.FortuneWheelCommands],r="right",n=(e,t)=>t>=ig?`Command Set ${t-32}: `:`Item Set ${t}: `;break;default:throw new Error(`Unknown type: ${e}`)}return t.map(((e,t)=>b(this,Df,"m",Wf).call(this,t,n?.(e,t),r,o)))},Vf=function(e){switch(e){case Jf.builtinBC:return{root:tm.builtinBC,color:tm.builtinBCColor,tooltip:tm.builtinBCTooltip,tooltipHeader:tm.builtinBCTooltipHeader,tooltipList:tm.builtinBCTooltipList};case Jf.builtinMBS:return{root:tm.builtinMBS,color:tm.builtinMBSColor,tooltip:tm.builtinMBSTooltip,tooltipHeader:tm.builtinMBSTooltipHeader,tooltipList:tm.builtinMBSTooltipList};case Jf.customMBS:return{root:tm.customMBS,color:tm.customMBSColor,tooltip:tm.customMBSTooltip,tooltipHeader:tm.customMBSTooltipHeader,tooltipList:tm.customMBSTooltipList};default:throw new Error(`Unknown type: ${e}`)}},qf=function(){const e=this.presets[b(this,Gf,"f")],t=document.getElementById(tm.nameInput),r=document.getElementById(tm.nameDropdown),n=document.getElementById(`${tm.nameDropdown}${this.index}`);t.placeholder=`Preset ${this.index}`,n.innerText=r.innerText=`${b(this,Gf,"f")}: ${this.activePreset.name}`;const o=document.getElementById(tm.deleteButton),i=document.getElementById(tm.deleteTooltip),a=document.getElementById(tm.acceptButton),s=document.getElementById(tm.acceptTooltip),l=document.getElementById(tm.header);null===e?(t.value="",o.disabled=!0,a.disabled=!0,i.innerText="Delete the current preset:\nunsaved preset",s.innerText="Equip the current preset:\nunsaved preset",l.innerText=`Wheel of Fortune preset ${this.index} (unsaved)`):(t.value=e.name,o.disabled=!1,a.disabled=!1,i.innerText="Delete the current preset",s.innerText="Equip the current preset",l.innerText=`Wheel of Fortune preset ${this.index}`)},Uf=function(){const e=this.presets[b(this,Gf,"f")];this.activePreset=null!==e?{name:e.name,ids:new Set(e.ids)}:{name:"<Empty>",ids:new Set(Player.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault)},b(this,Df,"m",qf).call(this);const t={[Jf.builtinBC]:{},[Jf.builtinMBS]:{},[Jf.customMBS]:{}};for(const[e,{type:r,index:n,description:o,header:i}]of Object.entries(this.idMapping)){const a=this.activePreset.ids.has(e),s=t[r][n]??={header:i,enabled:a,description:[]};s.enabled||=a,o&&a&&s.description.push(o)}for(const e of Object.values(Jf)){const r=b(this,Df,"m",Vf).call(this,e);for(const[n,o]of Object.entries(t[e])){document.getElementById(`${r.color}${n}`).dataset.color=o.enabled?"green":"red";const e=document.getElementById(`${r.tooltipHeader}${n}`);e.innerText=(e.dataset.prefix??"")+o.header;const t=document.getElementById(`${r.tooltipList}${n}`);t.innerHTML="";for(const e of o.description)t.appendChild(h("li",{children:e}))}}},rm.background="Sheet",rm.screen=`MBS_${rm.name}`,rm.ids=tm,rm.screenParamsDefault={[em]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};class um extends cf{constructor(){super(null,"WheelFortune","MiniGame",{Run:WheelFortuneRun,Click:WheelFortuneClick,Exit:WheelFortuneExit,Load:()=>{CommonSetScreen("MiniGame","WheelFortune"),WheelFortuneLoad()}}),this.character=Player,this.FortuneWheelItemSets=Array(ig).fill(null),this.FortuneWheelCommands=Array(ig).fill(null),this.weightedIDs=this.character.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault}initialize(){if(null==WheelFortuneCharacter)throw new Error("Cannot load the fortune wheel UI while `WheelFortuneCharacter == null`");WheelFortuneOption=[...sm],WheelFortuneDefault=lm,this.character=WheelFortuneCharacter,this.FortuneWheelItemSets=Mf(WheelFortuneCharacter,"FortuneWheelItemSets","item sets"),this.FortuneWheelCommands=Mf(WheelFortuneCharacter,"FortuneWheelCommands","commands"),this.weightedIDs=function(e){const t=Array.from(e).flatMap((e=>{const t=WheelFortuneOption.find((t=>t.ID===e));return void 0===t?[]:Array(t.Weight??1).fill(e)}));if(0===t.length)return Array.from(e.length>0?e:WheelFortuneDefault).sort(Math.random).join();const r=[];for(;r.length<50;)r.push(...Ad(t,Math.random));return r.join("")}(this.character.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault)}}function dm(){if(cm.initialize(),null!=TextScreenCache)for(const{Description:e,Custom:t,ID:r}of WheelFortuneOption)void 0!==e&&(TextScreenCache.cache[`Option${r}`]=t?`*${e}`:e)}function hm(){if(null!=TextScreenCache)for(const{Description:e,Custom:t,ID:r}of WheelFortuneOption)void 0!==e&&(TextScreenCache.cache[`Option${r}`]=t?`*${e}`:e)}um.screen="WheelFortune",Bp(dg).then((()=>{const e={exit:[1830,60,90,90],roll:[1720,60,90,90],select:[1610,60,90,90],preset:[1500,60,90,90]};if(kp.log("Initializing wheel of fortune hooks"),function(){const e=String.fromCharCode(256),t=WheelFortuneOption.find((t=>void 0===t.Custom&&t.ID>=e));return void 0===t||(kp.warn("Aborting wheel of fortune hook initialization: Found one or more builtin wheel of fortune option-IDs outside of the extended ASCII range",t),!1)}())switch(Tp.patchFunction("WheelFortuneRun",{'DrawTextWrap(TextGet((WheelFortuneVelocity == 0) ? (WheelFortuneForced ? "Forced" : "Title") : "Wait"), 1375, 200, 550, 200, "White");':";",'DrawButton(1720, 60, 90, 90, "", BackColor, "Icons/Random.png", TextGet("Random"));':";"}),Tp.hookFunction("WheelFortuneLoad",11,((e,t)=>(dm(),t(e)))),Tp.hookFunction("WheelFortuneCustomizeLoad",0,((e,t)=>(hm(),t(e)))),Tp.hookFunction("WheelFortuneRun",0,((t,r)=>{const n=Player.MBSSettings.RollWhenRestrained||!Player.IsRestrained();n||(WheelFortuneForced=!1),r(t);const o=0===WheelFortuneVelocity,i=o?"White":"Silver",a=WheelFortuneCharacter?.Nickname??WheelFortuneCharacter?.Name,s=WheelFortuneCharacter?.IsPlayer()?"MBS: Configure custom options":`MBS: View ${a}'s option config`;DrawButton(...e.select,"",i,"Icons/Crafting.png",s,!o);const l=!(0!==WheelFortuneVelocity||!WheelFortuneCharacter?.IsPlayer()),c=l?"White":"Silver",u=WheelFortuneCharacter?.Nickname??WheelFortuneCharacter?.Name,d=WheelFortuneCharacter?.IsPlayer()?"MBS: Configure option presets":`MBS: View ${u}'s option presets`;DrawButton(...e.preset,"",c,"Icons/Crafting.png",d,!l);const h=0==WheelFortuneVelocity&&n?"White":"Silver";DrawButton(...e.roll,"",h,"Icons/Random.png",n?TextGet("Random"):"MBS: Cannot spin while restrained",!n);let p="";p=0!==WheelFortuneVelocity?TextGet("Wait"):n?WheelFortuneForced?TextGet("Forced"):TextGet("Title"):"MBS: Cannot spin the wheel of fortune while restrained",DrawTextWrap(p,1375,200,550,200,"White")})),Tp.hookFunction("WheelFortuneClick",0,((t,r)=>{if(Player.MBSSettings.RollWhenRestrained||!Player.IsRestrained()||(WheelFortuneForced=!1,!MouseIn(...e.roll))){if(0===WheelFortuneVelocity&&MouseIn(...e.select)){const e={FortuneWheelItemSets:cm.FortuneWheelItemSets,FortuneWheelCommands:cm.FortuneWheelCommands};cm.loadChild(Ff,e,cm.character)}else 0===WheelFortuneVelocity&&MouseIn(...e.preset)&&WheelFortuneCharacter?.IsPlayer()&&cm.loadChild(rm,WheelFortuneCharacter.MBSSettings.FortuneWheelPresets);return r(t)}})),Tp.hookFunction("WheelFortuneMouseUp",11,((e,t)=>{!Player.MBSSettings.RollWhenRestrained&&Player.IsRestrained()||t(e)})),Tp.hookFunction("WheelFortuneMouseDown",11,((e,t)=>{!Player.MBSSettings.RollWhenRestrained&&Player.IsRestrained()||t(e)})),Tp.hookFunction("WheelFortuneDrawWheel",11,(([e,...t],r)=>r([cm.weightedIDs,...t]))),cm=new um,Bp(pg).then((()=>{kp.log("Initializing wheel of fortune module"),im=function(){const e=Sp(bp({leash_candy:[{Name:"ReverseBunnySuit",Group:"Suit",ItemCallback:(e,t)=>nm(e,t,[0,1])},{Name:"Catsuit",Group:"SuitLower",ItemCallback:(e,t)=>nm(e,t,[0,1])},{Name:"FaceVeil",Group:"Mask",Color:["#000","Default"],ItemCallback:(e,t)=>nm(e,t,[1])},{Name:"FuturisticMittens",Group:"ItemHands",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Mittens"},ItemCallback:(e,t)=>nm(e,t,[0,1])},{Name:"InteractiveVRHeadset",Group:"ItemHead",TypeRecord:{b:3,f:3,g:1},Craft:{Property:"Secure",Name:"Permanent PSO Headset"},ItemCallback:(e,t)=>nm(e,t,[0])},{Name:"LargeDildo",Group:"ItemMouth",Craft:{Property:"Secure",Name:"Permanent PSO Dildo",Description:"Specially made to fill a PSOs mouth and throat"}},{Name:"LatexBallMuzzleGag",Group:"ItemMouth2",Craft:{Property:"Secure",Name:"Permanent PSO Muzzle",Description:"Forcing the dildo in and keeping it secure"}},{Name:"FuturisticMuzzle",Group:"ItemMouth3",TypeRecord:{n:1,h:0,s:3},Craft:{Property:"Secure",Name:"Permanent PSO Muzzle",Description:"Keeping your cries muffled"},ItemCallback:(e,t)=>nm(e,t,[3])},{Name:"FuturisticVibrator",Group:"ItemVulva",TypeRecord:{vibrating:9},Craft:{Property:"Secure",Name:"Permanent PSO Vibe",Description:"Specially made to fill a PSO"}},{Name:"SciFiPleasurePanties",Group:"ItemPelvis",TypeRecord:{c:3,i:4,o:1,s:2},Craft:{Property:"Secure",Name:"Permanent PSO Panties",Description:"No escape and no Orgasms"},ItemCallback:(e,t)=>nm(e,t,[0,2,4,5])},{Name:"BonedNeckCorset",Group:"ItemNeck",Color:["#222222","#888888","#AA2121","#AA2121","#888888"],TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Permanent PSO Collar"},ItemCallback:(e,t)=>nm(e,t,[2,3])},{Name:"CollarChainShort",Group:"ItemNeckRestraints",Craft:{Property:"Secure",Name:"Permanent PSO Chain",Description:"To keep a PSO on their knees"},Property:{OverridePriority:7},ItemCallback:(e,t)=>nm(e,t,[0])},{Name:"StrictLeatherPetCrawler",Group:"ItemArms",Craft:{Property:"Secure",Name:"Permanent PSO Suit",Description:"Extra tight and unremovable"}},{Name:"HeavyLatexCorset",Group:"ItemTorso",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Corset",Description:"Extra tight and specially molded"}},{Name:"FuturisticHarness",Group:"ItemTorso2",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Harness",Description:"Special harness that constantly shrinks...."},Property:{OverridePriority:23},ItemCallback:(e,t)=>nm(e,t,[0,1,2])},{Name:"FuturisticEarphones",Group:"ItemEars",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Earphones"},Color:["#0F0F0F","Default","Default"],ItemCallback:(e,t)=>nm(e,t,[1])},{Name:"CeilingChain",Group:"ItemAddon",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Chain",Description:"Never to escape"},ItemCallback:(e,t)=>nm(e,t,[0])},{Name:"RoundPiercing",Group:"ItemNipplesPiercings",TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Permanent PSO Piercings"},Color:["#000000","Default","Default"],ItemCallback:(e,t)=>nm(e,t,[1,2])},{Name:"CollarAutoShockUnit",Group:"ItemNeckAccessories",TypeRecord:{s:2,y:0},Craft:{Property:"Secure",Name:"Permanent PSO Shock Unit"}},{Name:"FrogtieStraps",Group:"ItemLegs",Craft:{Property:"Secure",Name:"Permanent PSO Straps",Description:"To keep a PSO on their knees"},ItemCallback:(e,t)=>nm(e,t,[2])},{Name:"DroneMask",Group:"ItemHood",TypeRecord:{m:0,e:0,p:1,g:0,s:1,h:2,j:0},Craft:{Property:"Thin",Name:"Permanent PSO Mask"},ItemCallback:(e,t)=>nm(e,t,[2])}],mummy:[{Name:"DuctTape",Group:"ItemFeet",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{nm(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));0!==n.length&&zp(e,t,Id(n)??{})}},{Name:"DuctTape",Group:"ItemLegs",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{nm(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));0!==n.length&&zp(e,t,Id(n)??{})}},{Name:"DuctTape",Group:"ItemHands",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>nm(e,t,[0])},{Name:"DuctTape",Group:"ItemArms",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{nm(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));0!==n.length&&zp(e,t,Id(n)??{})}},{Name:"LargeDildo",Group:"ItemMouth",Craft:{Property:"Large",Name:"Rubber Mouth Sealant",Description:"A rubber mass molded to shape of your mouth"}},{Name:"DuctTape",Group:"ItemMouth2",TypeRecord:{typed:0},Craft:{Property:"Large",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{nm(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));n.length<2||zp(e,t,Id(n.slice(1))??{})}},{Name:"DuctTape",Group:"ItemMouth3",TypeRecord:{typed:0},Craft:{Property:"Large",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},Equip:()=>Math.random()>.5,ItemCallback:(e,t)=>{nm(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));0!==n.length&&zp(e,t,Id(n)??{})}}],maid:[{Name:"LaceBands",Group:"Bracelet",Color:["#aaaaaa","#151515"]},{Name:"MaidOutfit2",Group:"Cloth",Color:["#0C0C0C","#919194","#9C9C9F"]},{Name:"CatsuitCollar",Group:"ClothAccessory",Color:["#0E0E0E"]},{Name:"MaidHairband1",Group:"Hat",Color:["#979797"]},{Name:"Socks6",Group:"Socks",Color:["#0D0D0D","#919194"]},{Name:"HeartTop",Group:"Bra",Color:["#0E0E0E"]},{Name:"FuturisticHeels2",Group:"Shoes",Color:["#101010","Default","#F1FAFF","#898989","#898989"],TypeRecord:{typed:1}},{Name:"MaidCollar",Group:"ItemNeck",Color:["#DCDCDC","#1B1B1B","Default"],Craft:{Property:"Secure",Name:"Maid Collar",Description:"A tight fitting yet comfortable collar"}},{Name:"FuturisticMittens",Group:"ItemHands",Color:["#FFFFFF","#FFFFFF","#2E2E2E","#050505"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Maid Mittens",Description:"For keeping a maid out of trouble"}},{Name:"FuturisticHeels2",Group:"ItemBoots",Color:["#101010","#101010","Default","#F1FAFF","#898989","#898989","#898989"],TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Maid Heels",Description:"For keeping a maid on their toes"}},{Name:"WiredEgg",Group:"ItemVulva",Color:["Default","#141414"],TypeRecord:{vibrating:1},Craft:{Property:"Arousing",Name:"Maid Teaser",Description:"A little reminder to keep a maid on edge"},Property:{OverridePriority:21}},{Name:"StraitLeotard",Group:"ItemArms",Color:["#FFFFFF","#1A1A1A","#FFFFFF"],TypeRecord:{cl:1,co:1,np:0,vp:0},Craft:{Property:"Secure",Name:"Maid Jacket",Description:"For keeping a maid out of trouble"}},{Name:"LeatherAnkleCuffs",Group:"ItemFeet",Color:["#969696","#191919","#969696"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Maid Cuffs",Description:"For keeping a maid out of trouble"}},{Name:"BallGag",Group:"ItemMouth",TypeRecord:{typed:2},Craft:{Property:"Large",Name:"Maid Silencer",Description:"Silence is golden"}}],statue:[{Name:"ReverseBunnySuit",Group:"SuitLower",Color:["#1B1B1B"],Equip:e=>cg(e)},{Name:"SeamlessCatsuit",Group:"SuitLower",Color:["#484747"],Equip:e=>!cg(e)},{Name:"SeamlessCatsuit",Group:"Suit",Color:["#484747"],Equip:e=>!cg(e)},{Name:"ReverseBunnySuit",Group:"Cloth",Color:["#1B1B1B","#1B1B1B"]},{Name:"BondageSkirt",Group:"ClothLower",Color:["#484747","#333333","#333333"]},{Name:"CatsuitCollar",Group:"ClothAccessory",Color:["#484747"]},{Name:"HighCollar",Group:"ItemNeck",Color:["#363636","#717171"],Craft:{Property:"Secure",Name:"Statue Neck"}},{Name:"LargeDildo",Group:"ItemMouth",Color:["#333333"],Craft:{Property:"Large",Name:"Mouth Sealant"},Property:{OverridePriority:27}},{Name:"LatexPostureCollar",Group:"ItemMouth2",Color:["Default"],Craft:{Property:"Large",Name:"Mouth Sealant"},Property:{OverridePriority:28}},{Name:"LatexBallMuzzleGag",Group:"ItemMouth3",Color:["#A1A1A1"],Craft:{Property:"Large",Name:"Mouth Sealant"}},{Name:"KirugumiMask",Group:"ItemHood",Color:["#484747","#484747","#484747","#484747"],TypeRecord:{e:0,m:3,b:0,br:0,op:0,ms:0},Craft:{Property:"Secure",Name:"Statue's Visage"}},{Name:"MonoHeel",Group:"ItemBoots",Color:["#737070","#737070","#101010"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Statue Base"}},{Name:"FuturisticMittens",Group:"ItemHands",Color:["#767676","#5F5F5F","#3C3C3C","#4F4F4F"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Statue Hands"}},{Name:"SmoothLeatherArmbinder1",Group:"ItemArms",Color:["#191919","#3D3D3D","#191919","#191919","#191919"],Craft:{Property:"Secure",Name:"Statue Arms"}}]}).map((([e,t])=>{const r=Object.freeze(t.map((t=>{let r;if(null!==t.Craft&&"object"==typeof t.Craft){const n=AssetGet(Player.AssetFamily,t.Group,t.Name);if(null==n)throw new Error(`Invalid ${e} item: ${t.Group}${t.Name}`);r={...t.Craft,Item:t.Name,Private:!0,Lock:"",TypeRecord:void 0,Name:t.Craft.Name||n.Description,MemberNumber:void 0,MemberName:""},CraftingValidate(r,n,!1)}return Object.freeze({...t,Custom:!1,Property:Object.freeze(t.Property??{}),TypeRecord:t.TypeRecord,Craft:Object.freeze(r),Color:t.Color,ItemCallback:t.ItemCallback,Equip:t.Equip})})));return[e,r]})));return Object.freeze(e)}(),am=Object.freeze([new bg("PSO Bondage",im.leash_candy,Player.MBSSettings.FortuneWheelItemSets,qp.UNDERWEAR,qp.UNDERWEAR,Hf($f.map(ka),[0,1,2,3,4,5]),!1),new bg("Mummification",im.mummy,Player.MBSSettings.FortuneWheelItemSets,qp.CLOTHES,qp.UNDERWEAR,Hf($f.map(ka),[3]),!1),new bg("Bondage Maid",im.maid,Player.MBSSettings.FortuneWheelItemSets,qp.UNDERWEAR,qp.UNDERWEAR,Hf($f.map(ka),[0,1,2,3]),!1),new bg("Petrification",im.statue,Player.MBSSettings.FortuneWheelItemSets,qp.UNDERWEAR,qp.UNDERWEAR,Hf($f.map(ka),[0,1,2,3]),!1,om)]),am.forEach((e=>e.register(!1))),sm=Object.freeze(WheelFortuneOption.filter((e=>!e.Custom))),lm=WheelFortuneDefault,Hm([Fm.SHARED])})),CurrentScreen){case"WheelFortune":return dm();case"WheelFortuneCustomize":return hm()}}));const pm=80,fm=160;var mm,gm,Rm,vm,ym,bm;Bp(dg).then((()=>{kp.log("Initializing crafting hooks"),Tp.patchFunction("CraftingClick",{"if (CraftingOffset < 0) CraftingOffset = 80 - 20;":"if (CraftingOffset < 0) CraftingOffset = 160 - 20;","if (CraftingOffset >= 80) CraftingOffset = 0;":"if (CraftingOffset >= 160) CraftingOffset = 0;"}),Tp.patchFunction("CraftingRun",{"/ ${80 / 20}.":"/ 8."}),Bp(pg).then((()=>{kp.log("Initializing crafting cache"),Tp.hookFunction("CraftingSaveServer",0,((e,t)=>{const r=Player.Crafting;Player.Crafting=r?.slice(0,pm),t(e),Player.Crafting=r;const n=null==(o=Player.Crafting?Player.Crafting.slice(pm):null)?"":o.map((e=>e?.Item?CraftingSerialize(e):"")).join(CraftingSerializeItemSep);var o;n!=Player.MBSSettings.CraftingCache&&(Player.MBSSettings.CraftingCache=n,Hm([Fm.SETTINGS]))})),function(e,t){if(e.Crafting??=[],Op(e.Crafting,pm,null),!t)return;const r=LZString.compressToUTF16(t),n=CraftingDecompressServerData(r),o=new Set(e.Crafting.map((e=>JSON.stringify(e))));let i=!1;for(const[e,t]of n.entries())if(null!=t)e:switch(CraftingValidate(t)){case CraftingStatusType.OK:{const r=JSON.stringify(t);o.has(r)&&(kp.warn(`Filtering duplicate crafting item ${pm+e}: "${t.Name} (${t.Item})"`),n[e]=null);break e}case CraftingStatusType.ERROR:{const r=JSON.stringify(t);o.has(r)?(kp.warn(`Filtering duplicate crafting item ${pm+e}:"${t.Name} (${t.Item})"`),n[e]=null):i=!0;break e}case CraftingStatusType.CRITICAL_ERROR:kp.error(`Removing corrupt crafting item ${pm+e}: "${t?.Name} (${t?.Item})"`),n[e]=null}for(const t of n)if(e.Crafting.length>=fm){if(null==t)continue;if(e.Crafting.includes(null,pm))kp.warn("Found more than 160 crafting items, trimming down [80, 160)-interval null entries"),e.Crafting=e.Crafting.filter(((e,t)=>t<pm||null!=e));else{if(!e.Crafting.includes(null)){const t=e.Crafting.length-fm;kp.error(`Found more than 160 crafting items, the last ${t} will be deleted`);break}kp.warn("Found more than 160 crafting items, trimming down [0, 80)-interval null entries"),e.Crafting=e.Crafting.filter((e=>null!=e))}}else e.Crafting.push(t);i&&e.IsPlayer()&&CraftingSaveServer()}(Player,Player.MBSSettings.CraftingCache)}))}));gm=new WeakMap,Rm=new WeakMap,vm=new WeakMap,ym=new WeakMap,mm=new WeakSet,bm=async function(e,t){const r=await fetch(t).then((t=>t.ok?(kp.debug(`Successfully fetched "${e}" json`,t),t.json()):(kp.debug(`Failed to fetch "${e}" json`,t),Promise.resolve(null)))).catch((e=>(kp.error(e),null)));if(null!==r)switch(e){case"phoneticDict":S(this,gm,Object.freeze(r),"f"),S(this,vm,!0,"f");break;case"gagData":S(this,Rm,Object.freeze(r),"f"),S(this,ym,!0,"f");break;default:throw new Error(`Invalid type: ${e}`)}};const Sm=new class{constructor(){mm.add(this),gm.set(this,Object.freeze({})),Rm.set(this,Object.freeze({})),vm.set(this,!1),ym.set(this,!1)}get gagData(){return b(this,ym,"f")||b(this,mm,"m",bm).call(this,"gagData","https://bananarama92.github.io/MBS/devel/vendor/gag_data.json"),b(this,Rm,"f")}get phoneticDict(){return b(this,vm,"f")||b(this,mm,"m",bm).call(this,"phoneticDict","https://bananarama92.github.io/MBS/devel/vendor/en_US.json"),b(this,gm,"f")}init(){this.gagData,this.phoneticDict}},Cm=Object.freeze({LIGHT:3,MEDIUM:6,HEAVY:9,KILO_HEAVY:12,MEGA_HEAVY:15,GIGA_HEAVY:18,MAX:21}),wm=Object.freeze(new Set(["aɪ","aʊ","b","d","dʒ","eɪ","f","h","i","j","k","m","n","oʊ","p","s","t","tʃ","u","v","w","z","æ","ð","ŋ","ɑ","ɔ","ɔɪ","ə","ɛ","ɝ","ɡ","ɪ","ɪə","ɫ","ɹ","ʃ","ʊ","ʒ","θ"])),km=/\p{L}/u;function Bm(e){const t=e.toLowerCase(),r=Sm.phoneticDict[t];if(void 0===r)return;const n=yd(0,r.length).map((e=>[]));for(const e of Gh(r,n)){const[t,r]=e;let n=0;for(;n<t.length;){const e=t[n],o=t.slice(n,n+2);wm.has(o)?(r.push(o),n+=2):(r.push(e),n+=1)}}return n}function Pm(e,t){let r=e=>e;if(null!=e?.dropChars){const n={level:t,levelMin:e.dropChars.levelMin??Cm.HEAVY,levelMax:e.dropChars.levelMax??Cm.MAX,maxFrac:e.dropChars.maxFrac??.5};r=e=>function(e,t){const{level:r,levelMax:n,levelMin:o,maxFrac:i}=t;if(r<o)return e;const a=Array.from(e),s=Math.max(i,i*(r-o)/(n-o)),l=Math.floor(a.length*s);return e.slice(0,a.length-l).padEnd(a.length-Math.floor(l/2))}(e,n)}return{dropChars:r,character:e?.character??null,fallback:e?.fallback??(e=>Tp.callOriginal("SpeechGarbleByGagLevel",[e[1],e[0],e[2]])),ignoreOOC:e?.ignoreOOC??!1,perSyllable:e?.perSyllable??!1}}function xm(e,t,r=null){if(e&&e.HasEffect("OpenMouth")&&!e.HasEffect("BlockMouth"))return Sm.gagData["Ring Gag"]??{};e:if(null!==r){const e=Math.floor(t/3);if(0===e)break e;t/3-e>r.syllable/r.syllableMax&&(t=3*(1+e))}return t<=Cm.LIGHT?Sm.gagData["Cleave Gag"]??{}:t<=Cm.MEDIUM?Sm.gagData["Ball Gag"]??{}:Sm.gagData["Dildo Gag"]??{}}function Mm(e,t,r=null){const{dropChars:n,fallback:o,character:i,ignoreOOC:a,perSyllable:s}=Pm(r,t);let l="";const c=function(e,t=!1){const r=SpeechGetOOCRanges(e).values();let n=r.next();if(n.done||t)return[{words:e,ooc:!1}];const o=[];let i=0;for(;!n.done;){const t=n.value.start,a=t+n.value.length;o.push({words:e.slice(i,t),ooc:!1}),o.push({words:e.slice(t,a),ooc:!0}),n=r.next(),i=a}return o.push({words:e.slice(i),ooc:!1}),o}(e,a);for(const e of c){if(e.ooc){l+=e.words;continue}let r="",a=[];const c=e.words.length-1;for(const[u,d]of Array.from(e.words).entries()){const e=km.test(d);if(e&&(r+=d,a.push(d.toUpperCase()===d),u<c))continue;const h=Bm(r);if(h){const e=n(h.flatMap(((e,r)=>{const n=s?{syllable:r+1,syllableMax:h.length}:null,o=xm(i,t,n);return e.map((e=>o[e]?.SOUND??""))})).join(""));a.every(Boolean)?l+=e.toUpperCase():a[0]&&e.length>0?l+=`${e[0].toUpperCase()}${e.slice(1)}`:l+=e}else l+=o([r,t]);r="",a=[],e||(l+=o([d,t]))}}return l}Bp(pg).then((()=>{kp.log("Initializing garbling module"),Tp.patchFunction("SpeechTransformProcess",{"text = SpeechTransformGagGarble(text, intensity, ignoreOOC);":"text = SpeechTransformGagGarble(text, intensity, ignoreOOC, C);"}),Tp.hookFunction("SpeechTransformGagGarble",0,(([e,t,r,...n],o)=>{const i=n[0];if(t&&e&&Player.MBSSettings.AlternativeGarbling){return Mm(e,t,{dropChars:Player.MBSSettings.DropTrailing?{}:void 0,perSyllable:Player.MBSSettings.GarblePerSyllable,fallback:o,ignoreOOC:r,character:i})}return o([e,t,r,...n])}))}));const Im=18e4;function Em(e){const t=[],r=CommonIsObject(e)?e:{};for(const[e,n]of Object.entries(r))try{const r=JSON.stringify(n??"");t.push([e,(new TextEncoder).encode(r).byteLength])}catch{t.push([e,NaN])}return Object.fromEntries(t.sort((([e,t],[r,n])=>{t=Math.round(t/100),n=Math.round(n/100);const o=Number.isNaN(t),i=Number.isNaN(n);return t===n||o&&i?e.localeCompare(r):o||i?i?-1:1:n-t})))}function _m(e){return Math.round(e/100)/10}const Fm=Object.freeze({SETTINGS:0,SHARED:1});function Om(){const e=function(){const e=jp.fromVersion(t),r=`#v${e.major}${e.minor}${e.micro}`;return e.beta?["blob/devel",""]:["blob/main",r]}();return`https://github.com/bananarama92/MBS/${e[0]}/CHANGELOG.md${e[1]}`}function $m(e,t,r){Array.isArray(t)?t.length>ig&&($p(t,ig),r.push([`Trimming too long wheel of fortune item list: ${t.length}/${ig}`])):(t=[],r.push(["Re-initializing invalid wheel of fortune item list: "+typeof t]));const n=Object.seal(Array(ig).fill(null));return t.forEach(((t,o)=>{if(null!==t)try{(n[o]=e(n,t)).register(!1)}catch(e){r.push([`Failed to load corrupted custom wheel of fortune item ${o}`,e])}})),n}function Lm(e,t){Array.isArray(e)?e.length>ag&&($p(e,ag),t.push([`Trimming too long wheel of fortune preset list: ${e.length}/${ag}`])):(e=[],t.push(["Re-initializing invalid wheel of fortune preset list: "+typeof e]));const r=Object.seal(Array(ag).fill(null));return e.forEach(((e,n)=>{if(null===e)return;if(Array.isArray(e)||"object"!=typeof e||"string"!=typeof e.ids)return void t.push([`Failed to load corrupted custom wheel of fortune preset ${n}`]);const{name:o,ids:i}=e;r[n]={name:"string"==typeof o&&o.length>0&&o.length<=20?o:`Preset ${n}`,ids:i}})),r}function Tm(e,t,r=!0){let n=null;try{if(e&&"string"==typeof e){let t=LZString.decompressFromUTF16(e);t||(t=LZString.decompressFromBase64(e)),n=JSON.parse(t||"null")}}catch(e){r&&kp.warn(`failed to load corrupted MBS ${t}`,e)}return null!==n&&"object"==typeof n?n:{}}function Am(e=null,r=!0){if(void 0===Player.OnlineSharedSettings)throw new Error('"Player.OnlineSharedSettings" still uninitialized');e??={...Tm(Player.OnlineSettings?.MBS,"OnlineSettings"),...Tm(Player.ExtensionSettings.MBS,"ExtensionSettings"),...Tm(Player.OnlineSharedSettings.MBS,"OnlineSharedSettings")},void 0!==e.Version&&function(e){if(void 0===e)return kp.log("Detecting first-time MBS initialization"),!1;const r=jp.fromVersion(t);let n;try{n=jp.fromVersion(e)}catch(t){return kp.warn(`Failed to parse previous MBS version: ${e}`),!1}return r.greater(n)?(kp.log(`Upgrading MBS from ${e} to ${t}`),!0):!!r.lesser(n)&&(kp.warn(`Downgrading MBS from ${e} to ${t}`),!1)}(Player.OnlineSharedSettings.MBSVersion??Player.OnlineSettings?.MBSVersion)&&function(){const e=`New MBS version detected: ${t}\n\nSee below for the updated changelog:\n${Om()}`;"number"==typeof Player.MemberNumber&&ServerAccountBeep({MemberNumber:Player.MemberNumber,MemberName:"MBS",ChatRoomName:"MBS Changelog",Private:!0,Message:e,ChatRoomSpace:"",BeepType:""})}();let n=!1;void 0!==Player.OnlineSettings?.MBSVersion&&(delete Player.OnlineSettings.MBSVersion,n=!0),Player.OnlineSettings?.MBS&&(delete Player.OnlineSettings.MBS,n=!0),n&&ServerAccountUpdate.QueueData({OnlineSettings:Player.OnlineSettings});const o=function(e){const r={Version:[],CraftingCache:[],FortuneWheelItemSets:[],FortuneWheelCommands:[],FortuneWheelPresets:[],LockedWhenRestrained:[],RollWhenRestrained:[],AlternativeGarbling:[],DropTrailing:[],GarblePerSyllable:[]},n={CraftingCache:"",LockedWhenRestrained:!1,RollWhenRestrained:!0,AlternativeGarbling:!1,DropTrailing:!1,GarblePerSyllable:!1};for(const[t,o]of bp(n))void 0!==e[t]&&(typeof e[t]!=typeof o?r[t]=[[`Invalid type, expected a ${typeof o}: ${typeof r[t]}`]]:n[t]=e[t]);const o={Version:t,CraftingCache:n.CraftingCache,FortuneWheelItemSets:$m(bg.fromObject,e.FortuneWheelSets??e.FortuneWheelItemSets??[],r.FortuneWheelItemSets),FortuneWheelCommands:$m(Sg.fromObject,e.FortuneWheelCommands??[],r.FortuneWheelCommands),FortuneWheelPresets:Lm(e.FortuneWheelPresets??[],r.FortuneWheelPresets),LockedWhenRestrained:n.LockedWhenRestrained,RollWhenRestrained:n.RollWhenRestrained,AlternativeGarbling:n.AlternativeGarbling,DropTrailing:n.DropTrailing,GarblePerSyllable:n.GarblePerSyllable};return o.AlternativeGarbling&&Sm.init(),{settings:o,ok:0===Kd(Object.values(r).map((e=>e.length))),err:Sp(bp(r).filter((([e,t])=>t.length>0)))}}(e);return(o.ok||r)&&(Player.MBSSettings=o.settings),o.ok||(kp.warn("Encountered and fixed one or more errors while parsing MBS settings",o.err),r&&function(e){const t=Sp(bp(e).map((([e,t])=>[e,t.map((e=>e.join(", ")))]))),r=`Encountered one or more errors while parsing MBS settings:\n\n${JSON.stringify(t,void 0,4)}`;"number"==typeof Player.MemberNumber&&ServerAccountBeep({MemberNumber:Player.MemberNumber,MemberName:"MBS",ChatRoomName:"MBS Settings Error",Private:!0,Message:r,ChatRoomSpace:"",BeepType:""})}(o.err)),Player.OnlineSharedSettings.WheelFortune??=WheelFortuneDefault,o}function Hm(e,r=!0){if(void 0===Player.OnlineSharedSettings)throw new Error("Player.OnlineSharedSettings is still uninitialized");const n={};if(e.includes(Fm.SETTINGS)){const e=gu(Player.MBSSettings,"FortuneWheelItemSets","FortuneWheelCommands");Player.ExtensionSettings.MBS=LZString.compressToUTF16(JSON.stringify(e)),r&&(n["ExtensionSettings.MBS"]=Player.ExtensionSettings.MBS)}if(e.includes(Fm.SHARED)){const e=Object.freeze({FortuneWheelItemSets:Player.MBSSettings.FortuneWheelItemSets,FortuneWheelCommands:Player.MBSSettings.FortuneWheelCommands});Player.OnlineSharedSettings.MBS=LZString.compressToUTF16(JSON.stringify(e)),Player.OnlineSharedSettings.MBSVersion=t,r&&(Player.OnlineSharedSettings.WheelFortune=ug(Player.OnlineSharedSettings.WheelFortune),n.OnlineSharedSettings=Player.OnlineSharedSettings)}r&&ServerAccountUpdate.QueueData(n)}function Nm(){const e=["ExtensionSettings","OnlineSharedSettings"];for(const t of e){const e=Em(Player[t]),r=Object.fromEntries(Object.entries(e).map((([e,t])=>[e,_m(t)]))),n=_m(Kd(Object.values(e),(e=>Number.isNaN(e)?0:e)));n>=.9*Im/1e3?kp.warn(`Total ${t} data usage at ${n} / ${Im/1e3} KB`,r):kp.log(`Total ${t} data usage at ${n} / ${Im/1e3} KB`,r)}}const Dm=Object.freeze({OK:0,ERROR:1,EMPTY_SETTINGS:2,WARN:3});Bp(hg).then((()=>{Am(),Hm([Fm.SETTINGS,Fm.SHARED],!1),kp.log("Initializing settings module"),Nm()}));var Gm,jm,Wm,zm,Vm,qm,Um,Km,Jm;function Ym(){null!=TextScreenCache&&(TextScreenCache.cache[`Homepage${eg.screen}`]="MBS Settings");const e=new Image;e.addEventListener("error",(()=>DrawGetImageOnError(e,!1))),e.src="Icons/Maid.png",DrawCacheImage.set(`Icons/${eg.screen}.png`,e)}class Zm extends cf{constructor(){super(null,"Character","Preference",{Run:PreferenceRun,Click:PreferenceClick,Exit:PreferenceExit,Load:()=>CommonSetScreen("Character","Preference")})}}Zm.screen="Preference";const Xm="mbs-preference",Qm=Object.freeze({root:Xm,styles:`${Xm}-style`,header:`${Xm}-header`,exit:`${Xm}-exit`,exitButton:`${Xm}-exit-button`,exitTooltip:`${Xm}-exit-tooltip`,settingsGrid:`${Xm}-settings`,settingsPair:`${Xm}-settings-pair`,itemsButton:`${Xm}-items-button`,itemsHeader:`${Xm}-items-header`,wheelButton:`${Xm}-wheel-button`,wheelHeader:`${Xm}-wheel-header`,rollCheckbox:`${Xm}-roll-checkbox`,rollHeader:`${Xm}-roll-header`,lockCheckbox:`${Xm}-lock-checkbox`,lockHeader:`${Xm}-lock-header`,gagCheckbox:`${Xm}-gag-checkbox`,gagHeader:`${Xm}-gag-header`,miscGrid:`${Xm}-misc`,reset:`${Xm}-reset`,resetButton:`${Xm}-reset-button`,resetTooltip:`${Xm}-reset-tooltip`,resetScreen:`${Xm}-reset-screen`,resetBackground:`${Xm}-reset-background`,resetGrid:`${Xm}-reset-grid`,resetAccept:`${Xm}-reset-accept`,resetCancel:`${Xm}-reset-cancel`,import:`${Xm}-import`,importButton:`${Xm}-import-button`,importTooltip:`${Xm}-import-tooltip`,export:`${Xm}-export`,exportButton:`${Xm}-export-button`,exportTooltip:`${Xm}-export-tooltip`,changelog:`${Xm}-changelog`,changelogButton:`${Xm}-changelog-button`,changelogTooltip:`${Xm}-changelog-tooltip`});class eg extends lf{constructor(e,r=null){super(e,eg.screenParamsDefault,r),Gm.add(this),document.body.appendChild(p("div",{id:Qm.root,class:"mbs-screen",children:[h("style",{id:Qm.styles,children:'#mbs-preference {\n  grid-template: "header header exit" min(9dvh, 4.5dvw) "settings misc misc" auto/auto min(29dvh, 14.5dvw) min(9dvh, 4.5dvw);\n}\n\n#mbs-preference-header {\n  grid-area: header;\n}\n\n#mbs-preference-exit {\n  grid-area: exit;\n}\n\n.mbs-preference-settings-pair {\n  grid-column-gap: min(3dvh, 1.5dvw);\n  align-items: center;\n  display: grid;\n  grid-template-columns: min(9dvh, 4.5dvw) auto;\n  padding-right: min(6dvh, 3dvw);\n  text-align: justify;\n}\n.mbs-preference-settings-pair button {\n  height: min(9dvh, 4.5dvw);\n  width: min(9dvh, 4.5dvw);\n}\n.mbs-preference-settings-pair > p {\n  margin: 0;\n}\n\n#mbs-preference-settings {\n  display: grid;\n  grid-area: settings;\n  height: 100%;\n  overflow: hidden scroll;\n  grid-gap: min(2dvh, 1dvw);\n}\n\n#mbs-preference-misc {\n  align-self: self-end;\n  display: grid;\n  grid-gap: min(2dvh, 1dvw);\n  grid-area: misc;\n  grid-template: "reset reset" min(9dvh, 4.5dvw) "import export" min(9dvh, 4.5dvw) "changelog changelog" min(9dvh, 4.5dvw)/auto auto;\n}\n#mbs-preference-misc button {\n  background-origin: padding-box;\n  background-position: left;\n  background-size: min(7dvh, 3.5dvw) min(7dvh, 3.5dvw);\n}\n\n#mbs-preference-reset {\n  grid-area: reset;\n  grid-template-columns: min(40dvh, 20dvw);\n}\n#mbs-preference-reset button:not(:hover) {\n  background-color: pink;\n}\n\n#mbs-preference-import {\n  grid-area: import;\n  grid-template-columns: min(19dvh, 9.5dvw);\n}\n\n#mbs-preference-export {\n  grid-area: export;\n  grid-template-columns: min(19dvh, 9.5dvw);\n}\n\n#mbs-preference-changelog {\n  grid-area: changelog;\n  grid-template-columns: min(40dvh, 20dvw);\n}\n\n#mbs-preference-reset-screen {\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 2;\n}\n\n#mbs-preference-reset-background {\n  background: url("https://bananarama92.github.io/MBS/main/images/SheetMBS.png") var(--mbs-background-color);\n  background-blend-mode: multiply;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: contain;\n  box-sizing: border-box;\n  height: 80%;\n  justify-self: center;\n  mask-image: url("https://bananarama92.github.io/MBS/main/images/SheetMBS.png");\n  mask-position: center;\n  mask-repeat: no-repeat;\n  mask-size: contain;\n  padding: min(6dvh, 3dvw);\n  padding-top: min(3dvh, 1.5dvw);\n  position: relative;\n  width: 80%;\n  word-break: break-word;\n}\n\n#mbs-preference-reset-grid {\n  display: grid;\n  grid-template-columns: auto auto;\n  justify-items: center;\n  padding-top: min(10dvh, 5dvw);\n}\n#mbs-preference-reset-grid .mbs-button {\n  height: min(9dvh, 4.5dvw);\n  width: min(27dvh, 13.5dvw);\n}'.toString()}),h("h1",{id:Qm.header,children:`Maid's Bondage Scripts ${t}`}),p("div",{id:Qm.exit,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:Qm.exitButton,onClick:this.exit.bind(this),style:{backgroundImage:"url('./Icons/Exit.png')"}}),h("span",{class:"mbs-button-tooltip",style:{justifySelf:"right"},children:"Exit"})]}),p("div",{id:Qm.settingsGrid,children:[h("h2",{children:"Wheel of fortune settings"}),p("div",{class:"mbs-preference-settings-pair",children:[h("button",{class:"mbs-button",style:{backgroundImage:"url('./Icons/Crafting.png')"},onClick:b(this,Gm,"m",Km).bind(this)}),"Configure the wheel of fortune"]}),p("div",{class:"mbs-preference-settings-pair",children:[h("input",{type:"checkbox","data-field":"RollWhenRestrained",onClick:b(this,Gm,"m",jm).bind(this)}),"Allow wheel rolling while restrained"]}),p("div",{class:"mbs-preference-settings-pair",children:[h("input",{type:"checkbox","data-field":"LockedWhenRestrained",onClick:b(this,Gm,"m",jm).bind(this)}),"Lock MBS settings while restrained"]}),h("h2",{children:"Garbling settings"}),p("div",{class:"mbs-preference-settings-pair",children:[h("input",{type:"checkbox","data-field":"AlternativeGarbling",onClick:b(this,Gm,"m",jm).bind(this)}),p("span",{children:[p("p",{children:[h("strong",{children:"Experimental"}),": whether gags will use an alternative form of, more phonetically acurate, speech garbling based on ",h("a",{href:"https://github.com/CordeliaMist/Dalamud-GagSpeak",target:"_blank",children:"Dalamud-GagSpeak"})]}),p("p",{children:["Incompatible-ish with ",h("a",{href:"https://sidiousious.gitlab.io/bce/",target:"_blank",children:"FBC"}),"'s garbling anti-cheat as of the moment"]})]})]}),p("div",{class:"mbs-preference-settings-pair",children:[h("input",{type:"checkbox","data-field":"DropTrailing",onClick:b(this,Gm,"m",jm).bind(this)}),"Whether to heaviest gags will drop up to half of all trailing characters when alternate garbling is enabled"]}),p("div",{class:"mbs-preference-settings-pair",children:[h("input",{type:"checkbox","data-field":"GarblePerSyllable",onClick:b(this,Gm,"m",jm).bind(this)}),"Interpolate between the three alternative garbling levels, allowing for a more gradual increase in garbling strength (on a syllable by syllable basis) as the gag level increases"]})]}),p("div",{id:Qm.miscGrid,children:[p("div",{id:Qm.reset,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:Qm.resetButton,style:{backgroundImage:"url('./Icons/ServiceBell.png')"},onClick:b(this,Gm,"m",Vm).bind(this),children:"Reset MBS"}),h("span",{class:"mbs-button-tooltip",children:"Clear all MBS data"})]}),p("div",{id:Qm.import,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:Qm.importButton,onClick:b(this,Gm,"m",Wm).bind(this),children:"Import"}),h("span",{class:"mbs-button-tooltip",children:"Import MBS settings"})]}),p("div",{id:Qm.export,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:Qm.exportButton,onClick:b(this,Gm,"m",zm).bind(this),children:"Export"}),h("span",{class:"mbs-button-tooltip",children:" Export MBS settings"})]}),p("div",{id:Qm.changelog,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:Qm.changelogButton,style:{backgroundImage:"url('./Icons/Changelog.png')"},onClick:()=>open(Om(),"_blank"),children:"Latest Changes"}),h("span",{class:"mbs-button-tooltip",children:"Open the MBS changelog"})]})]})]})),document.body.appendChild(h("div",{id:Qm.resetScreen,class:"mbs-screen","screen-generated":eg.screen,children:p("div",{id:Qm.resetBackground,children:[h("h1",{children:"MBS data reset"}),h("p",{children:h("strong",{children:"- Warning -"})}),p("p",{children:["If you confirm, ",h("i",{children:"all"})," MBS data (including settings, overrides, and current states) will be permanently reset!"]}),h("p",{children:"You will be able to continue using MBS, but all of your configuration will be reset to default!"}),h("p",{children:h("strong",{children:"This action cannot be undone!"})}),p("div",{id:Qm.resetGrid,children:[h("button",{class:"mbs-button",onClick:b(this,Gm,"m",Um).bind(this),disabled:!0,id:Qm.resetAccept,children:"Confirm (10)"}),h("button",{class:"mbs-button",onClick:this.exit.bind(this),id:Qm.resetCancel,children:"Cancel"})]})]})}))}load(){b(this,Gm,"m",Jm).call(this),super.load()}draw(){DrawCharacter(Player,50,50,.9)}exit(){const e=document.getElementById(Qm.resetScreen);"visible"===e.style.visibility?e.style.visibility="hidden":(super.exit(),this.exitScreens(!1))}}let tg;var rg,ng,og;Gm=new WeakSet,jm=function(e){const t=e.target.dataset.field;if(t in Player.MBSSettings)switch(Player.MBSSettings[t]=!Player.MBSSettings[t],Hm([Fm.SETTINGS]),t){case"AlternativeGarbling":Player.MBSSettings[t]&&Sm.init();break;case"LockedWhenRestrained":b(this,Gm,"m",Jm).call(this)}},Wm=function(){const e=prompt("Please paste MBS settings.\nImporting settings will overwrite existing settings. Are you sure?");if(!e)return;const t=function(e){kp.log("Importing new MBS settings");let t=null,r=null;try{t=JSON.parse(LZString.decompressFromBase64(e.trim())||"{}")}catch(e){r=e}if(r||null===t||"object"!=typeof t||vp(t))return kp.error("Aborting, failed to parse corrupted MBS settings",r),{status:Dm.ERROR,ok:!1};if(0===Object.keys(t).length)return kp.error("Aborting, detected empty or corrupted MBS settings"),{status:Dm.EMPTY_SETTINGS,ok:!1};const n=Am(t,!1);return n.ok?(Hm([Fm.SETTINGS,Fm.SHARED],!0),Nm(),{status:Dm.OK,...n}):{status:Dm.WARN,...n}}(e);switch(t.status){case Dm.OK:return kp.log("Settings successfully updated"),alert("Settings successfully updated!");case Dm.ERROR:return alert("ERROR: Detected corrupted MBS settings.\nNo changes were made.");case Dm.EMPTY_SETTINGS:return alert("ERROR: Detected empty or corrupted MBS settings.\nNo changes were made.");case Dm.WARN:return void(confirm("WARNING: MBS successfully parsed the settings but found one or more invalid fields; please check the browser console for more details.\nAre you sure you want to continue?")&&(Player.MBSSettings=t.settings,Hm([Fm.SETTINGS,Fm.SHARED],!0),Nm(),kp.log("Settings successfully updated"),alert("Settings successfully updated!")));default:throw new Error(`Unknown status type: ${t.status}`)}},zm=function(){const e=LZString.compressToBase64(JSON.stringify(Player.MBSSettings));navigator.clipboard.writeText(e),alert("MBS settings copied to clipboard.")},Vm=function(){const e=document.getElementById(Qm.resetScreen),t=document.getElementById(Qm.resetAccept);e.style.visibility="visible",t.disabled=!0,b(this,Gm,"m",qm).call(this,t)},qm=async function(e){let t=9;for(;t>=0;)await new Promise((e=>setTimeout(e,1e3))),e.innerText=`Confirm (${t})`,t--;e.innerText="Confirm",e.disabled=!1},Um=function(){delete Player.ExtensionSettings.MBS,void 0!==Player.OnlineSharedSettings&&(delete Player.OnlineSharedSettings.MBSVersion,delete Player.OnlineSharedSettings.MBS,Player.OnlineSharedSettings.WheelFortune=lm),WheelFortuneOption=WheelFortuneOption.filter((e=>!0!==e.Custom)),WheelFortuneDefault=lm,Player.Crafting=Player.Crafting?.slice(0,pm),Player.MBSSettings=Object.seal({Version:t,CraftingCache:"",FortuneWheelItemSets:Object.seal(Array(ig).fill(null)),FortuneWheelCommands:Object.seal(Array(ig).fill(null)),LockedWhenRestrained:!1,RollWhenRestrained:!0,FortuneWheelPresets:Object.seal(Array(ag).fill(null)),AlternativeGarbling:!1,DropTrailing:!1,GarblePerSyllable:!1}),ServerAccountUpdate.QueueData({ExtensionSettings:Player.ExtensionSettings,OnlineSharedSettings:Player.OnlineSharedSettings},!0),kp.log("Settings successfully reset"),Nm(),this.exit()},Km=function(){const e={FortuneWheelItemSets:Mf(Player,"FortuneWheelItemSets","item sets"),FortuneWheelCommands:Mf(Player,"FortuneWheelCommands","commands")},[t,r,n,o]=this.screenParams[this.ids.root].shape,i={[Ff.ids.root]:{shape:[95,r,n+(t-95),o]}};this.loadChild(Ff,e,Player,i)},Jm=function(){const e=Player.IsRestrained()&&Player.MBSSettings.LockedWhenRestrained,t=document.getElementById(Qm.settingsGrid);for(const r of t.children)for(const t of r.children){const r=t.dataset?.field;r&&r in Player.MBSSettings&&(t.checked=Player.MBSSettings[r],t.disabled=e)}},eg.screen="MBS_PreferenceScreen",eg.ids=Qm,eg.screenParamsDefault={[Xm]:Object.freeze({shape:[525,75,1380,850],visibility:"visible"}),[Qm.resetScreen]:Object.freeze({shape:[0,0,2e3,1e3],visibility:"hidden"})},Bp(dg).then((()=>{if(Tp.hookFunction("PreferenceLoad",0,((e,t)=>{t(e),Ym()})),ServerPlayerChatRoom.register({screen:eg.screen,callback:()=>"ChatRoom"===InformationSheetPreviousScreen}),Tp.hookFunction("PreferenceClick",0,((e,t)=>{const r=PreferenceSubscreen;t(e),r||PreferenceSubscreen!==eg.screen||(PreferenceExit(),tg.loadChild(eg))})),PreferenceSubscreenList.push(eg.screen),tg=new Zm,"Preference"===CurrentScreen)return Ym()}));const ig=32,ag=8,sg=Object.freeze(["Blue","Gold","Gray","Green","Orange","Purple","Red","Yellow"]);function lg(e){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "character" type: '+typeof e);if(!e.IsSimple()&&!e.IsPlayer())throw new Error("Expected a simple or player character")}function cg(e){if(!(e.OnlineSharedSettings?.BlockBodyCosplay??!0))return!0;const t=Ap.getRuleState("alt_allow_changing_appearance");return!(null===t||!e.IsPlayer())&&(t.inEffect&&t.isEnforced&&t.customData.minimumRole>3)}function ug(e){if("string"!=typeof e)throw new TypeError('Invalid "IDs" type: '+typeof e);let t="";for(const r of WheelFortuneOption)e.includes(r.ID)&&(t+=r.ID);return t}function dg(e=!0){return"object"==typeof ServerSocket&&null!==ServerSocket&&(!e||GameVersionFormat.test(GameVersion))}function hg(){return dg()&&void 0!==Player.OnlineSharedSettings}function pg(){return hg()&&void 0!==Player.MBSSettings}const fg=Object.freeze({"PSO Bondage":0,Mummification:1,"Bondage Maid":2,Petrification:3});class mg{constructor(e,t){this.name=null,this.mbsList=e,this.weight=Number.isInteger(t)?oi(t,1,9):1}reset(){this.name=null,this.weight=1}isValid(e=null){return!!this.name&&this.mbsList.every(((t,r)=>r===e||t?.name!==this.name))}toString(){return Hp(typeof this,this.toJSON())}}class gg extends mg{get stripLevel(){return this.stripIter.value}set stripLevel(e){const t=this.stripIter.list.indexOf(e);this.stripIter.setPosition(t)}get equipLevel(){return this.equipIter.value}set equipLevel(e){const t=this.equipIter.list.indexOf(e);this.equipIter.setPosition(t)}constructor(e,t){super(e,t),this.itemList=null,this.flags=Object.freeze($f.map((e=>Object.seal({...e})))),this.outfitCache=null,this.stripIter=new Np([qp.NONE,qp.CLOTHES,qp.UNDERWEAR,qp.COSPLAY],qp.UNDERWEAR),this.equipIter=new Np([qp.NONE,qp.CLOTHES,qp.UNDERWEAR,qp.COSPLAY],qp.UNDERWEAR)}reset(){super.reset(),this.itemList=null,this.outfitCache=null,this.stripLevel=qp.UNDERWEAR,this.equipLevel=qp.UNDERWEAR,$f.forEach(((e,t)=>Object.assign(this.flags[t],e)))}readSettings(e){if(!(e instanceof bg))throw new TypeError('Invalid "ItemSet" type: '+typeof e);this.name=e.name,this.itemList=e.itemList,this.stripLevel=e.stripLevel,this.equipLevel=e.equipLevel,this.outfitCache=null,this.weight=e.weight,e.flags.forEach(((e,t)=>Object.assign(this.flags[t],e)))}writeSettings(e=null){if(null===this.name||null===this.itemList)throw new Error('Cannot create an ItemSet while "name" or "itemList" is null');return new bg(this.name,this.itemList,this.mbsList,this.stripLevel,this.equipLevel,this.flags,!0,e,this.weight)}loadFromBase64(){if(null===this.outfitCache)return!1;let e,t;try{e=JSON.parse(LZString.decompressFromBase64(this.outfitCache.trim())),t=function(e){if(!vp(e)){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "items" type: '+typeof e);e=[e]}const t=[],r=new Map,n=new Set;return e.forEach(((e,o)=>{let i=null;try{i=AssetGet("Female3DCG",e.Group,e.Name);const r=of(i,e);!n.has(e.Group)&&null!=i&&(i.Group.IsItem()||i.Group.IsAppearance()&&i.Group.AllowNone)&&(n.add(e.Group),t.push(r))}catch(e){let t=`${i?.Group?.Name}${i?.Name}`;t.includes("undefined")&&(t=`Item ${o}`),r.set(t,e)}})),0!==r.size&&kp.log(`Failed to parse ${r.size} of the provided items`,r),t}(e)}catch(e){return kp.warn("Failed to parse outfit code:",e),!1}return 0!==t.length&&(this.itemList=Object.freeze(function(e,t=Up){const r=Yp(e,t);return Ad(e,(e=>r.get(e.Group)?.priority??1/0))}(t)),!0)}isValid(e=null){return super.isValid(e)&&null!==this.itemList&&this.flags.some((e=>e.enabled))}toJSON(){return{name:this.name,itemList:this.itemList,stripLevel:this.stripLevel,equipLevel:this.equipLevel,flags:this.flags,outfitCache:this.outfitCache}}}class Rg extends mg{readSettings(e){if(!(e instanceof Sg))throw new TypeError('Invalid "command" type: '+typeof e);this.name=e.name,this.weight=e.weight}writeSettings(){if(null===this.name)throw new Error('Cannot create a Command while "name" is null');return new Sg(this.name,this.mbsList,this.weight)}toJSON(){return{name:this.name}}}class vg{get children(){return b(this,rg,"f")}get index(){return this.mbsList.findIndex((e=>e===this))}constructor(e,t,r,n){rg.set(this,null),this.name=e,this.custom=t,this.mbsList=r,this.weight=n}static validate(e){throw new Error("Trying to call an abstract method")}static fromObject(...e){throw new Error("Trying to call an abstract method")}register(){S(this,rg,this.toOptions(),"f")}unregister(){S(this,rg,null,"f")}toString(){return Hp(typeof this,this.toJSON())}}rg=new WeakMap;class yg extends vg{constructor(){super(...arguments),ng.add(this)}register(e=!0){super.register();let t=b(this,ng,"m",og).call(this);for(const e of this.children){const r=WheelFortuneOption.findIndex((t=>t.ID===e.ID));-1!==r?(WheelFortuneOption[r]=e,e.Default&&!WheelFortuneDefault.includes(e.ID)&&(WheelFortuneDefault+=e.ID)):(WheelFortuneOption.splice(t,0,e),e.Default&&(WheelFortuneDefault+=e.ID)),t+=1}e&&Hm([Fm.SHARED])}unregister(e=!0){const t=this.children?.map((e=>e.ID))??[];super.unregister(),WheelFortuneOption=WheelFortuneOption.filter((e=>!t.includes(e.ID))),WheelFortuneDefault=Array.from(WheelFortuneDefault).filter((e=>!t.includes(e))).join(""),e&&Hm([Fm.SHARED])}}ng=new WeakSet,og=function(){if(this.children?.length){const e=this.children[0].ID,t=WheelFortuneOption.findIndex((t=>t.ID>=e));return-1===t?WheelFortuneOption.length:t}return WheelFortuneOption.length};class bg extends yg{constructor(e,t,r,n,o,i,a,s,l){const c=bg.validate({name:e,itemList:t,mbsList:r,stripLevel:n,equipLevel:o,flags:i,custom:a,preRunCallback:s,weight:l});super(c.name,c.custom,c.mbsList,c.weight),this.itemList=c.itemList,this.stripLevel=c.stripLevel,this.equipLevel=c.equipLevel,this.flags=c.flags,this.preRunCallback=c.preRunCallback}static validate(e){if("string"!=typeof e.name)throw new TypeError('Invalid "name" type: '+typeof e.name);if(!vp(e.itemList))throw new TypeError('Invalid "itemList" type: '+typeof e.itemList);{const t=[],r=[];for(let n of e.itemList){const e=AssetGet("Female3DCG",n.Group,n.Name);null!=e?(e.Group.IsItem()||e.Group.IsAppearance()&&e.Group.AllowNone)&&(n.TypeRecord||void 0===n.Type||(n=Object.freeze({...gu(n,"Type"),TypeRecord:ExtendedItemTypeToRecord(e,n.Type)})),t.push(n)):r.push(`${n.Group}:${n.Name}`)}e.itemList=Object.freeze(t),0!==r.length&&kp.warn(`Found ${r.length} items in wheel of fortune item set "${this.name}": ${r}`)}if(!vp(e.mbsList))throw new TypeError('Invalid "mbsList" type: '+typeof e.mbsList);if(Cp(Object.values(qp),e.stripLevel)||(e.stripLevel=qp.UNDERWEAR),Cp(Object.values(qp),e.equipLevel)||(e.stripLevel=qp.UNDERWEAR),vp(e.flags)){let t;if(e.flags.every((e=>"string"==typeof e))){t=function(e){return $f.map(((t,r)=>{const n={...t};return n.enabled=e.includes(Of[r]),n}))}(e.flags)}else t=function(e){return $f.map(((t,r)=>{const n=e[r];if(null===n||"object"!=typeof n||n.type!==t.type)return{...t};const o="boolean"==typeof n.enabled?n.enabled:t.enabled;switch(n.type){case"TimerPasswordPadlock":return Number.isInteger(n.time)&&n.time>=1&&n.time<=86400?{type:n.type,description:t.description,time:n.time,enabled:o}:{...t};case"ExclusivePadlock":case"HighSecurityPadlock":case null:return{type:n.type,description:t.description,enabled:o};default:return{...t}}}))}(e.flags);t.every((e=>!e.enabled))&&(t[0].enabled=!0),e.flags=Object.freeze(t.map((e=>Object.freeze(e))))}else e.flags=$f;return"boolean"!=typeof e.custom&&(e.custom=!0),null!==e.preRunCallback&&"function"!=typeof e.preRunCallback&&(e.preRunCallback=null),Number.isInteger(e.weight)?e.weight=oi(e.weight,1,9):e.weight=1,e}static fromObject(e,t){const r=[t.name,t.itemList,e,t.stripLevel,t.equipLevel,t.flags,t.custom,t.preRunCallback,t.weight];return new bg(...r)}scriptFactory(e=null){const t=this.itemList.map((({Name:e,Group:t})=>AssetGet(Player.AssetFamily,t,e)));return r=>{r=r??Player;const n=Kp(this.equipLevel,r),o=this.itemList.filter(((e,r)=>{const o=t[r];return null!=o&&("Appearance"!==o.Group.Category||n(o))}));Qp(this.name,o,this.stripLevel,e,this.preRunCallback,r??Player)}}getIDs(){const e=[];for(const[t,r]of this.flags.entries())r.enabled&&e.push(t);let t;if(this.custom){if(t=256*(2+Math.floor(this.index/16))+16*this.index,t<0)throw new Error(`Item set "${this.name}" absent from currently selected fortune wheel sets`)}else if(t=256+16*fg[this.name],Number.isNaN(t))throw new Error(`Unknown default item set "${this.name}"`);return Dp(t,e)}toOptions(){const e=this.flags.filter((e=>e.enabled)),t=this.getIDs();return e.map(((e,r)=>{const n=null===e.type?this.name:`${this.name}: ${Nf(e)}`;let o=!0;switch(e.type){case"HighSecurityPadlock":case null:o=!1;break;case"TimerPasswordPadlock":o=4!==r}return{ID:t[r],Color:Id(sg),Script:this.scriptFactory(((...t)=>function(e,t,r){const n=e.type;switch(n){case"TimerPasswordPadlock":Lf(t,e.time,r);break;case"ExclusivePadlock":Af(t,"ExclusivePadlock",r);break;case"HighSecurityPadlock":InventoryDoesItemAllowLock(t)&&t.Craft&&(t.Craft.Property="Puzzling"),Tf(t,r);break;case null:break;default:throw new Error(`Unknown flag type: ${n}`,e)}}(e,...t))),Description:n,Default:o,Custom:this.custom,Parent:this,Flag:e,Weight:this.weight}}))}toJSON(){return{name:this.name,itemList:this.itemList,stripLevel:this.stripLevel,equipLevel:this.equipLevel,flags:this.flags,custom:this.custom,preRunCallback:this.preRunCallback,weight:this.weight}}}class Sg extends yg{constructor(e,t,r){const n=Sg.validate({name:e,mbsList:t,weight:r});super(n.name,!0,n.mbsList,n.weight)}static validate(e){if("string"!=typeof e.name)throw new TypeError('Invalid "name" type: '+typeof e.name);if(!Array.isArray(e.mbsList))throw new TypeError('Invalid "mbsList" type: '+typeof e.mbsList);return Number.isInteger(e.weight)?e.weight=oi(e.weight,1,9):e.weight=1,e}static fromObject(e,t){const r=[t.name,e,t.weight];return new Sg(...r)}toOptions(){const[e]=this.getIDs();return[{ID:e,Color:Id(sg),Description:this.name,Default:!0,Custom:this.custom,Parent:this,Script:void 0,Flag:void 0,Weight:this.weight}]}getIDs(){const e=256*(3+Math.floor(this.index/16))+this.index;return[String.fromCharCode(e)]}toJSON(){return{name:this.name,weight:this.weight}}}let Cg=null;function wg(){return null===Cg&&(Cg=CharacterLoadSimple("MBSAPI")),Cg}var kg=Object.freeze({__proto__:null,getAll:function(){if(!pg())return kp.error("MBS not fully loaded yet"),{};const e=Player.MBSSettings.FortuneWheelItemSets,t={};for(const[r,n]of e.entries())null!==n&&(t[n.name]={name:n.name,index:r,items:af(n.itemList,wg())});return t},getByIndex:function(e){if("number"!=typeof e)throw new TypeError('Invalid "index" type: '+typeof e);if(!pg())return void kp.error("MBS not fully loaded yet");const t=Player.MBSSettings.FortuneWheelItemSets[e];return null==t?void 0:{name:t.name,index:e,items:af(t.itemList,wg())}},getByName:function(e){if("string"!=typeof e)throw new TypeError('Invalid "name" type: '+typeof e);if(!pg())return void kp.error("MBS not fully loaded yet");let t=-1;const r=Player.MBSSettings.FortuneWheelItemSets.find(((r,n)=>{const o=r?.name===e;return o&&(t=n),o}));return null==r?void 0:{name:e,index:t,items:af(r.itemList,wg())}},getIndices:function(){return pg()?Player.MBSSettings.FortuneWheelItemSets.filter((e=>null!==e)).map(((e,t)=>t)):(kp.error("MBS not fully loaded yet"),[])},getNames:function(){return pg()?Player.MBSSettings.FortuneWheelItemSets.filter((e=>null!==e)).map((e=>e.name)):(kp.error("MBS not fully loaded yet"),[])}});const Bg=Object.freeze({backgroundColor:"--mbs-background-color",buttonColor:"--mbs-button-color",buttonHoverColor:"--mbs-hover-color",tooltipColor:"--mbs-tooltip-color",borderColor:"--mbs-border-color",textColor:"--mbs-text-color"}),Pg=Object.freeze({backgroundColor:"white",buttonColor:"white",buttonHoverColor:"cyan",tooltipColor:"lightyellow",borderColor:"black",textColor:"black"});var xg=Object.freeze({__proto__:null,DEFAULT_STYLE:Pg,getStyle:function(){const e=document.querySelector(":root");return e?Sp(bp(Bg).map((([t,r])=>[t,e.style.getPropertyValue(r)||Pg[t]]))):(kp.error(":root selector missing in document"),{...Pg})},setStyle:function(e){if("object"!=typeof e)throw new TypeError(`Invalid style type: "${typeof e}"`);if(null===e)throw new Error("Invalid style value: null");const t=document.querySelector(":root");if(t)for(const[r,n]of bp(Bg)){const o=e[r];void 0!==o&&t.style.setProperty(n,o)}else kp.error(":root selector missing in document")}});const Mg=Object.freeze({major:1,minor:4}),Ig=function(){return pg()?JSON.stringify({log:kp,settings:Player.MBSSettings},void 0,4):JSON.stringify({log:kp,settings:"ERROR: MBS not fully loaded yet"},void 0,4)};Bp(dg).then((()=>{"undefined"!=typeof FUSAM&&"function"==typeof FUSAM.registerDebugMethod&&FUSAM.registerDebugMethod("mbs",Ig)}));const Eg="raises",_g="passes";function Fg(e,t,r){if(!t)throw void 0===r?new Error(`${e}`):new Error(`${e}: ${r}`)}function Og(e,t,r){try{t()}catch(t){const n=t;if(n?.message!==r)throw new Error(`${e}: Invalid error message\nExpected error: "${r}"\nObserved error: "${n?.message}"`);return}throw new Error(`${e}: Failed to raise an error`)}function $g(e,t){try{return t()}catch(t){throw new Error(`${e}: Unexpected error message: ${t}`,{cause:t})}}function Lg(e,t,r,n){if(n=n??Ng,!Oc(t,r))throw new Error(`${e}: Passed objects not equal:\nObserved: ${n(t)}\nExpected: ${n(r)}`)}function Tg(e,t,r){if(typeof t!==r)throw new Error(`${e}: Invalid object type "${typeof t}", expected "${r}"`)}function Ag(e,t,r){if(t.length!==r)throw new Error(`${e}: Invalid object length ${t.length}, expected ${r}`)}function Hg(e,t){switch(typeof t){case"undefined":return"__UNDEFINED__";case"function":return"__FUNCTION__";case"symbol":return"__SYMBOL__";default:return t}}function Ng(e){return JSON.stringify(e,Hg,1)}var Dg=Object.freeze({__proto__:null,test_LoopIterator:function(){const e="test_LoopIterator";[{args:[void 0],excMessage:'Invalid "iterable" type: undefined'},{args:[[]],excMessage:'Passed "iterable" must contain at least one element'},{args:[[1],.5],excMessage:'"index" must be an integer: 0.5'},{args:[[0,1],3],excMessage:'"index" must fall in the [0, 1] interval: 3'}].forEach((({args:t,excMessage:r},n)=>{Og(`${e}:constructor:${Eg}:${n}`,(()=>new Np(...t)),r)}));const t=new Np([0,1,2,3],0);let r;Lg(`${e}:list:${_g}:0`,t.list,[0,1,2,3]),Lg(`${e}:index:${_g}:0`,t.index,0),Lg(`${e}:value:${_g}:0`,t.index,0),Tg(`${e}:[Symbol.iterator]:${_g}:0`,t[Symbol.iterator],"function"),r=$g(`${e}:next:${_g}:0`,(()=>t.next(!1))),Lg(`${e}:next:${_g}:0`,r,1),Lg(`${e}:next:${_g}:0`,t.index,0),r=$g(`${e}:next:${_g}:0`,(()=>t.next())),Lg(`${e}:next:${_g}:0`,r,1),Lg(`${e}:next:${_g}:0`,t.index,1),Og(`${e}:setPosition:${Eg}:0`,(()=>t.setPosition(10)),'"index" must fall in the [0, 3] interval: 10'),$g(`${e}:setPosition:${_g}:0`,(()=>t.setPosition(0))),Lg(`${e}:setPosition:${_g}:0`,t.index,0),r=$g(`${e}:previous:${_g}:0`,(()=>t.previous(!1))),Lg(`${e}:previous:${_g}:0`,r,3),Lg(`${e}:previous:${_g}:0`,t.index,0),r=$g(`${e}:previous:${_g}:0`,(()=>t.previous())),Lg(`${e}:previous:${_g}:0`,r,3),Lg(`${e}:previous:${_g}:0`,t.index,3),r=$g(`${e}:toString:${_g}:0`,(()=>t.toString())),Tg(`${e}:toString:${_g}:0`,r,"string"),r=$g(`${e}:toJSON:${_g}:0`,(()=>t.toJSON())),Lg(`${e}:toJSON:${_g}:0`,t.toJSON(),{list:[0,1,2,3],index:3})},test_MBS_VERSION:function(){Tg(`test_MBS_VERSION:${_g}:0`,t,"string")},test_Version:function(){const e="test_Version";[{args:["bob",0,0,!1],excMessage:'Invalid "major" type: string'},{args:[0,"bob",0,!1],excMessage:'Invalid "minor" type: string'},{args:[0,0,"bob",!1],excMessage:'Invalid "micro" type: string'},{args:[0,0,0,"bob"],excMessage:'Invalid "beta" type: string'}].forEach((({args:t,excMessage:r},n)=>{Og(`${e}:constructor:${Eg}:${n}`,(()=>new jp(...t)),r)}));const t=new jp(1,0,5),r=new jp(2,3,1),n=new jp(0,99,5,!0);Lg(`${e}:major:${_g}:0`,t.major,1),Lg(`${e}:minor:${_g}:0`,t.minor,0),Lg(`${e}:micro:${_g}:0`,t.micro,5),Lg(`${e}:beta:${_g}:0`,t.beta,!1),Fg(`${e}:equal:${_g}:0`,!t.equal(null)),Fg(`${e}:equal:${_g}:1`,t.equal(t)),Fg(`${e}:equal:${_g}:2`,!t.equal(r)),Fg(`${e}:equal:${_g}:3`,!t.equal(n)),Fg(`${e}:greater:${_g}:0`,!t.greater(null)),Fg(`${e}:greater:${_g}:1`,!t.greater(t)),Fg(`${e}:greater:${_g}:2`,!t.greater(r)),Fg(`${e}:greater:${_g}:3`,t.greater(n)),Fg(`${e}:lesser:${_g}:0`,!t.lesser(null)),Fg(`${e}:lesser:${_g}:1`,!t.lesser(t)),Fg(`${e}:lesser:${_g}:2`,t.lesser(r)),Fg(`${e}:lesser:${_g}:3`,!t.lesser(n)),Fg(`${e}:greaterOrEqual:${_g}:0`,!t.greaterOrEqual(null)),Fg(`${e}:greaterOrEqual:${_g}:1`,t.greaterOrEqual(t)),Fg(`${e}:greaterOrEqual:${_g}:2`,!t.greaterOrEqual(r)),Fg(`${e}:greaterOrEqual:${_g}:3`,t.greaterOrEqual(n)),Fg(`${e}:lesserOrEqual:${_g}:0`,!t.lesserOrEqual(null)),Fg(`${e}:lesserOrEqual:${_g}:1`,t.lesserOrEqual(t)),Fg(`${e}:lesserOrEqual:${_g}:2`,t.lesserOrEqual(r)),Fg(`${e}:lesserOrEqual:${_g}:3`,!t.lesserOrEqual(n));let o=$g(`${e}:fromVersion:${_g}:0`,(()=>jp.fromVersion("1.0.5")));Lg(`${e}:fromVersion:${_g}:0`,o,t),Og(`${e}:fromVersion:${Eg}:0`,(()=>jp.fromVersion(void 0)),'Invalid "version": undefined'),o=$g(`${e}:fromVersion:${_g}:0`,(()=>jp.fromBCVersion("R109Beta3"))),Lg(`${e}:fromVersion:${_g}:0`,o,new jp(109,0,0,!0)),Og(`${e}:fromVersion:${Eg}:0`,(()=>jp.fromVersion(void 0)),'Invalid "version": undefined'),o=$g(`${e}:toString:${_g}:0`,(()=>t.toString())),Tg(`${e}:toString:${_g}:0`,o,"string"),o=$g(`${e}:toJSON:${_g}:0`,(()=>t.toJSON())),Lg(`${e}:toJSON:${_g}:0`,o,{major:1,minor:0,micro:5,beta:!1})},test_generateIDs:function(){const e="test_generateIDs";[{args:[0,void 0],excMessage:'Invalid "indices" type: undefined'},{args:[65535,[5]],excMessage:'"stop" must fall in the [65536, 65535] interval: 65541'}].forEach((({args:t,excMessage:r},n)=>{Og(`${e}:${Eg}:${n}`,(()=>Dp(...t)),r)})),[{args:[80,[0,4,6]],output:["P","T","V"]},{args:[1024,[0,4,1]],output:["Ѐ","Є","Ё"]},{args:[0,[]],output:[]}].forEach((({args:t,output:r},n)=>{const o=$g(`${e}:${_g}:${n}`,(()=>Dp(...t)));Lg(`${e}:${_g}:${n}`,o,r)}))},test_getRandomPassword:function(){const e="test_getRandomPassword";[{args:[void 0],excMessage:'Invalid "n" type: undefined'}].forEach((({args:t,excMessage:r},n)=>{Og(`${e}:${Eg}:${n}`,(()=>Lp(...t)),r)})),yd(0,9).forEach((t=>{const r=$g(`${e}:${_g}:${t}`,(()=>Lp(t)));Tg(`${e}:${_g}:${t}`,r,"string"),Ag(`${e}:${_g}:${t}`,r,t)}))},test_isIterable:function(){const e="test_isIterable";[{args:[null],output:!1},{args:[1],output:!1},{args:[[1]],output:!0},{args:[new Set],output:!0}].forEach((({args:t,output:r},n)=>{const o=$g(`${e}:${_g}:${n}`,(()=>Gp(...t)));Lg(`${e}:${_g}:${n}`,o,r)}))},test_padArray:function(){const e="test_padArray";[{args:[[],.5,null],excMessage:'"n" must be an integer: 0.5'},{args:[void 0,5,null],excMessage:'Invalid "list" type: undefined'}].forEach((({args:t,excMessage:r},n)=>{Og(`${e}:${Eg}:${n}`,(()=>Op(...t)),r)})),[{args:[["a","b","c"],5,"test"],output:["a","b","c","test","test"]},{args:[["a","b","c"],2,"test"],output:["a","b","c"]}].forEach((({args:t,output:r},n)=>{const o=$g(`${e}:${_g}:${n}`,(()=>Op(...t)));Lg(`${e}:${_g}:${n}`,o,r)}))},test_trimArray:function(){const e="test_trimArray";[{args:[[],.5],excMessage:'"n" must be an integer: 0.5'},{args:[void 0,5],excMessage:'Invalid "list" type: undefined'}].forEach((({args:t,excMessage:r},n)=>{Og(`${e}:${Eg}:${n}`,(()=>$p(...t)),r)})),[{args:[["a","b","c"],1],output:["a"]},{args:[["a","b","c"],4],output:["a","b","c"]}].forEach((({args:t,output:r},n)=>{const o=$g(`${e}:${_g}:${n}`,(()=>$p(...t)));Lg(`${e}:${_g}:${n}`,o,r)}))},test_validateInt:function(){const e="test_validateInt";[{args:[.5,"test"],excMessage:'"test" must be an integer: 0.5'},{args:["test","test"],excMessage:'Invalid "test" type: string'},{args:[5,"test",10],excMessage:'"test" must fall in the [10, Infinity] interval: 5'},{args:[5,"test",0,3],excMessage:'"test" must fall in the [0, 3] interval: 5'}].forEach((({args:t,excMessage:r},n)=>{Og(`${e}:${Eg}:${n}`,(()=>Fp(...t)),r)})),$g(`${e}:${_g}:0`,(()=>Fp(0,"test")))}});var Gg=Object.freeze({__proto__:null,test_FORTUNE_WHEEL_COLORS:function(){const e="test_FORTUNE_WHEEL_COLORS";Fg(`${e}:${_g}:0`,Array.isArray(sg)),Fg(`${e}:${_g}:0`,sg.every((e=>"string"==typeof e)))},test_FORTUNE_WHEEL_MAX_SETS:function(){const e="test_FORTUNE_WHEEL_MAX_SETS";Tg(`${e}:${_g}:0`,ig,"number"),Fg(`${e}:${_g}:0`,Number.isInteger(ig)),Fg(`${e}:${_g}:0`,ig>=0)},test_canChangeCosplay:function(){const e="test_canChangeCosplay",t=yd(0,3).map((t=>`${e}${t}`)).map((e=>{const t=CharacterLoadSimple(e);return t.OnlineSharedSettings=t.OnlineSharedSettings??{},t}));try{t[1].OnlineSharedSettings={...t[1].OnlineSharedSettings??{},BlockBodyCosplay:!1},t[2].OnlineSharedSettings={...t[1].OnlineSharedSettings??{},BlockBodyCosplay:!0};[{args:[t[0]],output:!1},{args:[t[1]],output:!0},{args:[t[2]],output:!1}].forEach((({args:t,output:r},n)=>{const o=$g(`${e}:${_g}:${n}`,(()=>cg(...t)));Lg(`${e}:${_g}:${n}`,o,r)}))}finally{t.forEach((e=>CharacterDelete(e)))}},test_equipHighSecLock:function(){const e="test_equipHighSecLock",t=CharacterLoadSimple(e);try{const r=AssetGet(t.AssetFamily,"ItemArms","LatexArmbinder");if(null==r)throw new Error;const n={Asset:r};$g(`${e}:${_g}:0`,(()=>Tf(n,t))),Lg(`${e}:${_g}:0`,n.Property?.MemberNumberListKeys,"")}finally{CharacterDelete(t)}},test_equipLock:function(){const e="test_equipLock",t=yd(0,5).map((t=>`${e}-${t}`)).map(CharacterLoadSimple);if(t[4].PermissionItems)try{t[4].PermissionItems["ItemMisc/ExclusivePadlock"]=PreferencePermissionGetDefault(),t[4].PermissionItems["ItemMisc/ExclusivePadlock"].Permission="Block",InventoryWear(t[2],"LatexArmbinder","ItemArms"),InventoryLock(t[2],t[2].Appearance.at(-1),"ExclusivePadlock");const r=AssetGet(t[0].AssetFamily,"ItemArms","LatexArmbinder"),n=AssetGet(t[0].AssetFamily,"ItemArms","NylonRope");if(null==r||null==n)throw new Error;const o={Asset:r};[{args:["bob","ExclusivePadlock",t[0]],excMessage:'Invalid "item" type: string'},{args:[o,0,t[0]],excMessage:'Invalid "lockName" type: number'},{args:[o,"bob",t[0]],excMessage:'Invalid "lockName" value: bob'},{args:[o,"ExclusivePadlock",1],excMessage:'Invalid "character" type: number'}].forEach((({args:t,excMessage:r},n)=>{Og(`${e}:${Eg}:${n}`,(()=>Af(...t)),r)}));[{args:[o,"ExclusivePadlock",t[1]],output:!0},{args:[o,"ExclusivePadlock",t[2]],output:!1},{args:[{Asset:n},"ExclusivePadlock",t[3]],output:!1},{args:[o,"ExclusivePadlock",t[4]],output:!1}].forEach((({args:t,output:r},n)=>{const o=$g(`${e}:${_g}:${n}`,(()=>Af(...t)));Lg(`${e}:${_g}:0`,o,r)}))}finally{t.forEach((e=>CharacterDelete(e)))}},test_equipTimerLock:function(){const e="test_equipTimerLock",t=CharacterLoadSimple(e);try{const r=AssetGet(t.AssetFamily,"ItemArms","LatexArmbinder");if(null==r)throw new Error;const n={Asset:r};Og(`${e}:${Eg}:0`,(()=>Lf(n,void 0,t)),'Invalid "seconds" type: undefined'),$g(`${e}:${_g}:0`,(()=>Lf(n,99,t))),Fg(`${e}:${_g}:0`,(n.Property?.RemoveTimer??1/0)<=CurrentTime+198e4),Lg(`${e}:${_g}:0`,n.Property?.RemoveItem,!0),Lg(`${e}:${_g}:0`,n.Property?.LockSet,!0),Tg(`${e}:${_g}:0`,n.Property?.Password,"string")}finally{CharacterDelete(t)}},test_sanitizeWheelFortuneIDs:function(){const e="test_sanitizeWheelFortuneIDs";Og(`${e}:${Eg}:0`,(()=>ug(void 0)),'Invalid "IDs" type: undefined'),[{args:["ABC"],output:"ABC"},{args:["A䀁"],output:"A"}].forEach((({args:t,output:r},n)=>{const o=$g(`${e}:${_g}:${n}`,(()=>ug(...t)));Lg(`${e}:${_g}:${n}`,o,r)}))},test_settingsLoaded:function(){const e="test_settingsLoaded",t=$g(`${e}:${_g}:0`,hg);Lg(`${e}:${_g}:0`,t,!0)},test_settingsMBSLoaded:function(){const e="test_settingsMBSLoaded",t=$g(`${e}:${_g}:0`,pg);Lg(`${e}:${_g}:0`,t,!0)}});const jg=Object.freeze({Mummification:e=>({...e,TypeRecord:void 0})});var Wg=Object.freeze({__proto__:null,test_builtinMBSWheel:function(){const e="test_builtinMBSWheel",t=In(Object.values(am).map((e=>e.children??[]))),r=t.map((e=>e.Description)).map((e=>CharacterLoadSimple(e)));try{t.forEach((t=>{if(!(t.Parent instanceof bg))return;const r=CharacterLoadSimple(t.Description);t.Script(r);for(let n of t.Parent.itemList){const o=InventoryGet(r,n.Group);if(void 0!==n.Equip)continue;Fg(`${e}:${t.Description}:${n.Group}:${n.Name}:${_g}`,null!=o);const i=(jg[t.Parent.name]??(e=>e))(of(o.Asset,{...o,Group:o.Asset.Group.Name,Name:o.Asset.Name,Color:void 0===n.Color?void 0:o.Color},!1),r);null!==i&&(n={...n,ItemCallback:void 0,Property:{...i.Property,...n.Property},Equip:void 0,Craft:void 0!==n.Craft&&"HighSecurityPadlock"===t.Flag.type&&InventoryDoesItemAllowLock(o)?{...n.Craft,Property:"Puzzling"}:n.Craft},Lg(`${e}:${t.Description}:${n.Group}:${n.Name}:${_g}`,i,n))}}))}finally{r.forEach((e=>CharacterDelete(e)))}}});const zg=function(){if(!pg())return kp.warn("MBS not fully loaded yet"),!1;const e={...Dg,...Gg,...Wg},t={};for(const[r,n]of bp(e))try{n()}catch(e){t[r]=e}return 0===Object.values(t).length||(kp.warn(t),!1)};Bp(dg).then((()=>{const e={[`${Cf.screen}Background`]:Cf.background,[`${Bf.screen}Background`]:Bf.background,[`${Ff.screen}Background`]:Ff.background,[`${eg.screen}Background`]:eg.background,[`${rm.screen}Background`]:rm.background},t=globalThis;Object.assign(t,e)}));const Vg=new Set;var qg;!function(e){async function t(){this.classList.add("chat-room-sep-touch")}async function r(){this.classList.remove("chat-room-sep-touch")}async function n(e){const t="˅"===this.innerText?"Collapse":"Uncollapse",r=this.parentElement?.parentElement;if(e.shiftKey){Array.from(r.parentElement?.getElementsByClassName("chat-room-sep")??[]).forEach((e=>qg[t](e)))}else qg[t](r)}async function o(){const e=this.parentElement?.parentElement,t=e.nextSibling;if(t){e.parentElement.scroll({top:t.offsetTop-e.offsetHeight})}}function i(e){return[e.dataset.space?.replace("Asylum",InterfaceTextGet("ChatRoomSpaceAsylum")),e.dataset.private?InterfaceTextGet("PrivateRoom"):void 0,ChatRoomHTMLEntities(ChatSearchMuffle(e.dataset.room??"")),e.dataset.messages?`✉<sup>${e.dataset.messages}</sup>`:void 0].filter(Boolean).join(" - ")}e.ActiveElem=null,e.Create=function(e=!0){const i=h("div",{class:"ChatMessage ChatMessageAction chat-room-sep","data-time":ChatRoomCurrentTime(),"data-sender":Player.MemberNumber??"",children:p("div",{class:"chat-room-sep-div",children:[h("button",{class:"blank-button chat-room-sep-collapse",onClick:n,onTouchEnd:r,onTouchCancel:r,onTouchStart:t,children:"˅"}),h("button",{class:"blank-button chat-room-sep-header",onClick:o,onTouchEnd:r,onTouchCancel:r,onTouchStart:t})]})});return i.style.setProperty("--label-color",Player.LabelColor),e&&(ChatRoomAppendChat(i),qg.ActiveElem=i),i},e.GetDisplayName=function(e){const t=e?.querySelector(".chat-room-sep-header");return t?i(t):""},e.IsCollapsed=function(e){const t=e?.querySelector(".chat-room-sep-collapse");return!!t&&"˃"===t.innerText},e.Uncollapse=async function(e){const t=e?.querySelector(".chat-room-sep-collapse");if(!t||"˅"===t.innerText)return;t.innerText="˅";let r=e.nextSibling;for(;r&&!r.classList.contains("chat-room-sep");)r.style.display="",r=r.nextSibling;const n=t.nextSibling;n&&(n.dataset.messages="",n.innerHTML=qg.GetDisplayName(e))},e.Collapse=async function(e){const t=e?.querySelector(".chat-room-sep-collapse");if(!t||"˃"===t.innerText)return;t.innerText="˃";let r=e.nextSibling;for(;r&&!r.classList.contains("chat-room-sep");)r.style.display="none",r=r.nextSibling},e.SetRoomData=async function(e,t){const r=e?.querySelector(".chat-room-sep-header");r&&(r.dataset.room=t.Name,r.dataset.space=t.Space,r.dataset.private=(t.Private||"").toString(),r.innerHTML=i(r))},e.UpdateDisplayNames=async function(){Array.from(document.querySelectorAll("#TextAreaChatLog .chat-room-sep-header")).forEach((e=>e.innerHTML=i(e)))}}(qg||(qg={})),Bp(dg).then((()=>{if("R104"===GameVersion)if("BA474ADD"===Tp.getOriginalHash("PreferenceSubscreenExtensionsClear")&&(Vg.add(5052),Tp.patchFunction("PreferenceSubscreenExtensionsClear",{"PreferenceExtensionsCurrent.unload();":"PreferenceExtensionsCurrent.unload?.();"})),"4E3937AA"===Tp.getOriginalHash("AppearanceClick")&&(Vg.add(5055),Tp.patchFunction("AppearanceClick",{"const asset = CharacterAppearanceNextItem(C, Group.Name, MouseX > 1500);":"const asset = CharacterAppearanceNextItem(C, Group.Name, MouseX > 1410);"})),"B738E4DD"===Tp.getOriginalHash("Layering._ApplyAssetPriority")&&(Vg.add(5055),Tp.hookFunction("Layering._ApplyAssetPriority",99,(e=>function(e,t){const r=Layering.OverridePriority;Number.isInteger(r)||Layering._UpdateInputColors("asset-priority"),Number.isNaN(e)||e.toString()===t?Layering.OverridePriority=void 0:Layering.OverridePriority=CommonClamp(Math.round(e),-99,99),r!==Layering.OverridePriority&&Layering._CharacterRefresh(Layering.Character,!1,!1)}(...e)))),"AC1C6466"===Tp.getOriginalHash("DialogMenuButtonBuild")&&(Vg.add(5055),Tp.patchFunction("DialogMenuButtonBuild",{"if (Item != null && !C.IsNpc() && Player.CanInteract()) {":"if (Item != null && !C.IsNpc() && (InventoryItemHasEffect(Item, 'Lock') ? DialogCanUnlock(C, Item) : Player.CanInteract())) {"})),"undefined"==typeof ChatRoomSep&&(Vg.add(5058),globalThis._chatRoomSep=qg,document.body.appendChild(h("style",{id:"mbs-backport-style",children:"/* Mixin for disabling any and all browser-defaulted button styling */\n.blank-button {\n  background: none;\n  border: none;\n  color: inherit;\n  font: inherit;\n  outline: none;\n  padding: 0;\n}\n\n.chat-room-sep {\n  background-color: var(--base-color);\n  background-color: color-mix(in srgb, var(--base-color) 90%, var(--label-color) 10%);\n  border-bottom: min(0.4vh, 0.2vw) black solid !important;\n  padding-left: unset !important;\n  position: sticky !important;\n  top: 0%;\n  z-index: 1;\n  --base-color: white;\n  --label-color: rgb(128 128 128);\n}\n\n.chat-room-sep-div {\n  display: grid;\n  grid-template-columns: 6% auto;\n  height: 100%;\n  justify-items: center;\n  margin-right: 6%;\n  width: auto;\n}\n\n.chat-room-sep-header {\n  color: gray;\n  cursor: pointer;\n  height: 100%;\n  text-align: center;\n  user-select: text;\n  width: 100%;\n}\n\n.chat-room-sep-collapse {\n  border-right: min(0.4vh, 0.2vw) black solid;\n  color: gray;\n  cursor: pointer;\n  font-weight: bold;\n  height: 100%;\n  width: 100%;\n}\n\n/* stylelint-disable selector-TextAreaChatLog, selector-id-pattern */\n#TextAreaChatLog[data-colortheme=dark] .chat-room-sep-touch,\n#TextAreaChatLog[data-colortheme=dark2] .chat-room-sep-touch {\n  color: #eee;\n}\n\n#TextAreaChatLog[data-colortheme=light] .chat-room-sep-touch,\n#TextAreaChatLog[data-colortheme=light2] .chat-room-sep-touch {\n  color: black;\n}\n\n@media (hover: hover) {\n  #TextAreaChatLog[data-colortheme=dark] .chat-room-sep-header:hover,\n  #TextAreaChatLog[data-colortheme=dark2] .chat-room-sep-header:hover,\n  #TextAreaChatLog[data-colortheme=dark] .chat-room-sep-collapse:hover,\n  #TextAreaChatLog[data-colortheme=dark2] .chat-room-sep-collapse:hover {\n    color: #eee;\n  }\n  #TextAreaChatLog[data-colortheme=light] .chat-room-sep-header:hover,\n  #TextAreaChatLog[data-colortheme=light2] .chat-room-sep-header:hover,\n  #TextAreaChatLog[data-colortheme=light] .chat-room-sep-collapse:hover,\n  #TextAreaChatLog[data-colortheme=light2] .chat-room-sep-collapse:hover {\n    color: black;\n  }\n}\n#TextAreaChatLog[data-colortheme=light] .chat-room-sep,\n#TextAreaChatLog[data-colortheme=light2] .chat-room-sep {\n  --base-color: white;\n}\n\n#TextAreaChatLog[data-colortheme=dark] .chat-room-sep,\n#TextAreaChatLog[data-colortheme=dark2] .chat-room-sep {\n  --base-color: #111;\n}\n\n#TextAreaChatLog[data-coloractions=false] .chat-room-sep {\n  background-color: var(--base-color) !important;\n}".toString()})),Tp.patchFunction("ChatRoomLoad",{"if (ChatRoomCharacter.length === 0 && ChatRoomHelpSeen && Player.ChatSettings?.PreserveChat) {":"if (ChatRoomCharacter.length === 0) {",'const div = document.createElement("div");':"",'div.setAttribute("class", "ChatEnterBorder");':"","ChatRoomAppendChat(div);":'\n                        const elem = _chatRoomSep.Create();\n                        elem.style.display = (Player.ChatSettings?.PreserveChat ?? true) ? "" : "none";\n                    '.trim()}),Tp.patchFunction("ChatRoomMenuClick",{'const roomDIVs = document.getElementsByClassName("ChatEnterBorder");':'const roomDIVs = document.getElementsByClassName("chat-room-sep");'}),Tp.patchFunction("ChatRoomSync",{"ChatRoomData = data;":"ChatRoomData = data; if (_chatRoomSep.ActiveElem) { _chatRoomSep.SetRoomData(_chatRoomSep.ActiveElem, data); }"}),Tp.patchFunction("ChatRoomSyncRoomProperties",{"Object.assign(ChatRoomData, data);":"Object.assign(ChatRoomData, data); if (_chatRoomSep.ActiveElem) { _chatRoomSep.SetRoomData(_chatRoomSep.ActiveElem, data); }"}),Tp.patchFunction("ChatRoomRefreshChatSettings",{"if (Player.ChatSettings) {":"if (Player.ChatSettings) { _chatRoomSep.UpdateDisplayNames();"}),Tp.patchFunction("PreferenceSubscreenChatClick",{"if (MouseYIn(732, 64)) Player.ChatSettings.PreserveChat = !Player.ChatSettings.PreserveChat;":'\n                        if (MouseYIn(732, 64)) {\n                            Player.ChatSettings.PreserveChat = !Player.ChatSettings.PreserveChat;\n                            const roomSeps = /** @type {HTMLDivElement[]} */(Array.from(document.querySelectorAll("#TextAreaChatLog .chat-room-sep")));\n                            if (Player.ChatSettings.PreserveChat) {\n                                roomSeps.forEach(e => e.style.display = "");\n                            }\n                        }\n                    '.trim()}),Tp.hookFunction("ChatRoomAppendChat",0,(([e,...t],r)=>{const n=e.dataset.sender===Player.MemberNumber?.toString()&&!e.classList.contains("ChatMessageNonDialogue"),o=qg.ActiveElem;if(qg.IsCollapsed(o))if(n)qg.Uncollapse(o);else{e.style.display="none";const t=o.querySelector(".chat-room-sep-header");t&&(t.dataset.messages=((Number.parseInt(t.dataset.messages??"0",10)||0)+1).toString(),t.innerHTML=qg.GetDisplayName(o))}return n&&ElementScrollToEnd("TextAreaChatLog"),r([e,...t])})),Tp.hookFunction("ChatRoomMenuClick",11,((e,t)=>{const r=ChatRoomMenuButtons.findIndex((e=>"Cut"===e));if(-1===r)return t(e);const n=992/ChatRoomMenuButtons.length;if(!MouseXIn(1005+n*r,n-2))return t(e);const o=document.querySelectorAll("#TextAreaChatLog .chat-room-sep");switch(o.length){case 0:break;case 1:{const e=o[0],t=e.parentElement;for(;e.nextSibling&&t.childElementCount>20;)t.removeChild(e.nextSibling);break}default:{const e=o[1],t=e.parentElement;for(;e.previousSibling;)t.removeChild(e.previousSibling);break}}ElementScrollToEnd("TextAreaChatLog")}))),"08672286"===Tp.getOriginalHash("PoseCanChangeUnaidedStatus")&&(Vg.add(5059),Tp.patchFunction("PoseCanChangeUnaidedStatus",{'} else if (C.HasEffect("Freeze") || ChatRoomOwnerPresenceRule("BlockChangePose", C)) {':'} else if (ChatRoomOwnerPresenceRule("BlockChangePose", C)) {','} else if (C.IsStanding() && PoseAllStanding.some(p => PoseSetByItems(C, "BodyLower", p))) {':'} else if (C.IsStanding() && (C.HasEffect("Freeze") || PoseAllStanding.some(p => PoseSetByItems(C, "BodyLower", p)))) {','} else if (C.IsKneeling() && PoseAllKneeling.some(p => PoseSetByItems(C, "BodyLower", p))) {':'} else if (C.IsKneeling() && (C.HasEffect("Freeze") || PoseAllKneeling.some(p => PoseSetByItems(C, "BodyLower", p)))) {'})),"undefined"==typeof ElementCreateSearchInput){function e(e,t){e.appendChild(h("datalist",{id:`${e.id}-datalist`})),e.setAttribute("list",`${e.id}-datalist`),e.setAttribute("type","search"),e.addEventListener("focus",(async function(){if(0===this.list?.children.length)for(const e of t())this.list.appendChild(h("option",{value:e}))}))}Vg.add(5065),Tp.hookFunction("CraftingModeSet",0,(([t,...r],n)=>{const o=n([t,...r]),i=document.getElementById("InputSearch");return"Item"===t&&i&&e(i,(()=>{const e=new Set;return Object.values(CraftingAssets).flat().sort(((e,t)=>e.Description.localeCompare(t.Description))).filter((t=>{const r=InventoryAvailable(Player,t.Name,t.Group.Name)&&!e.has(t.Description);return r&&e.add(t.Description),r})).map((e=>e.Description))})),o})),Tp.hookFunction("Shop2.Elements.InputSearch.Load",0,((t,r)=>{const n=r(t),o=document.getElementById("Shop2InputSearch");return o&&e(o,(()=>{switch(Shop2Vars.Mode){case"Preview":return new Set(Shop2Vars.PreviewItems.map((e=>e.Asset.Description)).sort());case"Buy":return new Set(Shop2Vars.BuyItems.map((e=>e.Asset.Description)).sort());case"Sell":return new Set(Shop2Vars.SellItems.map((e=>e.Asset.Description)).sort());default:return new Set}})),n})),Tp.hookFunction("Shop2.ApplyItemFilters",0,((e,t)=>{const r=t(e);return ElementContent("Shop2InputSearch-datalist",""),r})),Shop2Vars._Mode="Buy",Shop2Vars.Defaults._Mode="Buy",delete Shop2Vars.Mode,Object.defineProperty(Shop2Vars,"Mode",{get:()=>Shop2Vars._Mode,set(e){ElementContent("Shop2InputSearch-datalist",""),Shop2Vars._Mode=e}}),Tp.hookFunction("BackgroundSelectionLoad",0,((t,r)=>{const n=r(t),o=document.getElementById("InputBackground");return o&&e(o,(()=>BackgroundSelectionList.map((e=>BackgroundsTextGet(e))).sort())),n})),Tp.hookFunction("BackgroundSelectionTagChanged",0,((e,t)=>{const r=t(e);return ElementContent("InputBackground-datalist",""),r}));for(const t of["ChatSearchLoad","ChatSearchToggleHiddenMode","ChatSearchToggleHelpMode"])Tp.hookFunction(t,0,((t,r)=>{const n=r(t),o=document.getElementById("InputSearch");return o&&e(o,(()=>(ChatSearchShowHiddenRoomsActive?ChatSearchHiddenResult:ChatSearchResult).map((e=>e.DisplayName)).sort())),n}));for(const r of["ChatSearchResultResponse","ChatSearchApplyFilterTerms"])Tp.hookFunction(r,0,((e,t)=>{const r=t(e);return ElementContent("InputSearch-datalist",""),r}))}Vg.size?kp.log("Initializing R105 backports",Ad(Array.from(Vg))):kp.log("No R105 backports")}));var Ug={Blush:"R98"},Kg={Large:"R98",Normal:"R98",Small:"R98",XLarge:"R98"},Jg={BodyWritings:"R103",WombTattoos:"R101"},Yg={FlatMedium:"R98",FlatSmall:"R98",Large:"R98",Normal:"R98",Small:"R98",XLarge:"R98"},Zg={Bandeau1:"R98",Bikini1:"R98",BondageBra1:"R98",Bra1:"R98",Bra10:"R98",Bra2:"R98",Bra7:"R98",Bra8:"R98",Bra9:"R98",BunnySuit:"R98",Bustier1:"R98",Camisole:"R98",ChineseBra1:"R98",ClamShell:"R98",CoconutBra:"R98",CorsetBikini1:"R98",CowPrintedBra:"R98",CuteBikini1:"R98",DominatrixLeotard:"R98",FishnetBikini1:"R98",FlowerBra:"R98",FrameBra1:"R98",FrameBra2:"R98",FullLatexBra:"R98",FullLatexBra2:"R98",HaremBra:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeartTop:"R98",KittyBra1:"R98",LatexBra1:"R98",LatexBunnySuit:"R98",LeatherBreastBinder:"R98",LeatherStrapBra1:"R98",LeatherVestSuit:"R104",MaidBra1:"R98",OuvertPerl1:"R98",Ribbons:"R98",Sarashi1:"R98",SexyBeachBra1:"R98",SexyBikini1:"R98",SexyBikini2:"R98",SexyBikini3:"R98",SexyBikiniBra1:"R98",SleevelessSlimLatexLeotard:"R98",StarHarnessBra:"R98",StrapBra:"R98",StuddedHarness:"R98",Swimsuit1:"R98",Swimsuit2:"R98",Swimsuit3:"R98"},Xg={Band1:"R98",BowBand:"R98",KinkBracelet:"R98",LaceBands:"R98",LesBand:"R98",SpikeBands:"R98",WristWatch:"R103",Wristband:"R98"},Qg={AdmiralTop:"R98",AdultBabyDress1:"R98",AdultBabyDress2:"R98",AdultBabyDress3:"R98",AdultBabyDress4:"R98",BabydollDress1:"R98",Blouse1:"R98",Bodice1:"R98",BodyTowel1:"R98",BondageBustier1:"R98",BondageBustier2:"R98",BondageDress1:"R98",BondageDress2:"R98",BridesmaidDress1:"R98",BusinessSuit:"R101",ButtonShirt:"R98",CheerleaderTop:"R98",ChineseDress1:"R98",ChineseDress2:"R98",CollegeOutfit1:"R98",ComfyTop:"R98",CorsetDress:"R101",CorsetShirt:"R98",CropTop:"R98",CustomTShirt:"R103",Dress2:"R98",Dress3:"R98",DressFur:"R98",EveningGown:"R102",FishnetTop:"R98",FlowerDress:"R98",FrilledShirt:"R98",FurCoat:"R98",FuzzyDress:"R98",Gown1:"R98",Gown2Top:"R98",Gown3:"R98",GrandMage:"R98",HeavyLeatherDress:"R102",Hoodie:"R98",Jacket:"R98",LaceBabydoll:"R98",LatexLacedSuit:"R98",LatexTankTop:"R98",LatexTop:"R98",Laurel:"R98",LeatherBolero:"R98",LeatherCorsetTop1:"R98",LeatherCropTop:"R98",MaidApron1:"R98",MaidApron2:"R98",MaidLatex:"R101",MaidOutfit1:"R98",MaidOutfit2:"R98",MaleTankTop1:"R98",MistressTop:"R98",NunRobes:"R104",NurseUniform:"R98",RetroGirdle:"R98",ReverseBunnySuit:"R98",Robe1:"R98",SeethroughTop:"R98",ShoulderlessTop:"R98",SlaveRags:"R98",SleevelessTop:"R98",SteampunkCorsetTop1:"R98",StudentOutfit1:"R98",StudentOutfit2:"R98",StudentOutfit3:"R98",SummerDress:"R98",SuspenderTop1:"R98",Sweater1:"R98",TShirt1:"R98",TShirt2:"R98",TeacherOutfit1:"R98",TennisShirt1:"R98",VirginKiller1:"R98",WeddingDress1:"R98",WeddingDress2:"R98",Yukata1:"R98",YuletideVelvetWarmth:"R104"},eR={Bib:"R98",BodyWritings:"R103",Bouquet:"R98",BowBackAccessory:"R104",BugLegs:"R98",BunnyCollarCuffs:"R98",Camera1:"R98",Cape:"R98",CatsuitCollar:"R98",FacePaint:"R98",FrillyApron:"R98",FurBolero:"R98",Glitter:"R98",JewelrySet:"R98",Kissmark:"R98",KissmarkDummy:"R98",LargeBelt:"R98",LatexApron:"R101",LeatherStraps:"R98",Poncho:"R98",Scarf:"R98",StudentOutfit3Bow1:"R98",StudentOutfit3Bow2:"R98",StudentOutfit3Bow3:"R98",StudentOutfit3Scarf:"R98",WombTattoos:"R101",ZipperBelt:"R99"},tR={AdmiralSkirt:"R98",AsymmetricSkirt:"R98",BondageSkirt:"R98",BusinessSkirt:"R98",BusinessTrousers:"R101",CheerleaderSkirt:"R98",ChineseSkirt1:"R98",ClothSkirt1:"R98",CollegeSkirt:"R98",CrossSkirt:"R98",CrossSkirtLight:"R98",ElegantSkirt:"R98",Gown2Skirt:"R98",HaremPants:"R98",HaremPants2:"R98",HulaSkirt:"R98",JeanSkirt:"R98",Jeans1:"R98",Jeans2:"R98",JeansShorts:"R98",LatexPants1:"R98",LatexSkirt1:"R98",LatexSkirt2:"R98",Leggings1:"R98",Leggings2:"R98",LongLeatherSkirt:"R98",LongPleatedSkirt:"R98",LongSkirt1:"R98",MageSkirt:"R98",MistressBottom:"R98",Pajama1:"R98",PantBoots:"R98",PencilSkirt:"R98",PleatedSkirt:"R98",RuffledSkirt:"R98",SatinSkirt:"R105",ShortPencilSkirt:"R98",ShortPlaidSkirt:"R98",Shorts1:"R98",Skirt1:"R98",Skirt2:"R98",Skirt3:"R98",TennisSkirt1:"R98",TulleSkirt:"R98",Tutu:"R98",Waspie1:"R98",Waspie2:"R98",Waspie3:"R98"},rR={ClassicLatexCorset:"R98",Corset1:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",Corset6:"R98",CorsetDress:"R101",LatexCorset1:"R98",LeatherCorsetTop1:"R98",SteampunkCorsetTop1:"R98",Underbust:"R98"},nR={Emoticon:"R98"},oR={Eyebrows1:"R98",Eyebrows2:"R98",Eyebrows7:"R98",Eyebrows8:"R98"},iR={Eyes1:"R98",Eyes10:"R98",Eyes11:"R98",Eyes12:"R98",Eyes13:"R98",Eyes14:"R99",Eyes2:"R98",Eyes3:"R98",Eyes4:"R98",Eyes5:"R98",Eyes6:"R98",Eyes7:"R98",Eyes8:"R98",Eyes9:"R98"},aR={Eyes1:"R98",Eyes10:"R98",Eyes11:"R98",Eyes12:"R98",Eyes13:"R98",Eyes14:"R99",Eyes2:"R98",Eyes3:"R98",Eyes4:"R98",Eyes5:"R98",Eyes6:"R98",Eyes7:"R98",Eyes8:"R98",Eyes9:"R98"},sR={CatEye:"R98",CatEye2:"R98",LargeBlurred:"R98",LargeSolid:"R98",SmallBlurred:"R98",SmallSolid:"R98",SuperstarBlurred:"R98",SuperstarSolid:"R98",Tanuki:"R98",UndershadowedBlurred:"R98",UndershadowedSolid:"R98",Wings:"R98"},lR={BigBeard:"R98",ChinstrapBeard:"R98",Goatee:"R98",MediumBeard:"R98",Moustache:"R98",MoustacheBeard:"R98"},cR={Fluids:"R98"},uR={DropBag:"R98",GarterBelt:"R98",GarterBelt2:"R98",GarterBelt3:"R98",Tentacles:"R98"},dR={CatGlasses:"R98",EyePatch1:"R98",Glasses1:"R98",Glasses2:"R98",Glasses3:"R98",Glasses4:"R98",Glasses5:"R98",Glasses6:"R98",Goggles:"R98",GradientSunglasses:"R98",JokeGlasses:"R98",StreetEyewear:"R100",SunGlasses1:"R98",SunGlasses2:"R98",SunGlassesClear:"R98",VGlasses:"R98"},hR={BikerGloves:"R98",Catsuit:"R98",CheerleaderPomPoms:"R98",CowPrintedGloves:"R98",FingerlessGloves:"R98",FishnetGloves:"R98",Gloves1:"R98",Gloves2:"R98",Gloves3:"R98",GlovesFur:"R98",HaremGlove:"R98",LatexElbowGloves:"R98",LatexShortGloves:"R98",MistressGloves:"R98",OperaGloves:"R105",SeethroughSuit:"R98",WarmGloves:"R103"},pR={Antennae:"R98",BatWings:"R98",BigLynxEars:"R98",BunnyEars1:"R98",BunnyEars2:"R98",CowEars:"R104",CowHorns:"R98",DildocornHorn:"R98",EarWarmer:"R103",Ears1:"R98",Ears2:"R98",ElfEars:"R98",FoxEars1:"R98",FoxEars2:"R98",FoxEars3:"R98",GiantBow1:"R98",HairFeathers1:"R98",HairFlower1:"R98",Halo:"R98",Headset1:"R101",Horns:"R98",Horns2:"R98",Horns3:"R98",Horns4:"R104",Horns5:"R104",KittenEars1:"R98",KittenEars2:"R98",MouseEars1:"R98",MouseEars2:"R98",PonyEars1:"R98",PuppyEars1:"R98",PuppyEars2:"R98",RaccoonEars1:"R98",Ribbons1:"R98",Ribbons2:"R98",Ribbons3:"R98",Ribbons4:"R98",SuccubusHorns:"R98",UnicornHorn:"R98",WeddingVeil1:"R98",WolfEars1:"R98",WolfEars2:"R98"},fR={Antennae:"R98",BatWings:"R98",BunnyEars1:"R98",BunnyEars2:"R98",CowEars:"R104",CowHorns:"R98",DildocornHorn:"R98",Ears1:"R98",Ears2:"R98",ElfEars:"R98",FoxEars1:"R98",FoxEars2:"R98",FoxEars3:"R98",Horns:"R98",Horns2:"R98",Horns3:"R98",Horns4:"R104",Horns5:"R104",KittenEars1:"R98",KittenEars2:"R98",MouseEars1:"R98",MouseEars2:"R98",PonyEars1:"R98",PuppyEars1:"R98",PuppyEars2:"R98",RaccoonEars1:"R98",SuccubusHorns:"R98",UnicornHorn:"R98",WolfEars1:"R98",WolfEars2:"R98"},mR={EarWarmer:"R103",GiantBow1:"R98",HairFeathers1:"R98",HairFlower1:"R98",Halo:"R98",Headset1:"R101",Ribbons1:"R98",Ribbons2:"R98",Ribbons3:"R98",Ribbons4:"R98",WeddingVeil1:"R98"},gR={HairBack1:"R98",HairBack10:"R98",HairBack10b:"R98",HairBack11:"R98",HairBack12:"R98",HairBack12b:"R98",HairBack13:"R98",HairBack13b:"R98",HairBack14:"R98",HairBack15:"R98",HairBack15b:"R98",HairBack16:"R98",HairBack17:"R98",HairBack18:"R98",HairBack18b:"R98",HairBack19:"R98",HairBack19b:"R98",HairBack1b:"R98",HairBack2:"R98",HairBack20:"R98",HairBack20b:"R98",HairBack21:"R98",HairBack22:"R98",HairBack23:"R98",HairBack24:"R98",HairBack25:"R98",HairBack26:"R98",HairBack27:"R98",HairBack28:"R98",HairBack29:"R98",HairBack2b:"R98",HairBack30:"R98",HairBack31:"R98",HairBack32:"R98",HairBack33:"R98",HairBack34:"R98",HairBack35:"R98",HairBack36:"R98",HairBack37:"R98",HairBack38:"R98",HairBack39:"R98",HairBack4:"R98",HairBack40:"R98",HairBack41:"R98",HairBack42:"R98",HairBack43:"R98",HairBack44:"R98",HairBack45:"R98",HairBack46:"R98",HairBack47:"R98",HairBack48:"R98",HairBack49:"R98",HairBack4b:"R98",HairBack5:"R98",HairBack50:"R98",HairBack51:"R98",HairBack52:"R98",HairBack53:"R98",HairBack54:"R98",HairBack54b:"R98",HairBack55:"R98",HairBack55b:"R98",HairBack56:"R98",HairBack56b:"R98",HairBack57:"R98",HairBack57b:"R98",HairBack57c:"R98",HairBack57d:"R102",HairBack58:"R103",HairBack58b:"R103",HairBack59:"R103",HairBack5b:"R98",HairBack6:"R98",HairBack60:"R103",HairBack61:"R103",HairBack62:"R104",HairBack63:"R104",HairBack6b:"R98",HairBack7:"R98",HairBack7b:"R98",HairBack7c:"R98",HairBack8:"R98",HairBack9:"R98",HairBack9b:"R98",HairNone:"R98"},RR={HairFront1:"R98",HairFront10:"R98",HairFront10b:"R98",HairFront11:"R98",HairFront11b:"R98",HairFront12:"R98",HairFront12b:"R98",HairFront13:"R98",HairFront13b:"R98",HairFront14:"R98",HairFront14b:"R98",HairFront15:"R98",HairFront16:"R98",HairFront17:"R98",HairFront17b:"R98",HairFront18:"R98",HairFront19:"R98",HairFront1b:"R98",HairFront2:"R98",HairFront20:"R98",HairFront21:"R98",HairFront22:"R98",HairFront22b:"R98",HairFront23:"R98",HairFront23b:"R98",HairFront24:"R98",HairFront25:"R98",HairFront26:"R98",HairFront27:"R98",HairFront28:"R98",HairFront28b:"R98",HairFront29:"R98",HairFront29b:"R98",HairFront2b:"R98",HairFront3:"R98",HairFront30:"R98",HairFront31:"R98",HairFront32:"R98",HairFront33:"R98",HairFront33b:"R98",HairFront34:"R98",HairFront35:"R98",HairFront36:"R98",HairFront37:"R98",HairFront37b:"R98",HairFront38:"R98",HairFront38b:"R98",HairFront39:"R98",HairFront39b:"R98",HairFront3b:"R98",HairFront4:"R98",HairFront40:"R98",HairFront40b:"R98",HairFront41:"R98",HairFront41b:"R98",HairFront42:"R98",HairFront42b:"R98",HairFront43:"R98",HairFront43b:"R98",HairFront44:"R98",HairFront44b:"R98",HairFront45:"R98",HairFront45b:"R98",HairFront46:"R98",HairFront46b:"R98",HairFront47:"R98",HairFront47b:"R98",HairFront48:"R98",HairFront48b:"R98",HairFront49:"R98",HairFront4b:"R98",HairFront5:"R98",HairFront50:"R98",HairFront51:"R98",HairFront51b:"R98",HairFront52:"R98",HairFront52b:"R98",HairFront53:"R98",HairFront54:"R103",HairFront55:"R103",HairFront56:"R103",HairFront57:"R104",HairFront5b:"R98",HairFront6:"R98",HairFront6b:"R98",HairFront7:"R98",HairFront7b:"R98",HairFront8:"R98",HairFront8b:"R98",HairFront9:"R98",HairFront9b:"R98"},vR={Default:"R98"},yR={BakerBoyHat:"R98",BallCapBack:"R98",BallCapFront:"R98",Band1:"R98",Band2:"R98",Bandana:"R98",Beanie:"R98",Beret1:"R98",Bonnet1:"R98",Bonnet2:"R98",BunnySuccubus2:"R98",CaptainHat1:"R98",CollegeDunce:"R98",CowboyHat:"R98",Crown1:"R98",Crown2:"R98",Crown3:"R98",Crown4:"R98",Crown5:"R98",FacePaint:"R98",FlowerCrown:"R98",FurHeadband:"R98",HeadTowel1:"R98",LatexHabit:"R98",MaidHairband1:"R98",MaidLatexHairband:"R101",NunHabit:"R98",NunVeil:"R104",NurseCap:"R98",PirateBandana1:"R98",PirateHat:"R98",PoliceWomanHat:"R98",PoppyCrown:"R98",ReindeerBand:"R98",RoseCrown:"R98",Santa1:"R98",SmallHat1:"R98",SwimCap:"R98",Tiara1:"R98",Veil1:"R98",Veil2:"R98",WitchHat1:"R98"},bR={Default:"R98",NoEars:"R98",SmallEars:"R98"},SR={H0900:"R98",H0910:"R98",H0920:"R98",H0930:"R98",H0940:"R98",H0950:"R98",H0960:"R98",H0970:"R98",H0980:"R98",H0990:"R98",H1000:"R98"},CR={BedChains:"R98",BedRopes:"R98",BedStraps:"R98",BedTape:"R98",CeilingChain:"R98",CeilingRope:"R98",Covers:"R98"},wR={ArmbinderJacket:"R98",BitchSuit:"R98",Bolero:"R98",BondageBouquet:"R98",BondageBra:"R98",BoxTieArmbinder:"R98",CanvasStraitjacket1:"R98",CeilingShackles:"R98",Chains:"R98",CollarCuffs:"R98",CollarMetalcuffs:"R103",DuctTape:"R98",FourLimbsShackles:"R98",FullBodyLeatherHarness:"R98",FullBodyShackles:"R98",FullLatexSuit:"R98",FurStraitJacket:"R98",FuturisticArmbinder:"R98",FuturisticCuffs:"R98",FuturisticStraitjacket:"R98",HeavyYoke:"R98",HempRope:"R98",HighSecurityStraitJacket:"R98",HighStyleSteelCuffs:"R98",InflatableStraightLeotard:"R98",LatexArmbinder:"R98",LatexBoxtieLeotard:"R98",LatexButterflyLeotard:"R98",LatexSleevelessLeotard:"R98",LeatherArmSplints:"R98",LeatherArmbinder:"R98",LeatherCuffs:"R98",LeatherDeluxeCuffs:"R98",LeatherStraitJacket:"R98",Manacles:"R98",MedicalBedRestraints:"R98",MermaidSuit:"R98",MetalCuffs:"R98",NylonRope:"R98",OrnateCuffs:"R98",PantyhoseBody:"R98",PantyhoseBodyOpen:"R98",PetCrawler:"R98",Pillory:"R98",PlasticWrap:"R98",PrisonLockdownSuit:"R98",PrisonSJ:"R98",Ribbons:"R98",SeamlessLatexArmbinder:"R98",SeamlessStraitDress:"R98",SeamlessStraitDressOpen:"R98",ShinyArmbinder:"R98",ShinyPetSuit:"R98",ShinyStraitjacket:"R98",SleepSac:"R98",Slime:"R98",SmoothLeatherArmbinder1:"R98",SteelCuffs:"R98",StraitDress:"R98",StraitDressOpen:"R98",StraitJacket:"R98",StraitLeotard:"R98",StrictLeatherPetCrawler:"R98",SturdyLeatherBelts:"R98",Tentacles:"R98",ThinLeatherStraps:"R98",TightJacket:"R98",TightJacketCrotch:"R98",TransportJacket:"R98",UnderBedBondageCuffs:"R98",Web:"R98",WoodenCuffs:"R98",WrappedBlanket:"R98",WristShackles:"R98",Yoke:"R98",Zipties:"R98"},kR={BalletHeels:"R98",BalletHeels1:"R98",BalletWedges:"R98",FuturisticHeels:"R98",FuturisticHeels2:"R98",HighThighBoots:"R98",LeatherFootMitts1:"R98",LeatherToeCuffs:"R98",LockingBoots1:"R98",LockingHeels:"R98",LockingHeels2:"R98",LockingShoes1:"R98",LockingShoes2:"R98",MetalBallet:"R100",MonoHeel:"R98",PonyBoots:"R98",ShortPonyBoots:"R98",Slime:"R98",StrictPonyBoots:"R104",ThighHighLatexHeels:"R98",ToeCuffs:"R98",ToeTape:"R98",ToeTie:"R98",TormentHeels:"R103",Zipties:"R98"},BR={ChastityPlate:"R105",ForbiddenChastityBra:"R98",FuturisticBra:"R98",FuturisticBra2:"R98",LeatherBreastBinder:"R98",MetalChastityBra:"R98",OrnateChastityBra:"R98",PolishedChastityBra:"R98",Ribbons:"R98",TickleBra:"R98"},PR={AnalBeads:"R98",AnalBeads2:"R98",AnalHook:"R98",BlackButtPlug:"R98",BunnyTailPlug1:"R98",BunnyTailPlug2:"R98",BunnyTailVibePlug:"R98",ButtPlugLock:"R98",ButtPump:"R98",Cowtail:"R98",DemonPlug:"R98",EggVibePlugXXL:"R98",FoxTail1:"R98",FoxTail2:"R98",FoxTails:"R98",HollowButtPlug:"R98",HorsetailPlug:"R98",HorsetailPlug1:"R98",InflVibeButtPlug:"R98",KittenTail1:"R98",KittenTail2:"R98",LockingVibePlug:"R98",MouseTail1:"R98",MouseTail2:"R98",PenisPlug:"R98",PuppyTailPlug:"R98",PuppyTailPlug1:"R98",RaccoonButtPlug:"R98",RaccoonTailPlug:"R98",ShockPlug:"R98",Stitches:"R98",SuccubusButtPlug:"R98",SuccubusHeartButtPlug:"R98",TailButtPlug:"R98",Tentacles:"R98",VibratingButtplug:"R98",VibratingDildoPlug:"R98",WolfTail1:"R98",WolfTail2:"R98",WolfTail3:"R98"},xR={BBQ:"R98",Bed:"R98",BondageBench:"R98",BurlapSack:"R98",Cage:"R98",ChangingTable:"R98",Coffin:"R98",ConcealingCloak:"R98",Crib:"R98",CryoCapsule:"R98",Cushion:"R98",DisplayCase:"R98",DollBox:"R98",Familiar:"R98",FoldingScreen:"R98",FuckMachine:"R98",FurBlanketWrap:"R98",FuturisticCrate:"R98",GlueFloor:"R105",InflatableBodyBag:"R98",KabeshiriWall:"R98",Kennel:"R98",LittleMonster:"R98",Locker:"R98",LowCage:"R98",LuckyWheel:"R98",MedicalBed:"R98",MilkCan:"R98",Net:"R98",OneBarGirl:"R105",OneBarPrison:"R98",PersonalCage:"R98",PetBed:"R98",PetBowl:"R98",Pole:"R98",SaddleStand:"R98",SmallDisplayCase:"R98",SmallLocker:"R98",SmallWoodenBox:"R98",SmallWoodenBoxOpenHead:"R98",Snowman:"R98",StrapOnSmooth:"R98",StrapOnStuds:"R98",Sybian:"R98",TheDisplayFrame:"R98",TheHangingFrame:"R101",TransportWoodenBox:"R98",Trolley:"R99",VacBedDeluxe:"R98",VacCube:"R98",Vacbed:"R98",VacbedClear:"R98",WaterCell:"R98",WetFloor:"R98",WheelFortune:"R98",WoodenBox:"R98",WoodenBoxOpenHead:"R98",WoodenHorse:"R98",WoodenRack:"R98",WoodenStocks:"R98","X-Cross":"R98"},MR={BluetoothEarbuds:"R98",FuturisticEarphones:"R98",HeadphoneEarPlugs:"R98",Headphones:"R98",HeavyDutyEarPlugs:"R98",LightDutyEarPlugs:"R98"},IR={AnkleShackles:"R98",BallChain:"R98",Chains:"R98",DuctTape:"R98",EscortAnkleCuffs:"R98",FloorShackles:"R98",FuturisticAnkleCuffs:"R98",HeavyAnkleCuffs:"R98",HeavySpreaderMetal:"R98",HempRope:"R98",HighStyleSteelAnkleCuffs:"R98",Irish8Cuffs:"R98",LeatherAnkleCuffs:"R98",LeatherBelt:"R98",LeatherDeluxeAnkleCuffs:"R98",MedicalBedRestraints:"R98",NylonRope:"R98",OrnateAnkleCuffs:"R98",PlasticWrap:"R98",Slime:"R98",SpreaderDildoBar:"R98",SpreaderMetal:"R98",SpreaderVibratingDildoBar:"R98",SteelAnkleCuffs:"R98",SturdyLeatherBelts:"R98",SuspensionCuffs:"R98",Tentacles:"R98",WoodenCuffs:"R98",Zipties:"R98"},ER={Baguette:"R98",Ballgag:"R98",Belt:"R98",Broom:"R98",BunPlush:"R98",CandleWax:"R98",Cane:"R98",CattleProd:"R98",Crop:"R98",ElectricToothbrush:"R98",Feather:"R98",FeatherDuster:"R98",Flogger:"R98",ForSaleSign:"R98",FoxPlush:"R98",Gavel:"R98",GlassEmpty:"R98",GlassFilled:"R98",GlueTube:"R105",Hairbrush:"R98",HeartCrop:"R98",IceCube:"R98",Karl:"R98",KeyProp:"R98",LargeDildo:"R98",LongDuster:"R98",LongSock:"R98",Lotion:"R98",MedicalInjector:"R98",Mug:"R98",Paddle:"R98",Panties:"R98",PetPotato:"R98",PetToy:"R98",Phone1:"R98",Phone2:"R98",PlasticWrap:"R98",Popcorn:"R99",PortalTablet:"R98",PotionBottle:"R98",RainbowWand:"R98",RopeCoilLong:"R98",RopeCoilShort:"R98",Ruler:"R98",Scissors:"R98",Shark:"R98",ShockRemote:"R98",ShockWand:"R98",SmallDildo:"R98",SmallVibratingWand:"R98",Smartphone:"R99",Spatula:"R98",Sword:"R98",TapeRoll:"R98",TennisRacket:"R98",Toothbrush:"R98",Towel:"R98",VibeRemote:"R98",VibratingWand:"R98",Vibrator:"R98",WartenbergWheel:"R98",Whip:"R98",WhipPaddle:"R98"},_R={CheerleaderPomPoms:"R98",DuctTape:"R98",ElbowLengthMittens:"R103",FuturisticMittens:"R98",GlueMittens:"R105",HoofMittens:"R98",LeatherMittens:"R98",PaddedLeatherMittens:"R98",PaddedMittens:"R98",PawMittens:"R98",PolishedMittens:"R98",PonyMittensBinder:"R100",SmoothLeatherMittens1:"R98"},FR={AnimeLenses:"R98",BigMouthHood:"R101",BlackoutLenses:"R98",ClothBlindfold:"R98",DroneMask:"R98",DuctTape:"R98",FrilledSleepMask:"R98",FullBlindfold:"R98",FurScarf:"R98",FuturisticMask:"R98",InteractiveVRHeadset:"R98",InteractiveVisor:"R98",KittyBlindfold:"R98",LatexBlindfold:"R98",LeatherBlindfold:"R98",LeatherSlimMask:"R98",LeatherSlimMaskOpenEyes:"R98",LeatherSlimMaskOpenMouth:"R98",LewdBlindfold:"R98",MedicalPatch:"R98",PaddedBlindfold:"R98",Pantyhose:"R98",PrisonLockdownBlindfold:"R98",Ribbons:"R98",RopeBlindfold:"R98",ScarfBlindfold:"R98",SleepMask:"R98",Slime:"R98",SmallBlindfold:"R98",Snorkel:"R98",Stitches:"R98",StuddedBlindfold:"R98",Tentacles:"R98",WebBlindfold:"R98"},OR={AccentHood:"R98",BigMouthHood:"R101",BlanketHood:"R98",CanvasHood:"R98",CollarHood:"R98",CorsetHood:"R98",CowHood:"R98",CustomLatexHood:"R98",DobermanMask:"R98",DogHood:"R98",DroneMask:"R98",FestivalFoxMask:"R98",FoxHood:"R98",FoxyMask:"R98",Fu:"R104",FuturisticHelmet:"R98",GGTSHelmet:"R98",GP9GasMask:"R98",GasMask:"R98",GwenHood:"R98",HarnessCatMask:"R98",HeadboxSeethrough:"R98",InflatableGagMask:"R98",InflatedBallHood:"R98",KirugumiMask:"R98",KittyHood:"R98",LampHeadHood:"R98",LatexBunny:"R98",LatexDogHood:"R98",LatexDogMask:"R98",LatexHabit:"R98",LatexHoodOpenHair:"R98",LeatherHood:"R98",LeatherHoodOpenEyes:"R98",LeatherHoodOpenMouth:"R98",LeatherHoodSealed:"R98",LeatherHoodSensDep:"R98",OldGasMask:"R98",OpenFaceHood:"R98",OpenMouthPlugHood:"R98",PantyHood:"R98",Pantyhose:"R98",Paperbag:"R104",PolishedSteelHood:"R98",PonyHood:"R98",PumpkinHead:"R98",SackHood:"R98",SensoryDeprivationHood:"R98",Slime:"R98",SpaceMask:"R100",TechnoHelmet1:"R98",VacHood:"R98",ZipperHood:"R98"},$R={Chains:"R98",DuctTape:"R98",FrogtieMetalCuffs:"R103",FrogtieStraps:"R98",FuturisticLegCuffs:"R98",HempRope:"R98",HobbleSkirt:"R98",LeatherBelt:"R98",LeatherDeluxeLegCuffs:"R98",LeatherLegCuffs:"R98",LegBinder:"R98",MedicalBedRestraints:"R98",MermaidTail:"R98",NylonRope:"R98",OrnateLegCuffs:"R98",PlasticWrap:"R98",Ribbons:"R98",SeamlessHobbleSkirt:"R98",SeamlessLegBinder:"R98",ShinyLegBinder:"R98",Slime:"R98",SturdyLeatherBelts:"R98",Tentacles:"R98",Zipties:"R98"},LR={BountySuitcase:"R98",BountySuitcaseEmpty:"R98",BunPlush:"R98",CombinationPadlock:"R98",ExclusivePadlock:"R98",FamilyPadlock:"R98",FamilyPadlockKey:"R98",FoxPlush:"R98",HighSecurityPadlock:"R98",IntricatePadlock:"R98",Karl:"R98",Lockpicks:"R98",LoversPadlock:"R98",LoversPadlockKey:"R98",LoversTimerPadlock:"R98",MetalCuffsKey:"R98",MetalPadlock:"R98",MetalPadlockKey:"R98",MistressPadlock:"R98",MistressPadlockKey:"R98",MistressTimerPadlock:"R98",OwnerPadlock:"R98",OwnerPadlockKey:"R98",OwnerTimerPadlock:"R98",PandoraPadlock:"R98",PandoraPadlockKey:"R98",PasswordPadlock:"R98",PetPost:"R98",PetPotato:"R98",PortalLinkPadlock:"R98",SafewordPadlock:"R98",ServingTray:"R98",TeddyBear:"R98",TimerPadlock:"R98",TimerPasswordPadlock:"R98",WoodenMaidTray:"R98",WoodenMaidTrayFull:"R98",WoodenPaddle:"R98",WoodenSign:"R98"},TR={Ball:"R98",BallGag:"R98",BallGagMask:"R98",BambooGag:"R98",BigMouth:"R98",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CaneGag:"R98",CarrotGag:"R98",ChloroformCloth:"R98",ChopstickGag:"R98",ClothGag:"R98",ClothStuffing:"R98",CropGag:"R98",CupholderGag:"R98",DeepthroatGag:"R98",DentalGag:"R98",DildoGag:"R98",DildoPlugGag:"R98",DogMuzzleExposed:"R98",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FunnelGag:"R98",FurScarf:"R98",FuturisticHarnessBallGag:"R98",FuturisticHarnessPanelGag:"R98",FuturisticMuzzle:"R98",FuturisticPanelGag:"R98",GasMaskGag:"R98",GlueGag:"R105",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",HookGagMask:"R98",Kissmark:"R102",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LargeDildo:"R98",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R102",LatexSheathGag:"R98",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",MilkBottle:"R98",ModularGag:"R99",MouthFeatureGag:"R102",MuzzleGag:"R98",OTNPlugGag:"R98",PaciGag:"R98",PacifierGag:"R98",PaddedFaceMask:"R102",PantiesMask:"R98",PantyStuffing:"R98",PlasticWrap:"R98",PlugGag:"R98",PonyGag:"R98",PrisonLockdownGag:"R98",PumpGag:"R98",PumpkinGag:"R98",RegressedMilk:"R98",RegularSleepingPill:"R98",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SockStuffing:"R98",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R102",TechnoGag:"R98",Tentacles:"R98",TonguePiercingGag:"R100",TongueStrapGag:"R98",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98"},AR={Ball:"R103",BallGag:"R98",BallGagMask:"R98",BambooGag:"R103",BigMouth:"R103",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CaneGag:"R103",CarrotGag:"R98",ChloroformCloth:"R98",ChopstickGag:"R103",ClothGag:"R98",ClothStuffing:"R103",CropGag:"R103",CupholderGag:"R98",DeepthroatGag:"R103",DentalGag:"R103",DildoGag:"R98",DildoPlugGag:"R103",DogMuzzleExposed:"R103",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FunnelGag:"R103",FurScarf:"R98",FuturisticHarnessBallGag:"R101",FuturisticHarnessPanelGag:"R101",FuturisticMuzzle:"R98",FuturisticPanelGag:"R101",GasMaskGag:"R98",GlueGag:"R105",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",HookGagMask:"R103",Kissmark:"R102",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LargeDildo:"R103",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R102",LatexSheathGag:"R103",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",MilkBottle:"R103",ModularGag:"R99",MouthFeatureGag:"R98",MuzzleGag:"R98",OTNPlugGag:"R103",PaciGag:"R98",PacifierGag:"R103",PaddedFaceMask:"R102",PantiesMask:"R98",PantyStuffing:"R103",PlasticWrap:"R98",PlugGag:"R103",PonyGag:"R98",PrisonLockdownGag:"R98",PumpGag:"R103",PumpkinGag:"R98",RegressedMilk:"R98",RegularSleepingPill:"R103",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SockStuffing:"R103",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R102",TechnoGag:"R103",Tentacles:"R98",TonguePiercingGag:"R103",TongueStrapGag:"R103",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98"},HR={Ball:"R103",BallGag:"R98",BallGagMask:"R98",BambooGag:"R103",BigMouth:"R103",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CaneGag:"R103",CarrotGag:"R98",ChloroformCloth:"R98",ChopstickGag:"R103",ClothGag:"R98",ClothStuffing:"R103",CropGag:"R103",CupholderGag:"R98",DeepthroatGag:"R103",DentalGag:"R103",DildoGag:"R98",DildoPlugGag:"R103",DogMuzzleExposed:"R103",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FunnelGag:"R103",FurScarf:"R98",FuturisticHarnessBallGag:"R101",FuturisticHarnessPanelGag:"R101",FuturisticMuzzle:"R98",FuturisticPanelGag:"R101",GasMaskGag:"R98",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",HookGagMask:"R103",Kissmark:"R98",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LargeDildo:"R103",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R98",LatexSheathGag:"R103",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",MilkBottle:"R103",ModularGag:"R99",MouthFeatureGag:"R102",MuzzleGag:"R98",OTNPlugGag:"R103",PaciGag:"R98",PacifierGag:"R103",PaddedFaceMask:"R98",PantiesMask:"R98",PantyStuffing:"R103",PlasticWrap:"R98",PlugGag:"R103",PonyGag:"R98",PrisonLockdownGag:"R98",PumpGag:"R103",PumpkinGag:"R98",RegressedMilk:"R98",RegularSleepingPill:"R103",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SockStuffing:"R103",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R98",TechnoGag:"R103",Tentacles:"R98",TonguePiercingGag:"R103",TongueStrapGag:"R103",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98"},NR={AutoShockCollar:"R98",BatCollar:"R98",BonedNeckCorset:"R98",BordelleCollar:"R98",ClubSlaveCollar:"R98",ComboHarness:"R98",DogCollar:"R98",ExtendablePostureCollar:"R99",FuturisticCollar:"R98",GothicCollar:"R98",HeartCollar:"R98",HeartLinkChoker:"R98",HighCollar:"R98",HighSecurityCollar:"R98",HighStyleSteelCollar:"R98",LatexCollar1:"R98",LatexCollar2:"R98",LatexPostureCollar:"R98",LatexRingCollar:"R99",LeatherChoker:"R98",LeatherCollar:"R98",LeatherCollarBell:"R98",LeatherCollarBow:"R98",LeatherCorsetCollar:"R98",LeatherDeluxeCollar:"R98",LoveLeatherCollar:"R98",MaidCollar:"R98",NeckRope:"R98",NobleCorsetCollar:"R98",NylonCollar:"R98",OrnateCollar:"R98",PaddedBeltCollar:"R99",PetCollar:"R98",PetSuitShockCollar:"R98",PostureCollar:"R98",ShinySteelCollar:"R98",ShockCollar:"R98",SlaveCollar:"R98",SlenderSteelCollar:"R98",SpikeCollar:"R98",SpikedChoker:"R99",SteelPostureCollar:"R98",StrictPostureCollar:"R98",TechnoCollar:"R98"},DR={CollarAutoShockUnit:"R98",CollarBell:"R98",CollarBow:"R98",CollarButterfly:"R98",CollarCowBell:"R98",CollarFlower:"R98",CollarLapis:"R98",CollarMoon:"R98",CollarNameTag:"R98",CollarNameTagLivestock:"R98",CollarNameTagLover:"R98",CollarNameTagOval:"R98",CollarNameTagPet:"R98",CollarPentagram:"R98",CollarPupBone:"R98",CollarRose:"R98",CollarShockUnit:"R98",CollarSun:"R98",CustomCollarTag:"R98",ElectronicTag:"R98",Key:"R98"},GR={ChainLeash:"R98",CollarChainLong:"R98",CollarChainMedium:"R98",CollarChainShort:"R98",CollarLeash:"R98",CollarRopeLong:"R98",CollarRopeMedium:"R98",CollarRopeShort:"R98",PetPost:"R98",Post:"R98"},jR={BellClamps:"R98",ChainClamp:"R98",ChainTassles:"R98",ChopStickNippleClamps:"R98",Clothespins:"R98",HeartPasties:"R98",KittyPasties:"R98",LactationPump:"R98",NippleClamp:"R98",NippleClamps2:"R98",NippleSuctionCups:"R98",NippleTape:"R98",NippleVibe:"R98",NippleWeightClamps:"R98",PlateClamps:"R98",ScrewClamps:"R98",ShockClamps:"R98",StretchClovers:"R98",TapedVibeEggs:"R98",VibeNippleClamp:"R98",VibratorRemote:"R98"},WR={BarbellPiercing:"R98",BellPiercing:"R98",CrossedStraightPiercing:"R98",NecklacePiercingChain:"R98",NippleAccessory1:"R98",NippleAccessory2:"R98",NippleAccessory3:"R98",NippleChastityPiercing1:"R98",NippleChastityPiercing2:"R98",RoundPiercing:"R98",StraightPiercing:"R98",VibeHeartPiercings:"R98"},zR={BarbelPiercing:"R98",ClownNose:"R99",DuctTape:"R98",GlueNose:"R105",NoseHook:"R98",NosePlugs:"R98",NoseRing:"R98",PigNose:"R98",PigNoseHook:"R98"},VR={BulkyDiaper:"R98",DiaperHarness:"R98",ForbiddenChastityBelt:"R98",FuturisticChastityBelt:"R98",FuturisticTrainingBelt:"R98",HarnessPanties1:"R98",HarnessPanties2:"R98",HeavyDutyBelt:"R98",HempRope:"R98",HybridChastityBelt:"R98",LeatherChastityBelt:"R98",LeatherStrapPanties1:"R98",LoveChastityBelt:"R98",MetalChastityBelt:"R98",ModularChastityBelt:"R99",ObedienceBelt:"R98",OrnateChastityBelt:"R98",PelvisChainLeash:"R98",PolishedChastityBelt:"R98",PoofyDiaper:"R98",PortalPanties:"R98",Ribbons:"R98",SciFiPleasurePanties:"R98",SleekLeatherChastityBelt:"R98",SteelChastityPanties:"R98",StraponPanties:"R98",StuddedChastityBelt:"R98"},qR={Script:"R98"},UR={AdultBabyHarness:"R98",ClassicLatexCorset:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",CrotchChain:"R98",FuturisticHarness:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeavyLatexCorset:"R98",HempRopeHarness:"R98",HighSecurityHarness:"R98",LatexCorset1:"R98",LeatherBreastBinder:"R98",LeatherChestHarness1:"R98",LeatherHarness:"R98",LeatherStrapBra1:"R98",LeatherStrapHarness:"R98",LockingSwimsuit:"R98",LockingSwimsuit2:"R98",NavelBar1:"R98",NylonRopeHarness:"R98",Ribbons:"R98",StuddedHarness:"R98",ThinLeatherStraps:"R98",Underbust:"R98"},KR={AdultBabyHarness:"R98",ClassicLatexCorset:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",CrotchChain:"R98",FuturisticHarness:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeavyLatexCorset:"R98",HempRopeHarness:"R98",HighSecurityHarness:"R98",LatexCorset1:"R98",LeatherBreastBinder:"R98",LeatherChestHarness1:"R98",LeatherHarness:"R98",LeatherStrapBra1:"R98",LeatherStrapHarness:"R98",LockingSwimsuit:"R98",LockingSwimsuit2:"R98",NavelBar1:"R98",NylonRopeHarness:"R98",Ribbons:"R98",StuddedHarness:"R98",ThinLeatherStraps:"R98",Underbust:"R98"},JR={BasicCockring:"R98",BenWaBalls:"R98",ChastityPouch:"R98",ClitAndDildoVibratorbelt:"R98",ClitSuctionCup:"R98",ClitoralStimulator:"R98",DoubleEndDildo:"R98",FlatChastityCage:"R98",FullCasingCage:"R103",FullLatexSuitWand:"R98",FuturisticVibrator:"R98",HeavyWeightClamp:"R98",HempRopeBelt:"R98",InflatableVibeDildo:"R98",InflatableVibratingPanties:"R98",LatexNulge:"R104",LockingCockring:"R104",LoversVibrator:"R98",LoversVibratorRemote:"R98",PenisDildo:"R98",PlasticChastityCage1:"R98",PlasticChastityCage2:"R98",ShockDildo:"R98",Stitches:"R98",TapeStrips:"R98",TechnoChastityCage:"R98",VibeEggPenisBase:"R98",VibratingDildo:"R98",VibratingEgg:"R98",VibratingLatexPanties:"R98",VibratorRemote:"R98",WandBelt:"R98",WiredEgg:"R98"},YR={AdornedClitPiercing:"R98",BarbellClitPiercing:"R98",ChastityClitPiercing:"R98",ChastityClitShield:"R98",ClitRing:"R98",CockRingLeash:"R103",HighSecurityVulvaShield:"R98",JewelClitPiercing:"R98",RoundClitPiercing:"R98",StraightClitPiercing:"R98",TapedClitEgg:"R98",UrethralSound:"R103",VibeEggGlans:"R98",VibeHeartClitPiercing:"R98"},ZR={JewelrySet:"R98"},XR={BandAnklet:"R98",LegFur:"R103",Ribbon:"R98",Ribbon1:"R98"},QR={CatsuitGloves:"R100",Claws:"R99",Fingernails:"R99",Rings:"R98"},ev={AnimeLenses:"R99",BunnyMask1:"R98",BunnyMask2:"R98",BunnyMask3:"R98",ButterflyMask:"R98",DominoMask:"R98",DroneMask:"R98",FacePaint:"R98",FaceVeil:"R98",FestivalFoxMask:"R98",FoxMask:"R98",FuturisticVisor:"R98",Glitter:"R98",HeadHarness:"R98",Kissmark:"R98",KittyMask1:"R98",KittyMask2:"R98",KittyMask3:"R98",LaceMask1:"R98",LaceMask2:"R98",LatexMuzzleMask:"R99",MedicalMask:"R98",OpenFaceHood:"R98",PetNose:"R98",ShinobiMask:"R98",SwimCap:"R98",VenetianMask:"R98"},tv={Discreet:"R98",Full:"R98",Regular:"R98"},rv={Bandana:"R98",BlackHeart:"R98",BodyChainNecklace:"R98",CatsuitCollar:"R98",ChokerTattoo:"R98",ElegantHeartNecklace:"R98",FlowerGarland:"R98",FurScarf:"R98",IDCard:"R98",Necklace1:"R98",Necklace2:"R98",Necklace3:"R98",Necklace4:"R98",NecklaceBallGag:"R98",NecklaceButterfly:"R98",NecklaceKey:"R98",NecklaceLock:"R98",NecklaceRope:"R98",PearlNecklace1:"R105"},nv={Nipples1:"R98",Nipples2:"R98",Nipples3:"R98"},ov={Bikini1:"R98",BoxerShorts:"R98",Briefs:"R98",BulkyDiaper:"R98",CatsuitPanties:"R98",ChinesePanties1:"R98",CockSock:"R98",CowPrintedPanties:"R98",CrotchPanties1:"R98",Diapers1:"R98",Diapers2:"R98",Diapers3:"R98",Diapers4:"R98",FloralPanties2:"R98",FlowerPanties:"R98",HarnessPanties1:"R98",HarnessPanties2:"R98",Jockstrap:"R98",KittyPanties1:"R98",LatexCrotchlessPanties:"R98",LatexPanties1:"R98",LatexPanties2:"R98",LeatherStrapPanties1:"R98",MaidPanties1:"R98",MaidPanties2:"R98",MaleCatsuitPanties:"R98",MicroThong:"R98",Panties1:"R98",Panties11:"R98",Panties12:"R98",Panties13:"R98",Panties14:"R98",Panties15:"R98",Panties16:"R98",Panties7:"R98",Panties8:"R98",PearlPanties1:"R98",PilotPanties:"R98",PoofyDiaper:"R98",RedBowPanties:"R98",SexyBeachPanties1:"R98",StringPanties1:"R98",StringPasty1:"R98",StringThong:"R98",SunstripePanties1:"R98",Thong:"R98",WrapPanties1:"R98",ZipPanties1:"R98"},iv={HeHim:"R98",SheHer:"R98"},av={Penis:"R98",Pussy1:"R98",Pussy2:"R98",Pussy3:"R98"},sv={BandAnklet:"R98",LegFur:"R103",Ribbon:"R98",Ribbon1:"R98"},lv={CatsuitGloves:"R100",Claws:"R99",Fingernails:"R99",Rings:"R98"},cv={AnkleBoots1:"R98",AnkleStrapShoes:"R98",BalletHeels1:"R98",BarefootSandals1:"R98",Boots1:"R98",Clogs:"R99",DeluxeBoots:"R98",DutyShoes:"R98",Flippers:"R98",FuturisticHeels2:"R98",FuzzyBoots:"R98",Geta:"R98",Heels1:"R98",Heels2:"R98",Heels3:"R98",LatexAnkleShoes:"R98",LatexHeels:"R98",MaryShoes:"R102",MistressBoots:"R98",PawBoots:"R98",PonyBoots:"R98",Sandals:"R98",SandalsRS:"R98",Shoes1:"R98",Shoes2:"R98",Shoes4:"R98",Shoes5:"R98",Sneakers1:"R98",Sneakers2:"R98",SneakersSport:"R98",SocialHeels:"R98",StilettoHeels:"R98",StreetBoots:"R98",StrictPonyBoots:"R104",TallerBoots:"R100",ThighBoots:"R98",ThighHighLatexHeels:"R98",WesternBoots:"R98",WoollyBootsTall:"R98"},uv={CowPrintedSocks:"R98",FootlessSocks1:"R98",GradientPantyhose:"R98",HaremStockings:"R98",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",Pantyhose1:"R98",Pantyhose2:"R98",ReverseBunnySuit:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98",YuletideVelvetWarmth:"R104"},dv={CowPrintedSocks:"R98",FootlessSocks1:"R98",HaremStockings:"R98",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",LooseSocks:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98"},hv={CowPrintedSocks:"R98",FootlessSocks1:"R98",HaremStockings:"R98",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",LooseSocks:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98"},pv={Blouse1:"R98",Catsuit:"R98",FishnetTop:"R98",LatexCatsuit:"R98",MaleSeamlessCatsuit:"R98",PilotSuit:"R98",ReverseBunnySuit:"R98",SeamlessCatsuit:"R98",SeethroughSuit:"R98",SeethroughSuitZip:"R98",SleevelessCatsuit:"R98",SleevelessSlimLatexLeotard:"R98"},fv={Catsuit:"R98",CatsuitPanties:"R98",LatexCatsuit:"R98",MaleCatsuitPanties:"R98",MaleSeamlessCatsuit:"R98",Pantyhose1:"R98",Pantyhose2:"R98",PilotPanties:"R98",PilotSuit:"R98",ReverseBunnySuit:"R98",SeamlessCatsuit:"R98",SeethroughSuit:"R98",SeethroughSuitZip:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98"},mv={BunnyTailStrap:"R98",CowtailStrap:"R98",DemonPlug:"R98",DragonTailStrap1:"R98",DragonTailStrap2Left:"R104",DragonTailStrap2Right:"R104",FoxTailStrap1:"R98",FoxTailStrap2:"R98",FoxTailsStrap:"R98",HorseTailStrap:"R98",HorseTailStrap1:"R98",KittenTailStrap1:"R98",KittenTailStrap2:"R98",LionTailStrap:"R98",MouseTailStrap1:"R98",MouseTailStrap2:"R98",PuppyTailStrap:"R98",PuppyTailStrap1:"R98",RaccoonStrap:"R98",RaccoonTailStrap:"R98",SuccubusHeartTailStrap:"R98",SuccubusTailStrap:"R98",TailStrap:"R98",Tentacles:"R98",WolfTailStrap1:"R98",WolfTailStrap2:"R98",WolfTailStrap3:"R98"},gv={AngelFeather:"R98",AngelWings:"R98",BatWings:"R98",BeeWings:"R98",CyberWings:"R98",DevilWings:"R98",FairyWings:"R98",FallenAngelWings:"R98",PixieWings:"R98",SteampunkWings:"R98",SuccubusFeather:"R98",SuccubusWings:"R98"},Rv={Blush:Ug,BodyLower:Kg,BodyMarkings:Jg,BodyUpper:Yg,Bra:Zg,Bracelet:Xg,Cloth:Qg,ClothAccessory:eR,ClothLower:tR,Corset:rR,Emoticon:nR,Eyebrows:oR,Eyes:iR,Eyes2:aR,EyeShadow:sR,FacialHair:lR,Fluids:cR,Garters:uR,Glasses:dR,Gloves:hR,HairAccessory1:pR,HairAccessory2:fR,HairAccessory3:mR,HairBack:gR,HairFront:RR,Hands:vR,Hat:yR,Head:bR,Height:SR,ItemAddon:CR,ItemArms:wR,ItemBoots:kR,ItemBreast:BR,ItemButt:PR,ItemDevices:xR,ItemEars:MR,ItemFeet:IR,ItemHandheld:ER,ItemHands:_R,ItemHead:FR,ItemHood:OR,ItemLegs:$R,ItemMisc:LR,ItemMouth:TR,ItemMouth2:AR,ItemMouth3:HR,ItemNeck:NR,ItemNeckAccessories:DR,ItemNeckRestraints:GR,ItemNipples:jR,ItemNipplesPiercings:WR,ItemNose:zR,ItemPelvis:VR,ItemScript:qR,ItemTorso:UR,ItemTorso2:KR,ItemVulva:JR,ItemVulvaPiercings:YR,Jewelry:ZR,LeftAnklet:XR,LeftHand:QR,Mask:ev,Mouth:tv,Necklace:rv,Nipples:nv,Panties:ov,Pronouns:iv,Pussy:av,RightAnklet:sv,RightHand:lv,Shoes:cv,Socks:uv,SocksLeft:dv,SocksRight:hv,Suit:pv,SuitLower:fv,TailStraps:mv,Wings:gv},vv=Object.freeze({__proto__:null,Blush:Ug,BodyLower:Kg,BodyMarkings:Jg,BodyUpper:Yg,Bra:Zg,Bracelet:Xg,Cloth:Qg,ClothAccessory:eR,ClothLower:tR,Corset:rR,Emoticon:nR,EyeShadow:sR,Eyebrows:oR,Eyes:iR,Eyes2:aR,FacialHair:lR,Fluids:cR,Garters:uR,Glasses:dR,Gloves:hR,HairAccessory1:pR,HairAccessory2:fR,HairAccessory3:mR,HairBack:gR,HairFront:RR,Hands:vR,Hat:yR,Head:bR,Height:SR,ItemAddon:CR,ItemArms:wR,ItemBoots:kR,ItemBreast:BR,ItemButt:PR,ItemDevices:xR,ItemEars:MR,ItemFeet:IR,ItemHandheld:ER,ItemHands:_R,ItemHead:FR,ItemHood:OR,ItemLegs:$R,ItemMisc:LR,ItemMouth:TR,ItemMouth2:AR,ItemMouth3:HR,ItemNeck:NR,ItemNeckAccessories:DR,ItemNeckRestraints:GR,ItemNipples:jR,ItemNipplesPiercings:WR,ItemNose:zR,ItemPelvis:VR,ItemScript:qR,ItemTorso:UR,ItemTorso2:KR,ItemVulva:JR,ItemVulvaPiercings:YR,Jewelry:ZR,LeftAnklet:XR,LeftHand:QR,Mask:ev,Mouth:tv,Necklace:rv,Nipples:nv,Panties:ov,Pronouns:iv,Pussy:av,RightAnklet:sv,RightHand:lv,Shoes:cv,Socks:uv,SocksLeft:dv,SocksRight:hv,Suit:pv,SuitLower:fv,TailStraps:mv,Wings:gv,default:Rv});let yv;const bv={};Bp(dg).then((()=>{kp.log("Initializing new item screen hooks");const e=GameVersionFormat.exec(GameVersion);if(null==e)return void kp.error(`Invalid BC version: "${GameVersion}"`);yv=Number.parseInt(e[1]);for(const[e,t]of bp(vv))for(const[r,n]of bp(t))if(n===`R${yv}`){const t=AssetGet("Female3DCG",e,r);if(null==t)continue;t.Group.Name===t.DynamicGroupName&&(bv[`${t.Group.Name}${t.Name}`]=t)}const t=Shop2Vars;Object.defineProperty(Shop2Vars,"MBS_ShowAllVersions",{get:()=>!("MBS_VersionFilter"in Shop2Vars.Filters)}),Shop2.Elements.MBS_VersionHeader={Coords:[345,475,0,0],Mode:new Set(["Preview","Buy","Sell"]),Draw:(e,t)=>{DrawText("Filter by BC version",e,t,Shop2Vars.DropdownState!==ShopDropdownState.NONE?"Gray":"White")}},Shop2.Elements.MBS_ShowCurrentVersion={Coords:[135,Shop2Consts.Grid.y+320,200,90],Mode:new Set(["Preview","Buy","Sell"]),Draw:(...e)=>{Shop2Vars.DropdownState!==ShopDropdownState.NONE?DrawButton(...e,`Version R${yv}`,"Gray",void 0,void 0,!0):t.MBS_ShowAllVersions?DrawButton(...e,`Version R${yv}`,"White"):DrawButton(...e,`Version R${yv}`,"Cyan")},Click:()=>{t.MBS_ShowAllVersions&&(Shop2Vars.Filters.MBS_VersionFilter=e=>bv[`${e.Asset.Group.Name}${e.Asset.Name}`]?["Buy","Sell","Preview"]:[],Shop2.ApplyItemFilters())}},Shop2.Elements.MBS_ShowAllVersions={Coords:[355,Shop2Consts.Grid.y+320,200,90],Mode:new Set(["Preview","Buy","Sell"]),Draw:(...e)=>{Shop2Vars.DropdownState!==ShopDropdownState.NONE?DrawButton(...e,"All versions","Gray",void 0,void 0,!0):t.MBS_ShowAllVersions?DrawButton(...e,"All versions","Cyan"):DrawButton(...e,"All versions","White")},Click:()=>{t.MBS_ShowAllVersions||(delete Shop2Vars.Filters.MBS_VersionFilter,Shop2.ApplyItemFilters())}},Tp.hookFunction("Shop2Load",0,((e,t)=>{0===Shop2InitVars.Items.length&&(Shop2InitVars.Items=Shop2.ParseAssets(Asset.filter((e=>e.Group.Name===e.DynamicGroupName&&(bv[`${e.Group.Name}${e.Name}`]||(Shop2Consts.BuyGroups[e.BuyGroup]?.Value??e.Value)>0)&&!ShopHideGenderedAsset(e))).sort(((e,t)=>e.Group.Category.localeCompare(t.Group.Category)||e.Group.Description.localeCompare(t.Group.Description)||e.Description.localeCompare(t.Description))))),t(e)}))}));const Sv=Tp.getOriginalHash,Cv=t;return kp.log(`Initializing MBS version ${t}`),Bp((()=>dg(!1))).then((()=>{!function(e){const t=jp.fromBCVersion(e),r=jp.fromBCVersion("R104");if(t.lesser(r))throw new Error(`BC ${GameVersion} detected; MBS requires version R104 or later`);kp.log(`Detected BC ${GameVersion}`)}(GameVersion),function(){const e={};for(const[t,r]of Object.entries(Wp)){const n=Tp.getOriginalHash(t);r.has(n)||(e[t]=n)}const t=Object.values(e).length;0!==t&&kp.warn(`Found ${t} patched functions with an unknown hash`,e)}(),document.body.appendChild(h("style",{id:"mbs-style",children:":root {\n  --mbs-background-color: white;\n  --mbs-button-color: white;\n  --mbs-hover-color: cyan;\n  --mbs-tooltip-color: lightyellow;\n  --mbs-border-color: black;\n  --mbs-text-color: black;\n  --mbs-font-small: min(3.5dvh, 1.75dvw);\n  --mbs-font-large: min(5dvh, 2.5dvw);\n  --mbs-font-family: arial, sans-serif;\n}\n\n.mbs-button {\n  background-origin: content-box;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  height: 100%;\n  overflow: clip;\n  padding-left: min(2dvh, 1dvw);\n  padding-right: min(2dvh, 1dvw);\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 100%;\n}\n.mbs-button:hover {\n  background-color: var(--mbs-hover-color);\n}\n.mbs-button:disabled {\n  background-color: var(--mbs-button-color);\n  filter: brightness(60%);\n}\n\n.mbs-button-tooltip {\n  background-color: var(--mbs-tooltip-color) !important;\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  bottom: -10%;\n  box-shadow: min(0.4dvh, 0.2dvw) min(0.4dvh, 0.2dvw) min(2dvh, 1dvw) 0 rgba(0, 0, 0, 0.5);\n  line-height: 1.4;\n  padding: min(1dvh, 0.5dvw) min(2dvh, 1dvw);\n  position: relative;\n  text-align: center;\n  visibility: hidden;\n  white-space: nowrap;\n  width: fit-content;\n  z-index: 1;\n}\n\n.mbs-button-div {\n  display: grid;\n  grid-template-columns: min(9dvh, 4.5dvw);\n  grid-template-rows: min(9dvh, 4.5dvw) auto;\n}\n.mbs-button-div .mbs-button-tooltip {\n  justify-self: center;\n}\n.mbs-button-div .mbs-button {\n  height: inherit;\n  width: inherit;\n}\n.mbs-button-div .mbs-button:hover + .mbs-button-tooltip {\n  visibility: visible;\n}\n\n.mbs-timer {\n  height: min(6dvh, 3dvw);\n  text-align: center;\n  width: min(21dvh, 10.5dvw);\n}\n\n.mbs-dropdown-button {\n  border: unset !important;\n  padding-bottom: min(1dvh, 0.5dvw);\n  padding-top: min(1dvh, 0.5dvw);\n}\n.mbs-dropdown-button:nth-child(even) {\n  filter: brightness(85%);\n}\n\n.mbs-dropdown-content {\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  overflow-y: scroll;\n  position: absolute;\n  visibility: hidden;\n  z-index: 1;\n}\n\n.mbs-dropdown:hover .mbs-dropdown-content {\n  visibility: visible;\n}\n\n.mbs-screen {\n  display: grid;\n  position: fixed;\n  text-align: center;\n  user-select: none;\n  visibility: hidden;\n  grid-gap: min(2dvh, 1dvw);\n}\n.mbs-screen h1, .mbs-screen h2, .mbs-screen p, .mbs-screen ul {\n  align-items: center;\n  align-self: center;\n  color: var(--mbs-text-color);\n  font-family: var(--mbs-font-family);\n}\n.mbs-screen h1 {\n  font-size: var(--mbs-font-large);\n}\n.mbs-screen h2 {\n  margin: min(1dvh, 0.5dvw);\n}\n.mbs-screen ul {\n  margin: 0;\n  text-align: left;\n}\n.mbs-screen p, .mbs-screen h2, .mbs-screen ul, .mbs-screen span {\n  font-size: var(--mbs-font-small);\n}\n.mbs-screen div, .mbs-screen input {\n  background-color: var(--mbs-background-color);\n  color: var(--mbs-text-color);\n  font-family: var(--mbs-font-family);\n  font-size: var(--mbs-font-small);\n}\n.mbs-screen button {\n  background-color: var(--mbs-button-color);\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  color: var(--mbs-text-color);\n  font-family: var(--mbs-font-family);\n  font-size: var(--mbs-font-small);\n}\n.mbs-screen input {\n  box-sizing: border-box;\n  padding: unset;\n}\n.mbs-screen input:invalid {\n  background-color: #fbb;\n  box-shadow: 0 0 3px 2px #c22;\n}\n.mbs-screen input[type=checkbox] {\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  height: min(7dvh, 3.5dvw);\n  width: min(7dvh, 3.5dvw);\n}\n.mbs-screen input[type=checkbox]:hover {\n  background-color: var(--mbs-hover-color);\n}\n.mbs-screen input[type=checkbox]:disabled {\n  background-color: var(--mbs-background-color);\n  filter: brightness(60%);\n}\n.mbs-screen input[type=checkbox]::before {\n  height: min(4.6dvh, 2.3dvw);\n  width: min(4.6dvh, 2.3dvw);\n}".toString()}))})),e.API_VERSION=Mg,e.MBS_VERSION=Cv,e._getFunctionHash=Sv,e._toItemBundles=af,e._unpackSettings=Tm,e.css=xg,e.getDebug=Ig,e.runTests=zg,e.wheelOutfits=kg,e}({});
//# sourceMappingURL=mbs.js.map
