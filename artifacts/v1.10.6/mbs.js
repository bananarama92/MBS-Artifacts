/*!
 * MBS: Maid's Bondage Scripts
 *
 * Copyright (C) 2023-2025 Bananarama92
 *
 * This program is free software: you can redistribute it and/or modify it under the terms of
 * the GNU General Public License as published by the Free Software Foundation,
 * either version 3 of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program.
 * If not, see https://www.gnu.org/licenses/.
 *
 * An exception is made for the "mbs.css" API, which is licensed under the terms of GNU LGPL
 * version 3 (see https://www.gnu.org/licenses/lgpl-3.0.en.html).
 */
var mbs=function(exports){"use strict";const MBS_VERSION="1.10.6";var __self__=Object.freeze({__proto__:null,get API_VERSION(){return API_VERSION},get MBS_VERSION(){return _version},get _getOriginalHash(){return _getOriginalHash},get _toItemBundles(){return toItemBundles},get _unpackSettings(){return unpackSettings},get css(){return css},get getDebug(){return getDebug},get runTests(){return runTests},get wheelEvents(){return wheel_events},get wheelOutfits(){return wheel_outfits}}),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getDefaultExportFromNamespaceIfPresent(e){return e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getDefaultExportFromNamespaceIfNotNamed(e){return e&&Object.prototype.hasOwnProperty.call(e,"default")&&1===Object.keys(e).length?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var r=function e(){var r=!1;try{r=this instanceof e}catch{}return r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}var jsxRuntime$1={},setAttributes={},dist$1={},EventAttributes={},hasRequiredEventAttributes;function requireEventAttributes(){return hasRequiredEventAttributes||(hasRequiredEventAttributes=1,Object.defineProperty(EventAttributes,"__esModule",{value:!0})),EventAttributes}var HTMLAttributes={},hasRequiredHTMLAttributes;function requireHTMLAttributes(){return hasRequiredHTMLAttributes||(hasRequiredHTMLAttributes=1,Object.defineProperty(HTMLAttributes,"__esModule",{value:!0})),HTMLAttributes}var StyleAttributes={},hasRequiredStyleAttributes;function requireStyleAttributes(){return hasRequiredStyleAttributes||(hasRequiredStyleAttributes=1,Object.defineProperty(StyleAttributes,"__esModule",{value:!0})),StyleAttributes}var SVGAttributes={},hasRequiredSVGAttributes;function requireSVGAttributes(){return hasRequiredSVGAttributes||(hasRequiredSVGAttributes=1,Object.defineProperty(SVGAttributes,"__esModule",{value:!0})),SVGAttributes}var HelperTypes={},hasRequiredHelperTypes;function requireHelperTypes(){return hasRequiredHelperTypes||(hasRequiredHelperTypes=1,Object.defineProperty(HelperTypes,"__esModule",{value:!0})),HelperTypes}var classnames={},hasRequiredClassnames,hasRequiredDist$1,hasRequiredSetAttributes;function requireClassnames(){if(hasRequiredClassnames)return classnames;hasRequiredClassnames=1,Object.defineProperty(classnames,"__esModule",{value:!0}),classnames.classnames=function(e){const t=a(e).filter(r);return t.length>0?t.join(" "):void 0};const e=e=>Object.entries(e).map(([e,t])=>t&&e),t=e=>!!e,r=(e,t,r)=>r.indexOf(e)===t,n=[];function a(r){return r?"string"==typeof r?[r]:Array.isArray(r)?r.flatMap(a).filter(t):e(r).filter(t):n}return classnames}function requireDist$1(){return hasRequiredDist$1||(hasRequiredDist$1=1,function(e){var t=dist$1&&dist$1.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=dist$1&&dist$1.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(requireEventAttributes(),e),r(requireHTMLAttributes(),e),r(requireStyleAttributes(),e),r(requireSVGAttributes(),e),r(requireHelperTypes(),e),r(requireClassnames(),e)}(dist$1)),dist$1}function requireSetAttributes(){if(hasRequiredSetAttributes)return setAttributes;hasRequiredSetAttributes=1,Object.defineProperty(setAttributes,"__esModule",{value:!0}),setAttributes.setAttributes=function(n,a){for(const o of Object.keys(a)){if("__source"===o||"__self"===o||"tsxTag"===o)continue;const i=a[o];if("class"===o){const t=(0,e.classnames)(i);t&&n.setAttribute(o,t)}else if("ref"===o)i.current=n;else if(r.test(o)){const e=o.replace(/Capture$/,""),t=o!==e,r=e.toLowerCase().substring(2);n.addEventListener(r,i,t)}else"style"===o&&"string"!=typeof i?t(i,n.style):"dangerouslySetInnerHTML"===o?n.innerHTML=i:!0===i?n.setAttribute(o,o):(i||0===i||""===i)&&n.setAttribute(o,i.toString())}};const e=requireDist$1();function t(e,t){for(const r of Object.keys(e))r in t&&(t[r]=e[r])}const r=/^on\p{Lu}/u;return setAttributes}var utils={},hasRequiredUtils,hasRequiredJsxRuntime;function requireUtils(){if(hasRequiredUtils)return utils;function e(e,t){t instanceof Element?e.appendChild(t):"string"==typeof t||"number"==typeof t?e.appendChild(document.createTextNode(t.toString())):console.warn("Unknown type to append: ",t)}return hasRequiredUtils=1,Object.defineProperty(utils,"__esModule",{value:!0}),utils.applyChildren=function t(r,n){for(const a of n)(a||0===a)&&(Array.isArray(a)?t(r,a):e(r,a))},utils.createDomElement=function(e,t){const r=t?.is?{is:t.is}:void 0;return t?.xmlns?document.createElementNS(t.xmlns,e,r):document.createElement(e,r)},utils.applyTsxTag=function(e,t){let r=e,n=t;n&&"tsxTag"in n&&(r=n.tsxTag,!n.is&&e.includes("-")&&(n={...n,is:e}));return{finalTag:r,finalAttrs:n}},utils}function requireJsxRuntime(){if(hasRequiredJsxRuntime)return jsxRuntime$1;hasRequiredJsxRuntime=1,Object.defineProperty(jsxRuntime$1,"__esModule",{value:!0}),jsxRuntime$1.jsx=r,jsxRuntime$1.jsxs=r,jsxRuntime$1.jsxDEV=r;const e=requireSetAttributes(),t=requireUtils();function r(r,n){if("function"==typeof r)return r(n);const{children:a,...o}=n,{finalTag:i,finalAttrs:s}=(0,t.applyTsxTag)(r,o),l=(0,t.createDomElement)(i,s);return(0,e.setAttributes)(l,s),(0,t.applyChildren)(l,[a]),l}return jsxRuntime$1}var jsxRuntimeExports=requireJsxRuntime(),jsxRuntime=getDefaultExportFromCjs(jsxRuntimeExports),dist={},createElement={},hasRequiredCreateElement;function requireCreateElement(){if(hasRequiredCreateElement)return createElement;hasRequiredCreateElement=1,Object.defineProperty(createElement,"__esModule",{value:!0}),createElement.createRef=createElement.h=void 0,createElement.createElement=r;const e=requireSetAttributes(),t=requireUtils();function r(r,n,...a){if("function"==typeof r)return r({...n,children:a});const{finalTag:o,finalAttrs:i}=(0,t.applyTsxTag)(r,n),s=(0,t.createDomElement)(o,i);return i&&(0,e.setAttributes)(s,i),(0,t.applyChildren)(s,a),s}createElement.h=r;return createElement.createRef=()=>({current:null}),createElement}var defineCustomElement={},hasRequiredDefineCustomElement;function requireDefineCustomElement(){if(hasRequiredDefineCustomElement)return defineCustomElement;hasRequiredDefineCustomElement=1,Object.defineProperty(defineCustomElement,"__esModule",{value:!0}),defineCustomElement.defineCustomElement=function(t,r,n){return customElements.define(t,r,n),r=>(0,e.jsx)(t,r)};const e=requireJsxRuntime();return defineCustomElement}var types={},hasRequiredTypes,hasRequiredDist;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0})),types}function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(e){var t=dist&&dist.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=dist&&dist.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(requireCreateElement(),e),r(requireDefineCustomElement(),e),r(requireJsxRuntime(),e),r(requireTypes(),e)}(dist)),dist}var distExports=requireDist(),index=getDefaultExportFromCjs(distExports),extendStatics=function(e,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},extendStatics(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var __assign=function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},__assign.apply(this,arguments)};function __rest(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}function __decorate(e,t,r,n){var a,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}function __param(e,t){return function(r,n){t(r,n,e)}}function __esDecorate(e,t,r,n,a,o){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var s,l=n.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h=!1,p=r.length-1;p>=0;p--){var f={};for(var g in n)f[g]="access"===g?{}:n[g];for(var g in n.access)f.access[g]=n.access[g];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i(e||null))};var m=(0,r[p])("accessor"===l?{get:d.get,set:d.set}:d[c],f);if("accessor"===l){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(s=i(m.get))&&(d.get=s),(s=i(m.set))&&(d.set=s),(s=i(m.init))&&a.unshift(s)}else(s=i(m))&&("field"===l?a.unshift(s):d[c]=s)}u&&Object.defineProperty(u,n.name,d),h=!0}function __runInitializers(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function __propKey(e){return"symbol"==typeof e?e:"".concat(e)}function __setFunctionName(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,s)}l((n=n.apply(e,t||[])).next())})}function __generator(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}var __createBinding=Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function __exportStar(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||__createBinding(t,e,r)}function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)n[a]=o[i];return n}function __spreadArray(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,a=r.apply(e,t||[]),o=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),n[Symbol.asyncIterator]=function(){return this},n;function i(e,t){a[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||s(e,t)})},t&&(n[e]=t(n[e])))}function s(e,t){try{!function(e){e.value instanceof __await?Promise.resolve(e.value.v).then(l,c):u(o[0][2],e)}(a[e](t))}catch(e){u(o[0][3],e)}}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function __asyncDelegator(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,a){t[n]=e[n]?function(t){return(r=!r)?{value:__await(e[n](t)),done:!1}:a?a(t):t}:a}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,a){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,a,(t=e[r](t)).done,t.value)})}}}function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var __setModuleDefault=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},ownKeys=function(e){return ownKeys=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},ownKeys(e)};function __importStar(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=ownKeys(e),n=0;n<r.length;n++)"default"!==r[n]&&__createBinding(t,e,r[n]);return __setModuleDefault(t,e),t}function __importDefault(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function __classPrivateFieldSet(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r}function __classPrivateFieldIn(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function __addDisposableResource(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var _SuppressedError="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function __disposeResources(e){function t(t){e.error=e.hasError?new _SuppressedError(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,n=0;return function a(){for(;r=e.stack.pop();)try{if(!r.async&&1===n)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(a,function(e){return t(e),a()})}else n|=1}catch(e){t(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function __rewriteRelativeImportExtension(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,n,a,o){return r?t?".jsx":".js":!n||a&&o?n+a+"."+o.toLowerCase()+"js":e}):e}var tslib_es6={__extends:__extends,__assign:__assign,__rest:__rest,__decorate:__decorate,__param:__param,__esDecorate:__esDecorate,__runInitializers:__runInitializers,__propKey:__propKey,__setFunctionName:__setFunctionName,__metadata:__metadata,__awaiter:__awaiter,__generator:__generator,__createBinding:__createBinding,__exportStar:__exportStar,__values:__values,__read:__read,__spread:__spread,__spreadArrays:__spreadArrays,__spreadArray:__spreadArray,__await:__await,__asyncGenerator:__asyncGenerator,__asyncDelegator:__asyncDelegator,__asyncValues:__asyncValues,__makeTemplateObject:__makeTemplateObject,__importStar:__importStar,__importDefault:__importDefault,__classPrivateFieldGet:__classPrivateFieldGet,__classPrivateFieldSet:__classPrivateFieldSet,__classPrivateFieldIn:__classPrivateFieldIn,__addDisposableResource:__addDisposableResource,__disposeResources:__disposeResources,__rewriteRelativeImportExtension:__rewriteRelativeImportExtension},freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root$5=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root$5.Symbol,objectProto$s=Object.prototype,hasOwnProperty$o=objectProto$s.hasOwnProperty,nativeObjectToString$3=objectProto$s.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(e){var t=hasOwnProperty$o.call(e,symToStringTag$1),r=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var n=!0}catch(e){}var a=nativeObjectToString$3.call(e);return n&&(t?e[symToStringTag$1]=r:delete e[symToStringTag$1]),a}var objectProto$r=Object.prototype,nativeObjectToString$2=objectProto$r.toString;function objectToString(e){return nativeObjectToString$2.call(e)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString(e)}function isObjectLike(e){return null!=e&&"object"==typeof e}var symbolTag$3="[object Symbol]";function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&baseGetTag(e)==symbolTag$3}var NAN$2=NaN;function baseToNumber(e){return"number"==typeof e?e:isSymbol(e)?NAN$2:+e}function arrayMap(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var isArray$1=Array.isArray,INFINITY$5=1/0,symbolProto$2=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(isArray$1(e))return arrayMap(e,baseToString)+"";if(isSymbol(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY$5?"-0":t}function createMathOperation(e,t){return function(r,n){var a;if(void 0===r&&void 0===n)return t;if(void 0!==r&&(a=r),void 0!==n){if(void 0===a)return n;"string"==typeof r||"string"==typeof n?(r=baseToString(r),n=baseToString(n)):(r=baseToNumber(r),n=baseToNumber(n)),a=e(r,n)}return a}}var add=createMathOperation(function(e,t){return e+t},0),reWhitespace=/\s/;function trimmedEndIndex(e){for(var t=e.length;t--&&reWhitespace.test(e.charAt(t)););return t}var reTrimStart$2=/^\s+/;function baseTrim(e){return e?e.slice(0,trimmedEndIndex(e)+1).replace(reTrimStart$2,""):e}function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var NAN$1=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return NAN$1;if(isObject(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=baseTrim(e);var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN$1:+e}var INFINITY$4=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(e){return e?(e=toNumber(e))===INFINITY$4||e===-INFINITY$4?(e<0?-1:1)*MAX_INTEGER:e==e?e:0:0===e?e:0}function toInteger(e){var t=toFinite(e),r=t%1;return t==t?r?t-r:t:0}var FUNC_ERROR_TEXT$b="Expected a function";function after(e,t){if("function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT$b);return e=toInteger(e),function(){if(--e<1)return t.apply(this,arguments)}}function identity(e){return e}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(e){if(!isObject(e))return!1;var t=baseGetTag(e);return t==funcTag$2||t==genTag$1||t==asyncTag||t==proxyTag}var coreJsData=root$5["__core-js_shared__"],maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""),uid?"Symbol(src)_1."+uid:""),uid;function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(e){if(null!=e){try{return funcToString$2.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var reRegExpChar$1=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$q=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$n=objectProto$q.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$n).replace(reRegExpChar$1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){return!(!isObject(e)||isMasked(e))&&(isFunction(e)?reIsNative:reIsHostCtor).test(toSource(e))}function getValue(e,t){return null==e?void 0:e[t]}function getNative(e,t){var r=getValue(e,t);return baseIsNative(r)?r:void 0}var WeakMap$1=getNative(root$5,"WeakMap"),metaMap=WeakMap$1&&new WeakMap$1,baseSetData=metaMap?function(e,t){return metaMap.set(e,t),e}:identity,objectCreate=Object.create,baseCreate=function(){function e(){}return function(t){if(!isObject(t))return{};if(objectCreate)return objectCreate(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function createCtor(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=baseCreate(e.prototype),n=e.apply(r,t);return isObject(n)?n:r}}var WRAP_BIND_FLAG$8=1;function createBind(e,t,r){var n=t&WRAP_BIND_FLAG$8,a=createCtor(e);return function t(){return(this&&this!==root$5&&this instanceof t?a:e).apply(n?r:this,arguments)}}function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var nativeMax$g=Math.max;function composeArgs(e,t,r,n){for(var a=-1,o=e.length,i=r.length,s=-1,l=t.length,c=nativeMax$g(o-i,0),u=Array(l+c),d=!n;++s<l;)u[s]=t[s];for(;++a<i;)(d||a<o)&&(u[r[a]]=e[a]);for(;c--;)u[s++]=e[a++];return u}var nativeMax$f=Math.max;function composeArgsRight(e,t,r,n){for(var a=-1,o=e.length,i=-1,s=r.length,l=-1,c=t.length,u=nativeMax$f(o-s,0),d=Array(u+c),h=!n;++a<u;)d[a]=e[a];for(var p=a;++l<c;)d[p+l]=t[l];for(;++i<s;)(h||a<o)&&(d[p+r[i]]=e[a++]);return d}function countHolders(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}function baseLodash(){}var MAX_ARRAY_LENGTH$6=4294967295;function LazyWrapper(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=MAX_ARRAY_LENGTH$6,this.__views__=[]}function noop(){}LazyWrapper.prototype=baseCreate(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper;var getData=metaMap?function(e){return metaMap.get(e)}:noop,realNames={},objectProto$p=Object.prototype,hasOwnProperty$m=objectProto$p.hasOwnProperty;function getFuncName(e){for(var t=e.name+"",r=realNames[t],n=hasOwnProperty$m.call(realNames,t)?r.length:0;n--;){var a=r[n],o=a.func;if(null==o||o==e)return a.name}return t}function LodashWrapper(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function copyArray(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function wrapperClone(e){if(e instanceof LazyWrapper)return e.clone();var t=new LodashWrapper(e.__wrapped__,e.__chain__);return t.__actions__=copyArray(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}LodashWrapper.prototype=baseCreate(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper;var objectProto$o=Object.prototype,hasOwnProperty$l=objectProto$o.hasOwnProperty;function lodash$3(e){if(isObjectLike(e)&&!isArray$1(e)&&!(e instanceof LazyWrapper)){if(e instanceof LodashWrapper)return e;if(hasOwnProperty$l.call(e,"__wrapped__"))return wrapperClone(e)}return new LodashWrapper(e)}function isLaziable(e){var t=getFuncName(e),r=lodash$3[t];if("function"!=typeof r||!(t in LazyWrapper.prototype))return!1;if(e===r)return!0;var n=getData(r);return!!n&&e===n[0]}lodash$3.prototype=baseLodash.prototype,lodash$3.prototype.constructor=lodash$3;var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(e){var t=0,r=0;return function(){var n=nativeNow(),a=HOT_SPAN-(n-r);if(r=n,a>0){if(++t>=HOT_COUNT)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var setData=shortOut(baseSetData),reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /;function getWrapDetails(e){var t=e.match(reWrapDetails);return t?t[1].split(reSplitDetails):[]}var reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function insertWrapDetails(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(reWrapComment,"{\n/* [wrapped with "+t+"] */\n")}function constant(e){return function(){return e}}var defineProperty=function(){try{var e=getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),baseSetToString=defineProperty?function(e,t){return defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:constant(t),writable:!0})}:identity,setToString=shortOut(baseSetToString);function arrayEach(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function baseFindIndex(e,t,r,n){for(var a=e.length,o=r+(n?1:-1);n?o--:++o<a;)if(t(e[o],o,e))return o;return-1}function baseIsNaN(e){return e!=e}function strictIndexOf(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}function baseIndexOf(e,t,r){return t==t?strictIndexOf(e,t,r):baseFindIndex(e,baseIsNaN,r)}function arrayIncludes(e,t){return!!(null==e?0:e.length)&&baseIndexOf(e,t,0)>-1}var WRAP_BIND_FLAG$7=1,WRAP_BIND_KEY_FLAG$6=2,WRAP_CURRY_FLAG$6=8,WRAP_CURRY_RIGHT_FLAG$3=16,WRAP_PARTIAL_FLAG$6=32,WRAP_PARTIAL_RIGHT_FLAG$3=64,WRAP_ARY_FLAG$4=128,WRAP_REARG_FLAG$3=256,WRAP_FLIP_FLAG$2=512,wrapFlags=[["ary",WRAP_ARY_FLAG$4],["bind",WRAP_BIND_FLAG$7],["bindKey",WRAP_BIND_KEY_FLAG$6],["curry",WRAP_CURRY_FLAG$6],["curryRight",WRAP_CURRY_RIGHT_FLAG$3],["flip",WRAP_FLIP_FLAG$2],["partial",WRAP_PARTIAL_FLAG$6],["partialRight",WRAP_PARTIAL_RIGHT_FLAG$3],["rearg",WRAP_REARG_FLAG$3]];function updateWrapDetails(e,t){return arrayEach(wrapFlags,function(r){var n="_."+r[0];t&r[1]&&!arrayIncludes(e,n)&&e.push(n)}),e.sort()}function setWrapToString(e,t,r){var n=t+"";return setToString(e,insertWrapDetails(n,updateWrapDetails(getWrapDetails(n),r)))}var WRAP_BIND_FLAG$6=1,WRAP_BIND_KEY_FLAG$5=2,WRAP_CURRY_BOUND_FLAG$1=4,WRAP_CURRY_FLAG$5=8,WRAP_PARTIAL_FLAG$5=32,WRAP_PARTIAL_RIGHT_FLAG$2=64;function createRecurry(e,t,r,n,a,o,i,s,l,c){var u=t&WRAP_CURRY_FLAG$5;t|=u?WRAP_PARTIAL_FLAG$5:WRAP_PARTIAL_RIGHT_FLAG$2,(t&=~(u?WRAP_PARTIAL_RIGHT_FLAG$2:WRAP_PARTIAL_FLAG$5))&WRAP_CURRY_BOUND_FLAG$1||(t&=~(WRAP_BIND_FLAG$6|WRAP_BIND_KEY_FLAG$5));var d=[e,t,a,u?o:void 0,u?i:void 0,u?void 0:o,u?void 0:i,s,l,c],h=r.apply(void 0,d);return isLaziable(e)&&setData(h,d),h.placeholder=n,setWrapToString(h,e,t)}function getHolder(e){return e.placeholder}var MAX_SAFE_INTEGER$5=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,t){var r=typeof e;return!!(t=null==t?MAX_SAFE_INTEGER$5:t)&&("number"==r||"symbol"!=r&&reIsUint.test(e))&&e>-1&&e%1==0&&e<t}var nativeMin$e=Math.min;function reorder(e,t){for(var r=e.length,n=nativeMin$e(t.length,r),a=copyArray(e);n--;){var o=t[n];e[n]=isIndex(o,r)?a[o]:void 0}return e}var PLACEHOLDER$1="__lodash_placeholder__";function replaceHolders(e,t){for(var r=-1,n=e.length,a=0,o=[];++r<n;){var i=e[r];i!==t&&i!==PLACEHOLDER$1||(e[r]=PLACEHOLDER$1,o[a++]=r)}return o}var WRAP_BIND_FLAG$5=1,WRAP_BIND_KEY_FLAG$4=2,WRAP_CURRY_FLAG$4=8,WRAP_CURRY_RIGHT_FLAG$2=16,WRAP_ARY_FLAG$3=128,WRAP_FLIP_FLAG$1=512;function createHybrid(e,t,r,n,a,o,i,s,l,c){var u=t&WRAP_ARY_FLAG$3,d=t&WRAP_BIND_FLAG$5,h=t&WRAP_BIND_KEY_FLAG$4,p=t&(WRAP_CURRY_FLAG$4|WRAP_CURRY_RIGHT_FLAG$2),f=t&WRAP_FLIP_FLAG$1,g=h?void 0:createCtor(e);return function m(){for(var y=arguments.length,b=Array(y),v=y;v--;)b[v]=arguments[v];if(p)var S=getHolder(m),R=countHolders(b,S);if(n&&(b=composeArgs(b,n,a,p)),o&&(b=composeArgsRight(b,o,i,p)),y-=R,p&&y<c){var _=replaceHolders(b,S);return createRecurry(e,t,createHybrid,m.placeholder,r,b,_,s,l,c-y)}var w=d?r:this,B=h?w[e]:e;return y=b.length,s?b=reorder(b,s):f&&y>1&&b.reverse(),u&&l<y&&(b.length=l),this&&this!==root$5&&this instanceof m&&(B=g||createCtor(B)),B.apply(w,b)}}function createCurry(e,t,r){var n=createCtor(e);return function a(){for(var o=arguments.length,i=Array(o),s=o,l=getHolder(a);s--;)i[s]=arguments[s];var c=o<3&&i[0]!==l&&i[o-1]!==l?[]:replaceHolders(i,l);return(o-=c.length)<r?createRecurry(e,t,createHybrid,a.placeholder,void 0,i,c,void 0,void 0,r-o):apply(this&&this!==root$5&&this instanceof a?n:e,this,i)}}var WRAP_BIND_FLAG$4=1;function createPartial(e,t,r,n){var a=t&WRAP_BIND_FLAG$4,o=createCtor(e);return function t(){for(var i=-1,s=arguments.length,l=-1,c=n.length,u=Array(c+s),d=this&&this!==root$5&&this instanceof t?o:e;++l<c;)u[l]=n[l];for(;s--;)u[l++]=arguments[++i];return apply(d,a?r:this,u)}}var PLACEHOLDER="__lodash_placeholder__",WRAP_BIND_FLAG$3=1,WRAP_BIND_KEY_FLAG$3=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG$3=8,WRAP_ARY_FLAG$2=128,WRAP_REARG_FLAG$2=256,nativeMin$d=Math.min;function mergeData(e,t){var r=e[1],n=t[1],a=r|n,o=a<(WRAP_BIND_FLAG$3|WRAP_BIND_KEY_FLAG$3|WRAP_ARY_FLAG$2),i=n==WRAP_ARY_FLAG$2&&r==WRAP_CURRY_FLAG$3||n==WRAP_ARY_FLAG$2&&r==WRAP_REARG_FLAG$2&&e[7].length<=t[8]||n==(WRAP_ARY_FLAG$2|WRAP_REARG_FLAG$2)&&t[7].length<=t[8]&&r==WRAP_CURRY_FLAG$3;if(!o&&!i)return e;n&WRAP_BIND_FLAG$3&&(e[2]=t[2],a|=r&WRAP_BIND_FLAG$3?0:WRAP_CURRY_BOUND_FLAG);var s=t[3];if(s){var l=e[3];e[3]=l?composeArgs(l,s,t[4]):s,e[4]=l?replaceHolders(e[3],PLACEHOLDER):t[4]}return(s=t[5])&&(l=e[5],e[5]=l?composeArgsRight(l,s,t[6]):s,e[6]=l?replaceHolders(e[5],PLACEHOLDER):t[6]),(s=t[7])&&(e[7]=s),n&WRAP_ARY_FLAG$2&&(e[8]=null==e[8]?t[8]:nativeMin$d(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a,e}var FUNC_ERROR_TEXT$a="Expected a function",WRAP_BIND_FLAG$2=1,WRAP_BIND_KEY_FLAG$2=2,WRAP_CURRY_FLAG$2=8,WRAP_CURRY_RIGHT_FLAG$1=16,WRAP_PARTIAL_FLAG$4=32,WRAP_PARTIAL_RIGHT_FLAG$1=64,nativeMax$e=Math.max;function createWrap(e,t,r,n,a,o,i,s){var l=t&WRAP_BIND_KEY_FLAG$2;if(!l&&"function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$a);var c=n?n.length:0;if(c||(t&=~(WRAP_PARTIAL_FLAG$4|WRAP_PARTIAL_RIGHT_FLAG$1),n=a=void 0),i=void 0===i?i:nativeMax$e(toInteger(i),0),s=void 0===s?s:toInteger(s),c-=a?a.length:0,t&WRAP_PARTIAL_RIGHT_FLAG$1){var u=n,d=a;n=a=void 0}var h=l?void 0:getData(e),p=[e,t,r,n,a,u,d,o,i,s];if(h&&mergeData(p,h),e=p[0],t=p[1],r=p[2],n=p[3],a=p[4],!(s=p[9]=void 0===p[9]?l?0:e.length:nativeMax$e(p[9]-c,0))&&t&(WRAP_CURRY_FLAG$2|WRAP_CURRY_RIGHT_FLAG$1)&&(t&=~(WRAP_CURRY_FLAG$2|WRAP_CURRY_RIGHT_FLAG$1)),t&&t!=WRAP_BIND_FLAG$2)f=t==WRAP_CURRY_FLAG$2||t==WRAP_CURRY_RIGHT_FLAG$1?createCurry(e,t,s):t!=WRAP_PARTIAL_FLAG$4&&t!=(WRAP_BIND_FLAG$2|WRAP_PARTIAL_FLAG$4)||a.length?createHybrid.apply(void 0,p):createPartial(e,t,r,n);else var f=createBind(e,t,r);return setWrapToString((h?baseSetData:setData)(f,p),e,t)}var WRAP_ARY_FLAG$1=128;function ary(e,t,r){return t=r?void 0:t,t=e&&null==t?e.length:t,createWrap(e,WRAP_ARY_FLAG$1,void 0,void 0,void 0,void 0,t)}function baseAssignValue(e,t,r){"__proto__"==t&&defineProperty?defineProperty(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function eq(e,t){return e===t||e!=e&&t!=t}var objectProto$n=Object.prototype,hasOwnProperty$k=objectProto$n.hasOwnProperty;function assignValue(e,t,r){var n=e[t];hasOwnProperty$k.call(e,t)&&eq(n,r)&&(void 0!==r||t in e)||baseAssignValue(e,t,r)}function copyObject(e,t,r,n){var a=!r;r||(r={});for(var o=-1,i=t.length;++o<i;){var s=t[o],l=n?n(r[s],e[s],s,r,e):void 0;void 0===l&&(l=e[s]),a?baseAssignValue(r,s,l):assignValue(r,s,l)}return r}var nativeMax$d=Math.max;function overRest(e,t,r){return t=nativeMax$d(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,o=nativeMax$d(n.length-t,0),i=Array(o);++a<o;)i[a]=n[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=n[a];return s[t]=r(i),apply(e,this,s)}}function baseRest(e,t){return setToString(overRest(e,t,identity),e+"")}var MAX_SAFE_INTEGER$4=9007199254740991;function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER$4}function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isIterateeCall(e,t,r){if(!isObject(r))return!1;var n=typeof t;return!!("number"==n?isArrayLike(r)&&isIndex(t,r.length):"string"==n&&t in r)&&eq(r[t],e)}function createAssigner(e){return baseRest(function(t,r){var n=-1,a=r.length,o=a>1?r[a-1]:void 0,i=a>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(a--,o):void 0,i&&isIterateeCall(r[0],r[1],i)&&(o=a<3?void 0:o,a=1),t=Object(t);++n<a;){var s=r[n];s&&e(t,s,n,o)}return t})}var objectProto$m=Object.prototype;function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$m)}function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var argsTag$3="[object Arguments]";function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==argsTag$3}var objectProto$l=Object.prototype,hasOwnProperty$j=objectProto$l.hasOwnProperty,propertyIsEnumerable$1=objectProto$l.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&hasOwnProperty$j.call(e,"callee")&&!propertyIsEnumerable$1.call(e,"callee")};function stubFalse(){return!1}var freeExports$2="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$1=moduleExports$2?root$5.Buffer:void 0,nativeIsBuffer=Buffer$1?Buffer$1.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$4="[object Boolean]",dateTag$4="[object Date]",errorTag$3="[object Error]",funcTag$1="[object Function]",mapTag$9="[object Map]",numberTag$4="[object Number]",objectTag$4="[object Object]",regexpTag$4="[object RegExp]",setTag$9="[object Set]",stringTag$4="[object String]",weakMapTag$3="[object WeakMap]",arrayBufferTag$4="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[baseGetTag(e)]}function baseUnary(e){return function(t){return e(t)}}typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0,typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$4]=typedArrayTags[boolTag$4]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$4]=typedArrayTags[errorTag$3]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$9]=typedArrayTags[numberTag$4]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$4]=typedArrayTags[setTag$9]=typedArrayTags[stringTag$4]=typedArrayTags[weakMapTag$3]=!1;var freeExports$1="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{var e=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return e||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$k=Object.prototype,hasOwnProperty$i=objectProto$k.hasOwnProperty;function arrayLikeKeys(e,t){var r=isArray$1(e),n=!r&&isArguments(e),a=!r&&!n&&isBuffer(e),o=!r&&!n&&!a&&isTypedArray(e),i=r||n||a||o,s=i?baseTimes(e.length,String):[],l=s.length;for(var c in e)!t&&!hasOwnProperty$i.call(e,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||isIndex(c,l))||s.push(c);return s}function overArg(e,t){return function(r){return e(t(r))}}var nativeKeys=overArg(Object.keys,Object),objectProto$j=Object.prototype,hasOwnProperty$h=objectProto$j.hasOwnProperty;function baseKeys(e){if(!isPrototype(e))return nativeKeys(e);var t=[];for(var r in Object(e))hasOwnProperty$h.call(e,r)&&"constructor"!=r&&t.push(r);return t}function keys$1(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}var objectProto$i=Object.prototype,hasOwnProperty$g=objectProto$i.hasOwnProperty,assign=createAssigner(function(e,t){if(isPrototype(t)||isArrayLike(t))copyObject(t,keys$1(t),e);else for(var r in t)hasOwnProperty$g.call(t,r)&&assignValue(e,r,t[r])});function nativeKeysIn(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}var objectProto$h=Object.prototype,hasOwnProperty$f=objectProto$h.hasOwnProperty;function baseKeysIn(e){if(!isObject(e))return nativeKeysIn(e);var t=isPrototype(e),r=[];for(var n in e)("constructor"!=n||!t&&hasOwnProperty$f.call(e,n))&&r.push(n);return r}function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var assignIn=createAssigner(function(e,t){copyObject(t,keysIn(t),e)}),assignInWith=createAssigner(function(e,t,r,n){copyObject(t,keysIn(t),e,n)}),assignWith=createAssigner(function(e,t,r,n){copyObject(t,keys$1(t),e,n)}),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,t){if(isArray$1(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol(e))||(reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t))}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$g=Object.prototype,hasOwnProperty$e=objectProto$g.hasOwnProperty;function hashGet(e){var t=this.__data__;if(nativeCreate){var r=t[e];return r===HASH_UNDEFINED$2?void 0:r}return hasOwnProperty$e.call(t,e)?t[e]:void 0}var objectProto$f=Object.prototype,hasOwnProperty$d=objectProto$f.hasOwnProperty;function hashHas(e){var t=this.__data__;return nativeCreate?void 0!==t[e]:hasOwnProperty$d.call(t,e)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=nativeCreate&&void 0===t?HASH_UNDEFINED$1:t,this}function Hash(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq(e[r][0],t))return r;return-1}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet;var arrayProto$5=Array.prototype,splice$2=arrayProto$5.splice;function listCacheDelete(e){var t=this.__data__,r=assocIndexOf(t,e);return!(r<0)&&(r==t.length-1?t.pop():splice$2.call(t,r,1),--this.size,!0)}function listCacheGet(e){var t=this.__data__,r=assocIndexOf(t,e);return r<0?void 0:t[r][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,t){var r=this.__data__,n=assocIndexOf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function ListCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$5,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function getMapData(e,t){var r=e.__data__;return isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}function mapCacheDelete(e){var t=getMapData(this,e).delete(e);return this.size-=t?1:0,t}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,t){var r=getMapData(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function MapCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$9="Expected a function";function memoize(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT$9);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var i=e.apply(this,n);return r.cache=o.set(a,i)||o,i};return r.cache=new(memoize.Cache||MapCache),r}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var t=memoize(e,function(e){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),e}),r=t.cache;return t}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rePropName,function(e,r,n,a){t.push(n?a.replace(reEscapeChar,"$1"):r||e)}),t});function toString(e){return null==e?"":baseToString(e)}function castPath(e,t){return isArray$1(e)?e:isKey(e,t)?[e]:stringToPath(toString(e))}var INFINITY$3=1/0;function toKey(e){if("string"==typeof e||isSymbol(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY$3?"-0":t}function baseGet(e,t){for(var r=0,n=(t=castPath(t,e)).length;null!=e&&r<n;)e=e[toKey(t[r++])];return r&&r==n?e:void 0}function get(e,t,r){var n=null==e?void 0:baseGet(e,t);return void 0===n?r:n}function baseAt(e,t){for(var r=-1,n=t.length,a=Array(n),o=null==e;++r<n;)a[r]=o?void 0:get(e,t[r]);return a}function arrayPush(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var spreadableSymbol=Symbol$1?Symbol$1.isConcatSpreadable:void 0;function isFlattenable(e){return isArray$1(e)||isArguments(e)||!!(spreadableSymbol&&e&&e[spreadableSymbol])}function baseFlatten(e,t,r,n,a){var o=-1,i=e.length;for(r||(r=isFlattenable),a||(a=[]);++o<i;){var s=e[o];t>0&&r(s)?t>1?baseFlatten(s,t-1,r,n,a):arrayPush(a,s):n||(a[a.length]=s)}return a}function flatten(e){return(null==e?0:e.length)?baseFlatten(e,1):[]}function flatRest(e){return setToString(overRest(e,void 0,flatten),e+"")}var at$1=flatRest(baseAt),getPrototype=overArg(Object.getPrototypeOf,Object),objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$e=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$c=objectProto$e.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(e){if(!isObjectLike(e)||baseGetTag(e)!=objectTag$3)return!1;var t=getPrototype(e);if(null===t)return!0;var r=hasOwnProperty$c.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&funcToString.call(r)==objectCtorString}var domExcTag="[object DOMException]",errorTag$2="[object Error]";function isError(e){if(!isObjectLike(e))return!1;var t=baseGetTag(e);return t==errorTag$2||t==domExcTag||"string"==typeof e.message&&"string"==typeof e.name&&!isPlainObject(e)}var attempt=baseRest(function(e,t){try{return apply(e,void 0,t)}catch(e){return isError(e)?e:new Error(e)}}),FUNC_ERROR_TEXT$8="Expected a function";function before(e,t){var r;if("function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT$8);return e=toInteger(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}}var WRAP_BIND_FLAG$1=1,WRAP_PARTIAL_FLAG$3=32,bind=baseRest(function(e,t,r){var n=WRAP_BIND_FLAG$1;if(r.length){var a=replaceHolders(r,getHolder(bind));n|=WRAP_PARTIAL_FLAG$3}return createWrap(e,n,t,r,a)});bind.placeholder={};var bindAll=flatRest(function(e,t){return arrayEach(t,function(t){t=toKey(t),baseAssignValue(e,t,bind(e[t],e))}),e}),WRAP_BIND_FLAG=1,WRAP_BIND_KEY_FLAG$1=2,WRAP_PARTIAL_FLAG$2=32,bindKey=baseRest(function(e,t,r){var n=WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG$1;if(r.length){var a=replaceHolders(r,getHolder(bindKey));n|=WRAP_PARTIAL_FLAG$2}return createWrap(t,n,e,r,a)});function baseSlice(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(a);++n<a;)o[n]=e[n+t];return o}function castSlice(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:baseSlice(e,t,r)}bindKey.placeholder={};var rsAstralRange$3="\\ud800-\\udfff",rsComboMarksRange$4="\\u0300-\\u036f",reComboHalfMarksRange$4="\\ufe20-\\ufe2f",rsComboSymbolsRange$4="\\u20d0-\\u20ff",rsComboRange$4=rsComboMarksRange$4+reComboHalfMarksRange$4+rsComboSymbolsRange$4,rsVarRange$3="\\ufe0e\\ufe0f",rsZWJ$3="\\u200d",reHasUnicode=RegExp("["+rsZWJ$3+rsAstralRange$3+rsComboRange$4+rsVarRange$3+"]");function hasUnicode(e){return reHasUnicode.test(e)}function asciiToArray(e){return e.split("")}var rsAstralRange$2="\\ud800-\\udfff",rsComboMarksRange$3="\\u0300-\\u036f",reComboHalfMarksRange$3="\\ufe20-\\ufe2f",rsComboSymbolsRange$3="\\u20d0-\\u20ff",rsComboRange$3=rsComboMarksRange$3+reComboHalfMarksRange$3+rsComboSymbolsRange$3,rsVarRange$2="\\ufe0e\\ufe0f",rsAstral$1="["+rsAstralRange$2+"]",rsCombo$3="["+rsComboRange$3+"]",rsFitz$2="\\ud83c[\\udffb-\\udfff]",rsModifier$2="(?:"+rsCombo$3+"|"+rsFitz$2+")",rsNonAstral$2="[^"+rsAstralRange$2+"]",rsRegional$2="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$2="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$2="\\u200d",reOptMod$2=rsModifier$2+"?",rsOptVar$2="["+rsVarRange$2+"]?",rsOptJoin$2="(?:"+rsZWJ$2+"(?:"+[rsNonAstral$2,rsRegional$2,rsSurrPair$2].join("|")+")"+rsOptVar$2+reOptMod$2+")*",rsSeq$2=rsOptVar$2+reOptMod$2+rsOptJoin$2,rsSymbol$1="(?:"+[rsNonAstral$2+rsCombo$3+"?",rsCombo$3,rsRegional$2,rsSurrPair$2,rsAstral$1].join("|")+")",reUnicode$1=RegExp(rsFitz$2+"(?="+rsFitz$2+")|"+rsSymbol$1+rsSeq$2,"g");function unicodeToArray(e){return e.match(reUnicode$1)||[]}function stringToArray(e){return hasUnicode(e)?unicodeToArray(e):asciiToArray(e)}function createCaseFirst(e){return function(t){var r=hasUnicode(t=toString(t))?stringToArray(t):void 0,n=r?r[0]:t.charAt(0),a=r?castSlice(r,1).join(""):t.slice(1);return n[e]()+a}}var upperFirst=createCaseFirst("toUpperCase");function capitalize(e){return upperFirst(toString(e).toLowerCase())}function arrayReduce(e,t,r,n){var a=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++a]);++a<o;)r=t(r,e[a],a,e);return r}function basePropertyOf(e){return function(t){return null==e?void 0:e[t]}}var deburredLetters={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},deburrLetter=basePropertyOf(deburredLetters),reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rsComboMarksRange$2="\\u0300-\\u036f",reComboHalfMarksRange$2="\\ufe20-\\ufe2f",rsComboSymbolsRange$2="\\u20d0-\\u20ff",rsComboRange$2=rsComboMarksRange$2+reComboHalfMarksRange$2+rsComboSymbolsRange$2,rsCombo$2="["+rsComboRange$2+"]",reComboMark=RegExp(rsCombo$2,"g");function deburr(e){return(e=toString(e))&&e.replace(reLatin,deburrLetter).replace(reComboMark,"")}var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function asciiWords(e){return e.match(reAsciiWord)||[]}var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function hasUnicodeWord(e){return reHasUnicodeWord.test(e)}var rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange$1="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos$1="[']",rsBreak="["+rsBreakRange+"]",rsCombo$1="["+rsComboRange$1+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange$1+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsModifier$1="(?:"+rsCombo$1+"|"+rsFitz$1+")",rsNonAstral$1="[^"+rsAstralRange$1+"]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ$1="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos$1+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos$1+"(?:D|LL|M|RE|S|T|VE))?",reOptMod$1=rsModifier$1+"?",rsOptVar$1="["+rsVarRange$1+"]?",rsOptJoin$1="(?:"+rsZWJ$1+"(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")"+rsOptVar$1+reOptMod$1+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq$1=rsOptVar$1+reOptMod$1+rsOptJoin$1,rsEmoji="(?:"+[rsDingbat,rsRegional$1,rsSurrPair$1].join("|")+")"+rsSeq$1,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");function unicodeWords(e){return e.match(reUnicodeWord)||[]}function words(e,t,r){return e=toString(e),void 0===(t=r?void 0:t)?hasUnicodeWord(e)?unicodeWords(e):asciiWords(e):e.match(t)||[]}var rsApos="[']",reApos=RegExp(rsApos,"g");function createCompounder(e){return function(t){return arrayReduce(words(deburr(t).replace(reApos,"")),e,"")}}var camelCase=createCompounder(function(e,t,r){return t=t.toLowerCase(),e+(r?capitalize(t):t)});function castArray(){if(!arguments.length)return[];var e=arguments[0];return isArray$1(e)?e:[e]}var nativeIsFinite$1=root$5.isFinite,nativeMin$c=Math.min;function createRound(e){var t=Math[e];return function(e,r){if(e=toNumber(e),(r=null==r?0:nativeMin$c(toInteger(r),292))&&nativeIsFinite$1(e)){var n=(toString(e)+"e").split("e");return+((n=(toString(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var ceil=createRound("ceil");function chain(e){var t=lodash$3(e);return t.__chain__=!0,t}var nativeCeil$3=Math.ceil,nativeMax$c=Math.max;function chunk(e,t,r){t=(r?isIterateeCall(e,t,r):void 0===t)?1:nativeMax$c(toInteger(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var a=0,o=0,i=Array(nativeCeil$3(n/t));a<n;)i[o++]=baseSlice(e,a,a+=t);return i}function baseClamp(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}function clamp(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=toNumber(r))==r?r:0),void 0!==t&&(t=(t=toNumber(t))==t?t:0),baseClamp(toNumber(e),t,r)}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}var LARGE_ARRAY_SIZE$2=200;function stackSet(e,t){var r=this.__data__;if(r instanceof ListCache){var n=r.__data__;if(!Map$1||n.length<LARGE_ARRAY_SIZE$2-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new MapCache(n)}return r.set(e,t),this.size=r.size,this}function Stack(e){var t=this.__data__=new ListCache(e);this.size=t.size}function baseAssign(e,t){return e&&copyObject(t,keys$1(t),e)}function baseAssignIn(e,t){return e&&copyObject(t,keysIn(t),e)}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root$5.Buffer:void 0,allocUnsafe=Buffer?Buffer.allocUnsafe:void 0;function cloneBuffer(e,t){if(t)return e.slice();var r=e.length,n=allocUnsafe?allocUnsafe(r):new e.constructor(r);return e.copy(n),n}function arrayFilter(e,t){for(var r=-1,n=null==e?0:e.length,a=0,o=[];++r<n;){var i=e[r];t(i,r,e)&&(o[a++]=i)}return o}function stubArray(){return[]}var objectProto$d=Object.prototype,propertyIsEnumerable=objectProto$d.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(e){return null==e?[]:(e=Object(e),arrayFilter(nativeGetSymbols$1(e),function(t){return propertyIsEnumerable.call(e,t)}))}:stubArray;function copySymbols(e,t){return copyObject(e,getSymbols(e),t)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(e){for(var t=[];e;)arrayPush(t,getSymbols(e)),e=getPrototype(e);return t}:stubArray;function copySymbolsIn(e,t){return copyObject(e,getSymbolsIn(e),t)}function baseGetAllKeys(e,t,r){var n=t(e);return isArray$1(e)?n:arrayPush(n,r(e))}function getAllKeys(e){return baseGetAllKeys(e,keys$1,getSymbols)}function getAllKeysIn(e){return baseGetAllKeys(e,keysIn,getSymbolsIn)}var DataView$1=getNative(root$5,"DataView"),Promise$1=getNative(root$5,"Promise"),Set$1=getNative(root$5,"Set"),mapTag$8="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$8="[object Set]",weakMapTag$2="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$3||Map$1&&getTag(new Map$1)!=mapTag$8||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag$8||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag$2)&&(getTag=function(e){var t=baseGetTag(e),r=t==objectTag$2?e.constructor:void 0,n=r?toSource(r):"";if(n)switch(n){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$8;case promiseCtorString:return promiseTag;case setCtorString:return setTag$8;case weakMapCtorString:return weakMapTag$2}return t});var getTag$1=getTag,objectProto$c=Object.prototype,hasOwnProperty$b=objectProto$c.hasOwnProperty;function initCloneArray(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&hasOwnProperty$b.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Uint8Array$1=root$5.Uint8Array;function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new Uint8Array$1(t).set(new Uint8Array$1(e)),t}function cloneDataView(e,t){var r=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var reFlags$1=/\w*$/;function cloneRegExp(e){var t=new e.constructor(e.source,reFlags$1.exec(e));return t.lastIndex=e.lastIndex,t}var symbolProto$1=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(e){return symbolValueOf$1?Object(symbolValueOf$1.call(e)):{}}function cloneTypedArray(e,t){var r=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var boolTag$3="[object Boolean]",dateTag$3="[object Date]",mapTag$7="[object Map]",numberTag$3="[object Number]",regexpTag$3="[object RegExp]",setTag$7="[object Set]",stringTag$3="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(e,t,r){var n=e.constructor;switch(t){case arrayBufferTag$3:return cloneArrayBuffer(e);case boolTag$3:case dateTag$3:return new n(+e);case dataViewTag$2:return cloneDataView(e,r);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(e,r);case mapTag$7:return new n;case numberTag$3:case stringTag$3:return new n(e);case regexpTag$3:return cloneRegExp(e);case setTag$7:return new n;case symbolTag$2:return cloneSymbol(e)}}function initCloneObject(e){return"function"!=typeof e.constructor||isPrototype(e)?{}:baseCreate(getPrototype(e))}var mapTag$6="[object Map]";function baseIsMap(e){return isObjectLike(e)&&getTag$1(e)==mapTag$6}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$6="[object Set]";function baseIsSet(e){return isObjectLike(e)&&getTag$1(e)==setTag$6}var nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG$7=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$5=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$5="[object Map]",numberTag$2="[object Number]",objectTag$1="[object Object]",regexpTag$2="[object RegExp]",setTag$5="[object Set]",stringTag$2="[object String]",symbolTag$1="[object Symbol]",weakMapTag$1="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};function baseClone(e,t,r,n,a,o){var i,s=t&CLONE_DEEP_FLAG$7,l=t&CLONE_FLAT_FLAG$1,c=t&CLONE_SYMBOLS_FLAG$5;if(r&&(i=a?r(e,n,a,o):r(e)),void 0!==i)return i;if(!isObject(e))return e;var u=isArray$1(e);if(u){if(i=initCloneArray(e),!s)return copyArray(e,i)}else{var d=getTag$1(e),h=d==funcTag||d==genTag;if(isBuffer(e))return cloneBuffer(e,s);if(d==objectTag$1||d==argsTag$1||h&&!a){if(i=l||h?{}:initCloneObject(e),!s)return l?copySymbolsIn(e,baseAssignIn(i,e)):copySymbols(e,baseAssign(i,e))}else{if(!cloneableTags[d])return a?e:{};i=initCloneByTag(e,d,s)}}o||(o=new Stack);var p=o.get(e);if(p)return p;o.set(e,i),isSet(e)?e.forEach(function(n){i.add(baseClone(n,t,r,n,e,o))}):isMap(e)&&e.forEach(function(n,a){i.set(a,baseClone(n,t,r,a,e,o))});var f=u?void 0:(c?l?getAllKeysIn:getAllKeys:l?keysIn:keys$1)(e);return arrayEach(f||e,function(n,a){f&&(n=e[a=n]),assignValue(i,a,baseClone(n,t,r,a,e,o))}),i}cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$2]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$2]=cloneableTags[dateTag$2]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$5]=cloneableTags[numberTag$2]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$2]=cloneableTags[setTag$5]=cloneableTags[stringTag$2]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag$1]=!1;var CLONE_SYMBOLS_FLAG$4=4;function clone(e){return baseClone(e,CLONE_SYMBOLS_FLAG$4)}var CLONE_DEEP_FLAG$6=1,CLONE_SYMBOLS_FLAG$3=4;function cloneDeep(e){return baseClone(e,CLONE_DEEP_FLAG$6|CLONE_SYMBOLS_FLAG$3)}var CLONE_DEEP_FLAG$5=1,CLONE_SYMBOLS_FLAG$2=4;function cloneDeepWith(e,t){return baseClone(e,CLONE_DEEP_FLAG$5|CLONE_SYMBOLS_FLAG$2,t="function"==typeof t?t:void 0)}var CLONE_SYMBOLS_FLAG$1=4;function cloneWith(e,t){return baseClone(e,CLONE_SYMBOLS_FLAG$1,t="function"==typeof t?t:void 0)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}function compact(e){for(var t=-1,r=null==e?0:e.length,n=0,a=[];++t<r;){var o=e[t];o&&(a[n++]=o)}return a}function concat(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return arrayPush(isArray$1(r)?copyArray(r):[r],baseFlatten(t,1))}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED),this}function setCacheHas(e){return this.__data__.has(e)}function SetCache(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new MapCache;++t<r;)this.add(e[t])}function arraySome(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function cacheHas(e,t){return e.has(t)}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas;var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(e,t,r,n,a,o){var i=r&COMPARE_PARTIAL_FLAG$5,s=e.length,l=t.length;if(s!=l&&!(i&&l>s))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,p=r&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var f=e[d],g=t[d];if(n)var m=i?n(g,f,d,t,e,o):n(f,g,d,e,t,o);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!arraySome(t,function(e,t){if(!cacheHas(p,t)&&(f===e||a(f,e,r,n,o)))return p.push(t)})){h=!1;break}}else if(f!==g&&!a(f,g,r,n,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function mapToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function setToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag="[object Error]",mapTag$4="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$4="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(e,t,r,n,a,o,i){switch(r){case dataViewTag:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case arrayBufferTag$1:return!(e.byteLength!=t.byteLength||!o(new Uint8Array$1(e),new Uint8Array$1(t)));case boolTag$1:case dateTag$1:case numberTag$1:return eq(+e,+t);case errorTag:return e.name==t.name&&e.message==t.message;case regexpTag$1:case stringTag$1:return e==t+"";case mapTag$4:var s=mapToArray;case setTag$4:var l=n&COMPARE_PARTIAL_FLAG$4;if(s||(s=setToArray),e.size!=t.size&&!l)return!1;var c=i.get(e);if(c)return c==t;n|=COMPARE_UNORDERED_FLAG$2,i.set(e,t);var u=equalArrays(s(e),s(t),n,a,o,i);return i.delete(e),u;case symbolTag:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(t)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$b=Object.prototype,hasOwnProperty$a=objectProto$b.hasOwnProperty;function equalObjects(e,t,r,n,a,o){var i=r&COMPARE_PARTIAL_FLAG$3,s=getAllKeys(e),l=s.length;if(l!=getAllKeys(t).length&&!i)return!1;for(var c=l;c--;){var u=s[c];if(!(i?u in t:hasOwnProperty$a.call(t,u)))return!1}var d=o.get(e),h=o.get(t);if(d&&h)return d==t&&h==e;var p=!0;o.set(e,t),o.set(t,e);for(var f=i;++c<l;){var g=e[u=s[c]],m=t[u];if(n)var y=i?n(m,g,u,t,e,o):n(g,m,u,e,t,o);if(!(void 0===y?g===m||a(g,m,r,n,o):y)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var b=e.constructor,v=t.constructor;b==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof v&&v instanceof v||(p=!1)}return o.delete(e),o.delete(t),p}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto$a=Object.prototype,hasOwnProperty$9=objectProto$a.hasOwnProperty;function baseIsEqualDeep(e,t,r,n,a,o){var i=isArray$1(e),s=isArray$1(t),l=i?arrayTag:getTag$1(e),c=s?arrayTag:getTag$1(t),u=(l=l==argsTag?objectTag:l)==objectTag,d=(c=c==argsTag?objectTag:c)==objectTag,h=l==c;if(h&&isBuffer(e)){if(!isBuffer(t))return!1;i=!0,u=!1}if(h&&!u)return o||(o=new Stack),i||isTypedArray(e)?equalArrays(e,t,r,n,a,o):equalByTag(e,t,l,r,n,a,o);if(!(r&COMPARE_PARTIAL_FLAG$2)){var p=u&&hasOwnProperty$9.call(e,"__wrapped__"),f=d&&hasOwnProperty$9.call(t,"__wrapped__");if(p||f){var g=p?e.value():e,m=f?t.value():t;return o||(o=new Stack),a(g,m,r,n,o)}}return!!h&&(o||(o=new Stack),equalObjects(e,t,r,n,a,o))}function baseIsEqual(e,t,r,n,a){return e===t||(null==e||null==t||!isObjectLike(e)&&!isObjectLike(t)?e!=e&&t!=t:baseIsEqualDeep(e,t,r,n,baseIsEqual,a))}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(e,t,r,n){var a=r.length,o=a,i=!n;if(null==e)return!o;for(e=Object(e);a--;){var s=r[a];if(i&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<o;){var l=(s=r[a])[0],c=e[l],u=s[1];if(i&&s[2]){if(void 0===c&&!(l in e))return!1}else{var d=new Stack;if(n)var h=n(c,u,l,e,t,d);if(!(void 0===h?baseIsEqual(u,c,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,n,d):h))return!1}}return!0}function isStrictComparable(e){return e==e&&!isObject(e)}function getMatchData(e){for(var t=keys$1(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,isStrictComparable(a)]}return t}function matchesStrictComparable(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}function baseMatches(e){var t=getMatchData(e);return 1==t.length&&t[0][2]?matchesStrictComparable(t[0][0],t[0][1]):function(r){return r===e||baseIsMatch(r,e,t)}}function baseHasIn(e,t){return null!=e&&t in Object(e)}function hasPath(e,t,r){for(var n=-1,a=(t=castPath(t,e)).length,o=!1;++n<a;){var i=toKey(t[n]);if(!(o=null!=e&&r(e,i)))break;e=e[i]}return o||++n!=a?o:!!(a=null==e?0:e.length)&&isLength(a)&&isIndex(i,a)&&(isArray$1(e)||isArguments(e))}function hasIn(e,t){return null!=e&&hasPath(e,t,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(e,t){return isKey(e)&&isStrictComparable(t)?matchesStrictComparable(toKey(e),t):function(r){var n=get(r,e);return void 0===n&&n===t?hasIn(r,e):baseIsEqual(t,n,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function basePropertyDeep(e){return function(t){return baseGet(t,e)}}function property(e){return isKey(e)?baseProperty(toKey(e)):basePropertyDeep(e)}function baseIteratee(e){return"function"==typeof e?e:null==e?identity:"object"==typeof e?isArray$1(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e):property(e)}var FUNC_ERROR_TEXT$7="Expected a function";function cond(e){var t=null==e?0:e.length,r=baseIteratee;return e=t?arrayMap(e,function(e){if("function"!=typeof e[1])throw new TypeError(FUNC_ERROR_TEXT$7);return[r(e[0]),e[1]]}):[],baseRest(function(r){for(var n=-1;++n<t;){var a=e[n];if(apply(a[0],this,r))return apply(a[1],this,r)}})}function baseConformsTo(e,t,r){var n=r.length;if(null==e)return!n;for(e=Object(e);n--;){var a=r[n],o=t[a],i=e[a];if(void 0===i&&!(a in e)||!o(i))return!1}return!0}function baseConforms(e){var t=keys$1(e);return function(r){return baseConformsTo(r,e,t)}}var CLONE_DEEP_FLAG$4=1;function conforms(e){return baseConforms(baseClone(e,CLONE_DEEP_FLAG$4))}function conformsTo(e,t){return null==t||baseConformsTo(e,t,keys$1(t))}function arrayAggregator(e,t,r,n){for(var a=-1,o=null==e?0:e.length;++a<o;){var i=e[a];t(n,i,r(i),e)}return n}function createBaseFor(e){return function(t,r,n){for(var a=-1,o=Object(t),i=n(t),s=i.length;s--;){var l=i[e?s:++a];if(!1===r(o[l],l,o))break}return t}}var baseFor=createBaseFor();function baseForOwn(e,t){return e&&baseFor(e,t,keys$1)}function createBaseEach(e,t){return function(r,n){if(null==r)return r;if(!isArrayLike(r))return e(r,n);for(var a=r.length,o=t?a:-1,i=Object(r);(t?o--:++o<a)&&!1!==n(i[o],o,i););return r}}var baseEach=createBaseEach(baseForOwn);function baseAggregator(e,t,r,n){return baseEach(e,function(e,a,o){t(n,e,r(e),o)}),n}function createAggregator(e,t){return function(r,n){var a=isArray$1(r)?arrayAggregator:baseAggregator,o=t?t():{};return a(r,e,baseIteratee(n,2),o)}}var objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty,countBy=createAggregator(function(e,t,r){hasOwnProperty$8.call(e,r)?++e[r]:baseAssignValue(e,r,1)});function create(e,t){var r=baseCreate(e);return null==t?r:baseAssign(r,t)}var WRAP_CURRY_FLAG$1=8;function curry(e,t,r){var n=createWrap(e,WRAP_CURRY_FLAG$1,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=curry.placeholder,n}curry.placeholder={};var WRAP_CURRY_RIGHT_FLAG=16;function curryRight(e,t,r){var n=createWrap(e,WRAP_CURRY_RIGHT_FLAG,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=curryRight.placeholder,n}curryRight.placeholder={};var now=function(){return root$5.Date.now()},FUNC_ERROR_TEXT$6="Expected a function",nativeMax$b=Math.max,nativeMin$b=Math.min;function debounce(e,t,r){var n,a,o,i,s,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$6);function p(t){var r=n,o=a;return n=a=void 0,c=t,i=e.apply(o,r)}function f(e){var r=e-l;return void 0===l||r>=t||r<0||d&&e-c>=o}function g(){var e=now();if(f(e))return m(e);s=setTimeout(g,function(e){var r=t-(e-l);return d?nativeMin$b(r,o-(e-c)):r}(e))}function m(e){return s=void 0,h&&n?p(e):(n=a=void 0,i)}function y(){var e=now(),r=f(e);if(n=arguments,a=this,l=e,r){if(void 0===s)return function(e){return c=e,s=setTimeout(g,t),u?p(e):i}(l);if(d)return clearTimeout(s),s=setTimeout(g,t),p(l)}return void 0===s&&(s=setTimeout(g,t)),i}return t=toNumber(t)||0,isObject(r)&&(u=!!r.leading,o=(d="maxWait"in r)?nativeMax$b(toNumber(r.maxWait)||0,t):o,h="trailing"in r?!!r.trailing:h),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,n=l=a=s=void 0},y.flush=function(){return void 0===s?i:m(now())},y}function defaultTo(e,t){return null==e||e!=e?t:e}var objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty,defaults=baseRest(function(e,t){e=Object(e);var r=-1,n=t.length,a=n>2?t[2]:void 0;for(a&&isIterateeCall(t[0],t[1],a)&&(n=1);++r<n;)for(var o=t[r],i=keysIn(o),s=-1,l=i.length;++s<l;){var c=i[s],u=e[c];(void 0===u||eq(u,objectProto$8[c])&&!hasOwnProperty$7.call(e,c))&&(e[c]=o[c])}return e});function assignMergeValue(e,t,r){(void 0!==r&&!eq(e[t],r)||void 0===r&&!(t in e))&&baseAssignValue(e,t,r)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function safeGet(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function toPlainObject(e){return copyObject(e,keysIn(e))}function baseMergeDeep(e,t,r,n,a,o,i){var s=safeGet(e,r),l=safeGet(t,r),c=i.get(l);if(c)assignMergeValue(e,r,c);else{var u=o?o(s,l,r+"",e,t,i):void 0,d=void 0===u;if(d){var h=isArray$1(l),p=!h&&isBuffer(l),f=!h&&!p&&isTypedArray(l);u=l,h||p||f?isArray$1(s)?u=s:isArrayLikeObject(s)?u=copyArray(s):p?(d=!1,u=cloneBuffer(l,!0)):f?(d=!1,u=cloneTypedArray(l,!0)):u=[]:isPlainObject(l)||isArguments(l)?(u=s,isArguments(s)?u=toPlainObject(s):isObject(s)&&!isFunction(s)||(u=initCloneObject(l))):d=!1}d&&(i.set(l,u),a(u,l,n,o,i),i.delete(l)),assignMergeValue(e,r,u)}}function baseMerge(e,t,r,n,a){e!==t&&baseFor(t,function(o,i){if(a||(a=new Stack),isObject(o))baseMergeDeep(e,t,i,r,baseMerge,n,a);else{var s=n?n(safeGet(e,i),o,i+"",e,t,a):void 0;void 0===s&&(s=o),assignMergeValue(e,i,s)}},keysIn)}function customDefaultsMerge(e,t,r,n,a,o){return isObject(e)&&isObject(t)&&(o.set(t,e),baseMerge(e,t,void 0,customDefaultsMerge,o),o.delete(t)),e}var mergeWith=createAssigner(function(e,t,r,n){baseMerge(e,t,r,n)}),defaultsDeep=baseRest(function(e){return e.push(void 0,customDefaultsMerge),apply(mergeWith,void 0,e)}),FUNC_ERROR_TEXT$5="Expected a function";function baseDelay(e,t,r){if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$5);return setTimeout(function(){e.apply(void 0,r)},t)}var defer=baseRest(function(e,t){return baseDelay(e,1,t)}),delay=baseRest(function(e,t,r){return baseDelay(e,toNumber(t)||0,r)});function arrayIncludesWith(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var LARGE_ARRAY_SIZE$1=200;function baseDifference(e,t,r,n){var a=-1,o=arrayIncludes,i=!0,s=e.length,l=[],c=t.length;if(!s)return l;r&&(t=arrayMap(t,baseUnary(r))),n?(o=arrayIncludesWith,i=!1):t.length>=LARGE_ARRAY_SIZE$1&&(o=cacheHas,i=!1,t=new SetCache(t));e:for(;++a<s;){var u=e[a],d=null==r?u:r(u);if(u=n||0!==u?u:0,i&&d==d){for(var h=c;h--;)if(t[h]===d)continue e;l.push(u)}else o(t,d,n)||l.push(u)}return l}var difference=baseRest(function(e,t){return isArrayLikeObject(e)?baseDifference(e,baseFlatten(t,1,isArrayLikeObject,!0)):[]});function last(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var differenceBy=baseRest(function(e,t){var r=last(t);return isArrayLikeObject(r)&&(r=void 0),isArrayLikeObject(e)?baseDifference(e,baseFlatten(t,1,isArrayLikeObject,!0),baseIteratee(r,2)):[]}),differenceWith=baseRest(function(e,t){var r=last(t);return isArrayLikeObject(r)&&(r=void 0),isArrayLikeObject(e)?baseDifference(e,baseFlatten(t,1,isArrayLikeObject,!0),void 0,r):[]}),divide=createMathOperation(function(e,t){return e/t},1);function drop(e,t,r){var n=null==e?0:e.length;return n?baseSlice(e,(t=r||void 0===t?1:toInteger(t))<0?0:t,n):[]}function dropRight(e,t,r){var n=null==e?0:e.length;return n?baseSlice(e,0,(t=n-(t=r||void 0===t?1:toInteger(t)))<0?0:t):[]}function baseWhile(e,t,r,n){for(var a=e.length,o=n?a:-1;(n?o--:++o<a)&&t(e[o],o,e););return r?baseSlice(e,n?0:o,n?o+1:a):baseSlice(e,n?o+1:0,n?a:o)}function dropRightWhile(e,t){return e&&e.length?baseWhile(e,baseIteratee(t,3),!0,!0):[]}function dropWhile(e,t){return e&&e.length?baseWhile(e,baseIteratee(t,3),!0):[]}function castFunction(e){return"function"==typeof e?e:identity}function forEach(e,t){return(isArray$1(e)?arrayEach:baseEach)(e,castFunction(t))}function arrayEachRight(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}var baseForRight=createBaseFor(!0);function baseForOwnRight(e,t){return e&&baseForRight(e,t,keys$1)}var baseEachRight=createBaseEach(baseForOwnRight,!0);function forEachRight(e,t){return(isArray$1(e)?arrayEachRight:baseEachRight)(e,castFunction(t))}function endsWith(e,t,r){e=toString(e),t=baseToString(t);var n=e.length,a=r=void 0===r?n:baseClamp(toInteger(r),0,n);return(r-=t.length)>=0&&e.slice(r,a)==t}function baseToPairs(e,t){return arrayMap(t,function(t){return[t,e[t]]})}function setToPairs(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}var mapTag$3="[object Map]",setTag$3="[object Set]";function createToPairs(e){return function(t){var r=getTag$1(t);return r==mapTag$3?mapToArray(t):r==setTag$3?setToPairs(t):baseToPairs(t,e(t))}}var toPairs=createToPairs(keys$1),toPairsIn=createToPairs(keysIn),htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},escapeHtmlChar=basePropertyOf(htmlEscapes),reUnescapedHtml=/[&<>"']/g,reHasUnescapedHtml=RegExp(reUnescapedHtml.source);function escape(e){return(e=toString(e))&&reHasUnescapedHtml.test(e)?e.replace(reUnescapedHtml,escapeHtmlChar):e}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);function escapeRegExp(e){return(e=toString(e))&&reHasRegExpChar.test(e)?e.replace(reRegExpChar,"\\$&"):e}function arrayEvery(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function baseEvery(e,t){var r=!0;return baseEach(e,function(e,n,a){return r=!!t(e,n,a)}),r}function every(e,t,r){var n=isArray$1(e)?arrayEvery:baseEvery;return r&&isIterateeCall(e,t,r)&&(t=void 0),n(e,baseIteratee(t,3))}var MAX_ARRAY_LENGTH$5=4294967295;function toLength(e){return e?baseClamp(toInteger(e),0,MAX_ARRAY_LENGTH$5):0}function baseFill(e,t,r,n){var a=e.length;for((r=toInteger(r))<0&&(r=-r>a?0:a+r),(n=void 0===n||n>a?a:toInteger(n))<0&&(n+=a),n=r>n?0:toLength(n);r<n;)e[r++]=t;return e}function fill(e,t,r,n){var a=null==e?0:e.length;return a?(r&&"number"!=typeof r&&isIterateeCall(e,t,r)&&(r=0,n=a),baseFill(e,t,r,n)):[]}function baseFilter(e,t){var r=[];return baseEach(e,function(e,n,a){t(e,n,a)&&r.push(e)}),r}function filter(e,t){return(isArray$1(e)?arrayFilter:baseFilter)(e,baseIteratee(t,3))}function createFind(e){return function(t,r,n){var a=Object(t);if(!isArrayLike(t)){var o=baseIteratee(r,3);t=keys$1(t),r=function(e){return o(a[e],e,a)}}var i=e(t,r,n);return i>-1?a[o?t[i]:i]:void 0}}var nativeMax$a=Math.max;function findIndex(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:toInteger(r);return a<0&&(a=nativeMax$a(n+a,0)),baseFindIndex(e,baseIteratee(t,3),a)}var find=createFind(findIndex);function baseFindKey(e,t,r){var n;return r(e,function(e,r,a){if(t(e,r,a))return n=r,!1}),n}function findKey(e,t){return baseFindKey(e,baseIteratee(t,3),baseForOwn)}var nativeMax$9=Math.max,nativeMin$a=Math.min;function findLastIndex(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=n-1;return void 0!==r&&(a=toInteger(r),a=r<0?nativeMax$9(n+a,0):nativeMin$a(a,n-1)),baseFindIndex(e,baseIteratee(t,3),a,!0)}var findLast=createFind(findLastIndex);function findLastKey(e,t){return baseFindKey(e,baseIteratee(t,3),baseForOwnRight)}function head(e){return e&&e.length?e[0]:void 0}function baseMap(e,t){var r=-1,n=isArrayLike(e)?Array(e.length):[];return baseEach(e,function(e,a,o){n[++r]=t(e,a,o)}),n}function map(e,t){return(isArray$1(e)?arrayMap:baseMap)(e,baseIteratee(t,3))}function flatMap(e,t){return baseFlatten(map(e,t),1)}var INFINITY$2=1/0;function flatMapDeep(e,t){return baseFlatten(map(e,t),INFINITY$2)}function flatMapDepth(e,t,r){return r=void 0===r?1:toInteger(r),baseFlatten(map(e,t),r)}var INFINITY$1=1/0;function flattenDeep(e){return(null==e?0:e.length)?baseFlatten(e,INFINITY$1):[]}function flattenDepth(e,t){return(null==e?0:e.length)?baseFlatten(e,t=void 0===t?1:toInteger(t)):[]}var WRAP_FLIP_FLAG=512;function flip(e){return createWrap(e,WRAP_FLIP_FLAG)}var floor=createRound("floor"),FUNC_ERROR_TEXT$4="Expected a function",WRAP_CURRY_FLAG=8,WRAP_PARTIAL_FLAG$1=32,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG$1=256;function createFlow(e){return flatRest(function(t){var r=t.length,n=r,a=LodashWrapper.prototype.thru;for(e&&t.reverse();n--;){var o=t[n];if("function"!=typeof o)throw new TypeError(FUNC_ERROR_TEXT$4);if(a&&!i&&"wrapper"==getFuncName(o))var i=new LodashWrapper([],!0)}for(n=i?n:r;++n<r;){var s=getFuncName(o=t[n]),l="wrapper"==s?getData(o):void 0;i=l&&isLaziable(l[0])&&l[1]==(WRAP_ARY_FLAG|WRAP_CURRY_FLAG|WRAP_PARTIAL_FLAG$1|WRAP_REARG_FLAG$1)&&!l[4].length&&1==l[9]?i[getFuncName(l[0])].apply(i,l[3]):1==o.length&&isLaziable(o)?i[s]():i.thru(o)}return function(){var e=arguments,n=e[0];if(i&&1==e.length&&isArray$1(n))return i.plant(n).value();for(var a=0,o=r?t[a].apply(this,e):n;++a<r;)o=t[a].call(this,o);return o}})}var flow=createFlow(),flowRight=createFlow(!0);function forIn(e,t){return null==e?e:baseFor(e,castFunction(t),keysIn)}function forInRight(e,t){return null==e?e:baseForRight(e,castFunction(t),keysIn)}function forOwn(e,t){return e&&baseForOwn(e,castFunction(t))}function forOwnRight(e,t){return e&&baseForOwnRight(e,castFunction(t))}function fromPairs(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var a=e[t];n[a[0]]=a[1]}return n}function baseFunctions(e,t){return arrayFilter(t,function(t){return isFunction(e[t])})}function functions(e){return null==e?[]:baseFunctions(e,keys$1(e))}function functionsIn(e){return null==e?[]:baseFunctions(e,keysIn(e))}var objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty,groupBy=createAggregator(function(e,t,r){hasOwnProperty$6.call(e,r)?e[r].push(t):baseAssignValue(e,r,[t])});function baseGt(e,t){return e>t}function createRelationalOperation(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=toNumber(t),r=toNumber(r)),e(t,r)}}var gt$1=createRelationalOperation(baseGt),gte=createRelationalOperation(function(e,t){return e>=t}),objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function baseHas(e,t){return null!=e&&hasOwnProperty$5.call(e,t)}function has(e,t){return null!=e&&hasPath(e,t,baseHas)}var nativeMax$8=Math.max,nativeMin$9=Math.min;function baseInRange(e,t,r){return e>=nativeMin$9(t,r)&&e<nativeMax$8(t,r)}function inRange(e,t,r){return t=toFinite(t),void 0===r?(r=t,t=0):r=toFinite(r),baseInRange(e=toNumber(e),t,r)}var stringTag="[object String]";function isString(e){return"string"==typeof e||!isArray$1(e)&&isObjectLike(e)&&baseGetTag(e)==stringTag}function baseValues(e,t){return arrayMap(t,function(t){return e[t]})}function values(e){return null==e?[]:baseValues(e,keys$1(e))}var nativeMax$7=Math.max;function includes$1(e,t,r,n){e=isArrayLike(e)?e:values(e),r=r&&!n?toInteger(r):0;var a=e.length;return r<0&&(r=nativeMax$7(a+r,0)),isString(e)?r<=a&&e.indexOf(t,r)>-1:!!a&&baseIndexOf(e,t,r)>-1}var nativeMax$6=Math.max;function indexOf(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:toInteger(r);return a<0&&(a=nativeMax$6(n+a,0)),baseIndexOf(e,t,a)}function initial(e){return(null==e?0:e.length)?baseSlice(e,0,-1):[]}var nativeMin$8=Math.min;function baseIntersection(e,t,r){for(var n=r?arrayIncludesWith:arrayIncludes,a=e[0].length,o=e.length,i=o,s=Array(o),l=1/0,c=[];i--;){var u=e[i];i&&t&&(u=arrayMap(u,baseUnary(t))),l=nativeMin$8(u.length,l),s[i]=!r&&(t||a>=120&&u.length>=120)?new SetCache(i&&u):void 0}u=e[0];var d=-1,h=s[0];e:for(;++d<a&&c.length<l;){var p=u[d],f=t?t(p):p;if(p=r||0!==p?p:0,!(h?cacheHas(h,f):n(c,f,r))){for(i=o;--i;){var g=s[i];if(!(g?cacheHas(g,f):n(e[i],f,r)))continue e}h&&h.push(f),c.push(p)}}return c}function castArrayLikeObject(e){return isArrayLikeObject(e)?e:[]}var intersection=baseRest(function(e){var t=arrayMap(e,castArrayLikeObject);return t.length&&t[0]===e[0]?baseIntersection(t):[]}),intersectionBy=baseRest(function(e){var t=last(e),r=arrayMap(e,castArrayLikeObject);return t===last(r)?t=void 0:r.pop(),r.length&&r[0]===e[0]?baseIntersection(r,baseIteratee(t,2)):[]}),intersectionWith=baseRest(function(e){var t=last(e),r=arrayMap(e,castArrayLikeObject);return(t="function"==typeof t?t:void 0)&&r.pop(),r.length&&r[0]===e[0]?baseIntersection(r,void 0,t):[]});function baseInverter(e,t,r,n){return baseForOwn(e,function(e,a,o){t(n,r(e),a,o)}),n}function createInverter(e,t){return function(r,n){return baseInverter(r,e,t(n),{})}}var objectProto$5=Object.prototype,nativeObjectToString$1=objectProto$5.toString,invert=createInverter(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=nativeObjectToString$1.call(t)),e[t]=r},constant(identity)),objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty,nativeObjectToString=objectProto$4.toString,invertBy=createInverter(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=nativeObjectToString.call(t)),hasOwnProperty$4.call(e,t)?e[t].push(r):e[t]=[r]},baseIteratee);function parent(e,t){return t.length<2?e:baseGet(e,baseSlice(t,0,-1))}function baseInvoke(e,t,r){var n=null==(e=parent(e,t=castPath(t,e)))?e:e[toKey(last(t))];return null==n?void 0:apply(n,e,r)}var invoke=baseRest(baseInvoke),invokeMap=baseRest(function(e,t,r){var n=-1,a="function"==typeof t,o=isArrayLike(e)?Array(e.length):[];return baseEach(e,function(e){o[++n]=a?apply(t,e,r):baseInvoke(e,t,r)}),o}),arrayBufferTag="[object ArrayBuffer]";function baseIsArrayBuffer(e){return isObjectLike(e)&&baseGetTag(e)==arrayBufferTag}var nodeIsArrayBuffer=nodeUtil&&nodeUtil.isArrayBuffer,isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):baseIsArrayBuffer,boolTag="[object Boolean]";function isBoolean(e){return!0===e||!1===e||isObjectLike(e)&&baseGetTag(e)==boolTag}var dateTag="[object Date]";function baseIsDate(e){return isObjectLike(e)&&baseGetTag(e)==dateTag}var nodeIsDate=nodeUtil&&nodeUtil.isDate,isDate=nodeIsDate?baseUnary(nodeIsDate):baseIsDate;function isElement(e){return isObjectLike(e)&&1===e.nodeType&&!isPlainObject(e)}var mapTag$2="[object Map]",setTag$2="[object Set]",objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function isEmpty$1(e){if(null==e)return!0;if(isArrayLike(e)&&(isArray$1(e)||"string"==typeof e||"function"==typeof e.splice||isBuffer(e)||isTypedArray(e)||isArguments(e)))return!e.length;var t=getTag$1(e);if(t==mapTag$2||t==setTag$2)return!e.size;if(isPrototype(e))return!baseKeys(e).length;for(var r in e)if(hasOwnProperty$3.call(e,r))return!1;return!0}function isEqual(e,t){return baseIsEqual(e,t)}function isEqualWith(e,t,r){var n=(r="function"==typeof r?r:void 0)?r(e,t):void 0;return void 0===n?baseIsEqual(e,t,void 0,r):!!n}var nativeIsFinite=root$5.isFinite;function isFinite(e){return"number"==typeof e&&nativeIsFinite(e)}function isInteger$1(e){return"number"==typeof e&&e==toInteger(e)}function isMatch(e,t){return e===t||baseIsMatch(e,t,getMatchData(t))}function isMatchWith(e,t,r){return r="function"==typeof r?r:void 0,baseIsMatch(e,t,getMatchData(t),r)}var numberTag="[object Number]";function isNumber(e){return"number"==typeof e||isObjectLike(e)&&baseGetTag(e)==numberTag}function isNaN$1(e){return isNumber(e)&&e!=+e}var isMaskable=coreJsData?isFunction:stubFalse,CORE_ERROR_TEXT="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function isNative(e){if(isMaskable(e))throw new Error(CORE_ERROR_TEXT);return baseIsNative(e)}function isNil(e){return null==e}function isNull(e){return null===e}var regexpTag="[object RegExp]";function baseIsRegExp(e){return isObjectLike(e)&&baseGetTag(e)==regexpTag}var nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):baseIsRegExp,MAX_SAFE_INTEGER$3=9007199254740991;function isSafeInteger(e){return isInteger$1(e)&&e>=-MAX_SAFE_INTEGER$3&&e<=MAX_SAFE_INTEGER$3}function isUndefined(e){return void 0===e}var weakMapTag="[object WeakMap]";function isWeakMap(e){return isObjectLike(e)&&getTag$1(e)==weakMapTag}var weakSetTag="[object WeakSet]";function isWeakSet(e){return isObjectLike(e)&&baseGetTag(e)==weakSetTag}var CLONE_DEEP_FLAG$3=1;function iteratee(e){return baseIteratee("function"==typeof e?e:baseClone(e,CLONE_DEEP_FLAG$3))}var arrayProto$4=Array.prototype,nativeJoin=arrayProto$4.join;function join(e,t){return null==e?"":nativeJoin.call(e,t)}var kebabCase=createCompounder(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),keyBy=createAggregator(function(e,t,r){baseAssignValue(e,r,t)});function strictLastIndexOf(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}var nativeMax$5=Math.max,nativeMin$7=Math.min;function lastIndexOf(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=n;return void 0!==r&&(a=(a=toInteger(r))<0?nativeMax$5(n+a,0):nativeMin$7(a,n-1)),t==t?strictLastIndexOf(e,t,a):baseFindIndex(e,baseIsNaN,a,!0)}var lowerCase=createCompounder(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),lowerFirst=createCaseFirst("toLowerCase");function baseLt(e,t){return e<t}var lt$1=createRelationalOperation(baseLt),lte=createRelationalOperation(function(e,t){return e<=t});function mapKeys(e,t){var r={};return t=baseIteratee(t,3),baseForOwn(e,function(e,n,a){baseAssignValue(r,t(e,n,a),e)}),r}function mapValues(e,t){var r={};return t=baseIteratee(t,3),baseForOwn(e,function(e,n,a){baseAssignValue(r,n,t(e,n,a))}),r}var CLONE_DEEP_FLAG$2=1;function matches(e){return baseMatches(baseClone(e,CLONE_DEEP_FLAG$2))}var CLONE_DEEP_FLAG$1=1;function matchesProperty(e,t){return baseMatchesProperty(e,baseClone(t,CLONE_DEEP_FLAG$1))}function baseExtremum(e,t,r){for(var n=-1,a=e.length;++n<a;){var o=e[n],i=t(o);if(null!=i&&(void 0===s?i==i&&!isSymbol(i):r(i,s)))var s=i,l=o}return l}function max(e){return e&&e.length?baseExtremum(e,identity,baseGt):void 0}function maxBy(e,t){return e&&e.length?baseExtremum(e,baseIteratee(t,2),baseGt):void 0}function baseSum(e,t){for(var r,n=-1,a=e.length;++n<a;){var o=t(e[n]);void 0!==o&&(r=void 0===r?o:r+o)}return r}var NAN=NaN;function baseMean(e,t){var r=null==e?0:e.length;return r?baseSum(e,t)/r:NAN}function mean(e){return baseMean(e,identity)}function meanBy(e,t){return baseMean(e,baseIteratee(t,2))}var merge=createAssigner(function(e,t,r){baseMerge(e,t,r)}),method=baseRest(function(e,t){return function(r){return baseInvoke(r,e,t)}}),methodOf=baseRest(function(e,t){return function(r){return baseInvoke(e,r,t)}});function min(e){return e&&e.length?baseExtremum(e,identity,baseLt):void 0}function minBy(e,t){return e&&e.length?baseExtremum(e,baseIteratee(t,2),baseLt):void 0}function mixin$1(e,t,r){var n=keys$1(t),a=baseFunctions(t,n),o=!(isObject(r)&&"chain"in r&&!r.chain),i=isFunction(e);return arrayEach(a,function(r){var n=t[r];e[r]=n,i&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__);return(r.__actions__=copyArray(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,arrayPush([this.value()],arguments))})}),e}var multiply=createMathOperation(function(e,t){return e*t},1),FUNC_ERROR_TEXT$3="Expected a function";function negate(e){if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$3);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function iteratorToArray(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}var mapTag$1="[object Map]",setTag$1="[object Set]",symIterator$1=Symbol$1?Symbol$1.iterator:void 0;function toArray(e){if(!e)return[];if(isArrayLike(e))return isString(e)?stringToArray(e):copyArray(e);if(symIterator$1&&e[symIterator$1])return iteratorToArray(e[symIterator$1]());var t=getTag$1(e);return(t==mapTag$1?mapToArray:t==setTag$1?setToArray:values)(e)}function wrapperNext(){void 0===this.__values__&&(this.__values__=toArray(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}}function baseNth(e,t){var r=e.length;if(r)return isIndex(t+=t<0?r:0,r)?e[t]:void 0}function nth(e,t){return e&&e.length?baseNth(e,toInteger(t)):void 0}function nthArg(e){return e=toInteger(e),baseRest(function(t){return baseNth(t,e)})}function baseUnset(e,t){return null==(e=parent(e,t=castPath(t,e)))||delete e[toKey(last(t))]}function customOmitClone(e){return isPlainObject(e)?void 0:e}var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,omit=flatRest(function(e,t){var r={};if(null==e)return r;var n=!1;t=arrayMap(t,function(t){return t=castPath(t,e),n||(n=t.length>1),t}),copyObject(e,getAllKeysIn(e),r),n&&(r=baseClone(r,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone));for(var a=t.length;a--;)baseUnset(r,t[a]);return r});function baseSet(e,t,r,n){if(!isObject(e))return e;for(var a=-1,o=(t=castPath(t,e)).length,i=o-1,s=e;null!=s&&++a<o;){var l=toKey(t[a]),c=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(a!=i){var u=s[l];void 0===(c=n?n(u,l,s):void 0)&&(c=isObject(u)?u:isIndex(t[a+1])?[]:{})}assignValue(s,l,c),s=s[l]}return e}function basePickBy(e,t,r){for(var n=-1,a=t.length,o={};++n<a;){var i=t[n],s=baseGet(e,i);r(s,i)&&baseSet(o,castPath(i,e),s)}return o}function pickBy(e,t){if(null==e)return{};var r=arrayMap(getAllKeysIn(e),function(e){return[e]});return t=baseIteratee(t),basePickBy(e,r,function(e,r){return t(e,r[0])})}function omitBy(e,t){return pickBy(e,negate(baseIteratee(t)))}function once(e){return before(2,e)}function baseSortBy(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}function compareAscending(e,t){if(e!==t){var r=void 0!==e,n=null===e,a=e==e,o=isSymbol(e),i=void 0!==t,s=null===t,l=t==t,c=isSymbol(t);if(!s&&!c&&!o&&e>t||o&&i&&l&&!s&&!c||n&&i&&l||!r&&l||!a)return 1;if(!n&&!o&&!c&&e<t||c&&r&&a&&!n&&!o||s&&r&&a||!i&&a||!l)return-1}return 0}function compareMultiple(e,t,r){for(var n=-1,a=e.criteria,o=t.criteria,i=a.length,s=r.length;++n<i;){var l=compareAscending(a[n],o[n]);if(l)return n>=s?l:l*("desc"==r[n]?-1:1)}return e.index-t.index}function baseOrderBy(e,t,r){t=t.length?arrayMap(t,function(e){return isArray$1(e)?function(t){return baseGet(t,1===e.length?e[0]:e)}:e}):[identity];var n=-1;t=arrayMap(t,baseUnary(baseIteratee));var a=baseMap(e,function(e,r,a){var o=arrayMap(t,function(t){return t(e)});return{criteria:o,index:++n,value:e}});return baseSortBy(a,function(e,t){return compareMultiple(e,t,r)})}function orderBy(e,t,r,n){return null==e?[]:(isArray$1(t)||(t=null==t?[]:[t]),isArray$1(r=n?void 0:r)||(r=null==r?[]:[r]),baseOrderBy(e,t,r))}function createOver(e){return flatRest(function(t){return t=arrayMap(t,baseUnary(baseIteratee)),baseRest(function(r){var n=this;return e(t,function(e){return apply(e,n,r)})})})}var over=createOver(arrayMap),castRest=baseRest,nativeMin$6=Math.min,overArgs=castRest(function(e,t){var r=(t=1==t.length&&isArray$1(t[0])?arrayMap(t[0],baseUnary(baseIteratee)):arrayMap(baseFlatten(t,1),baseUnary(baseIteratee))).length;return baseRest(function(n){for(var a=-1,o=nativeMin$6(n.length,r);++a<o;)n[a]=t[a].call(this,n[a]);return apply(e,this,n)})}),overEvery=createOver(arrayEvery),overSome=createOver(arraySome),MAX_SAFE_INTEGER$2=9007199254740991,nativeFloor$3=Math.floor;function baseRepeat(e,t){var r="";if(!e||t<1||t>MAX_SAFE_INTEGER$2)return r;do{t%2&&(r+=e),(t=nativeFloor$3(t/2))&&(e+=e)}while(t);return r}var asciiSize=baseProperty("length"),rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange+"]",rsCombo="["+rsComboRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeSize(e){for(var t=reUnicode.lastIndex=0;reUnicode.test(e);)++t;return t}function stringSize(e){return hasUnicode(e)?unicodeSize(e):asciiSize(e)}var nativeCeil$2=Math.ceil;function createPadding(e,t){var r=(t=void 0===t?" ":baseToString(t)).length;if(r<2)return r?baseRepeat(t,e):t;var n=baseRepeat(t,nativeCeil$2(e/stringSize(t)));return hasUnicode(t)?castSlice(stringToArray(n),0,e).join(""):n.slice(0,e)}var nativeCeil$1=Math.ceil,nativeFloor$2=Math.floor;function pad(e,t,r){e=toString(e);var n=(t=toInteger(t))?stringSize(e):0;if(!t||n>=t)return e;var a=(t-n)/2;return createPadding(nativeFloor$2(a),r)+e+createPadding(nativeCeil$1(a),r)}function padEnd(e,t,r){e=toString(e);var n=(t=toInteger(t))?stringSize(e):0;return t&&n<t?e+createPadding(t-n,r):e}function padStart(e,t,r){e=toString(e);var n=(t=toInteger(t))?stringSize(e):0;return t&&n<t?createPadding(t-n,r)+e:e}var reTrimStart$1=/^\s+/,nativeParseInt=root$5.parseInt;function parseInt$1(e,t,r){return r||null==t?t=0:t&&(t=+t),nativeParseInt(toString(e).replace(reTrimStart$1,""),t||0)}var WRAP_PARTIAL_FLAG=32,partial=baseRest(function(e,t){var r=replaceHolders(t,getHolder(partial));return createWrap(e,WRAP_PARTIAL_FLAG,void 0,t,r)});partial.placeholder={};var WRAP_PARTIAL_RIGHT_FLAG=64,partialRight=baseRest(function(e,t){var r=replaceHolders(t,getHolder(partialRight));return createWrap(e,WRAP_PARTIAL_RIGHT_FLAG,void 0,t,r)});partialRight.placeholder={};var partition=createAggregator(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});function basePick(e,t){return basePickBy(e,t,function(t,r){return hasIn(e,r)})}var pick=flatRest(function(e,t){return null==e?{}:basePick(e,t)});function wrapperPlant(e){for(var t,r=this;r instanceof baseLodash;){var n=wrapperClone(r);n.__index__=0,n.__values__=void 0,t?a.__wrapped__=n:t=n;var a=n;r=r.__wrapped__}return a.__wrapped__=e,t}function propertyOf(e){return function(t){return null==e?void 0:baseGet(e,t)}}function baseIndexOfWith(e,t,r,n){for(var a=r-1,o=e.length;++a<o;)if(n(e[a],t))return a;return-1}var arrayProto$3=Array.prototype,splice$1=arrayProto$3.splice;function basePullAll(e,t,r,n){var a=n?baseIndexOfWith:baseIndexOf,o=-1,i=t.length,s=e;for(e===t&&(t=copyArray(t)),r&&(s=arrayMap(e,baseUnary(r)));++o<i;)for(var l=0,c=t[o],u=r?r(c):c;(l=a(s,u,l,n))>-1;)s!==e&&splice$1.call(s,l,1),splice$1.call(e,l,1);return e}function pullAll(e,t){return e&&e.length&&t&&t.length?basePullAll(e,t):e}var pull=baseRest(pullAll);function pullAllBy(e,t,r){return e&&e.length&&t&&t.length?basePullAll(e,t,baseIteratee(r,2)):e}function pullAllWith(e,t,r){return e&&e.length&&t&&t.length?basePullAll(e,t,void 0,r):e}var arrayProto$2=Array.prototype,splice=arrayProto$2.splice;function basePullAt(e,t){for(var r=e?t.length:0,n=r-1;r--;){var a=t[r];if(r==n||a!==o){var o=a;isIndex(a)?splice.call(e,a,1):baseUnset(e,a)}}return e}var pullAt=flatRest(function(e,t){var r=null==e?0:e.length,n=baseAt(e,t);return basePullAt(e,arrayMap(t,function(e){return isIndex(e,r)?+e:e}).sort(compareAscending)),n}),nativeFloor$1=Math.floor,nativeRandom$1=Math.random;function baseRandom(e,t){return e+nativeFloor$1(nativeRandom$1()*(t-e+1))}var freeParseFloat=parseFloat,nativeMin$5=Math.min,nativeRandom=Math.random;function random(e,t,r){if(r&&"boolean"!=typeof r&&isIterateeCall(e,t,r)&&(t=r=void 0),void 0===r&&("boolean"==typeof t?(r=t,t=void 0):"boolean"==typeof e&&(r=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=toFinite(e),void 0===t?(t=e,e=0):t=toFinite(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var a=nativeRandom();return nativeMin$5(e+a*(t-e+freeParseFloat("1e-"+((a+"").length-1))),t)}return baseRandom(e,t)}var nativeCeil=Math.ceil,nativeMax$4=Math.max;function baseRange(e,t,r,n){for(var a=-1,o=nativeMax$4(nativeCeil((t-e)/(r||1)),0),i=Array(o);o--;)i[n?o:++a]=e,e+=r;return i}function createRange(e){return function(t,r,n){return n&&"number"!=typeof n&&isIterateeCall(t,r,n)&&(r=n=void 0),t=toFinite(t),void 0===r?(r=t,t=0):r=toFinite(r),baseRange(t,r,n=void 0===n?t<r?1:-1:toFinite(n),e)}}var range=createRange(),rangeRight=createRange(!0),WRAP_REARG_FLAG=256,rearg=flatRest(function(e,t){return createWrap(e,WRAP_REARG_FLAG,void 0,void 0,void 0,t)});function baseReduce(e,t,r,n,a){return a(e,function(e,a,o){r=n?(n=!1,e):t(r,e,a,o)}),r}function reduce(e,t,r){var n=isArray$1(e)?arrayReduce:baseReduce,a=arguments.length<3;return n(e,baseIteratee(t,4),r,a,baseEach)}function arrayReduceRight(e,t,r,n){var a=null==e?0:e.length;for(n&&a&&(r=e[--a]);a--;)r=t(r,e[a],a,e);return r}function reduceRight(e,t,r){var n=isArray$1(e)?arrayReduceRight:baseReduce,a=arguments.length<3;return n(e,baseIteratee(t,4),r,a,baseEachRight)}function reject(e,t){return(isArray$1(e)?arrayFilter:baseFilter)(e,negate(baseIteratee(t,3)))}function remove(e,t){var r=[];if(!e||!e.length)return r;var n=-1,a=[],o=e.length;for(t=baseIteratee(t,3);++n<o;){var i=e[n];t(i,n,e)&&(r.push(i),a.push(n))}return basePullAt(e,a),r}function repeat(e,t,r){return t=(r?isIterateeCall(e,t,r):void 0===t)?1:toInteger(t),baseRepeat(toString(e),t)}function replace(){var e=arguments,t=toString(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var FUNC_ERROR_TEXT$2="Expected a function";function rest(e,t){if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$2);return baseRest(e,t=void 0===t?t:toInteger(t))}function result(e,t,r){var n=-1,a=(t=castPath(t,e)).length;for(a||(a=1,e=void 0);++n<a;){var o=null==e?void 0:e[toKey(t[n])];void 0===o&&(n=a,o=r),e=isFunction(o)?o.call(e):o}return e}var arrayProto$1=Array.prototype,nativeReverse=arrayProto$1.reverse;function reverse(e){return null==e?e:nativeReverse.call(e)}var round=createRound("round");function arraySample(e){var t=e.length;return t?e[baseRandom(0,t-1)]:void 0}function baseSample(e){return arraySample(values(e))}function sample(e){return(isArray$1(e)?arraySample:baseSample)(e)}function shuffleSelf(e,t){var r=-1,n=e.length,a=n-1;for(t=void 0===t?n:t;++r<t;){var o=baseRandom(r,a),i=e[o];e[o]=e[r],e[r]=i}return e.length=t,e}function arraySampleSize(e,t){return shuffleSelf(copyArray(e),baseClamp(t,0,e.length))}function baseSampleSize(e,t){var r=values(e);return shuffleSelf(r,baseClamp(t,0,r.length))}function sampleSize(e,t,r){return t=(r?isIterateeCall(e,t,r):void 0===t)?1:toInteger(t),(isArray$1(e)?arraySampleSize:baseSampleSize)(e,t)}function set(e,t,r){return null==e?e:baseSet(e,t,r)}function setWith(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:baseSet(e,t,r,n)}function arrayShuffle(e){return shuffleSelf(copyArray(e))}function baseShuffle(e){return shuffleSelf(values(e))}function shuffle(e){return(isArray$1(e)?arrayShuffle:baseShuffle)(e)}var mapTag="[object Map]",setTag="[object Set]";function size(e){if(null==e)return 0;if(isArrayLike(e))return isString(e)?stringSize(e):e.length;var t=getTag$1(e);return t==mapTag||t==setTag?e.size:baseKeys(e).length}function slice(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&isIterateeCall(e,t,r)?(t=0,r=n):(t=null==t?0:toInteger(t),r=void 0===r?n:toInteger(r)),baseSlice(e,t,r)):[]}var snakeCase=createCompounder(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});function baseSome(e,t){var r;return baseEach(e,function(e,n,a){return!(r=t(e,n,a))}),!!r}function some(e,t,r){var n=isArray$1(e)?arraySome:baseSome;return r&&isIterateeCall(e,t,r)&&(t=void 0),n(e,baseIteratee(t,3))}var sortBy=baseRest(function(e,t){if(null==e)return[];var r=t.length;return r>1&&isIterateeCall(e,t[0],t[1])?t=[]:r>2&&isIterateeCall(t[0],t[1],t[2])&&(t=[t[0]]),baseOrderBy(e,baseFlatten(t,1),[])}),MAX_ARRAY_LENGTH$4=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH$4-1,nativeFloor=Math.floor,nativeMin$4=Math.min;function baseSortedIndexBy(e,t,r,n){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var i=(t=r(t))!=t,s=null===t,l=isSymbol(t),c=void 0===t;a<o;){var u=nativeFloor((a+o)/2),d=r(e[u]),h=void 0!==d,p=null===d,f=d==d,g=isSymbol(d);if(i)var m=n||f;else m=c?f&&(n||h):s?f&&h&&(n||!p):l?f&&h&&!p&&(n||!g):!p&&!g&&(n?d<=t:d<t);m?a=u+1:o=u}return nativeMin$4(o,MAX_ARRAY_INDEX)}var MAX_ARRAY_LENGTH$3=4294967295,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH$3>>>1;function baseSortedIndex(e,t,r){var n=0,a=null==e?n:e.length;if("number"==typeof t&&t==t&&a<=HALF_MAX_ARRAY_LENGTH){for(;n<a;){var o=n+a>>>1,i=e[o];null!==i&&!isSymbol(i)&&(r?i<=t:i<t)?n=o+1:a=o}return a}return baseSortedIndexBy(e,t,identity,r)}function sortedIndex(e,t){return baseSortedIndex(e,t)}function sortedIndexBy(e,t,r){return baseSortedIndexBy(e,t,baseIteratee(r,2))}function sortedIndexOf(e,t){var r=null==e?0:e.length;if(r){var n=baseSortedIndex(e,t);if(n<r&&eq(e[n],t))return n}return-1}function sortedLastIndex(e,t){return baseSortedIndex(e,t,!0)}function sortedLastIndexBy(e,t,r){return baseSortedIndexBy(e,t,baseIteratee(r,2),!0)}function sortedLastIndexOf(e,t){if(null==e?0:e.length){var r=baseSortedIndex(e,t,!0)-1;if(eq(e[r],t))return r}return-1}function baseSortedUniq(e,t){for(var r=-1,n=e.length,a=0,o=[];++r<n;){var i=e[r],s=t?t(i):i;if(!r||!eq(s,l)){var l=s;o[a++]=0===i?0:i}}return o}function sortedUniq(e){return e&&e.length?baseSortedUniq(e):[]}function sortedUniqBy(e,t){return e&&e.length?baseSortedUniq(e,baseIteratee(t,2)):[]}var MAX_ARRAY_LENGTH$2=4294967295;function split(e,t,r){return r&&"number"!=typeof r&&isIterateeCall(e,t,r)&&(t=r=void 0),(r=void 0===r?MAX_ARRAY_LENGTH$2:r>>>0)?(e=toString(e))&&("string"==typeof t||null!=t&&!isRegExp(t))&&!(t=baseToString(t))&&hasUnicode(e)?castSlice(stringToArray(e),0,r):e.split(t,r):[]}var FUNC_ERROR_TEXT$1="Expected a function",nativeMax$3=Math.max;function spread(e,t){if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$1);return t=null==t?0:nativeMax$3(toInteger(t),0),baseRest(function(r){var n=r[t],a=castSlice(r,0,t);return n&&arrayPush(a,n),apply(e,this,a)})}var startCase=createCompounder(function(e,t,r){return e+(r?" ":"")+upperFirst(t)});function startsWith(e,t,r){return e=toString(e),r=null==r?0:baseClamp(toInteger(r),0,e.length),t=baseToString(t),e.slice(r,r+t.length)==t}function stubObject(){return{}}function stubString(){return""}function stubTrue(){return!0}var subtract=createMathOperation(function(e,t){return e-t},0);function sum(e){return e&&e.length?baseSum(e,identity):0}function sumBy(e,t){return e&&e.length?baseSum(e,baseIteratee(t,2)):0}function tail(e){var t=null==e?0:e.length;return t?baseSlice(e,1,t):[]}function take(e,t,r){return e&&e.length?baseSlice(e,0,(t=r||void 0===t?1:toInteger(t))<0?0:t):[]}function takeRight(e,t,r){var n=null==e?0:e.length;return n?baseSlice(e,(t=n-(t=r||void 0===t?1:toInteger(t)))<0?0:t,n):[]}function takeRightWhile(e,t){return e&&e.length?baseWhile(e,baseIteratee(t,3),!1,!0):[]}function takeWhile(e,t){return e&&e.length?baseWhile(e,baseIteratee(t,3)):[]}function tap(e,t){return t(e),e}var objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function customDefaultsAssignIn(e,t,r,n){return void 0===e||eq(e,objectProto$2[r])&&!hasOwnProperty$2.call(n,r)?t:e}var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function escapeStringChar(e){return"\\"+stringEscapes[e]}var reInterpolate=/<%=([\s\S]+?)%>/g,reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:{escape:escape}}},INVALID_TEMPL_VAR_ERROR_TEXT="Invalid `variable` option passed into `_.template`",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reForbiddenIdentifierChars=/[()=,{}\[\]\/\s]/,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function template(e,t,r){var n=templateSettings.imports._.templateSettings||templateSettings;r&&isIterateeCall(e,t,r)&&(t=void 0),e=toString(e),t=assignInWith({},t,n,customDefaultsAssignIn);var a,o,i=assignInWith({},t.imports,n.imports,customDefaultsAssignIn),s=keys$1(i),l=baseValues(i,s),c=0,u=t.interpolate||reNoMatch,d="__p += '",h=RegExp((t.escape||reNoMatch).source+"|"+u.source+"|"+(u===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(t.evaluate||reNoMatch).source+"|$","g"),p=hasOwnProperty$1.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(h,function(t,r,n,i,s,l){return n||(n=i),d+=e.slice(c,l).replace(reUnescapedString,escapeStringChar),r&&(a=!0,d+="' +\n__e("+r+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),d+="';\n";var f=hasOwnProperty$1.call(t,"variable")&&t.variable;if(f){if(reForbiddenIdentifierChars.test(f))throw new Error(INVALID_TEMPL_VAR_ERROR_TEXT)}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(reEmptyStringLeading,""):d).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),d="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=attempt(function(){return Function(s,p+"return "+d).apply(void 0,l)});if(g.source=d,isError(g))throw g;return g}var FUNC_ERROR_TEXT="Expected a function";function throttle(e,t,r){var n=!0,a=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);return isObject(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),debounce(e,t,{leading:n,maxWait:t,trailing:a})}function thru(e,t){return t(e)}var MAX_SAFE_INTEGER$1=9007199254740991,MAX_ARRAY_LENGTH$1=4294967295,nativeMin$3=Math.min;function times(e,t){if((e=toInteger(e))<1||e>MAX_SAFE_INTEGER$1)return[];var r=MAX_ARRAY_LENGTH$1,n=nativeMin$3(e,MAX_ARRAY_LENGTH$1);t=castFunction(t),e-=MAX_ARRAY_LENGTH$1;for(var a=baseTimes(n,t);++r<e;)t(r);return a}function wrapperToIterator(){return this}function baseWrapperValue(e,t){var r=e;return r instanceof LazyWrapper&&(r=r.value()),arrayReduce(t,function(e,t){return t.func.apply(t.thisArg,arrayPush([e],t.args))},r)}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}function toLower(e){return toString(e).toLowerCase()}function toPath(e){return isArray$1(e)?arrayMap(e,toKey):isSymbol(e)?[e]:copyArray(stringToPath(toString(e)))}var MAX_SAFE_INTEGER=9007199254740991;function toSafeInteger(e){return e?baseClamp(toInteger(e),-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER):0===e?e:0}function toUpper(e){return toString(e).toUpperCase()}function transform(e,t,r){var n=isArray$1(e),a=n||isBuffer(e)||isTypedArray(e);if(t=baseIteratee(t,4),null==r){var o=e&&e.constructor;r=a?n?new o:[]:isObject(e)&&isFunction(o)?baseCreate(getPrototype(e)):{}}return(a?arrayEach:baseForOwn)(e,function(e,n,a){return t(r,e,n,a)}),r}function charsEndIndex(e,t){for(var r=e.length;r--&&baseIndexOf(t,e[r],0)>-1;);return r}function charsStartIndex(e,t){for(var r=-1,n=e.length;++r<n&&baseIndexOf(t,e[r],0)>-1;);return r}function trim(e,t,r){if((e=toString(e))&&(r||void 0===t))return baseTrim(e);if(!e||!(t=baseToString(t)))return e;var n=stringToArray(e),a=stringToArray(t);return castSlice(n,charsStartIndex(n,a),charsEndIndex(n,a)+1).join("")}function trimEnd(e,t,r){if((e=toString(e))&&(r||void 0===t))return e.slice(0,trimmedEndIndex(e)+1);if(!e||!(t=baseToString(t)))return e;var n=stringToArray(e);return castSlice(n,0,charsEndIndex(n,stringToArray(t))+1).join("")}var reTrimStart=/^\s+/;function trimStart(e,t,r){if((e=toString(e))&&(r||void 0===t))return e.replace(reTrimStart,"");if(!e||!(t=baseToString(t)))return e;var n=stringToArray(e);return castSlice(n,charsStartIndex(n,stringToArray(t))).join("")}var DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...",reFlags=/\w*$/;function truncate(e,t){var r=DEFAULT_TRUNC_LENGTH,n=DEFAULT_TRUNC_OMISSION;if(isObject(t)){var a="separator"in t?t.separator:a;r="length"in t?toInteger(t.length):r,n="omission"in t?baseToString(t.omission):n}var o=(e=toString(e)).length;if(hasUnicode(e)){var i=stringToArray(e);o=i.length}if(r>=o)return e;var s=r-stringSize(n);if(s<1)return n;var l=i?castSlice(i,0,s).join(""):e.slice(0,s);if(void 0===a)return l+n;if(i&&(s+=l.length-s),isRegExp(a)){if(e.slice(s).search(a)){var c,u=l;for(a.global||(a=RegExp(a.source,toString(reFlags.exec(a))+"g")),a.lastIndex=0;c=a.exec(u);)var d=c.index;l=l.slice(0,void 0===d?s:d)}}else if(e.indexOf(baseToString(a),s)!=s){var h=l.lastIndexOf(a);h>-1&&(l=l.slice(0,h))}return l+n}function unary(e){return ary(e,1)}var htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},unescapeHtmlChar=basePropertyOf(htmlUnescapes),reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reHasEscapedHtml=RegExp(reEscapedHtml.source);function unescape(e){return(e=toString(e))&&reHasEscapedHtml.test(e)?e.replace(reEscapedHtml,unescapeHtmlChar):e}var INFINITY=1/0,createSet=Set$1&&1/setToArray(new Set$1([,-0]))[1]==INFINITY?function(e){return new Set$1(e)}:noop,LARGE_ARRAY_SIZE=200;function baseUniq(e,t,r){var n=-1,a=arrayIncludes,o=e.length,i=!0,s=[],l=s;if(r)i=!1,a=arrayIncludesWith;else if(o>=LARGE_ARRAY_SIZE){var c=t?null:createSet(e);if(c)return setToArray(c);i=!1,a=cacheHas,l=new SetCache}else l=t?[]:s;e:for(;++n<o;){var u=e[n],d=t?t(u):u;if(u=r||0!==u?u:0,i&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),s.push(u)}else a(l,d,r)||(l!==s&&l.push(d),s.push(u))}return s}var union=baseRest(function(e){return baseUniq(baseFlatten(e,1,isArrayLikeObject,!0))}),unionBy=baseRest(function(e){var t=last(e);return isArrayLikeObject(t)&&(t=void 0),baseUniq(baseFlatten(e,1,isArrayLikeObject,!0),baseIteratee(t,2))}),unionWith=baseRest(function(e){var t=last(e);return t="function"==typeof t?t:void 0,baseUniq(baseFlatten(e,1,isArrayLikeObject,!0),void 0,t)});function uniq(e){return e&&e.length?baseUniq(e):[]}function uniqBy(e,t){return e&&e.length?baseUniq(e,baseIteratee(t,2)):[]}function uniqWith(e,t){return t="function"==typeof t?t:void 0,e&&e.length?baseUniq(e,void 0,t):[]}var idCounter=0;function uniqueId(e){var t=++idCounter;return toString(e)+t}function unset(e,t){return null==e||baseUnset(e,t)}var nativeMax$2=Math.max;function unzip(e){if(!e||!e.length)return[];var t=0;return e=arrayFilter(e,function(e){if(isArrayLikeObject(e))return t=nativeMax$2(e.length,t),!0}),baseTimes(t,function(t){return arrayMap(e,baseProperty(t))})}function unzipWith(e,t){if(!e||!e.length)return[];var r=unzip(e);return null==t?r:arrayMap(r,function(e){return apply(t,void 0,e)})}function baseUpdate(e,t,r,n){return baseSet(e,t,r(baseGet(e,t)),n)}function update(e,t,r){return null==e?e:baseUpdate(e,t,castFunction(r))}function updateWith(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:baseUpdate(e,t,castFunction(r),n)}var upperCase=createCompounder(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()});function valuesIn(e){return null==e?[]:baseValues(e,keysIn(e))}var without=baseRest(function(e,t){return isArrayLikeObject(e)?baseDifference(e,t):[]});function wrap(e,t){return partial(castFunction(t),e)}var wrapperAt=flatRest(function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,a=function(t){return baseAt(t,e)};return!(t>1||this.__actions__.length)&&n instanceof LazyWrapper&&isIndex(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:thru,args:[a],thisArg:void 0}),new LodashWrapper(n,this.__chain__).thru(function(e){return t&&!e.length&&e.push(void 0),e})):this.thru(a)});function wrapperChain(){return chain(this)}function wrapperReverse(){var e=this.__wrapped__;if(e instanceof LazyWrapper){var t=e;return this.__actions__.length&&(t=new LazyWrapper(this)),(t=t.reverse()).__actions__.push({func:thru,args:[reverse],thisArg:void 0}),new LodashWrapper(t,this.__chain__)}return this.thru(reverse)}function baseXor(e,t,r){var n=e.length;if(n<2)return n?baseUniq(e[0]):[];for(var a=-1,o=Array(n);++a<n;)for(var i=e[a],s=-1;++s<n;)s!=a&&(o[a]=baseDifference(o[a]||i,e[s],t,r));return baseUniq(baseFlatten(o,1),t,r)}var xor=baseRest(function(e){return baseXor(arrayFilter(e,isArrayLikeObject))}),xorBy=baseRest(function(e){var t=last(e);return isArrayLikeObject(t)&&(t=void 0),baseXor(arrayFilter(e,isArrayLikeObject),baseIteratee(t,2))}),xorWith=baseRest(function(e){var t=last(e);return t="function"==typeof t?t:void 0,baseXor(arrayFilter(e,isArrayLikeObject),void 0,t)}),zip=baseRest(unzip);function baseZipObject(e,t,r){for(var n=-1,a=e.length,o=t.length,i={};++n<a;){var s=n<o?t[n]:void 0;r(i,e[n],s)}return i}function zipObject(e,t){return baseZipObject(e||[],t||[],assignValue)}function zipObjectDeep(e,t){return baseZipObject(e||[],t||[],baseSet)}var zipWith=baseRest(function(e){var t=e.length,r=t>1?e[t-1]:void 0;return r="function"==typeof r?(e.pop(),r):void 0,unzipWith(e,r)}),array={chunk:chunk,compact:compact,concat:concat,difference:difference,differenceBy:differenceBy,differenceWith:differenceWith,drop:drop,dropRight:dropRight,dropRightWhile:dropRightWhile,dropWhile:dropWhile,fill:fill,findIndex:findIndex,findLastIndex:findLastIndex,first:head,flatten:flatten,flattenDeep:flattenDeep,flattenDepth:flattenDepth,fromPairs:fromPairs,head:head,indexOf:indexOf,initial:initial,intersection:intersection,intersectionBy:intersectionBy,intersectionWith:intersectionWith,join:join,last:last,lastIndexOf:lastIndexOf,nth:nth,pull:pull,pullAll:pullAll,pullAllBy:pullAllBy,pullAllWith:pullAllWith,pullAt:pullAt,remove:remove,reverse:reverse,slice:slice,sortedIndex:sortedIndex,sortedIndexBy:sortedIndexBy,sortedIndexOf:sortedIndexOf,sortedLastIndex:sortedLastIndex,sortedLastIndexBy:sortedLastIndexBy,sortedLastIndexOf:sortedLastIndexOf,sortedUniq:sortedUniq,sortedUniqBy:sortedUniqBy,tail:tail,take:take,takeRight:takeRight,takeRightWhile:takeRightWhile,takeWhile:takeWhile,union:union,unionBy:unionBy,unionWith:unionWith,uniq:uniq,uniqBy:uniqBy,uniqWith:uniqWith,unzip:unzip,unzipWith:unzipWith,without:without,xor:xor,xorBy:xorBy,xorWith:xorWith,zip:zip,zipObject:zipObject,zipObjectDeep:zipObjectDeep,zipWith:zipWith},collection={countBy:countBy,each:forEach,eachRight:forEachRight,every:every,filter:filter,find:find,findLast:findLast,flatMap:flatMap,flatMapDeep:flatMapDeep,flatMapDepth:flatMapDepth,forEach:forEach,forEachRight:forEachRight,groupBy:groupBy,includes:includes$1,invokeMap:invokeMap,keyBy:keyBy,map:map,orderBy:orderBy,partition:partition,reduce:reduce,reduceRight:reduceRight,reject:reject,sample:sample,sampleSize:sampleSize,shuffle:shuffle,size:size,some:some,sortBy:sortBy},date={now:now},func={after:after,ary:ary,before:before,bind:bind,bindKey:bindKey,curry:curry,curryRight:curryRight,debounce:debounce,defer:defer,delay:delay,flip:flip,memoize:memoize,negate:negate,once:once,overArgs:overArgs,partial:partial,partialRight:partialRight,rearg:rearg,rest:rest,spread:spread,throttle:throttle,unary:unary,wrap:wrap},lang={castArray:castArray,clone:clone,cloneDeep:cloneDeep,cloneDeepWith:cloneDeepWith,cloneWith:cloneWith,conformsTo:conformsTo,eq:eq,gt:gt$1,gte:gte,isArguments:isArguments,isArray:isArray$1,isArrayBuffer:isArrayBuffer,isArrayLike:isArrayLike,isArrayLikeObject:isArrayLikeObject,isBoolean:isBoolean,isBuffer:isBuffer,isDate:isDate,isElement:isElement,isEmpty:isEmpty$1,isEqual:isEqual,isEqualWith:isEqualWith,isError:isError,isFinite:isFinite,isFunction:isFunction,isInteger:isInteger$1,isLength:isLength,isMap:isMap,isMatch:isMatch,isMatchWith:isMatchWith,isNaN:isNaN$1,isNative:isNative,isNil:isNil,isNull:isNull,isNumber:isNumber,isObject:isObject,isObjectLike:isObjectLike,isPlainObject:isPlainObject,isRegExp:isRegExp,isSafeInteger:isSafeInteger,isSet:isSet,isString:isString,isSymbol:isSymbol,isTypedArray:isTypedArray,isUndefined:isUndefined,isWeakMap:isWeakMap,isWeakSet:isWeakSet,lt:lt$1,lte:lte,toArray:toArray,toFinite:toFinite,toInteger:toInteger,toLength:toLength,toNumber:toNumber,toPlainObject:toPlainObject,toSafeInteger:toSafeInteger,toString:toString},math={add:add,ceil:ceil,divide:divide,floor:floor,max:max,maxBy:maxBy,mean:mean,meanBy:meanBy,min:min,minBy:minBy,multiply:multiply,round:round,subtract:subtract,sum:sum,sumBy:sumBy},number={clamp:clamp,inRange:inRange,random:random},object={assign:assign,assignIn:assignIn,assignInWith:assignInWith,assignWith:assignWith,at:at$1,create:create,defaults:defaults,defaultsDeep:defaultsDeep,entries:toPairs,entriesIn:toPairsIn,extend:assignIn,extendWith:assignInWith,findKey:findKey,findLastKey:findLastKey,forIn:forIn,forInRight:forInRight,forOwn:forOwn,forOwnRight:forOwnRight,functions:functions,functionsIn:functionsIn,get:get,has:has,hasIn:hasIn,invert:invert,invertBy:invertBy,invoke:invoke,keys:keys$1,keysIn:keysIn,mapKeys:mapKeys,mapValues:mapValues,merge:merge,mergeWith:mergeWith,omit:omit,omitBy:omitBy,pick:pick,pickBy:pickBy,result:result,set:set,setWith:setWith,toPairs:toPairs,toPairsIn:toPairsIn,transform:transform,unset:unset,update:update,updateWith:updateWith,values:values,valuesIn:valuesIn},seq={at:wrapperAt,chain:chain,commit:wrapperCommit,lodash:lodash$3,next:wrapperNext,plant:wrapperPlant,reverse:wrapperReverse,tap:tap,thru:thru,toIterator:wrapperToIterator,toJSON:wrapperValue,value:wrapperValue,valueOf:wrapperValue,wrapperChain:wrapperChain},string={camelCase:camelCase,capitalize:capitalize,deburr:deburr,endsWith:endsWith,escape:escape,escapeRegExp:escapeRegExp,kebabCase:kebabCase,lowerCase:lowerCase,lowerFirst:lowerFirst,pad:pad,padEnd:padEnd,padStart:padStart,parseInt:parseInt$1,repeat:repeat,replace:replace,snakeCase:snakeCase,split:split,startCase:startCase,startsWith:startsWith,template:template,templateSettings:templateSettings,toLower:toLower,toUpper:toUpper,trim:trim,trimEnd:trimEnd,trimStart:trimStart,truncate:truncate,unescape:unescape,upperCase:upperCase,upperFirst:upperFirst,words:words},util={attempt:attempt,bindAll:bindAll,cond:cond,conforms:conforms,constant:constant,defaultTo:defaultTo,flow:flow,flowRight:flowRight,identity:identity,iteratee:iteratee,matches:matches,matchesProperty:matchesProperty,method:method,methodOf:methodOf,mixin:mixin$1,noop:noop,nthArg:nthArg,over:over,overEvery:overEvery,overSome:overSome,property:property,propertyOf:propertyOf,range:range,rangeRight:rangeRight,stubArray:stubArray,stubFalse:stubFalse,stubObject:stubObject,stubString:stubString,stubTrue:stubTrue,times:times,toPath:toPath,uniqueId:uniqueId};function lazyClone(){var e=new LazyWrapper(this.__wrapped__);return e.__actions__=copyArray(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=copyArray(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=copyArray(this.__views__),e}function lazyReverse(){if(this.__filtered__){var e=new LazyWrapper(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e}var nativeMax$1=Math.max,nativeMin$2=Math.min;function getView(e,t,r){for(var n=-1,a=r.length;++n<a;){var o=r[n],i=o.size;switch(o.type){case"drop":e+=i;break;case"dropRight":t-=i;break;case"take":t=nativeMin$2(t,e+i);break;case"takeRight":e=nativeMax$1(e,t-i)}}return{start:e,end:t}}var LAZY_FILTER_FLAG$1=1,LAZY_MAP_FLAG=2,nativeMin$1=Math.min;function lazyValue(){var e=this.__wrapped__.value(),t=this.__dir__,r=isArray$1(e),n=t<0,a=r?e.length:0,o=getView(0,a,this.__views__),i=o.start,s=o.end,l=s-i,c=n?s:i-1,u=this.__iteratees__,d=u.length,h=0,p=nativeMin$1(l,this.__takeCount__);if(!r||!n&&a==l&&p==l)return baseWrapperValue(e,this.__actions__);var f=[];e:for(;l--&&h<p;){for(var g=-1,m=e[c+=t];++g<d;){var y=u[g],b=y.iteratee,v=y.type,S=b(m);if(v==LAZY_MAP_FLAG)m=S;else if(!S){if(v==LAZY_FILTER_FLAG$1)continue e;break e}}f[h++]=m}return f}
/**
	 * @license
	 * Lodash (Custom Build) <https://lodash.com/>
	 * Build: `lodash modularize exports="es" -o ./`
	 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	 * Released under MIT license <https://lodash.com/license>
	 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 */var VERSION="4.17.21",WRAP_BIND_KEY_FLAG=2,LAZY_FILTER_FLAG=1,LAZY_WHILE_FLAG=3,MAX_ARRAY_LENGTH=4294967295,arrayProto=Array.prototype,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,symIterator=Symbol$1?Symbol$1.iterator:void 0,nativeMax=Math.max,nativeMin=Math.min,mixin=function(e){return function(t,r,n){if(null==n){var a=isObject(r),o=a&&keys$1(r),i=o&&o.length&&baseFunctions(r,o);(i?i.length:a)||(n=r,r=t,t=this)}return e(t,r,n)}}(mixin$1),source;lodash$3.after=func.after,lodash$3.ary=func.ary,lodash$3.assign=object.assign,lodash$3.assignIn=object.assignIn,lodash$3.assignInWith=object.assignInWith,lodash$3.assignWith=object.assignWith,lodash$3.at=object.at,lodash$3.before=func.before,lodash$3.bind=func.bind,lodash$3.bindAll=util.bindAll,lodash$3.bindKey=func.bindKey,lodash$3.castArray=lang.castArray,lodash$3.chain=seq.chain,lodash$3.chunk=array.chunk,lodash$3.compact=array.compact,lodash$3.concat=array.concat,lodash$3.cond=util.cond,lodash$3.conforms=util.conforms,lodash$3.constant=util.constant,lodash$3.countBy=collection.countBy,lodash$3.create=object.create,lodash$3.curry=func.curry,lodash$3.curryRight=func.curryRight,lodash$3.debounce=func.debounce,lodash$3.defaults=object.defaults,lodash$3.defaultsDeep=object.defaultsDeep,lodash$3.defer=func.defer,lodash$3.delay=func.delay,lodash$3.difference=array.difference,lodash$3.differenceBy=array.differenceBy,lodash$3.differenceWith=array.differenceWith,lodash$3.drop=array.drop,lodash$3.dropRight=array.dropRight,lodash$3.dropRightWhile=array.dropRightWhile,lodash$3.dropWhile=array.dropWhile,lodash$3.fill=array.fill,lodash$3.filter=collection.filter,lodash$3.flatMap=collection.flatMap,lodash$3.flatMapDeep=collection.flatMapDeep,lodash$3.flatMapDepth=collection.flatMapDepth,lodash$3.flatten=array.flatten,lodash$3.flattenDeep=array.flattenDeep,lodash$3.flattenDepth=array.flattenDepth,lodash$3.flip=func.flip,lodash$3.flow=util.flow,lodash$3.flowRight=util.flowRight,lodash$3.fromPairs=array.fromPairs,lodash$3.functions=object.functions,lodash$3.functionsIn=object.functionsIn,lodash$3.groupBy=collection.groupBy,lodash$3.initial=array.initial,lodash$3.intersection=array.intersection,lodash$3.intersectionBy=array.intersectionBy,lodash$3.intersectionWith=array.intersectionWith,lodash$3.invert=object.invert,lodash$3.invertBy=object.invertBy,lodash$3.invokeMap=collection.invokeMap,lodash$3.iteratee=util.iteratee,lodash$3.keyBy=collection.keyBy,lodash$3.keys=keys$1,lodash$3.keysIn=object.keysIn,lodash$3.map=collection.map,lodash$3.mapKeys=object.mapKeys,lodash$3.mapValues=object.mapValues,lodash$3.matches=util.matches,lodash$3.matchesProperty=util.matchesProperty,lodash$3.memoize=func.memoize,lodash$3.merge=object.merge,lodash$3.mergeWith=object.mergeWith,lodash$3.method=util.method,lodash$3.methodOf=util.methodOf,lodash$3.mixin=mixin,lodash$3.negate=negate,lodash$3.nthArg=util.nthArg,lodash$3.omit=object.omit,lodash$3.omitBy=object.omitBy,lodash$3.once=func.once,lodash$3.orderBy=collection.orderBy,lodash$3.over=util.over,lodash$3.overArgs=func.overArgs,lodash$3.overEvery=util.overEvery,lodash$3.overSome=util.overSome,lodash$3.partial=func.partial,lodash$3.partialRight=func.partialRight,lodash$3.partition=collection.partition,lodash$3.pick=object.pick,lodash$3.pickBy=object.pickBy,lodash$3.property=util.property,lodash$3.propertyOf=util.propertyOf,lodash$3.pull=array.pull,lodash$3.pullAll=array.pullAll,lodash$3.pullAllBy=array.pullAllBy,lodash$3.pullAllWith=array.pullAllWith,lodash$3.pullAt=array.pullAt,lodash$3.range=util.range,lodash$3.rangeRight=util.rangeRight,lodash$3.rearg=func.rearg,lodash$3.reject=collection.reject,lodash$3.remove=array.remove,lodash$3.rest=func.rest,lodash$3.reverse=array.reverse,lodash$3.sampleSize=collection.sampleSize,lodash$3.set=object.set,lodash$3.setWith=object.setWith,lodash$3.shuffle=collection.shuffle,lodash$3.slice=array.slice,lodash$3.sortBy=collection.sortBy,lodash$3.sortedUniq=array.sortedUniq,lodash$3.sortedUniqBy=array.sortedUniqBy,lodash$3.split=string.split,lodash$3.spread=func.spread,lodash$3.tail=array.tail,lodash$3.take=array.take,lodash$3.takeRight=array.takeRight,lodash$3.takeRightWhile=array.takeRightWhile,lodash$3.takeWhile=array.takeWhile,lodash$3.tap=seq.tap,lodash$3.throttle=func.throttle,lodash$3.thru=thru,lodash$3.toArray=lang.toArray,lodash$3.toPairs=object.toPairs,lodash$3.toPairsIn=object.toPairsIn,lodash$3.toPath=util.toPath,lodash$3.toPlainObject=lang.toPlainObject,lodash$3.transform=object.transform,lodash$3.unary=func.unary,lodash$3.union=array.union,lodash$3.unionBy=array.unionBy,lodash$3.unionWith=array.unionWith,lodash$3.uniq=array.uniq,lodash$3.uniqBy=array.uniqBy,lodash$3.uniqWith=array.uniqWith,lodash$3.unset=object.unset,lodash$3.unzip=array.unzip,lodash$3.unzipWith=array.unzipWith,lodash$3.update=object.update,lodash$3.updateWith=object.updateWith,lodash$3.values=object.values,lodash$3.valuesIn=object.valuesIn,lodash$3.without=array.without,lodash$3.words=string.words,lodash$3.wrap=func.wrap,lodash$3.xor=array.xor,lodash$3.xorBy=array.xorBy,lodash$3.xorWith=array.xorWith,lodash$3.zip=array.zip,lodash$3.zipObject=array.zipObject,lodash$3.zipObjectDeep=array.zipObjectDeep,lodash$3.zipWith=array.zipWith,lodash$3.entries=object.toPairs,lodash$3.entriesIn=object.toPairsIn,lodash$3.extend=object.assignIn,lodash$3.extendWith=object.assignInWith,mixin(lodash$3,lodash$3),lodash$3.add=math.add,lodash$3.attempt=util.attempt,lodash$3.camelCase=string.camelCase,lodash$3.capitalize=string.capitalize,lodash$3.ceil=math.ceil,lodash$3.clamp=number.clamp,lodash$3.clone=lang.clone,lodash$3.cloneDeep=lang.cloneDeep,lodash$3.cloneDeepWith=lang.cloneDeepWith,lodash$3.cloneWith=lang.cloneWith,lodash$3.conformsTo=lang.conformsTo,lodash$3.deburr=string.deburr,lodash$3.defaultTo=util.defaultTo,lodash$3.divide=math.divide,lodash$3.endsWith=string.endsWith,lodash$3.eq=lang.eq,lodash$3.escape=string.escape,lodash$3.escapeRegExp=string.escapeRegExp,lodash$3.every=collection.every,lodash$3.find=collection.find,lodash$3.findIndex=array.findIndex,lodash$3.findKey=object.findKey,lodash$3.findLast=collection.findLast,lodash$3.findLastIndex=array.findLastIndex,lodash$3.findLastKey=object.findLastKey,lodash$3.floor=math.floor,lodash$3.forEach=collection.forEach,lodash$3.forEachRight=collection.forEachRight,lodash$3.forIn=object.forIn,lodash$3.forInRight=object.forInRight,lodash$3.forOwn=object.forOwn,lodash$3.forOwnRight=object.forOwnRight,lodash$3.get=object.get,lodash$3.gt=lang.gt,lodash$3.gte=lang.gte,lodash$3.has=object.has,lodash$3.hasIn=object.hasIn,lodash$3.head=array.head,lodash$3.identity=identity,lodash$3.includes=collection.includes,lodash$3.indexOf=array.indexOf,lodash$3.inRange=number.inRange,lodash$3.invoke=object.invoke,lodash$3.isArguments=lang.isArguments,lodash$3.isArray=isArray$1,lodash$3.isArrayBuffer=lang.isArrayBuffer,lodash$3.isArrayLike=lang.isArrayLike,lodash$3.isArrayLikeObject=lang.isArrayLikeObject,lodash$3.isBoolean=lang.isBoolean,lodash$3.isBuffer=lang.isBuffer,lodash$3.isDate=lang.isDate,lodash$3.isElement=lang.isElement,lodash$3.isEmpty=lang.isEmpty,lodash$3.isEqual=lang.isEqual,lodash$3.isEqualWith=lang.isEqualWith,lodash$3.isError=lang.isError,lodash$3.isFinite=lang.isFinite,lodash$3.isFunction=lang.isFunction,lodash$3.isInteger=lang.isInteger,lodash$3.isLength=lang.isLength,lodash$3.isMap=lang.isMap,lodash$3.isMatch=lang.isMatch,lodash$3.isMatchWith=lang.isMatchWith,lodash$3.isNaN=lang.isNaN,lodash$3.isNative=lang.isNative,lodash$3.isNil=lang.isNil,lodash$3.isNull=lang.isNull,lodash$3.isNumber=lang.isNumber,lodash$3.isObject=isObject,lodash$3.isObjectLike=lang.isObjectLike,lodash$3.isPlainObject=lang.isPlainObject,lodash$3.isRegExp=lang.isRegExp,lodash$3.isSafeInteger=lang.isSafeInteger,lodash$3.isSet=lang.isSet,lodash$3.isString=lang.isString,lodash$3.isSymbol=lang.isSymbol,lodash$3.isTypedArray=lang.isTypedArray,lodash$3.isUndefined=lang.isUndefined,lodash$3.isWeakMap=lang.isWeakMap,lodash$3.isWeakSet=lang.isWeakSet,lodash$3.join=array.join,lodash$3.kebabCase=string.kebabCase,lodash$3.last=last,lodash$3.lastIndexOf=array.lastIndexOf,lodash$3.lowerCase=string.lowerCase,lodash$3.lowerFirst=string.lowerFirst,lodash$3.lt=lang.lt,lodash$3.lte=lang.lte,lodash$3.max=math.max,lodash$3.maxBy=math.maxBy,lodash$3.mean=math.mean,lodash$3.meanBy=math.meanBy,lodash$3.min=math.min,lodash$3.minBy=math.minBy,lodash$3.stubArray=util.stubArray,lodash$3.stubFalse=util.stubFalse,lodash$3.stubObject=util.stubObject,lodash$3.stubString=util.stubString,lodash$3.stubTrue=util.stubTrue,lodash$3.multiply=math.multiply,lodash$3.nth=array.nth,lodash$3.noop=util.noop,lodash$3.now=date.now,lodash$3.pad=string.pad,lodash$3.padEnd=string.padEnd,lodash$3.padStart=string.padStart,lodash$3.parseInt=string.parseInt,lodash$3.random=number.random,lodash$3.reduce=collection.reduce,lodash$3.reduceRight=collection.reduceRight,lodash$3.repeat=string.repeat,lodash$3.replace=string.replace,lodash$3.result=object.result,lodash$3.round=math.round,lodash$3.sample=collection.sample,lodash$3.size=collection.size,lodash$3.snakeCase=string.snakeCase,lodash$3.some=collection.some,lodash$3.sortedIndex=array.sortedIndex,lodash$3.sortedIndexBy=array.sortedIndexBy,lodash$3.sortedIndexOf=array.sortedIndexOf,lodash$3.sortedLastIndex=array.sortedLastIndex,lodash$3.sortedLastIndexBy=array.sortedLastIndexBy,lodash$3.sortedLastIndexOf=array.sortedLastIndexOf,lodash$3.startCase=string.startCase,lodash$3.startsWith=string.startsWith,lodash$3.subtract=math.subtract,lodash$3.sum=math.sum,lodash$3.sumBy=math.sumBy,lodash$3.template=string.template,lodash$3.times=util.times,lodash$3.toFinite=lang.toFinite,lodash$3.toInteger=toInteger,lodash$3.toLength=lang.toLength,lodash$3.toLower=string.toLower,lodash$3.toNumber=lang.toNumber,lodash$3.toSafeInteger=lang.toSafeInteger,lodash$3.toString=lang.toString,lodash$3.toUpper=string.toUpper,lodash$3.trim=string.trim,lodash$3.trimEnd=string.trimEnd,lodash$3.trimStart=string.trimStart,lodash$3.truncate=string.truncate,lodash$3.unescape=string.unescape,lodash$3.uniqueId=util.uniqueId,lodash$3.upperCase=string.upperCase,lodash$3.upperFirst=string.upperFirst,lodash$3.each=collection.forEach,lodash$3.eachRight=collection.forEachRight,lodash$3.first=array.head,mixin(lodash$3,(source={},baseForOwn(lodash$3,function(e,t){hasOwnProperty.call(lodash$3.prototype,t)||(source[t]=e)}),source),{chain:!1}),lodash$3.VERSION=VERSION,(lodash$3.templateSettings=string.templateSettings).imports._=lodash$3,arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){lodash$3[e].placeholder=lodash$3}),arrayEach(["drop","take"],function(e,t){LazyWrapper.prototype[e]=function(r){r=void 0===r?1:nativeMax(toInteger(r),0);var n=this.__filtered__&&!t?new LazyWrapper(this):this.clone();return n.__filtered__?n.__takeCount__=nativeMin(r,n.__takeCount__):n.__views__.push({size:nativeMin(r,MAX_ARRAY_LENGTH),type:e+(n.__dir__<0?"Right":"")}),n},LazyWrapper.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),arrayEach(["filter","map","takeWhile"],function(e,t){var r=t+1,n=r==LAZY_FILTER_FLAG||r==LAZY_WHILE_FLAG;LazyWrapper.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:baseIteratee(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}}),arrayEach(["head","last"],function(e,t){var r="take"+(t?"Right":"");LazyWrapper.prototype[e]=function(){return this[r](1).value()[0]}}),arrayEach(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");LazyWrapper.prototype[e]=function(){return this.__filtered__?new LazyWrapper(this):this[r](1)}}),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.find=function(e){return this.filter(e).head()},LazyWrapper.prototype.findLast=function(e){return this.reverse().find(e)},LazyWrapper.prototype.invokeMap=baseRest(function(e,t){return"function"==typeof e?new LazyWrapper(this):this.map(function(r){return baseInvoke(r,e,t)})}),LazyWrapper.prototype.reject=function(e){return this.filter(negate(baseIteratee(e)))},LazyWrapper.prototype.slice=function(e,t){e=toInteger(e);var r=this;return r.__filtered__&&(e>0||t<0)?new LazyWrapper(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),void 0!==t&&(r=(t=toInteger(t))<0?r.dropRight(-t):r.take(t-e)),r)},LazyWrapper.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(MAX_ARRAY_LENGTH)},baseForOwn(LazyWrapper.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),a=lodash$3[n?"take"+("last"==t?"Right":""):t],o=n||/^find/.test(t);a&&(lodash$3.prototype[t]=function(){var t=this.__wrapped__,i=n?[1]:arguments,s=t instanceof LazyWrapper,l=i[0],c=s||isArray$1(t),u=function(e){var t=a.apply(lodash$3,arrayPush([e],i));return n&&d?t[0]:t};c&&r&&"function"==typeof l&&1!=l.length&&(s=c=!1);var d=this.__chain__,h=!!this.__actions__.length,p=o&&!d,f=s&&!h;if(!o&&c){t=f?t:new LazyWrapper(this);var g=e.apply(t,i);return g.__actions__.push({func:thru,args:[u],thisArg:void 0}),new LodashWrapper(g,d)}return p&&f?e.apply(this,i):(g=this.thru(u),p?n?g.value()[0]:g.value():g)})}),arrayEach(["pop","push","shift","sort","splice","unshift"],function(e){var t=arrayProto[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);lodash$3.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var a=this.value();return t.apply(isArray$1(a)?a:[],e)}return this[r](function(r){return t.apply(isArray$1(r)?r:[],e)})}}),baseForOwn(LazyWrapper.prototype,function(e,t){var r=lodash$3[t];if(r){var n=r.name+"";hasOwnProperty.call(realNames,n)||(realNames[n]=[]),realNames[n].push({name:t,func:r})}}),realNames[createHybrid(void 0,WRAP_BIND_KEY_FLAG).name]=[{name:"wrapper",func:void 0}],LazyWrapper.prototype.clone=lazyClone,LazyWrapper.prototype.reverse=lazyReverse,LazyWrapper.prototype.value=lazyValue,lodash$3.prototype.at=seq.at,lodash$3.prototype.chain=seq.wrapperChain,lodash$3.prototype.commit=seq.commit,lodash$3.prototype.next=seq.next,lodash$3.prototype.plant=seq.plant,lodash$3.prototype.reverse=seq.reverse,lodash$3.prototype.toJSON=lodash$3.prototype.valueOf=lodash$3.prototype.value=seq.value,lodash$3.prototype.first=lodash$3.prototype.head,symIterator&&(lodash$3.prototype[symIterator]=seq.toIterator)
/**
	 * @license
	 * Lodash (Custom Build) <https://lodash.com/>
	 * Build: `lodash modularize exports="es" -o ./`
	 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	 * Released under MIT license <https://lodash.com/license>
	 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 */;var bcmodsdk={},hasRequiredBcmodsdk;function requireBcmodsdk(){return hasRequiredBcmodsdk||(hasRequiredBcmodsdk=1,e=bcmodsdk,function(){const t="1.2.0";function r(e){alert("Mod ERROR:\n"+e);const t=new Error(e);throw console.error(t),t}const n=new TextEncoder;function a(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function o(e){const t=new Set;return e.filter(e=>!t.has(e)&&t.add(e))}const i=new Map,s=new Set;function l(e){s.has(e)||(s.add(e),console.warn(e))}function c(e){const t=[],r=new Map,n=new Set;for(const a of p.values()){const o=a.patching.get(e.name);if(o){t.push(...o.hooks);for(const[t,i]of o.patches.entries())r.has(t)&&r.get(t)!==i&&l(`ModSDK: Mod '${a.name}' is patching function ${e.name} with same pattern that is already applied by different mod, but with different pattern:\nPattern:\n${t}\nPatch1:\n${r.get(t)||""}\nPatch2:\n${i}`),r.set(t,i),n.add(a.name)}}t.sort((e,t)=>t.priority-e.priority);const a=function(e,t){if(0===t.size)return e;let r=e.toString().replaceAll("\r\n","\n");for(const[n,a]of t.entries())r.includes(n)||l(`ModSDK: Patching ${e.name}: Patch ${n} not applied`),r=r.replaceAll(n,a);return(0,eval)(`(${r})`)}(e.original,r);let o=function(t){var r,o;const i=null===(o=(r=y.errorReporterHooks).hookChainExit)||void 0===o?void 0:o.call(r,e.name,n),s=a.apply(this,t);return null==i||i(),s};for(let r=t.length-1;r>=0;r--){const n=t[r],a=o;o=function(t){var r,o;const i=null===(o=(r=y.errorReporterHooks).hookEnter)||void 0===o?void 0:o.call(r,e.name,n.mod),s=n.hook.apply(this,[t,e=>{if(1!==arguments.length||!Array.isArray(t))throw new Error(`Mod ${n.mod} failed to call next hook: Expected args to be array, got ${typeof e}`);return a.call(this,e)}]);return null==i||i(),s}}return{hooks:t,patches:r,patchesSources:n,enter:o,final:a}}function u(e,t=!1){let r=i.get(e);if(r)t&&(r.precomputed=c(r));else{let t=window;const o=e.split(".");for(let r=0;r<o.length-1;r++)if(t=t[o[r]],!a(t))throw new Error(`ModSDK: Function ${e} to be patched not found; ${o.slice(0,r+1).join(".")} is not object`);const s=t[o[o.length-1]];if("function"!=typeof s)throw new Error(`ModSDK: Function ${e} to be patched not found`);const l=function(e){let t=-1;for(const r of n.encode(e)){let e=255&(t^r);for(let t=0;t<8;t++)e=1&e?-306674912^e>>>1:e>>>1;t=t>>>8^e}return((-1^t)>>>0).toString(16).padStart(8,"0").toUpperCase()}(s.toString().replaceAll("\r\n","\n")),u={name:e,original:s,originalHash:l};r=Object.assign(Object.assign({},u),{precomputed:c(u),router:()=>{},context:t,contextProperty:o[o.length-1]}),r.router=function(e){return function(...t){return e.precomputed.enter.apply(this,[t])}}(r),i.set(e,r),t[r.contextProperty]=r.router}return r}function d(){for(const e of i.values())e.precomputed=c(e)}function h(){const e=new Map;for(const[t,r]of i)e.set(t,{name:t,original:r.original,originalHash:r.originalHash,sdkEntrypoint:r.router,currentEntrypoint:r.context[r.contextProperty],hookedByMods:o(r.precomputed.hooks.map(e=>e.mod)),patchedByMods:Array.from(r.precomputed.patchesSources)});return e}const p=new Map;function f(e){p.get(e.name)!==e&&r(`Failed to unload mod '${e.name}': Not registered`),p.delete(e.name),e.loaded=!1,d()}function g(e,t){e&&"object"==typeof e||r("Failed to register mod: Expected info object, got "+typeof e),"string"==typeof e.name&&e.name||r("Failed to register mod: Expected name to be non-empty string, got "+typeof e.name);let n=`'${e.name}'`;"string"==typeof e.fullName&&e.fullName||r(`Failed to register mod ${n}: Expected fullName to be non-empty string, got ${typeof e.fullName}`),n=`'${e.fullName} (${e.name})'`,"string"!=typeof e.version&&r(`Failed to register mod ${n}: Expected version to be string, got ${typeof e.version}`),e.repository||(e.repository=void 0),void 0!==e.repository&&"string"!=typeof e.repository&&r(`Failed to register mod ${n}: Expected repository to be undefined or string, got ${typeof e.version}`),null==t&&(t={}),t&&"object"==typeof t||r(`Failed to register mod ${n}: Expected options to be undefined or object, got ${typeof t}`);const o=!0===t.allowReplace,i=p.get(e.name);i&&(i.allowReplace&&o||r(`Refusing to load mod ${n}: it is already loaded and doesn't allow being replaced.\nWas the mod loaded multiple times?`),f(i));const s=e=>{let t=h.patching.get(e.name);return t||(t={hooks:[],patches:new Map},h.patching.set(e.name,t)),t},l=(e,t)=>(...a)=>{var o,i;const s=null===(i=(o=y.errorReporterHooks).apiEndpointEnter)||void 0===i?void 0:i.call(o,e,h.name);h.loaded||r(`Mod ${n} attempted to call SDK function after being unloaded`);const l=t(...a);return null==s||s(),l},c={unload:l("unload",()=>f(h)),hookFunction:l("hookFunction",(e,t,a)=>{"string"==typeof e&&e||r(`Mod ${n} failed to patch a function: Expected function name string, got ${typeof e}`);const o=u(e),i=s(o);"number"!=typeof t&&r(`Mod ${n} failed to hook function '${e}': Expected priority number, got ${typeof t}`),"function"!=typeof a&&r(`Mod ${n} failed to hook function '${e}': Expected hook function, got ${typeof a}`);const l={mod:h.name,priority:t,hook:a};return i.hooks.push(l),d(),()=>{const e=i.hooks.indexOf(l);e>=0&&(i.hooks.splice(e,1),d())}}),patchFunction:l("patchFunction",(e,t)=>{"string"==typeof e&&e||r(`Mod ${n} failed to patch a function: Expected function name string, got ${typeof e}`);const o=u(e),i=s(o);a(t)||r(`Mod ${n} failed to patch function '${e}': Expected patches object, got ${typeof t}`);for(const[a,o]of Object.entries(t))"string"==typeof o?i.patches.set(a,o):null===o?i.patches.delete(a):r(`Mod ${n} failed to patch function '${e}': Invalid format of patch '${a}'`);d()}),removePatches:l("removePatches",e=>{"string"==typeof e&&e||r(`Mod ${n} failed to patch a function: Expected function name string, got ${typeof e}`);const t=u(e);s(t).patches.clear(),d()}),callOriginal:l("callOriginal",(e,t,a)=>{"string"==typeof e&&e||r(`Mod ${n} failed to call a function: Expected function name string, got ${typeof e}`);const o=u(e);return Array.isArray(t)||r(`Mod ${n} failed to call a function: Expected args array, got ${typeof t}`),o.original.apply(null!=a?a:globalThis,t)}),getOriginalHash:l("getOriginalHash",e=>("string"==typeof e&&e||r(`Mod ${n} failed to get hash: Expected function name string, got ${typeof e}`),u(e).originalHash))},h={name:e.name,fullName:e.fullName,version:e.version,repository:e.repository,allowReplace:o,api:c,loaded:!0,patching:new Map};return p.set(e.name,h),Object.freeze(c)}function m(){const e=[];for(const t of p.values())e.push({name:t.name,fullName:t.fullName,version:t.version,repository:t.repository});return e}let y;const b=void 0===window.bcModSdk?window.bcModSdk=function(){const e={version:t,apiVersion:1,registerMod:g,getModsInfo:m,getPatchingInfo:h,errorReporterHooks:Object.seal({apiEndpointEnter:null,hookEnter:null,hookChainExit:null})};return y=e,Object.freeze(e)}():(a(window.bcModSdk)||r("Failed to init Mod SDK: Name already in use"),1!==window.bcModSdk.apiVersion&&r(`Failed to init Mod SDK: Different version already loaded ('1.2.0' vs '${window.bcModSdk.version}')`),window.bcModSdk.version!==t&&alert(`Mod SDK warning: Loading different but compatible versions ('1.2.0' vs '${window.bcModSdk.version}')\nOne of mods you are using is using an old version of SDK. It will work for now but please inform author to update`),window.bcModSdk);Object.defineProperty(e,"__esModule",{value:!0}),e.default=b}()),bcmodsdk;var e}var bcmodsdkExports=requireBcmodsdk(),bcModSdk=getDefaultExportFromCjs(bcmodsdkExports),_MBSLog_instances,_MBSLog_log,_Version_string;const isArray=Array.isArray,keys=Object.keys,entries=Object.entries,fromEntries=Object.fromEntries;function includes(e,t){return e.includes(t)}const isInteger=Number.isInteger;class MBSLog extends Array{constructor(){super(...arguments),_MBSLog_instances.add(this)}debug(...e){__classPrivateFieldGet(this,_MBSLog_instances,"m",_MBSLog_log).call(this,"debug",e)}log(...e){__classPrivateFieldGet(this,_MBSLog_instances,"m",_MBSLog_log).call(this,"log",e)}warn(...e){__classPrivateFieldGet(this,_MBSLog_instances,"m",_MBSLog_log).call(this,"warn",e)}error(...e){__classPrivateFieldGet(this,_MBSLog_instances,"m",_MBSLog_log).call(this,"error",e)}}_MBSLog_instances=new WeakSet,_MBSLog_log=function(e,t){const r=new Date(Date.now());console[e]("MBS:",...t),this.push({date:r,level:e,args:t})};const logger=new MBSLog;function validateInt(e,t,r=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,a=null){if(a=null==a?"":`${a}: `,!(Number.isInteger(e)&&e>=r&&e<=n))throw"number"!=typeof e?new TypeError(`${a}Invalid "${t}" type: ${typeof e}`):Number.isInteger(e)?new RangeError(`${a}"${t}" must fall in the [${r}, ${n}] interval: ${e}`):new Error(`${a}"${t}" must be an integer: ${e}`)}function toStringTemplate(e,t){let r=`${e}(`;return r+=Object.values(t).map(e=>String(e)).join(", "),r+=")",r}const MBS_VERSION_PATTERN=/^(v?)([0-9]+)\.([0-9]+)\.([0-9]+)(\.\S+)?$/;class Version{constructor(e=0,t=0,r=0,n=!1){if(_Version_string.set(this,void 0),validateInt(e,"major",0,65535),validateInt(t,"minor",0,65535),validateInt(r,"micro",0,65535),"boolean"!=typeof n)throw new TypeError('Invalid "beta" type: '+typeof n);this.major=e,this.minor=t,this.micro=r,this.beta=n,__classPrivateFieldSet(this,_Version_string,[e,t,r].map(e=>String.fromCharCode(e))+String.fromCharCode(n?0:1),"f"),Object.freeze(this)}equal(e){return e instanceof Version&&this.valueOf()===e.valueOf()}greater(e){return e instanceof Version&&this.valueOf()>e.valueOf()}lesser(e){return e instanceof Version&&this.valueOf()<e.valueOf()}greaterOrEqual(e){return e instanceof Version&&this.valueOf()>=e.valueOf()}lesserOrEqual(e){return e instanceof Version&&this.valueOf()<=e.valueOf()}static fromVersion(e){const t=MBS_VERSION_PATTERN.exec(e);if(null===t)throw new Error(`Invalid "version": ${e}`);return new Version(Number(t[2]),Number(t[3]),Number(t[4]),void 0!==t[5])}static fromBCVersion(e){const t=GameVersionFormat.exec(e);if(null===t)throw new Error(`Invalid BC version: "${e}"`);return new Version(Number(t[1]),0,0,void 0!==t[2])}toString(){return toStringTemplate(typeof this,this.toJSON())}valueOf(){return __classPrivateFieldGet(this,_Version_string,"f")}toJSON(){return{major:this.major,minor:this.minor,micro:this.micro,beta:this.beta}}}_Version_string=new WeakMap;const BC_MIN_VERSION=122,bcListenerNames=["api","backgrounds","backport","changelog","crafting","equipper","fortune_wheel","garbling","mbs","new_items_screen","preset_screen","settings","settings_screen"];class BCListeners{constructor(){this.allNames=Object.freeze(new Set(bcListenerNames)),this.expectedNames=new Set(this.allNames),this.names=new Set,this.afterLoad={},this.afterLogin={},this.afterMBS={}}toJSON(){return{allNames:Array.from(this.allNames).sort(),afterLoad:Object.keys(this.afterLoad).sort(),afterLogin:Object.keys(this.afterLogin).sort(),afterMBS:Object.keys(this.afterMBS).sort()}}}const bcListeners=new BCListeners;async function contentLoadedListener(){await GameReadyState.load;const e=globalThis.GameVersion;if("string"!=typeof e||!GameVersionFormat.test(e))return logger.error(`Detected an invalid BC version: "${e}"`),logger.log("Unloading MBS from Mod SDK"),MBS_MOD_API.unload(),void(void 0!==e&&window.alert(`Aborting MBS initialization\nMBS ${MBS_VERSION} detected an invalid BC version: "${e}"`));const t=Version.fromBCVersion(e),r=Version.fromBCVersion(`R${BC_MIN_VERSION}`);if(t.lesser(r))return logger.error(`BC version "R${BC_MIN_VERSION}" or later required; detected "${e}"`),logger.log("Unloading MBS from Mod SDK"),MBS_MOD_API.unload(),void window.alert(`Aborting MBS initialization\nMBS ${MBS_VERSION} requires BC version "R${BC_MIN_VERSION}" or later\nDetected BC version: "${e}"`);logger.log(`Detected BC ${e}`),logger.debug("Executing afterLoad hooks",Object.keys(bcListeners.afterLoad).sort()),await Promise.all(Object.values(bcListeners.afterLoad).map(e=>e())),await ServerIsLoggedInAsync(),logger.debug("Executing afterLogin hooks",Object.keys(bcListeners.afterLogin).sort()),await Promise.all(Object.values(bcListeners.afterLogin).map(e=>e())),logger.debug("Executing afterMBS hooks",Object.keys(bcListeners.afterMBS).sort()),await Promise.all(Object.values(bcListeners.afterMBS).map(e=>e()))}function waitForBC(e,t){if(bcListeners.names.has(e))throw new Error(`BC listener "${e}" has already been registered`);if(!bcListeners.expectedNames.has(e))throw new Error(`Unknown BC listener: "${e}"`);return bcListeners.names.add(e),bcListeners.expectedNames.delete(e),t.afterLoad&&(bcListeners.afterLoad[e]=t.afterLoad),t.afterLogin&&(bcListeners.afterLogin[e]=t.afterLogin),t.afterMBS&&(bcListeners.afterMBS[e]=t.afterMBS),0===bcListeners.expectedNames.size&&("loading"!==document.readyState?contentLoadedListener():document.addEventListener("load",contentLoadedListener),!0)}var _ModAPIProxy_api,_ModAPIProxy_isLogged,_LoopIterator_list,_LoopIterator_index;const ALPHABET=Object.freeze(["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]);function padArray(e,t,r){if(validateInt(t,"n",0),!Array.isArray(e))throw new TypeError('Invalid "list" type: '+typeof e);const n=t-e.length;return n>0&&e.push(...Array(n).fill(r)),e}function trimArray(e,t){if(validateInt(t,"n",0),!Array.isArray(e))throw new TypeError('Invalid "list" type: '+typeof e);const r=e.length-t;return r>0&&e.splice(t,r),e}function getRandomPassword(e){return validateInt(e,"n",0,8),range(0,e).map(e=>sample(ALPHABET)).join("")}const MBS_MOD_INFO=Object.freeze({name:"MBS",fullName:"Maid's Bondage Scripts",repository:"https://github.com/bananarama92/MBS",version:MBS_VERSION}),MBS_MOD_API=bcModSdk.registerMod(MBS_MOD_INFO);class ModAPIProxy{constructor(){_ModAPIProxy_api.set(this,null),_ModAPIProxy_isLogged.set(this,!1)}get api(){if(null!==__classPrivateFieldGet(this,_ModAPIProxy_api,"f"))return __classPrivateFieldGet(this,_ModAPIProxy_api,"f");if("undefined"==typeof bcx||!CommonIsObject(bcx))return __classPrivateFieldGet(this,_ModAPIProxy_isLogged,"f")||(__classPrivateFieldSet(this,_ModAPIProxy_isLogged,!0,"f"),logger.debug("Failed to detect BCX")),__classPrivateFieldGet(this,_ModAPIProxy_api,"f");const e=bcx.versionParsed??{};return 1===e.major&&e.minor>=1&&(e.minor>1||e.patch>=7)?(__classPrivateFieldGet(this,_ModAPIProxy_isLogged,"f")||(__classPrivateFieldSet(this,_ModAPIProxy_isLogged,!0,"f"),logger.debug(`Detecting supported BCX version ${bcx.version}`)),__classPrivateFieldSet(this,_ModAPIProxy_api,bcx.getModApi("MBS"),"f")):(__classPrivateFieldGet(this,_ModAPIProxy_isLogged,"f")||(__classPrivateFieldSet(this,_ModAPIProxy_isLogged,!0,"f"),logger.debug(`Detecting unsupported BCX version ${bcx.version}; requires [1.1.7, 2.0)`)),__classPrivateFieldGet(this,_ModAPIProxy_api,"f"))}get modName(){return"MBS"}getRuleState(e){return this.api?.getRuleState(e)??null}getCurseInfo(e){return this.api?.getCurseInfo(e)??null}sendQuery(e,t,r,n){return this.api?.sendQuery(e,t,r,n)??Promise.resolve(null)}on(e,t){return this.api?.on(e,t)??(()=>{})}onAny(e){return this.api?.onAny(e)??(()=>{})}}_ModAPIProxy_api=new WeakMap,_ModAPIProxy_isLogged=new WeakMap;const BCX_MOD_API=new ModAPIProxy;class LoopIterator{get index(){return __classPrivateFieldGet(this,_LoopIterator_index,"f")}set index(e){this.setPosition(e)}get value(){return __classPrivateFieldGet(this,_LoopIterator_list,"f")[__classPrivateFieldGet(this,_LoopIterator_index,"f")]}get list(){return __classPrivateFieldGet(this,_LoopIterator_list,"f")}constructor(e,t=0){if(_LoopIterator_list.set(this,void 0),_LoopIterator_index.set(this,void 0),!isIterable(e))throw new TypeError('Invalid "iterable" type: '+typeof e);const r=Object.freeze([...e]);if(0===r.length)throw new Error('Passed "iterable" must contain at least one element');validateInt(t,"index",0,r.length-1),__classPrivateFieldSet(this,_LoopIterator_list,r,"f"),__classPrivateFieldSet(this,_LoopIterator_index,t,"f")}*[(_LoopIterator_list=new WeakMap,_LoopIterator_index=new WeakMap,Symbol.iterator)](){for(;;)yield this.next()}next(e=!0){const t=(__classPrivateFieldGet(this,_LoopIterator_index,"f")+1)%__classPrivateFieldGet(this,_LoopIterator_list,"f").length;return e&&__classPrivateFieldSet(this,_LoopIterator_index,t,"f"),__classPrivateFieldGet(this,_LoopIterator_list,"f")[t]}previous(e=!0){const t=(__classPrivateFieldGet(this,_LoopIterator_index,"f")+__classPrivateFieldGet(this,_LoopIterator_list,"f").length-1)%__classPrivateFieldGet(this,_LoopIterator_list,"f").length;return e&&__classPrivateFieldSet(this,_LoopIterator_index,t,"f"),__classPrivateFieldGet(this,_LoopIterator_list,"f")[t]}setPosition(e){validateInt(e,"index",0,__classPrivateFieldGet(this,_LoopIterator_list,"f").length-1),__classPrivateFieldSet(this,_LoopIterator_index,e,"f")}toString(){return toStringTemplate(typeof this,this.toJSON())}toJSON(){return{list:this.list,index:this.index}}}function generateIDs(e,t){if(validateInt(e,"start",0,65535),!isArray(t))throw new TypeError('Invalid "indices" type: '+typeof t);const r=e+Math.max(0,...t)+1;validateInt(r,"stop",e+1,65535);const n=range(e,r);return t.map(e=>String.fromCharCode(n[e]))}function isIterable(e){return Symbol.iterator in Object(e)}function validateBuiltinWheelIDs(){const e=String.fromCharCode(256),t=WheelFortuneOption.find(t=>void 0===t.Custom&&t.ID>=e);return void 0===t||(logger.warn("Aborting wheel of fortune hook initialization: Found one or more builtin wheel of fortune option-IDs outside of the extended ASCII range",t),!1)}const HOOK_FUNC_HASHES=Object.freeze(Object.fromEntries([["CraftingSaveServer",["025B434F"]],["CraftingClick",["518ADD1E"]],["CraftingRun",["2FDBFF13"]],["SpeechTransformProcess",["666DDA2F"]],["SpeechTransformGagGarble",["691A05BF"]],["WheelFortuneLoad",["58E058DD"]],["WheelFortuneClick",["D368BBF2"]],["WheelFortuneRun",["D4DF7BB8"]],["WheelFortuneMouseUp",["887E5D09"]],["WheelFortuneMouseDown",["78354D35"]],["WheelFortuneCustomizeLoad",["7A8DD30D"]],["WheelFortuneDrawWheel",["B21DAEA9"]]].map(e=>{const[t,r]=e,n=new Set(r.filter(e=>null!=e));return[t,Object.freeze(n)]})));function generateNewHookFuncHashes(){let e="";for(const[t,r]of Object.entries(HOOK_FUNC_HASHES)){e+=`["${t}", ["${MBS_MOD_API.getOriginalHash(t)}"]],\n`}logger.log(e)}function validateHookHashes(){const e={};for(const[t,r]of Object.entries(HOOK_FUNC_HASHES)){const n=MBS_MOD_API.getOriginalHash(t);r.has(n)||(e[t]=n)}const t=Object.values(e).length;0!==t&&logger.warn(`Found ${t} patched functions with an unknown hash`,e)}var changelog='<h1 id="mbs-changelog">MBS Changelog</h1>\n<h2 id="v1106">v1.10.6</h2>\n<ul>\n<li>Drop BC R121 support</li>\n<li>Backport three R123 bug fixes:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/6033">BondageProjects/Bondage-College#6033</a>: Fix the color spin buttons in the item color menu failing to switch to the next color</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/6035">BondageProjects/Bondage-College#6035</a>: Fix the missing entries for the minigame&#39;s administration screens</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/6036">BondageProjects/Bondage-College#6036</a>: Fix opening the color picker resetting layer opacities if the layers have distinct values</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1105">v1.10.5</h2>\n<ul>\n<li>Add BC R122Beta1 support</li>\n<li>Explicitly mark the &quot;filter by BC version&quot; dropdown in the shop as originating from MBS</li>\n</ul>\n<h2 id="v1104">v1.10.4</h2>\n<ul>\n<li>Drop BC R120 support</li>\n<li>Fix MBS local crafts only populating the player&#39;s crafting list after opening the crafting screen</li>\n<li>Remove a redundant <code>PreferenceExit()</code> call</li>\n<li>Prevent to MBS server crafts from migrating multiple times to base BC</li>\n<li>Backport one BC R121 hotfix:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5918">BondageProjects/Bondage-College#5918</a>: Fix crafting data failing to properly sync between players</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1103">v1.10.3</h2>\n<ul>\n<li>Move all MBS server crafts to BC starting from the full C R121 (non-beta) release<ul>\n<li>Starting from the full BC R121 release all &quot;MBS (Account)&quot; crafted items will be moved to base BC, utilizing its increase in crafting slot (from 80 to 200).\nAs a reminder: ensure that enough empty slots remain available for the migration.</li>\n</ul>\n</li>\n<li>Increase the max number of local MBS crafting slots from 160 to 600</li>\n<li>Add support for BC R121Beta1</li>\n<li>Fix an issue wherein registering MBS wheel of fortune listeners could crash if BC is insufficiently loaded at that point</li>\n<li>Ensure that the extensions preference subscreen is re-opened via <code>PreferenceOpenSubscreen()</code></li>\n</ul>\n<h2 id="v1102">v1.10.2</h2>\n<ul>\n<li>Vendor the ES module version of Dexie in order to circumvent its version check<ul>\n<li>Prevents Dexie&#39;s &quot;Two different versions of Dexie loaded in the same&quot; error from popping up if addons happen to be using mismatched versions</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1101">v1.10.1</h2>\n<ul>\n<li>Fix MBS server-stored crafts failing to load</li>\n</ul>\n<h2 id="v1100">v1.10.0</h2>\n<ul>\n<li>Add the ability to save crafted items locally in your browser. Note that these crafts are exclusive to a specific combination of BC account, web browser and BC server (<em>i.e.</em> no mixing of the US, EU and Asia servers)</li>\n<li>Provide increased clarification as to whether a craft is from base BC, MBS (server-stored) or MBS (locally-stored)</li>\n<li>Ensure that the crafting JSON exporter also exports the extra MBS crafts</li>\n<li>Drop BC R119 support</li>\n</ul>\n<h2 id="v196">v1.9.6</h2>\n<ul>\n<li>Add BC R120Beta1 support</li>\n</ul>\n<h2 id="v195">v1.9.5</h2>\n<ul>\n<li>Drop BC R118 support</li>\n<li>Ensure that the wheel of fortune does not try to remove BCX-cursed items or any items made unreachable by BCX-cursed items</li>\n<li>Fix <code>mbs.css</code> API calls failing to correctly apply their styling to buttons in a number of cases</li>\n<li>Fix checkbox marks persisting after hiding an MBS screen</li>\n</ul>\n<h2 id="v194">v1.9.4</h2>\n<ul>\n<li>Add BC R119 support</li>\n<li>Drop R117 support</li>\n</ul>\n<h2 id="v193">v1.9.3</h2>\n<ul>\n<li>Add BC R118Beta1 support</li>\n<li>Backport one BC R118 bug fix:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5674">BondageProjects/Bondage-College#5674</a>: Fix <code>ExtendedItemSetOptionByRecord()</code> unconditionally failing to handle non-extended items</li>\n</ul>\n</li>\n</ul>\n<h2 id="v192">v1.9.2</h2>\n<ul>\n<li>Drop R116 support</li>\n<li>Fix the cancel button being disabled when creating a new wheel item set</li>\n</ul>\n<h2 id="v191">v1.9.1</h2>\n<ul>\n<li>Add BC R117Beta1 support</li>\n<li>Fix an issue wherein the wheel of fortune preview character would fail to render</li>\n</ul>\n<h2 id="v190">v1.9.0</h2>\n<ul>\n<li>Backport the crafting mass import + export functionality<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5618">BondageProjects/Bondage-College#5618</a>: Add an importer + exporter for entire crafting inventories\n<img src="static/images/craft_mass_import.png" alt="Crafting import"></li>\n</ul>\n</li>\n</ul>\n<h2 id="v184">v1.8.4</h2>\n<ul>\n<li>Add support for BC R116Beta1</li>\n<li>Fix the <code>Opacity</code> item property not being considered legal for clothes</li>\n<li>Fix the &quot;Parse&quot; button in the fortune wheel customization menu raising if the name is empty</li>\n</ul>\n<h2 id="v183">v1.8.3</h2>\n<ul>\n<li>Adapt the mobile button tooltip patch to a BC hotfix</li>\n</ul>\n<h2 id="v182">v1.8.2</h2>\n<ul>\n<li>Wheel event API:<ul>\n<li>Fix the example mod names as used in the readme</li>\n<li>Clean up the styling of various kwarg-related DOM elements</li>\n<li>Fix default values of <code>number</code> kwarg inputs failing to be assigned</li>\n<li>Fix a failure to look up the original kwarg config</li>\n<li>Fix <code>number</code> kwargs improperly checking for finite values</li>\n<li>Make the wheel event registration logic more strict w.r.t. checking for MBS-esque names</li>\n</ul>\n</li>\n</ul>\n<h2 id="v181">v1.8.1</h2>\n<ul>\n<li>Fix a crash when creating a new wheel outfit</li>\n<li>Fix wheel of fortune hook kwargs not being initially disabled when creating new item sets</li>\n</ul>\n<h2 id="v180">v1.8.0</h2>\n<ul>\n<li>Drop support for BC R114</li>\n<li>Add support for building MBS with Node &gt;=22</li>\n<li>Make MBS&#39;s load system a bit more robust w.r.t. BC load errors</li>\n<li>Refactor the MBS&#39;s wheel of fortune outfit equipping logic, switching to an event-based structure</li>\n<li>Add the ability to register and use third-party, external addon-specific options when spinning the wheel of fortune. Such options can be used if the following three conditions are fulfilled:<ul>\n<li>An addon registers its own custom options for MBS</li>\n<li>The wheel owner enables and configures aforementioned option(s)</li>\n<li>The wheel spinner has the relevant third-party addon enabled and spins\n<img src="static/images/addon_config.png" alt="New items"></li>\n</ul>\n</li>\n<li>The MBS public API has been incremented to version 1.5, exposing a new <code>mbs.wheelEvents</code> namespace for registering wheel event listeners (see the API <a href="https://github.com/bananarama92/MBS/tree/main/api#readme">README</a> file for a few examples)</li>\n</ul>\n<h2 id="v1746">v1.7.46</h2>\n<ul>\n<li>Remove all reference to the old extended crafted description feature as it&#39;s been available in unmodded Bondage Club ever since R109 (see the crafting screen)</li>\n<li>Fix a <a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5347">BondageProjects/Bondage-College#5347</a> backport making player names in the chat log unselectable</li>\n</ul>\n<h2 id="v1745">v1.7.45</h2>\n<ul>\n<li>Fix a crash due to an invalid CSS selector in the MBS settings screen</li>\n<li>Fix a <a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5347">BondageProjects/Bondage-College#5347</a> backport crash due to usage of an invalid event listener</li>\n</ul>\n<h2 id="v1744">v1.7.44</h2>\n<ul>\n<li>Add BC R115Beta1 support</li>\n<li>Relax the validation of min/max opacities in wheel of fortune outfits</li>\n<li>Ensure that wheel-equipped crafted items are attributed to the wheel owner</li>\n<li>Backport one R115 BC change:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5347">BondageProjects/Bondage-College#5347</a>: Show DOM button tooltips on mobile after touching them for 300 ms</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1743">v1.7.43</h2>\n<ul>\n<li>Drop R113 support and add full R114 support</li>\n</ul>\n<h2 id="v1742">v1.7.42</h2>\n<ul>\n<li>Expand the number of supported wheel of fortune item properties<ul>\n<li>Includes, among others, expanded item opacity support</li>\n</ul>\n</li>\n<li>Add BC R114Beta1 support</li>\n<li>Backport two BC R114 fixes:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5438">BondageProjects/Bondage-College#5438</a>: Stop the tongue piercing gag from blocking its own group</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5440">BondageProjects/Bondage-College#5440</a>: Fix the wheel of fortune potentially initializing to the wrong character</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5447">BondageProjects/Bondage-College#5447</a>: Fix <code>CommonDynamicFunctionParams()</code> incorrectly parsing parameters of length 0</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1741">v1.7.41</h2>\n<ul>\n<li>Backport three BC R114 fixes:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5433">BondageProjects/Bondage-College#5433</a>: Make the <code>dialog</code> status scroll + expand upon overflow rather than clamping</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5429">BondageProjects/Bondage-College#5429</a>: Fix password padlock drawing hint text with last assigned color</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5432">BondageProjects/Bondage-College#5432</a>: Connect normalize</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1740">v1.7.40</h2>\n<ul>\n<li>Drop R112 support</li>\n<li>Restructure the way MBS handles the detection of BC and BC logins</li>\n<li>Misc cleanup of the MBS settings screen</li>\n<li>Backport two R113 hotfixes:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5410">BondageProjects/Bondage-College#5410</a>: Ensures that updating <code>C.Stage</code> and <code>C.CurrentDialog</code> triggers an appropriate dialog menu reload</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5412">BondageProjects/Bondage-College#5412</a>: Fix <code>ElementButton</code> creator function failing to properly expand the <code>options.icons</code> array</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1739">v1.7.39</h2>\n<ul>\n<li>Update build dependencies</li>\n<li>Add BC R113Beta1 support</li>\n</ul>\n<h2 id="v1738">v1.7.38</h2>\n<ul>\n<li>Fix the players <code>FocusGroup</code> grid persisting after performing an activity</li>\n</ul>\n<h2 id="v1737">v1.7.37</h2>\n<ul>\n<li>Backport two more R113 fixes:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5383">BondageProjects/Bondage-College#5383</a>: Misc chat-related styling changes</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5389">BondageProjects/Bondage-College#5389</a>: Fix <code>DialogLeave()</code> clearing the player&#39;s focus group if there&#39;s no current character</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1736">v1.7.36</h2>\n<ul>\n<li>Backport two R113 fixes:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5377">BondageProjects/Bondage-College#5377</a>: Fix an issue wherein the focus group could be <code>null</code></li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5378">BondageProjects/Bondage-College#5378</a>: Fix more unintended dialog refreshes</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1735">v1.7.35</h2>\n<ul>\n<li>Drop R110 support</li>\n<li>Forcefully set the <code>&lt;select&gt;</code>-element text color to black (affects specific browsers such as iOS Safari)</li>\n<li>Add R112Beta1 support</li>\n<li>Backport five R112 changes to R111:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5309">BondageProjects/Bondage-College#5309</a>: Add styling for un-toggleable radio buttons</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5348">BondageProjects/Bondage-College#5348</a>: Ensure that crafted items are first sorted by asset name and then custom craft name</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5349">BondageProjects/Bondage-College#5349</a>: Change the crafting description text-alignment to <code>left</code></li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5357">BondageProjects/Bondage-College#5357</a>: Provide better DOM element support for older browsers</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5360">BondageProjects/Bondage-College#5360</a>: Fix the padlock validation failing to properly validate the <code>Lock</code> effect</li>\n</ul>\n</li>\n<li>Backport one R112-Beta2 change to R112-Beta1:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5364">BondageProjects/Bondage-College#5364</a>: Do not set the button aria-labelledby/describedby attribute if there&#39;s no tooltip</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1734">v1.7.34</h2>\n<ul>\n<li>Fix the MBS changelog showing up more than intended</li>\n<li>Add R111Beta1 support</li>\n</ul>\n<h2 id="v1733">v1.7.33</h2>\n<ul>\n<li>Backport four R111 bug fixes:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5264">BondageProjects/Bondage-College#5264</a>: Ensure that voice-triggered auto-punishments more thoroughly check for OOC blocks</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5272">BondageProjects/Bondage-College#5272</a>: Silence deprecation warning about mobile-web-app-capable</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5274">BondageProjects/Bondage-College#5274</a>: Fix the shop not properly unhiding DOM elements after exiting certain subscreens</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5290">BondageProjects/Bondage-College#5290</a>: Fix blur effects being enabled by default when rendering backgrounds</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1732">v1.7.32</h2>\n<ul>\n<li>Drop R109 support</li>\n<li>Add a setting for enabling or disabling MBS changelog notifications</li>\n<li>Add a BC version selection dropdown in the shop</li>\n</ul>\n<h2 id="v1731">v1.7.31</h2>\n<ul>\n<li>Backport one R111 feature:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5254">BondageProjects/Bondage-College#5254</a>: Add the <code>/changelog</code> chat command</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1730">v1.7.30</h2>\n<ul>\n<li>Drop R108 support</li>\n<li>Add R110Beta1 support</li>\n<li>Backport one R110 bug fix:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5237">BondageProjects/Bondage-College#5237</a>: Fix <code>CraftingDescription.Decode</code> failing to properly handle zero-terminated bits</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1729">v1.7.29</h2>\n<ul>\n<li>Add R109Beta1 support</li>\n</ul>\n<h2 id="v1728">v1.7.28</h2>\n<ul>\n<li>Disable MBS&#39;s extended crafting descriptions in R109 in favor of BC&#39;s native implementation</li>\n</ul>\n<h2 id="v1727">v1.7.27</h2>\n<ul>\n<li>Drop R107 support</li>\n<li>Ensure that exiting the MBS preference screen returns one to the preference extension subscreen</li>\n<li>Backport two R109 changes:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5205">BondageProjects/Bondage-College#5205</a>: Take <code>Asset.CraftGroup</code> into account when sorting crafted items</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5207">BondageProjects/Bondage-College#5207</a>: Fix two crafting screen bugs</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5208">BondageProjects/Bondage-College#5208</a>: Fix the appropriate default color failing to be selected upon creating a new crafted item</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1726">v1.7.26</h2>\n<ul>\n<li>Add R108Beta1 support</li>\n<li>Move the MBS preferences from <code>Preferences &gt; MBS</code> to <code>Preferences &gt; Extensions &gt; MBS</code> starting from R108</li>\n<li>Partially backport two changes to R108Beta1:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5187">BondageProjects/Bondage-College#5187</a>: Minor crafting UI-related tweaks</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5188">BondageProjects/Bondage-College#5188</a>: Fix the subscreen exiting logic in <code>PreferenceExit()</code> and <code>PreferenceSubscreenExtensionsExit()</code></li>\n</ul>\n</li>\n</ul>\n<h2 id="v1725">v1.7.25</h2>\n<ul>\n<li>Set the max supported BC version to R107 until full beta support can be added</li>\n</ul>\n<h2 id="v1724">v1.7.24</h2>\n<ul>\n<li>Fix extended crafting descriptions sometimes dropping the last character</li>\n</ul>\n<h2 id="v1723">v1.7.23</h2>\n<ul>\n<li>Add a missing extended crafted item description check to <code>CraftingModeSet</code></li>\n</ul>\n<h2 id="v1722">v1.7.22</h2>\n<ul>\n<li>Include the new BC EU host URL in the MBS user script</li>\n<li>Add the ability to create crafted item description with up to 398 &quot;simple&quot; characters (<em>i.e.</em> extended ASCII).\nThis functionality can be enabled under <code>Preferences</code> &gt; <code>MBS Settings</code>.\nNote that these descriptions will only be legible for MBS users.</li>\n</ul>\n<h2 id="v1721">v1.7.21</h2>\n<ul>\n<li>Drop R106 support</li>\n<li>Update reported R107 items</li>\n</ul>\n<h2 id="v1720">v1.7.20</h2>\n<ul>\n<li>Add R107Beta1 support</li>\n<li>Drop R105 support</li>\n</ul>\n<h2 id="v1719">v1.7.19</h2>\n<ul>\n<li>Add R106Beta1 support</li>\n<li>Show the MBS changelog in the chat</li>\n<li>Add the <code>/mbschangelog</code> chat command to show the latest MBS changelog (default behavior) or alternatively the changelog of a specific version or version range.</li>\n</ul>\n<h2 id="v1718">v1.7.18</h2>\n<ul>\n<li>Backport two bug fixes:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5108">BondageProjects/Bondage-College#5108</a>: Fix number inputs being clamped to zero if no min/max is specified on the input element</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5109">BondageProjects/Bondage-College#5109</a>: Fix item visibility settings not saving</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1717">v1.7.17</h2>\n<ul>\n<li>Drop R104 support</li>\n</ul>\n<h2 id="v1716">v1.7.16</h2>\n<ul>\n<li>Add R105Beta1 support</li>\n</ul>\n<h2 id="v1715">v1.7.15</h2>\n<ul>\n<li>Allow search inputs to provide suggestions<ul>\n<li>Backports <a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5065">BondageProjects/Bondage-College#5065</a>: Offer search suggestions when typing into search bars</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1714">v1.7.14</h2>\n<ul>\n<li>Switch a few remaining units from viewport- to dynamic viewport</li>\n<li>Chat room separator tweaks (xref <a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5063">BondageProjects/Bondage-College#5063</a>: Various minor chat room separator adjustments):<ul>\n<li>Fix the spurious chat room separator transparency when in sens dep</li>\n<li>Ensure that the chat room separator buttons are unfocused on mobile after a click</li>\n<li>Ensure that sending a message or action scrolls the chat area to the bottom</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1713">v1.7.13</h2>\n<ul>\n<li>New improvements to the chat room separator</li>\n<li>Backport a pose-related bug fix<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5059">BondageProjects/Bondage-College#5059</a>: Fix the freeze effect accidentally limiting upper body changes</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1712">v1.7.12</h2>\n<ul>\n<li>Backport PR 5508 - Make the chat room separator much more fancier<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5058">BondageProjects/Bondage-College#5058</a>: Make the chat room separator much more fancier</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1711">v1.7.11</h2>\n<ul>\n<li>Fix another crash in the fortune wheel command screen</li>\n</ul>\n<h2 id="v1710">v1.7.10</h2>\n<ul>\n<li>Fix a crash in the fortune wheel command screen</li>\n</ul>\n<h2 id="v179">v1.7.9</h2>\n<ul>\n<li>Use a hook for patching <code>Layering._ApplyAssetPriority</code></li>\n</ul>\n<h2 id="v178">v1.7.8</h2>\n<ul>\n<li>Backport two R105 bug fixes<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5052">BondageProjects/Bondage-College#5052</a>: fix <code>PreferenceSubscreenExtensionsClear()</code> when the optional unload function is undefined</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5055">BondageProjects/Bondage-College#5055</a>: Disable layering for locked items that one cannot unlock</li>\n</ul>\n</li>\n</ul>\n<h2 id="v177">v1.7.7</h2>\n<ul>\n<li>Drop BC R103 support</li>\n<li>Fix the screen shape not being passed on to the fortune wheel command screen</li>\n</ul>\n<h2 id="v176">v1.7.6</h2>\n<ul>\n<li>Fix the R104 alignment of the item version filter</li>\n</ul>\n<h2 id="v174">v1.7.4</h2>\n<ul>\n<li>Switch from viewport- to dynamic viewport units. This should provide a more consistent UI positioning on mobile.</li>\n<li>Add BC R104Beta1 support</li>\n</ul>\n<h2 id="v173">v1.7.3</h2>\n<ul>\n<li>Fix a race condition related to the alternate garbling initialization</li>\n</ul>\n<h2 id="v172">v1.7.2</h2>\n<ul>\n<li>Fix the shop not showing newly released assets</li>\n</ul>\n<h2 id="v171">v1.7.1</h2>\n<ul>\n<li>Improve button alignment in the wheel of fortune item set menu</li>\n<li>Use custom <code>text</code>-based inputs (rather than <code>time</code>-based) for the wheel of fortune timers;\nfixes the odd time-offsets and AM/PM markers occasionally observed.</li>\n</ul>\n<h2 id="v170">v1.7.0</h2>\n<ul>\n<li>Increment the MBS API to version 1.4:<ul>\n<li>Relicense the <code>mbs.css</code> API under terms of LPGL-v3</li>\n</ul>\n</li>\n</ul>\n<h2 id="v163">v1.6.3</h2>\n<ul>\n<li>Drop support for BC R102</li>\n<li>Fix the save-condition being broken for the fortune wheel commands screen</li>\n</ul>\n<h2 id="v162">v1.6.2</h2>\n<ul>\n<li>Update for BC R103Beta2</li>\n<li>Add a safeguard for loading MBS while the <code>WheelFortuneCustomize</code> screen is open</li>\n<li>Remote-fetch the alternative garbling JSON data rather than directly vendoring it (again...)</li>\n<li>Fix various OOC-related issues related to alternative garbling</li>\n<li>Add the option to vary the (alternative) garbling strength per syllable</li>\n<li>Switch from the en_UK phonetic data to the larger en_US dataset</li>\n</ul>\n<h2 id="v161">v1.6.1</h2>\n<ul>\n<li>Fix the garbling JSON data failing to load</li>\n</ul>\n<h2 id="v160">v1.6.0</h2>\n<ul>\n<li>Experimental: Add an alternative form of more phonetically-acurate garbling based on Cordelia Mist&#39;s <a href="https://github.com/CordeliaMist/Dalamud-GagSpeak">Dalamud-GagSpeak</a>.\nNote that the alternative garbling is disabled by default.</li>\n<li>Add support for BC R103Beta1</li>\n</ul>\n<h2 id="v150">v1.5.0</h2>\n<ul>\n<li>Use DOM elements for all remaining MBS screens, wrapping up the DOM-ification</li>\n<li>Remove a few redundant functions and replace the with lodash equivalents</li>\n<li>Reduce the tooltip overlap in the wheel preset screen and improve the tooltip standardization</li>\n<li>Further centralize the CSS styling</li>\n<li>Add safeguards for loading MBS while the preference- or wheel screen is open</li>\n<li>Increment the MBS API to version 1.3:<ul>\n<li>Add the new <code>mbs.css</code> namespace, which contains functions modifying MBS&#39;s style sheets.</li>\n</ul>\n</li>\n</ul>\n<h2 id="v147">v1.4.7</h2>\n<ul>\n<li>Fix the MBS settings menu sometimes requiring two clicks to exit</li>\n<li>Fix the MBS settings menu locking being incorrectly locked when restrained</li>\n</ul>\n<h2 id="v146">v1.4.6</h2>\n<ul>\n<li>Use DOM elements for the MBS preference screens</li>\n<li>Bump the BC mod SDK to 1.2.0</li>\n</ul>\n<h2 id="v145">v1.4.5</h2>\n<ul>\n<li>Remove MBS&#39;s dedicated &quot;show new item screen&quot; buttons when in R103</li>\n<li>Rewrite the MBS fortune wheel preset screen using DOM elements</li>\n</ul>\n<h2 id="v144">v1.4.4</h2>\n<ul>\n<li>Fix the broken exit button image in the MBS wheel of fortune selection menu</li>\n<li>Rewrite the MBS fortune wheel item set screen using DOM elements</li>\n</ul>\n<h2 id="v143">v1.4.3</h2>\n<ul>\n<li>Remove the the fortune wheel option hiding checkbox</li>\n<li>Fix the <a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4900">BondageProjects/Bondage-College#4900</a> backport not hiding owner/lovers/family-locked items when required</li>\n<li>Rewrite the MBS fortune wheel selection screen using DOM elements; add a scroll bar</li>\n<li>Fix spurious MBS warnings about duplicate crafts</li>\n</ul>\n<h2 id="v142">v1.4.2</h2>\n<ul>\n<li>Drop support for BCR101</li>\n<li>Fix the FUSAM button not disappearing when accessing the SHOP via the MBS preferences menu</li>\n<li>Backport one BC R103 change to R102:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4900">BondageProjects/Bondage-College#4900</a>: Optimize the handling of crafted items in <code>DialogInventoryBuild</code></li>\n</ul>\n</li>\n</ul>\n<h2 id="v141">v1.4.1</h2>\n<ul>\n<li>Fix unconditional accessing of a BC R102 variable</li>\n</ul>\n<h2 id="v140">v1.4.0</h2>\n<ul>\n<li>Increment the MBS API to version 1.2:<ul>\n<li>Guarantee that the <code>mbs.getDebug()</code> output strings are JSON-safe</li>\n<li>Provide better documentation regarding when features were added to the API</li>\n</ul>\n</li>\n<li>Add the ability to import &amp; export MBS settings</li>\n<li>Send a beep to the player if errors are encountered while initializing MBS settings</li>\n<li>Add support for BC R102</li>\n<li>Deprecate MBS&#39; custom entry points for the Show New Items menu, all of which will be removed in R103.\nOnce R102 is live (or its beta), you can use the Club Shop button in the main hall or the <code>/shop</code> chat command instead.</li>\n</ul>\n<h2 id="v137">v1.3.7</h2>\n<ul>\n<li>Minor UI adjustments in the wheel of fortune screens</li>\n<li>Add the option to change an items color in the show new items menu</li>\n<li>Drop support for BC R100</li>\n</ul>\n<h2 id="v136">v1.3.6</h2>\n<ul>\n<li>Do not display the wheel storage size for non-player characters</li>\n<li>Fix the reported index for entries in the wheel customization menu</li>\n<li>Fix the show now item buy menu failing to update for items with no buygroup</li>\n<li>Misc minor changes to how the data storage size is reported</li>\n</ul>\n<h2 id="v135">v1.3.5</h2>\n<ul>\n<li>Refactor the logic for checking whether BC is properly loaded or not</li>\n<li>Re-enable the storing of crafted item descriptions in the wheel of fortune, reverting their previous removal in MBS v0.6.22</li>\n<li>Add checks to ensure that MBS does not exceed the 180 KB storage limit for its shared settings, exceeding of which can cause crashes and unstable behavior in BC</li>\n</ul>\n<h2 id="v134">v1.3.4</h2>\n<ul>\n<li>Add R101Beta2 support; no support for Beta1 will be added</li>\n<li>Let the Show New Items menu display whether the player has F-/M-only shop items enabled</li>\n<li>Bump the MBS build target from ES2020 to ES2021</li>\n</ul>\n<h2 id="v133">v1.3.3</h2>\n<ul>\n<li>Backport three BC R101 fixes to R100 (and fixed the KD one from MBS v1.3.2):<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4777">BondageProjects/Bondage-College#4777</a>: Fix eye colour reset on expression clear</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4779">BondageProjects/Bondage-College#4779</a>: Fix <code>Item.Property</code> not always properly initializing in KD</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4780">BondageProjects/Bondage-College#4780</a>: Fix the futuristic harness ball gag auto-inflation triggering validation</li>\n</ul>\n</li>\n</ul>\n<h2 id="v132">v1.3.2</h2>\n<ul>\n<li>Add the ability to buy items from the Show New Items menu</li>\n<li>Add safeguards in the MBS API for checking whether MBS is fully loaded already</li>\n<li>Fix the new item preview refreshing to the wrong outfit</li>\n<li>Ensure that the Show New Items menu respect the players <code>HideShopItems</code> setting</li>\n</ul>\n<h2 id="v131">v1.3.1</h2>\n<ul>\n<li>Add a duration-tooltip for the builtin BC wheel options in the preset config screen</li>\n<li>Add extended item screen support to the Show New Item menu</li>\n<li>Allow chatroom backgrounds to show in the Show New Item menu</li>\n</ul>\n<h2 id="v130">v1.3.0</h2>\n<ul>\n<li>Ensure that the Show New Item preview does not remove new items when switching clothing mode</li>\n<li>Restructure the MBS files and directories</li>\n<li>Add a new screen for storing wheel of fortune option presets\n<img src="static/images/preset.png" alt="New items"></li>\n</ul>\n<h2 id="v122">v1.2.2</h2>\n<ul>\n<li>Fix a the Show New Item menu preview again only partially resetting</li>\n</ul>\n<h2 id="v121">v1.2.1</h2>\n<ul>\n<li>Fix a the Show New Item menu preview only partially resetting</li>\n<li>Fix a crash when paginating in the Show New Item menu</li>\n<li>Add a button the to MBS preference screen for accessing the Show New Item menu</li>\n</ul>\n<h2 id="v120">v1.2.0</h2>\n<ul>\n<li>Add a new button in the main hallway for showing all new items added in the current version (beta or otherwise):\n<img src="static/images/new_beta_items.png" alt="New items"></li>\n</ul>\n<h2 id="v117">v1.1.7</h2>\n<ul>\n<li>Add R100Beta1 support</li>\n<li>Backport two BC R100Beta2 fixes to R100Beta1:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4740">BondageProjects/Bondage-College#4740</a>: Fix <code>PreferenceArousalSettingsValidate</code> calling the wrong cloning function</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4741">BondageProjects/Bondage-College#4741</a>: Ensure that the <code>GameVersion</code> validation modifies the players game version when required</li>\n</ul>\n</li>\n</ul>\n<h2 id="v116">v1.1.6</h2>\n<ul>\n<li>Drop BC R98 support</li>\n</ul>\n<h2 id="v115">v1.1.5</h2>\n<ul>\n<li>Fix a faulty <code>TypeRecord</code> check</li>\n</ul>\n<h2 id="v114">v1.1.4</h2>\n<ul>\n<li>Add R99Beta1 support</li>\n<li>Add a dedicated MBS logger.</li>\n<li>Increment the MBS API to version 1.1:<ul>\n<li>Expose <code>mbs.getDebug()</code> to the API</li>\n</ul>\n</li>\n<li>Backport one BC R99Beta2 fix to R99Beta1:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4662">BondageProjects/Bondage-College#4662</a>: Various <code>TypeRecord</code>-related fixes</li>\n</ul>\n</li>\n</ul>\n<h2 id="v113">v1.1.3</h2>\n<ul>\n<li>Fix (non-shared) MBS settings not saving</li>\n</ul>\n<h2 id="v111">v1.1.1</h2>\n<ul>\n<li>Misc CI updates</li>\n<li>Remove the last <code>OnlineSettings</code> remnants</li>\n<li>Provide more console output upon encountering errors related to MBS extra crafting items</li>\n<li>Register an MBS debugger to FUSAM</li>\n<li>Backport one BC R99 fix:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4610">BondageProjects/Bondage-College#4610</a>: Remove <code>InventoryAllow</code> checks from <code>DialogMenuButtonBuild()</code></li>\n</ul>\n</li>\n</ul>\n<h2 id="v110">v1.1.0</h2>\n<ul>\n<li>Add the ability to specify weights for wheel of fortune options</li>\n<li>Move <code>OnlineSettings</code> to <code>ExtensionSettings</code>. Note that this does not affect data stored in <code>OnlineSharedSettings</code>.</li>\n<li>Append the MBS version with the git tag on non-release commits</li>\n<li>Backport three BC R99 fixes:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4602">BondageProjects/Bondage-College#4602</a>: Allow to specify <code>Top</code>/<code>Left</code> on a pose-by-pose basis</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4604">BondageProjects/Bondage-College#4604</a>: Fix the futuristic gag auto inflation tripping up on the <code>Init</code> validation</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4605">BondageProjects/Bondage-College#4605</a>: Properly implement Advanced vibrator mode support for the vibrating item <code>Init</code> validation</li>\n</ul>\n</li>\n</ul>\n<h2 id="v101">v1.0.1</h2>\n<ul>\n<li>Drop support for BC R98</li>\n<li>Backport one BC R98 hotfix:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4597">BondageProjects/Bondage-College#4597</a>: Fix a validation loop triggered by the love chastity belt</li>\n</ul>\n</li>\n</ul>\n<h2 id="v100">v1.0.0</h2>\n<ul>\n<li>Add full R98Beta1 support</li>\n<li>Added a button for clearing all MBS data</li>\n</ul>\n<h2 id="v0628">v0.6.28</h2>\n<ul>\n<li>Add preliminarily R98 support</li>\n<li>Formalize and expand the MBS API with <code>API_VERSION</code> and the <code>wheelOutfits</code> namespace</li>\n</ul>\n<h2 id="v0627">v0.6.27</h2>\n<ul>\n<li>Remove more R96 leftovers</li>\n<li>Fix a faulty check for the presence of LSCG</li>\n</ul>\n<h2 id="v0626">v0.6.26</h2>\n<ul>\n<li>Fix the parsing of outfit codes with extended items sometimes raising</li>\n<li>Refactor and deduplicate elements shared between <code>Settings</code> and <code>OnlineSharedSettings</code></li>\n<li>Install BC-stubs via NPM rather than vendoring them</li>\n<li>Drop support for BC R97</li>\n<li>Special case LSCG item-specific keywords, allowing them in wheel of fortune crafted item descriptions</li>\n</ul>\n<h2 id="v0625">v0.6.25</h2>\n<ul>\n<li>Minor wheel of fortune performance improvement (requires BC R97Beta1 or later)</li>\n<li>Backport two R97Beta2 bug fixes to R97Beta1:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4508">BondageProjects/Bondage-College#4508</a>: Fix items not being applicable anymore</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4509">BondageProjects/Bondage-College#4509</a>: Fix <code>CantChangeWhileLocked</code> stopping player-made changes to the crafting preview character when tied up</li>\n</ul>\n</li>\n</ul>\n<h2 id="v0624">v0.6.24</h2>\n<ul>\n<li>Add support for BC R97Beta1</li>\n<li>Add the option to disallow wheel spins while restrained</li>\n<li>Made the wheel of fortune character preview more responsive (requires BC R97Beta1 or later)</li>\n</ul>\n<h2 id="v0623">v0.6.23</h2>\n<ul>\n<li>Use heavier MBS settings compression</li>\n</ul>\n<h2 id="v0622">v0.6.22</h2>\n<ul>\n<li>Optimize the amount of stored server-side data</li>\n<li>Crafted items applied by the wheel of fortune no longer have a description in order to save on data</li>\n</ul>\n<h2 id="v0621">v0.6.21</h2>\n<ul>\n<li>Add the option to forgo any locks when equipping fortune wheel item sets</li>\n</ul>\n<h2 id="v0620">v0.6.20</h2>\n<ul>\n<li>Drop support for BC R95</li>\n<li>Update the MBS URL&#39;s in the bookmark &amp; *.user.js files with a cache bust.</li>\n<li>Backport two R97 bug fixes:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4478">BondageProjects/Bondage-College#4478</a>: Fix a bunch issues related to the forbidden chastity belt and bra</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4475">BondageProjects/Bondage-College#4475</a>: Fix the crafting validation sometimes looking up the wrong asset</li>\n</ul>\n</li>\n</ul>\n<h2 id="v0619">v0.6.19</h2>\n<ul>\n<li>Add support for BC R96Beta1</li>\n</ul>\n<h2 id="v0618">v0.6.18</h2>\n<ul>\n<li>Update type annotations for BC R95Beta1</li>\n<li>Increase the maximum number of wheel of fortune item sets and commands to 32</li>\n</ul>\n<h2 id="v0617">v0.6.17</h2>\n<ul>\n<li>Perform stricter validation of wheel of fortune embedded items</li>\n<li>Fix the wheel of fortune preview character failing to equip items if the player is enclosed</li>\n</ul>\n<h2 id="v0616">v0.6.16</h2>\n<ul>\n<li>Fix <code>PreferenceExit</code> not being called when opening the MBS preference screen</li>\n</ul>\n<h2 id="v0615">v0.6.15</h2>\n<ul>\n<li>Drop support for BC R95</li>\n<li>Fix a double call to <code>PreferenceLoad</code> when exiting the MBS settings screen</li>\n</ul>\n<h2 id="v0614">v0.6.14</h2>\n<ul>\n<li>Update for R94Beta3</li>\n</ul>\n<h2 id="v0613">v0.6.13</h2>\n<ul>\n<li>More crafting duplication fixes</li>\n</ul>\n<h2 id="v0612">v0.6.12</h2>\n<ul>\n<li>Add even more safeguards against crafting duplication</li>\n</ul>\n<h2 id="v0610">v0.6.10</h2>\n<ul>\n<li>Fix a bug that would cause crafting item duplication when upgrading from BC R93 to R94</li>\n</ul>\n<h2 id="v069">v0.6.9</h2>\n<ul>\n<li>Adapt to BC R94Beta1 failing to actually increment its version</li>\n</ul>\n<h2 id="v068">v0.6.8</h2>\n<ul>\n<li>Add full support for BC R94Beta1</li>\n<li>Increase the number of crafting slots from 100 to 160</li>\n</ul>\n<h2 id="v067">v0.6.7</h2>\n<ul>\n<li>Ensure that ModSDK hooks always call <code>next()</code></li>\n<li>Add basic support for BC R94Beta1</li>\n<li>Increase the max number of lines for crafted item descriptions to 7</li>\n</ul>\n<h2 id="v066">v0.6.6</h2>\n<ul>\n<li>Fix an incompatibility between MBS settings screen and BCTweaks</li>\n</ul>\n<h2 id="v065">v0.6.5</h2>\n<ul>\n<li>Update type annotations for BC R93</li>\n<li>Drop support for BC R92</li>\n<li>Added a basic MBS settings menu to the BC preferences</li>\n<li>Increase the maximum description length of crafted items from 100 to 200</li>\n</ul>\n<h2 id="v064">v0.6.4</h2>\n<ul>\n<li>Update type annotations for BC R93Beta1</li>\n<li>Misc GitHub Actions workflow maintenance</li>\n<li>Backport two BC R93Beta2 bug fixes to R93Beta1<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4289">BondageProjects/Bondage-College#4289</a>: Remove the <code>TapedHands</code> entry from the <code>HideForPose</code> array of handheld items</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4290">BondageProjects/Bondage-College#4290</a>: Fix a hard-coded <code>IsOwnedByPlayer</code> check</li>\n</ul>\n</li>\n</ul>\n<h2 id="v063">v0.6.3</h2>\n<ul>\n<li>Add support for storing record-based <code>Item.OverridePriority</code> values</li>\n<li>Fix the bookmark loader URL</li>\n</ul>\n<h2 id="v062">v0.6.2</h2>\n<ul>\n<li>Misc CI fixes</li>\n</ul>\n<h2 id="v061">v0.6.1</h2>\n<ul>\n<li>Drop support for BC R91</li>\n<li>Do not send a version-update beep when installing MBS for the first time</li>\n<li>Overhauled the build artifact storage system</li>\n<li>Demand that at least one wheel of fortune lock flag is enabled</li>\n<li>Add support for saving futuristic training belt properties</li>\n</ul>\n<h2 id="v060">v0.6.0</h2>\n<ul>\n<li>Allow the specification of custom timer lock durations for the wheel of fortune</li>\n<li>Reduced the number of exposed functions</li>\n<li>Backport two more BC R92Beta2 bug fixes to R92Beta1<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4204">BondageProjects/Bondage-College#4204</a>: Fix a crash with the color picker when on mobile</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4207">BondageProjects/Bondage-College#4207</a>: Fix subscreens not opening when the respective super-screen option was previously already selected</li>\n</ul>\n</li>\n</ul>\n<h2 id="v0514">v0.5.14</h2>\n<ul>\n<li>Backport two BC R92Beta2 bug fixes to R92Beta1<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4202">BondageProjects/Bondage-College#4202</a>: Fix the high-sec and intricate locks not being unlockable</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4203">BondageProjects/Bondage-College#4203</a>: Make the two chastity shields block clit activities</li>\n</ul>\n</li>\n</ul>\n<h2 id="v0513">v0.5.13</h2>\n<ul>\n<li>Full R92Beta1 support</li>\n<li>Various misc Github Actions related updates</li>\n</ul>\n<h2 id="v0512">v0.5.12</h2>\n<ul>\n<li>Preliminary R92Beta1 compatibility changes</li>\n</ul>\n<h2 id="v0511">v0.5.11</h2>\n<ul>\n<li>Add formal R91 support and drop R90 support</li>\n<li>Fix certain wheel checks being skipped if an item is added without replacement</li>\n</ul>\n<h2 id="v0510">v0.5.10</h2>\n<ul>\n<li>Update type annotations for R91Beta1</li>\n<li>Add a few minor R91Beta1 fixes</li>\n</ul>\n<h2 id="v059">v0.5.9</h2>\n<ul>\n<li>Fix a bug that could cause MBS to crash if zero flags were selected for a particular fortune wheel item set.</li>\n</ul>\n<h2 id="v058">v0.5.8</h2>\n<ul>\n<li>Backport even more BC R91 bug fixes<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4049">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4049</a></li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4057">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4057</a></li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4062">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4062</a></li>\n</ul>\n</li>\n</ul>\n<h2 id="v057">v0.5.7</h2>\n<ul>\n<li>Backport a number of BC R91 bug fixes<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4044">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4044</a></li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4046">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4046</a></li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4047">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4047</a></li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4048">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4048</a></li>\n</ul>\n</li>\n</ul>\n<h2 id="v056">v0.5.6</h2>\n<ul>\n<li>Drop support for R89</li>\n<li>Attach build artifacts whenever creating a new release</li>\n<li>Bump dev dependencies</li>\n<li>Add more conveniently typed variations of a few stdlib functions</li>\n<li>Misc improvements to the player settings parsing</li>\n</ul>\n<h2 id="v055">v0.5.5</h2>\n<ul>\n<li>Revert the <a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4030">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4030</a> port-forward patch.</li>\n</ul>\n<h2 id="v054">v0.5.4</h2>\n<ul>\n<li>Port forward a few more BC R90Beta3 bug fixes to R90Beta2 (xref <a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4030">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4030</a>, <a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4031">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4031</a> and <a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4033">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4033</a>)</li>\n</ul>\n<h2 id="v053">v0.5.3</h2>\n<ul>\n<li>Port forward a BC R90Beta2 crash fix to R90Beta1 (xref <a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4023">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4023</a>)</li>\n<li>Remove an unused function</li>\n</ul>\n<h2 id="v052">v0.5.2</h2>\n<ul>\n<li>Fix the name of the <code>MiniGame</code> module</li>\n<li>Ensure that colors are always copied when creating items</li>\n<li>Update type annotations for BC R90Beta1</li>\n<li>Allow custom item sets to be specified via (serialized) single items in addition to item lists (for real this time...)</li>\n</ul>\n<h2 id="v051">v0.5.1</h2>\n<ul>\n<li>Fix the &quot;Missing outfit&quot; error message not showing</li>\n<li>Allow custom item sets to be specified via (serialized) single items in addition to item lists</li>\n</ul>\n<h2 id="v050">v0.5.0</h2>\n<ul>\n<li>Add a MBS test suite</li>\n<li>Drop BC R88 support</li>\n<li>Expand the BC .d.ts stub files with those autogenerated from BC</li>\n<li>Add custom classes for managing (sub-)screens</li>\n<li>Add the option to create custom wheel of fortune (RP) commands:\n<img src="static/images/spin_command.png" alt="Command example"></li>\n</ul>\n<h2 id="v045">v0.4.5</h2>\n<ul>\n<li>Fix the <code>padArray</code> and <code>trimArray</code> logic; make them more lenient</li>\n</ul>\n<h2 id="v044">v0.4.4</h2>\n<ul>\n<li>Properly respect items with the <code>Enclose</code> effect such as the futuristic create</li>\n<li>Do not attempt to wear clothes if one is wearing a clubsslave collar</li>\n<li>Allow <code>FortuneWheelOption.Script</code> to be used on arbitrary player- and simple characters</li>\n</ul>\n<h2 id="v043">v0.4.3</h2>\n<ul>\n<li>Fix <code>Item.Craft</code> not being properly copied</li>\n<li>Further enforce the immutability of <code>FortuneWheelItem</code></li>\n</ul>\n<h2 id="v042">v0.4.2</h2>\n<ul>\n<li>Fixed a crash that could occur when BCX is not installed</li>\n<li>Fixed builtin MBS options not properly saving</li>\n</ul>\n<h2 id="v041">v0.4.1</h2>\n<ul>\n<li>Consolidate and expand the BC validation</li>\n<li>Allow custom wheel of fortune item sets to store the <code>OverrideHeight</code> property</li>\n<li>Check for the BCX <code>alt_allow_changing_appearance</code> rule when determining whether cosplay items can be changed</li>\n<li>Add <code>lodash</code> as a dependency; remove <code>mapsort</code></li>\n<li>Fix custom override priorities of the builtin MBS item sets</li>\n<li>Check whether an item is not blocked at the room level before equipping</li>\n</ul>\n<h2 id="v040">v0.4.0</h2>\n<ul>\n<li>Place the <code>ITEM_SET_TYPE_DICT</code> and <code>MBSDummy</code> initialization behind a <code>waitFor</code> guard</li>\n<li>Split <code>common</code> into two modules</li>\n<li>Fix the previously broken <code>Version.beta</code> comparison</li>\n<li>Overhaul the ID assignment of custom item sets; make it more robust</li>\n<li>Add <code>mapsort</code> as a dependency</li>\n<li>Ensure that the previous item set is properly unregistered before saving a new one</li>\n<li>Fix a potential issue with the BC version comparison</li>\n<li>Resize the preview character for a better fit</li>\n<li>Up the number of custom item slots from 14 to 16</li>\n</ul>\n<h2 id="v033">v0.3.3</h2>\n<ul>\n<li>Ensure that MBS does not throw literals as exceptions</li>\n<li>Fix the vibrator mode not being properly read for custom outfits</li>\n<li>Various fixes and improvements related to the futuristic vibrator</li>\n<li>Update <code>MBSSelect.currentFortuneWheelSets</code> when saving/removing wheel of fortune outfits</li>\n</ul>\n<h2 id="v032">v0.3.2</h2>\n<ul>\n<li>Minor bugfixes related to interactions with people that lack MBS</li>\n<li>Make the inspection of other people&#39;s custom item sets a bit more robust</li>\n</ul>\n<h2 id="v031">v0.3.1</h2>\n<ul>\n<li>Minor improvements to the README documentation</li>\n<li>Minor <code>pushMBSSettings</code> optimizations</li>\n<li>Raise whenever an unsupported BC version is detected</li>\n<li>Always check for <code>null</code> when performing <code>typeof ... &quot;object&quot;</code> checks</li>\n</ul>\n<h2 id="v030">v0.3.0</h2>\n<ul>\n<li>Expand the list of padlocks that MBS can (potentially) remove, including support for BCX&#39;s <code>block_keyuse_self</code> rule</li>\n<li>Switch from LGPL3 to GPL3</li>\n<li>Up the priority of the <code>WheelFortuneLoad</code> and <code>WheelFortuneExit</code> hooks</li>\n<li>Try to unequip blocking restraints, even if their group does not intersect with the to-be equipped item set</li>\n<li>Fix the wheel of fortune item set preview using the incorrect item set list when viewing other players</li>\n<li>Fix the petrifcation wheel of fortune option occasionally failing to properly color the skin</li>\n</ul>\n<h2 id="v023">v0.2.3</h2>\n<ul>\n<li>Ensure that crafting ID lists are joined via empty strings rather than commas</li>\n</ul>\n<h2 id="v022">v0.2.2</h2>\n<ul>\n<li>Allow the viewing other people&#39;s wheel of fortune item set config</li>\n<li>Create a dedicated MBS changelog file</li>\n<li>Report the changelog whenever the MBS version is incremented</li>\n</ul>\n<h2 id="v021">v0.2.1</h2>\n<ul>\n<li>Fix the first-time initialization of the MBS wheel of fortune settings</li>\n</ul>\n<h2 id="v020">v0.2.0</h2>\n<ul>\n<li>Add the option to create custom wheel of fortune outfits\n<img src="static/images/config.png" alt="Item set example"></li>\n</ul>\n<h2 id="v0118">v0.1.18</h2>\n<ul>\n<li>Always disallow the wheel of fortune to remove owner-/lovers locked items,\neven when decoy restraints are used</li>\n</ul>\n<h2 id="v0117">v0.1.17</h2>\n<ul>\n<li>Add a new petrification-based wheel of fortune option</li>\n<li>Make the first-time initialization of MBS settings more robust</li>\n</ul>\n<h2 id="v0116">v0.1.16</h2>\n<ul>\n<li>Add bookmark-based installation instructions</li>\n<li>Ensure that the user.js scripts are also pushed to github pages</li>\n<li>Add MBS settings and cache the extra crafting items in the MBS settings</li>\n<li>Minor adjustments to the bondage maid outfit color and boots</li>\n</ul>\n<h2 id="v0115">v0.1.15</h2>\n<ul>\n<li>Do not set the member number for locks as this will cause the player to see its password</li>\n<li>Do not let the crafting check raise if the user does not own an item</li>\n<li>Only load MBS after BC is properly loaded</li>\n</ul>\n<h2 id="v0114">v0.1.14</h2>\n<ul>\n<li>Make specifying the strip level mandatory and expand on the available levels</li>\n<li>Add a new mummy outfit for the wheel of fortune</li>\n<li>Add a new bondage maid outfit for the wheel of fortune</li>\n</ul>\n<h2 id="v0113">v0.1.13</h2>\n<ul>\n<li>Fix the downloadURL of the user.js files</li>\n<li>Lower the priority of the futuristic harness</li>\n<li>Allow the removal of locked decoy restraints</li>\n</ul>\n<h2 id="v0112">v0.1.12</h2>\n<ul>\n<li>Use the player&#39;s member number rather than ID</li>\n<li>Check for the Lock effect rather than the presence of a lock</li>\n</ul>\n<h2 id="v0111">v0.1.11</h2>\n<ul>\n<li>Log it whenever a wheel of fortune item fails to equip</li>\n<li>Make the dev and normal <code>user.js</code> scripts more distinct</li>\n<li>Ensure that <code>playerNakedNoCosplay</code> modifies the appearance inplace</li>\n</ul>\n<h2 id="v0110">v0.1.10</h2>\n<ul>\n<li>Ensure that a assigned Typed item properties are copied</li>\n</ul>\n<h2 id="v019">v0.1.9</h2>\n<ul>\n<li>Never strip the character of their cosplay items, regardless of permission settings</li>\n<li>Use the <code>Puzzling</code> crafting property with the High security PSO bondage wheel of fortune option</li>\n</ul>\n<h2 id="v018">v0.1.8</h2>\n<ul>\n<li>Add additional wheel of fortune options based on the PSO (permanently sealed object) suit.</li>\n<li>Bump the number of available crafting slots from 40 to 100.</li>\n</ul>\n';function getGitTags(){const e=Version.fromVersion(MBS_VERSION),t=`#v${e.major}${e.minor}${e.micro}`;return e.beta?["blob/devel",""]:["blob/main",t]}function getChangeLogURL(){const e=getGitTags();return`https://github.com/bananarama92/MBS/${e[0]}/CHANGELOG.md${e[1]}`}async function showChangelog(e,t=null){const r=document.getElementById("mbs-changelog");if(r){if(r.getAttribute("data-start")===e&&r.getAttribute("data-stop")===t)return r.remove(),void ChatRoomAppendChat(r);r.remove()}const n=Version.fromVersion(MBS_VERSION).beta?"devel":"main",a=changelog.replaceAll('<img src="static/images/',`<img src="https://bananarama92.github.io/MBS/${n}/images/`);if(document.getElementById("TextAreaChatLog"))CommandsChangelog.Publish(a,{id:"mbs-changelog",href:`https://github.com/bananarama92/MBS/blob/${n}/CHANGELOG.md`,startID:e,stopID:t});else{let r=!1;MBS_MOD_API.hookFunction("ChatRoomCreateElement",0,(o,i)=>{const s=i(o);return r||(r=!0,CommandsChangelog.Publish(a,{id:"mbs-changelog",href:`https://github.com/bananarama92/MBS/blob/${n}/CHANGELOG.md`,startID:e,stopID:t})),s})}}const VERSION_PATTERN=/^(v?)([0-9]+)(\.([0-9]+))?(\.([0-9]+))?(\.\S+)?$/i;function showChangelogSync(e,t,r){const n=r[0]?VERSION_PATTERN.exec(r[0]):null,a=r[1]?VERSION_PATTERN.exec(r[1]):null;let o=null,i=null;if(n&&a){const e=new Version(Number.parseInt(n[2],10),Number.parseInt(n[4]||"0",10),Number.parseInt(n[6]||"0",10)),t=new Version(Number.parseInt(a[2],10),Number.parseInt(a[4]||"0",10),Number.parseInt(a[6]||"0",10));e.greater(t)?(o=`v${e.major}${e.minor}${e.micro}`,i=`v${t.major}${t.minor}${t.micro}`):(o=`v${t.major}${t.minor}${t.micro}`,i=`v${e.major}${e.minor}${e.micro}`)}else if(n)o=`v${n[2]}${n[4]||0}${n[6]||0}`;else if(a)o=`v${a[2]}${a[4]||0}${a[6]||0}`;else{const e=Version.fromVersion(MBS_VERSION);o=`v${e.major}${e.minor}${e.beta?e.micro-1:e.micro}`}showChangelog(o,i)}function _validateNumber$1(e,t,r){if("number"!=typeof e.default)throw new TypeError(`${r}: Invalid kwarg "${t}.default" type: "${typeof e.default}"`);if(!Number.isFinite(e.default))throw new Error(`${r}: Invalid kwarg "${t}.default" value: "${e.default}"`);if("number"!=typeof e.min)throw new TypeError(`${r}: Invalid kwarg "${t}.min" type: "${typeof e.min}"`);if(!Number.isFinite(e.min))throw new Error(`${r}: Invalid kwarg "${t}.min" value: "${e.min}"`);if("number"!=typeof e.max)throw new TypeError(`${r}: Invalid kwarg "${t}.max" type: "${typeof e.max}"`);if(!Number.isFinite(e.max))throw new Error(`${r}: Invalid kwarg "${t}.max" value: "${e.max}"`);if(null!=e.step){if("number"!=typeof e.step)throw new TypeError(`${r}: Invalid kwarg "${t}.step" type: "${typeof e.step}"`);if(!Number.isFinite(e.step))throw new Error(`${r}: Invalid kwarg "${t}.step" value: "${e.step}"`)}if(null!=e.inputmode&&"numeric"!=e.inputmode&&"decimal"!=e.inputmode)throw new Error(`${r}: Invalid kwarg "${t}.inputmode" value: "${e.inputmode}"`);if(null!=e.suggestions){if(!isArray(e.suggestions))throw new TypeError(`${r}: Invalid kwarg "${t}.suggestions" type: "${typeof e.suggestions}"`);if(!e.suggestions.every(e=>"number"==typeof e))throw new Error(`${r}: Invalid kwarg "${t}.suggestions" value: all array member must be numbers`);if(!e.suggestions.every(t=>t>=e.min&&t<=e.max))throw new RangeError(`${r}: Invalid kwarg "${t}.suggestions" value: all array member must lie in the [${t}.min, ${t}.max] interval`)}if(e.max<e.min)throw new Error(`${r}: Kwarg "${t}.min" cannot be larger than "${t}.max"`);if(e.default<e.min)throw new Error(`${r}: Kwarg "${t}.min" cannot be larger than "${t}.default"`);if(e.max<e.default)throw new Error(`${r}: Kwarg "${t}.default" cannot be larger than "${t}.max"`)}function _validateText$1(e,t,r){if("string"!=typeof e.default)throw new TypeError(`${r}: Invalid kwarg "${t}.default" type: "${typeof e.default}"`);if(null!=e.minlength&&validateInt(e.minlength,"kwarg.minlength",0,void 0,r),null!=e.maxlength&&validateInt(e.maxlength,"kwarg.maxlength",1,void 0,r),null!=e.spellcheck&&"boolean"!=typeof e.spellcheck)throw new TypeError(`${r}: Invalid kwarg "${t}.spellcheck" type: "${typeof e.spellcheck}"`);if(null!=e.pattern&&"string"!=typeof e.pattern&&!(e.pattern instanceof RegExp))throw new TypeError(`${r}: Invalid kwarg "${t}.pattern" type: "${typeof e.pattern}"`);if(null!=e.suggestions&&!isArray(e.suggestions))throw new TypeError(`${r}: Invalid kwarg "${t}.suggestions" type: "${typeof e.suggestions}"`);if(!(e.suggestions??[]).every(e=>"string"==typeof e))throw new Error(`${r}: Invalid kwarg "${t}.suggestions" value: all array member must be strings`);if(null!=e.minlength&&null!=e.maxlength&&e.minlength>e.maxlength)throw new Error(`${r}: Kwarg "${t}.minlength" cannot be larger than "${t}.maxlength"`)}function _validateCheckbox$1(e,t,r){if("boolean"!=typeof e.default)throw new TypeError(`${r}: Invalid kwarg "${t}.default" type: "${typeof e.default}"`)}function _validateSelect$1(e,t,r){if(null!=e.size&&validateInt(e.size,"kwarg.size",0,void 0,r),null!=e.required&&"boolean"!=typeof e.required)throw new TypeError(`${r}: Invalid kwarg "${t}.required" type: "${typeof e.required}"`);if(!isArray(e.options))throw new TypeError(`${r}: Invalid kwarg "${t}.options" type: "${typeof e.options}"`);if(0===e.options.length)throw new TypeError(`${r}: Invalid kwarg "${t}.options" value: array must be of length >=1`);let n=0;for(const a of e.options){if(!CommonIsObject(a))throw new TypeError(`${r}: Invalid kwarg "${t}.options" value: array member is of invalid type "${typeof e.options}"`);if("string"!=typeof a.label)throw new TypeError(`${r}: Invalid kwarg "${t}.options" value: array member labels must be strings`);if(!a.label)throw new Error(`${r}: Invalid kwarg "${t}.options" value: array member labels must be non-empty strings`);if(null!=a.value&&"string"!=typeof a.value)throw new TypeError(`${r}: Invalid kwarg "${t}.options" value: array member values must be nullish or strings`);if(a.default&&n++,null!=a.default&&"boolean"!=typeof a.default)throw new TypeError(`${r}: Invalid kwarg "${t}.options" value: array member defaults must nullish or booleans`);if(null!=a.group&&"string"!=typeof a.group)throw new TypeError(`${r}: Invalid kwarg "${t}.options" value: array member groups must nullish or booleans`)}if("select"===e.type&&n>1)throw new Error(`${r}: Invalid kwarg "${t}.options" value: array cannot have more than one default option`)}function validateKwargsConfig(e,t){for(const[r,n]of Object.entries(e)){if(!r)throw new Error(`${t}: Invalid kwarg "${r}" name; string must be non-empty`);if(!CommonIsObject(n))throw new TypeError(`${t}: Invalid kwarg"${r}" type: "${typeof n}"`);if("string"!=typeof n.type)throw new TypeError(`${t}: Invalid kwarg "${r}.type" type: "${typeof n.type}"`);if("string"!=typeof n.label)throw new TypeError(`${t}: Invalid kwarg "${r}.label" type: "${typeof n.label}"`);if(!n.label)throw new Error(`${t}: Invalid kwarg "${r}.label" value: string must be non-empty`);switch(n.type){case"number":_validateNumber$1(n,r,t);break;case"text":_validateText$1(n,r,t);break;case"checkbox":_validateCheckbox$1(n,r,t);break;case"select":case"select-multiple":_validateSelect$1(n,r,t);break;default:throw new Error(`${t}: Unknown "${r}" kwarg.type value: "${n.type}"`)}}}function _getChangeInput(e){return function(t){const r=this.closest(".mbs-fwitemset-event"),n=r?.getAttribute("data-name"),a=r?.getAttribute("data-type"),o=r?.getAttribute("data-mod"),i=e.activeHooks.get(`${o}-${a}-${n}`),s=this.closest("label")?.querySelector(".mbs-fwitemset-event-error-msg");if(!i||!s||!n)return void t.stopImmediatePropagation();if(!this.validity.valid)return s.textContent=` (${this.validationMessage})`,void t.stopImmediatePropagation();s.textContent="";const l=this.name;switch(this.type){case"number":i.kwargs.set(l,{type:"number",value:this.valueAsNumber});break;case"text":i.kwargs.set(l,{type:"text",value:this.value});break;case"checkbox":i.kwargs.set(l,{type:"checkbox",value:this.checked})}}}function _getChangeSelect(e){return function(t){const r=this.closest(".mbs-fwitemset-event"),n=r?.getAttribute("data-name"),a=r?.getAttribute("data-type"),o=r?.getAttribute("data-mod"),i=e.activeHooks.get(`${o}-${a}-${n}`),s=this.closest("label")?.querySelector(".mbs-fwitemset-event-error-msg");if(!s||!i||!n)return void t.stopImmediatePropagation();if(!this.validity.valid)return s.textContent=` (${this.validationMessage})`,void t.stopImmediatePropagation();s.textContent="";const l=this.name;i.kwargs.set(l,{type:"select",value:this.value})}}function _getChangeSelectMultiple(e){return function(t){const r=this.closest(".mbs-fwitemset-event"),n=r?.getAttribute("data-name"),a=r?.getAttribute("data-type"),o=r?.getAttribute("data-mod"),i=e.activeHooks.get(`${o}-${a}-${n}`),s=this.closest("label")?.querySelector(".mbs-fwitemset-event-error-msg");if(!i||!s||!n)return void t.stopImmediatePropagation();if(this.required){const e=!Array.from(this.selectedOptions).some(e=>e.value);this.setCustomValidity(e?"Please select one or more items in the list":"")}if(!this.validity.valid)return s.textContent=` (${this.validationMessage})`,void t.stopImmediatePropagation();let l;s.textContent="";const c=new Set;l=0===this.selectedOptions.length?"none":this.selectedOptions.length===this.options.length?"all":"some";for(const e of this.selectedOptions)e.value&&c.add(e.value);const u=this.name;i.kwargs.set(u,{type:"select-multiple",state:l,value:c})}}function _parseText(e,t,r,n){const a=[r.default];let o;return r.suggestions&&(a.push(jsxRuntimeExports.jsx("datalist",{id:`${e}-${t}-datalist`,children:r.suggestions.map(e=>jsxRuntimeExports.jsx("option",{children:e}))})),o=`${e}-${t}-datalist`),ElementCreate({tag:"input",attributes:{type:"text",minlength:r.minlength,maxlength:r.maxlength,pattern:r.pattern instanceof RegExp?r.pattern.source:r.pattern,spellcheck:r.spellcheck,list:o,size:0,name:t,disabled:!0},classList:["mbs-fwitemset-event-kwarg-config"],children:a,eventListeners:{change:_getChangeInput(n)}})}function _parseNumber(e,t,r,n){const a=[];let o;r.suggestions&&(a.push(jsxRuntimeExports.jsx("datalist",{id:`${e}-${t}-datalist`,children:r.suggestions.map(e=>jsxRuntimeExports.jsx("option",{children:e}))})),o=`${e}-${t}-datalist`);const i=Number.isInteger(r.default)&&Number.isInteger(r.min)&&Number.isInteger(r.max)&&(null==r.step||Number.isInteger(r.step))?"numeric":"decimal";return ElementCreate({tag:"input",attributes:{type:"number",min:r.min,max:r.max,value:r.default,step:null==r.step?void 0:r.step,inputmode:r.inputmode??i,list:o,size:0,name:t,disabled:!0},children:a,classList:["mbs-fwitemset-event-kwarg-config"],eventListeners:{change:_getChangeInput(n),wheel(e){if(this.disabled||document.activeElement!==this)e.stopImmediatePropagation();else{if(e.preventDefault(),e.deltaY<0)this.stepUp();else{if(!(e.deltaY>0))return;this.stepDown()}this.dispatchEvent(new InputEvent("input"))}}}})}function _parseCheckbox(e,t,r,n){return ElementCreate({tag:"input",attributes:{type:"checkbox",checked:r.default,name:t,disabled:!0},classList:["checkbox","mbs-fwitemset-event-kwarg-config"],eventListeners:{change:_getChangeInput(n)}})}function _selectAll(){const e=this.getAttribute("aria-controls"),t=e?document.getElementById(e):null,r=this.hasAttribute("data-select-all");if(t instanceof HTMLSelectElement){for(const e of t.options)e.selected=r;t.dispatchEvent(new Event("change")),t.focus()}}function _parseSelect(e,t,r,n){const a=[],o={};let i=0;for(const e of r.options){(e.group?o[e.group]??=[]:a).push(ElementCreate({tag:"option",attributes:{selected:e.default,value:e.value},children:[e.label]})),e.default&&i++}for(const[e,t]of Object.entries(o))a.push(jsxRuntimeExports.jsx("optgroup",{label:e,children:t}));const s=[];switch(r.type){case"select":if(i>1)throw new Error(`Keyword argument "${t}" of type "${r.type}" has more than one default value (${i})`);s.push(jsxRuntimeExports.jsx("option",{selected:!0,"aria-hidden":"true",children:"--Select an option--"}));break;case"select-multiple":break;default:throw new Error}s.forEach(e=>e.setAttribute("value","")),a.unshift(...s,jsxRuntimeExports.jsx("hr",{}));const l=ElementCreate({tag:"select",attributes:{multiple:"select-multiple"===r.type,required:r.required,size:"select-multiple"===r.type?r.size??5:r.size,name:t,disabled:!0,id:`${e}-select`},classList:["mbs-fwitemset-event-kwarg-config"],eventListeners:{change:"select"===r.type?_getChangeSelect(n):_getChangeSelectMultiple(n),focus(){try{this.showPicker?.()}catch{return}}},children:a});return"select"===r.type?l:jsxRuntimeExports.jsxs("div",{class:"mbs-fwitemset-event-multi-select",role:"group",children:[l,ElementButton.Create(`${e}-select-all`,_selectAll,{label:"Select all",labelPosition:"center"},{button:{attributes:{"aria-controls":`${e}-select`,"screen-generated":void 0},dataAttributes:{selectAll:""},classList:["mbs-fwitemset-event-kwarg-config"]}}),ElementButton.Create(`${e}-select-none`,_selectAll,{label:"Select none",labelPosition:"center"},{button:{attributes:{"aria-controls":`${e}-select`,"screen-generated":void 0},classList:["mbs-fwitemset-event-kwarg-config"]}})]})}function createKwargElements(e,t,r){const n=[];for(const[a,o]of Object.entries(t)){let t;switch(o.type){case"text":t=_parseText(`${e}-${a}`,a,o,r);break;case"number":t=_parseNumber(`${e}-${a}`,a,o,r);break;case"checkbox":t=_parseCheckbox(`${e}-${a}`,a,o,r);break;case"select-multiple":case"select":t=_parseSelect(`${e}-${a}`,a,o,r);break;default:throw new Error(`Unknown options type: ${o.type}`)}n.push(jsxRuntimeExports.jsxs("label",{id:`${e}-${a}`,class:"mbs-fwitemset-event-kwargs",role:"listitem",children:[jsxRuntimeExports.jsxs("span",{children:[o.label,jsxRuntimeExports.jsx("span",{class:"mbs-fwitemset-event-error-msg"})]}),t]}))}return n}function _resetKwargElement(e){if(e instanceof HTMLInputElement)switch(e.type){case"checkbox":e.checked=e.defaultChecked;break;case"number":case"text":e.value=e.defaultValue}else if(e instanceof HTMLSelectElement)for(const t of e.options)t.selected=t.defaultSelected}function resetKwargElements(e,t){e.querySelectorAll(".mbs-fwitemset-event-kwarg-config").forEach(e=>{_resetKwargElement(e),e.toggleAttribute("disabled",t)})}function updateKwargElements(e,t,r){for(const n of e.querySelectorAll(".mbs-fwitemset-event-kwarg-config")){if(n instanceof HTMLButtonElement){n.toggleAttribute("disabled",r);continue}const e=n.getAttribute("name");if(!e)continue;const a=t.get(e);switch(a?.type){case"checkbox":n instanceof HTMLInputElement&&"checkbox"===n.type&&(n.checked=a.value);break;case"text":n instanceof HTMLInputElement&&"text"===n.type&&(n.value=a.value);break;case"number":n instanceof HTMLInputElement&&"number"===n.type&&(n.valueAsNumber=a.value);break;case"select-multiple":case"select":if(n instanceof HTMLSelectElement){const e=a.value instanceof Set?a.value:new Set([a.value]);for(const t of n.options)"none"===a.state?t.selected=!1:"all"===a.state?t.selected=!0:t.selected=e.has(t.value)}break;default:_resetKwargElement(n)}n.toggleAttribute("disabled",r)}}waitForBC("changelog",{async afterLoad(){CommandCombine({Tag:"mbschangelog",Description:"[version-start] [version-end]: Show the changelog(s) of the specified MBS version or version range; defaults to the latest version",Action:showChangelogSync})}});var lodash$2={exports:{}},lodash$1=lodash$2.exports,hasRequiredLodash;
/**
	 * @license
	 * Lodash <https://lodash.com/>
	 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	 * Released under MIT license <https://lodash.com/license>
	 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 */function requireLodash(){return hasRequiredLodash||(hasRequiredLodash=1,function(e,t){(function(){var r,n="Expected a function",a="__lodash_hash_undefined__",o="__lodash_placeholder__",i=16,s=32,l=64,c=128,u=256,d=1/0,h=9007199254740991,p=NaN,f=4294967295,g=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",i],["flip",512],["partial",s],["partialRight",l],["rearg",u]],m="[object Arguments]",y="[object Array]",b="[object Boolean]",v="[object Date]",S="[object Error]",R="[object Function]",_="[object GeneratorFunction]",w="[object Map]",B="[object Number]",C="[object Object]",P="[object Promise]",k="[object RegExp]",$="[object Set]",E="[object String]",I="[object Symbol]",A="[object WeakMap]",x="[object ArrayBuffer]",M="[object DataView]",F="[object Float32Array]",L="[object Float64Array]",T="[object Int8Array]",O="[object Int16Array]",H="[object Int32Array]",j="[object Uint8Array]",D="[object Uint8ClampedArray]",N="[object Uint16Array]",G="[object Uint32Array]",W=/\b__p \+= '';/g,q=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,U=/&(?:amp|lt|gt|quot|#39);/g,V=/[&<>"']/g,K=RegExp(U.source),Y=RegExp(V.source),X=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ee=/^\w*$/,te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(re.source),ae=/^\s+/,oe=/\s/,ie=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,se=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ue=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,fe=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,me=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,ve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Se=/($^)/,Re=/['\n\r\u2028\u2029\\]/g,_e="\\ud800-\\udfff",we="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Be="\\u2700-\\u27bf",Ce="a-z\\xdf-\\xf6\\xf8-\\xff",Pe="A-Z\\xc0-\\xd6\\xd8-\\xde",ke="\\ufe0e\\ufe0f",$e="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ee="[']",Ie="["+_e+"]",Ae="["+$e+"]",xe="["+we+"]",Me="\\d+",Fe="["+Be+"]",Le="["+Ce+"]",Te="[^"+_e+$e+Me+Be+Ce+Pe+"]",Oe="\\ud83c[\\udffb-\\udfff]",He="[^"+_e+"]",je="(?:\\ud83c[\\udde6-\\uddff]){2}",De="[\\ud800-\\udbff][\\udc00-\\udfff]",Ne="["+Pe+"]",Ge="\\u200d",We="(?:"+Le+"|"+Te+")",qe="(?:"+Ne+"|"+Te+")",ze="(?:['](?:d|ll|m|re|s|t|ve))?",Ue="(?:['](?:D|LL|M|RE|S|T|VE))?",Ve="(?:"+xe+"|"+Oe+")"+"?",Ke="["+ke+"]?",Ye=Ke+Ve+("(?:"+Ge+"(?:"+[He,je,De].join("|")+")"+Ke+Ve+")*"),Xe="(?:"+[Fe,je,De].join("|")+")"+Ye,Je="(?:"+[He+xe+"?",xe,je,De,Ie].join("|")+")",Ze=RegExp(Ee,"g"),Qe=RegExp(xe,"g"),et=RegExp(Oe+"(?="+Oe+")|"+Je+Ye,"g"),tt=RegExp([Ne+"?"+Le+"+"+ze+"(?="+[Ae,Ne,"$"].join("|")+")",qe+"+"+Ue+"(?="+[Ae,Ne+We,"$"].join("|")+")",Ne+"?"+We+"+"+ze,Ne+"+"+Ue,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Me,Xe].join("|"),"g"),rt=RegExp("["+Ge+_e+we+ke+"]"),nt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,at=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ot=-1,it={};it[F]=it[L]=it[T]=it[O]=it[H]=it[j]=it[D]=it[N]=it[G]=!0,it[m]=it[y]=it[x]=it[b]=it[M]=it[v]=it[S]=it[R]=it[w]=it[B]=it[C]=it[k]=it[$]=it[E]=it[A]=!1;var st={};st[m]=st[y]=st[x]=st[M]=st[b]=st[v]=st[F]=st[L]=st[T]=st[O]=st[H]=st[w]=st[B]=st[C]=st[k]=st[$]=st[E]=st[I]=st[j]=st[D]=st[N]=st[G]=!0,st[S]=st[R]=st[A]=!1;var lt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,ut=parseInt,dt="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,ht="object"==typeof self&&self&&self.Object===Object&&self,pt=dt||ht||Function("return this")(),ft=t&&!t.nodeType&&t,gt=ft&&e&&!e.nodeType&&e,mt=gt&&gt.exports===ft,yt=mt&&dt.process,bt=function(){try{var e=gt&&gt.require&&gt.require("util").types;return e||yt&&yt.binding&&yt.binding("util")}catch(e){}}(),vt=bt&&bt.isArrayBuffer,St=bt&&bt.isDate,Rt=bt&&bt.isMap,_t=bt&&bt.isRegExp,wt=bt&&bt.isSet,Bt=bt&&bt.isTypedArray;function Ct(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Pt(e,t,r,n){for(var a=-1,o=null==e?0:e.length;++a<o;){var i=e[a];t(n,i,r(i),e)}return n}function kt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function $t(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function Et(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function It(e,t){for(var r=-1,n=null==e?0:e.length,a=0,o=[];++r<n;){var i=e[r];t(i,r,e)&&(o[a++]=i)}return o}function At(e,t){return!!(null==e?0:e.length)&&Nt(e,t,0)>-1}function xt(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}function Mt(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}function Ft(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}function Lt(e,t,r,n){var a=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++a]);++a<o;)r=t(r,e[a],a,e);return r}function Tt(e,t,r,n){var a=null==e?0:e.length;for(n&&a&&(r=e[--a]);a--;)r=t(r,e[a],a,e);return r}function Ot(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Ht=zt("length");function jt(e,t,r){var n;return r(e,function(e,r,a){if(t(e,r,a))return n=r,!1}),n}function Dt(e,t,r,n){for(var a=e.length,o=r+(n?1:-1);n?o--:++o<a;)if(t(e[o],o,e))return o;return-1}function Nt(e,t,r){return t==t?function(e,t,r){var n=r-1,a=e.length;for(;++n<a;)if(e[n]===t)return n;return-1}(e,t,r):Dt(e,Wt,r)}function Gt(e,t,r,n){for(var a=r-1,o=e.length;++a<o;)if(n(e[a],t))return a;return-1}function Wt(e){return e!=e}function qt(e,t){var r=null==e?0:e.length;return r?Kt(e,t)/r:p}function zt(e){return function(t){return null==t?r:t[e]}}function Ut(e){return function(t){return null==e?r:e[t]}}function Vt(e,t,r,n,a){return a(e,function(e,a,o){r=n?(n=!1,e):t(r,e,a,o)}),r}function Kt(e,t){for(var n,a=-1,o=e.length;++a<o;){var i=t(e[a]);i!==r&&(n=n===r?i:n+i)}return n}function Yt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Xt(e){return e?e.slice(0,pr(e)+1).replace(ae,""):e}function Jt(e){return function(t){return e(t)}}function Zt(e,t){return Mt(t,function(t){return e[t]})}function Qt(e,t){return e.has(t)}function er(e,t){for(var r=-1,n=e.length;++r<n&&Nt(t,e[r],0)>-1;);return r}function tr(e,t){for(var r=e.length;r--&&Nt(t,e[r],0)>-1;);return r}var rr=Ut({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),nr=Ut({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ar(e){return"\\"+lt[e]}function or(e){return rt.test(e)}function ir(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function sr(e,t){return function(r){return e(t(r))}}function lr(e,t){for(var r=-1,n=e.length,a=0,i=[];++r<n;){var s=e[r];s!==t&&s!==o||(e[r]=o,i[a++]=r)}return i}function cr(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function ur(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}function dr(e){return or(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):Ht(e)}function hr(e){return or(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function pr(e){for(var t=e.length;t--&&oe.test(e.charAt(t)););return t}var fr=Ut({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var gr=function e(t){var oe=(t=null==t?pt:gr.defaults(pt.Object(),t,gr.pick(pt,at))).Array,_e=t.Date,we=t.Error,Be=t.Function,Ce=t.Math,Pe=t.Object,ke=t.RegExp,$e=t.String,Ee=t.TypeError,Ie=oe.prototype,Ae=Be.prototype,xe=Pe.prototype,Me=t["__core-js_shared__"],Fe=Ae.toString,Le=xe.hasOwnProperty,Te=0,Oe=function(){var e=/[^.]+$/.exec(Me&&Me.keys&&Me.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),He=xe.toString,je=Fe.call(Pe),De=pt._,Ne=ke("^"+Fe.call(Le).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=mt?t.Buffer:r,We=t.Symbol,qe=t.Uint8Array,ze=Ge?Ge.allocUnsafe:r,Ue=sr(Pe.getPrototypeOf,Pe),Ve=Pe.create,Ke=xe.propertyIsEnumerable,Ye=Ie.splice,Xe=We?We.isConcatSpreadable:r,Je=We?We.iterator:r,et=We?We.toStringTag:r,rt=function(){try{var e=ho(Pe,"defineProperty");return e({},"",{}),e}catch(e){}}(),lt=t.clearTimeout!==pt.clearTimeout&&t.clearTimeout,dt=_e&&_e.now!==pt.Date.now&&_e.now,ht=t.setTimeout!==pt.setTimeout&&t.setTimeout,ft=Ce.ceil,gt=Ce.floor,yt=Pe.getOwnPropertySymbols,bt=Ge?Ge.isBuffer:r,Ht=t.isFinite,Ut=Ie.join,mr=sr(Pe.keys,Pe),yr=Ce.max,br=Ce.min,vr=_e.now,Sr=t.parseInt,Rr=Ce.random,_r=Ie.reverse,wr=ho(t,"DataView"),Br=ho(t,"Map"),Cr=ho(t,"Promise"),Pr=ho(t,"Set"),kr=ho(t,"WeakMap"),$r=ho(Pe,"create"),Er=kr&&new kr,Ir={},Ar=Ho(wr),xr=Ho(Br),Mr=Ho(Cr),Fr=Ho(Pr),Lr=Ho(kr),Tr=We?We.prototype:r,Or=Tr?Tr.valueOf:r,Hr=Tr?Tr.toString:r;function jr(e){if(ts(e)&&!qi(e)&&!(e instanceof Wr)){if(e instanceof Gr)return e;if(Le.call(e,"__wrapped__"))return jo(e)}return new Gr(e)}var Dr=function(){function e(){}return function(t){if(!es(t))return{};if(Ve)return Ve(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Nr(){}function Gr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Wr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function qr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function zr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ur(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Vr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Ur;++t<r;)this.add(e[t])}function Kr(e){var t=this.__data__=new zr(e);this.size=t.size}function Yr(e,t){var r=qi(e),n=!r&&Wi(e),a=!r&&!n&&Ki(e),o=!r&&!n&&!a&&cs(e),i=r||n||a||o,s=i?Yt(e.length,$e):[],l=s.length;for(var c in e)!t&&!Le.call(e,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||vo(c,l))||s.push(c);return s}function Xr(e){var t=e.length;return t?e[Kn(0,t-1)]:r}function Jr(e,t){return Lo(Ea(e),sn(t,0,e.length))}function Zr(e){return Lo(Ea(e))}function Qr(e,t,n){(n!==r&&!Di(e[t],n)||n===r&&!(t in e))&&an(e,t,n)}function en(e,t,n){var a=e[t];Le.call(e,t)&&Di(a,n)&&(n!==r||t in e)||an(e,t,n)}function tn(e,t){for(var r=e.length;r--;)if(Di(e[r][0],t))return r;return-1}function rn(e,t,r,n){return hn(e,function(e,a,o){t(n,e,r(e),o)}),n}function nn(e,t){return e&&Ia(t,As(t),e)}function an(e,t,r){"__proto__"==t&&rt?rt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function on(e,t){for(var n=-1,a=t.length,o=oe(a),i=null==e;++n<a;)o[n]=i?r:Ps(e,t[n]);return o}function sn(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function ln(e,t,n,a,o,i){var s,l=1&t,c=2&t,u=4&t;if(n&&(s=o?n(e,a,o,i):n(e)),s!==r)return s;if(!es(e))return e;var d=qi(e);if(d){if(s=function(e){var t=e.length,r=new e.constructor(t);t&&"string"==typeof e[0]&&Le.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!l)return Ea(e,s)}else{var h=go(e),p=h==R||h==_;if(Ki(e))return wa(e,l);if(h==C||h==m||p&&!o){if(s=c||p?{}:yo(e),!l)return c?function(e,t){return Ia(e,fo(e),t)}(e,function(e,t){return e&&Ia(t,xs(t),e)}(s,e)):function(e,t){return Ia(e,po(e),t)}(e,nn(s,e))}else{if(!st[h])return o?e:{};s=function(e,t,r){var n=e.constructor;switch(t){case x:return Ba(e);case b:case v:return new n(+e);case M:return function(e,t){var r=t?Ba(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case F:case L:case T:case O:case H:case j:case D:case N:case G:return Ca(e,r);case w:return new n;case B:case E:return new n(e);case k:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case $:return new n;case I:return a=e,Or?Pe(Or.call(a)):{}}var a}(e,h,l)}}i||(i=new Kr);var f=i.get(e);if(f)return f;i.set(e,s),is(e)?e.forEach(function(r){s.add(ln(r,t,n,r,e,i))}):rs(e)&&e.forEach(function(r,a){s.set(a,ln(r,t,n,a,e,i))});var g=d?r:(u?c?ao:no:c?xs:As)(e);return kt(g||e,function(r,a){g&&(r=e[a=r]),en(s,a,ln(r,t,n,a,e,i))}),s}function cn(e,t,n){var a=n.length;if(null==e)return!a;for(e=Pe(e);a--;){var o=n[a],i=t[o],s=e[o];if(s===r&&!(o in e)||!i(s))return!1}return!0}function un(e,t,a){if("function"!=typeof e)throw new Ee(n);return Ao(function(){e.apply(r,a)},t)}function dn(e,t,r,n){var a=-1,o=At,i=!0,s=e.length,l=[],c=t.length;if(!s)return l;r&&(t=Mt(t,Jt(r))),n?(o=xt,i=!1):t.length>=200&&(o=Qt,i=!1,t=new Vr(t));e:for(;++a<s;){var u=e[a],d=null==r?u:r(u);if(u=n||0!==u?u:0,i&&d==d){for(var h=c;h--;)if(t[h]===d)continue e;l.push(u)}else o(t,d,n)||l.push(u)}return l}jr.templateSettings={escape:X,evaluate:J,interpolate:Z,variable:"",imports:{_:jr}},jr.prototype=Nr.prototype,jr.prototype.constructor=jr,Gr.prototype=Dr(Nr.prototype),Gr.prototype.constructor=Gr,Wr.prototype=Dr(Nr.prototype),Wr.prototype.constructor=Wr,qr.prototype.clear=function(){this.__data__=$r?$r(null):{},this.size=0},qr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},qr.prototype.get=function(e){var t=this.__data__;if($r){var n=t[e];return n===a?r:n}return Le.call(t,e)?t[e]:r},qr.prototype.has=function(e){var t=this.__data__;return $r?t[e]!==r:Le.call(t,e)},qr.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=$r&&t===r?a:t,this},zr.prototype.clear=function(){this.__data__=[],this.size=0},zr.prototype.delete=function(e){var t=this.__data__,r=tn(t,e);return!(r<0)&&(r==t.length-1?t.pop():Ye.call(t,r,1),--this.size,!0)},zr.prototype.get=function(e){var t=this.__data__,n=tn(t,e);return n<0?r:t[n][1]},zr.prototype.has=function(e){return tn(this.__data__,e)>-1},zr.prototype.set=function(e,t){var r=this.__data__,n=tn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Ur.prototype.clear=function(){this.size=0,this.__data__={hash:new qr,map:new(Br||zr),string:new qr}},Ur.prototype.delete=function(e){var t=co(this,e).delete(e);return this.size-=t?1:0,t},Ur.prototype.get=function(e){return co(this,e).get(e)},Ur.prototype.has=function(e){return co(this,e).has(e)},Ur.prototype.set=function(e,t){var r=co(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Vr.prototype.add=Vr.prototype.push=function(e){return this.__data__.set(e,a),this},Vr.prototype.has=function(e){return this.__data__.has(e)},Kr.prototype.clear=function(){this.__data__=new zr,this.size=0},Kr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Kr.prototype.get=function(e){return this.__data__.get(e)},Kr.prototype.has=function(e){return this.__data__.has(e)},Kr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof zr){var n=r.__data__;if(!Br||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ur(n)}return r.set(e,t),this.size=r.size,this};var hn=Ma(Sn),pn=Ma(Rn,!0);function fn(e,t){var r=!0;return hn(e,function(e,n,a){return r=!!t(e,n,a)}),r}function gn(e,t,n){for(var a=-1,o=e.length;++a<o;){var i=e[a],s=t(i);if(null!=s&&(l===r?s==s&&!ls(s):n(s,l)))var l=s,c=i}return c}function mn(e,t){var r=[];return hn(e,function(e,n,a){t(e,n,a)&&r.push(e)}),r}function yn(e,t,r,n,a){var o=-1,i=e.length;for(r||(r=bo),a||(a=[]);++o<i;){var s=e[o];t>0&&r(s)?t>1?yn(s,t-1,r,n,a):Ft(a,s):n||(a[a.length]=s)}return a}var bn=Fa(),vn=Fa(!0);function Sn(e,t){return e&&bn(e,t,As)}function Rn(e,t){return e&&vn(e,t,As)}function _n(e,t){return It(t,function(t){return Ji(e[t])})}function wn(e,t){for(var n=0,a=(t=va(t,e)).length;null!=e&&n<a;)e=e[Oo(t[n++])];return n&&n==a?e:r}function Bn(e,t,r){var n=t(e);return qi(e)?n:Ft(n,r(e))}function Cn(e){return null==e?e===r?"[object Undefined]":"[object Null]":et&&et in Pe(e)?function(e){var t=Le.call(e,et),n=e[et];try{e[et]=r;var a=!0}catch(e){}var o=He.call(e);a&&(t?e[et]=n:delete e[et]);return o}(e):function(e){return He.call(e)}(e)}function Pn(e,t){return e>t}function kn(e,t){return null!=e&&Le.call(e,t)}function $n(e,t){return null!=e&&t in Pe(e)}function En(e,t,n){for(var a=n?xt:At,o=e[0].length,i=e.length,s=i,l=oe(i),c=1/0,u=[];s--;){var d=e[s];s&&t&&(d=Mt(d,Jt(t))),c=br(d.length,c),l[s]=!n&&(t||o>=120&&d.length>=120)?new Vr(s&&d):r}d=e[0];var h=-1,p=l[0];e:for(;++h<o&&u.length<c;){var f=d[h],g=t?t(f):f;if(f=n||0!==f?f:0,!(p?Qt(p,g):a(u,g,n))){for(s=i;--s;){var m=l[s];if(!(m?Qt(m,g):a(e[s],g,n)))continue e}p&&p.push(g),u.push(f)}}return u}function In(e,t,n){var a=null==(e=$o(e,t=va(t,e)))?e:e[Oo(Xo(t))];return null==a?r:Ct(a,e,n)}function An(e){return ts(e)&&Cn(e)==m}function xn(e,t,n,a,o){return e===t||(null==e||null==t||!ts(e)&&!ts(t)?e!=e&&t!=t:function(e,t,n,a,o,i){var s=qi(e),l=qi(t),c=s?y:go(e),u=l?y:go(t),d=(c=c==m?C:c)==C,h=(u=u==m?C:u)==C,p=c==u;if(p&&Ki(e)){if(!Ki(t))return!1;s=!0,d=!1}if(p&&!d)return i||(i=new Kr),s||cs(e)?to(e,t,n,a,o,i):function(e,t,r,n,a,o,i){switch(r){case M:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case x:return!(e.byteLength!=t.byteLength||!o(new qe(e),new qe(t)));case b:case v:case B:return Di(+e,+t);case S:return e.name==t.name&&e.message==t.message;case k:case E:return e==t+"";case w:var s=ir;case $:var l=1&n;if(s||(s=cr),e.size!=t.size&&!l)return!1;var c=i.get(e);if(c)return c==t;n|=2,i.set(e,t);var u=to(s(e),s(t),n,a,o,i);return i.delete(e),u;case I:if(Or)return Or.call(e)==Or.call(t)}return!1}(e,t,c,n,a,o,i);if(!(1&n)){var f=d&&Le.call(e,"__wrapped__"),g=h&&Le.call(t,"__wrapped__");if(f||g){var R=f?e.value():e,_=g?t.value():t;return i||(i=new Kr),o(R,_,n,a,i)}}if(!p)return!1;return i||(i=new Kr),function(e,t,n,a,o,i){var s=1&n,l=no(e),c=l.length,u=no(t),d=u.length;if(c!=d&&!s)return!1;var h=c;for(;h--;){var p=l[h];if(!(s?p in t:Le.call(t,p)))return!1}var f=i.get(e),g=i.get(t);if(f&&g)return f==t&&g==e;var m=!0;i.set(e,t),i.set(t,e);var y=s;for(;++h<c;){var b=e[p=l[h]],v=t[p];if(a)var S=s?a(v,b,p,t,e,i):a(b,v,p,e,t,i);if(!(S===r?b===v||o(b,v,n,a,i):S)){m=!1;break}y||(y="constructor"==p)}if(m&&!y){var R=e.constructor,_=t.constructor;R==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof R&&R instanceof R&&"function"==typeof _&&_ instanceof _||(m=!1)}return i.delete(e),i.delete(t),m}(e,t,n,a,o,i)}(e,t,n,a,xn,o))}function Mn(e,t,n,a){var o=n.length,i=o,s=!a;if(null==e)return!i;for(e=Pe(e);o--;){var l=n[o];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<i;){var c=(l=n[o])[0],u=e[c],d=l[1];if(s&&l[2]){if(u===r&&!(c in e))return!1}else{var h=new Kr;if(a)var p=a(u,d,c,e,t,h);if(!(p===r?xn(d,u,3,a,h):p))return!1}}return!0}function Fn(e){return!(!es(e)||function(e){return!!Oe&&Oe in e}(e))&&(Ji(e)?Ne:me).test(Ho(e))}function Ln(e){return"function"==typeof e?e:null==e?nl:"object"==typeof e?qi(e)?Nn(e[0],e[1]):Dn(e):hl(e)}function Tn(e){if(!Bo(e))return mr(e);var t=[];for(var r in Pe(e))Le.call(e,r)&&"constructor"!=r&&t.push(r);return t}function On(e){if(!es(e))return function(e){var t=[];if(null!=e)for(var r in Pe(e))t.push(r);return t}(e);var t=Bo(e),r=[];for(var n in e)("constructor"!=n||!t&&Le.call(e,n))&&r.push(n);return r}function Hn(e,t){return e<t}function jn(e,t){var r=-1,n=Ui(e)?oe(e.length):[];return hn(e,function(e,a,o){n[++r]=t(e,a,o)}),n}function Dn(e){var t=uo(e);return 1==t.length&&t[0][2]?Po(t[0][0],t[0][1]):function(r){return r===e||Mn(r,e,t)}}function Nn(e,t){return Ro(e)&&Co(t)?Po(Oo(e),t):function(n){var a=Ps(n,e);return a===r&&a===t?ks(n,e):xn(t,a,3)}}function Gn(e,t,n,a,o){e!==t&&bn(t,function(i,s){if(o||(o=new Kr),es(i))!function(e,t,n,a,o,i,s){var l=Eo(e,n),c=Eo(t,n),u=s.get(c);if(u)return void Qr(e,n,u);var d=i?i(l,c,n+"",e,t,s):r,h=d===r;if(h){var p=qi(c),f=!p&&Ki(c),g=!p&&!f&&cs(c);d=c,p||f||g?qi(l)?d=l:Vi(l)?d=Ea(l):f?(h=!1,d=wa(c,!0)):g?(h=!1,d=Ca(c,!0)):d=[]:as(c)||Wi(c)?(d=l,Wi(l)?d=ys(l):es(l)&&!Ji(l)||(d=yo(c))):h=!1}h&&(s.set(c,d),o(d,c,a,i,s),s.delete(c));Qr(e,n,d)}(e,t,s,n,Gn,a,o);else{var l=a?a(Eo(e,s),i,s+"",e,t,o):r;l===r&&(l=i),Qr(e,s,l)}},xs)}function Wn(e,t){var n=e.length;if(n)return vo(t+=t<0?n:0,n)?e[t]:r}function qn(e,t,r){t=t.length?Mt(t,function(e){return qi(e)?function(t){return wn(t,1===e.length?e[0]:e)}:e}):[nl];var n=-1;t=Mt(t,Jt(lo()));var a=jn(e,function(e,r,a){var o=Mt(t,function(t){return t(e)});return{criteria:o,index:++n,value:e}});return function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(a,function(e,t){return function(e,t,r){var n=-1,a=e.criteria,o=t.criteria,i=a.length,s=r.length;for(;++n<i;){var l=Pa(a[n],o[n]);if(l)return n>=s?l:l*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)})}function zn(e,t,r){for(var n=-1,a=t.length,o={};++n<a;){var i=t[n],s=wn(e,i);r(s,i)&&Qn(o,va(i,e),s)}return o}function Un(e,t,r,n){var a=n?Gt:Nt,o=-1,i=t.length,s=e;for(e===t&&(t=Ea(t)),r&&(s=Mt(e,Jt(r)));++o<i;)for(var l=0,c=t[o],u=r?r(c):c;(l=a(s,u,l,n))>-1;)s!==e&&Ye.call(s,l,1),Ye.call(e,l,1);return e}function Vn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var a=t[r];if(r==n||a!==o){var o=a;vo(a)?Ye.call(e,a,1):da(e,a)}}return e}function Kn(e,t){return e+gt(Rr()*(t-e+1))}function Yn(e,t){var r="";if(!e||t<1||t>h)return r;do{t%2&&(r+=e),(t=gt(t/2))&&(e+=e)}while(t);return r}function Xn(e,t){return xo(ko(e,t,nl),e+"")}function Jn(e){return Xr(Ds(e))}function Zn(e,t){var r=Ds(e);return Lo(r,sn(t,0,r.length))}function Qn(e,t,n,a){if(!es(e))return e;for(var o=-1,i=(t=va(t,e)).length,s=i-1,l=e;null!=l&&++o<i;){var c=Oo(t[o]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=s){var d=l[c];(u=a?a(d,c,l):r)===r&&(u=es(d)?d:vo(t[o+1])?[]:{})}en(l,c,u),l=l[c]}return e}var ea=Er?function(e,t){return Er.set(e,t),e}:nl,ta=rt?function(e,t){return rt(e,"toString",{configurable:!0,enumerable:!1,value:el(t),writable:!0})}:nl;function ra(e){return Lo(Ds(e))}function na(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=oe(a);++n<a;)o[n]=e[n+t];return o}function aa(e,t){var r;return hn(e,function(e,n,a){return!(r=t(e,n,a))}),!!r}function oa(e,t,r){var n=0,a=null==e?n:e.length;if("number"==typeof t&&t==t&&a<=2147483647){for(;n<a;){var o=n+a>>>1,i=e[o];null!==i&&!ls(i)&&(r?i<=t:i<t)?n=o+1:a=o}return a}return ia(e,t,nl,r)}function ia(e,t,n,a){var o=0,i=null==e?0:e.length;if(0===i)return 0;for(var s=(t=n(t))!=t,l=null===t,c=ls(t),u=t===r;o<i;){var d=gt((o+i)/2),h=n(e[d]),p=h!==r,f=null===h,g=h==h,m=ls(h);if(s)var y=a||g;else y=u?g&&(a||p):l?g&&p&&(a||!f):c?g&&p&&!f&&(a||!m):!f&&!m&&(a?h<=t:h<t);y?o=d+1:i=d}return br(i,4294967294)}function sa(e,t){for(var r=-1,n=e.length,a=0,o=[];++r<n;){var i=e[r],s=t?t(i):i;if(!r||!Di(s,l)){var l=s;o[a++]=0===i?0:i}}return o}function la(e){return"number"==typeof e?e:ls(e)?p:+e}function ca(e){if("string"==typeof e)return e;if(qi(e))return Mt(e,ca)+"";if(ls(e))return Hr?Hr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ua(e,t,r){var n=-1,a=At,o=e.length,i=!0,s=[],l=s;if(r)i=!1,a=xt;else if(o>=200){var c=t?null:Ya(e);if(c)return cr(c);i=!1,a=Qt,l=new Vr}else l=t?[]:s;e:for(;++n<o;){var u=e[n],d=t?t(u):u;if(u=r||0!==u?u:0,i&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),s.push(u)}else a(l,d,r)||(l!==s&&l.push(d),s.push(u))}return s}function da(e,t){return null==(e=$o(e,t=va(t,e)))||delete e[Oo(Xo(t))]}function ha(e,t,r,n){return Qn(e,t,r(wn(e,t)),n)}function pa(e,t,r,n){for(var a=e.length,o=n?a:-1;(n?o--:++o<a)&&t(e[o],o,e););return r?na(e,n?0:o,n?o+1:a):na(e,n?o+1:0,n?a:o)}function fa(e,t){var r=e;return r instanceof Wr&&(r=r.value()),Lt(t,function(e,t){return t.func.apply(t.thisArg,Ft([e],t.args))},r)}function ga(e,t,r){var n=e.length;if(n<2)return n?ua(e[0]):[];for(var a=-1,o=oe(n);++a<n;)for(var i=e[a],s=-1;++s<n;)s!=a&&(o[a]=dn(o[a]||i,e[s],t,r));return ua(yn(o,1),t,r)}function ma(e,t,n){for(var a=-1,o=e.length,i=t.length,s={};++a<o;){var l=a<i?t[a]:r;n(s,e[a],l)}return s}function ya(e){return Vi(e)?e:[]}function ba(e){return"function"==typeof e?e:nl}function va(e,t){return qi(e)?e:Ro(e,t)?[e]:To(bs(e))}var Sa=Xn;function Ra(e,t,n){var a=e.length;return n=n===r?a:n,!t&&n>=a?e:na(e,t,n)}var _a=lt||function(e){return pt.clearTimeout(e)};function wa(e,t){if(t)return e.slice();var r=e.length,n=ze?ze(r):new e.constructor(r);return e.copy(n),n}function Ba(e){var t=new e.constructor(e.byteLength);return new qe(t).set(new qe(e)),t}function Ca(e,t){var r=t?Ba(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Pa(e,t){if(e!==t){var n=e!==r,a=null===e,o=e==e,i=ls(e),s=t!==r,l=null===t,c=t==t,u=ls(t);if(!l&&!u&&!i&&e>t||i&&s&&c&&!l&&!u||a&&s&&c||!n&&c||!o)return 1;if(!a&&!i&&!u&&e<t||u&&n&&o&&!a&&!i||l&&n&&o||!s&&o||!c)return-1}return 0}function ka(e,t,r,n){for(var a=-1,o=e.length,i=r.length,s=-1,l=t.length,c=yr(o-i,0),u=oe(l+c),d=!n;++s<l;)u[s]=t[s];for(;++a<i;)(d||a<o)&&(u[r[a]]=e[a]);for(;c--;)u[s++]=e[a++];return u}function $a(e,t,r,n){for(var a=-1,o=e.length,i=-1,s=r.length,l=-1,c=t.length,u=yr(o-s,0),d=oe(u+c),h=!n;++a<u;)d[a]=e[a];for(var p=a;++l<c;)d[p+l]=t[l];for(;++i<s;)(h||a<o)&&(d[p+r[i]]=e[a++]);return d}function Ea(e,t){var r=-1,n=e.length;for(t||(t=oe(n));++r<n;)t[r]=e[r];return t}function Ia(e,t,n,a){var o=!n;n||(n={});for(var i=-1,s=t.length;++i<s;){var l=t[i],c=a?a(n[l],e[l],l,n,e):r;c===r&&(c=e[l]),o?an(n,l,c):en(n,l,c)}return n}function Aa(e,t){return function(r,n){var a=qi(r)?Pt:rn,o=t?t():{};return a(r,e,lo(n,2),o)}}function xa(e){return Xn(function(t,n){var a=-1,o=n.length,i=o>1?n[o-1]:r,s=o>2?n[2]:r;for(i=e.length>3&&"function"==typeof i?(o--,i):r,s&&So(n[0],n[1],s)&&(i=o<3?r:i,o=1),t=Pe(t);++a<o;){var l=n[a];l&&e(t,l,a,i)}return t})}function Ma(e,t){return function(r,n){if(null==r)return r;if(!Ui(r))return e(r,n);for(var a=r.length,o=t?a:-1,i=Pe(r);(t?o--:++o<a)&&!1!==n(i[o],o,i););return r}}function Fa(e){return function(t,r,n){for(var a=-1,o=Pe(t),i=n(t),s=i.length;s--;){var l=i[e?s:++a];if(!1===r(o[l],l,o))break}return t}}function La(e){return function(t){var n=or(t=bs(t))?hr(t):r,a=n?n[0]:t.charAt(0),o=n?Ra(n,1).join(""):t.slice(1);return a[e]()+o}}function Ta(e){return function(t){return Lt(Js(Ws(t).replace(Ze,"")),e,"")}}function Oa(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Dr(e.prototype),n=e.apply(r,t);return es(n)?n:r}}function Ha(e){return function(t,n,a){var o=Pe(t);if(!Ui(t)){var i=lo(n,3);t=As(t),n=function(e){return i(o[e],e,o)}}var s=e(t,n,a);return s>-1?o[i?t[s]:s]:r}}function ja(e){return ro(function(t){var a=t.length,o=a,i=Gr.prototype.thru;for(e&&t.reverse();o--;){var s=t[o];if("function"!=typeof s)throw new Ee(n);if(i&&!l&&"wrapper"==io(s))var l=new Gr([],!0)}for(o=l?o:a;++o<a;){var c=io(s=t[o]),u="wrapper"==c?oo(s):r;l=u&&_o(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[io(u[0])].apply(l,u[3]):1==s.length&&_o(s)?l[c]():l.thru(s)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&qi(r))return l.plant(r).value();for(var n=0,o=a?t[n].apply(this,e):r;++n<a;)o=t[n].call(this,o);return o}})}function Da(e,t,n,a,o,i,s,l,u,d){var h=t&c,p=1&t,f=2&t,g=24&t,m=512&t,y=f?r:Oa(e);return function c(){for(var b=arguments.length,v=oe(b),S=b;S--;)v[S]=arguments[S];if(g)var R=so(c),_=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(v,R);if(a&&(v=ka(v,a,o,g)),i&&(v=$a(v,i,s,g)),b-=_,g&&b<d){var w=lr(v,R);return Va(e,t,Da,c.placeholder,n,v,w,l,u,d-b)}var B=p?n:this,C=f?B[e]:e;return b=v.length,l?v=function(e,t){var n=e.length,a=br(t.length,n),o=Ea(e);for(;a--;){var i=t[a];e[a]=vo(i,n)?o[i]:r}return e}(v,l):m&&b>1&&v.reverse(),h&&u<b&&(v.length=u),this&&this!==pt&&this instanceof c&&(C=y||Oa(C)),C.apply(B,v)}}function Na(e,t){return function(r,n){return function(e,t,r,n){return Sn(e,function(e,a,o){t(n,r(e),a,o)}),n}(r,e,t(n),{})}}function Ga(e,t){return function(n,a){var o;if(n===r&&a===r)return t;if(n!==r&&(o=n),a!==r){if(o===r)return a;"string"==typeof n||"string"==typeof a?(n=ca(n),a=ca(a)):(n=la(n),a=la(a)),o=e(n,a)}return o}}function Wa(e){return ro(function(t){return t=Mt(t,Jt(lo())),Xn(function(r){var n=this;return e(t,function(e){return Ct(e,n,r)})})})}function qa(e,t){var n=(t=t===r?" ":ca(t)).length;if(n<2)return n?Yn(t,e):t;var a=Yn(t,ft(e/dr(t)));return or(t)?Ra(hr(a),0,e).join(""):a.slice(0,e)}function za(e){return function(t,n,a){return a&&"number"!=typeof a&&So(t,n,a)&&(n=a=r),t=ps(t),n===r?(n=t,t=0):n=ps(n),function(e,t,r,n){for(var a=-1,o=yr(ft((t-e)/(r||1)),0),i=oe(o);o--;)i[n?o:++a]=e,e+=r;return i}(t,n,a=a===r?t<n?1:-1:ps(a),e)}}function Ua(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=ms(t),r=ms(r)),e(t,r)}}function Va(e,t,n,a,o,i,c,u,d,h){var p=8&t;t|=p?s:l,4&(t&=~(p?l:s))||(t&=-4);var f=[e,t,o,p?i:r,p?c:r,p?r:i,p?r:c,u,d,h],g=n.apply(r,f);return _o(e)&&Io(g,f),g.placeholder=a,Mo(g,e,t)}function Ka(e){var t=Ce[e];return function(e,r){if(e=ms(e),(r=null==r?0:br(fs(r),292))&&Ht(e)){var n=(bs(e)+"e").split("e");return+((n=(bs(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Ya=Pr&&1/cr(new Pr([,-0]))[1]==d?function(e){return new Pr(e)}:ll;function Xa(e){return function(t){var r=go(t);return r==w?ir(t):r==$?ur(t):function(e,t){return Mt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Ja(e,t,a,d,h,p,f,g){var m=2&t;if(!m&&"function"!=typeof e)throw new Ee(n);var y=d?d.length:0;if(y||(t&=-97,d=h=r),f=f===r?f:yr(fs(f),0),g=g===r?g:fs(g),y-=h?h.length:0,t&l){var b=d,v=h;d=h=r}var S=m?r:oo(e),R=[e,t,a,d,h,b,v,p,f,g];if(S&&function(e,t){var r=e[1],n=t[1],a=r|n,i=a<131,s=n==c&&8==r||n==c&&r==u&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!i&&!s)return e;1&n&&(e[2]=t[2],a|=1&r?0:4);var l=t[3];if(l){var d=e[3];e[3]=d?ka(d,l,t[4]):l,e[4]=d?lr(e[3],o):t[4]}l=t[5],l&&(d=e[5],e[5]=d?$a(d,l,t[6]):l,e[6]=d?lr(e[5],o):t[6]);l=t[7],l&&(e[7]=l);n&c&&(e[8]=null==e[8]?t[8]:br(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=a}(R,S),e=R[0],t=R[1],a=R[2],d=R[3],h=R[4],!(g=R[9]=R[9]===r?m?0:e.length:yr(R[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)_=8==t||t==i?function(e,t,n){var a=Oa(e);return function o(){for(var i=arguments.length,s=oe(i),l=i,c=so(o);l--;)s[l]=arguments[l];var u=i<3&&s[0]!==c&&s[i-1]!==c?[]:lr(s,c);return(i-=u.length)<n?Va(e,t,Da,o.placeholder,r,s,u,r,r,n-i):Ct(this&&this!==pt&&this instanceof o?a:e,this,s)}}(e,t,g):t!=s&&33!=t||h.length?Da.apply(r,R):function(e,t,r,n){var a=1&t,o=Oa(e);return function t(){for(var i=-1,s=arguments.length,l=-1,c=n.length,u=oe(c+s),d=this&&this!==pt&&this instanceof t?o:e;++l<c;)u[l]=n[l];for(;s--;)u[l++]=arguments[++i];return Ct(d,a?r:this,u)}}(e,t,a,d);else var _=function(e,t,r){var n=1&t,a=Oa(e);return function t(){return(this&&this!==pt&&this instanceof t?a:e).apply(n?r:this,arguments)}}(e,t,a);return Mo((S?ea:Io)(_,R),e,t)}function Za(e,t,n,a){return e===r||Di(e,xe[n])&&!Le.call(a,n)?t:e}function Qa(e,t,n,a,o,i){return es(e)&&es(t)&&(i.set(t,e),Gn(e,t,r,Qa,i),i.delete(t)),e}function eo(e){return as(e)?r:e}function to(e,t,n,a,o,i){var s=1&n,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var h=-1,p=!0,f=2&n?new Vr:r;for(i.set(e,t),i.set(t,e);++h<l;){var g=e[h],m=t[h];if(a)var y=s?a(m,g,h,t,e,i):a(g,m,h,e,t,i);if(y!==r){if(y)continue;p=!1;break}if(f){if(!Ot(t,function(e,t){if(!Qt(f,t)&&(g===e||o(g,e,n,a,i)))return f.push(t)})){p=!1;break}}else if(g!==m&&!o(g,m,n,a,i)){p=!1;break}}return i.delete(e),i.delete(t),p}function ro(e){return xo(ko(e,r,zo),e+"")}function no(e){return Bn(e,As,po)}function ao(e){return Bn(e,xs,fo)}var oo=Er?function(e){return Er.get(e)}:ll;function io(e){for(var t=e.name+"",r=Ir[t],n=Le.call(Ir,t)?r.length:0;n--;){var a=r[n],o=a.func;if(null==o||o==e)return a.name}return t}function so(e){return(Le.call(jr,"placeholder")?jr:e).placeholder}function lo(){var e=jr.iteratee||al;return e=e===al?Ln:e,arguments.length?e(arguments[0],arguments[1]):e}function co(e,t){var r,n,a=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?a["string"==typeof t?"string":"hash"]:a.map}function uo(e){for(var t=As(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,Co(a)]}return t}function ho(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return Fn(n)?n:r}var po=yt?function(e){return null==e?[]:(e=Pe(e),It(yt(e),function(t){return Ke.call(e,t)}))}:gl,fo=yt?function(e){for(var t=[];e;)Ft(t,po(e)),e=Ue(e);return t}:gl,go=Cn;function mo(e,t,r){for(var n=-1,a=(t=va(t,e)).length,o=!1;++n<a;){var i=Oo(t[n]);if(!(o=null!=e&&r(e,i)))break;e=e[i]}return o||++n!=a?o:!!(a=null==e?0:e.length)&&Qi(a)&&vo(i,a)&&(qi(e)||Wi(e))}function yo(e){return"function"!=typeof e.constructor||Bo(e)?{}:Dr(Ue(e))}function bo(e){return qi(e)||Wi(e)||!!(Xe&&e&&e[Xe])}function vo(e,t){var r=typeof e;return!!(t=null==t?h:t)&&("number"==r||"symbol"!=r&&be.test(e))&&e>-1&&e%1==0&&e<t}function So(e,t,r){if(!es(r))return!1;var n=typeof t;return!!("number"==n?Ui(r)&&vo(t,r.length):"string"==n&&t in r)&&Di(r[t],e)}function Ro(e,t){if(qi(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!ls(e))||(ee.test(e)||!Q.test(e)||null!=t&&e in Pe(t))}function _o(e){var t=io(e),r=jr[t];if("function"!=typeof r||!(t in Wr.prototype))return!1;if(e===r)return!0;var n=oo(r);return!!n&&e===n[0]}(wr&&go(new wr(new ArrayBuffer(1)))!=M||Br&&go(new Br)!=w||Cr&&go(Cr.resolve())!=P||Pr&&go(new Pr)!=$||kr&&go(new kr)!=A)&&(go=function(e){var t=Cn(e),n=t==C?e.constructor:r,a=n?Ho(n):"";if(a)switch(a){case Ar:return M;case xr:return w;case Mr:return P;case Fr:return $;case Lr:return A}return t});var wo=Me?Ji:ml;function Bo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||xe)}function Co(e){return e==e&&!es(e)}function Po(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==r||e in Pe(n)))}}function ko(e,t,n){return t=yr(t===r?e.length-1:t,0),function(){for(var r=arguments,a=-1,o=yr(r.length-t,0),i=oe(o);++a<o;)i[a]=r[t+a];a=-1;for(var s=oe(t+1);++a<t;)s[a]=r[a];return s[t]=n(i),Ct(e,this,s)}}function $o(e,t){return t.length<2?e:wn(e,na(t,0,-1))}function Eo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Io=Fo(ea),Ao=ht||function(e,t){return pt.setTimeout(e,t)},xo=Fo(ta);function Mo(e,t,r){var n=t+"";return xo(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(ie,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return kt(g,function(r){var n="_."+r[0];t&r[1]&&!At(e,n)&&e.push(n)}),e.sort()}(function(e){var t=e.match(se);return t?t[1].split(le):[]}(n),r)))}function Fo(e){var t=0,n=0;return function(){var a=vr(),o=16-(a-n);if(n=a,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Lo(e,t){var n=-1,a=e.length,o=a-1;for(t=t===r?a:t;++n<t;){var i=Kn(n,o),s=e[i];e[i]=e[n],e[n]=s}return e.length=t,e}var To=function(e){var t=Fi(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(te,function(e,r,n,a){t.push(n?a.replace(de,"$1"):r||e)}),t});function Oo(e){if("string"==typeof e||ls(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ho(e){if(null!=e){try{return Fe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function jo(e){if(e instanceof Wr)return e.clone();var t=new Gr(e.__wrapped__,e.__chain__);return t.__actions__=Ea(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Do=Xn(function(e,t){return Vi(e)?dn(e,yn(t,1,Vi,!0)):[]}),No=Xn(function(e,t){var n=Xo(t);return Vi(n)&&(n=r),Vi(e)?dn(e,yn(t,1,Vi,!0),lo(n,2)):[]}),Go=Xn(function(e,t){var n=Xo(t);return Vi(n)&&(n=r),Vi(e)?dn(e,yn(t,1,Vi,!0),r,n):[]});function Wo(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:fs(r);return a<0&&(a=yr(n+a,0)),Dt(e,lo(t,3),a)}function qo(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var o=a-1;return n!==r&&(o=fs(n),o=n<0?yr(a+o,0):br(o,a-1)),Dt(e,lo(t,3),o,!0)}function zo(e){return(null==e?0:e.length)?yn(e,1):[]}function Uo(e){return e&&e.length?e[0]:r}var Vo=Xn(function(e){var t=Mt(e,ya);return t.length&&t[0]===e[0]?En(t):[]}),Ko=Xn(function(e){var t=Xo(e),n=Mt(e,ya);return t===Xo(n)?t=r:n.pop(),n.length&&n[0]===e[0]?En(n,lo(t,2)):[]}),Yo=Xn(function(e){var t=Xo(e),n=Mt(e,ya);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?En(n,r,t):[]});function Xo(e){var t=null==e?0:e.length;return t?e[t-1]:r}var Jo=Xn(Zo);function Zo(e,t){return e&&e.length&&t&&t.length?Un(e,t):e}var Qo=ro(function(e,t){var r=null==e?0:e.length,n=on(e,t);return Vn(e,Mt(t,function(e){return vo(e,r)?+e:e}).sort(Pa)),n});function ei(e){return null==e?e:_r.call(e)}var ti=Xn(function(e){return ua(yn(e,1,Vi,!0))}),ri=Xn(function(e){var t=Xo(e);return Vi(t)&&(t=r),ua(yn(e,1,Vi,!0),lo(t,2))}),ni=Xn(function(e){var t=Xo(e);return t="function"==typeof t?t:r,ua(yn(e,1,Vi,!0),r,t)});function ai(e){if(!e||!e.length)return[];var t=0;return e=It(e,function(e){if(Vi(e))return t=yr(e.length,t),!0}),Yt(t,function(t){return Mt(e,zt(t))})}function oi(e,t){if(!e||!e.length)return[];var n=ai(e);return null==t?n:Mt(n,function(e){return Ct(t,r,e)})}var ii=Xn(function(e,t){return Vi(e)?dn(e,t):[]}),si=Xn(function(e){return ga(It(e,Vi))}),li=Xn(function(e){var t=Xo(e);return Vi(t)&&(t=r),ga(It(e,Vi),lo(t,2))}),ci=Xn(function(e){var t=Xo(e);return t="function"==typeof t?t:r,ga(It(e,Vi),r,t)}),ui=Xn(ai);var di=Xn(function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,oi(e,n)});function hi(e){var t=jr(e);return t.__chain__=!0,t}function pi(e,t){return t(e)}var fi=ro(function(e){var t=e.length,n=t?e[0]:0,a=this.__wrapped__,o=function(t){return on(t,e)};return!(t>1||this.__actions__.length)&&a instanceof Wr&&vo(n)?((a=a.slice(n,+n+(t?1:0))).__actions__.push({func:pi,args:[o],thisArg:r}),new Gr(a,this.__chain__).thru(function(e){return t&&!e.length&&e.push(r),e})):this.thru(o)});var gi=Aa(function(e,t,r){Le.call(e,r)?++e[r]:an(e,r,1)});var mi=Ha(Wo),yi=Ha(qo);function bi(e,t){return(qi(e)?kt:hn)(e,lo(t,3))}function vi(e,t){return(qi(e)?$t:pn)(e,lo(t,3))}var Si=Aa(function(e,t,r){Le.call(e,r)?e[r].push(t):an(e,r,[t])});var Ri=Xn(function(e,t,r){var n=-1,a="function"==typeof t,o=Ui(e)?oe(e.length):[];return hn(e,function(e){o[++n]=a?Ct(t,e,r):In(e,t,r)}),o}),_i=Aa(function(e,t,r){an(e,r,t)});function wi(e,t){return(qi(e)?Mt:jn)(e,lo(t,3))}var Bi=Aa(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});var Ci=Xn(function(e,t){if(null==e)return[];var r=t.length;return r>1&&So(e,t[0],t[1])?t=[]:r>2&&So(t[0],t[1],t[2])&&(t=[t[0]]),qn(e,yn(t,1),[])}),Pi=dt||function(){return pt.Date.now()};function ki(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Ja(e,c,r,r,r,r,t)}function $i(e,t){var a;if("function"!=typeof t)throw new Ee(n);return e=fs(e),function(){return--e>0&&(a=t.apply(this,arguments)),e<=1&&(t=r),a}}var Ei=Xn(function(e,t,r){var n=1;if(r.length){var a=lr(r,so(Ei));n|=s}return Ja(e,n,t,r,a)}),Ii=Xn(function(e,t,r){var n=3;if(r.length){var a=lr(r,so(Ii));n|=s}return Ja(t,n,e,r,a)});function Ai(e,t,a){var o,i,s,l,c,u,d=0,h=!1,p=!1,f=!0;if("function"!=typeof e)throw new Ee(n);function g(t){var n=o,a=i;return o=i=r,d=t,l=e.apply(a,n)}function m(e){var n=e-u;return u===r||n>=t||n<0||p&&e-d>=s}function y(){var e=Pi();if(m(e))return b(e);c=Ao(y,function(e){var r=t-(e-u);return p?br(r,s-(e-d)):r}(e))}function b(e){return c=r,f&&o?g(e):(o=i=r,l)}function v(){var e=Pi(),n=m(e);if(o=arguments,i=this,u=e,n){if(c===r)return function(e){return d=e,c=Ao(y,t),h?g(e):l}(u);if(p)return _a(c),c=Ao(y,t),g(u)}return c===r&&(c=Ao(y,t)),l}return t=ms(t)||0,es(a)&&(h=!!a.leading,s=(p="maxWait"in a)?yr(ms(a.maxWait)||0,t):s,f="trailing"in a?!!a.trailing:f),v.cancel=function(){c!==r&&_a(c),d=0,o=u=i=c=r},v.flush=function(){return c===r?l:b(Pi())},v}var xi=Xn(function(e,t){return un(e,1,t)}),Mi=Xn(function(e,t,r){return un(e,ms(t)||0,r)});function Fi(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ee(n);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var i=e.apply(this,n);return r.cache=o.set(a,i)||o,i};return r.cache=new(Fi.Cache||Ur),r}function Li(e){if("function"!=typeof e)throw new Ee(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Fi.Cache=Ur;var Ti=Sa(function(e,t){var r=(t=1==t.length&&qi(t[0])?Mt(t[0],Jt(lo())):Mt(yn(t,1),Jt(lo()))).length;return Xn(function(n){for(var a=-1,o=br(n.length,r);++a<o;)n[a]=t[a].call(this,n[a]);return Ct(e,this,n)})}),Oi=Xn(function(e,t){var n=lr(t,so(Oi));return Ja(e,s,r,t,n)}),Hi=Xn(function(e,t){var n=lr(t,so(Hi));return Ja(e,l,r,t,n)}),ji=ro(function(e,t){return Ja(e,u,r,r,r,t)});function Di(e,t){return e===t||e!=e&&t!=t}var Ni=Ua(Pn),Gi=Ua(function(e,t){return e>=t}),Wi=An(function(){return arguments}())?An:function(e){return ts(e)&&Le.call(e,"callee")&&!Ke.call(e,"callee")},qi=oe.isArray,zi=vt?Jt(vt):function(e){return ts(e)&&Cn(e)==x};function Ui(e){return null!=e&&Qi(e.length)&&!Ji(e)}function Vi(e){return ts(e)&&Ui(e)}var Ki=bt||ml,Yi=St?Jt(St):function(e){return ts(e)&&Cn(e)==v};function Xi(e){if(!ts(e))return!1;var t=Cn(e);return t==S||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!as(e)}function Ji(e){if(!es(e))return!1;var t=Cn(e);return t==R||t==_||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Zi(e){return"number"==typeof e&&e==fs(e)}function Qi(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function es(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ts(e){return null!=e&&"object"==typeof e}var rs=Rt?Jt(Rt):function(e){return ts(e)&&go(e)==w};function ns(e){return"number"==typeof e||ts(e)&&Cn(e)==B}function as(e){if(!ts(e)||Cn(e)!=C)return!1;var t=Ue(e);if(null===t)return!0;var r=Le.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Fe.call(r)==je}var os=_t?Jt(_t):function(e){return ts(e)&&Cn(e)==k};var is=wt?Jt(wt):function(e){return ts(e)&&go(e)==$};function ss(e){return"string"==typeof e||!qi(e)&&ts(e)&&Cn(e)==E}function ls(e){return"symbol"==typeof e||ts(e)&&Cn(e)==I}var cs=Bt?Jt(Bt):function(e){return ts(e)&&Qi(e.length)&&!!it[Cn(e)]};var us=Ua(Hn),ds=Ua(function(e,t){return e<=t});function hs(e){if(!e)return[];if(Ui(e))return ss(e)?hr(e):Ea(e);if(Je&&e[Je])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Je]());var t=go(e);return(t==w?ir:t==$?cr:Ds)(e)}function ps(e){return e?(e=ms(e))===d||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function fs(e){var t=ps(e),r=t%1;return t==t?r?t-r:t:0}function gs(e){return e?sn(fs(e),0,f):0}function ms(e){if("number"==typeof e)return e;if(ls(e))return p;if(es(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=es(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Xt(e);var r=ge.test(e);return r||ye.test(e)?ut(e.slice(2),r?2:8):fe.test(e)?p:+e}function ys(e){return Ia(e,xs(e))}function bs(e){return null==e?"":ca(e)}var vs=xa(function(e,t){if(Bo(t)||Ui(t))Ia(t,As(t),e);else for(var r in t)Le.call(t,r)&&en(e,r,t[r])}),Ss=xa(function(e,t){Ia(t,xs(t),e)}),Rs=xa(function(e,t,r,n){Ia(t,xs(t),e,n)}),_s=xa(function(e,t,r,n){Ia(t,As(t),e,n)}),ws=ro(on);var Bs=Xn(function(e,t){e=Pe(e);var n=-1,a=t.length,o=a>2?t[2]:r;for(o&&So(t[0],t[1],o)&&(a=1);++n<a;)for(var i=t[n],s=xs(i),l=-1,c=s.length;++l<c;){var u=s[l],d=e[u];(d===r||Di(d,xe[u])&&!Le.call(e,u))&&(e[u]=i[u])}return e}),Cs=Xn(function(e){return e.push(r,Qa),Ct(Fs,r,e)});function Ps(e,t,n){var a=null==e?r:wn(e,t);return a===r?n:a}function ks(e,t){return null!=e&&mo(e,t,$n)}var $s=Na(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=He.call(t)),e[t]=r},el(nl)),Es=Na(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=He.call(t)),Le.call(e,t)?e[t].push(r):e[t]=[r]},lo),Is=Xn(In);function As(e){return Ui(e)?Yr(e):Tn(e)}function xs(e){return Ui(e)?Yr(e,!0):On(e)}var Ms=xa(function(e,t,r){Gn(e,t,r)}),Fs=xa(function(e,t,r,n){Gn(e,t,r,n)}),Ls=ro(function(e,t){var r={};if(null==e)return r;var n=!1;t=Mt(t,function(t){return t=va(t,e),n||(n=t.length>1),t}),Ia(e,ao(e),r),n&&(r=ln(r,7,eo));for(var a=t.length;a--;)da(r,t[a]);return r});var Ts=ro(function(e,t){return null==e?{}:function(e,t){return zn(e,t,function(t,r){return ks(e,r)})}(e,t)});function Os(e,t){if(null==e)return{};var r=Mt(ao(e),function(e){return[e]});return t=lo(t),zn(e,r,function(e,r){return t(e,r[0])})}var Hs=Xa(As),js=Xa(xs);function Ds(e){return null==e?[]:Zt(e,As(e))}var Ns=Ta(function(e,t,r){return t=t.toLowerCase(),e+(r?Gs(t):t)});function Gs(e){return Xs(bs(e).toLowerCase())}function Ws(e){return(e=bs(e))&&e.replace(ve,rr).replace(Qe,"")}var qs=Ta(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),zs=Ta(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),Us=La("toLowerCase");var Vs=Ta(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});var Ks=Ta(function(e,t,r){return e+(r?" ":"")+Xs(t)});var Ys=Ta(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),Xs=La("toUpperCase");function Js(e,t,n){return e=bs(e),(t=n?r:t)===r?function(e){return nt.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(ce)||[]}(e):e.match(t)||[]}var Zs=Xn(function(e,t){try{return Ct(e,r,t)}catch(e){return Xi(e)?e:new we(e)}}),Qs=ro(function(e,t){return kt(t,function(t){t=Oo(t),an(e,t,Ei(e[t],e))}),e});function el(e){return function(){return e}}var tl=ja(),rl=ja(!0);function nl(e){return e}function al(e){return Ln("function"==typeof e?e:ln(e,1))}var ol=Xn(function(e,t){return function(r){return In(r,e,t)}}),il=Xn(function(e,t){return function(r){return In(e,r,t)}});function sl(e,t,r){var n=As(t),a=_n(t,n);null!=r||es(t)&&(a.length||!n.length)||(r=t,t=e,e=this,a=_n(t,As(t)));var o=!(es(r)&&"chain"in r&&!r.chain),i=Ji(e);return kt(a,function(r){var n=t[r];e[r]=n,i&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__);return(r.__actions__=Ea(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Ft([this.value()],arguments))})}),e}function ll(){}var cl=Wa(Mt),ul=Wa(Et),dl=Wa(Ot);function hl(e){return Ro(e)?zt(Oo(e)):function(e){return function(t){return wn(t,e)}}(e)}var pl=za(),fl=za(!0);function gl(){return[]}function ml(){return!1}var yl=Ga(function(e,t){return e+t},0),bl=Ka("ceil"),vl=Ga(function(e,t){return e/t},1),Sl=Ka("floor");var Rl=Ga(function(e,t){return e*t},1),_l=Ka("round"),wl=Ga(function(e,t){return e-t},0);return jr.after=function(e,t){if("function"!=typeof t)throw new Ee(n);return e=fs(e),function(){if(--e<1)return t.apply(this,arguments)}},jr.ary=ki,jr.assign=vs,jr.assignIn=Ss,jr.assignInWith=Rs,jr.assignWith=_s,jr.at=ws,jr.before=$i,jr.bind=Ei,jr.bindAll=Qs,jr.bindKey=Ii,jr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return qi(e)?e:[e]},jr.chain=hi,jr.chunk=function(e,t,n){t=(n?So(e,t,n):t===r)?1:yr(fs(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var o=0,i=0,s=oe(ft(a/t));o<a;)s[i++]=na(e,o,o+=t);return s},jr.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,a=[];++t<r;){var o=e[t];o&&(a[n++]=o)}return a},jr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=oe(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Ft(qi(r)?Ea(r):[r],yn(t,1))},jr.cond=function(e){var t=null==e?0:e.length,r=lo();return e=t?Mt(e,function(e){if("function"!=typeof e[1])throw new Ee(n);return[r(e[0]),e[1]]}):[],Xn(function(r){for(var n=-1;++n<t;){var a=e[n];if(Ct(a[0],this,r))return Ct(a[1],this,r)}})},jr.conforms=function(e){return function(e){var t=As(e);return function(r){return cn(r,e,t)}}(ln(e,1))},jr.constant=el,jr.countBy=gi,jr.create=function(e,t){var r=Dr(e);return null==t?r:nn(r,t)},jr.curry=function e(t,n,a){var o=Ja(t,8,r,r,r,r,r,n=a?r:n);return o.placeholder=e.placeholder,o},jr.curryRight=function e(t,n,a){var o=Ja(t,i,r,r,r,r,r,n=a?r:n);return o.placeholder=e.placeholder,o},jr.debounce=Ai,jr.defaults=Bs,jr.defaultsDeep=Cs,jr.defer=xi,jr.delay=Mi,jr.difference=Do,jr.differenceBy=No,jr.differenceWith=Go,jr.drop=function(e,t,n){var a=null==e?0:e.length;return a?na(e,(t=n||t===r?1:fs(t))<0?0:t,a):[]},jr.dropRight=function(e,t,n){var a=null==e?0:e.length;return a?na(e,0,(t=a-(t=n||t===r?1:fs(t)))<0?0:t):[]},jr.dropRightWhile=function(e,t){return e&&e.length?pa(e,lo(t,3),!0,!0):[]},jr.dropWhile=function(e,t){return e&&e.length?pa(e,lo(t,3),!0):[]},jr.fill=function(e,t,n,a){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&So(e,t,n)&&(n=0,a=o),function(e,t,n,a){var o=e.length;for((n=fs(n))<0&&(n=-n>o?0:o+n),(a=a===r||a>o?o:fs(a))<0&&(a+=o),a=n>a?0:gs(a);n<a;)e[n++]=t;return e}(e,t,n,a)):[]},jr.filter=function(e,t){return(qi(e)?It:mn)(e,lo(t,3))},jr.flatMap=function(e,t){return yn(wi(e,t),1)},jr.flatMapDeep=function(e,t){return yn(wi(e,t),d)},jr.flatMapDepth=function(e,t,n){return n=n===r?1:fs(n),yn(wi(e,t),n)},jr.flatten=zo,jr.flattenDeep=function(e){return(null==e?0:e.length)?yn(e,d):[]},jr.flattenDepth=function(e,t){return(null==e?0:e.length)?yn(e,t=t===r?1:fs(t)):[]},jr.flip=function(e){return Ja(e,512)},jr.flow=tl,jr.flowRight=rl,jr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var a=e[t];n[a[0]]=a[1]}return n},jr.functions=function(e){return null==e?[]:_n(e,As(e))},jr.functionsIn=function(e){return null==e?[]:_n(e,xs(e))},jr.groupBy=Si,jr.initial=function(e){return(null==e?0:e.length)?na(e,0,-1):[]},jr.intersection=Vo,jr.intersectionBy=Ko,jr.intersectionWith=Yo,jr.invert=$s,jr.invertBy=Es,jr.invokeMap=Ri,jr.iteratee=al,jr.keyBy=_i,jr.keys=As,jr.keysIn=xs,jr.map=wi,jr.mapKeys=function(e,t){var r={};return t=lo(t,3),Sn(e,function(e,n,a){an(r,t(e,n,a),e)}),r},jr.mapValues=function(e,t){var r={};return t=lo(t,3),Sn(e,function(e,n,a){an(r,n,t(e,n,a))}),r},jr.matches=function(e){return Dn(ln(e,1))},jr.matchesProperty=function(e,t){return Nn(e,ln(t,1))},jr.memoize=Fi,jr.merge=Ms,jr.mergeWith=Fs,jr.method=ol,jr.methodOf=il,jr.mixin=sl,jr.negate=Li,jr.nthArg=function(e){return e=fs(e),Xn(function(t){return Wn(t,e)})},jr.omit=Ls,jr.omitBy=function(e,t){return Os(e,Li(lo(t)))},jr.once=function(e){return $i(2,e)},jr.orderBy=function(e,t,n,a){return null==e?[]:(qi(t)||(t=null==t?[]:[t]),qi(n=a?r:n)||(n=null==n?[]:[n]),qn(e,t,n))},jr.over=cl,jr.overArgs=Ti,jr.overEvery=ul,jr.overSome=dl,jr.partial=Oi,jr.partialRight=Hi,jr.partition=Bi,jr.pick=Ts,jr.pickBy=Os,jr.property=hl,jr.propertyOf=function(e){return function(t){return null==e?r:wn(e,t)}},jr.pull=Jo,jr.pullAll=Zo,jr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Un(e,t,lo(r,2)):e},jr.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Un(e,t,r,n):e},jr.pullAt=Qo,jr.range=pl,jr.rangeRight=fl,jr.rearg=ji,jr.reject=function(e,t){return(qi(e)?It:mn)(e,Li(lo(t,3)))},jr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,a=[],o=e.length;for(t=lo(t,3);++n<o;){var i=e[n];t(i,n,e)&&(r.push(i),a.push(n))}return Vn(e,a),r},jr.rest=function(e,t){if("function"!=typeof e)throw new Ee(n);return Xn(e,t=t===r?t:fs(t))},jr.reverse=ei,jr.sampleSize=function(e,t,n){return t=(n?So(e,t,n):t===r)?1:fs(t),(qi(e)?Jr:Zn)(e,t)},jr.set=function(e,t,r){return null==e?e:Qn(e,t,r)},jr.setWith=function(e,t,n,a){return a="function"==typeof a?a:r,null==e?e:Qn(e,t,n,a)},jr.shuffle=function(e){return(qi(e)?Zr:ra)(e)},jr.slice=function(e,t,n){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&So(e,t,n)?(t=0,n=a):(t=null==t?0:fs(t),n=n===r?a:fs(n)),na(e,t,n)):[]},jr.sortBy=Ci,jr.sortedUniq=function(e){return e&&e.length?sa(e):[]},jr.sortedUniqBy=function(e,t){return e&&e.length?sa(e,lo(t,2)):[]},jr.split=function(e,t,n){return n&&"number"!=typeof n&&So(e,t,n)&&(t=n=r),(n=n===r?f:n>>>0)?(e=bs(e))&&("string"==typeof t||null!=t&&!os(t))&&!(t=ca(t))&&or(e)?Ra(hr(e),0,n):e.split(t,n):[]},jr.spread=function(e,t){if("function"!=typeof e)throw new Ee(n);return t=null==t?0:yr(fs(t),0),Xn(function(r){var n=r[t],a=Ra(r,0,t);return n&&Ft(a,n),Ct(e,this,a)})},jr.tail=function(e){var t=null==e?0:e.length;return t?na(e,1,t):[]},jr.take=function(e,t,n){return e&&e.length?na(e,0,(t=n||t===r?1:fs(t))<0?0:t):[]},jr.takeRight=function(e,t,n){var a=null==e?0:e.length;return a?na(e,(t=a-(t=n||t===r?1:fs(t)))<0?0:t,a):[]},jr.takeRightWhile=function(e,t){return e&&e.length?pa(e,lo(t,3),!1,!0):[]},jr.takeWhile=function(e,t){return e&&e.length?pa(e,lo(t,3)):[]},jr.tap=function(e,t){return t(e),e},jr.throttle=function(e,t,r){var a=!0,o=!0;if("function"!=typeof e)throw new Ee(n);return es(r)&&(a="leading"in r?!!r.leading:a,o="trailing"in r?!!r.trailing:o),Ai(e,t,{leading:a,maxWait:t,trailing:o})},jr.thru=pi,jr.toArray=hs,jr.toPairs=Hs,jr.toPairsIn=js,jr.toPath=function(e){return qi(e)?Mt(e,Oo):ls(e)?[e]:Ea(To(bs(e)))},jr.toPlainObject=ys,jr.transform=function(e,t,r){var n=qi(e),a=n||Ki(e)||cs(e);if(t=lo(t,4),null==r){var o=e&&e.constructor;r=a?n?new o:[]:es(e)&&Ji(o)?Dr(Ue(e)):{}}return(a?kt:Sn)(e,function(e,n,a){return t(r,e,n,a)}),r},jr.unary=function(e){return ki(e,1)},jr.union=ti,jr.unionBy=ri,jr.unionWith=ni,jr.uniq=function(e){return e&&e.length?ua(e):[]},jr.uniqBy=function(e,t){return e&&e.length?ua(e,lo(t,2)):[]},jr.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?ua(e,r,t):[]},jr.unset=function(e,t){return null==e||da(e,t)},jr.unzip=ai,jr.unzipWith=oi,jr.update=function(e,t,r){return null==e?e:ha(e,t,ba(r))},jr.updateWith=function(e,t,n,a){return a="function"==typeof a?a:r,null==e?e:ha(e,t,ba(n),a)},jr.values=Ds,jr.valuesIn=function(e){return null==e?[]:Zt(e,xs(e))},jr.without=ii,jr.words=Js,jr.wrap=function(e,t){return Oi(ba(t),e)},jr.xor=si,jr.xorBy=li,jr.xorWith=ci,jr.zip=ui,jr.zipObject=function(e,t){return ma(e||[],t||[],en)},jr.zipObjectDeep=function(e,t){return ma(e||[],t||[],Qn)},jr.zipWith=di,jr.entries=Hs,jr.entriesIn=js,jr.extend=Ss,jr.extendWith=Rs,sl(jr,jr),jr.add=yl,jr.attempt=Zs,jr.camelCase=Ns,jr.capitalize=Gs,jr.ceil=bl,jr.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=ms(n))==n?n:0),t!==r&&(t=(t=ms(t))==t?t:0),sn(ms(e),t,n)},jr.clone=function(e){return ln(e,4)},jr.cloneDeep=function(e){return ln(e,5)},jr.cloneDeepWith=function(e,t){return ln(e,5,t="function"==typeof t?t:r)},jr.cloneWith=function(e,t){return ln(e,4,t="function"==typeof t?t:r)},jr.conformsTo=function(e,t){return null==t||cn(e,t,As(t))},jr.deburr=Ws,jr.defaultTo=function(e,t){return null==e||e!=e?t:e},jr.divide=vl,jr.endsWith=function(e,t,n){e=bs(e),t=ca(t);var a=e.length,o=n=n===r?a:sn(fs(n),0,a);return(n-=t.length)>=0&&e.slice(n,o)==t},jr.eq=Di,jr.escape=function(e){return(e=bs(e))&&Y.test(e)?e.replace(V,nr):e},jr.escapeRegExp=function(e){return(e=bs(e))&&ne.test(e)?e.replace(re,"\\$&"):e},jr.every=function(e,t,n){var a=qi(e)?Et:fn;return n&&So(e,t,n)&&(t=r),a(e,lo(t,3))},jr.find=mi,jr.findIndex=Wo,jr.findKey=function(e,t){return jt(e,lo(t,3),Sn)},jr.findLast=yi,jr.findLastIndex=qo,jr.findLastKey=function(e,t){return jt(e,lo(t,3),Rn)},jr.floor=Sl,jr.forEach=bi,jr.forEachRight=vi,jr.forIn=function(e,t){return null==e?e:bn(e,lo(t,3),xs)},jr.forInRight=function(e,t){return null==e?e:vn(e,lo(t,3),xs)},jr.forOwn=function(e,t){return e&&Sn(e,lo(t,3))},jr.forOwnRight=function(e,t){return e&&Rn(e,lo(t,3))},jr.get=Ps,jr.gt=Ni,jr.gte=Gi,jr.has=function(e,t){return null!=e&&mo(e,t,kn)},jr.hasIn=ks,jr.head=Uo,jr.identity=nl,jr.includes=function(e,t,r,n){e=Ui(e)?e:Ds(e),r=r&&!n?fs(r):0;var a=e.length;return r<0&&(r=yr(a+r,0)),ss(e)?r<=a&&e.indexOf(t,r)>-1:!!a&&Nt(e,t,r)>-1},jr.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:fs(r);return a<0&&(a=yr(n+a,0)),Nt(e,t,a)},jr.inRange=function(e,t,n){return t=ps(t),n===r?(n=t,t=0):n=ps(n),function(e,t,r){return e>=br(t,r)&&e<yr(t,r)}(e=ms(e),t,n)},jr.invoke=Is,jr.isArguments=Wi,jr.isArray=qi,jr.isArrayBuffer=zi,jr.isArrayLike=Ui,jr.isArrayLikeObject=Vi,jr.isBoolean=function(e){return!0===e||!1===e||ts(e)&&Cn(e)==b},jr.isBuffer=Ki,jr.isDate=Yi,jr.isElement=function(e){return ts(e)&&1===e.nodeType&&!as(e)},jr.isEmpty=function(e){if(null==e)return!0;if(Ui(e)&&(qi(e)||"string"==typeof e||"function"==typeof e.splice||Ki(e)||cs(e)||Wi(e)))return!e.length;var t=go(e);if(t==w||t==$)return!e.size;if(Bo(e))return!Tn(e).length;for(var r in e)if(Le.call(e,r))return!1;return!0},jr.isEqual=function(e,t){return xn(e,t)},jr.isEqualWith=function(e,t,n){var a=(n="function"==typeof n?n:r)?n(e,t):r;return a===r?xn(e,t,r,n):!!a},jr.isError=Xi,jr.isFinite=function(e){return"number"==typeof e&&Ht(e)},jr.isFunction=Ji,jr.isInteger=Zi,jr.isLength=Qi,jr.isMap=rs,jr.isMatch=function(e,t){return e===t||Mn(e,t,uo(t))},jr.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,Mn(e,t,uo(t),n)},jr.isNaN=function(e){return ns(e)&&e!=+e},jr.isNative=function(e){if(wo(e))throw new we("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Fn(e)},jr.isNil=function(e){return null==e},jr.isNull=function(e){return null===e},jr.isNumber=ns,jr.isObject=es,jr.isObjectLike=ts,jr.isPlainObject=as,jr.isRegExp=os,jr.isSafeInteger=function(e){return Zi(e)&&e>=-9007199254740991&&e<=h},jr.isSet=is,jr.isString=ss,jr.isSymbol=ls,jr.isTypedArray=cs,jr.isUndefined=function(e){return e===r},jr.isWeakMap=function(e){return ts(e)&&go(e)==A},jr.isWeakSet=function(e){return ts(e)&&"[object WeakSet]"==Cn(e)},jr.join=function(e,t){return null==e?"":Ut.call(e,t)},jr.kebabCase=qs,jr.last=Xo,jr.lastIndexOf=function(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var o=a;return n!==r&&(o=(o=fs(n))<0?yr(a+o,0):br(o,a-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,o):Dt(e,Wt,o,!0)},jr.lowerCase=zs,jr.lowerFirst=Us,jr.lt=us,jr.lte=ds,jr.max=function(e){return e&&e.length?gn(e,nl,Pn):r},jr.maxBy=function(e,t){return e&&e.length?gn(e,lo(t,2),Pn):r},jr.mean=function(e){return qt(e,nl)},jr.meanBy=function(e,t){return qt(e,lo(t,2))},jr.min=function(e){return e&&e.length?gn(e,nl,Hn):r},jr.minBy=function(e,t){return e&&e.length?gn(e,lo(t,2),Hn):r},jr.stubArray=gl,jr.stubFalse=ml,jr.stubObject=function(){return{}},jr.stubString=function(){return""},jr.stubTrue=function(){return!0},jr.multiply=Rl,jr.nth=function(e,t){return e&&e.length?Wn(e,fs(t)):r},jr.noConflict=function(){return pt._===this&&(pt._=De),this},jr.noop=ll,jr.now=Pi,jr.pad=function(e,t,r){e=bs(e);var n=(t=fs(t))?dr(e):0;if(!t||n>=t)return e;var a=(t-n)/2;return qa(gt(a),r)+e+qa(ft(a),r)},jr.padEnd=function(e,t,r){e=bs(e);var n=(t=fs(t))?dr(e):0;return t&&n<t?e+qa(t-n,r):e},jr.padStart=function(e,t,r){e=bs(e);var n=(t=fs(t))?dr(e):0;return t&&n<t?qa(t-n,r)+e:e},jr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),Sr(bs(e).replace(ae,""),t||0)},jr.random=function(e,t,n){if(n&&"boolean"!=typeof n&&So(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=ps(e),t===r?(t=e,e=0):t=ps(t)),e>t){var a=e;e=t,t=a}if(n||e%1||t%1){var o=Rr();return br(e+o*(t-e+ct("1e-"+((o+"").length-1))),t)}return Kn(e,t)},jr.reduce=function(e,t,r){var n=qi(e)?Lt:Vt,a=arguments.length<3;return n(e,lo(t,4),r,a,hn)},jr.reduceRight=function(e,t,r){var n=qi(e)?Tt:Vt,a=arguments.length<3;return n(e,lo(t,4),r,a,pn)},jr.repeat=function(e,t,n){return t=(n?So(e,t,n):t===r)?1:fs(t),Yn(bs(e),t)},jr.replace=function(){var e=arguments,t=bs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},jr.result=function(e,t,n){var a=-1,o=(t=va(t,e)).length;for(o||(o=1,e=r);++a<o;){var i=null==e?r:e[Oo(t[a])];i===r&&(a=o,i=n),e=Ji(i)?i.call(e):i}return e},jr.round=_l,jr.runInContext=e,jr.sample=function(e){return(qi(e)?Xr:Jn)(e)},jr.size=function(e){if(null==e)return 0;if(Ui(e))return ss(e)?dr(e):e.length;var t=go(e);return t==w||t==$?e.size:Tn(e).length},jr.snakeCase=Vs,jr.some=function(e,t,n){var a=qi(e)?Ot:aa;return n&&So(e,t,n)&&(t=r),a(e,lo(t,3))},jr.sortedIndex=function(e,t){return oa(e,t)},jr.sortedIndexBy=function(e,t,r){return ia(e,t,lo(r,2))},jr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=oa(e,t);if(n<r&&Di(e[n],t))return n}return-1},jr.sortedLastIndex=function(e,t){return oa(e,t,!0)},jr.sortedLastIndexBy=function(e,t,r){return ia(e,t,lo(r,2),!0)},jr.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var r=oa(e,t,!0)-1;if(Di(e[r],t))return r}return-1},jr.startCase=Ks,jr.startsWith=function(e,t,r){return e=bs(e),r=null==r?0:sn(fs(r),0,e.length),t=ca(t),e.slice(r,r+t.length)==t},jr.subtract=wl,jr.sum=function(e){return e&&e.length?Kt(e,nl):0},jr.sumBy=function(e,t){return e&&e.length?Kt(e,lo(t,2)):0},jr.template=function(e,t,n){var a=jr.templateSettings;n&&So(e,t,n)&&(t=r),e=bs(e),t=Rs({},t,a,Za);var o,i,s=Rs({},t.imports,a.imports,Za),l=As(s),c=Zt(s,l),u=0,d=t.interpolate||Se,h="__p += '",p=ke((t.escape||Se).source+"|"+d.source+"|"+(d===Z?he:Se).source+"|"+(t.evaluate||Se).source+"|$","g"),f="//# sourceURL="+(Le.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ot+"]")+"\n";e.replace(p,function(t,r,n,a,s,l){return n||(n=a),h+=e.slice(u,l).replace(Re,ar),r&&(o=!0,h+="' +\n__e("+r+") +\n'"),s&&(i=!0,h+="';\n"+s+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=l+t.length,t}),h+="';\n";var g=Le.call(t,"variable")&&t.variable;if(g){if(ue.test(g))throw new we("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(i?h.replace(W,""):h).replace(q,"$1").replace(z,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Zs(function(){return Be(l,f+"return "+h).apply(r,c)});if(m.source=h,Xi(m))throw m;return m},jr.times=function(e,t){if((e=fs(e))<1||e>h)return[];var r=f,n=br(e,f);t=lo(t),e-=f;for(var a=Yt(n,t);++r<e;)t(r);return a},jr.toFinite=ps,jr.toInteger=fs,jr.toLength=gs,jr.toLower=function(e){return bs(e).toLowerCase()},jr.toNumber=ms,jr.toSafeInteger=function(e){return e?sn(fs(e),-9007199254740991,h):0===e?e:0},jr.toString=bs,jr.toUpper=function(e){return bs(e).toUpperCase()},jr.trim=function(e,t,n){if((e=bs(e))&&(n||t===r))return Xt(e);if(!e||!(t=ca(t)))return e;var a=hr(e),o=hr(t);return Ra(a,er(a,o),tr(a,o)+1).join("")},jr.trimEnd=function(e,t,n){if((e=bs(e))&&(n||t===r))return e.slice(0,pr(e)+1);if(!e||!(t=ca(t)))return e;var a=hr(e);return Ra(a,0,tr(a,hr(t))+1).join("")},jr.trimStart=function(e,t,n){if((e=bs(e))&&(n||t===r))return e.replace(ae,"");if(!e||!(t=ca(t)))return e;var a=hr(e);return Ra(a,er(a,hr(t))).join("")},jr.truncate=function(e,t){var n=30,a="...";if(es(t)){var o="separator"in t?t.separator:o;n="length"in t?fs(t.length):n,a="omission"in t?ca(t.omission):a}var i=(e=bs(e)).length;if(or(e)){var s=hr(e);i=s.length}if(n>=i)return e;var l=n-dr(a);if(l<1)return a;var c=s?Ra(s,0,l).join(""):e.slice(0,l);if(o===r)return c+a;if(s&&(l+=c.length-l),os(o)){if(e.slice(l).search(o)){var u,d=c;for(o.global||(o=ke(o.source,bs(pe.exec(o))+"g")),o.lastIndex=0;u=o.exec(d);)var h=u.index;c=c.slice(0,h===r?l:h)}}else if(e.indexOf(ca(o),l)!=l){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+a},jr.unescape=function(e){return(e=bs(e))&&K.test(e)?e.replace(U,fr):e},jr.uniqueId=function(e){var t=++Te;return bs(e)+t},jr.upperCase=Ys,jr.upperFirst=Xs,jr.each=bi,jr.eachRight=vi,jr.first=Uo,sl(jr,function(){var e={};return Sn(jr,function(t,r){Le.call(jr.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),jr.VERSION="4.17.21",kt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){jr[e].placeholder=jr}),kt(["drop","take"],function(e,t){Wr.prototype[e]=function(n){n=n===r?1:yr(fs(n),0);var a=this.__filtered__&&!t?new Wr(this):this.clone();return a.__filtered__?a.__takeCount__=br(n,a.__takeCount__):a.__views__.push({size:br(n,f),type:e+(a.__dir__<0?"Right":"")}),a},Wr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),kt(["filter","map","takeWhile"],function(e,t){var r=t+1,n=1==r||3==r;Wr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:lo(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}}),kt(["head","last"],function(e,t){var r="take"+(t?"Right":"");Wr.prototype[e]=function(){return this[r](1).value()[0]}}),kt(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");Wr.prototype[e]=function(){return this.__filtered__?new Wr(this):this[r](1)}}),Wr.prototype.compact=function(){return this.filter(nl)},Wr.prototype.find=function(e){return this.filter(e).head()},Wr.prototype.findLast=function(e){return this.reverse().find(e)},Wr.prototype.invokeMap=Xn(function(e,t){return"function"==typeof e?new Wr(this):this.map(function(r){return In(r,e,t)})}),Wr.prototype.reject=function(e){return this.filter(Li(lo(e)))},Wr.prototype.slice=function(e,t){e=fs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Wr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=fs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Wr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Wr.prototype.toArray=function(){return this.take(f)},Sn(Wr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),o=jr[a?"take"+("last"==t?"Right":""):t],i=a||/^find/.test(t);o&&(jr.prototype[t]=function(){var t=this.__wrapped__,s=a?[1]:arguments,l=t instanceof Wr,c=s[0],u=l||qi(t),d=function(e){var t=o.apply(jr,Ft([e],s));return a&&h?t[0]:t};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var h=this.__chain__,p=!!this.__actions__.length,f=i&&!h,g=l&&!p;if(!i&&u){t=g?t:new Wr(this);var m=e.apply(t,s);return m.__actions__.push({func:pi,args:[d],thisArg:r}),new Gr(m,h)}return f&&g?e.apply(this,s):(m=this.thru(d),f?a?m.value()[0]:m.value():m)})}),kt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Ie[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);jr.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var a=this.value();return t.apply(qi(a)?a:[],e)}return this[r](function(r){return t.apply(qi(r)?r:[],e)})}}),Sn(Wr.prototype,function(e,t){var r=jr[t];if(r){var n=r.name+"";Le.call(Ir,n)||(Ir[n]=[]),Ir[n].push({name:t,func:r})}}),Ir[Da(r,2).name]=[{name:"wrapper",func:r}],Wr.prototype.clone=function(){var e=new Wr(this.__wrapped__);return e.__actions__=Ea(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ea(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ea(this.__views__),e},Wr.prototype.reverse=function(){if(this.__filtered__){var e=new Wr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Wr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=qi(e),n=t<0,a=r?e.length:0,o=function(e,t,r){var n=-1,a=r.length;for(;++n<a;){var o=r[n],i=o.size;switch(o.type){case"drop":e+=i;break;case"dropRight":t-=i;break;case"take":t=br(t,e+i);break;case"takeRight":e=yr(e,t-i)}}return{start:e,end:t}}(0,a,this.__views__),i=o.start,s=o.end,l=s-i,c=n?s:i-1,u=this.__iteratees__,d=u.length,h=0,p=br(l,this.__takeCount__);if(!r||!n&&a==l&&p==l)return fa(e,this.__actions__);var f=[];e:for(;l--&&h<p;){for(var g=-1,m=e[c+=t];++g<d;){var y=u[g],b=y.iteratee,v=y.type,S=b(m);if(2==v)m=S;else if(!S){if(1==v)continue e;break e}}f[h++]=m}return f},jr.prototype.at=fi,jr.prototype.chain=function(){return hi(this)},jr.prototype.commit=function(){return new Gr(this.value(),this.__chain__)},jr.prototype.next=function(){this.__values__===r&&(this.__values__=hs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},jr.prototype.plant=function(e){for(var t,n=this;n instanceof Nr;){var a=jo(n);a.__index__=0,a.__values__=r,t?o.__wrapped__=a:t=a;var o=a;n=n.__wrapped__}return o.__wrapped__=e,t},jr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Wr){var t=e;return this.__actions__.length&&(t=new Wr(this)),(t=t.reverse()).__actions__.push({func:pi,args:[ei],thisArg:r}),new Gr(t,this.__chain__)}return this.thru(ei)},jr.prototype.toJSON=jr.prototype.valueOf=jr.prototype.value=function(){return fa(this.__wrapped__,this.__actions__)},jr.prototype.first=jr.prototype.head,Je&&(jr.prototype[Je]=function(){return this}),jr}();gt?((gt.exports=gr)._=gr,ft._=gr):pt._=gr}).call(lodash$1)}(lodash$2,lodash$2.exports)),lodash$2.exports}var lodashExports=requireLodash(),lodash=getDefaultExportFromCjs(lodashExports);function getGroupNameKwargs(e,t){const r={Appearance:{label:"Body and clothes",groups:[]},Item:{label:"Items and restraints",groups:[]}};let n;switch(AssetGroup.filter(t).sort((e,t)=>e.Category.localeCompare(t.Category)||e.Description.localeCompare(t.Description)||e.Name.localeCompare(t.Name)).forEach(e=>{r[e.Category]?.groups.push(e)}),e){case"all":n=()=>!0;break;case"none":n=()=>!1;break;default:n=e}return{type:"select-multiple",label:"The item group(s) to which the option will be applied",required:!0,options:Object.values(r).flatMap(({label:e,groups:t})=>t.map(t=>({label:t.Description,value:t.Name,group:e,default:n(t)})))}}function validateOptions(e,t,r){const n=r.description??[],a=isArray(n)?n:[n],o=isArray(r.label)?r.label:[r.label],i=r.kwargs??{},s=`Hook "${t.name}-${e}-${r.hookName}"`;if("function"!=typeof r.listener)throw new TypeError(`${s}: Invalid "listener" type: "${typeof r.listener}"`);if("string"!=typeof r.hookName)throw new TypeError(`${s}: Invalid "hookName" type: "${typeof r.hookName}"`);if(!r.hookName)throw new Error(`${s}: Invalid "hookName" value; string must be non-empty`);if(!isArray(r.label)&&"string"!=typeof r.label)throw new TypeError(`${s}: Invalid "label" type: "${typeof r.label}"`);if(!o.every(e=>"string"==typeof e||e instanceof HTMLElement))throw new TypeError(`${s}: Invalid "label" array-values; all values must be strings or html elements`);if(!isArray(r.description)&&"string"!=typeof r.description&&null!=r.description)throw new TypeError(`${s}: Invalid "description" type: "${typeof r.description}"`);if(!a.every(e=>"string"==typeof e||e instanceof HTMLElement))throw new TypeError(`${s}: Invalid "description" array-values; all values must be strings or html elements`);if("boolean"!=typeof r.conditional)throw new TypeError(`${s}: Invalid "conditional" type: "${typeof r.conditional}"`);if(null!=r.showConfig&&"boolean"!=typeof r.showConfig)throw new TypeError(`${s}: Invalid "showConfig" type: "${typeof r.showConfig}"`);if(null!=r.kwargs&&!CommonIsObject(r.kwargs))throw new TypeError(`${s}: Invalid "kwargs" type: "${typeof r.kwargs}"`);return validateKwargsConfig(i,s),Object.freeze({hookType:e,registrationData:t,listener:r.listener,hookName:r.hookName,label:o,description:a,conditional:r.conditional,showConfig:r.showConfig??r.conditional,kwargs:i})}class WheelHookRegister{constructor(){this.validKeys=Object.freeze(new Set(["validateItemUnequip","color","difficulty","craft","typeRecord","property","beforeOutfitEquip","validateItemEquip","beforeItemEquip","afterItemEquip","afterOutfitEquip"])),this.validateItemUnequip=[],this.color=[],this.difficulty=[],this.craft=[],this.typeRecord=[],this.property=[],this.beforeOutfitEquip=[],this.validateItemEquip=[],this.beforeItemEquip=[],this.afterItemEquip=[],this.afterOutfitEquip=[]}values(){return Array.from(this.validKeys).flatMap(e=>this[e].map(e=>e))}get(e,t,r){return this[t]?.find(t=>t.registrationData.name===e&&t.hookName===r)??null}async addEventListener(e,t,r){if("loading"!==document.readyState?await GameReadyState.load:await new Promise(e=>document.addEventListener("load",async()=>e(await GameReadyState.load))),this[e].some(e=>e.registrationData.name===t.name&&e.hookName===r.hookName))throw new Error(`Hook "${t.name}-${e}-${r.hookName}" has already been registered`);switch(e){case"validateItemUnequip":case"color":case"difficulty":case"craft":case"typeRecord":case"property":case"validateItemEquip":case"beforeItemEquip":case"afterItemEquip":r?.kwargs?.targetGroups||(r={...r,kwargs:{...r.kwargs,targetGroups:getGroupNameKwargs("all",e=>e.AllowNone)}})}this[e].push(validateOptions(e,t,r))}run(e,t,r,n){const a=n[e]??={},o=this[e].map(({listener:n,hookName:o,conditional:i,registrationData:s})=>{a[s.name]??={},a[s.name][o]??={error:[],success:[],skip:[]};const l=`${s.name}-${e}-${o}`;let c,u=r[l];if(u||!i){if(u??={},"newAsset"in t&&t.newAsset&&u.targetGroups)switch(u.targetGroups.type){case"select":if(u.targetGroup.value===t.newAsset.Group.Name)break;return void a[s.name][o].skip.push({event:t,kwargs:u,reason:"Target group mismatch"});case"select-multiple":if(u.targetGroups.value.has(t.newAsset.Group.Name))break;return void a[s.name][o].skip.push({event:t,kwargs:u,reason:"Target group mismatch"})}try{c=n(t,u)}catch(e){return a[s.name][o].error.push({event:t,kwargs:u,reason:e}),null}return a[s.name][o].success.push({event:t,kwargs:u}),c}a[s.name][o].skip.push({event:t,kwargs:u??{},reason:"Disabled event listener"})}).filter(Boolean);return o}}const wheelHookRegister=new WheelHookRegister;function _validateSelect(e,t){const r=lodashExports.pick(e,"value","type");switch(t?.type){case void 0:return void 0!==r.value&&"string"!=typeof r.value?null:r;case"select":if(void 0!==r.value&&"string"!=typeof r.value){const e=t.options.find(e=>e.default);r.value=e?e.value??e.label:void 0}else if(t.options.some(e=>(e.value??e.label)===r.value)){const e=t.options.find(e=>(e.value??e.label)===r.value);r.value=e?e.value??e.label:void 0}return r;default:return null}}function _validateSelectMultiple(e,t){const r=lodashExports.pick(e,"value","type","state");switch(isArray(e.value)&&(r.value=new Set(e.value)),t?.type){case void 0:return r.value instanceof Set&&["some","all","none"].some(e=>r.state===e)?r:null;case"select-multiple":if(r.value instanceof Set){const e=new Set(t.options.map(e=>e.value??e.label));r.value=new Set(Array.from(r.value).filter(t=>e.has(t)))}else{const e=t.options.filter(e=>e.default);r.value=new Set(e.map(e=>e.value??e.label))}return 0===r.value.size?r.state="none":r.value.size===t.options.length?r.state="all":r.state="some",r;default:return null}}function _validateCheckbox(e,t){const r=lodashExports.pick(e,"value","type");switch(t?.type){case void 0:return"boolean"!=typeof r.value?null:r;case"checkbox":return"boolean"!=typeof r.value&&(r.value=t.default),r;default:return null}}function _validateNumber(e,t){const r=lodashExports.pick(e,"value","type");switch(t?.type){case void 0:return"number"==typeof r.value&&Number.isFinite(r.value)?r:null;case"number":return"number"==typeof r.value&&Number.isFinite(r.value)||(r.value=t.default),lodashExports.inRange(r.value,t.min,t.max)||(r.value=lodashExports.clamp(r.value,t.min,t.max)),"numeric"!==t.inputmode||Number.isInteger(r.value)||(r.value=Math.round(r.value)),r;default:return null}}function _validateText(e,t){const r=lodashExports.pick(e,"value","type");switch(t?.type){case void 0:return"string"!=typeof r.value?null:r;case"text":if("string"!=typeof r.value&&(r.value=t.default),t.default!==r.value&&(null!=t.maxlength&&r.value.length>t.maxlength&&(r.value=r.value.slice(0,t.maxlength)),null!=t.minlength&&r.value.length<t.minlength&&(r.value=r.value.padEnd(t.minlength," ")),t.pattern)){("string"==typeof t.pattern?new RegExp(t.pattern):t.pattern).test(r.value)||(r.value=t.default)}return r;default:return null}}function validateHooks(e,t){const r={};for(const n of Object.values(e))if(CommonIsObject(n)&&"string"==typeof n.hookName&&"string"==typeof n.hookType&&"string"==typeof n.modName&&"object"==typeof n.kwargs&&null!==n.kwargs){const e={},a=t[n.hookType]?.find(e=>e.hookName===n.hookName&&e.hookType===n.hookType)?.kwargs??{};for(const[t,r]of Object.entries(n.kwargs)){const n=r,o=a[t];if(!CommonIsObject(n))continue;let i;switch(n.type){case"select":i=_validateSelect(n,o);break;case"select-multiple":i=_validateSelectMultiple(n,o);break;case"checkbox":i=_validateCheckbox(n,o);break;case"text":i=_validateText(n,o);break;case"number":i=_validateNumber(n,o)}null!=i&&(e[t]=i)}r[`${n.modName}-${n.hookType}-${n.hookName}`]=Object.freeze({...n,kwargs:e,get kwargsConfig(){return wheelHookRegister.get(n.modName,n.hookType,n.hookName)?.kwargs??{}}})}return r}function itemSetType(e,t,r){if(validateCharacter(t),null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);ExtendedItemSetOptionByRecord(t,e,r,{refresh:!1,push:!1})}function getBaselineProperty(e,t,r){const n={Asset:e};return ExtendedItemInit(t,n,!1,!1),r&&itemSetType(n,t,r),n.Property??{}}const LEGACY_FLAGS=Object.freeze(["Exclusive","5 Minutes","15 Minutes","1 Hour","4 Hours","High Security"]),DEFAULT_FLAGS=Object.freeze([Object.freeze({type:"ExclusivePadlock",description:"Exclusive",enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:300,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:900,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:3600,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:14400,enabled:!1}),Object.freeze({type:"HighSecurityPadlock",description:"High security",enabled:!1}),Object.freeze({type:null,description:"No lock",enabled:!1})]);function equipTimerLock(e,t,r){validateInt(t,"seconds",60,14400),equipLock(e,"TimerPasswordPadlock",r)&&(null==e.Property&&(e.Property={}),e.Property.RemoveTimer=CurrentTime+1e3*t,e.Property.RemoveItem=!0,e.Property.LockSet=!0,e.Property.Password=getRandomPassword(8))}function equipHighSecLock(e,t){equipLock(e,"HighSecurityPadlock",t),null==e.Property&&(e.Property={}),e.Property.MemberNumberListKeys=""}function equipLock(e,t,r){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);if("string"!=typeof t)throw new TypeError('Invalid "lockName" type: '+typeof t);validateCharacter(r);const n=AssetGet(r.AssetFamily,"ItemMisc",t);if(null==n)throw new Error(`Invalid "lockName" value: ${t}`);return!(null!=InventoryGetLock(e)||!InventoryDoesItemAllowLock(e)||InventoryBlockedOrLimited(r,{Asset:n}))&&(InventoryLock(r,e,{Asset:n},null,!1),!0)}function applyFlag(e,t,r){const n=e.type;switch(n){case"TimerPasswordPadlock":equipTimerLock(t,e.time,r);break;case"ExclusivePadlock":equipLock(t,"ExclusivePadlock",r);break;case"HighSecurityPadlock":InventoryDoesItemAllowLock(t)&&t.Craft&&(t.Craft.Property="Puzzling"),equipHighSecLock(t,r);break;case null:break;default:throw new Error(`Unknown flag type: ${n}`,e)}}function enableFlags(e,t){return e.forEach((e,r)=>{e.enabled=t.includes(r)}),e}function parseLegacyFlags(e){return DEFAULT_FLAGS.map((t,r)=>{const n={...t};return n.enabled=e.includes(LEGACY_FLAGS[r]),n})}function getFlagDescription(e){switch(e.type){case"ExclusivePadlock":return"Exclusive";case"HighSecurityPadlock":return"High Security";case"TimerPasswordPadlock":return`${Math.floor(e.time/60)} Minutes`;case null:return"No Lock";default:throw new Error(`Invalid flag type: ${e.type}`)}}const StripLevel=Object.freeze({NONE:0,CLOTHES:1,UNDERWEAR:2,COSPLAY:3,ALL:4});let MBSDummy;function getStripCondition(e,t){switch(e){case StripLevel.NONE:return()=>!1;case StripLevel.CLOTHES:return e=>e.Group.AllowNone&&!e.BodyCosplay&&!e.Group.Underwear;case StripLevel.UNDERWEAR:return e=>e.Group.AllowNone&&!e.BodyCosplay;case StripLevel.COSPLAY:return e=>!canChangeCosplay(t)?e.Group.AllowNone&&!e.BodyCosplay:e.Group.AllowNone;case StripLevel.ALL:return e=>!!canChangeCosplay(t)||e.Group.AllowNone&&!e.BodyCosplay;default:throw new Error(`Invalid "stripLevel" value: ${e}`)}}function characterStrip(e,t){validateCharacter(t);const r=getStripCondition(e,t),n=t.Appearance;for(let e=n.length-1;e>=0;e--){const t=n[e].Asset;t.Group.AllowNone&&"Appearance"===t.Group.Category&&r(t)&&n.splice(e,1)}}function itemsArgSortDFS(e,t){if(void 0===t)return[-1,!1];if(void 0!==t.priority&&void 0!==t.blocksSubSet)return[t.priority,t.blocksSubSet];if(0===t.block.size)return t.priority=0,t.blocksSubSet=!1,[t.priority,t.blocksSubSet];{const r=[];for(const n of t.block)r.push(itemsArgSortDFS(e,e.get(n)));return t.priority=1+Math.max(0,...r.map(e=>e[0])),t.blocksSubSet=t.superSet&&r.some(e=>e[1]),[t.priority,t.blocksSubSet]}}function itemsArgSort(e,t,r=[]){if(!isArray(e))throw new TypeError('Invalid "itemList" type: '+typeof e);const n=new Map;[e,r].forEach((e,r)=>{for(const{Group:a,Name:o,TypeRecord:i}of e){if(n.has(a))continue;const e=AssetGet(t.AssetFamily,a,o);if(null==e)throw new Error(`Unknown asset: ${a}${o}`);if("Item"!==e.Group.Category)continue;const s=getBaselineProperty(e,t,i),l={superSet:1===r,block:new Set(...e.Block??[],...s.Block??[])};(e.Effect?.includes("Enclose")||s.Effect?.includes("Enclose"))&&(l.priority=AssetGroup.length,l.blocksSubSet=l.superSet),n.set(a,l)}});for(const[e,t]of n)itemsArgSortDFS(n,t);return n}function getBlockSuperset(e,t,r){const n=itemsArgSort(e,r,t);return t.filter(e=>n.get(e.Group)?.blocksSubSet)}function fortuneItemsSort(e,t=MBSDummy){const r=itemsArgSort(e,t);return sortBy(e,e=>r.get(e.Group)?.priority??1/0)}function canUnlock(e,t){const r=InventoryGetLock(e);if(!InventoryItemHasEffect(e,"Lock"))return!0;if("Decoy"===e.Craft?.Property){if(null==r)return!1;return!["OwnerOnly","LoverOnly","FamilyOnly"].some(t=>r.Asset[t]||e.Asset[t])}const n=BCX_MOD_API.getRuleState("block_keyuse_self"),a=t.IsPlayer()&&n?.inEffect&&n?.isEnforced;switch(r?.Asset?.Name){case"SafewordPadlock":return!0;case"MetalPadlock":case"MistressPadlock":case"MistressTimerPadlock":case"PandoraPadlock":return!a&&!LogQuery("KeyDeposit","Cell")&&t.Inventory.some(e=>e.Asset.Name===`${r.Asset.Name}Key`);case"TimerPasswordPadlock":case"PasswordPadlock":case"CombinationPadlock":return Number(e.Property?.LockMemberNumber)===t.MemberNumber;case"HighSecurityPadlock":{const r=(e?.Property?.MemberNumberListKeys??"").split(",").map(Number);return!a&&includes(r,t.MemberNumber)}default:return!1}}function blockedByEnclose(e){const t=e.Appearance.find(e=>InventoryItemHasEffect(e,"Enclose"));return null!=t&&!canUnlock(t,e)}function eventToJSON(){return{...this,targetGroup:"targetGroup"in this&&this.targetGroup?this.targetGroup.Name:void 0,newAsset:"newAsset"in this&&this.newAsset?this.newAsset.Name:void 0,oldItem:"oldItem"in this&&this.oldItem?{...this.oldItem,Asset:this.oldItem.Asset.Name,Group:this.oldItem.Asset.Group.Name}:void 0,newItem:"newItem"in this&&this.newItem?{...this.newItem,Asset:this.newItem.Asset.Name,Group:this.newItem.Asset.Group.Name}:void 0,character:"character"in this&&this.character?pick(this.character,"Name","MemberNumber","NickName"):void 0}}function getEventProxy(e,t){const r=new Set(t??[]);return new Proxy(Object.seal(Object.defineProperty(e,"toJSON",{value:eventToJSON,enumerable:!1})),{set(e,t,...n){if(r.has(t))throw new TypeError(`"${String(t)}" is read-only`);if(t in e)return Reflect.set(e,t,...n);throw new TypeError(`can't define property "${String(t)}": Object is not extensible`)},defineProperty(e,t,...n){if(r.has(t))throw new TypeError(`can't redefine non-configurable property "${String(t)}"`);if(t in e)return Reflect.defineProperty(e,t,...n);throw new TypeError(`can't define property "${String(t)}": Object is not extensible`)},deleteProperty(e,t){if(t in e)throw new TypeError(`property "${String(t)}" is non-configurable and can't be deleted`);return Reflect.deleteProperty(e,t)},isExtensible:()=>!1,setPrototypeOf(){throw new TypeError("can't set prototype of this object")}})}function fortuneWheelEquip(e,t,r,n,a,o=null,i=null){const s=Object.fromEntries(Object.entries(a).filter(([e,t])=>Object.entries(t.kwargsConfig).every(([e,r])=>!("required"in r)||!r.required||t.kwargs[e])).map(([e,t])=>[e,t.kwargs]));if(!isArray(t))throw new TypeError('Invalid "itemList" type: '+typeof t);if(blockedByEnclose(n))return void logger.log(`Failed to equip all "${e}" wheel of fortune items: cannot unlock enclosing item`);characterStrip(r,n);const l=getBlockSuperset(t,n.Appearance.map(e=>({Group:e.Asset.Group.Name,Name:e.Asset.Name,TypeRecord:e.Property?.TypeRecord,NoEquip:!0})),n),c={activeHooks:a},u=getEventProxy({character:n,name:e},["character","name"]);wheelHookRegister.run("beforeOutfitEquip",u,s,c);const d={},h=new Set,p={};for(const{Name:r,Group:a,Equip:o,NoEquip:i}of[...l,...t]){const t=AssetGet(n.AssetFamily,a,r),l=t?.Group,u=InventoryGet(n,a),f="function"!=typeof o||o(n);if(null!=t&&null!=l)if(f){const o=getEventProxy({character:n,name:e,oldItem:u,newAsset:i?null:t,targetGroup:l},["character","name","oldItem","newAsset","targetGroup"]),h=wheelHookRegister.run("validateItemUnequip",o,s,c);if(0!==h.length){d[`${a}/${r}`]=h;continue}null!=u&&(p[a]=u,InventoryRemove(n,a,!1))}else h.add(a);else d[`${a}/${r}`]=["Unknown asset"]}for(const{Name:r,Group:a,Craft:l,Color:u,TypeRecord:f,Property:g}of t){const t=AssetGet(n.AssetFamily,a,r),m=t?.Group,y=d[`${a}/${r}`],b=p[a]??null;if(null==t||null==m||void 0!==y||h.has(a))continue;const v=getEventProxy({character:n,name:e,oldItem:b,newAsset:t},["character","name","oldItem","newAsset"]),S=wheelHookRegister.run("validateItemEquip",v,s,c);if(S.length){d[`${a}/${r}`]=S;continue}const R=getEventProxy({character:n,name:e,oldItem:b,newAsset:t,lock:o?.type??null,color:cloneDeep(u??t.DefaultColor),properties:cloneDeep(g),difficultyModifier:0,typeRecord:f?cloneDeep(f):null,craft:l?Object.seal(pick(l,"Name","Description","Property")):null},["lock","newAsset","oldItem","name","character"]);wheelHookRegister.run("beforeItemEquip",R,s,c);const _=getEventProxy({character:n,name:e,oldItem:b,newAsset:t,color:R.color??[...t.DefaultColor]},["character","name","oldItem","newAsset","color"]),w=wheelHookRegister.run("color",_,s,c),B=[..._.color];for(const e of w)for(const[t,r]of e.slice(0,B.length).entries()){if(t>=B.length)break;void 0!==r&&(B[t]=r)}const C=CharacterAppearanceSetItem(n,a,t,B,SkillGetWithRatio(n,"Bondage"),i?.MemberNumber);let P=R.typeRecord;const k=getEventProxy({character:n,name:e,oldItem:b,newAsset:t,typeRecord:f??null},["character","name","oldItem","newAsset","typeRecord"]);wheelHookRegister.run("typeRecord",k,s,c).forEach(e=>{P??={};for(const[t,r]of entries(e))void 0!==r&&(P[t]=r)});const $=cloneDeep(g),E=getEventProxy({character:n,name:e,oldItem:b,newAsset:t,properties:R.properties??{}},["character","name","oldItem","newAsset","properties"]);if(wheelHookRegister.run("property",E,s,c).forEach(e=>{for(const[t,r]of entries(e))void 0!==r&&($[t]=r)}),ExtendedItemSetOptionByRecord(n,C,P,{refresh:!1,push:!1,properties:$}),t.Group.IsItem()&&!t.IsLock&&t.Wear&&t.Enable){let r=cloneDeep(l);const o=getEventProxy({character:n,name:e,oldItem:b,newAsset:t,craft:R.craft},["character","name","oldItem","newAsset","craft"]);wheelHookRegister.run("craft",o,s,c).forEach(e=>{r||(r={Name:t.Description,Description:"",Property:"Normal",Color:"",Lock:"",Private:!0,Item:t.Name,ItemProperty:null});for(const t of["Name","Description","Property"]){const n=e[t];null!=n&&(r[t]=n)}}),null!=r&&(C.Craft=r,InventoryCraft(i,n,a,C.Craft,!1,!1))}const I=getEventProxy({character:n,name:e,oldItem:b,newAsset:t,difficultyModifier:R.difficultyModifier??0},["character","name","oldItem","newAsset","difficultyModifier"]);C.Difficulty+=sum(wheelHookRegister.run("difficulty",I,s,c)),o&&applyFlag(o,C,n);const A=getEventProxy({character:n,name:e,oldItem:b,newItem:C,newAsset:t},["character","name","oldItem","newAsset","newItem"]);wheelHookRegister.run("afterItemEquip",A,s,c)}const f=getEventProxy({character:n,name:e},["character","name"]);if(wheelHookRegister.run("afterOutfitEquip",f,s,c),CharacterRefresh(n,n.IsPlayer(),!1),n.IsPlayer()){ChatRoomCharacterUpdate(n);const t=Object.values(d).length;0!==t&&logger.log(`Failed to equip ${t} "${e}" wheel of fortune items`,d),logger.debug(`Fortune wheel '${e}' status`,c)}}function validateOverrideHeight(e,t){const r=VariableHeightDataLookup[`${t.Group.Name}${t.Name}`];if(void 0===r)return!1;const n=e;return null!==n&&"object"==typeof n&&Number.isInteger(n.Priority)&&"number"==typeof n.Height&&n.Height<=r.maxHeight&&n.Height>=r.minHeight&&(null==n.HeightRatioProportion||"number"==typeof n.HeightRatioProportion&&n.HeightRatioProportion>=0&&n.HeightRatioProportion<=1)}function validateText(e,t,r){if("string"!=typeof t||!DynamicDrawTextRegex.test(t))return!1;const n=`${r.Group.Name}${r.Name}`,[a,o]=entries(TextItemDataLookup).find(([e])=>e.includes(n))??["",null];return null!==o&&t.length<=(o.maxLength[e]??-1)}function isEmpty(e){return 0===Object.keys(e).length}function validateTranslation(e,t){let r;if(!CommonIsObject(e))return!1;r=e;const n=new Set(t.Layer.map(e=>e.Name??t.Name));for(const[e,t]of Object.entries(r))if(e===AssetOverride||n.has(e))if(CommonIsObject(t)){for(const[e,r]of entries(t))e in PoseRecord||e===PoseType.DEFAULT||delete t[e],Number.isInteger(r)?t[e]=clamp(r,Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER):delete t[e];isEmpty(t)&&delete r[e]}else delete r[e];else delete r[e];return isEmpty(r)}waitForBC("equipper",{async afterLoad(){MBSDummy=CharacterLoadSimple("MBSDummy")}}),wheelHookRegister.addEventListener("validateItemUnequip",MBS_MOD_INFO,{listener:({character:e,targetGroup:t})=>InventoryGroupIsBlockedForCharacter(e,t.Name,!1)?"InventoryGroupIsBlockedForCharacter":null,hookName:"InventoryGroupIsBlockedForCharacter",label:"Check whether the body area (Asset Group) for a character is blocked and cannot be used.",conditional:!1}),wheelHookRegister.addEventListener("validateItemUnequip",MBS_MOD_INFO,{listener:({character:e,targetGroup:t})=>InventoryGroupIsBlockedByOwnerRule(e,t.Name)?"InventoryGroupIsBlockedByOwnerRule":null,hookName:"InventoryGroupIsBlockedByOwnerRule",label:"Check whether the body area is blocked by an owner rule.",conditional:!1}),wheelHookRegister.addEventListener("validateItemUnequip",MBS_MOD_INFO,{listener:({character:e,oldItem:t})=>t&&!canUnlock(t,e)?"Locked item equipped":null,hookName:"LockedItem",label:"Check whether character can unlock the currently equipped item.",conditional:!1}),wheelHookRegister.addEventListener("validateItemUnequip",MBS_MOD_INFO,{listener:({character:e,newAsset:t})=>t&&InventoryBlockedOrLimited(e,{Asset:t})?"InventoryBlockedOrLimited":null,hookName:"InventoryBlockedOrLimited",label:"Check whether the new item is blocked or limited.",conditional:!1}),wheelHookRegister.addEventListener("validateItemUnequip",MBS_MOD_INFO,{listener:({newAsset:e})=>e&&!InventoryChatRoomAllow(e.Category??[])?"InventoryChatRoomAllow":null,hookName:"InventoryChatRoomAllow",label:"Check whether the room has the new item's category blocked or not.",conditional:!1}),wheelHookRegister.addEventListener("validateItemUnequip",MBS_MOD_INFO,{listener:({character:e,newAsset:t})=>{if(!t)return null;return e.IsPlayer()&&LogQuery("ClubSlave","Management")&&t.Group.IsAppearance()?"Blocked via Club Slave Collar":null},hookName:"IsClubSlave",label:"Check whether the new item is blocked bye virtue of being a club slave.",conditional:!1}),wheelHookRegister.addEventListener("validateItemUnequip",MBS_MOD_INFO,{listener:({character:e,oldItem:t})=>{if(!e.IsPlayer()||null==t)return null;const r=BCX_MOD_API.getCurseInfo(t.Asset.Group.Name);return r?.active?"Blocked via BCX curse":null},hookName:"BCXCurse",label:"Check whether removal of the old item is blocked due to a BCX curse.",conditional:!1}),wheelHookRegister.addEventListener("validateItemEquip",MBS_MOD_INFO,{listener:({character:e,newAsset:t})=>{const r=InventoryDisallow(e,t);return r?`InventoryDisallow: ${r}`:null},hookName:"InventoryDisallow",label:"Check whether the new items prerequisites can be satisfied.",conditional:!1});const PROP_MAPPING=Object.freeze({OverridePriority:(e,t)=>{if(isInteger(e))return!0;if(CommonIsObject(e)){const r=t.Layer.map(e=>e.Name);return entries(e).every(([e,t])=>r.includes(e)&&isInteger(t))}return!1},Opacity:(e,t)=>"number"==typeof e?e<=t.MaxOpacity&&e>=t.MinOpacity:!!isArray(e)&&e.every((e,r)=>null!=t.Layer[r]&&"number"==typeof e&&e<=1&&e>=0),Text:(e,t)=>validateText("Text",e,t),Text2:(e,t)=>validateText("Text2",e,t),Text3:(e,t)=>validateText("Text3",e,t),ShowText:(e,t)=>"boolean"==typeof e,TriggerValues:(e,t)=>"string"==typeof e&&e.split(",").length===ItemVulvaFuturisticVibratorTriggers.length,AccessMode:(e,t)=>"string"==typeof e&&ItemVulvaFuturisticVibratorAccessModes.includes(e),PunishOrgasm:(e,t)=>"boolean"==typeof e,PunishStandup:(e,t)=>"boolean"==typeof e,Texts:(e,t)=>!!Array.isArray(e)&&(!(e.length<ItemDevicesLuckyWheelMinTexts||e.length>ItemDevicesLuckyWheelMaxTexts)&&e.every(e=>"string"==typeof e&&e.length<=ItemDevicesLuckyWheelMaxTextLength)),TargetAngle:(e,t)=>"number"==typeof e&&e>=0&&e<=360,OverrideHeight:validateOverrideHeight,PunishActivity:(e,t)=>"boolean"==typeof e,PunishStruggle:(e,t)=>"boolean"==typeof e,PunishStruggleOther:(e,t)=>"boolean"==typeof e,PunishRequiredSpeechWord:(e,t)=>"string"==typeof e&&e.length<=70,PunishProhibitedSpeechWords:(e,t)=>"string"==typeof e&&e.length<=70,PunishSpeech:(e,t)=>isInteger(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PunishRequiredSpeech:(e,t)=>isInteger(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PunishProhibitedSpeech:(e,t)=>isInteger(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PublicModeCurrent:(e,t)=>isInteger(e)&&e>=0&&e<FuturisticTrainingBeltModes.length,PublicModePermission:(e,t)=>isInteger(e)&&e>=0&&e<FuturisticTrainingBeltPermissions.length,ShockLevel:(e,t)=>isInteger(e)&&e>=0&&e<=2,PortalLinkCode:(e,t)=>"string"==typeof e&&PortalLinkCodeRegex.test(e),OpenPermission:(e,t)=>"boolean"==typeof e,OpenPermissionChastity:(e,t)=>"boolean"==typeof e,OpenPermissionArm:(e,t)=>"boolean"==typeof e,OpenPermissionLeg:(e,t)=>"boolean"==typeof e,BlockRemotes:(e,t)=>"boolean"==typeof e,DrawingLeft:validateTranslation,DrawingTop:validateTranslation});function sanitizeProperties(e,t){if(null===t||"object"!=typeof t)return{};const r=new Set(["OverridePriority",e.EditOpacity?"Opacity":null,"DrawingTop","DrawingLeft"].filter(e=>null!=e));if(e.Archetype){const n=ExtendedItemGatherOptions({Asset:e,Property:t});for(const e of n){"VariableHeightOption"===e.OptionType&&r.add("OverrideHeight");for(const t of keys(e.ParentData.baselineProperty??{}))CraftingPropertyExclude.has(t)||r.add(t)}}const n={};for(const[a,o]of entries(t)){const t=PROP_MAPPING[a];null!=o&&r.has(a)&&void 0!==t&&(t(o,e)&&(n[a]=o))}return n}const UNSUPPORTED_ASSET_CHECKS=Object.freeze(new Map([["Unknown asset",e=>null==e],["Unsupported owner-only asset",e=>e?.OwnerOnly],["Unsupported lovers-only asset",e=>e?.LoverOnly],["Unsupported D/S family-only asset",e=>e?.FamilyOnly],["Unsupported disabled asset",e=>!e?.Enable],["Unsupported script-asset",e=>"Script"===e?.Group?.Category]]));function fromItemBundle(e,t,r=!0){for(const[r,n]of UNSUPPORTED_ASSET_CHECKS)if(n(e))throw new Error(`${r}: ${t.Group}${t.Name}`);let n,a;"string"==typeof t.Color?n=[t.Color]:Array.isArray(t.Color)&&t.Color.every(e=>"string"==typeof e)&&(n=[...t.Color]),null!==t.Craft&&"object"==typeof t.Craft&&(a=Object.assign(cloneDeep(t.Craft),{TypeRecord:void 0,OverridePriority:null,Lock:""}),CraftingValidate(a,e,!1));const o=t.Property??{};let i;return CommonIsObject(o.TypeRecord)?i=Object.freeze({...o.TypeRecord}):"string"==typeof o.Type||null===o.Type?i=ExtendedItemTypeToRecord(e,o.Type):"string"==typeof o.Mode&&(i=ExtendedItemTypeToRecord(e,o.Mode)),Object.freeze({Name:t.Name,Group:t.Group,Custom:r,Property:Object.freeze(sanitizeProperties(e,t.Property)),TypeRecord:i,Color:n,Craft:Object.freeze(a),Equip:void 0})}function fromItemBundles(e){if(!isArray(e)){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "items" type: '+typeof e);e=[e]}const t=[],r=new Map,n=new Set;return e.forEach((e,a)=>{let o=null;try{o=AssetGet("Female3DCG",e.Group,e.Name);const r=fromItemBundle(o,e);!n.has(e.Group)&&null!=o&&(o.Group.IsItem()||o.Group.IsAppearance()&&o.Group.AllowNone)&&(n.add(e.Group),t.push(r))}catch(e){let t=`${o?.Group?.Name}${o?.Name}`;t.includes("undefined")&&(t=`Item ${a}`),r.set(t,e)}}),0!==r.size&&logger.log(`Failed to parse ${r.size} of the provided items`,r),t}function toItemBundle(e,t){const{Group:r,Name:n,Color:a,Craft:o,TypeRecord:i,Property:s}=e,l=AssetGet(t.AssetFamily,r,n);if(null==l)throw new Error(`Unknown asset: ${r}${n}`);return{Group:r,Name:n,Color:clone(a),Craft:clone(o),Property:Object.assign(getBaselineProperty(l,t,i),cloneDeep(s))}}function toItemBundles(e,t){if(!isArray(e))throw new TypeError('Invalid "items" type: '+typeof e);return e.map(e=>toItemBundle(e,t))}var _MBSObjectScreen_index;class MBSScreen{get screen(){return this.constructor.screen}get ids(){return this.constructor.ids}get rootParams(){return this.screenParams[this.constructor.ids.root]}constructor(e,t,r){this.parent=e,this.screenParams=merge(cloneDeep(t),r??{}),this.child=null}resize(e){const t=MainCanvas.canvas.clientHeight/1e3,r=MainCanvas.canvas.clientWidth/2e3;for(const[n,{shape:a,visibility:o}]of entries(this.screenParams)){const i=MainCanvas.canvas.offsetLeft+a[0]*r,s=MainCanvas.canvas.offsetTop+a[1]*t,l=a[2]*r,c=a[3]*t,u=document.getElementById(n),d={left:`${i}px`,top:`${s}px`,width:`${l}px`,height:`${c}px`};e&&(d.fontFamily=CommonGetFontName(),u.toggleAttribute("hidden","hidden"===o)),Object.assign(u.style,d)}}unload(){document.activeElement?.dispatchEvent(new FocusEvent("blur"));for(const e of keys(this.screenParams)){const t=document.getElementById(e);null!==t&&(t.hidden=!0)}}exit(){document.activeElement?.dispatchEvent(new FocusEvent("blur"));for(const e of keys(this.screenParams))ElementRemove(e)}async load(){CurrentScreenFunctions?.Unload?.(),ControllerIsActive()&&ControllerClearAreas(),CurrentScreen=this.screen,CurrentScreenFunctions=this.getFunctions(),CurrentDarkFactor=1,CommonGetFont.clearCache(),CommonGetFontName.clearCache(),CurrentScreenFunctions?.Resize?.(!0)}async loadChild(e,...t){return this.child&&this.child.exit(),this.child=new e(this,...t),await this.child.load(),this.child}exitScreens(e){let t=this.parent,r=this.child;for(;null!=r?.child;)r=r.child;for(;r&&r!==this;)r.child=null,r.exit(),r=r.parent;if(e)for(;null!==t&&!(t instanceof ScreenProxy);)t.child=null,t.exit(),t=t.parent;null!==t&&(t.load(),t.child=null)}getFunctions(){return{Run:this.run?.bind(this)??CommonNoop,Draw:this.draw?.bind(this),Click:this.click?.bind(this)??CommonNoop,Load:this.load.bind(this),Unload:this.unload?.bind(this),Resize:this.resize?.bind(this),Exit:this.exit.bind(this)}}}MBSScreen.background="Sheet",MBSScreen.screenParamsDefault={};class ScreenProxy extends MBSScreen{constructor(e,t,r,n){super(e,ScreenProxy.screenParamsDefault,null),this.module=t,this.background=r,this.screenFunctions=Object.freeze({...n})}run(e){return this.screenFunctions.Run(e)}draw(){return this.screenFunctions.Draw?.()}click(e){return this.screenFunctions.Click(e)}load(){return this.screenFunctions.Load?.()??Promise.resolve(void 0)}unload(){return this.screenFunctions.Unload?.()}resize(e){return this.screenFunctions.Resize?.(e)}keyDown(e){return this.screenFunctions.KeyDown?.(e)??!1}exit(){return this.screenFunctions.Exit?.()}}ScreenProxy.screenParamsDefault={};const ExitAction=Object.freeze({NONE:0,SAVE:1,DELETE:2});class MBSObjectScreen extends MBSScreen{get index(){return __classPrivateFieldGet(this,_MBSObjectScreen_index,"f")}set index(e){validateInt(e,"index",0,this.mbsList.length-1),__classPrivateFieldSet(this,_MBSObjectScreen_index,e,"f")}get mbsObject(){return this.mbsList[__classPrivateFieldGet(this,_MBSObjectScreen_index,"f")]}hasStorageSpace(){return null!==this.mbsList[this.index]||this.dataSize.value<=this.dataSize.max*this.dataSize.marigin}constructor(e,t,r,n,a,o){super(e,a,o),_MBSObjectScreen_index.set(this,0),this.character=n,this.mbsList=t,this.index=r,this.dataSize=Object.seal({value:0,valueRecord:{},max:MAX_DATA,marigin:.9})}async load(){const e=measureDataSize(this.character.OnlineSharedSettings);this.dataSize.value=sumBy(Object.values(e),e=>Number.isNaN(e)?0:e),this.dataSize.valueRecord=e,super.load()}exit(e=!0,t=ExitAction.NONE){if(super.exit(),!this.character.IsPlayer())return this.exitScreens(e);switch(t){case ExitAction.NONE:break;case ExitAction.SAVE:this.settings.isValid(this.index)&&this.hasStorageSpace()&&(this.mbsList[this.index]=this.settings.writeSettings(),this.mbsList[this.index]?.register());break;case ExitAction.DELETE:{const e=this.mbsList[this.index];this.mbsList[this.index]=null,e?.unregister();break}default:throw new Error(`Unsupported action: ${t}`)}this.exitScreens(e)}}_MBSObjectScreen_index=new WeakMap;var styles$8='#mbs-fwitemset {\n  --gap: min(2dvh, 1dvw);\n  --height: min(7dvh, 3.5dvw);\n  background: unset;\n  grid-template: "menubar menubar menubar menubar menubar menubar menubar" min(9dvh, 4.5dvw) ". . name-input name-input . . ." var(--height) ". . outfit-input outfit-input outfit-button outfit-button outfit-button" var(--height) ". . strip-header lock-header lock-header lock-header lock-header" var(--height) ". . strip-input lock-grid lock-grid lock-grid lock-grid" var(--height) ". . equip-header lock-grid lock-grid lock-grid lock-grid" var(--height) ". . equip-input lock-grid lock-grid lock-grid lock-grid" var(--height) ". . weight-header lock-grid lock-grid lock-grid lock-grid" var(--height) ". . weight-input lock-grid lock-grid lock-grid lock-grid" var(--height) ". . event-header event-header event-header event-header event-header" var(--height) ". . event-menu event-menu event-menu event-menu event-menu" min-content/min(9dvh, 4.5dvw) min(40dvh, 20dvw) auto min(38dvh, 19dvw) min(16dvh, 8dvw) min(9dvh, 4.5dvw) min(9dvh, 4.5dvw);\n  overflow-y: scroll;\n}\n#mbs-fwitemset .button-tooltip {\n  --tooltip-gap: var(--gap);\n}\n\n#mbs-fwitemset-menubar {\n  display: grid;\n  gap: var(--gap);\n  grid-area: menubar;\n  grid-template-columns: subgrid;\n  grid-template-rows: subgrid;\n  padding: 3px;\n}\n#mbs-fwitemset-menubar #mbs-fwitemset-delete {\n  grid-column: 1;\n}\n#mbs-fwitemset-menubar #mbs-fwitemset-header {\n  grid-column: 2/5;\n  margin-left: min(20dvh, 10dvw);\n}\n#mbs-fwitemset-menubar #mbs-fwitemset-accept {\n  grid-column: 5;\n  justify-self: end;\n}\n#mbs-fwitemset-menubar #mbs-fwitemset-cancel {\n  grid-column: 6;\n}\n#mbs-fwitemset-menubar #mbs-fwitemset-exit {\n  grid-column: 7;\n}\n#mbs-fwitemset-menubar .button {\n  height: min(9dvh, 4.5dvw);\n  width: min(9dvh, 4.5dvw);\n}\n\n#mbs-fwitemset-form {\n  background-color: unset;\n  display: grid;\n  grid-column: 1/8;\n  grid-row: 2/12;\n  grid-template-columns: subgrid;\n  grid-template-rows: subgrid;\n  height: calc(8.5 * (var(--height) + var(--gap)));\n  padding: 3px;\n}\n#mbs-fwitemset-form > label, #mbs-fwitemset-form > span {\n  place-self: end start;\n}\n\n#mbs-fwitemset-outfit-name {\n  grid-area: name-input;\n}\n\n#mbs-fwitemset-outfit-input {\n  grid-area: outfit-input;\n}\n\n#mbs-fwitemset-outfit-button {\n  grid-area: outfit-button;\n  grid-template-columns: auto;\n  grid-template-rows: var(--height) auto;\n}\n\n#mbs-fwitemset-strip-header {\n  grid-area: strip-header;\n}\n\n#mbs-fwitemset-strip-dropdown {\n  grid-area: strip-input;\n  width: min(40dvh, 20dvw);\n}\n\n#mbs-fwitemset-equip-header {\n  grid-area: equip-header;\n}\n\n#mbs-fwitemset-equip-dropdown {\n  grid-area: equip-input;\n  width: min(40dvh, 20dvw);\n}\n\n#mbs-fwitemset-weight-header {\n  grid-area: weight-header;\n}\n\n#mbs-fwitemset-weight-input {\n  align-self: start;\n  grid-area: weight-input;\n  height: 100%;\n  width: calc(var(--height) + 16px);\n}\n\n#mbs-fwitemset-lock-header {\n  grid-area: lock-header;\n}\n\n#mbs-fwitemset-lock-grid {\n  align-self: start;\n  display: grid;\n  gap: var(--gap);\n  grid-area: lock-grid;\n  grid-template-columns: 1fr 1fr;\n  margin: unset;\n  padding: unset;\n}\n\n.mbs-fwitemset-lock-container {\n  align-items: center;\n  display: grid;\n  word-wrap: break-word;\n  gap: var(--gap);\n  grid-template-columns: var(--height) auto;\n  list-style-type: none;\n  margin: unset;\n  padding: unset;\n}\n\n.mbs-timer {\n  height: 100%;\n  text-align: center;\n  width: 100%;\n}\n\n#mbs-fwitemset-strip-dropdown-content, #mbs-fwitemset-equip-dropdown-content {\n  width: min-content;\n}\n\n#mbs-fwitemset-events-label {\n  grid-area: event-header;\n}\n\n#mbs-fwitemset-events {\n  grid-area: event-menu;\n  list-style-type: none;\n  margin: unset;\n  padding: unset;\n}\n#mbs-fwitemset-events p {\n  margin-bottom: calc(var(--gap) / 2);\n  margin-top: calc(var(--gap) / 2);\n}\n#mbs-fwitemset-events .mbs-fwitemset-event-menu-placeholder {\n  justify-self: center;\n}\n#mbs-fwitemset-events .mbs-fwitemset-event-menu-placeholder > button {\n  height: var(--height);\n  width: var(--height);\n}\n#mbs-fwitemset-events * ~ .mbs-fwitemset-event-menu-placeholder {\n  display: none;\n}\n#mbs-fwitemset-events .mbs-fwitemset-event-multi-select {\n  background-color: unset;\n  display: grid;\n  gap: var(--gap);\n  grid-template: "all none" var(--height) "select select" auto/1fr 1fr;\n}\n#mbs-fwitemset-events .mbs-fwitemset-event-multi-select button[data-select-all] {\n  grid-area: all;\n}\n#mbs-fwitemset-events .mbs-fwitemset-event-multi-select button:not([data-select-all]) {\n  grid-area: none;\n}\n#mbs-fwitemset-events .mbs-fwitemset-event-multi-select select {\n  grid-area: select;\n}\n#mbs-fwitemset-events .mbs-fwitemset-event-collapse {\n  height: var(--height);\n  width: var(--height);\n}\n#mbs-fwitemset-events .mbs-fwitemset-event-menu {\n  display: block;\n  list-style-type: none;\n  margin: unset;\n  padding: unset;\n  padding-bottom: calc(var(--gap) / 2);\n  padding-top: calc(var(--gap) / 2);\n}\n#mbs-fwitemset-events .mbs-fwitemset-event-menu select {\n  min-height: var(--height);\n  width: 100%;\n}\n#mbs-fwitemset-events .mbs-fwitemset-event-menu input:invalid {\n  background-color: var(--mbs-background-color);\n  box-shadow: unset;\n}\n#mbs-fwitemset-events .mbs-fwitemset-event-menu input:disabled {\n  background-color: color-mix(in srgb, var(--mbs-button-color) 60%, black 40%);\n}\n#mbs-fwitemset-events .mbs-fwitemset-event-menu input[type=text], #mbs-fwitemset-events .mbs-fwitemset-event-menu input[type=number] {\n  border-color: black;\n  direction: ltr;\n  height: 1.15em;\n  width: 100%;\n}\n#mbs-fwitemset-events .mbs-fwitemset-event-kwargs {\n  align-items: center;\n  column-gap: var(--gap);\n  direction: rtl;\n  display: grid;\n  grid-auto-flow: column;\n  grid-template-columns: 3fr 1fr;\n  text-align: left;\n  width: 100%;\n}\n#mbs-fwitemset-events .mbs-fwitemset-event-kwargs:has(select) {\n  display: block;\n  text-align: center;\n}\n#mbs-fwitemset-events .mbs-fwitemset-event-kwargs > * {\n  direction: ltr;\n  margin-block: var(--gap);\n}\n#mbs-fwitemset-events .mbs-fwitemset-event-kwargs:last-of-type > :last-child {\n  margin-block: var(--gap) 0;\n}\n#mbs-fwitemset-events .mbs-fwitemset-event {\n  align-items: center;\n  display: grid;\n  gap: var(--gap);\n  grid-template-columns: min-content min-content auto 45%;\n  padding-right: calc(var(--gap) / 2);\n}\n#mbs-fwitemset-events .mbs-fwitemset-event:nth-child(odd) {\n  background-color: color-mix(in srgb, var(--mbs-background-color), black 15%);\n}\n#mbs-fwitemset-events .mbs-fwitemset-event:has(.mbs-fwitemset-event-collapse[aria-expanded=false]) > .mbs-fwitemset-event-menu > * {\n  display: none;\n}\n#mbs-fwitemset-events .mbs-fwitemset-event:has(.mbs-fwitemset-event-collapse[aria-expanded=false]) > .mbs-fwitemset-event-menu > .mbs-fwitemset-event-menu-placeholder {\n  display: block;\n}\n#mbs-fwitemset-events .mbs-fwitemset-event-checkbox:checked ~ .mbs-fwitemset-event-menu select:invalid:not(:disabled),\n#mbs-fwitemset-events .mbs-fwitemset-event-checkbox:checked ~ .mbs-fwitemset-event-menu input:invalid:not(:disabled) {\n  background-color: #fbb;\n  box-shadow: 0 0 3px 2px #c22;\n}',_FWItemSetScreen_instances,_FWItemSetScreen_canSave,_FWItemSetScreen_updateButton,_FWItemSetScreen_updateTooltip,_FWItemSetScreen_previewUpdate,_FWItemSetScreen_reloadPreviewAppearance,_FWItemSetScreen_loadWithItemSet,_FWItemSetScreen_loadWithoutItemSet;const STRIP_MAPPING=Object.freeze({[StripLevel.NONE]:"None",[StripLevel.CLOTHES]:"Clothes",[StripLevel.UNDERWEAR]:"Clothes and underwear",[StripLevel.COSPLAY]:"Clothes, underwear and cosplay items",[StripLevel.ALL]:"Clothes, underwear, cosplay items and body"});function toInputTime(e){e=Number.isNaN(e)?60:clamp(e,60,14400);const t={h:0,m:0,s:0};return t.h=Math.floor(e/3600),e-=3600*t.h,t.m=Math.floor(e/60),e-=60*t.m,t.s=e,`${t.h.toString().padStart(2,"0")}:${t.m.toString().padStart(2,"0")}:${t.s.toString().padStart(2,"0")}`}function createDropdown(e,t,r){return jsxRuntimeExports.jsx("select",{required:!0,disabled:r,id:e.id,onChange:function(){t[e.level]=clamp(Number.parseInt(this.value,10),StripLevel.NONE,StripLevel.COSPLAY)},onFocus:function(){try{this.showPicker?.()}catch{return}},children:Object.values(STRIP_MAPPING).slice(0,4).map((e,t)=>jsxRuntimeExports.jsx("option",{value:t,selected:0===t,children:e}))})}function createTimerInput(e,t,r){return jsxRuntimeExports.jsx("input",{type:"text",class:"mbs-timer",id:ID$4.lockTimer+t.toString(),disabled:r,value:toInputTime(e.time),pattern:/([0]?[0-4]:)?([0-6]?[0-9]:)?([0-6]?[0-9])?/.source,maxLength:8,"aria-label":"Configure lock time",onInput:t=>{const r=t.target,[n,a]=[r.selectionStart,r.selectionEnd],o=r.value;if(r.value=o.replace(/[^0-9:]/g,""),r.value!==o&&(null!==n||null!==a)){const e=/[^0-9:]/g,t=Array.from(o).map((t,r)=>e.test(t)?r:-1).filter(e=>-1!==e);null!==n&&(r.selectionStart=t.reduce((e,t)=>e+(n>=t?-1:0),n)),null!==a&&(r.selectionEnd=t.reduce((e,t)=>e+(a>=t?-1:0),a))}const[i,s,l]=r.value.split(":").slice(-3).map(e=>Number.parseInt(e,10)||0),c=3600*i+60*s+l;e.time=clamp(c,60,14400)},onBlur:t=>{const r=t.target;if(r.disabled)return;const[n,a,o]=r.value.split(":").slice(-3).map(e=>Number.parseInt(e,10)||0),i=3600*n+60*a+o;r.value=toInputTime(i),e.time=clamp(i,60,14400)},onFocus:e=>{const t=e.target,r=t.selectionStart;null!==r&&(r<=2?(t.selectionStart=0,t.selectionEnd=2):r<=5?(t.selectionStart=3,t.selectionEnd=5):r<=8&&(t.selectionStart=6,t.selectionEnd=8))},onWheel:t=>{const r=t.target;if(r.disabled)return void t.stopImmediatePropagation();t.preventDefault();const n=r.value.replace(/[^0-9:]/g,""),[a,o,i]=n.split(":").slice(-3).map(e=>Number.parseInt(e,10)||0);let s=3600*a+60*o+i;if(t.deltaY<0)s+=120;else{if(!(t.deltaY>0))return;s-=120}r.value=toInputTime(s),e.time=clamp(s,60,14400)}})}function createHookMenu(e){function t(t){if(!this.validity.valid)return this.checked=this.defaultChecked,void t.stopImmediatePropagation();const r=this.closest(".mbs-fwitemset-event"),n=r?.getAttribute("data-name"),a=r?.getAttribute("data-type"),o=r?.getAttribute("data-mod");if(!(n&&a&&o&&r))return void t.stopImmediatePropagation();const i=Array.from(r.querySelectorAll(".mbs-fwitemset-event-kwarg-config"));this.checked?(e.settings.activeHooks.set(`${o}-${a}-${n}`,{modName:o,hookType:a,hookName:n,kwargs:new Map}),i.forEach(e=>{e.toggleAttribute("disabled",!1),e.dispatchEvent(new CustomEvent("change",{detail:"no-preview-refresh"}))})):(e.settings.activeHooks.delete(`${o}-${a}-${n}`),i.forEach(e=>e.toggleAttribute("disabled",!0))),e.reloadPreviewAppearance();const s=r.querySelector("button.mbs-fwitemset-event-collapse");s&&"true"!==s.ariaExpanded&&s.click()}return[jsxRuntimeExports.jsx("span",{id:ID$4.eventsLabel,children:"Addon-specific options:"}),jsxRuntimeExports.jsx("menu",{id:ID$4.events,"aria-labelledby":"mbs-fwitemset-events-label",children:wheelHookRegister.values().sort((e,t)=>e.registrationData.name.localeCompare(t.registrationData.name)||e.hookType.localeCompare(t.hookType)||e.hookName.localeCompare(t.hookName)).map(r=>{if(!r.showConfig)return null;const n=`${r.registrationData.name}-${r.hookType}-${r.hookName}`,a=createKwargElements(`${ID$4.events}-${n}`,r.kwargs,e.settings);a.flatMap(e=>Array.from(e.querySelectorAll("input, select"))).forEach(t=>{t.addEventListener("change",t=>{t instanceof CustomEvent&&"no-preview-refresh"===t.detail||e.reloadPreviewAppearance()})}),0===a.length?a.push(jsxRuntimeExports.jsx("li",{class:"mbs-fwitemset-event-menu-placeholder","aria-hidden":"true",children:jsxRuntimeExports.jsx("b",{children:""})})):a.push(jsxRuntimeExports.jsx("li",{class:"mbs-fwitemset-event-menu-placeholder","aria-hidden":"true",children:ElementButton.Create(`${ID$4.eventsCheckbox}-${n}-collapse2`,function(e){const t=this.closest(".mbs-fwitemset-event")?.querySelector("button.mbs-fwitemset-event-collapse");t?t.click():e.stopImmediatePropagation()},{label:"...",noStyling:!0,labelPosition:"center"},{button:{attributes:{"aria-label":"Uncollapse section"}},label:{attributes:{"aria-hidden":"true"}}})}));const o=jsxRuntimeExports.jsxs("li",{"data-name":r.hookName,"data-mod":r.registrationData.name,"data-type":r.hookType,class:"mbs-fwitemset-event",children:[ElementButton.Create(`${ID$4.eventsCheckbox}-${n}-collapse`,function(e){if(e.shiftKey){const e="true"===this.ariaExpanded,t=document.getElementById(ID$4.events),r=t?.querySelectorAll(`button.mbs-fwitemset-event-collapse[aria-expanded="${!e}"`)??[];if(r.forEach(e=>e.click()),r.length&&!e)return void this.click()}const t=this.querySelector(".button-label");t?"true"===this.ariaExpanded?(t.textContent="",this.closest(".mbs-fwitemset-event")?.scrollIntoView({behavior:"instant"})):t.textContent="":e.stopImmediatePropagation()},{label:"",noStyling:!0,role:"checkbox",labelPosition:"center"},{button:{attributes:{"aria-label":"Collapse section","aria-expanded":"true","aria-checked":"true"},classList:["mbs-fwitemset-event-collapse"]},label:{attributes:{"aria-hidden":"true"}}}),jsxRuntimeExports.jsx("input",{type:"checkbox",class:"checkbox mbs-fwitemset-event-checkbox",id:`${ID$4.eventsCheckbox}-${n}`,onChange:t,"aria-describedby":`${ID$4.eventsCheckbox}-${n}-description`}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("label",{for:`${ID$4.eventsCheckbox}-${n}`,children:jsxRuntimeExports.jsxs("span",{children:[`${r.registrationData.name}: `,r.label]})})," "]}),jsxRuntimeExports.jsx("p",{id:`${ID$4.eventsCheckbox}-${n}-description`,children:r.description})]}),jsxRuntimeExports.jsx("menu",{class:"mbs-fwitemset-event-menu","aria-label":"Configuration",children:a})]});return o}).filter(Boolean)})]}const root$4="mbs-fwitemset",ID$4=Object.freeze({root:root$4,styles:`${root$4}-style`,delete:`${root$4}-delete`,accept:`${root$4}-accept`,cancel:`${root$4}-cancel`,exit:`${root$4}-exit`,header:`${root$4}-header`,midDiv:`${root$4}-mid-grid`,botDiv:`${root$4}-bot-grid`,outfitName:`${root$4}-outfit-name`,outfitInput:`${root$4}-outfit-input`,outfitButton:`${root$4}-outfit-button`,stripHeader:`${root$4}-strip-header`,stripSelect:`${root$4}-strip-dropdown`,equipHeader:`${root$4}-equip-header`,equipSelect:`${root$4}-equip-dropdown`,weightHeader:`${root$4}-weight-header`,weightInput:`${root$4}-weight-input`,lockHeader:`${root$4}-lock-header`,lockGrid:`${root$4}-lock-grid`,lockContainer:`${root$4}-lock-container`,lockCheckbox:`${root$4}-lock-checkbox`,lockTimer:`${root$4}-lock-timer`,events:`${root$4}-events`,eventsLabel:`${root$4}-events-label`,eventsCheckbox:`${root$4}-events-checkbox`});class FWItemSetScreen extends MBSObjectScreen{constructor(e,t,r,n,a=null){const o=!n.IsPlayer();super(e,t,r,n,FWItemSetScreen.screenParamsDefault,a),_FWItemSetScreen_instances.add(this),_FWItemSetScreen_previewUpdate.set(this,!1),this.settings=new FWSelectedItemSet(t),this.preview=CharacterLoadSimple("MBSFortuneWheelPreview");const i={Appearance:{label:"Body and clothes",groups:[]},Item:{label:"Items and restraints",groups:[]}};AssetGroup.filter(e=>e.AllowNone).sort((e,t)=>e.Category.localeCompare(t.Category)||e.Description.localeCompare(t.Description)).forEach(e=>{e.Category in i&&i[e.Category].groups.push(e)}),document.body.appendChild(jsxRuntimeExports.jsxs("div",{id:ID$4.root,class:"mbs-screen",children:[jsxRuntimeExports.jsx("style",{id:ID$4.styles,children:styles$8.toString()}),ElementMenu.Create("mbs-fwitemset-menubar",[jsxRuntimeExports.jsx("h1",{id:ID$4.header,children:`Customize wheel of fortune item set ${this.index}`}),ElementButton.Create(ID$4.delete,()=>this.exit(!1,ExitAction.DELETE),{image:"./Icons/Trash.png",tooltip:"Delete item set",tooltipPosition:"right",disabled:o},{button:{attributes:{"screen-generated":void 0}}}),ElementButton.Create(ID$4.accept,()=>this.exit(!1,ExitAction.SAVE),{image:"./Icons/Accept.png",tooltip:"Save item set:\nMissing outfit",tooltipPosition:"left",disabled:o},{button:{attributes:{form:"mbs-fwitemset-form",type:"submit","screen-generated":void 0}}}),ElementButton.Create(ID$4.cancel,()=>this.exit(!1,ExitAction.NONE),{image:"./Icons/Cancel.png",tooltip:"Cancel",tooltipPosition:"left"},{button:{attributes:{"screen-generated":void 0}}}),ElementButton.Create(ID$4.exit,()=>this.exit(!0,ExitAction.NONE),{image:"./Icons/Exit.png",tooltip:"Exit",tooltipPosition:"left"},{button:{attributes:{"screen-generated":void 0}}})],{direction:"ltr"}),jsxRuntimeExports.jsxs("div",{id:"mbs-fwitemset-form",role:"form",class:"scroll-box","aria-labelledby":ID$4.header,children:[jsxRuntimeExports.jsx("input",{type:"text",id:ID$4.outfitName,placeholder:"Outfit name","aria-label":"Outfit name",disabled:o,maxLength:70,onInput:e=>{this.settings.name=e.target.value,__classPrivateFieldGet(this,_FWItemSetScreen_instances,"m",_FWItemSetScreen_updateButton).call(this,ID$4.accept)},onFocus:e=>e.target.select()}),jsxRuntimeExports.jsx("input",{type:"text",id:ID$4.outfitInput,placeholder:"Outfit code","aria-label":"Outfit code",disabled:o,onInput:e=>{this.settings.outfitCache=e.target.value,__classPrivateFieldGet(this,_FWItemSetScreen_instances,"m",_FWItemSetScreen_updateButton).call(this,ID$4.outfitButton)},onFocus:e=>e.target.select()}),ElementButton.Create(ID$4.outfitButton,()=>__classPrivateFieldGet(this,_FWItemSetScreen_instances,"m",_FWItemSetScreen_updateButton).call(this,ID$4.accept,!0),{tooltip:"Parse the outfit code",label:"Parse",labelPosition:"center",disabled:!0,tooltipPosition:"bottom",tooltipRole:"label"},{label:{attributes:{"aria-hidden":"true"}}}),jsxRuntimeExports.jsx("label",{id:ID$4.stripHeader,for:ID$4.stripSelect,children:"Clothing strip level:"}),jsxRuntimeExports.jsx("label",{id:ID$4.equipHeader,for:ID$4.equipSelect,children:"Clothing equip level:"}),jsxRuntimeExports.jsx("label",{id:ID$4.weightHeader,for:ID$4.weightInput,children:"Wheel option weight:"}),jsxRuntimeExports.jsx("span",{id:ID$4.lockHeader,children:"Enabled lock types:"}),jsxRuntimeExports.jsx("input",{type:"number",id:ID$4.weightInput,min:1,max:9,value:1,disabled:o,onInput:e=>{const t=e.target;this.settings.weight=clamp(Number.parseInt(t.value,10),1,9)},onWheel:e=>{const t=e.target;if(!t.disabled){if(e.preventDefault(),e.deltaY<0)t.stepUp(1);else{if(!(e.deltaY>0))return;t.stepDown(1)}t.dispatchEvent(new InputEvent("input"))}},onFocus:e=>e.target.select()}),createDropdown({id:ID$4.stripSelect,level:"stripLevel"},this.settings,o),createDropdown({id:ID$4.equipSelect,level:"equipLevel"},this.settings,o),jsxRuntimeExports.jsxs("menu",{id:ID$4.lockGrid,"aria-labelledby":ID$4.lockHeader,children:[" ",this.settings.flags.map((e,t)=>{let r,n;if("TimerPasswordPadlock"===e.type)r=createTimerInput(e,t,o),n="Timer lock";else r=jsxRuntimeExports.jsx("label",{for:ID$4.lockCheckbox+t.toString(),children:e.description});return jsxRuntimeExports.jsxs("li",{class:ID$4.lockContainer,id:ID$4.lockContainer+t.toString(),children:[jsxRuntimeExports.jsx("input",{type:"checkbox",class:`checkbox ${ID$4.lockCheckbox}`,id:ID$4.lockCheckbox+t.toString(),disabled:o,checked:e.enabled,onClick:()=>{e.enabled=!e.enabled,__classPrivateFieldGet(this,_FWItemSetScreen_instances,"m",_FWItemSetScreen_updateButton).call(this,ID$4.accept)},"aria-label":n}),r]})})," "]}),createHookMenu(this)]})]}))}reloadPreviewAppearance(){if(__classPrivateFieldGet(this,_FWItemSetScreen_previewUpdate,"f"))return;if(__classPrivateFieldSet(this,_FWItemSetScreen_previewUpdate,!0,"f"),this.preview.Appearance=[...this.character.Appearance],this.preview.OnlineSharedSettings=this.character.OnlineSharedSettings,null===this.settings.itemList)return __classPrivateFieldSet(this,_FWItemSetScreen_previewUpdate,!1,"f"),void CharacterRefresh(this.preview,!1,!1);const e=this.settings.equipLevel;__classPrivateFieldGet(this,_FWItemSetScreen_instances,"m",_FWItemSetScreen_reloadPreviewAppearance).call(this,this.settings.itemList,e)}async load(){await super.load();const e=this.mbsObject;null!==e?__classPrivateFieldGet(this,_FWItemSetScreen_instances,"m",_FWItemSetScreen_loadWithItemSet).call(this,e):__classPrivateFieldGet(this,_FWItemSetScreen_instances,"m",_FWItemSetScreen_loadWithoutItemSet).call(this),this.reloadPreviewAppearance()}draw(){DrawCharacter(this.preview,200,175,.78,!1)}exit(e,t){CharacterDelete(this.preview),super.exit(e,t)}}_FWItemSetScreen_previewUpdate=new WeakMap,_FWItemSetScreen_instances=new WeakSet,_FWItemSetScreen_canSave=function(){return this.settings.isValid(this.index)&&this.hasStorageSpace()},_FWItemSetScreen_updateButton=function(e,t=!1){const r=document.getElementById(e),n=!this.character.IsPlayer();switch(e){case ID$4.accept:if(t){const e=this.settings.loadFromBase64();r.disabled=n||!(e&&__classPrivateFieldGet(this,_FWItemSetScreen_instances,"m",_FWItemSetScreen_canSave).call(this)),e&&this.reloadPreviewAppearance()}else r.disabled=n||!(null!==this.settings.itemList&&__classPrivateFieldGet(this,_FWItemSetScreen_instances,"m",_FWItemSetScreen_canSave).call(this));break;case ID$4.outfitButton:r.disabled=n||!this.settings.outfitCache;break;default:throw new Error(`Unsupported tooltip type: ${e}`)}__classPrivateFieldGet(this,_FWItemSetScreen_instances,"m",_FWItemSetScreen_updateTooltip).call(this,r)},_FWItemSetScreen_updateTooltip=function(e){const t=e.querySelector("[role='tooltip']");if(t)switch(e.id){case ID$4.accept:{const e="Save item set";this.settings.loadFromBase64()?__classPrivateFieldGet(this,_FWItemSetScreen_instances,"m",_FWItemSetScreen_canSave).call(this)?t.innerText=e:this.settings.name?this.settings.flags.every(e=>!e.enabled)?t.innerText=`${e}:\nMust enable at least one lock type`:this.hasStorageSpace()?t.innerText=`${e}:\nMax allowed OnlineSharedSettings storage size exceeded (${byteToKB(this.dataSize.value)} / ${byteToKB(this.dataSize.max)}`:t.innerText=`${e}:\nDuplicate name`:t.innerText=`${e}:\nMissing name`:t.innerText=`${e}:\nMissing outfit`;break}case ID$4.outfitButton:{const e="Parse outfit code";this.settings.outfitCache?t.innerText=e:t.innerText=`${e}:\nMissing code`;break}default:throw new Error(`Unsupported tooltip type: ${e.id}`)}},_FWItemSetScreen_reloadPreviewAppearance=async function(e,t){CharacterReleaseTotal(this.preview);const r=getStripCondition(t,this.preview),n=this.preview.AssetFamily;fortuneWheelEquip("MBSPreview",e.filter(({Name:e,Group:t})=>{const a=AssetGet(n,t,e);return null!=a&&("Appearance"!==a.Group.Category||r(a))}),this.settings.stripLevel,this.preview,this.settings.writeSettings(!0).activeHooks,null,Player),__classPrivateFieldSet(this,_FWItemSetScreen_previewUpdate,!1,"f")},_FWItemSetScreen_loadWithItemSet=function(e){const t=this.character.IsPlayer();this.settings.readSettings(e),this.settings.outfitCache=LZString.compressToBase64(JSON.stringify(toItemBundles(e.itemList,this.preview))),ElementValue(ID$4.outfitName,e.name),ElementValue(ID$4.weightInput,e.weight.toString()),ElementValue(ID$4.outfitInput,this.settings.outfitCache);for(const[e,t]of this.settings.flags.entries()){if(document.getElementById(`${ID$4.lockCheckbox}${e}`).checked=t.enabled,"TimerPasswordPadlock"===t.type)ElementValue(`${ID$4.lockTimer}${e}`,toInputTime(t.time))}const r=document.getElementById(ID$4.equipSelect),n=document.getElementById(ID$4.stripSelect);r.value=this.settings.equipLevel.toString(),n.value=this.settings.stripLevel.toString(),__classPrivateFieldGet(this,_FWItemSetScreen_instances,"m",_FWItemSetScreen_updateButton).call(this,ID$4.accept),__classPrivateFieldGet(this,_FWItemSetScreen_instances,"m",_FWItemSetScreen_updateButton).call(this,ID$4.outfitButton);for(const e of document.querySelectorAll(".mbs-fwitemset-event")){const r=`${e.getAttribute("data-mod")??""}-${e.getAttribute("data-type")??""}-${e.getAttribute("data-name")??""}`,n=this.settings.activeHooks.get(r);updateKwargElements(e,n?.kwargs??new Map,!t||null==n);const a=e.querySelector("input[type='checkbox'].mbs-fwitemset-event-checkbox");a&&(a.checked=null!=n,a.disabled=!t)}},_FWItemSetScreen_loadWithoutItemSet=function(){const e=this.character.IsPlayer();this.settings.reset(),__classPrivateFieldGet(this,_FWItemSetScreen_instances,"m",_FWItemSetScreen_updateButton).call(this,ID$4.accept),__classPrivateFieldGet(this,_FWItemSetScreen_instances,"m",_FWItemSetScreen_updateButton).call(this,ID$4.outfitButton);const t=document.getElementById(ID$4.equipSelect),r=document.getElementById(ID$4.stripSelect);t.value=this.settings.equipLevel.toString(),r.value=this.settings.stripLevel.toString();const n=document.getElementById(ID$4.events);n?.querySelectorAll(".mbs-fwitemset-event-checkbox").forEach(e=>e.checked=!1),n&&(resetKwargElements(n,!0),n.querySelectorAll("input[type='checkbox'].mbs-fwitemset-event-checkbox").forEach(t=>{const r=t;r.checked=!1,r.disabled=!e}))},FWItemSetScreen.ids=ID$4,FWItemSetScreen.screen="MBS_FWItemSetScreen",FWItemSetScreen.background="Sheet",FWItemSetScreen.screenParamsDefault={[root$4]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};var styles$7='#mbs-fwcommand {\n  grid-template: "delete header accept cancel exit" min(9dvh, 4.5dvw) "commandInput commandInput commandInput commandInput commandInput" min(7dvh, 3.5dvw) "weightHeader weightHeader weightHeader weightHeader weightHeader" min(7dvh, 3.5dvw) "weightInput weightInput weightInput weightInput weightInput" min(7dvh, 3.5dvw)/min(9dvh, 4.5dvw) auto min(9dvh, 4.5dvw) min(9dvh, 4.5dvw) min(9dvh, 4.5dvw);\n}\n#mbs-fwcommand .button-tooltip {\n  --tooltip-gap: min(2dvh, 1dvw);\n}\n\n#mbs-fwcommand-delete {\n  grid-area: delete;\n}\n\n#mbs-fwcommand-header {\n  grid-area: header;\n  margin-left: min(20dvh, 10dvw);\n}\n\n#mbs-fwcommand-accept {\n  grid-area: accept;\n}\n\n#mbs-fwcommand-cancel {\n  grid-area: cancel;\n}\n\n#mbs-fwcommand-exit {\n  grid-area: exit;\n}\n\n#mbs-fwcommand-command-input {\n  grid-area: commandInput;\n  height: min(7dvh, 3.5dvw);\n  place-self: self-end center;\n  width: 50%;\n}\n\n#mbs-fwcommand-weight-header {\n  align-self: self-end;\n  grid-area: weightHeader;\n}\n\n#mbs-fwcommand-weight-input {\n  grid-area: weightInput;\n  height: 100%;\n  place-self: start center;\n  width: calc(min(7dvh, 3.5dvw) + 16px);\n}';const root$3="mbs-fwcommand",ID$3=Object.freeze({root:root$3,styles:`${root$3}-style`,delete:`${root$3}-delete`,accept:`${root$3}-accept`,cancel:`${root$3}-cancel`,exit:`${root$3}-exit`,header:`${root$3}-header`,commandInput:`${root$3}-command-input`,weightHeader:`${root$3}-weight-header`,weightInput:`${root$3}-weight-input`});class FWCommandScreen extends MBSObjectScreen{constructor(e,t,r,n,a=null){super(e,t,r,n,FWCommandScreen.screenParamsDefault,a),this.settings=new FWSelectedCommand(t);const o=!n.IsPlayer();document.body.appendChild(jsxRuntimeExports.jsxs("div",{id:ID$3.root,class:"mbs-screen",children:[jsxRuntimeExports.jsx("style",{id:ID$3.styles,children:styles$7.toString()}),jsxRuntimeExports.jsx("h1",{id:ID$3.header,children:`Customize wheel of fortune command ${this.index}`}),ElementButton.Create(ID$3.delete,()=>this.exit(!1,ExitAction.DELETE),{image:"./Icons/Trash.png",tooltip:"Delete command",tooltipPosition:"right"}),ElementButton.Create(ID$3.accept,()=>this.exit(!1,ExitAction.SAVE),{image:"./Icons/Accept.png",tooltip:"Save command",tooltipPosition:"left"}),ElementButton.Create(ID$3.cancel,()=>this.exit(!1,ExitAction.NONE),{image:"./Icons/Cancel.png",tooltip:"Cancel",tooltipPosition:"left"}),ElementButton.Create(ID$3.exit,()=>this.exit(!0,ExitAction.NONE),{image:"./Icons/Exit.png",tooltip:"Exit",tooltipPosition:"left"}),jsxRuntimeExports.jsx("input",{type:"text",id:ID$3.commandInput,placeholder:"Role play command",disabled:o,maxLength:70,onInput:e=>{this.settings.name=e.target.value;const t=document.getElementById(ID$3.accept);t?.toggleAttribute("disabled",0===this.settings.name.length)},onFocus:e=>e.target.select()}),jsxRuntimeExports.jsx("div",{id:ID$3.weightHeader,children:"Wheel option weight:"}),jsxRuntimeExports.jsx("input",{type:"number",id:ID$3.weightInput,min:1,max:9,value:1,disabled:o,onInput:e=>{const t=e.target;this.settings.weight=clamp(Number.parseInt(t.value,10),1,9)},onWheel:e=>{const t=e.target;if(!t.disabled){if(e.deltaY<0)t.stepUp(1);else{if(!(e.deltaY>0))return;t.stepDown(1)}this.settings.weight=clamp(Number.parseInt(t.value,10),1,9)}},onFocus:e=>e.target.select()})]}))}async load(){if(await super.load(),null!==this.mbsObject){this.settings.readSettings(this.mbsObject),ElementValue(ID$3.commandInput,this.mbsObject.name),ElementValue(ID$3.weightInput,this.mbsObject.weight.toString());const e=document.getElementById(ID$3.accept);e?.toggleAttribute("disabled",this.character.IsPlayer())}else this.settings.reset()}}FWCommandScreen.ids=ID$3,FWCommandScreen.screen="MBS_FWCommandScreen",FWCommandScreen.background="Sheet",FWCommandScreen.screenParamsDefault={[root$3]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};var styles$6='#mbs-fwselect {\n  grid-template: ". buttonOuterGrid exit" min(9dvh, 4.5dvw) "storage buttonOuterGrid ." auto "storageFooter buttonOuterGrid ." min(14dvh, 7dvw)/min(30dvh, 15dvw) auto min(20dvh, 10dvw);\n}\n#mbs-fwselect .button-tooltip {\n  --tooltip-gap: min(2dvh, 1dvw);\n}\n\n#mbs-fwselect-exit {\n  grid-area: exit;\n  height: min(9dvh, 4.5dvw);\n  justify-self: end;\n  width: min(9dvh, 4.5dvw);\n}\n\n#mbs-fwselect-storage {\n  background-image: linear-gradient(180deg, #d80000, #d80000 10%, #00d800 60%, #00d800) !important;\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  display: grid;\n  grid-area: storage;\n  height: 100%;\n  justify-self: center;\n  width: 35%;\n}\n#mbs-fwselect-storage #mbs-fwselect-storage-tooltip {\n  bottom: unset;\n  left: 15%;\n  position: absolute;\n  visibility: hidden;\n}\n#mbs-fwselect-storage:hover #mbs-fwselect-storage-tooltip {\n  visibility: visible;\n}\n\n#mbs-fwselect-storage-cover {\n  width: 100%;\n}\n\n#mbs-fwselect-storage-footer {\n  grid-area: storageFooter;\n  height: min(7dvh, 3.5dvw);\n  padding-top: min(1dvh, 0.5dvw);\n}\n\n#mbs-fwselect-button-grid-outer {\n  background-color: var(--mbs-background-color);\n  display: grid;\n  grid-area: buttonOuterGrid;\n  grid-template-rows: min(9dvh, 4.5dvw) auto min(9dvh, 4.5dvw) auto;\n  height: 94%;\n  overflow-y: scroll;\n  padding-left: min(2dvh, 1dvw);\n  padding-right: min(2dvh, 1dvw);\n}\n#mbs-fwselect-button-grid-outer .button {\n  height: min(7dvh, 3.5dvw);\n}\n\n#mbs-fwselect-button-grid-inner0, #mbs-fwselect-button-grid-inner1 {\n  display: grid;\n  grid-template-columns: minmax(0, 4fr) minmax(0, 4fr);\n  grid-gap: min(2dvh, 1dvw);\n  padding-bottom: min(2dvh, 1dvw);\n  padding-top: min(2dvh, 1dvw);\n}\n\n#mbs-fwselect-header0, #mbs-fwselect-header1 {\n  background-color: var(--mbs-background-color);\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  position: sticky;\n  top: 0%;\n  z-index: 1;\n}',_FWSelectScreen_instances,_FWSelectScreen_updateElements;function loadFortuneWheelObjects(e,t,r){const n=unpackSettings(e.OnlineSharedSettings?.MBS,"OnlineSharedSettings",!1);let a,o=void 0===n?void 0:n[t];if(Array.isArray(o)||(void 0!==o&&logger.warn(`Failed to load "${e.AccountName}" wheel of fortune ${r}`),o=Array(MBS_MAX_SETS).fill(null)),e.IsPlayer())a=Player.MBSSettings[t];else{const e=[];a=parseFWObjects("FortuneWheelItemSets"===t?FWItemSet.fromObject:FWCommand.fromObject,o,e),e.forEach(e=>logger.warn(e))}return a.forEach(e=>e?.register(!1)),a}function createButton(e,t){return ElementButton.Create(`${ID$2.button}${t}`,()=>{if(t<MBS_MAX_SETS){const r={[FWItemSetScreen.ids.root]:{shape:e.rootParams.shape}};return e.loadChild(FWItemSetScreen,e.wheelStruct.FortuneWheelItemSets,t,e.character,r)}{const r={[FWCommandScreen.ids.root]:{shape:e.rootParams.shape}};return e.loadChild(FWCommandScreen,e.wheelStruct.FortuneWheelCommands,t-MBS_MAX_SETS,e.character,r)}},{label:" "})}const root$2="mbs-fwselect",ID$2=Object.freeze({root:root$2,styles:`${root$2}-style`,exit:`${root$2}-exit`,storage:`${root$2}-storage`,storageInner:`${root$2}-storage-cover`,storageTooltip:`${root$2}-storage-tooltip`,storageFooter:`${root$2}-storage-footer`,buttonOuterGrid:`${root$2}-button-grid-outer`,buttonInnerGrid0:`${root$2}-button-grid-inner0`,buttonInnerGrid1:`${root$2}-button-grid-inner1`,button:`${root$2}-button`,itemSets:`${root$2}-header0`,commandSets:`${root$2}-header1`});class FWSelectScreen extends MBSScreen{get wheelList(){return[...this.wheelStruct.FortuneWheelItemSets,...this.wheelStruct.FortuneWheelCommands]}constructor(e,t,r,n=null){super(e,FWSelectScreen.screenParamsDefault,n),_FWSelectScreen_instances.add(this),this.wheelStruct=t,this.character=r,this.dataSize=Object.seal({value:0,valueRecord:{},max:MAX_DATA,marigin:.9});const a=this.character.IsPlayer();document.body.appendChild(jsxRuntimeExports.jsxs("div",{id:ID$2.root,class:"mbs-screen",children:[jsxRuntimeExports.jsx("style",{id:ID$2.styles,children:styles$6.toString()}),jsxRuntimeExports.jsxs("div",{id:ID$2.buttonOuterGrid,children:[jsxRuntimeExports.jsx("h1",{id:ID$2.itemSets,children:a?"Fortune wheel item sets":`${this.character.Nickname??this.character.Name}'s fortune wheel item sets`}),jsxRuntimeExports.jsx("div",{id:ID$2.buttonInnerGrid0,children:range(0,MBS_MAX_SETS).map(e=>createButton(this,e))}),jsxRuntimeExports.jsx("h1",{id:ID$2.commandSets,children:a?"Fortune wheel commands":`${this.character.Nickname??this.character.Name}'s fortune wheel commands`}),jsxRuntimeExports.jsx("div",{id:ID$2.buttonInnerGrid1,children:range(MBS_MAX_SETS,2*MBS_MAX_SETS).map(e=>createButton(this,e))})]}),ElementButton.Create(ID$2.exit,()=>this.exit(),{image:"./Icons/Exit.png",tooltip:"Exit",tooltipPosition:"left"}),jsxRuntimeExports.jsxs("div",{id:ID$2.storage,children:[jsxRuntimeExports.jsx("div",{id:ID$2.storageInner,role:"meter"}),jsxRuntimeExports.jsxs("div",{id:ID$2.storageTooltip,class:"button-tooltip",role:"tooltip",children:[jsxRuntimeExports.jsx("h2",{id:ID$2.storageTooltip+"-header",children:"OnlineSharedSettings Data Usage"}),jsxRuntimeExports.jsx("ul",{id:ID$2.storageTooltip+"-list"})]})]}),jsxRuntimeExports.jsx("div",{id:ID$2.storageFooter})]}))}async load(){const e=measureDataSize(this.character.OnlineSharedSettings);this.dataSize.value=sumBy(Object.values(e),e=>Number.isNaN(e)?0:e),this.dataSize.valueRecord=e,__classPrivateFieldGet(this,_FWSelectScreen_instances,"m",_FWSelectScreen_updateElements).call(this),super.load()}exit(){super.exit(),this.exitScreens(!1)}}_FWSelectScreen_instances=new WeakSet,_FWSelectScreen_updateElements=function(){const e=this.character.IsPlayer();for(const[t,r]of this.wheelList.entries()){const n=document.getElementById(`${ID$2.button}${t}`);n&&(n.querySelector(".button-label")?.replaceChildren(`${(t%MBS_MAX_SETS).toString().padStart(2)}: ${r?.name??"<Empty>"}`),n.disabled=null===r&&!e)}const t=document.getElementById(ID$2.storage),r=document.getElementById(ID$2.storageInner),n=document.getElementById(ID$2.storageFooter);if(e){const e=clamp(byteToKB(this.dataSize.value),0,9999),a=100*e/(MAX_DATA/1e3);n.innerText=`${e} / ${MAX_DATA/1e3} KB`,r.style.height=100-a+"%",r.style.backgroundColor="var(--mbs-background-color)",r.style.borderBottom="min(0.3dvh, 0.15dvw) solid var(--mbs-border-color)",a>=90&&(t.style.boxShadow="0 0 min(2dvh, 1dvw) red");const o=/\W/g;let i=Object.entries(this.dataSize.valueRecord).map(([e,t])=>[e.replaceAll(o,""),Number.isNaN(t)?"Unknown":`${byteToKB(t)} KB`]);i.length>=11&&(i=i.slice(0,10),i.push(["...",""]));const s=document.getElementById(ID$2.storageTooltip+"-list");s.innerHTML="";for(const[e,t]of i)s.appendChild(jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{style:{float:"left"},children:e}),jsxRuntimeExports.jsx("span",{style:{float:"right",paddingLeft:"min(7dvh, 3.5dvw)"},children:t})]}))}else{const e=document.getElementById(ID$2.storageTooltip);n.innerText=`- / ${MAX_DATA/1e3} KB`,r.style.height="100%",r.style.backgroundColor="gray",e.style.display="none"}},FWSelectScreen.ids=ID$2,FWSelectScreen.screen="MBS_FWSelectScreen",FWSelectScreen.background="Sheet",FWSelectScreen.screenParamsDefault={[root$2]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};var styles$5='#mbs-fwpreset {\n  grid-template: "delete header accept save exit" min(9dvh, 4.5dvw) "mid mid mid mid mid" auto/min(9dvh, 4.5dvw) auto min(9dvh, 4.5dvw) min(9dvh, 4.5dvw) min(9dvh, 4.5dvw);\n}\n#mbs-fwpreset .button-tooltip {\n  --tooltip-gap: min(2dvh, 1dvw);\n}\n\n#mbs-fwpreset-delete {\n  grid-area: delete;\n}\n\n#mbs-fwpreset-header {\n  grid-area: header;\n  margin-left: min(20dvh, 10dvw);\n}\n\n#mbs-fwpreset-accept {\n  grid-area: accept;\n}\n\n#mbs-fwpreset-save {\n  grid-area: save;\n}\n\n#mbs-fwpreset-exit {\n  grid-area: exit;\n}\n\n#mbs-fwpreset-mid-div {\n  display: grid;\n  grid-area: mid;\n  text-align: center;\n  grid-gap: min(2dvh, 1dvw);\n  grid-template: "name-header builtin-bc-header builtin-mbs-header custom-mbs-header" min(9dvh, 4.5dvw) "name builtin-bc builtin-mbs custom-mbs" auto/auto min-content min-content min-content;\n  justify-items: center;\n  justify-self: center;\n  width: 100%;\n}\n#mbs-fwpreset-mid-div > p {\n  text-wrap: nowrap;\n}\n\n#mbs-fwpreset-name-header {\n  grid-area: name-header;\n}\n\n#mbs-fwpreset-builtin-bc-header {\n  grid-area: builtin-bc-header;\n}\n\n#mbs-fwpreset-builtin-mbs-header {\n  grid-area: builtin-mbs-header;\n}\n\n#mbs-fwpreset-custom-mbs-header {\n  grid-area: custom-mbs-header;\n}\n\n.mbs-fwpreset-grid {\n  display: grid;\n  grid-gap: min(1.2dvh, 0.6dvw);\n  grid-auto-flow: column;\n  grid-template-rows: repeat(8, min(7dvh, 3.5dvw));\n  width: fit-content;\n}\n\n#mbs-fwpreset-name-div {\n  grid-area: name;\n}\n\n#mbs-fwpreset-name-input {\n  height: min(7dvh, 3.5dvw);\n  width: min(35dvh, 17.5dvw);\n}\n\n#mbs-fwpreset-name-dropdown {\n  height: min(7dvh, 3.5dvw);\n  margin-top: min(2dvh, 1dvw);\n  width: min(36dvh, 18dvw);\n}\n\n#mbs-fwpreset-builtin-bc-div {\n  grid-area: builtin-bc;\n  grid-template-columns: repeat(4, min(7dvh, 3.5dvw));\n}\n\n#mbs-fwpreset-builtin-mbs-div {\n  grid-area: builtin-mbs;\n  grid-template-columns: min(7dvh, 3.5dvw);\n}\n\n#mbs-fwpreset-custom-mbs-div {\n  grid-area: custom-mbs;\n  grid-template-columns: repeat(8, min(7dvh, 3.5dvw));\n}\n\n.mbs-fwpreset {\n  border: min(0.2dvh, 0.1dvw) solid black;\n}\n.mbs-fwpreset::before {\n  content: "";\n  height: 90%;\n  left: 5%;\n  position: absolute;\n  top: 5%;\n  width: 90%;\n}\n.mbs-fwpreset[data-color=red]::before {\n  background-color: red;\n}\n.mbs-fwpreset[data-color=green]::before {\n  background-color: green;\n}',_WheelPresetScreen_instances,_WheelPresetScreen_index,_WheelPresetScreen_loadIDMapping,_WheelPresetScreen_loadPresetElement,_WheelPresetScreen_loadPresetElements,_WheelPresetScreen_getPresetIDs,_WheelPresetScreen_reloadButtons,_WheelPresetScreen_loadPreset;let SCREEN_CACHE;const OptionType=Object.freeze({builtinBC:0,builtinMBS:1,customMBS:2});let BUILTIN_BC_OPTIONS_HEADERS,BUILTIN_BC_OPTIONS,BUILTIN_MBS_OPTIONS,CUSTOM_MBS_OPTIONS;function initOptions(){if(void 0!==BUILTIN_BC_OPTIONS_HEADERS)return;const e=/^([a-zA-Z0-9_\s]+) for ([0-9]+) (minutes|hours)$/,t=WheelFortuneOption.filter(e=>void 0===e.Custom),r=new Set,n={};for(const a of t){const t=SCREEN_CACHE.get(`Option${a.ID}`),o=e.exec(t);if(!o){n[a.ID]={header:t,type:OptionType.builtinBC},r.add(t);continue}const[i,s]=[o[1],o[3]];let l=Number.parseInt(o[2]);"hours"===s&&(l*=60),r.add(i),n[a.ID]={header:i,description:`${l} Minutes`,type:OptionType.builtinBC}}BUILTIN_BC_OPTIONS_HEADERS=Array.from(r),BUILTIN_BC_OPTIONS=Object.fromEntries(Object.entries(n).map(([e,t])=>[e,{...t,index:BUILTIN_BC_OPTIONS_HEADERS.indexOf(t.header)}]));const a=256;BUILTIN_MBS_OPTIONS=Object.fromEntries(FORTUNE_WHEEL_ITEM_SETS.flatMap((e,t)=>e.flags.map((r,n)=>[String.fromCharCode(a+16*t+n),{header:e.name,description:getFlagDescription(r),index:t,type:OptionType.builtinMBS}]))),CUSTOM_MBS_OPTIONS=Object.fromEntries(range(512,1536).map((e,t)=>{const r=String.fromCharCode(e),n=Math.floor(t/a);let o;switch(n){case 0:case 2:o=(0===n?0:16)+Math.floor(t%a/16);break;case 1:case 3:o=(1===n?0:16)+Math.floor(t%a/16)+32;break;default:throw new RangeError(`Index ${t} lies out of the [0, 2**10) range`)}return[r,{header:"<Empty>",type:OptionType.customMBS,index:o}]}))}waitForBC("preset_screen",{async afterLoad(){SCREEN_CACHE=await TextCache.buildAsync("Screens/MiniGame/WheelFortune/Text_WheelFortune.csv")}});const root$1="mbs-fwpreset",ID$1=Object.freeze({root:root$1,styles:`${root$1}-style`,delete:`${root$1}-delete`,accept:`${root$1}-accept`,save:`${root$1}-save`,exit:`${root$1}-exit`,header:`${root$1}-header`,midDiv:`${root$1}-mid-div`,nameDiv:`${root$1}-name-div`,nameHeader:`${root$1}-name-header`,nameInput:`${root$1}-name-input`,nameDropdown:`${root$1}-name-dropdown`,builtinBC:`${root$1}-builtin-bc`,builtinBCColor:`${root$1}-builtin-bc-color`,builtinBCTooltip:`${root$1}-builtin-bc-tooltip`,builtinBCTooltipHeader:`${root$1}-builtin-bc-tooltip-header`,builtinBCTooltipList:`${root$1}-builtin-bc-tooltip-list`,builtinBCDiv:`${root$1}-builtin-bc-div`,builtinBCHeader:`${root$1}-builtin-bc-header`,builtinMBS:`${root$1}-builtin-mbs`,builtinMBSColor:`${root$1}-builtin-mbs-color`,builtinMBSTooltip:`${root$1}-builtin-mbs-button-tooltip`,builtinMBSTooltipHeader:`${root$1}-builtin-mbs-button-tooltip-header`,builtinMBSTooltipList:`${root$1}-builtin-mbs-button-tooltip-list`,builtinMBSDiv:`${root$1}-builtin-mbs-div`,builtinMBSHeader:`${root$1}-builtin-mbs-header`,customMBS:`${root$1}-custom-mbs`,customMBSColor:`${root$1}-custom-mbs-color`,customMBSTooltip:`${root$1}-custom-mbs-button-tooltip`,customMBSTooltipHeader:`${root$1}-custom-mbs-button-tooltip-header`,customMBSTooltipList:`${root$1}-custom-mbs-button-tooltip-list`,customMBSDiv:`${root$1}-custom-mbs-div`,customMBSHeader:`${root$1}-custom-mbs-header`});class WheelPresetScreen extends MBSScreen{get index(){return __classPrivateFieldGet(this,_WheelPresetScreen_index,"f")}set index(e){validateInt(e,"index",0,this.presets.length-1),__classPrivateFieldGet(this,_WheelPresetScreen_index,"f")!==e&&(__classPrivateFieldSet(this,_WheelPresetScreen_index,e,"f"),__classPrivateFieldGet(this,_WheelPresetScreen_instances,"m",_WheelPresetScreen_loadPreset).call(this))}constructor(e,t,r=null){initOptions(),super(e,WheelPresetScreen.screenParamsDefault,r),_WheelPresetScreen_instances.add(this),this.activePreset={name:"<PLACEHOLDER>",ids:new Set},_WheelPresetScreen_index.set(this,0),this.presets=t,this.queueServer=new Set,this.idMapping={...cloneDeep(BUILTIN_BC_OPTIONS),...cloneDeep(BUILTIN_MBS_OPTIONS),...cloneDeep(CUSTOM_MBS_OPTIONS)};const n=this;document.body.appendChild(jsxRuntimeExports.jsxs("div",{id:ID$1.root,class:"mbs-screen",children:[jsxRuntimeExports.jsx("style",{id:ID$1.styles,children:styles$5.toString()}),jsxRuntimeExports.jsxs("h1",{id:ID$1.header,children:["Wheel of Fortune preset ",this.index]}),ElementButton.Create(ID$1.delete,()=>this.deletePreset(),{disabled:!0,image:"./Icons/Trash.png",tooltip:"Delete the current preset",tooltipPosition:"right"}),ElementButton.Create(ID$1.accept,()=>this.equipPreset(),{disabled:!0,image:"./Icons/Accept.png",tooltip:"Equip the current preset",tooltipPosition:"left"}),ElementButton.Create(ID$1.save,()=>this.savePreset(),{image:"./Icons/Save.png",tooltip:"Save the current preset",tooltipPosition:"left"}),ElementButton.Create(ID$1.exit,()=>this.exit(!1),{image:"./Icons/Exit.png",tooltip:"Exit",tooltipPosition:"left"}),jsxRuntimeExports.jsxs("div",{id:ID$1.midDiv,children:[jsxRuntimeExports.jsx("p",{id:ID$1.nameHeader,children:"Preset Name"}),jsxRuntimeExports.jsx("p",{id:ID$1.builtinBCHeader,children:"Builtin BC Options"}),jsxRuntimeExports.jsx("p",{id:ID$1.builtinMBSHeader,children:"Builtin MBS Options"}),jsxRuntimeExports.jsx("p",{id:ID$1.customMBSHeader,children:"Custom MBS Options"}),jsxRuntimeExports.jsxs("div",{id:ID$1.nameDiv,children:[jsxRuntimeExports.jsx("input",{type:"text",id:ID$1.nameInput,maxLength:20,onFocus:e=>e.target.select(),onInput:e=>this.activePreset.name=e.target.value}),ElementCreateDropdown(ID$1.nameDropdown,Object.values(this.presets).map((e,t)=>({attributes:{value:t,label:`${t}: ${e?.name??"<Empty>"}`}})),function(){n.index=this.selectedIndex})]}),jsxRuntimeExports.jsx("div",{id:ID$1.builtinBCDiv,class:"mbs-fwpreset-grid",children:__classPrivateFieldGet(this,_WheelPresetScreen_instances,"m",_WheelPresetScreen_loadPresetElements).call(this,OptionType.builtinBC)}),jsxRuntimeExports.jsx("div",{id:ID$1.builtinMBSDiv,class:"mbs-fwpreset-grid",children:__classPrivateFieldGet(this,_WheelPresetScreen_instances,"m",_WheelPresetScreen_loadPresetElements).call(this,OptionType.builtinMBS)}),jsxRuntimeExports.jsx("div",{id:ID$1.customMBSDiv,class:"mbs-fwpreset-grid",children:__classPrivateFieldGet(this,_WheelPresetScreen_instances,"m",_WheelPresetScreen_loadPresetElements).call(this,OptionType.customMBS)})]})]}))}savePreset(){const e=this.presets[this.index],t={name:this.activePreset.name,ids:sanitizeWheelFortuneIDs(Array.from(this.activePreset.ids).sort().join(""))};t.name===e?.name&&t.ids===e?.ids||(this.presets[this.index]=t,this.queueServer.add(SettingsType.SETTINGS),__classPrivateFieldGet(this,_WheelPresetScreen_instances,"m",_WheelPresetScreen_reloadButtons).call(this))}equipPreset(){const e=sanitizeWheelFortuneIDs(Array.from(this.activePreset.ids).sort().join(""));Player.OnlineSharedSettings&&Player.OnlineSharedSettings.WheelFortune!==e&&(Player.OnlineSharedSettings.WheelFortune=e,this.queueServer.add(SettingsType.SHARED))}deletePreset(){null!==this.presets[this.index]&&(this.queueServer.add(SettingsType.SETTINGS),this.presets[this.index]=null,__classPrivateFieldGet(this,_WheelPresetScreen_instances,"m",_WheelPresetScreen_loadPreset).call(this))}async load(){await super.load(),__classPrivateFieldGet(this,_WheelPresetScreen_instances,"m",_WheelPresetScreen_loadIDMapping).call(this),__classPrivateFieldGet(this,_WheelPresetScreen_instances,"m",_WheelPresetScreen_loadPreset).call(this)}exit(e=!0){super.exit(),this.queueServer.size&&pushMBSSettings(Array.from(this.queueServer),!0),this.exitScreens(e)}}function colorItems(e,t,r){if(!isArray(e))throw new TypeError('Invalid "groupNames" type: '+typeof e);if("string"!=typeof r)throw new TypeError('Invalid "color" type: '+typeof e);for(const n of e){const e=InventoryGet(t,n);null!=e&&(e.Color=Array(e.Asset.ColorableLayerCount).fill(r))}}function statueCopyColors(e){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "character" type: '+typeof e);if(!e.IsSimple()&&!e.IsPlayer())throw new Error("Expected a simple or player character");if(canChangeCosplay(e)){colorItems(["HairAccessory1","HairAccessory2","HairAccessory3","HairBack","HairFront","BodyUpper","BodyLower","Wings","TailStraps","Nipples","Blush","Mouth"],e,"#484747")}}_WheelPresetScreen_index=new WeakMap,_WheelPresetScreen_instances=new WeakSet,_WheelPresetScreen_loadIDMapping=function(){const e=[...Player.MBSSettings.FortuneWheelItemSets,...Player.MBSSettings.FortuneWheelCommands];for(const[t,r]of e.entries()){let e=512;if(e+=t<32?t>=16?16*(16+t):16*t:t>=48?16*t:16*(16+t),r instanceof FWItemSet)for(const[t,n]of r.flags.entries()){const a=String.fromCharCode(e+t);this.idMapping[a].description=getFlagDescription(n),this.idMapping[a].header=r.name}else if(r instanceof FWCommand){const t=String.fromCharCode(e);this.idMapping[t].header=r.name,delete this.idMapping[t].description}else for(const t of range(16)){const r=String.fromCharCode(e+t);this.idMapping[r].header="<Empty>",delete this.idMapping[r].description}}},_WheelPresetScreen_loadPresetElement=function(e,t,r,n){const a=e.toString();return ElementButton.Create(`${n.root}${a}`,function(){this.focus()},{noStyling:!0,tooltipPosition:r,tooltip:[jsxRuntimeExports.jsx("h2",{id:n.tooltipHeader+a,"data-prefix":t??""}),jsxRuntimeExports.jsx("ul",{id:n.tooltipList+a})]},{button:{classList:["mbs-fwpreset"],dataAttributes:{color:"red"}}})},_WheelPresetScreen_loadPresetElements=function(e){let t,r,n;const a=__classPrivateFieldGet(this,_WheelPresetScreen_instances,"m",_WheelPresetScreen_getPresetIDs).call(this,e);switch(e){case OptionType.builtinBC:t=BUILTIN_BC_OPTIONS_HEADERS,r="right";break;case OptionType.builtinMBS:t=FORTUNE_WHEEL_ITEM_SETS,r="bottom";break;case OptionType.customMBS:t=[...Player.MBSSettings.FortuneWheelItemSets,...Player.MBSSettings.FortuneWheelCommands],r="left",n=(e,t)=>t>=MBS_MAX_SETS?`Command Set ${t-32}: `:`Item Set ${t}: `;break;default:throw new Error(`Unknown type: ${e}`)}return t.map((e,t)=>__classPrivateFieldGet(this,_WheelPresetScreen_instances,"m",_WheelPresetScreen_loadPresetElement).call(this,t,n?.(e,t),r,a))},_WheelPresetScreen_getPresetIDs=function(e){switch(e){case OptionType.builtinBC:return{root:ID$1.builtinBC,color:ID$1.builtinBCColor,tooltip:ID$1.builtinBCTooltip,tooltipHeader:ID$1.builtinBCTooltipHeader,tooltipList:ID$1.builtinBCTooltipList};case OptionType.builtinMBS:return{root:ID$1.builtinMBS,color:ID$1.builtinMBSColor,tooltip:ID$1.builtinMBSTooltip,tooltipHeader:ID$1.builtinMBSTooltipHeader,tooltipList:ID$1.builtinMBSTooltipList};case OptionType.customMBS:return{root:ID$1.customMBS,color:ID$1.customMBSColor,tooltip:ID$1.customMBSTooltip,tooltipHeader:ID$1.customMBSTooltipHeader,tooltipList:ID$1.customMBSTooltipList};default:throw new Error(`Unknown type: ${e}`)}},_WheelPresetScreen_reloadButtons=function(){const e=this.presets[__classPrivateFieldGet(this,_WheelPresetScreen_index,"f")],t=document.getElementById(ID$1.nameInput),r=document.getElementById(ID$1.nameDropdown);t.placeholder=`Preset ${this.index}`,r.selectedIndex=__classPrivateFieldGet(this,_WheelPresetScreen_index,"f");const n=document.getElementById(ID$1.delete),a=n?.querySelector(".button-tooltip"),o=document.getElementById(ID$1.accept),i=o?.querySelector(".button-tooltip"),s=document.getElementById(ID$1.header);null===e?(t.value="",n.disabled=!0,o.disabled=!0,a?.replaceChildren("Delete the current preset:",jsxRuntimeExports.jsx("br",{}),"unsaved preset"),i?.replaceChildren("Equip the current preset:",jsxRuntimeExports.jsx("br",{}),"unsaved preset"),s.innerText=`Wheel of Fortune preset ${this.index} (unsaved)`):(t.value=e.name,n.disabled=!1,o.disabled=!1,a?.replaceChildren("Delete the current preset"),i?.replaceChildren("Equip the current preset"),s.innerText=`Wheel of Fortune preset ${this.index}`)},_WheelPresetScreen_loadPreset=function(){const e=this.presets[__classPrivateFieldGet(this,_WheelPresetScreen_index,"f")];this.activePreset=null!==e?{name:e.name,ids:new Set(e.ids)}:{name:"<Empty>",ids:new Set(Player.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault)},__classPrivateFieldGet(this,_WheelPresetScreen_instances,"m",_WheelPresetScreen_reloadButtons).call(this);const t={[OptionType.builtinBC]:{},[OptionType.builtinMBS]:{},[OptionType.customMBS]:{}};for(const[e,{type:r,index:n,description:a,header:o}]of Object.entries(this.idMapping)){const i=this.activePreset.ids.has(e),s=t[r][n]??={header:o,enabled:i,description:[]};s.enabled||=i,a&&i&&s.description.push(a)}for(const e of Object.values(OptionType)){const r=__classPrivateFieldGet(this,_WheelPresetScreen_instances,"m",_WheelPresetScreen_getPresetIDs).call(this,e);for(const[n,a]of Object.entries(t[e])){document.getElementById(`${r.root}${n}`).dataset.color=a.enabled?"green":"red";const e=document.getElementById(`${r.tooltipHeader}${n}`);e.innerText=(e.dataset.prefix??"")+a.header;const t=document.getElementById(`${r.tooltipList}${n}`);t.innerHTML="";for(const e of a.description)t.appendChild(jsxRuntimeExports.jsx("li",{children:e}))}}},WheelPresetScreen.background="Sheet",WheelPresetScreen.screen="MBS_WheelPresetScreen",WheelPresetScreen.ids=ID$1,WheelPresetScreen.screenParamsDefault={[root$1]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};const ASSET_COLORABLE_INDICES={Suit:{ReverseBunnySuit:[0,1]},SuitLower:{Catsuit:[0,1]},Mask:{FaceVeil:[1]},ItemHands:{FuturisticMittens:[0,1]},ItemHead:{InteractiveVRHeadset:[0]},ItemMouth2:{DuctTape:[0]},ItemMouth3:{FuturisticMuzzle:[3],DuctTape:[0]},ItemPelvis:{SciFiPleasurePanties:[0,2,4,5]},ItemNeck:{BonedNeckCorset:[2,3]},ItemNeckRestraints:{CollarChainShort:[0]},ItemTorso2:{FuturisticHarness:[0,1,2]},ItemEars:{FuturisticEarphones:[1]},ItemAddon:{CeilingChain:[0]},ItemNipplesPiercings:{RoundPiercing:[1,2]},ItemLegs:{FrogtieStraps:[2],DuctTape:[0]},ItemHood:{DroneMask:[2]},ItemFeet:{DuctTape:[0]},ItemArms:{DuctTape:[0]}};function generateItems(){const e=fromEntries(entries({leash_candy:[{Name:"ReverseBunnySuit",Group:"Suit"},{Name:"Catsuit",Group:"SuitLower"},{Name:"FaceVeil",Group:"Mask",Color:["#000","Default"]},{Name:"FuturisticMittens",Group:"ItemHands",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Mittens"}},{Name:"InteractiveVRHeadset",Group:"ItemHead",TypeRecord:{b:3,f:3,g:1},Craft:{Property:"Secure",Name:"Permanent PSO Headset"}},{Name:"LargeDildo",Group:"ItemMouth",Craft:{Property:"Secure",Name:"Permanent PSO Dildo",Description:"Specially made to fill a PSOs mouth and throat"}},{Name:"LatexBallMuzzleGag",Group:"ItemMouth2",Craft:{Property:"Secure",Name:"Permanent PSO Muzzle",Description:"Forcing the dildo in and keeping it secure"}},{Name:"FuturisticMuzzle",Group:"ItemMouth3",TypeRecord:{n:1,h:0,s:3},Craft:{Property:"Secure",Name:"Permanent PSO Muzzle",Description:"Keeping your cries muffled"}},{Name:"FuturisticVibrator",Group:"ItemVulva",TypeRecord:{vibrating:9},Craft:{Property:"Secure",Name:"Permanent PSO Vibe",Description:"Specially made to fill a PSO"}},{Name:"SciFiPleasurePanties",Group:"ItemPelvis",TypeRecord:{c:3,i:4,o:1,s:2},Craft:{Property:"Secure",Name:"Permanent PSO Panties",Description:"No escape and no Orgasms"}},{Name:"BonedNeckCorset",Group:"ItemNeck",Color:["#222222","#888888","#AA2121","#AA2121","#888888"],TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Permanent PSO Collar"}},{Name:"CollarChainShort",Group:"ItemNeckRestraints",Craft:{Property:"Secure",Name:"Permanent PSO Chain",Description:"To keep a PSO on their knees"},Property:{OverridePriority:7}},{Name:"StrictLeatherPetCrawler",Group:"ItemArms",Craft:{Property:"Secure",Name:"Permanent PSO Suit",Description:"Extra tight and unremovable"}},{Name:"HeavyLatexCorset",Group:"ItemTorso",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Corset",Description:"Extra tight and specially molded"}},{Name:"FuturisticHarness",Group:"ItemTorso2",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Harness",Description:"Special harness that constantly shrinks...."},Property:{OverridePriority:23}},{Name:"FuturisticEarphones",Group:"ItemEars",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Earphones"},Color:["#0F0F0F","Default","Default"]},{Name:"CeilingChain",Group:"ItemAddon",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Chain",Description:"Never to escape"}},{Name:"RoundPiercing",Group:"ItemNipplesPiercings",TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Permanent PSO Piercings"},Color:["#000000","Default","Default"]},{Name:"CollarAutoShockUnit",Group:"ItemNeckAccessories",TypeRecord:{s:2,y:0},Craft:{Property:"Secure",Name:"Permanent PSO Shock Unit"}},{Name:"FrogtieStraps",Group:"ItemLegs",Craft:{Property:"Secure",Name:"Permanent PSO Straps",Description:"To keep a PSO on their knees"}},{Name:"DroneMask",Group:"ItemHood",TypeRecord:{m:0,e:0,p:1,g:0,s:1,h:2,j:0},Craft:{Property:"Thin",Name:"Permanent PSO Mask"}}],mummy:[{Name:"DuctTape",Group:"ItemFeet",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"}},{Name:"DuctTape",Group:"ItemLegs",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"}},{Name:"DuctTape",Group:"ItemHands",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"}},{Name:"DuctTape",Group:"ItemArms",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"}},{Name:"LargeDildo",Group:"ItemMouth",Craft:{Property:"Large",Name:"Rubber Mouth Sealant",Description:"A rubber mass molded to shape of your mouth"}},{Name:"DuctTape",Group:"ItemMouth2",TypeRecord:{typed:0},Craft:{Property:"Large",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"}},{Name:"DuctTape",Group:"ItemMouth3",TypeRecord:{typed:0},Craft:{Property:"Large",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},Equip:()=>Math.random()>.5}],maid:[{Name:"LaceBands",Group:"Bracelet",Color:["#aaaaaa","#151515"]},{Name:"MaidOutfit2",Group:"Cloth",Color:["#0C0C0C","#919194","#9C9C9F"]},{Name:"CatsuitCollar",Group:"ClothAccessory",Color:["#0E0E0E"]},{Name:"MaidHairband1",Group:"Hat",Color:["#979797"]},{Name:"Socks6",Group:"Socks",Color:["#0D0D0D","#919194"]},{Name:"HeartTop",Group:"Bra",Color:["#0E0E0E"]},{Name:"FuturisticHeels2",Group:"Shoes",Color:["#101010","Default","#F1FAFF","#898989","#898989"],TypeRecord:{typed:1}},{Name:"MaidCollar",Group:"ItemNeck",Color:["#DCDCDC","#1B1B1B","Default"],Craft:{Property:"Secure",Name:"Maid Collar",Description:"A tight fitting yet comfortable collar"}},{Name:"FuturisticMittens",Group:"ItemHands",Color:["#FFFFFF","#FFFFFF","#2E2E2E","#050505"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Maid Mittens",Description:"For keeping a maid out of trouble"}},{Name:"FuturisticHeels2",Group:"ItemBoots",Color:["#101010","#101010","Default","#F1FAFF","#898989","#898989","#898989"],TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Maid Heels",Description:"For keeping a maid on their toes"}},{Name:"WiredEgg",Group:"ItemVulva",Color:["Default","#141414"],TypeRecord:{vibrating:1},Craft:{Property:"Arousing",Name:"Maid Teaser",Description:"A little reminder to keep a maid on edge"},Property:{OverridePriority:21}},{Name:"StraitLeotard",Group:"ItemArms",Color:["#FFFFFF","#1A1A1A","#FFFFFF"],TypeRecord:{cl:1,co:1,np:0,vp:0},Craft:{Property:"Secure",Name:"Maid Jacket",Description:"For keeping a maid out of trouble"}},{Name:"LeatherAnkleCuffs",Group:"ItemFeet",Color:["#969696","#191919","#969696"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Maid Cuffs",Description:"For keeping a maid out of trouble"}},{Name:"BallGag",Group:"ItemMouth",TypeRecord:{typed:2},Craft:{Property:"Large",Name:"Maid Silencer",Description:"Silence is golden"}}],statue:[{Name:"ReverseBunnySuit",Group:"SuitLower",Color:["#1B1B1B"],Equip:e=>canChangeCosplay(e)},{Name:"SeamlessCatsuit",Group:"SuitLower",Color:["#484747"],Equip:e=>!canChangeCosplay(e)},{Name:"SeamlessCatsuit",Group:"Suit",Color:["#484747"],Equip:e=>!canChangeCosplay(e)},{Name:"ReverseBunnySuit",Group:"Cloth",Color:["#1B1B1B","#1B1B1B"]},{Name:"BondageSkirt",Group:"ClothLower",Color:["#484747","#333333","#333333"]},{Name:"CatsuitCollar",Group:"ClothAccessory",Color:["#484747"]},{Name:"HighCollar",Group:"ItemNeck",Color:["#363636","#717171"],Craft:{Property:"Secure",Name:"Statue Neck"}},{Name:"LargeDildo",Group:"ItemMouth",Color:["#333333"],Craft:{Property:"Large",Name:"Mouth Sealant"},Property:{OverridePriority:27}},{Name:"LatexPostureCollar",Group:"ItemMouth2",Color:["Default"],Craft:{Property:"Large",Name:"Mouth Sealant"},Property:{OverridePriority:28}},{Name:"LatexBallMuzzleGag",Group:"ItemMouth3",Color:["#A1A1A1"],Craft:{Property:"Large",Name:"Mouth Sealant"}},{Name:"KirugumiMask",Group:"ItemHood",Color:["#484747","#484747","#484747","#484747"],TypeRecord:{e:0,m:3,b:0,br:0,op:0,ms:0},Craft:{Property:"Secure",Name:"Statue's Visage"}},{Name:"MonoHeel",Group:"ItemBoots",Color:["#737070","#737070","#101010"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Statue Base"}},{Name:"FuturisticMittens",Group:"ItemHands",Color:["#767676","#5F5F5F","#3C3C3C","#4F4F4F"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Statue Hands"}},{Name:"SmoothLeatherArmbinder1",Group:"ItemArms",Color:["#191919","#3D3D3D","#191919","#191919","#191919"],Craft:{Property:"Secure",Name:"Statue Arms"}}]}).map(([e,t])=>{const r=Object.freeze(t.map(t=>{let r;if(null!==t.Craft&&"object"==typeof t.Craft){const n=AssetGet(Player.AssetFamily,t.Group,t.Name);if(null==n)throw new Error(`Invalid ${e} item: ${t.Group}${t.Name}`);r={...t.Craft,Item:t.Name,Private:!0,Lock:"",TypeRecord:void 0,Name:t.Craft.Name||n.Description,MemberNumber:void 0,MemberName:""},CraftingValidate(r,n,!1)}return Object.freeze({...t,Custom:!1,Property:Object.freeze(t.Property??{}),TypeRecord:t.TypeRecord,Craft:Object.freeze(r),Color:t.Color,Equip:t.Equip})}));return[e,r]}));return Object.freeze(e)}let FORTUNE_WHEEL_ITEMS,FORTUNE_WHEEL_ITEM_SETS,FORTUNE_WHEEL_OPTIONS_BASE,FORTUNE_WHEEL_DEFAULT_BASE,fortuneWheelState;wheelHookRegister.addEventListener("beforeOutfitEquip",MBS_MOD_INFO,{listener:e=>statueCopyColors(e.character),hookName:"statueSetBodyColor",label:"Color the entire body gray (statue color) before equipping any wheel items.",conditional:!0,showConfig:!1}),wheelHookRegister.addEventListener("color",MBS_MOD_INFO,{listener:({character:e,newAsset:t},r)=>{const n="select"===r.sourceGroup?.type&&r.sourceGroup.value,a=n?InventoryGet(e,n):null;if(!a)return;let o;if(o="string"==typeof a.Color?a.Color:isArray(a.Color)&&"string"==typeof a.Color[0]?a.Color[0]:a.Asset.DefaultColor[0],!o)return;const i=ASSET_COLORABLE_INDICES[t.Group.Name]?.[t.Name];if(i){const e=Array(t.ColorableLayerCount).fill(void 0);return i.slice(0,t.ColorableLayerCount).forEach(t=>e[t]=o),e}return Array(t.ColorableLayerCount).fill(o)},hookName:"copyItemColor",label:"Copy the color from one item and apply it to others.",conditional:!0,kwargs:{sourceGroup:{type:"select",label:"The item group from which the color will be copied",required:!0,options:getGroupNameKwargs(e=>"HairFront"===e.Name,e=>e.AllowColorize).options},targetGroups:{...getGroupNameKwargs(e=>e.IsRestraint,e=>e.AllowNone&&e.AllowColorize),label:"The item group(s) to which the color will be copied"}}}),wheelHookRegister.addEventListener("typeRecord",MBS_MOD_INFO,{listener:({newAsset:e})=>{switch(e.Archetype){case ExtendedArchetype.TYPED:case ExtendedArchetype.VIBRATING:{const t=ExtendedItemGetData(e,e.Archetype),r=(t?.options??[]).map(e=>e.Property.TypeRecord);return sample(r)}case ExtendedArchetype.MODULAR:{const t=ExtendedItemGetData(e,e.Archetype);let r;for(const e of t?.modules??[]){const t=e.Options.map(e=>e.Property.TypeRecord),n=sample(t);n&&(r=Object.assign(r??{},n))}return r}default:return null}},hookName:"randomizeType",label:"Randomize the (extended item) type of specified items.",conditional:!0,kwargs:{targetGroups:getGroupNameKwargs("none",e=>e.AllowNone)}});class FWScreenProxy extends ScreenProxy{constructor(){super(null,"WheelFortune","MiniGame",{Run:WheelFortuneRun,Click:WheelFortuneClick,Exit:WheelFortuneExit,Load:async()=>CommonSetScreen("MiniGame","WheelFortune")}),this.character=Player,this.FortuneWheelItemSets=Array(MBS_MAX_SETS).fill(null),this.FortuneWheelCommands=Array(MBS_MAX_SETS).fill(null),this.weightedIDs=this.character.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault}initialize(){if(null==WheelFortuneCharacter)throw new Error("Cannot load the fortune wheel UI while `WheelFortuneCharacter == null`");WheelFortuneOption=[...FORTUNE_WHEEL_OPTIONS_BASE],WheelFortuneDefault=FORTUNE_WHEEL_DEFAULT_BASE,this.character=WheelFortuneCharacter,this.FortuneWheelItemSets=loadFortuneWheelObjects(WheelFortuneCharacter,"FortuneWheelItemSets","item sets"),this.FortuneWheelCommands=loadFortuneWheelObjects(WheelFortuneCharacter,"FortuneWheelCommands","commands"),this.weightedIDs=createWeightedWheelIDs(this.character.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault)}}function wheelFortuneLoadHook(){if(fortuneWheelState.initialize(),null!=TextScreenCache)for(const{Description:e,Custom:t,ID:r}of WheelFortuneOption)void 0!==e&&(TextScreenCache.cache[`Option${r}`]=t?`*${e}`:e)}function wheelFortuneCustomizeLoadHook(){if(null!=TextScreenCache)for(const{Description:e,Custom:t,ID:r}of WheelFortuneOption)void 0!==e&&(TextScreenCache.cache[`Option${r}`]=t?`*${e}`:e)}FWScreenProxy.screen="WheelFortune",waitForBC("fortune_wheel",{async afterLoad(){const e={exit:[1830,60,90,90],roll:[1720,60,90,90],select:[1610,60,90,90],preset:[1500,60,90,90]};if(logger.log("Initializing wheel of fortune hooks"),validateBuiltinWheelIDs())switch(MBS_MOD_API.patchFunction("WheelFortuneRun",{'DrawTextWrap(TextGet(textTag), 1375, 200, 550, 200, "White")':";",'DrawButton(1720, 60, 90, 90, "", (WheelFortuneVelocity == 0 && !isInvalidWheel) ? "White" : "Silver", "Icons/Random.png", TextGet("Random"), isInvalidWheel);':";"}),MBS_MOD_API.hookFunction("WheelFortuneLoad",11,(e,t)=>(wheelFortuneLoadHook(),t(e))),MBS_MOD_API.hookFunction("WheelFortuneCustomizeLoad",0,(e,t)=>(wheelFortuneCustomizeLoadHook(),t(e))),MBS_MOD_API.hookFunction("WheelFortuneRun",0,(t,r)=>{const n=Player.MBSSettings.RollWhenRestrained||!Player.IsRestrained();n||(WheelFortuneForced=!1),r(t);const a=0===WheelFortuneVelocity,o=a?"White":"Silver",i=WheelFortuneCharacter?.Nickname??WheelFortuneCharacter?.Name,s=WheelFortuneCharacter?.IsPlayer()?"MBS: Configure custom options":`MBS: View ${i}'s option config`;DrawButton(...e.select,"",o,"Icons/Crafting.png",s,!a);const l=!(0!==WheelFortuneVelocity||!WheelFortuneCharacter?.IsPlayer()),c=l?"White":"Silver",u=WheelFortuneCharacter?.Nickname??WheelFortuneCharacter?.Name,d=WheelFortuneCharacter?.IsPlayer()?"MBS: Configure option presets":`MBS: View ${u}'s option presets`;DrawButton(...e.preset,"",c,"Icons/Crafting.png",d,!l);const h=0==WheelFortuneVelocity&&n&&WheelFortuneList.length>0?"White":"Silver";DrawButton(...e.roll,"",h,"Icons/Random.png",n?TextGet("Random"):"MBS: Cannot spin while restrained",!n);let p="";p=0===WheelFortuneList.length?TextGet("Invalid"):0!==WheelFortuneVelocity?TextGet("Wait"):n?WheelFortuneForced?TextGet("Forced"):TextGet("Title"):"MBS: Cannot spin the wheel of fortune while restrained",DrawTextWrap(p,1375,200,550,200,"White")}),MBS_MOD_API.hookFunction("WheelFortuneClick",0,(t,r)=>{if(Player.MBSSettings.RollWhenRestrained||!Player.IsRestrained()||(WheelFortuneForced=!1,!MouseIn(...e.roll))){if(0===WheelFortuneVelocity&&MouseIn(...e.select)){const e={FortuneWheelItemSets:fortuneWheelState.FortuneWheelItemSets,FortuneWheelCommands:fortuneWheelState.FortuneWheelCommands};fortuneWheelState.loadChild(FWSelectScreen,e,fortuneWheelState.character)}else 0===WheelFortuneVelocity&&MouseIn(...e.preset)&&WheelFortuneCharacter?.IsPlayer()&&fortuneWheelState.loadChild(WheelPresetScreen,WheelFortuneCharacter.MBSSettings.FortuneWheelPresets);return r(t)}}),MBS_MOD_API.hookFunction("WheelFortuneMouseUp",11,(e,t)=>{!Player.MBSSettings.RollWhenRestrained&&Player.IsRestrained()||t(e)}),MBS_MOD_API.hookFunction("WheelFortuneMouseDown",11,(e,t)=>{!Player.MBSSettings.RollWhenRestrained&&Player.IsRestrained()||t(e)}),MBS_MOD_API.hookFunction("WheelFortuneDrawWheel",11,([e,...t],r)=>r([fortuneWheelState.weightedIDs,...t])),fortuneWheelState=new FWScreenProxy,CurrentScreen){case"WheelFortune":return wheelFortuneLoadHook();case"WheelFortuneCustomize":return wheelFortuneCustomizeLoadHook()}},async afterMBS(){logger.log("Initializing wheel of fortune module"),FORTUNE_WHEEL_ITEMS=generateItems(),FORTUNE_WHEEL_ITEM_SETS=Object.freeze([new FWItemSet("PSO Bondage",FORTUNE_WHEEL_ITEMS.leash_candy,Player.MBSSettings.FortuneWheelItemSets,StripLevel.UNDERWEAR,StripLevel.UNDERWEAR,enableFlags(DEFAULT_FLAGS.map(clone),[0,1,2,3,4,5]),!1,void 0,{"color-MBS-copyItemColor":{modName:"MBS",hookType:"color",hookName:"copyItemColor",kwargs:{sourceGroup:{type:"select",value:"HairFront"}}}}),new FWItemSet("Mummification",FORTUNE_WHEEL_ITEMS.mummy,Player.MBSSettings.FortuneWheelItemSets,StripLevel.CLOTHES,StripLevel.UNDERWEAR,enableFlags(DEFAULT_FLAGS.map(clone),[3]),!1,void 0,{"color-MBS-copyItemColor":{modName:"MBS",hookType:"color",hookName:"copyItemColor",kwargs:{sourceGroup:{type:"select",value:"HairFront"}},get kwargsConfig(){return wheelHookRegister.get(this.modName,this.hookType,this.hookName)?.kwargs??{}}},"typeRecord-MBS-randomizeType":{modName:"MBS",hookType:"typeRecord",hookName:"randomizeType",kwargs:{targetGroups:{type:"select-multiple",state:"some",value:new Set(["ItemLegs","ItemFeet","ItemArms","ItemMouth2","ItemMouth3"])}},get kwargsConfig(){return wheelHookRegister.get(this.modName,this.hookType,this.hookName)?.kwargs??{}}}}),new FWItemSet("Bondage Maid",FORTUNE_WHEEL_ITEMS.maid,Player.MBSSettings.FortuneWheelItemSets,StripLevel.UNDERWEAR,StripLevel.UNDERWEAR,enableFlags(DEFAULT_FLAGS.map(clone),[0,1,2,3]),!1),new FWItemSet("Petrification",FORTUNE_WHEEL_ITEMS.statue,Player.MBSSettings.FortuneWheelItemSets,StripLevel.UNDERWEAR,StripLevel.UNDERWEAR,enableFlags(DEFAULT_FLAGS.map(clone),[0,1,2,3]),!1,void 0,{"beforeOutfitEquip-MBS-statueSetBodyColor":{modName:"MBS",hookType:"beforeOutfitEquip",hookName:"statueSetBodyColor",kwargs:{}}})]),FORTUNE_WHEEL_ITEM_SETS.forEach(e=>e.register(!1)),FORTUNE_WHEEL_OPTIONS_BASE=Object.freeze(WheelFortuneOption.filter(e=>!e.Custom)),FORTUNE_WHEEL_DEFAULT_BASE=WheelFortuneDefault,pushMBSSettings([SettingsType.SHARED])}});const e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,t=Object.keys,n=Array.isArray;function r(e,r){return"object"!=typeof r||t(r).forEach(function(t){e[t]=r[t]}),e}"undefined"==typeof Promise||e.Promise||(e.Promise=Promise);const s=Object.getPrototypeOf,i={}.hasOwnProperty;function o(e,t){return i.call(e,t)}function a(e,r){"function"==typeof r&&(r=r(s(e))),("undefined"==typeof Reflect?t:Reflect.ownKeys)(r).forEach(t=>{l(e,t,r[t])})}const u=Object.defineProperty;function l(e,t,n,a){u(e,t,r(n&&o(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},a))}function c(e){return{from:function(t){return e.prototype=Object.create(t.prototype),l(e.prototype,"constructor",e),{extend:a.bind(null,e.prototype)}}}}const h=Object.getOwnPropertyDescriptor;function d(e,t){let r;return h(e,t)||(r=s(e))&&d(r,t)}const f=[].slice;function p(e,t,r){return f.call(e,t,r)}function y(e,t){return t(e)}function m(e){if(!e)throw new Error("Assertion Failed")}function b(t){e.setImmediate?setImmediate(t):setTimeout(t,0)}function g(e,t){if("string"==typeof t&&o(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],n=0,a=t.length;n<a;++n){var i=g(e,t[n]);r.push(i)}return r}var s=t.indexOf(".");if(-1!==s){var l=e[t.substr(0,s)];return null==l?void 0:g(l,t.substr(s+1))}}function v(e,t,r){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){m("string"!=typeof r&&"length"in r);for(var a=0,i=t.length;a<i;++a)v(e,t[a],r[a])}else{var s=t.indexOf(".");if(-1!==s){var l=t.substr(0,s),c=t.substr(s+1);if(""===c)void 0===r?n(e)&&!isNaN(parseInt(l))?e.splice(l,1):delete e[l]:e[l]=r;else{var u=e[l];u&&o(e,l)||(u=e[l]={}),v(u,c,r)}}else void 0===r?n(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function w(e){var t={};for(var r in e)o(e,r)&&(t[r]=e[r]);return t}const _=[].concat;function x(e){return _.apply([],e)}const k="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(x([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(t=>e[t]),O=new Set(k.map(t=>e[t]));function P(e){const t={};for(const r in e)if(o(e,r)){const n=e[r];t[r]=!n||"object"!=typeof n||O.has(n.constructor)?n:P(n)}return t}let K=null;function E(e){K=new WeakMap;const t=S(e);return K=null,t}function S(e){if(!e||"object"!=typeof e)return e;let t=K.get(e);if(t)return t;if(n(e)){t=[],K.set(e,t);for(var r=0,a=e.length;r<a;++r)t.push(S(e[r]))}else if(O.has(e.constructor))t=e;else{const r=s(e);for(var i in t=r===Object.prototype?{}:Object.create(r),K.set(e,t),e)o(e,i)&&(t[i]=S(e[i]))}return t}const{toString:C}={};function A(e){return C.call(e).slice(8,-1)}const j="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",T="symbol"==typeof j?function(e){var t;return null!=e&&(t=e[j])&&t.apply(e)}:function(){return null};function I(e,t){const r=e.indexOf(t);return r>=0&&e.splice(r,1),r>=0}const q={};function D(e){var t,r,a,o;if(1===arguments.length){if(n(e))return e.slice();if(this===q&&"string"==typeof e)return[e];if(o=T(e)){for(r=[];!(a=o.next()).done;)r.push(a.value);return r}if(null==e)return[e];if("number"==typeof(t=e.length)){for(r=new Array(t);t--;)r[t]=e[t];return r}return[e]}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}const B="undefined"!=typeof Symbol?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var R=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],$=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(R),F={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function N(e,t){this.name=e,this.message=t}function M(e,t){return e+". Errors: "+Object.keys(t).map(e=>t[e].toString()).filter((e,t,r)=>r.indexOf(e)===t).join("\n")}function L(e,t,r,n){this.failures=t,this.failedKeys=n,this.successCount=r,this.message=M(e,t)}function U(e,t){this.name="BulkError",this.failures=Object.keys(t).map(e=>t[e]),this.failuresByPos=t,this.message=M(e,this.failures)}c(N).from(Error).extend({toString:function(){return this.name+": "+this.message}}),c(L).from(N),c(U).from(N);var V=$.reduce((e,t)=>(e[t]=t+"Error",e),{});const z=N;var W=$.reduce((e,t)=>{var r=t+"Error";function n(e,n){this.name=r,e?"string"==typeof e?(this.message=`${e}${n?"\n "+n:""}`,this.inner=n||null):"object"==typeof e&&(this.message=`${e.name} ${e.message}`,this.inner=e):(this.message=F[t]||r,this.inner=null)}return c(n).from(z),e[t]=n,e},{});W.Syntax=SyntaxError,W.Type=TypeError,W.Range=RangeError;var Y=R.reduce((e,t)=>(e[t+"Error"]=W[t],e),{}),G=$.reduce((e,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=W[t]),e),{});function Q(){}function X(e){return e}function H(e,t){return null==e||e===X?t:function(r){return t(e(r))}}function J(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Z(e,t){return e===Q?t:function(){var r=e.apply(this,arguments);void 0!==r&&(arguments[0]=r);var n=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?J(n,this.onsuccess):n),a&&(this.onerror=this.onerror?J(a,this.onerror):a),void 0!==o?o:r}}function ee(e,t){return e===Q?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?J(r,this.onsuccess):r),n&&(this.onerror=this.onerror?J(n,this.onerror):n)}}function te(e,t){return e===Q?t:function(n){var a=e.apply(this,arguments);r(n,a);var o=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?J(o,this.onsuccess):o),i&&(this.onerror=this.onerror?J(i,this.onerror):i),void 0===a?void 0===s?void 0:s:r(a,s)}}function ne(e,t){return e===Q?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function re(e,t){return e===Q?t:function(){var r=e.apply(this,arguments);if(r&&"function"==typeof r.then){for(var n=this,a=arguments.length,o=new Array(a);a--;)o[a]=arguments[a];return r.then(function(){return t.apply(n,o)})}return t.apply(this,arguments)}}G.ModifyError=L,G.DexieError=N,G.BulkError=U;var se="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ie(e,t){se=e}var oe={};const[ae,ue,le]="undefined"==typeof Promise?[]:(()=>{let e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,s(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,s(t),e]})(),ce=ue&&ue.then,he=ae&&ae.constructor,de=!!le;var fe=function(e,t){_e.push([e,t]),ye&&(queueMicrotask(Te),ye=!1)},pe=!0,ye=!0,me=[],be=[],ge=X,ve={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Q,pgp:!1,env:{},finalize:Q},we=ve,_e=[],xe=0,ke=[];function Oe(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=we;if("function"!=typeof e){if(e!==oe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Se(this,this._value))}this._state=null,this._value=null,++t.ref,Ee(this,e)}const Pe={get:function(){var e=we,t=Le;function r(r,n){var a=!e.global&&(e!==we||t!==Le);const o=a&&!We();var i=new Oe((t,i)=>{Ae(this,new Ke(Ze(r,e,a,o),Ze(n,e,a,o),t,i,e))});return this._consoleTask&&(i._consoleTask=this._consoleTask),i}return r.prototype=oe,r},set:function(e){l(this,"then",e&&e.prototype===oe?Pe:{get:function(){return e},set:Pe.set})}};function Ke(e,t,r,n,a){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n,this.psd=a}function Ee(e,t){try{t(t=>{if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Ie();t&&"function"==typeof t.then?Ee(e,(e,r)=>{t instanceof Oe?t._then(e,r):t.then(e,r)}):(e._state=!0,e._value=t,Ce(e)),r&&qe()}},Se.bind(null,e))}catch(t){Se(e,t)}}function Se(e,t){if(be.push(t),null===e._state){var r=e._lib&&Ie();t=ge(t),e._state=!1,e._value=t,function(e){me.some(t=>t._value===e._value)||me.push(e)}(e),Ce(e),r&&qe()}}function Ce(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)Ae(e,t[r]);var a=e._PSD;--a.ref||a.finalize(),0===xe&&(++xe,fe(()=>{0==--xe&&De()},[]))}function Ae(e,t){if(null!==e._state){var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++xe,fe(je,[r,e,t])}else e._listeners.push(t)}function je(e,t,r){try{var n,a=t._value;!t._state&&be.length&&(be=[]),n=se&&t._consoleTask?t._consoleTask.run(()=>e(a)):e(a),t._state||-1!==be.indexOf(a)||function(e){for(var t=me.length;t;)if(me[--t]._value===e._value)return void me.splice(t,1)}(t),r.resolve(n)}catch(e){r.reject(e)}finally{0==--xe&&De(),--r.psd.ref||r.psd.finalize()}}function Te(){Je(ve,()=>{Ie()&&qe()})}function Ie(){var e=pe;return pe=!1,ye=!1,e}function qe(){var e,t,r;do{for(;_e.length>0;)for(e=_e,_e=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}}while(_e.length>0);pe=!0,ye=!0}function De(){var e=me;me=[],e.forEach(e=>{e._PSD.onunhandled.call(null,e._value,e)});for(var t=ke.slice(0),r=t.length;r;)t[--r]()}function Be(e){return new Oe(oe,!1,e)}function Re(e,t){var r=we;return function(){var n=Ie(),a=we;try{return Xe(r,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{Xe(a,!1),n&&qe()}}}a(Oe.prototype,{then:Pe,_then:function(e,t){Ae(this,new Ke(null,null,e,t,we))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],r=arguments[1];return"function"==typeof t?this.then(null,e=>e instanceof t?r(e):Be(e)):this.then(null,e=>e&&e.name===t?r(e):Be(e))},finally:function(e){return this.then(t=>Oe.resolve(e()).then(()=>t),t=>Oe.resolve(e()).then(()=>Be(t)))},timeout:function(e,t){return e<1/0?new Oe((r,n)=>{var a=setTimeout(()=>n(new W.Timeout(t)),e);this.then(r,n).finally(clearTimeout.bind(null,a))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&l(Oe.prototype,Symbol.toStringTag,"Dexie.Promise"),ve.env=He(),a(Oe,{all:function(){var e=D.apply(null,arguments).map(Ye);return new Oe(function(t,r){0===e.length&&t([]);var n=e.length;e.forEach((a,o)=>Oe.resolve(a).then(r=>{e[o]=r,--n||t(e)},r))})},resolve:e=>e instanceof Oe?e:e&&"function"==typeof e.then?new Oe((t,r)=>{e.then(t,r)}):new Oe(oe,!0,e),reject:Be,race:function(){var e=D.apply(null,arguments).map(Ye);return new Oe((t,r)=>{e.map(e=>Oe.resolve(e).then(t,r))})},PSD:{get:()=>we,set:e=>we=e},totalEchoes:{get:()=>Le},newPSD:Ve,usePSD:Je,scheduler:{get:()=>fe,set:e=>{fe=e}},rejectionMapper:{get:()=>ge,set:e=>{ge=e}},follow:(e,t)=>new Oe((r,n)=>Ve((t,r)=>{var n=we;n.unhandleds=[],n.onunhandled=r,n.finalize=J(function(){!function(e){ke.push(function t(){e(),ke.splice(ke.indexOf(t),1)}),++xe,fe(()=>{0==--xe&&De()},[])}(()=>{0===this.unhandleds.length?t():r(this.unhandleds[0])})},n.finalize),e()},t,r,n))}),he&&(he.allSettled&&l(Oe,"allSettled",function(){const e=D.apply(null,arguments).map(Ye);return new Oe(t=>{0===e.length&&t([]);let r=e.length;const n=new Array(r);e.forEach((e,a)=>Oe.resolve(e).then(e=>n[a]={status:"fulfilled",value:e},e=>n[a]={status:"rejected",reason:e}).then(()=>--r||t(n)))})}),he.any&&"undefined"!=typeof AggregateError&&l(Oe,"any",function(){const e=D.apply(null,arguments).map(Ye);return new Oe((t,r)=>{0===e.length&&r(new AggregateError([]));let n=e.length;const a=new Array(n);e.forEach((e,o)=>Oe.resolve(e).then(e=>t(e),e=>{a[o]=e,--n||r(new AggregateError(a))}))})}),he.withResolvers&&(Oe.withResolvers=he.withResolvers));const $e={awaits:0,echoes:0,id:0};var Fe=0,Ne=[],Me=0,Le=0,Ue=0;function Ve(e,t,n,a){var o=we,i=Object.create(o);i.parent=o,i.ref=0,i.global=!1,i.id=++Ue,ve.env,i.env=de?{Promise:Oe,PromiseProp:{value:Oe,configurable:!0,writable:!0},all:Oe.all,race:Oe.race,allSettled:Oe.allSettled,any:Oe.any,resolve:Oe.resolve,reject:Oe.reject}:{},t&&r(i,t),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=Je(i,e,n,a);return 0===i.ref&&i.finalize(),s}function ze(){return $e.id||($e.id=++Fe),++$e.awaits,$e.echoes+=100,$e.id}function We(){return!!$e.awaits&&(0==--$e.awaits&&($e.id=0),$e.echoes=100*$e.awaits,!0)}function Ye(e){return $e.echoes&&e&&e.constructor===he?(ze(),e.then(e=>(We(),e),e=>(We(),tt(e)))):e}function Ge(e){++Le,$e.echoes&&0!=--$e.echoes||($e.echoes=$e.awaits=$e.id=0),Ne.push(we),Xe(e,!0)}function Qe(){var e=Ne[Ne.length-1];Ne.pop(),Xe(e,!1)}function Xe(t,r){var n=we;if((r?!$e.echoes||Me++&&t===we:!Me||--Me&&t===we)||queueMicrotask(r?Ge.bind(null,t):Qe),t!==we&&(we=t,n===ve&&(ve.env=He()),de)){var a=ve.env.Promise,o=t.env;(n.global||t.global)&&(Object.defineProperty(e,"Promise",o.PromiseProp),a.all=o.all,a.race=o.race,a.resolve=o.resolve,a.reject=o.reject,o.allSettled&&(a.allSettled=o.allSettled),o.any&&(a.any=o.any))}}function He(){var t=e.Promise;return de?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(e,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function Je(e,t,r,n,a){var o=we;try{return Xe(e,!0),t(r,n,a)}finally{Xe(o,!1)}}function Ze(e,t,r,n){return"function"!=typeof e?e:function(){var a=we;r&&ze(),Xe(t,!0);try{return e.apply(this,arguments)}finally{Xe(a,!1),n&&queueMicrotask(We)}}}function et(e){Promise===he&&0===$e.echoes?0===Me?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+ce).indexOf("[native code]")&&(ze=We=Q);var tt=Oe.reject;function nt(e,t,r,n){if(e.idbdb&&(e._state.openComplete||we.letThrough||e._vip)){var a=e._createTransaction(t,r,e._dbSchema);try{a.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===V.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(()=>nt(e,t,r,n))):tt(a)}return a._promise(t,(e,t)=>Ve(()=>(we.trans=a,n(e,t,a)))).then(e=>{if("readwrite"===t)try{a.idbtrans.commit()}catch{}return"readonly"===t?e:a._completion.then(()=>e)})}if(e._state.openComplete)return tt(new W.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return tt(new W.DatabaseClosed);e.open().catch(Q)}return e._state.dbReadyPromise.then(()=>nt(e,t,r,n))}const rt=String.fromCharCode(65535),st="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",it=[];function ot(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const at={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ut(e){return"string"!=typeof e||/\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=E(t))[e],t)}function lt(){throw W.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ct(e,t){try{const r=ht(e),n=ht(t);if(r!==n)return"Array"===r?1:"Array"===n?-1:"binary"===r?1:"binary"===n?-1:"string"===r?1:"string"===n?-1:"Date"===r?1:"Date"!==n?NaN:-1;switch(r){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){const r=e.length,n=t.length,a=r<n?r:n;for(let r=0;r<a;++r)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return r===n?0:r<n?-1:1}(dt(e),dt(t));case"Array":return function(e,t){const r=e.length,n=t.length,a=r<n?r:n;for(let r=0;r<a;++r){const n=ct(e[r],t[r]);if(0!==n)return n}return r===n?0:r<n?-1:1}(e,t)}}catch{}return NaN}function ht(e){const t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";const r=A(e);return"ArrayBuffer"===r?"binary":r}function dt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function ft(e,t,r){const{yProps:n}=e.schema;return n?(t&&r.numFailures>0&&(t=t.filter((e,t)=>!r.failures[t])),Promise.all(n.map(({updatesTable:r})=>t?e.db.table(r).where("k").anyOf(t).delete():e.db.table(r).clear())).then(()=>r)):r}class pt{_trans(e,t,r){const n=this._tx||we.trans,a=this.name,o=se&&"undefined"!=typeof console&&console.createTask&&console.createTask(`Dexie: ${"readonly"===e?"read":"write"} ${this.name}`);function i(e,r,n){if(!n.schema[a])throw new W.NotFound("Table "+a+" not part of transaction");return t(n.idbtrans,n)}const s=Ie();try{let t=n&&n.db._novip===this.db._novip?n===we.trans?n._promise(e,i,r):Ve(()=>n._promise(e,i,r),{trans:n,transless:we.transless||we}):nt(this.db,e,[this.name],i);return o&&(t._consoleTask=o,t=t.catch(e=>(console.trace(e),tt(e)))),t}finally{s&&qe()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):null==e?tt(new W.Type("Invalid argument to Table.get()")):this._trans("readonly",t=>this.core.get({trans:t,key:e}).then(e=>this.hook.reading.fire(e))).then(t)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(n(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const r=t(e);if(1===r.length)return this.where(r[0]).equals(e[r[0]]);const a=this.schema.indexes.concat(this.schema.primKey).filter(e=>{if(e.compound&&r.every(t=>e.keyPath.indexOf(t)>=0)){for(let t=0;t<r.length;++t)if(-1===r.indexOf(e.keyPath[t]))return!1;return!0}return!1}).sort((e,t)=>e.keyPath.length-t.keyPath.length)[0];if(a&&this.db._maxKey!==rt){const t=a.keyPath.slice(0,r.length);return this.where(t).equals(t.map(t=>e[t]))}!a&&se&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit from a compound index [${r.join("+")}]`);const{idxByName:o}=this.schema;function i(e,t){return 0===ct(e,t)}const[s,l]=r.reduce(([t,r],a)=>{const s=o[a],l=e[a];return[t||s,t||!s?ot(r,s&&s.multi?e=>{const t=g(e,a);return n(t)&&t.some(e=>i(l,e))}:e=>i(l,g(e,a))):r]},[null,null]);return s?this.where(s.name).equals(e[s.keyPath]).filter(l):a?this.filter(l):this.where(r).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,n(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){const{db:t,name:r}=this;this.schema.mappedClass=e,e.prototype instanceof lt&&(e=class extends e{get db(){return t}table(){return r}});const n=new Set;for(let t=e.prototype;t;t=s(t))Object.getOwnPropertyNames(t).forEach(e=>n.add(e));const a=t=>{if(!t)return t;const r=Object.create(e.prototype);for(let e in t)if(!n.has(e))try{r[e]=t[e]}catch(e){}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=a,this.hook("reading",a),e}defineClass(){return this.mapToClass(function(e){r(this,e)})}add(e,t){const{auto:r,keyPath:n}=this.schema.primKey;let a=e;return n&&r&&(a=ut(n)(e)),this._trans("readwrite",e=>this.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})).then(e=>e.numFailures?Oe.reject(e.failures[0]):e.lastResult).then(t=>{if(n)try{v(e,n,t)}catch(e){}return t})}update(e,t){if("object"!=typeof e||n(e))return this.where(":id").equals(e).modify(t);{const r=g(e,this.schema.primKey.keyPath);return void 0===r?tt(new W.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(r).modify(t)}}put(e,t){const{auto:r,keyPath:n}=this.schema.primKey;let a=e;return n&&r&&(a=ut(n)(e)),this._trans("readwrite",e=>this.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})).then(e=>e.numFailures?Oe.reject(e.failures[0]):e.lastResult).then(t=>{if(n)try{v(e,n,t)}catch(e){}return t})}delete(e){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"delete",keys:[e]}).then(t=>ft(this,[e],t)).then(e=>e.numFailures?Oe.reject(e.failures[0]):void 0))}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:at}).then(e=>ft(this,null,e))).then(e=>e.numFailures?Oe.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",t=>this.core.getMany({keys:e,trans:t}).then(e=>e.map(e=>this.hook.reading.fire(e))))}bulkAdd(e,t,r){const n=Array.isArray(t)?t:void 0,a=(r=r||(n?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",t=>{const{auto:r,keyPath:o}=this.schema.primKey;if(o&&n)throw new W.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(n&&n.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");const i=e.length;let s=o&&r?e.map(ut(o)):e;return this.core.mutate({trans:t,type:"add",keys:n,values:s,wantResults:a}).then(({numFailures:e,results:t,lastResult:r,failures:n})=>{if(0===e)return a?t:r;throw new U(`${this.name}.bulkAdd(): ${e} of ${i} operations failed`,n)})})}bulkPut(e,t,r){const n=Array.isArray(t)?t:void 0,a=(r=r||(n?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",t=>{const{auto:r,keyPath:o}=this.schema.primKey;if(o&&n)throw new W.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(n&&n.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");const i=e.length;let s=o&&r?e.map(ut(o)):e;return this.core.mutate({trans:t,type:"put",keys:n,values:s,wantResults:a}).then(({numFailures:e,results:t,lastResult:r,failures:n})=>{if(0===e)return a?t:r;throw new U(`${this.name}.bulkPut(): ${e} of ${i} operations failed`,n)})})}bulkUpdate(e){const t=this.core,r=e.map(e=>e.key),n=e.map(e=>e.changes),a=[];return this._trans("readwrite",o=>t.getMany({trans:o,keys:r,cache:"clone"}).then(i=>{const s=[],l=[];e.forEach(({key:e,changes:t},r)=>{const n=i[r];if(n){for(const r of Object.keys(t)){const a=t[r];if(r===this.schema.primKey.keyPath){if(0!==ct(a,e))throw new W.Constraint("Cannot update primary key in bulkUpdate()")}else v(n,r,a)}a.push(r),s.push(e),l.push(n)}});const c=s.length;return t.mutate({trans:o,type:"put",keys:s,values:l,updates:{keys:r,changeSpecs:n}}).then(({numFailures:e,failures:t})=>{if(0===e)return c;for(const e of Object.keys(t)){const r=a[Number(e)];if(null!=r){const n=t[e];delete t[e],t[r]=n}}throw new U(`${this.name}.bulkUpdate(): ${e} of ${c} operations failed`,t)})}))}bulkDelete(e){const t=e.length;return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"delete",keys:e}).then(t=>ft(this,e,t))).then(({numFailures:e,lastResult:r,failures:n})=>{if(0===e)return r;throw new U(`${this.name}.bulkDelete(): ${e} of ${t} operations failed`,n)})}}function yt(e){var r={},a=function(t,n){if(n){for(var a=arguments.length,o=new Array(a-1);--a;)o[a-1]=arguments[a];return r[t].subscribe.apply(null,o),e}if("string"==typeof t)return r[t]};a.addEventType=s;for(var o=1,i=arguments.length;o<i;++o)s(arguments[o]);return a;function s(e,t,n){if("object"==typeof e)return l(e);t||(t=ne),n||(n=Q);var o={subscribers:[],fire:n,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=t(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter(function(t){return t!==e}),o.fire=o.subscribers.reduce(t,n)}};return r[e]=a[e]=o,o}function l(e){t(e).forEach(function(t){var r=e[t];if(n(r))s(t,e[t][0],e[t][1]);else{if("asap"!==r)throw new W.InvalidArgument("Invalid event config");var a=s(t,X,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];a.subscribers.forEach(function(e){b(function(){e.apply(null,t)})})})}})}}function mt(e,t){return c(t).from({prototype:e}),t}function bt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function gt(e,t){e.filter=ot(e.filter,t)}function vt(e,t,r){var n=e.replayFilter;e.replayFilter=n?()=>ot(n(),t()):t,e.justLimit=r&&!n}function wt(e,t){if(e.isPrimKey)return t.primaryKey;const r=t.getIndexByKeyPath(e.index);if(!r)throw new W.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function _t(e,t,r){const n=wt(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:n,range:e.range}})}function xt(e,t,r,n){const a=e.replayFilter?ot(e.filter,e.replayFilter()):e.filter;if(e.or){const i={},s=(e,r,n)=>{if(!a||a(r,n,e=>r.stop(e),e=>r.fail(e))){var s=r.primaryKey,l=""+s;"[object ArrayBuffer]"===l&&(l=""+new Uint8Array(s)),o(i,l)||(i[l]=!0,t(e,r,n))}};return Promise.all([e.or._iterate(s,r),kt(_t(e,n,r),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return kt(_t(e,n,r),ot(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function kt(e,t,r,n){var a=Re(n?(e,t,a)=>r(n(e),t,a):r);return e.then(e=>{if(e)return e.start(()=>{var r=()=>e.continue();t&&!t(e,e=>r=e,t=>{e.stop(t),r=Q},t=>{e.fail(t),r=Q})||a(e.value,e,e=>r=e),r()})})}class Ot{execute(e){const t=this["@@propmod"];if(void 0!==t.add){const r=t.add;if(n(r))return[...n(e)?e:[],...r].sort();if("number"==typeof r)return(Number(e)||0)+r;if("bigint"==typeof r)try{return BigInt(e)+r}catch{return BigInt(0)+r}throw new TypeError(`Invalid term ${r}`)}if(void 0!==t.remove){const r=t.remove;if(n(r))return n(e)?e.filter(e=>!r.includes(e)).sort():[];if("number"==typeof r)return Number(e)-r;if("bigint"==typeof r)try{return BigInt(e)-r}catch{return BigInt(0)-r}throw new TypeError(`Invalid subtrahend ${r}`)}const r=t.replacePrefix?.[0];return r&&"string"==typeof e&&e.startsWith(r)?t.replacePrefix[1]+e.substring(r.length):e}constructor(e){this["@@propmod"]=e}}class Pt{_read(e,t){var r=this._ctx;return r.error?r.table._trans(null,tt.bind(null,r.error)):r.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,tt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=ot(t.algorithm,e)}_iterate(e,t){return xt(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&r(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read(r=>xt(t,e,r,t.table.core))}count(e){return this._read(e=>{const t=this._ctx,r=t.table.core;if(bt(t,!0))return r.count({trans:e,query:{index:wt(t,r.schema),range:t.range}}).then(e=>Math.min(e,t.limit));var n=0;return xt(t,()=>(++n,!1),e,r).then(()=>n)}).then(e)}sortBy(e,t){const r=e.split(".").reverse(),n=r[0],a=r.length-1;function o(e,t){return t?o(e[r[t]],t-1):e[n]}var i="next"===this._ctx.dir?1:-1;function s(e,t){return ct(o(e,a),o(t,a))*i}return this.toArray(function(e){return e.sort(s)}).then(t)}toArray(e){return this._read(e=>{var t=this._ctx;if("next"===t.dir&&bt(t,!0)&&t.limit>0){const{valueMapper:r}=t,n=wt(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:n,range:t.range}}).then(({result:e})=>r?e.map(r):e)}{const r=[];return xt(t,e=>r.push(e),e,t.table.core).then(()=>r)}},e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,bt(t)?vt(t,()=>{var t=e;return(e,r)=>0===t||(1===t?(--t,!1):(r(()=>{e.advance(t),t=0}),!1))}):vt(t,()=>{var t=e;return()=>--t<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),vt(this._ctx,()=>{var t=e;return function(e,r,n){return--t<=0&&r(n),t>=0}},!0),this}until(e,t){return gt(this._ctx,function(r,n,a){return!e(r.value)||(n(a),t)}),this}first(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,r;return gt(this._ctx,function(t){return e(t.value)}),t=this._ctx,r=e,t.isMatch=ot(t.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.key,r)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.primaryKey,r)})}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.key)}).then(function(){return r}).then(e)}primaryKeys(e){var t=this._ctx;if("next"===t.dir&&bt(t,!0)&&t.limit>0)return this._read(e=>{var r=wt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:r,range:t.range}})}).then(({result:e})=>e).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(e){return e[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var r={};return gt(this._ctx,function(e){var t=e.primaryKey.toString(),n=o(r,t);return r[t]=!0,!n}),this}modify(e){var r=this._ctx;return this._write(n=>{var a;if("function"==typeof e)a=e;else{var o=t(e),i=o.length;a=function(t){let r=!1;for(let n=0;n<i;++n){let a=o[n],i=e[a],s=g(t,a);i instanceof Ot?(v(t,a,i.execute(s)),r=!0):s!==i&&(v(t,a,i),r=!0)}return r}}const s=r.table.core,{outbound:l,extractKey:c}=s.schema.primaryKey;let u=200;const d=this.db._options.modifyChunkSize;d&&(u="object"==typeof d?d[s.name]||d["*"]||200:d);const h=[];let p=0;const f=[],m=(e,r)=>{const{failures:n,numFailures:a}=r;p+=e-a;for(let e of t(n))h.push(n[e])},y=e===Kt;return this.clone().primaryKeys().then(t=>{const o=bt(r)&&r.limit===1/0&&("function"!=typeof e||y)&&{index:r.index,range:r.range},i=d=>{const h=Math.min(u,t.length-d),p=t.slice(d,d+h);return(y?Promise.resolve([]):s.getMany({trans:n,keys:p,cache:"immutable"})).then(f=>{const g=[],b=[],v=l?[]:null,S=y?p:[];if(!y)for(let e=0;e<h;++e){const r=f[e],n={value:E(r),primKey:t[d+e]};!1!==a.call(n,n.value,n)&&(null==n.value?S.push(t[d+e]):l||0===ct(c(r),c(n.value))?(b.push(n.value),l&&v.push(t[d+e])):(S.push(t[d+e]),g.push(n.value)))}return Promise.resolve(g.length>0&&s.mutate({trans:n,type:"add",values:g}).then(e=>{for(let t in e.failures)S.splice(parseInt(t),1);m(g.length,e)})).then(()=>(b.length>0||o&&"object"==typeof e)&&s.mutate({trans:n,type:"put",keys:v,values:b,criteria:o,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:d>0}).then(e=>m(b.length,e))).then(()=>(S.length>0||o&&y)&&s.mutate({trans:n,type:"delete",keys:S,criteria:o,isAdditionalChunk:d>0}).then(e=>ft(r.table,S,e)).then(e=>m(S.length,e))).then(()=>t.length>d+h&&i(d+u))})};return i(0).then(()=>{if(h.length>0)throw new L("Error modifying one or more objects",h,p,f);return t.length})})})}delete(){var e=this._ctx,t=e.range;return!bt(e)||e.table.schema.yProps||!e.isPrimKey&&3!==t.type?this.modify(Kt):this._write(r=>{const{primaryKey:n}=e.table.core.schema,a=t;return e.table.core.count({trans:r,query:{index:n,range:a}}).then(t=>e.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(({failures:e,numFailures:r})=>{if(r)throw new L("Could not delete some values",Object.keys(e).map(t=>e[t]),t-r);return t-r}))})}}const Kt=(e,t)=>t.value=null;function Et(e,t){return e<t?-1:e===t?0:1}function St(e,t){return e>t?-1:e===t?0:1}function Ct(e,t,r){var n=e instanceof Dt?new e.Collection(e):e;return n._ctx.error=r?new r(t):new TypeError(t),n}function At(e){return new e.Collection(e,()=>qt("")).limit(0)}function jt(e,t,r,n,a,o){for(var i=Math.min(e.length,n.length),s=-1,l=0;l<i;++l){var c=t[l];if(c!==n[l])return a(e[l],r[l])<0?e.substr(0,l)+r[l]+r.substr(l+1):a(e[l],n[l])<0?e.substr(0,l)+n[l]+r.substr(l+1):s>=0?e.substr(0,s)+t[s]+r.substr(s+1):null;a(e[l],c)<0&&(s=l)}return i<n.length&&"next"===o?e+r.substr(e.length):i<e.length&&"prev"===o?e.substr(0,r.length):s<0?null:e.substr(0,s)+n[s]+r.substr(s+1)}function Tt(e,t,r,n){var a,o,i,s,l,c,u,d=r.length;if(!r.every(e=>"string"==typeof e))return Ct(e,"String expected.");function h(e){a=function(e){return"next"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),o=function(e){return"next"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),i="next"===e?Et:St;var t=r.map(function(e){return{lower:o(e),upper:a(e)}}).sort(function(e,t){return i(e.lower,t.lower)});s=t.map(function(e){return e.upper}),l=t.map(function(e){return e.lower}),c=e,u="next"===e?"":n}h("next");var p=new e.Collection(e,()=>It(s[0],l[d-1]+n));p._ondirectionchange=function(e){h(e)};var f=0;return p._addAlgorithm(function(e,r,n){var a=e.key;if("string"!=typeof a)return!1;var h=o(a);if(t(h,l,f))return!0;for(var p=null,g=f;g<d;++g){var m=jt(a,h,s[g],l[g],i,c);null===m&&null===p?f=g+1:(null===p||i(p,m)>0)&&(p=m)}return r(null!==p?function(){e.continue(p+u)}:n),!1}),p}function It(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function qt(e){return{type:1,lower:e,upper:e}}class Dt{get Collection(){return this._ctx.table.db.Collection}between(e,t,r,n){r=!1!==r,n=!0===n;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(r||n)&&(!r||!n)?At(this):new this.Collection(this,()=>It(e,t,!r,!n))}catch(e){return Ct(this,st)}}equals(e){return null==e?Ct(this,st):new this.Collection(this,()=>qt(e))}above(e){return null==e?Ct(this,st):new this.Collection(this,()=>It(e,void 0,!0))}aboveOrEqual(e){return null==e?Ct(this,st):new this.Collection(this,()=>It(e,void 0,!1))}below(e){return null==e?Ct(this,st):new this.Collection(this,()=>It(void 0,e,!1,!0))}belowOrEqual(e){return null==e?Ct(this,st):new this.Collection(this,()=>It(void 0,e))}startsWith(e){return"string"!=typeof e?Ct(this,"String expected."):this.between(e,e+rt,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):Tt(this,(e,t)=>0===e.indexOf(t[0]),[e],rt)}equalsIgnoreCase(e){return Tt(this,(e,t)=>e===t[0],[e],"")}anyOfIgnoreCase(){var e=D.apply(q,arguments);return 0===e.length?At(this):Tt(this,(e,t)=>-1!==t.indexOf(e),e,"")}startsWithAnyOfIgnoreCase(){var e=D.apply(q,arguments);return 0===e.length?At(this):Tt(this,(e,t)=>t.some(t=>0===e.indexOf(t)),e,rt)}anyOf(){const e=D.apply(q,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return Ct(this,st)}if(0===e.length)return At(this);const r=new this.Collection(this,()=>It(e[0],e[e.length-1]));r._ondirectionchange=r=>{t="next"===r?this._ascending:this._descending,e.sort(t)};let n=0;return r._addAlgorithm((r,a,o)=>{const i=r.key;for(;t(i,e[n])>0;)if(++n,n===e.length)return a(o),!1;return 0===t(i,e[n])||(a(()=>{r.continue(e[n])}),!1)}),r}notEqual(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=D.apply(q,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Ct(this,st)}const t=e.reduce((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]],null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const r=this._cmp,n=this._ascending,a=this._descending,o=this._min,i=this._max;if(0===e.length)return At(this);if(!e.every(e=>void 0!==e[0]&&void 0!==e[1]&&n(e[0],e[1])<=0))return Ct(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",W.InvalidArgument);const s=!t||!1!==t.includeLowers,l=t&&!0===t.includeUppers;let c,u=n;function d(e,t){return u(e[0],t[0])}try{c=e.reduce(function(e,t){let n=0,a=e.length;for(;n<a;++n){const a=e[n];if(r(t[0],a[1])<0&&r(t[1],a[0])>0){a[0]=o(a[0],t[0]),a[1]=i(a[1],t[1]);break}}return n===a&&e.push(t),e},[]),c.sort(d)}catch(e){return Ct(this,st)}let h=0;const p=l?e=>n(e,c[h][1])>0:e=>n(e,c[h][1])>=0,f=s?e=>a(e,c[h][0])>0:e=>a(e,c[h][0])>=0;let g=p;const m=new this.Collection(this,()=>It(c[0][0],c[c.length-1][1],!s,!l));return m._ondirectionchange=e=>{"next"===e?(g=p,u=n):(g=f,u=a),c.sort(d)},m._addAlgorithm((e,t,r)=>{for(var a=e.key;g(a);)if(++h,h===c.length)return t(r),!1;return!!function(e){return!p(e)&&!f(e)}(a)||(0===this._cmp(a,c[h][1])||0===this._cmp(a,c[h][0])||t(()=>{u===n?e.continue(c[h][0]):e.continue(c[h][1])}),!1)}),m}startsWithAnyOf(){const e=D.apply(q,arguments);return e.every(e=>"string"==typeof e)?0===e.length?At(this):this.inAnyRange(e.map(e=>[e,e+rt])):Ct(this,"startsWithAnyOf() only works with strings")}}function Bt(e){return Re(function(t){return Rt(t),e(t.target.error),!1})}function Rt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const $t=yt(null,"storagemutated");class Ft{_lock(){return m(!we.global),++this._reculock,1!==this._reculock||we.global||(we.lockOwnerFor=this),this}_unlock(){if(m(!we.global),0==--this._reculock)for(we.global||(we.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Je(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&we.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,r=this.db._state.dbOpenError;if(m(!this.idbtrans),!e&&!t)switch(r&&r.name){case"DatabaseClosedError":throw new W.DatabaseClosed(r);case"MissingAPIError":throw new W.MissingAPI(r.message,r);default:throw new W.OpenFailed(r)}if(!this.active)throw new W.TransactionInactive;return m(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Re(t=>{Rt(t),this._reject(e.error)}),e.onabort=Re(t=>{Rt(t),this.active&&this._reject(new W.Abort(e.error)),this.active=!1,this.on("abort").fire(t)}),e.oncomplete=Re(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&$t.storagemutated.fire(e.mutatedParts)}),this}_promise(e,t,r){if("readwrite"===e&&"readwrite"!==this.mode)return tt(new W.ReadOnly("Transaction is readonly"));if(!this.active)return tt(new W.TransactionInactive);if(this._locked())return new Oe((n,a)=>{this._blockedFuncs.push([()=>{this._promise(e,t,r).then(n,a)},we])});if(r)return Ve(()=>{var e=new Oe((e,r)=>{this._lock();const n=t(e,r,this);n&&n.then&&n.then(e,r)});return e.finally(()=>this._unlock()),e._lib=!0,e});var n=new Oe((e,r)=>{var n=t(e,r,this);n&&n.then&&n.then(e,r)});return n._lib=!0,n}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const r=Oe.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then(()=>r);else{t._waitingFor=r,t._waitingQueue=[];var n=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(n.get(-1/0).onsuccess=e)}()}var a=t._waitingFor;return new Oe((e,n)=>{r.then(r=>t._waitingQueue.push(Re(e.bind(null,r))),e=>t._waitingQueue.push(Re(n.bind(null,e)))).finally(()=>{t._waitingFor===a&&(t._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new W.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(o(t,e))return t[e];const r=this.schema[e];if(!r)throw new W.NotFound("Table "+e+" not part of transaction");const n=new this.db.Table(e,r,this);return n.core=this.db.core.table(e),t[e]=n,n}}function Nt(e,t,r,n,a,o,i,s){return{name:e,keyPath:t,unique:r,multi:n,auto:a,compound:o,src:(r&&!i?"&":"")+(n?"*":"")+(a?"++":"")+Mt(t),type:s}}function Mt(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Lt(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:(n=r,a=e=>[e.name,e],n.reduce((e,t,r)=>{var n=a(t);return n&&(e[n[0]]=n[1]),e},{}))};var n,a}let Ut=e=>{try{return e.only([[]]),Ut=()=>[[]],[[]]}catch(e){return Ut=()=>rt,rt}};function Vt(e){return null==e?()=>{}:"string"==typeof e?function(e){return 1===e.split(".").length?t=>t[e]:t=>g(t,e)}(e):t=>g(t,e)}function zt(e){return[].slice.call(e)}let Wt=0;function Yt(e){return null==e?":id":"string"==typeof e?e:`[${e.join("+")}]`}function Gt(e,t,r){function a(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:r,upper:n,lowerOpen:a,upperOpen:o}=e;return void 0===r?void 0===n?null:t.upperBound(n,!!o):void 0===n?t.lowerBound(r,!!a):t.bound(r,n,!!a,!!o)}const{schema:o,hasGetAll:i}=function(e,t){const r=zt(e.objectStoreNames);return{schema:{name:e.name,tables:r.map(e=>t.objectStore(e)).map(e=>{const{keyPath:t,autoIncrement:r}=e,a=n(t),o=null==t,i={},s={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:o,compound:a,keyPath:t,autoIncrement:r,unique:!0,extractKey:Vt(t)},indexes:zt(e.indexNames).map(t=>e.index(t)).map(e=>{const{name:t,unique:r,multiEntry:a,keyPath:o}=e,s={name:t,compound:n(o),keyPath:o,unique:r,multiEntry:a,extractKey:Vt(o)};return i[Yt(o)]=s,s}),getIndexByKeyPath:e=>i[Yt(e)]};return i[":id"]=s.primaryKey,null!=t&&(i[Yt(t)]=s.primaryKey),s})},hasGetAll:r.length>0&&"getAll"in t.objectStore(r[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,r),s=o.tables.map(e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function({trans:e,type:r,keys:n,values:o,range:i}){return new Promise((s,l)=>{s=Re(s);const c=e.objectStore(t),u=null==c.keyPath,d="put"===r||"add"===r;if(!d&&"delete"!==r&&"deleteRange"!==r)throw new Error("Invalid operation type: "+r);const{length:h}=n||o||{length:1};if(n&&o&&n.length!==o.length)throw new Error("Given keys array must have same length as given values array.");if(0===h)return s({numFailures:0,failures:{},results:[],lastResult:void 0});let p;const f=[],g=[];let m=0;const y=e=>{++m,Rt(e)};if("deleteRange"===r){if(4===i.type)return s({numFailures:m,failures:g,results:[],lastResult:void 0});3===i.type?f.push(p=c.clear()):f.push(p=c.delete(a(i)))}else{const[e,t]=d?u?[o,n]:[o,null]:[n,null];if(d)for(let n=0;n<h;++n)f.push(p=t&&void 0!==t[n]?c[r](e[n],t[n]):c[r](e[n])),p.onerror=y;else for(let t=0;t<h;++t)f.push(p=c[r](e[t])),p.onerror=y}const b=e=>{const t=e.target.result;f.forEach((e,t)=>null!=e.error&&(g[t]=e.error)),s({numFailures:m,failures:g,results:"delete"===r?n:f.map(e=>e.result),lastResult:t})};p.onerror=e=>{y(e),b(e)},p.onsuccess=b})},getMany:({trans:e,keys:r})=>new Promise((n,a)=>{n=Re(n);const o=e.objectStore(t),i=r.length,s=new Array(i);let l,c=0,u=0;const d=e=>{const t=e.target;s[t._pos]=t.result,++u===c&&n(s)},h=Bt(a);for(let e=0;e<i;++e)null!=r[e]&&(l=o.get(r[e]),l._pos=e,l.onsuccess=d,l.onerror=h,++c);0===c&&n(s)}),get:({trans:e,key:r})=>new Promise((n,a)=>{n=Re(n);const o=e.objectStore(t).get(r);o.onsuccess=e=>n(e.target.result),o.onerror=Bt(a)}),query:function(e){return r=>new Promise((n,o)=>{n=Re(n);const{trans:i,values:s,limit:l,query:c}=r,u=l===1/0?void 0:l,{index:d,range:h}=c,p=i.objectStore(t),f=d.isPrimaryKey?p:p.index(d.name),g=a(h);if(0===l)return n({result:[]});if(e){const e=s?f.getAll(g,u):f.getAllKeys(g,u);e.onsuccess=e=>n({result:e.target.result}),e.onerror=Bt(o)}else{let e=0;const t=s||!("openKeyCursor"in f)?f.openCursor(g):f.openKeyCursor(g),r=[];t.onsuccess=a=>{const o=t.result;return o?(r.push(s?o.value:o.primaryKey),++e===l?n({result:r}):void o.continue()):n({result:r})},t.onerror=Bt(o)}})}(i),openCursor:function({trans:e,values:r,query:n,reverse:o,unique:i}){return new Promise((s,l)=>{s=Re(s);const{index:c,range:u}=n,d=e.objectStore(t),h=c.isPrimaryKey?d:d.index(c.name),p=o?i?"prevunique":"prev":i?"nextunique":"next",f=r||!("openKeyCursor"in h)?h.openCursor(a(u),p):h.openKeyCursor(a(u),p);f.onerror=Bt(l),f.onsuccess=Re(t=>{const r=f.result;if(!r)return void s(null);r.___id=++Wt,r.done=!1;const n=r.continue.bind(r);let a=r.continuePrimaryKey;a&&(a=a.bind(r));const o=r.advance.bind(r),i=()=>{throw new Error("Cursor not stopped")};r.trans=e,r.stop=r.continue=r.continuePrimaryKey=r.advance=()=>{throw new Error("Cursor not started")},r.fail=Re(l),r.next=function(){let e=1;return this.start(()=>e--?this.continue():this.stop()).then(()=>this)},r.start=e=>{const t=new Promise((e,t)=>{e=Re(e),f.onerror=Bt(t),r.fail=t,r.stop=t=>{r.stop=r.continue=r.continuePrimaryKey=r.advance=i,e(t)}}),s=()=>{if(f.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=()=>{throw new Error("Cursor behind last entry")},r.stop()};return f.onsuccess=Re(e=>{f.onsuccess=s,s()}),r.continue=n,r.continuePrimaryKey=a,r.advance=o,s(),t},s(r)},l)})},count({query:e,trans:r}){const{index:n,range:o}=e;return new Promise((e,i)=>{const s=r.objectStore(t),l=n.isPrimaryKey?s:s.index(n.name),c=a(o),u=c?l.count(c):l.count();u.onsuccess=Re(t=>e(t.target.result)),u.onerror=Bt(i)})}}}(e)),l={};return s.forEach(e=>l[e.name]=e),{stack:"dbcore",transaction:e.transaction.bind(e),table(e){if(!l[e])throw new Error(`Table '${e}' not found`);return l[e]},MIN_KEY:-1/0,MAX_KEY:Ut(t),schema:o}}function Qt(e,t){const r=t.db,n=function(e,t,{IDBKeyRange:r,indexedDB:n},a){const o=function(e,t){return t.reduce((e,{create:t})=>({...e,...t(e)}),e)}(Gt(t,r,a),e.dbcore);return{dbcore:o}}(e._middlewares,r,e._deps,t);e.core=n.dbcore,e.tables.forEach(t=>{const r=t.name;e.core.schema.tables.some(e=>e.name===r)&&(t.core=e.core.table(r),e[r]instanceof e.Table&&(e[r].core=t.core))})}function Xt(e,t,r,n){r.forEach(r=>{const a=n[r];t.forEach(t=>{const n=d(t,r);(!n||"value"in n&&void 0===n.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?l(t,r,{get(){return this.table(r)},set(e){u(this,r,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[r]=new e.Table(r,a))})})}function Ht(e,t){t.forEach(t=>{for(let r in t)t[r]instanceof e.Table&&delete t[r]})}function Jt(e,t){return e._cfg.version-t._cfg.version}function Zt(e,r,n,a){const o=e._dbSchema;n.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=Lt("$meta",an("")[0],[]),e._storeNames.push("$meta"));const i=e._createTransaction("readwrite",e._storeNames,o);i.create(n),i._completion.catch(a);const s=i._reject.bind(i),l=we.transless||we;Ve(()=>{if(we.trans=i,we.transless=l,0!==r)return Qt(e,n),function(e,t,r){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(e=>null!=e?e:r):Oe.resolve(r)}(0,i,r).then(r=>function(e,r,n,a){const o=[],i=e._versions;let s=e._dbSchema=sn(e,e.idbdb,a);const l=i.filter(e=>e._cfg.version>=r);if(0===l.length)return Oe.resolve();return l.forEach(i=>{o.push(()=>{const o=s,l=i._cfg.dbschema;on(e,o,a),on(e,l,a),s=e._dbSchema=l;const c=en(o,l);c.add.forEach(e=>{tn(a,e[0],e[1].primKey,e[1].indexes)}),c.change.forEach(e=>{if(e.recreate)throw new W.Upgrade("Not yet support for changing primary key");{const t=a.objectStore(e.name);e.add.forEach(e=>rn(t,e)),e.change.forEach(e=>{t.deleteIndex(e.name),rn(t,e)}),e.del.forEach(e=>t.deleteIndex(e))}});const u=i._cfg.contentUpgrade;if(u&&i._cfg.version>r){Qt(e,a),n._memoizedTables={};let r=w(l);c.del.forEach(e=>{r[e]=o[e]}),Ht(e,[e.Transaction.prototype]),Xt(e,[e.Transaction.prototype],t(r),r),n.schema=r;const i=B(u);let s;i&&ze();const d=Oe.follow(()=>{if(s=u(n),s&&i){var e=We.bind(null,null);s.then(e,e)}});return s&&"function"==typeof s.then?Oe.resolve(s):d.then(()=>s)}}),o.push(t=>{!function(e,t){[].slice.call(t.db.objectStoreNames).forEach(r=>null==e[r]&&t.db.deleteObjectStore(r))}(i._cfg.dbschema,t),Ht(e,[e.Transaction.prototype]),Xt(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}),o.push(t=>{e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===i._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(e=>"$meta"!==e)):t.objectStore("$meta").put(i._cfg.version,"version"))})}),function e(){return o.length?Oe.resolve(o.shift()(n.idbtrans)).then(e):Oe.resolve()}().then(()=>{nn(s,a)})}(e,r,i,n)).catch(s);t(o).forEach(e=>{tn(n,e,o[e].primKey,o[e].indexes)}),Qt(e,n),Oe.follow(()=>e.on.populate.fire(i)).catch(s)})}function en(e,t){const r={del:[],add:[],change:[]};let n;for(n in e)t[n]||r.del.push(n);for(n in t){const a=e[n],o=t[n];if(a){const e={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||a.primKey.auto!==o.primKey.auto)e.recreate=!0,r.change.push(e);else{const t=a.idxByName,n=o.idxByName;let i;for(i in t)n[i]||e.del.push(i);for(i in n){const r=t[i],a=n[i];r?r.src!==a.src&&e.change.push(a):e.add.push(a)}(e.del.length>0||e.add.length>0||e.change.length>0)&&r.change.push(e)}}else r.add.push([n,o])}return r}function tn(e,t,r,n){const a=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(e=>rn(a,e)),a}function nn(e,r){t(e).forEach(t=>{r.db.objectStoreNames.contains(t)||(se&&console.debug("Dexie: Creating missing table",t),tn(r,t,e[t].primKey,e[t].indexes))})}function rn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function sn(e,t,r){const n={};return p(t.objectStoreNames,0).forEach(e=>{const t=r.objectStore(e);let a=t.keyPath;const o=Nt(Mt(a),a||"",!0,!1,!!t.autoIncrement,a&&"string"!=typeof a,!0),i=[];for(let e=0;e<t.indexNames.length;++e){const r=t.index(t.indexNames[e]);a=r.keyPath;var s=Nt(r.name,a,!!r.unique,!!r.multiEntry,!1,a&&"string"!=typeof a,!1);i.push(s)}n[e]=Lt(e,o,i)}),n}function on(t,r,n){const a=n.db.objectStoreNames;for(let e=0;e<a.length;++e){const o=a[e],i=n.objectStore(o);t._hasGetAll="getAll"in i;for(let e=0;e<i.indexNames.length;++e){const t=i.indexNames[e],n=i.index(t).keyPath,a="string"==typeof n?n:"["+p(n).join("+")+"]";if(r[o]){const e=r[o].idxByName[a];e&&(e.name=t,delete r[o].idxByName[a],r[o].idxByName[t]=e)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&e.WorkerGlobalScope&&e instanceof e.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function an(e){return e.split(",").map((e,t)=>{const r=e.split(":"),a=r[1]?.trim(),o=(e=r[0].trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(o)?o.match(/^\[(.*)\]$/)[1].split("+"):o;return Nt(o,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),n(i),0===t,a)})}class un{_createTableSchema(e,t,r){return Lt(e,t,r)}_parseIndexSyntax(e){return an(e)}_parseStoresSpec(e,r){t(e).forEach(t=>{if(null!==e[t]){let n=this._parseIndexSyntax(e[t]);const a=n.shift();if(!a)throw new W.Schema("Invalid schema for table "+t+": "+e[t]);if(a.unique=!0,a.multi)throw new W.Schema("Primary key cannot be multiEntry*");n.forEach(e=>{if(e.auto)throw new W.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new W.Schema("Index must have a name and cannot be an empty string")});const o=this._createTableSchema(t,a,n);r[t]=o}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?r(this._cfg.storesSource,e):e;const a=n._versions,o={};let i={};return a.forEach(e=>{r(o,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(o,i)}),n._dbSchema=i,Ht(n,[n._allTables,n,n.Transaction.prototype]),Xt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],t(i),i),n._storeNames=t(i),this}upgrade(e){return this._cfg.contentUpgrade=re(this._cfg.contentUpgrade||Q,e),this}}function ln(e,t){let r=e._dbNamesDB;return r||(r=e._dbNamesDB=new Hn("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t}),r.version(1).stores({dbnames:"name"})),r.table("dbnames")}function cn(e){return e&&"function"==typeof e.databases}function hn(e){return Ve(function(){return we.letThrough=!0,e()})}function dn(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var r=function(){return indexedDB.databases().finally(t)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function fn(e){return!("from"in e)}const pn=function(e,t){if(!this){const t=new pn;return e&&"d"in e&&r(t,e),t}r(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function yn(e,t,n){const a=ct(t,n);if(isNaN(a))return;if(a>0)throw RangeError();if(fn(e))return r(e,{from:t,to:n,d:1});const o=e.l,i=e.r;if(ct(n,e.from)<0)return o?yn(o,t,n):e.l={from:t,to:n,d:1,l:null,r:null},vn(e);if(ct(t,e.to)>0)return i?yn(i,t,n):e.r={from:t,to:n,d:1,l:null,r:null},vn(e);ct(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),ct(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const s=!e.r;o&&!e.l&&mn(e,o),i&&s&&mn(e,i)}function mn(e,t){fn(t)||function e(t,{from:r,to:n,l:a,r:o}){yn(t,r,n),a&&e(t,a),o&&e(t,o)}(e,t)}function bn(e,t){const r=gn(t);let n=r.next();if(n.done)return!1;let a=n.value;const o=gn(e);let i=o.next(a.from),s=i.value;for(;!n.done&&!i.done;){if(ct(s.from,a.to)<=0&&ct(s.to,a.from)>=0)return!0;ct(a.from,s.from)<0?a=(n=r.next(s.from)).value:s=(i=o.next(a.from)).value}return!1}function gn(e){let t=fn(e)?null:{s:0,n:e};return{next(e){const r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&ct(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||ct(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function vn(e){const t=(e.r?.d||0)-(e.l?.d||0),r=t>1?"r":t<-1?"l":"";if(r){const t="r"===r?"l":"r",n={...e},a=e[r];e.from=a.from,e.to=a.to,e[r]=a[r],n[r]=a[t],e[t]=n,n.d=wn(n)}e.d=wn(e)}function wn({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}function _n(e,r){return t(r).forEach(t=>{e[t]?mn(e[t],r[t]):e[t]=P(r[t])}),e}function xn(e,t){return e.all||t.all||Object.keys(e).some(r=>t[r]&&bn(t[r],e[r]))}a(pn.prototype,{add(e){return mn(this,e),this},addKey(e){return yn(this,e,e),this},addKeys(e){return e.forEach(e=>yn(this,e,e)),this},hasKey(e){const t=gn(this).next(e).value;return t&&ct(t.from,e)<=0&&ct(t.to,e)>=0},[j](){return gn(this)}});const kn={};let On={},Pn=!1;function Kn(e,t=!1){_n(On,e),Pn||(Pn=!0,setTimeout(()=>{Pn=!1;const e=On;On={},En(e,!1)},0))}function En(e,t=!1){const r=new Set;if(e.all)for(const n of Object.values(kn))Sn(n,e,r,t);else for(const n in e){const a=/^idb\:\/\/(.*)\/(.*)\//.exec(n);if(a){const[,n,o]=a,i=kn[`idb://${n}/${o}`];i&&Sn(i,e,r,t)}}r.forEach(e=>e())}function Sn(e,t,r,n){const a=[];for(const[o,i]of Object.entries(e.queries.query)){const e=[];for(const a of i)xn(t,a.obsSet)?a.subscribers.forEach(e=>r.add(e)):n&&e.push(a);n&&a.push([o,e])}if(n)for(const[t,r]of a)e.queries.query[t]=r}function Cn(e){const r=e._state,{indexedDB:n}=e._deps;if(r.isBeingOpened||e.idbdb)return r.dbReadyPromise.then(()=>r.dbOpenError?tt(r.dbOpenError):e);r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;const a=r.openCanceller;let o=Math.round(10*e.verno),i=!1;function s(){if(r.openCanceller!==a)throw new W.DatabaseClosed("db.open() was cancelled")}let l=r.dbReadyResolve,c=null,u=!1;const d=()=>new Oe((a,l)=>{if(s(),!n)throw new W.MissingAPI;const h=e.name,f=r.autoSchema||!o?n.open(h):n.open(h,o);if(!f)throw new W.MissingAPI;f.onerror=Bt(l),f.onblocked=Re(e._fireOnBlocked),f.onupgradeneeded=Re(t=>{if(c=f.transaction,r.autoSchema&&!e._options.allowEmptyDB){f.onerror=Rt,c.abort(),f.result.close();const e=n.deleteDatabase(h);e.onsuccess=e.onerror=Re(()=>{l(new W.NoSuchDatabase(`Database ${h} doesnt exist`))})}else{c.onerror=Bt(l);const r=t.oldVersion>Math.pow(2,62)?0:t.oldVersion;u=r<1,e.idbdb=f.result,i&&function(e,t){nn(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");const r=sn(0,e.idbdb,t);on(e,e._dbSchema,t);const n=en(r,e._dbSchema);for(const e of n.change){if(e.change.length||e.recreate)return void console.warn(`Unable to patch indexes of table ${e.name} because it has changes on the type of index or primary key.`);const r=t.objectStore(e.name);e.add.forEach(t=>{se&&console.debug(`Dexie upgrade patch: Creating missing index ${e.name}.${t.src}`),rn(r,t)})}}(e,c),Zt(e,r/10,c,l)}},l),f.onsuccess=Re(()=>{c=null;const n=e.idbdb=f.result,s=p(n.objectStoreNames);if(s.length>0)try{const c=n.transaction(1===(l=s).length?l[0]:l,"readonly");if(r.autoSchema)!function(e,r,n){e.verno=r.version/10;const a=e._dbSchema=sn(0,r,n);e._storeNames=p(r.objectStoreNames,0),Xt(e,[e._allTables],t(a),a)}(e,n,c);else if(on(e,e._dbSchema,c),!function(e,t){const r=en(sn(0,e.idbdb,t),e._dbSchema);return!(r.add.length||r.change.some(e=>e.add.length||e.change.length))}(e,c)&&!i)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),n.close(),o=n.version+1,i=!0,a(d());Qt(e,c)}catch(e){}var l;it.push(e),n.onversionchange=Re(t=>{r.vcFired=!0,e.on("versionchange").fire(t)}),n.onclose=Re(t=>{e.on("close").fire(t)}),u&&function({indexedDB:e,IDBKeyRange:t},r){!cn(e)&&"__dbnames"!==r&&ln(e,t).put({name:r}).catch(Q)}(e._deps,h),a()},l)}).catch(e=>{switch(e?.name){case"UnknownError":if(r.PR1398_maxLoop>0)return r.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),d();break;case"VersionError":if(o>0)return o=0,d()}return Oe.reject(e)});return Oe.race([a,("undefined"==typeof navigator?Oe.resolve():dn()).then(d)]).then(()=>(s(),r.onReadyBeingFired=[],Oe.resolve(hn(()=>e.on.ready.fire(e.vip))).then(function t(){if(r.onReadyBeingFired.length>0){let n=r.onReadyBeingFired.reduce(re,Q);return r.onReadyBeingFired=[],Oe.resolve(hn(()=>n(e.vip))).then(t)}}))).finally(()=>{r.openCanceller===a&&(r.onReadyBeingFired=null,r.isBeingOpened=!1)}).catch(t=>{r.dbOpenError=t;try{c&&c.abort()}catch{}return a===r.openCanceller&&e._close(),tt(t)}).finally(()=>{r.openComplete=!0,l()}).then(()=>{if(u){const t={};e.tables.forEach(r=>{r.schema.indexes.forEach(n=>{n.name&&(t[`idb://${e.name}/${r.name}/${n.name}`]=new pn(-1/0,[[[]]]))}),t[`idb://${e.name}/${r.name}/`]=t[`idb://${e.name}/${r.name}/:dels`]=new pn(-1/0,[[[]]])}),$t("storagemutated").fire(t),En(t,!0)}return e})}function An(e){var t=t=>e.next(t),r=o(t),a=o(t=>e.throw(t));function o(e){return t=>{var o=e(t),i=o.value;return o.done?i:i&&"function"==typeof i.then?i.then(r,a):n(i)?Promise.all(i).then(r,a):r(i)}}return o(t)()}function jn(e,t,r){var n=arguments.length;if(n<2)throw new W.InvalidArgument("Too few arguments");for(var a=new Array(n-1);--n;)a[n-1]=arguments[n];return r=a.pop(),[e,x(a),r]}function Tn(e,t,r,n,a){return Oe.resolve().then(()=>{const o=we.transless||we,i=e._createTransaction(t,r,e._dbSchema,n);i.explicit=!0;const s={trans:i,transless:o};if(n)i.idbtrans=n.idbtrans;else try{i.create(),i.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(n){return n.name===V.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(()=>Tn(e,t,r,null,a))):tt(n)}const l=B(a);let c;l&&ze();const u=Oe.follow(()=>{if(c=a.call(i,i),c)if(l){var e=We.bind(null,null);c.then(e,e)}else"function"==typeof c.next&&"function"==typeof c.throw&&(c=An(c))},s);return(c&&"function"==typeof c.then?Oe.resolve(c).then(e=>i.active?e:tt(new W.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>c)).then(e=>(n&&i._resolve(),i._completion.then(()=>e))).catch(e=>(i._reject(e),tt(e)))})}function In(e,t,r){const a=n(e)?e.slice():[e];for(let e=0;e<r;++e)a.push(t);return a}const qn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const r=e.table(t),{schema:n}=r,a={},o=[];function i(e,t,r){const n=Yt(e),s=a[n]=a[n]||[],l=null==e?0:"string"==typeof e?1:e.length,c=t>0,u={...r,name:c?`${n}(virtual-from:${r.name})`:r.name,lowLevelIndex:r,isVirtual:c,keyTail:t,keyLength:l,extractKey:Vt(e),unique:!c&&r.unique};return s.push(u),u.isPrimaryKey||o.push(u),l>1&&i(2===l?e[0]:e.slice(0,l-1),t+1,r),s.sort((e,t)=>e.keyTail-t.keyTail),u}const s=i(n.primaryKey.keyPath,0,n.primaryKey);a[":id"]=[s];for(const e of n.indexes)i(e.keyPath,0,e);function l(t){const r=t.query.index;return r.isVirtual?{...t,query:{index:r.lowLevelIndex,range:(n=t.query.range,a=r.keyTail,{type:1===n.type?2:n.type,lower:In(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,a),lowerOpen:!0,upper:In(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,a),upperOpen:!0})}}:t;var n,a}const c={...r,schema:{...n,primaryKey:s,indexes:o,getIndexByKeyPath:function(e){const t=a[Yt(e)];return t&&t[0]}},count:e=>r.count(l(e)),query:e=>r.query(l(e)),openCursor(t){const{keyTail:n,isVirtual:a,keyLength:o}=t.query.index;return a?r.openCursor(l(t)).then(r=>r&&function(r){const a=Object.create(r,{continue:{value:function(a){null!=a?r.continue(In(a,t.reverse?e.MAX_KEY:e.MIN_KEY,n)):t.unique?r.continue(r.key.slice(0,o).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,n)):r.continue()}},continuePrimaryKey:{value(t,a){r.continuePrimaryKey(In(t,e.MAX_KEY,n),a)}},primaryKey:{get:()=>r.primaryKey},key:{get(){const e=r.key;return 1===o?e[0]:e.slice(0,o)}},value:{get:()=>r.value}});return a}(r)):r.openCursor(t)}};return c}}}};function Dn(e,r,n,a){return n=n||{},a=a||"",t(e).forEach(t=>{if(o(r,t)){var i=e[t],s=r[t];if("object"==typeof i&&"object"==typeof s&&i&&s){const e=A(i);e!==A(s)?n[a+t]=r[t]:"Object"===e?Dn(i,s,n,a+t+"."):i!==s&&(n[a+t]=r[t])}else i!==s&&(n[a+t]=r[t])}else n[a+t]=void 0}),t(r).forEach(t=>{o(e,t)||(n[a+t]=r[t])}),n}function Bn(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}const Rn={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const r=e.table(t),{primaryKey:n}=r.schema,a={...r,mutate(e){const a=we.trans,{deleting:i,creating:s,updating:l}=a.table(t).hook;switch(e.type){case"add":if(s.fire===Q)break;return a._promise("readwrite",()=>c(e),!0);case"put":if(s.fire===Q&&l.fire===Q)break;return a._promise("readwrite",()=>c(e),!0);case"delete":if(i.fire===Q)break;return a._promise("readwrite",()=>c(e),!0);case"deleteRange":if(i.fire===Q)break;return a._promise("readwrite",()=>function(e){return u(e.trans,e.range,1e4)}(e),!0)}return r.mutate(e);function c(e){const t=we.trans,a=e.keys||Bn(n,e);if(!a)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?{...e,keys:a}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,r){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:r,cache:"immutable"})}(r,e,a).then(c=>{const u=a.map((r,a)=>{const u=c[a],d={onerror:null,onsuccess:null};if("delete"===e.type)i.fire.call(d,r,u,t);else if("add"===e.type||void 0===u){const o=s.fire.call(d,r,e.values[a],t);null==r&&null!=o&&(r=o,e.keys[a]=r,n.outbound||v(e.values[a],n.keyPath,r))}else{const n=Dn(u,e.values[a]),i=l.fire.call(d,n,r,u,t);if(i){const t=e.values[a];Object.keys(i).forEach(e=>{o(t,e)?t[e]=i[e]:v(t,e,i[e])})}}return d});return r.mutate(e).then(({failures:t,results:r,numFailures:n,lastResult:o})=>{for(let n=0;n<a.length;++n){const o=r?r[n]:a[n],i=u[n];null==o?i.onerror&&i.onerror(t[n]):i.onsuccess&&i.onsuccess("put"===e.type&&c[n]?e.values[n]:o)}return{failures:t,results:r,numFailures:n,lastResult:o}}).catch(e=>(u.forEach(t=>t.onerror&&t.onerror(e)),Promise.reject(e)))})}function u(e,t,a){return r.query({trans:e,values:!1,query:{index:n,range:t},limit:a}).then(({result:r})=>c({type:"delete",keys:r,trans:e}).then(n=>n.numFailures>0?Promise.reject(n.failures[0]):r.length<a?{failures:[],numFailures:0,lastResult:void 0}:u(e,{...t,lower:r[r.length-1],lowerOpen:!0},a)))}}};return a}})};function $n(e,t,r){try{if(!t)return null;if(t.keys.length<e.length)return null;const n=[];for(let a=0,o=0;a<t.keys.length&&o<e.length;++a)0===ct(t.keys[a],e[o])&&(n.push(r?E(t.values[a]):t.values[a]),++o);return n.length===e.length?n:null}catch{return null}}const Fn={stack:"dbcore",level:-1,create:e=>({table:t=>{const r=e.table(t);return{...r,getMany:e=>{if(!e.cache)return r.getMany(e);const t=$n(e.keys,e.trans._cache,"clone"===e.cache);return t?Oe.resolve(t):r.getMany(e).then(t=>(e.trans._cache={keys:e.keys,values:"clone"===e.cache?E(t):t},t))},mutate:e=>("add"!==e.type&&(e.trans._cache=null),r.mutate(e))}}})};function Nn(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Mn(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}const Ln={stack:"dbcore",level:0,name:"Observability",create:e=>{const r=e.schema.name,a=new pn(e.MIN_KEY,e.MAX_KEY);return{...e,transaction:(t,r,n)=>{if(we.subscr&&"readonly"!==r)throw new W.ReadOnly(`Readwrite transaction in liveQuery context. Querier source: ${we.querier}`);return e.transaction(t,r,n)},table:o=>{const i=e.table(o),{schema:s}=i,{primaryKey:l,indexes:c}=s,{extractKey:u,outbound:d}=l,h=l.autoIncrement&&c.filter(e=>e.compound&&e.keyPath.includes(l.keyPath)),p={...i,mutate:t=>{const c=t.trans,u=t.mutatedParts||(t.mutatedParts={}),d=e=>{const t=`idb://${r}/${o}/${e}`;return u[t]||(u[t]=new pn)},p=d(""),f=d(":dels"),{type:g}=t;let[m,y]="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[Bn(l,t).filter(e=>e),t.values]:[];const b=t.trans._cache;if(n(m)){p.addKeys(m);const e="delete"===g||m.length===y.length?$n(m,b):null;e||f.addKeys(m),(e||y)&&function(e,t,r,a){t.indexes.forEach(function(t){const o=e(t.name||"");function i(e){return null!=e?t.extractKey(e):null}const s=e=>t.multiEntry&&n(e)?e.forEach(e=>o.addKey(e)):o.addKey(e);(r||a).forEach((e,t)=>{const n=r&&i(r[t]),o=a&&i(a[t]);0!==ct(n,o)&&(null!=n&&s(n),null!=o&&s(o))})})}(d,s,e,y)}else if(m){const t={from:m.lower??e.MIN_KEY,to:m.upper??e.MAX_KEY};f.add(t),p.add(t)}else p.add(a),f.add(a),s.indexes.forEach(e=>d(e.name).add(a));return i.mutate(t).then(e=>(!m||"add"!==t.type&&"put"!==t.type||(p.addKeys(e.results),h&&h.forEach(r=>{const n=t.values.map(e=>r.extractKey(e)),a=r.keyPath.findIndex(e=>e===l.keyPath);for(let t=0,r=e.results.length;t<r;++t)n[t][a]=e.results[t];d(r.name).addKeys(n)})),c.mutatedParts=_n(c.mutatedParts||{},u),e))}},f=({query:{index:t,range:r}})=>[t,new pn(r.lower??e.MIN_KEY,r.upper??e.MAX_KEY)],g={get:e=>[l,new pn(e.key)],getMany:e=>[l,(new pn).addKeys(e.keys)],count:f,query:f,openCursor:f};return t(g).forEach(e=>{p[e]=function(t){const{subscr:n}=we,s=!!n;const l=Nn(we,i)&&Mn(e,t)?t.obsSet={}:n;if(s){const n=e=>{const t=`idb://${r}/${o}/${e}`;return l[t]||(l[t]=new pn)},s=n(""),c=n(":dels"),[h,p]=g[e](t);if("query"===e&&h.isPrimaryKey&&!t.values?c.add(p):n(h.name||"").add(p),!h.isPrimaryKey){if("count"!==e){const r="query"===e&&d&&t.values&&i.query({...t,values:!1});return i[e].apply(this,arguments).then(n=>{if("query"===e){if(d&&t.values)return r.then(({result:e})=>(s.addKeys(e),n));const e=t.values?n.result.map(u):n.result;t.values?s.addKeys(e):c.addKeys(e)}else if("openCursor"===e){const e=n,r=t.values;return e&&Object.create(e,{key:{get:()=>(c.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return c.addKey(t),t}},value:{get:()=>(r&&s.addKey(e.primaryKey),e.value)}})}return n})}c.add(a)}}return i[e].apply(this,arguments)}}),p}}}};function Un(e,t,r){if(0===r.numFailures)return t;if("deleteRange"===t.type)return null;const a=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(r.numFailures===a)return null;const o={...t};return n(o.keys)&&(o.keys=o.keys.filter((e,t)=>!(t in r.failures))),"values"in o&&n(o.values)&&(o.values=o.values.filter((e,t)=>!(t in r.failures))),o}function Vn(e,t){return function(e,t){return void 0===t.lower||(t.lowerOpen?ct(e,t.lower)>0:ct(e,t.lower)>=0)}(e,t)&&function(e,t){return void 0===t.upper||(t.upperOpen?ct(e,t.upper)<0:ct(e,t.upper)<=0)}(e,t)}function zn(e,t,r,a,o,i){if(!r||0===r.length)return e;const s=t.query.index,{multiEntry:l}=s,c=t.query.range,u=a.schema.primaryKey.extractKey,d=s.extractKey,h=(s.lowLevelIndex||s).extractKey;let p=r.reduce((e,r)=>{let a=e;const o=[];if("add"===r.type||"put"===r.type){const e=new pn;for(let t=r.values.length-1;t>=0;--t){const a=r.values[t],i=u(a);if(e.hasKey(i))continue;const s=d(a);(l&&n(s)?s.some(e=>Vn(e,c)):Vn(s,c))&&(e.addKey(i),o.push(a))}}switch(r.type){case"add":{const r=(new pn).addKeys(t.values?e.map(e=>u(e)):e);a=e.concat(t.values?o.filter(e=>{const t=u(e);return!r.hasKey(t)&&(r.addKey(t),!0)}):o.map(e=>u(e)).filter(e=>!r.hasKey(e)&&(r.addKey(e),!0)));break}case"put":{const n=(new pn).addKeys(r.values.map(e=>u(e)));a=e.filter(e=>!n.hasKey(t.values?u(e):e)).concat(t.values?o:o.map(e=>u(e)));break}case"delete":const n=(new pn).addKeys(r.keys);a=e.filter(e=>!n.hasKey(t.values?u(e):e));break;case"deleteRange":const i=r.range;a=e.filter(e=>!Vn(u(e),i))}return a},e);return p===e?e:(p.sort((e,t)=>ct(h(e),h(t))||ct(u(e),u(t))),t.limit&&t.limit<1/0&&(p.length>t.limit?p.length=t.limit:e.length===t.limit&&p.length<t.limit&&(o.dirty=!0)),i?Object.freeze(p):p)}function Wn(e,t){return 0===ct(e.lower,t.lower)&&0===ct(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Yn(e,t){return function(e,t,r,n){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;const a=ct(e,t);if(0===a){if(r&&n)return 0;if(r)return 1;if(n)return-1}return a}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&function(e,t,r,n){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;const a=ct(e,t);if(0===a){if(r&&n)return 0;if(r)return-1;if(n)return 1}return a}(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function Gn(e,t,r,n){e.subscribers.add(r),n.addEventListener("abort",()=>{e.subscribers.delete(r),0===e.subscribers.size&&function(e,t){setTimeout(()=>{0===e.subscribers.size&&I(t,e)},3e3)}(e,t)})}const Qn={stack:"dbcore",level:0,name:"Cache",create:e=>{const t=e.schema.name,r={...e,transaction:(r,n,a)=>{const o=e.transaction(r,n,a);if("readwrite"===n){const a=new AbortController,{signal:i}=a,s=i=>()=>{if(a.abort(),"readwrite"===n){const n=new Set;for(const a of r){const r=kn[`idb://${t}/${a}`];if(r){const t=e.table(a),s=r.optimisticOps.filter(e=>e.trans===o);if(o._explicit&&i&&o.mutatedParts)for(const e of Object.values(r.queries.query))for(const t of e.slice())xn(t.obsSet,o.mutatedParts)&&(I(e,t),t.subscribers.forEach(e=>n.add(e)));else if(s.length>0){r.optimisticOps=r.optimisticOps.filter(e=>e.trans!==o);for(const e of Object.values(r.queries.query))for(const r of e.slice())if(null!=r.res&&o.mutatedParts)if(i&&!r.dirty){const a=Object.isFrozen(r.res),o=zn(r.res,r.req,s,t,r,a);r.dirty?(I(e,r),r.subscribers.forEach(e=>n.add(e))):o!==r.res&&(r.res=o,r.promise=Oe.resolve({result:o}))}else r.dirty&&I(e,r),r.subscribers.forEach(e=>n.add(e))}}}n.forEach(e=>e())}};o.addEventListener("abort",s(!1),{signal:i}),o.addEventListener("error",s(!1),{signal:i}),o.addEventListener("complete",s(!0),{signal:i})}return o},table(r){const n=e.table(r),a=n.schema.primaryKey,o={...n,mutate(e){const o=we.trans;if(a.outbound||"disabled"===o.db._options.cache||o.explicit||"readwrite"!==o.idbtrans.mode)return n.mutate(e);const i=kn[`idb://${t}/${r}`];if(!i)return n.mutate(e);const s=n.mutate(e);return"add"!==e.type&&"put"!==e.type||!(e.values.length>=50||Bn(a,e).some(e=>null==e))?(i.optimisticOps.push(e),e.mutatedParts&&Kn(e.mutatedParts),s.then(t=>{if(t.numFailures>0){I(i.optimisticOps,e);const r=Un(0,e,t);r&&i.optimisticOps.push(r),e.mutatedParts&&Kn(e.mutatedParts)}}),s.catch(()=>{I(i.optimisticOps,e),e.mutatedParts&&Kn(e.mutatedParts)})):s.then(t=>{const r=Un(0,{...e,values:e.values.map((e,r)=>{if(t.failures[r])return e;const n=a.keyPath?.includes(".")?E(e):{...e};return v(n,a.keyPath,t.results[r]),n})},t);i.optimisticOps.push(r),queueMicrotask(()=>e.mutatedParts&&Kn(e.mutatedParts))}),s},query(e){if(!Nn(we,n)||!Mn("query",e))return n.query(e);const a="immutable"===we.trans?.db._options.cache,{requery:o,signal:i}=we;let[s,l,c,u]=function(e,t,r,n){const a=kn[`idb://${e}/${t}`];if(!a)return[];const o=a.queries[r];if(!o)return[null,!1,a,null];const i=o[(n.query?n.query.index.name:null)||""];if(!i)return[null,!1,a,null];switch(r){case"query":const e=i.find(e=>e.req.limit===n.limit&&e.req.values===n.values&&Wn(e.req.query.range,n.query.range));return e?[e,!0,a,i]:[i.find(e=>("limit"in e.req?e.req.limit:1/0)>=n.limit&&(!n.values||e.req.values)&&Yn(e.req.query.range,n.query.range)),!1,a,i];case"count":const t=i.find(e=>Wn(e.req.query.range,n.query.range));return[t,!!t,a,i]}}(t,r,"query",e);if(s&&l)s.obsSet=e.obsSet;else{const o=n.query(e).then(e=>{const t=e.result;if(s&&(s.res=t),a){for(let e=0,r=t.length;e<r;++e)Object.freeze(t[e]);Object.freeze(t)}else e.result=E(t);return e}).catch(e=>(u&&s&&I(u,s),Promise.reject(e)));s={obsSet:e.obsSet,promise:o,subscribers:new Set,type:"query",req:e,dirty:!1},u?u.push(s):(u=[s],c||(c=kn[`idb://${t}/${r}`]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),c.queries.query[e.query.index.name||""]=u)}return Gn(s,u,o,i),s.promise.then(t=>({result:zn(t.result,e,c?.optimisticOps,n,s,a)}))}};return o}};return r}};function Xn(e,t){return new Proxy(e,{get:(e,r,n)=>"db"===r?t:Reflect.get(e,r,n)})}class Hn{constructor(e,t){this._middlewares={},this.verno=0;const r=Hn.dependencies;this._options=t={addons:Hn.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned",...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:n}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Q,dbReadyPromise:null,cancelOpen:Q,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};var o;a.dbReadyPromise=new Oe(e=>{a.dbReadyResolve=e}),a.openCanceller=new Oe((e,t)=>{a.cancelOpen=t}),this._state=a,this.name=e,this.on=yt(this,"populate","blocked","versionchange","close",{ready:[re,Q]}),this.once=(e,t)=>{const r=(...n)=>{this.on(e).unsubscribe(r),t.apply(this,n)};return this.on(e,r)},this.on.ready.subscribe=y(this.on.ready.subscribe,e=>(t,r)=>{Hn.vip(()=>{const n=this._state;if(n.openComplete)n.dbOpenError||Oe.resolve().then(t),r&&e(t);else if(n.onReadyBeingFired)n.onReadyBeingFired.push(t),r&&e(t);else{e(t);const n=this;r||e(function e(){n.on.ready.unsubscribe(t),n.on.ready.unsubscribe(e)})}})}),this.Collection=(o=this,mt(Pt.prototype,function(e,t){this.db=o;let r=at,n=null;if(t)try{r=t()}catch(e){n=e}const a=e._ctx,i=a.table,s=i.hook.reading.fire;this._ctx={table:i,index:a.index,isPrimKey:!a.index||i.schema.primKey.keyPath&&a.index===i.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:a.or,valueMapper:s!==X?s:null}})),this.Table=function(e){return mt(pt.prototype,function(t,r,n){this.db=e,this._tx=n,this.name=t,this.schema=r,this.hook=e._allTables[t]?e._allTables[t].hook:yt(null,{creating:[Z,Q],reading:[H,X],updating:[te,Q],deleting:[ee,Q]})})}(this),this.Transaction=function(e){return mt(Ft.prototype,function(t,r,n,a,o){"readonly"!==t&&r.forEach(e=>{const t=n[e]?.yProps;t&&(r=r.concat(t.map(e=>e.updatesTable)))}),this.db=e,this.mode=t,this.storeNames=r,this.schema=n,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=yt(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Oe((e,t)=>{this._resolve=e,this._reject=t}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),tt(e)})})}(this),this.Version=function(e){return mt(un.prototype,function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(e){return mt(Dt.prototype,function(t,r,n){if(this.db=e,this._ctx={table:t,index:":id"===r?null:r,or:n},this._cmp=this._ascending=ct,this._descending=(e,t)=>ct(t,e),this._max=(e,t)=>ct(e,t)>0?e:t,this._min=(e,t)=>ct(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new W.MissingAPI})}(this),this.on("versionchange",e=>{e.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close({disableAutoOpen:!1})}),this.on("blocked",e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${e.oldVersion/10}`)}),this._maxKey=Ut(t.IDBKeyRange),this._createTransaction=(e,t,r,n)=>new this.Transaction(e,t,r,this._options.chromeTransactionDurability,n),this._fireOnBlocked=e=>{this.on("blocked").fire(e),it.filter(e=>e.name===this.name&&e!==this&&!e._state.vcFired).map(t=>t.on("versionchange").fire(e))},this.use(Fn),this.use(Qn),this.use(Ln),this.use(qn),this.use(Rn);const i=new Proxy(this,{get:(e,t,r)=>{if("_vip"===t)return!0;if("table"===t)return e=>Xn(this.table(e),i);const n=Reflect.get(e,t,r);return n instanceof pt?Xn(n,i):"tables"===t?n.map(e=>Xn(e,i)):"_createTransaction"===t?function(){return Xn(n.apply(this,arguments),i)}:n}});this.vip=i,n.forEach(e=>e(this))}version(e){if(isNaN(e)||e<.1)throw new W.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new W.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var r=t.filter(t=>t._cfg.version===e)[0];return r||(r=new this.Version(e),t.push(r),t.sort(Jt),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||we.letThrough||this._vip)?e():new Oe((e,t)=>{if(this._state.openComplete)return t(new W.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._state.autoOpen)return void t(new W.DatabaseClosed);this.open().catch(Q)}this._state.dbReadyPromise.then(e,t)}).then(e)}use({stack:e,create:t,level:r,name:n}){n&&this.unuse({stack:e,name:n});const a=this._middlewares[e]||(this._middlewares[e]=[]);return a.push({stack:e,create:t,level:null==r?10:r,name:n}),a.sort((e,t)=>e.level-t.level),this}unuse({stack:e,name:t,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(e=>r?e.create!==r:!!t&&e.name!==t)),this}open(){return Je(ve,()=>Cn(this))}_close(){this.on.close.fire(new CustomEvent("close"));const e=this._state,t=it.indexOf(this);if(t>=0&&it.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new Oe(t=>{e.dbReadyResolve=t}),e.openCanceller=new Oe((t,r)=>{e.cancelOpen=r}))}close({disableAutoOpen:e}={disableAutoOpen:!0}){const t=this._state;e?(t.isBeingOpened&&t.cancelOpen(new W.DatabaseClosed),this._close(),t.autoOpen=!1,t.dbOpenError=new W.DatabaseClosed):(this._close(),t.autoOpen=this._options.autoOpen||t.isBeingOpened,t.openComplete=!1,t.dbOpenError=null)}delete(e={disableAutoOpen:!0}){const t=arguments.length>0&&"object"!=typeof arguments[0],r=this._state;return new Oe((n,a)=>{const o=()=>{this.close(e);var t=this._deps.indexedDB.deleteDatabase(this.name);t.onsuccess=Re(()=>{!function({indexedDB:e,IDBKeyRange:t},r){!cn(e)&&"__dbnames"!==r&&ln(e,t).delete(r).catch(Q)}(this._deps,this.name),n()}),t.onerror=Bt(a),t.onblocked=this._fireOnBlocked};if(t)throw new W.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return t(this._allTables).map(e=>this._allTables[e])}transaction(){const e=jn.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,r){let n=we.trans;n&&n.db===this&&-1===e.indexOf("!")||(n=null);const a=-1!==e.indexOf("?");let o,i;e=e.replace("!","").replace("?","");try{if(i=t.map(e=>{var t=e instanceof this.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}),"r"==e||"readonly"===e)o="readonly";else{if("rw"!=e&&"readwrite"!=e)throw new W.InvalidArgument("Invalid transaction mode: "+e);o="readwrite"}if(n){if("readonly"===n.mode&&"readwrite"===o){if(!a)throw new W.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");n=null}n&&i.forEach(e=>{if(n&&-1===n.storeNames.indexOf(e)){if(!a)throw new W.SubTransaction("Table "+e+" not included in parent transaction.");n=null}}),a&&n&&!n.active&&(n=null)}}catch(e){return n?n._promise(null,(t,r)=>{r(e)}):tt(e)}const s=Tn.bind(null,this,o,i,n,r);return n?n._promise(o,s,"lock"):we.trans?Je(we.transless,()=>this._whenReady(s)):this._whenReady(s)}table(e){if(!o(this._allTables,e))throw new W.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Jn="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class Zn{constructor(e){this._subscribe=e}subscribe(e,t,r){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:r})}[Jn](){return this}}let er;try{er={indexedDB:e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,IDBKeyRange:e.IDBKeyRange||e.webkitIDBKeyRange}}catch(e){er={indexedDB:null,IDBKeyRange:null}}function tr(e){let t,r=!1;const n=new Zn(n=>{const a=B(e);let i,s=!1,l={},c={};const u={get closed(){return s},unsubscribe:()=>{s||(s=!0,i&&i.abort(),d&&$t.storagemutated.unsubscribe(p))}};n.start&&n.start(u);let d=!1;const h=()=>et(f),p=e=>{_n(l,e),xn(c,l)&&h()},f=()=>{if(s||!er.indexedDB)return;l={};const u={};i&&i.abort(),i=new AbortController;const f={subscr:u,signal:i.signal,requery:h,querier:e,trans:null},g=function(t){const r=Ie();try{a&&ze();let r=Ve(e,t);return a&&(r=r.finally(We)),r}finally{r&&qe()}}(f);Promise.resolve(g).then(e=>{r=!0,t=e,s||f.signal.aborted||(l={},c=u,function(e){for(const t in e)if(o(e,t))return!1;return!0}(c)||d||($t("storagemutated",p),d=!0),et(()=>!s&&n.next&&n.next(e)))},e=>{r=!1,["DatabaseClosedError","AbortError"].includes(e?.name)||s||et(()=>{s||n.error&&n.error(e)})})};return setTimeout(h,0),u});return n.hasValue=()=>r,n.getValue=()=>t,n}const nr=Hn;function rr(e){let t=ir;try{ir=!0,$t.storagemutated.fire(e),En(e,!0)}finally{ir=t}}a(nr,{...G,delete:e=>new nr(e,{addons:[]}).delete(),exists:e=>new nr(e,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:e,IDBKeyRange:t}){return cn(e)?Promise.resolve(e.databases()).then(e=>e.map(e=>e.name).filter(e=>"__dbnames"!==e)):ln(e,t).toCollection().primaryKeys()}(nr.dependencies).then(e)}catch{return tt(new W.MissingAPI)}},defineClass:()=>function(e){r(this,e)},ignoreTransaction:e=>we.trans?Je(we.transless,e):e(),vip:hn,async:function(e){return function(){try{var t=An(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Oe.resolve(t)}catch(e){return tt(e)}}},spawn:function(e,t,r){try{var n=An(e.apply(r,t||[]));return n&&"function"==typeof n.then?n:Oe.resolve(n)}catch(e){return tt(e)}},currentTransaction:{get:()=>we.trans||null},waitFor:function(e,t){const r=Oe.resolve("function"==typeof e?nr.ignoreTransaction(e):e).timeout(t||6e4);return we.trans?we.trans.waitFor(r):r},Promise:Oe,debug:{get:()=>se,set:e=>{ie(e)}},derive:c,extend:r,props:a,override:y,Events:yt,on:$t,liveQuery:tr,extendObservabilitySet:_n,getByKeyPath:g,setByKeyPath:v,delByKeyPath:function(e,t){"string"==typeof t?v(e,t,void 0):"length"in t&&[].map.call(t,function(t){v(e,t,void 0)})},shallowClone:w,deepClone:E,getObjectDiff:Dn,cmp:ct,asap:b,minKey:-1/0,addons:[],connections:it,errnames:V,dependencies:er,cache:kn,semVer:"4.2.0",version:"4.2.0".split(".").map(e=>parseInt(e)).reduce((e,t,r)=>e+t/Math.pow(10,2*r))}),nr.maxKey=Ut(nr.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&($t("storagemutated",e=>{if(!ir){let t;t=new CustomEvent("x-storagemutated-1",{detail:e}),ir=!0,dispatchEvent(t),ir=!1}}),addEventListener("x-storagemutated-1",({detail:e})=>{ir||rr(e)}));let sr,ir=!1,or=()=>{};function ar(e){return new Ot({add:e})}function ur(e){return new Ot({remove:e})}function lr(e,t){return new Ot({replacePrefix:[e,t]})}"undefined"!=typeof BroadcastChannel&&(or=()=>{sr=new BroadcastChannel("x-storagemutated-1"),sr.onmessage=e=>e.data&&rr(e.data)},or(),"function"==typeof sr.unref&&sr.unref(),$t("storagemutated",e=>{ir||sr.postMessage(e)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",e=>{if(!Hn.disableBfCache&&e.persisted){se&&console.debug("Dexie: handling persisted pagehide"),sr?.close();for(const e of it)e.close({disableAutoOpen:!1})}}),addEventListener("pageshow",e=>{!Hn.disableBfCache&&e.persisted&&(se&&console.debug("Dexie: handling persisted pageshow"),or(),rr({all:new pn(-1/0,[[]])}))})),Oe.rejectionMapper=function(e,t){if(!e||e instanceof N||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Y[e.name])return e;var r=new Y[e.name](t||e.message,e);return"stack"in e&&l(r,"stack",{get:function(){return this.inner.stack}}),r},ie(se);const BYTE_CLAMP=255,SHORT_CLAMP=65535;function getSegmentSizes(){return{maxBC:"R120"===GameVersion?80:200,maxMBSServer:0,maxMBSLocal:600}}function encodeVersion(e){const t=new DataView(new ArrayBuffer(4),0);return t.setUint8(0,lodashExports.clamp(e.major,0,BYTE_CLAMP)),t.setUint8(1,lodashExports.clamp(e.minor,0,BYTE_CLAMP)),t.setUint16(2,lodashExports.clamp(e.micro,0,SHORT_CLAMP)),t.getUint32(0)}function decodeVersion(e){const t=new DataView(new ArrayBuffer(4),0);return t.setUint32(0,e),new Version(t.getUint8(0),t.getUint8(1),t.getUint16(2))}function openDB(e){const t=encodeVersion(Version.fromVersion(MBS_VERSION)),r=new Hn(`mbs_${e}`);return r.version(t).stores({crafting:"id"}),r}async function deleteDB(e){return logger.debug(`Deleting indexedDB database ${e}`),new Hn(`mbs_${e}`).delete()}function saveCraft(e,t,r){const{maxBC:n,maxMBSServer:a}=getSegmentSizes(),o=e.table("crafting");return r?(logger.debug(`Saving craft ${t+n+a} to indexedDB: ${r.Name} (${r.Item})`),o.put({id:t,data:r})):(logger.debug(`Deleting craft ${t+n+a} from indexedDB`),o.delete(t))}async function saveAllCraft(e,t){const r=t.map((e,t)=>null!=e?{id:t,data:e}:e),n=[],a=[];for(const[e,t]of r.entries())null==t?a.push(e):n.push(e);logger.debug(`Saving all ${n.length} crafts to indexedDB`);const o=e.table("crafting");return Promise.all([o.bulkPut(r.filter(e=>null!=e)),o.bulkDelete(a)])}function deleteCraft(e,t){return e.table("crafting").delete(t)}function craftingValidate(e,t){if(!CommonIsObject(e))return null;const r=e;switch(CraftingValidate(r)){case CraftingStatusType.OK:case CraftingStatusType.ERROR:return r;case CraftingStatusType.CRITICAL_ERROR:return logger.error(`Removing corrupt crafting item ${t}: "${r?.Name} (${r?.Item})"`),null}}async function loadCraft(e,t){const{maxBC:r,maxMBSServer:n}=getSegmentSizes(),a=e.table("crafting"),o=await a.get(t),i=craftingValidate(o?.data,r+n+t);return i?logger.debug(`Loading craft ${t+r+n} from indexedDB: ${i.Name} (${i.Item})`):logger.debug(`Loading empty craft ${t+r+n} from indexedDB`),i}async function loadAllCraft(e){const{maxBC:t,maxMBSServer:r,maxMBSLocal:n}=getSegmentSizes(),a=e.table("crafting"),o=(await a.bulkGet(lodashExports.range(0,n))).map((e,n)=>craftingValidate(e?.data,t+r+n)),i=o.filter(e=>null!=e).length;return logger.debug(`Loading all ${i} crafts from indexedDB`),o}var styles$4="#crafting-screen h1 {\n  padding-left: unset;\n}\n\n#mbs-crafting-info {\n  direction: ltr;\n  height: var(--button-size);\n  width: var(--button-size);\n}\n#mbs-crafting-info #mbs-crafting-info-marker {\n  -webkit-text-stroke: 1px white;\n  bottom: min(0.2dvh, 0.1dvw);\n  font-size: 0.5em;\n  font-weight: 900;\n  position: absolute;\n  right: min(0.2dvh, 0.1dvw);\n}\n#mbs-crafting-info [role=tooltip] {\n  text-wrap: unset;\n  top: 0%;\n  transform: unset;\n  width: min(100dvh, 50dvw);\n}\n#mbs-crafting-info #mbs-crafting-info-browser,\n#mbs-crafting-info #mbs-crafting-info-account {\n  display: none;\n}\n#mbs-crafting-info[data-type=account] #mbs-crafting-info-account, #mbs-crafting-info[data-type=browser] #mbs-crafting-info-browser {\n  display: inline;\n}";function migrateCraftingCache(e,t){const{maxBC:r}=getSegmentSizes();if(e.Crafting??=[],padArray(e.Crafting,r,null),!t)return;const n=LZString.compressToUTF16(t),a=CraftingDecompressServerData(n),o=[];for(const[e,t]of a.entries())if(null!=t)e:switch(CraftingValidate(t)){case CraftingStatusType.OK:case CraftingStatusType.ERROR:o.push(t);break e;case CraftingStatusType.CRITICAL_ERROR:logger.error(`Removing corrupt crafting item ${r+e}: "${t?.Name} (${t?.Item})"`),o.push(null)}if(!o.length)return;let i=0;for(const[t,r]of e.Crafting.entries()){if(t<80)continue;const n=o[i];if(!n)break;null==r&&(i++,e.Crafting[t]=n)}if(o[i]){if(confirm("Failed to move all MBS server crafts to BC.\nWould you like to download them?")){const t=URL.createObjectURL(new Blob([JSON.stringify(CraftingJSON.encode(o),null,4)],{type:"application/json"})),r=new Date,n=ElementCreate({tag:"a",parent:document.body,attributes:{href:t,hidden:!0,download:`craft${e.MemberNumber}-MBS-${r.getFullYear()}-${r.getMonth().toString().padStart(2,"0")}-${r.getDay().toString().padStart(2,"0")}.json`}});n.click(),n.remove(),URL.revokeObjectURL(t)}}e.IsPlayer()&&CraftingSaveServer()}const IDs$1=Object.freeze({header:"mbs-crafting-header-prefix",button:"mbs-crafting-info",buttonBrowser:"mbs-crafting-info-browser",buttonServer:"mbs-crafting-info-account",buttonMBS:"mbs-crafting-info-marker",style:"mbs-crafting-styles"});async function loadCraftingNameDOM(){let e=document.getElementById(IDs$1.header);if(!e){e=jsxRuntimeExports.jsx("span",{id:IDs$1.header});const t=document.querySelector(`#${CraftingID.root} h1`);t?.prepend(e)}let t=document.getElementById(IDs$1.button);if(!t){t=ElementButton.Create(IDs$1.button,()=>null,{image:"./Icons/Question.png",tooltip:[jsxRuntimeExports.jsxs("span",{id:IDs$1.buttonBrowser,children:["Extra MBS crafting slot stored locally in your Browser.",jsxRuntimeExports.jsx("br",{}),"These crafts are ",jsxRuntimeExports.jsx("em",{children:"exclusively"})," available for this specific combination of web browser, BC account and BC URL (",jsxRuntimeExports.jsx("code",{children:window.location.href}),"). As such, it will ",jsxRuntimeExports.jsx("em",{children:"not"})," be shared between the EU, US and Asia servers."]}),jsxRuntimeExports.jsxs("span",{id:IDs$1.buttonServer,children:["Extra MBS crafting slot stored on your BC account (the server).",jsxRuntimeExports.jsx("br",{}),"These crafts are linked to your BC account and will, as such, persists across different web browsers and BC servers."]})],tooltipPosition:"left",tooltipRole:"description"},{button:{attributes:{"aria-label":"Show MBS extra crafting slot description","aria-disabled":"true"},dataAttributes:{type:"account"},children:[jsxRuntimeExports.jsx("span",{"aria-hidden":"true",id:IDs$1.buttonMBS,children:"MBS"})]}});const e=document.getElementById(CraftingID.menuBar);e&&ElementMenu.AppendButton(e,t)}const{maxBC:r,maxMBSServer:n}=getSegmentSizes();CraftingSlot<r?(e.replaceChildren(),t.hidden=!0):CraftingSlot<r+n?(e.replaceChildren("MBS (Account): "),t.hidden=!1,t.setAttribute("data-type","account")):(e.replaceChildren("MBS (Browser): "),t.hidden=!1,t.setAttribute("data-type","browser"))}var _JSON_instances,_JSON_phoneticDict,_JSON_gagData,_JSON_phoneticDictInit,_JSON_gagDataInit,_JSON_setField;waitForBC("crafting",{async afterLoad(){logger.log("Initializing crafting hooks");const{maxBC:e,maxMBSServer:t,maxMBSLocal:r}=getSegmentSizes();MBS_MOD_API.patchFunction("CraftingClick",{[`if (CraftingOffset < 0) CraftingOffset = ${e} - 20;`]:`if (CraftingOffset < 0) CraftingOffset = ${e+t+r} - 20;`,[`if (CraftingOffset >= ${e}) CraftingOffset = 0;`]:`if (CraftingOffset >= ${e+t+r}) CraftingOffset = 0;`}),MBS_MOD_API.patchFunction("CraftingRun",{["/ ${"+e.toString()+" / 20}."]:`/ ${(e+t+r)/20}.`,'TextGet("SelectDestroy")':`(CraftingOffset >= ${e} ? (CraftingOffset >= ${e+t} ? 'MBS (Browser): ' : 'MBS (Account): ') : '') + TextGet("SelectDestroy")`,'TextGet("SelectSlot")':`(CraftingOffset >= ${e} ? (CraftingOffset >= ${e+t} ? 'MBS (Browser): ' : 'MBS (Account): ') : '') + TextGet("SelectSlot")`}),MBS_MOD_API.patchFunction("CraftingJSON.encode",{[`const max = Math.max(${e}, crafts.length);`]:`const max = Math.max(${e+t+r}, crafts.length);`}),MBS_MOD_API.patchFunction("CraftingJSON.eventListeners.changeFile",{[`}).slice(0, ${e});`]:`}).slice(0, ${e+t+r});`}),MBS_MOD_API.hookFunction("CraftingModeSet",0,([e,...t],r)=>{const n=r([e,...t]);return"Name"===e&&loadCraftingNameDOM(),n})},async afterMBS(){logger.log("Initializing crafting cache"),document.getElementById(IDs$1.style)||document.body.append(jsxRuntimeExports.jsx("style",{id:IDs$1.style,children:styles$4.toString()}));const{maxBC:e,maxMBSServer:t,maxMBSLocal:r}=getSegmentSizes(),n=openDB(Player.MemberNumber);padArray(Player.Crafting,e+t+r,null);for(const[r,a]of(await loadAllCraft(n)).entries())Player.Crafting[r+e+t]=a;n.close({disableAutoOpen:!1}),MBS_MOD_API.hookFunction("CraftingSaveServer",0,(a,o)=>{if(lodashExports.inRange(CraftingSlot,e+t,e+t+r)){const r=CraftingSlot-e-t,a=Player.Crafting[CraftingSlot];return void saveCraft(n,r,a)}const i=Player.Crafting;Player.Crafting=i?.slice(0,e),o(a),Player.Crafting=i,0===CraftingSlot&&"Name"!==CraftingMode&&saveAllCraft(n,Player.Crafting.slice(e+t,e+t+r))}),MBS_MOD_API.hookFunction("CraftingExit",0,(e,t)=>("Slot"===CraftingMode&&n.close({disableAutoOpen:!1}),t(e))),null!=Player.MBSSettings.CraftingCache&&(migrateCraftingCache(Player,Player.MBSSettings.CraftingCache),Player.MBSSettings.CraftingCache=void 0,pushMBSSettings([SettingsType.SETTINGS]))}});let JSON$1=class{constructor(){_JSON_instances.add(this),_JSON_phoneticDict.set(this,Object.freeze({})),_JSON_gagData.set(this,Object.freeze({})),_JSON_phoneticDictInit.set(this,!1),_JSON_gagDataInit.set(this,!1)}get gagData(){return __classPrivateFieldGet(this,_JSON_gagDataInit,"f")||__classPrivateFieldGet(this,_JSON_instances,"m",_JSON_setField).call(this,"gagData","https://bananarama92.github.io/MBS/devel/vendor/gag_data.json"),__classPrivateFieldGet(this,_JSON_gagData,"f")}get phoneticDict(){return __classPrivateFieldGet(this,_JSON_phoneticDictInit,"f")||__classPrivateFieldGet(this,_JSON_instances,"m",_JSON_setField).call(this,"phoneticDict","https://bananarama92.github.io/MBS/devel/vendor/en_US.json"),__classPrivateFieldGet(this,_JSON_phoneticDict,"f")}init(){this.gagData,this.phoneticDict}};_JSON_phoneticDict=new WeakMap,_JSON_gagData=new WeakMap,_JSON_phoneticDictInit=new WeakMap,_JSON_gagDataInit=new WeakMap,_JSON_instances=new WeakSet,_JSON_setField=async function(e,t){const r=await fetch(t).then(t=>t.ok?(logger.debug(`Successfully fetched '${e}' json`,t),t.json()):(logger.debug(`Failed to fetch '${e}' json`,t),Promise.resolve(null))).catch(e=>(logger.error(e),null));if(null!==r)switch(e){case"phoneticDict":__classPrivateFieldSet(this,_JSON_phoneticDict,Object.freeze(r),"f"),__classPrivateFieldSet(this,_JSON_phoneticDictInit,!0,"f");break;case"gagData":__classPrivateFieldSet(this,_JSON_gagData,Object.freeze(r),"f"),__classPrivateFieldSet(this,_JSON_gagDataInit,!0,"f");break;default:throw new Error(`Invalid type: ${e}`)}};const json=new JSON$1,GagLevel=Object.freeze({LIGHT:3,MEDIUM:6,HEAVY:9,KILO_HEAVY:12,MEGA_HEAVY:15,GIGA_HEAVY:18,MAX:21}),PHONEMES_SYMBOLS_EN_US=Object.freeze(new Set(["a","a","b","d","d","e","f","h","i","j","k","m","n","o","p","s","t","t","u","v","w","z","","","","","","","","","","","","","","","","","",""])),LETTER_REGEX=/\p{L}/u;function wordToIPA(e){const t=e.toLowerCase(),r=json.phoneticDict[t];if(void 0===r)return;const n=range(0,r.length).map(e=>[]);for(const e of zip(r,n)){const[t,r]=e;let n=0;for(;n<t.length;){const e=t[n],a=t.slice(n,n+2);PHONEMES_SYMBOLS_EN_US.has(a)?(r.push(a),n+=2):(r.push(e),n+=1)}}return n}function dropTrailingChars(e,t){const{level:r,levelMax:n,levelMin:a,maxFrac:o}=t;if(r<a)return e;const i=Array.from(e),s=Math.max(o,o*(r-a)/(n-a)),l=Math.floor(i.length*s);return e.slice(0,i.length-l).padEnd(i.length-Math.floor(l/2))}function parseOptions(e,t){let r=e=>e;if(null!=e?.dropChars){const n={level:t,levelMin:e.dropChars.levelMin??GagLevel.HEAVY,levelMax:e.dropChars.levelMax??GagLevel.MAX,maxFrac:e.dropChars.maxFrac??.5};r=e=>dropTrailingChars(e,n)}return{dropChars:r,character:e?.character??null,fallback:e?.fallback??(e=>MBS_MOD_API.callOriginal("SpeechGarbleByGagLevel",[e[1],e[0],e[2]])),ignoreOOC:e?.ignoreOOC??!1,perSyllable:e?.perSyllable??!1}}function getGagData(e,t,r=null){if(e&&e.HasEffect("OpenMouth")&&!e.HasEffect("BlockMouth"))return json.gagData["Ring Gag"]??{};e:if(null!==r){const e=Math.floor(t/3);if(0===e)break e;t/3-e>r.syllable/r.syllableMax&&(t=3*(1+e))}return t<=GagLevel.LIGHT?json.gagData["Cleave Gag"]??{}:t<=GagLevel.MEDIUM?json.gagData["Ball Gag"]??{}:json.gagData["Dildo Gag"]??{}}function sentenceCutOOC(e,t=!1){const r=SpeechGetOOCRanges(e).values();let n=r.next();if(n.done||t)return[{words:e,ooc:!1}];const a=[];let o=0;for(;!n.done;){const t=n.value.start,i=t+n.value.length;a.push({words:e.slice(o,t),ooc:!1}),a.push({words:e.slice(t,i),ooc:!0}),n=r.next(),o=i}return a.push({words:e.slice(o),ooc:!1}),a}function convertToGagSpeak(e,t,r=null){const{dropChars:n,fallback:a,character:o,ignoreOOC:i,perSyllable:s}=parseOptions(r,t);let l="";const c=sentenceCutOOC(e,i);for(const e of c){if(e.ooc){l+=e.words;continue}let r="",i=[];const c=e.words.length-1;for(const[u,d]of Array.from(e.words).entries()){const e=LETTER_REGEX.test(d);if(e&&(r+=d,i.push(d.toUpperCase()===d),u<c))continue;const h=wordToIPA(r);if(h){const e=n(h.flatMap((e,r)=>{const n=s?{syllable:r+1,syllableMax:h.length}:null,a=getGagData(o,t,n);return e.map(e=>a[e]?.SOUND??"")}).join(""));i.every(Boolean)?l+=e.toUpperCase():i[0]&&e.length>0?l+=`${e[0].toUpperCase()}${e.slice(1)}`:l+=e}else l+=a([r,t]);r="",i=[],e||(l+=a([d,t]))}}return l}waitForBC("garbling",{async afterMBS(){logger.log("Initializing garbling module"),MBS_MOD_API.patchFunction("SpeechTransformProcess",{"text = SpeechTransformGagGarble(text, intensity, ignoreOOC);":"text = SpeechTransformGagGarble(text, intensity, ignoreOOC, C);"}),MBS_MOD_API.hookFunction("SpeechTransformGagGarble",0,([e,t,r,...n],a)=>{const o=n[0];if(t&&e&&Player.MBSSettings.AlternativeGarbling){return convertToGagSpeak(e,t,{dropChars:Player.MBSSettings.DropTrailing?{}:void 0,perSyllable:Player.MBSSettings.GarblePerSyllable,fallback:a,ignoreOOC:r,character:o})}return a([e,t,r,...n])})}});const MAX_DATA=18e4;function measureDataSize(e){const t=[],r=CommonIsObject(e)?e:{};for(const[e,n]of Object.entries(r))try{const r=JSON.stringify(n??"");t.push([e,(new TextEncoder).encode(r).byteLength])}catch{t.push([e,NaN])}return Object.fromEntries(t.sort(([e,t],[r,n])=>{t=Math.round(t/100),n=Math.round(n/100);const a=Number.isNaN(t),o=Number.isNaN(n);return t===n||a&&o?e.localeCompare(r):a||o?o?-1:1:n-t}))}function byteToKB(e){return Math.round(e/100)/10}const SettingsType=Object.freeze({SETTINGS:0,SHARED:1});function detectUpgrade(e){if(void 0===e)return logger.log("Detecting first-time MBS initialization"),!1;const t=Version.fromVersion(MBS_VERSION);let r;try{r=Version.fromVersion(e)}catch(t){return logger.warn(`Failed to parse previous MBS version: ${e}`,t),!1}return t.greater(r)?(logger.log(`Upgrading MBS from ${e} to ${MBS_VERSION}`),!0):!!t.lesser(r)&&(logger.warn(`Downgrading MBS from ${e} to ${MBS_VERSION}`),!1)}function showSettingsError(e){const t=fromEntries(entries(e).map(([e,t])=>[e,t.map(e=>e.join(", "))])),r=`Encountered one or more errors while parsing MBS settings:\n\n${JSON.stringify(t,void 0,4)}`;"number"==typeof Player.MemberNumber&&ServerAccountBeep({MemberNumber:Player.MemberNumber,MemberName:"MBS",ChatRoomName:"MBS Settings Error",Private:!0,Message:r,ChatRoomSpace:"",BeepType:""})}function parseFWObjects(e,t,r){Array.isArray(t)?t.length>MBS_MAX_SETS&&(trimArray(t,MBS_MAX_SETS),r.push([`Trimming too long wheel of fortune item list: ${t.length}/${MBS_MAX_SETS}`])):(t=[],r.push(["Re-initializing invalid wheel of fortune item list: "+typeof t]));const n=Object.seal(Array(MBS_MAX_SETS).fill(null));return t.forEach((t,a)=>{if(null!==t)try{(n[a]=e(n,t)).register(!1)}catch(e){r.push([`Failed to load corrupted custom wheel of fortune item ${a}`,e])}}),n}function parsePresetArray(e,t){Array.isArray(e)?e.length>MBS_MAX_ID_SETS&&(trimArray(e,MBS_MAX_ID_SETS),t.push([`Trimming too long wheel of fortune preset list: ${e.length}/${MBS_MAX_ID_SETS}`])):(e=[],t.push(["Re-initializing invalid wheel of fortune preset list: "+typeof e]));const r=Object.seal(Array(MBS_MAX_ID_SETS).fill(null));return e.forEach((e,n)=>{if(null===e)return;if(Array.isArray(e)||"object"!=typeof e||"string"!=typeof e.ids)return void t.push([`Failed to load corrupted custom wheel of fortune preset ${n}`]);const{name:a,ids:o}=e;r[n]={name:"string"==typeof a&&a.length>0&&a.length<=20?a:`Preset ${n}`,ids:o}}),r}function unpackSettings(e,t,r=!0){let n=null;try{if(e&&"string"==typeof e){let t=LZString.decompressFromUTF16(e);t||(t=LZString.decompressFromBase64(e)),n=JSON.parse(t||"null")}}catch(e){r&&logger.warn(`failed to load corrupted MBS ${t}`,e)}return null!==n&&"object"==typeof n?n:{}}function parseProtoSettings(e){const t={AlternativeGarbling:[],CraftingCache:[],DropTrailing:[],FortuneWheelCommands:[],FortuneWheelItemSets:[],FortuneWheelPresets:[],LockedWhenRestrained:[],GarblePerSyllable:[],RollWhenRestrained:[],ShowChangelog:[],Version:[]},r={AlternativeGarbling:!1,DropTrailing:!1,GarblePerSyllable:!1,LockedWhenRestrained:!1,RollWhenRestrained:!0,ShowChangelog:!0};for(const[n,a]of entries(r))void 0!==e[n]&&(typeof e[n]!=typeof a?t[n]=[[`Invalid type, expected a ${typeof a}: ${typeof t[n]}`]]:r[n]=e[n]);const n={AlternativeGarbling:r.AlternativeGarbling,CraftingCache:"string"==typeof e.CraftingCache?e.CraftingCache:void 0,DropTrailing:r.DropTrailing,FortuneWheelCommands:parseFWObjects(FWCommand.fromObject,e.FortuneWheelCommands??[],t.FortuneWheelCommands),FortuneWheelItemSets:parseFWObjects(FWItemSet.fromObject,e.FortuneWheelSets??e.FortuneWheelItemSets??[],t.FortuneWheelItemSets),FortuneWheelPresets:parsePresetArray(e.FortuneWheelPresets??[],t.FortuneWheelPresets),LockedWhenRestrained:r.LockedWhenRestrained,GarblePerSyllable:r.GarblePerSyllable,RollWhenRestrained:r.RollWhenRestrained,ShowChangelog:r.ShowChangelog,Version:MBS_VERSION};n.AlternativeGarbling&&json.init();return{settings:n,ok:0===sumBy(Object.values(t).map(e=>e.length)),err:fromEntries(entries(t).filter(([e,t])=>t.length>0))}}function initMBSSettings(e=null,t=!0){if(void 0===Player.OnlineSharedSettings)throw new Error('"Player.OnlineSharedSettings" still uninitialized');e??={...unpackSettings(Player.OnlineSettings?.MBS,"OnlineSettings"),...unpackSettings(Player.ExtensionSettings.MBS,"ExtensionSettings"),...unpackSettings(Player.OnlineSharedSettings.MBS,"OnlineSharedSettings")};const r=void 0!==e.Version&&detectUpgrade(Player.OnlineSharedSettings.MBSVersion??Player.OnlineSettings?.MBSVersion);let n=!1;void 0!==Player.OnlineSettings?.MBSVersion&&(delete Player.OnlineSettings.MBSVersion,n=!0),Player.OnlineSettings?.MBS&&(delete Player.OnlineSettings.MBS,n=!0),n&&ServerAccountUpdate.QueueData({OnlineSettings:Player.OnlineSettings});const a=parseProtoSettings(e);if((a.ok||t)&&(Player.MBSSettings=a.settings,Player.MBSSettings.ShowChangelog&&r)){const e=Version.fromVersion(MBS_VERSION);showChangelog(`v${e.major}${e.minor}${e.micro}`)}return a.ok||(logger.warn("Encountered and fixed one or more errors while parsing MBS settings",a.err),t&&showSettingsError(a.err)),Player.OnlineSharedSettings.WheelFortune??=WheelFortuneDefault,a}function clearMBSSettings(){delete Player.ExtensionSettings.MBS,void 0!==Player.OnlineSharedSettings&&(delete Player.OnlineSharedSettings.MBSVersion,delete Player.OnlineSharedSettings.MBS,Player.OnlineSharedSettings.WheelFortune=FORTUNE_WHEEL_DEFAULT_BASE),WheelFortuneOption=WheelFortuneOption.filter(e=>!0!==e.Custom),WheelFortuneDefault=FORTUNE_WHEEL_DEFAULT_BASE,Player.Crafting=Player.Crafting.slice(0,"R120"===GameVersion?80:200),Player.MBSSettings=Object.seal({AlternativeGarbling:!1,CraftingCache:void 0,DropTrailing:!1,FortuneWheelCommands:Object.seal(Array(MBS_MAX_SETS).fill(null)),FortuneWheelItemSets:Object.seal(Array(MBS_MAX_SETS).fill(null)),FortuneWheelPresets:Object.seal(Array(MBS_MAX_ID_SETS).fill(null)),GarblePerSyllable:!1,LockedWhenRestrained:!1,RollWhenRestrained:!0,ShowChangelog:!0,Version:MBS_VERSION}),deleteDB(Player.MemberNumber),ServerAccountUpdate.QueueData({ExtensionSettings:Player.ExtensionSettings,OnlineSharedSettings:Player.OnlineSharedSettings},!0),logger.log("Settings successfully reset"),logSettingsSize()}function pushMBSSettings(e,t=!0){if(void 0===Player.OnlineSharedSettings)throw new Error("Player.OnlineSharedSettings is still uninitialized");const r={};if(e.includes(SettingsType.SETTINGS)){const e=omit(Player.MBSSettings,"FortuneWheelItemSets","FortuneWheelCommands");Player.ExtensionSettings.MBS=LZString.compressToUTF16(JSON.stringify(e)),t&&(r["ExtensionSettings.MBS"]=Player.ExtensionSettings.MBS)}if(e.includes(SettingsType.SHARED)){const e=Object.freeze({FortuneWheelItemSets:Player.MBSSettings.FortuneWheelItemSets,FortuneWheelCommands:Player.MBSSettings.FortuneWheelCommands});Player.OnlineSharedSettings.MBS=LZString.compressToUTF16(JSON.stringify(e)),Player.OnlineSharedSettings.MBSVersion=MBS_VERSION,t&&(Player.OnlineSharedSettings.WheelFortune=sanitizeWheelFortuneIDs(Player.OnlineSharedSettings.WheelFortune),r.OnlineSharedSettings=Player.OnlineSharedSettings)}t&&ServerAccountUpdate.QueueData(r)}function logSettingsSize(){const e=["ExtensionSettings","OnlineSharedSettings"];for(const t of e){const e=measureDataSize(Player[t]),r=Object.fromEntries(Object.entries(e).map(([e,t])=>[e,byteToKB(t)])),n=byteToKB(sumBy(Object.values(e),e=>Number.isNaN(e)?0:e));n>=.9*MAX_DATA/1e3?logger.warn(`Total ${t} data usage at ${n} / ${MAX_DATA/1e3} KB`,r):logger.log(`Total ${t} data usage at ${n} / ${MAX_DATA/1e3} KB`,r)}}function exportSettings(){return LZString.compressToBase64(JSON.stringify(Player.MBSSettings))}const SettingsStatus=Object.freeze({OK:0,ERROR:1,EMPTY_SETTINGS:2,WARN:3});function importSettings(e){logger.log("Importing new MBS settings");let t=null,r=null;try{t=JSON.parse(LZString.decompressFromBase64(e.trim())||"{}")}catch(e){r=e}if(r||null===t||"object"!=typeof t||isArray(t))return logger.error("Aborting, failed to parse corrupted MBS settings",r),{status:SettingsStatus.ERROR,ok:!1};if(0===Object.keys(t).length)return logger.error("Aborting, detected empty or corrupted MBS settings"),{status:SettingsStatus.EMPTY_SETTINGS,ok:!1};const n=initMBSSettings(t,!1);return n.ok?(pushMBSSettings([SettingsType.SETTINGS,SettingsType.SHARED],!0),logSettingsSize(),{status:SettingsStatus.OK,...n}):{status:SettingsStatus.WARN,...n}}waitForBC("settings",{async afterLogin(){initMBSSettings(),pushMBSSettings([SettingsType.SETTINGS,SettingsType.SHARED],!1),logger.log("Initializing settings module"),logSettingsSize()}});var styles$3='.mbs-preference-settings-pair {\n  grid-column-gap: min(3dvh, 1.5dvw);\n  display: grid;\n  grid-template-columns: min(9dvh, 4.5dvw) auto;\n  padding-right: min(6dvh, 3dvw);\n  text-align: justify;\n}\n.mbs-preference-settings-pair button {\n  height: min(9dvh, 4.5dvw);\n  width: min(9dvh, 4.5dvw);\n}\n.mbs-preference-settings-pair > p {\n  margin: 0;\n}\n\n#mbs-preference {\n  grid-template: "header header menubar" min(9dvh, 4.5dvw) "settings misc misc" auto/auto min(29dvh, 14.5dvw) min(9dvh, 4.5dvw);\n}\n#mbs-preference p {\n  margin-bottom: 0.5em;\n  margin-top: 0.5em;\n}\n#mbs-preference .button-tooltip {\n  --tooltip-gap: min(2dvh, 1dvw);\n}\n\n#mbs-preference-header {\n  grid-area: header;\n}\n\n#mbs-preference-menubar {\n  direction: ltr;\n  display: grid;\n  grid-area: menubar;\n}\n#mbs-preference-menubar button {\n  height: min(9dvh, 4.5dvw);\n  width: min(9dvh, 4.5dvw);\n}\n\n#mbs-preference-exit {\n  grid-area: exit;\n}\n\n#mbs-preference-settings {\n  display: grid;\n  grid-area: settings;\n  height: 100%;\n  overflow: hidden scroll;\n  grid-gap: min(2dvh, 1dvw);\n}\n\n#mbs-preference-misc {\n  align-self: self-end;\n  grid-area: misc;\n  margin: unset;\n  padding: unset;\n}\n#mbs-preference-misc li {\n  list-style-type: none;\n}\n#mbs-preference-misc li:not(:last-child) {\n  padding-bottom: min(2dvh, 1dvw);\n}\n#mbs-preference-misc button {\n  height: min(9dvh, 4.5dvw);\n  width: 100%;\n}\n#mbs-preference-misc .button-label {\n  font-size: inherit;\n  left: calc(2% + min(90px, 9dvh, 4.5dvw));\n  width: calc(96% - min(90px, 9dvh, 4.5dvw));\n}\n#mbs-preference-misc .button-image {\n  height: min(90px, 9dvh, 4.5dvw);\n  left: 2%;\n  top: 50%;\n  transform: translateY(-50%);\n  width: min(90px, 9dvh, 4.5dvw);\n}\n\n#mbs-preference-reset {\n  grid-area: reset;\n  grid-template-columns: min(40dvh, 20dvw);\n}\n#mbs-preference-reset button:not(:hover) {\n  background-color: pink;\n}\n\n#mbs-preference-import {\n  grid-area: import;\n  grid-template-columns: min(19dvh, 9.5dvw);\n}\n\n#mbs-preference-export {\n  grid-area: export;\n  grid-template-columns: min(19dvh, 9.5dvw);\n}\n\n#mbs-preference-changelog {\n  grid-area: changelog;\n  grid-template-columns: min(40dvh, 20dvw);\n}\n\n#mbs-preference-reset-screen {\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 2;\n}\n\n#mbs-preference-reset-background {\n  background: url("https://bananarama92.github.io/MBS/main/images/SheetMBS.png") var(--mbs-background-color);\n  background-blend-mode: multiply;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: contain;\n  box-sizing: border-box;\n  height: 80%;\n  justify-self: center;\n  mask-image: url("https://bananarama92.github.io/MBS/main/images/SheetMBS.png");\n  mask-position: center;\n  mask-repeat: no-repeat;\n  mask-size: contain;\n  padding: min(6dvh, 3dvw);\n  padding-top: min(3dvh, 1.5dvw);\n  position: relative;\n  width: 80%;\n  word-break: break-word;\n}\n\n#mbs-preference-reset-grid {\n  display: grid;\n  grid-template-columns: auto auto;\n  justify-items: center;\n  padding-top: min(10dvh, 5dvw);\n}\n#mbs-preference-reset-grid .button {\n  height: min(9dvh, 4.5dvw);\n  width: min(27dvh, 13.5dvw);\n}',_MBSPreferenceScreen_instances,_MBSPreferenceScreen_boolSwitch,_MBSPreferenceScreen_settingsImport,_MBSPreferenceScreen_settingsExport,_MBSPreferenceScreen_settingsReset,_MBSPreferenceScreen_startTimer,_MBSPreferenceScreen_resetConfirm,_MBSPreferenceScreen_loadWheel,_MBSPreferenceScreen_lockInputs;class PreferenceScreenProxy extends ScreenProxy{constructor(){super(null,"Character","Preference",{Run:PreferenceRun,Click:PreferenceClick,Exit:PreferenceExit,Load:async()=>{await CommonSetScreen("Character","Preference"),PreferenceOpenSubscreen("Extensions")}})}}PreferenceScreenProxy.screen="Preference";const root="mbs-preference",ID=Object.freeze({root:root,styles:`${root}-style`,header:`${root}-header`,menubar:`${root}-menubar`,exit:`${root}-exit`,exitButton:`${root}-exit-button`,settingsGrid:`${root}-settings`,wheelButton:`${root}-wheel-button`,wheelHeader:`${root}-wheel-header`,miscHeader:`${root}-misc-header`,garbleHeader:`${root}-garble-header`,wheelLabel:`${root}-wheel-label`,rollRestrainedLabel:`${root}-roll-restrained-label`,lockSettingsLabel:`${root}-lock-settings-label`,garbleLabel:`${root}-garble-label`,garbleTrailingLabel:`${root}-garble-trailing-label`,garbleSyllableLabel:`${root}-garble-syllable-label`,extendedCraftLabel:`${root}-extended-craft-label`,changelogLabel:`${root}-changelog-label`,miscGrid:`${root}-misc`,reset:`${root}-reset`,resetButton:`${root}-reset-button`,resetTooltip:`${root}-reset-tooltip`,resetScreen:`${root}-reset-screen`,resetBackground:`${root}-reset-background`,resetGrid:`${root}-reset-grid`,resetAccept:`${root}-reset-accept`,resetCancel:`${root}-reset-cancel`,import:`${root}-import`,export:`${root}-export`,changelog:`${root}-changelog`});class MBSPreferenceScreen extends MBSScreen{constructor(e,t=null){super(e,MBSPreferenceScreen.screenParamsDefault,t),_MBSPreferenceScreen_instances.add(this),document.body.appendChild(jsxRuntimeExports.jsxs("div",{id:ID.root,class:"mbs-screen","aria-labelledby":ID.header,children:[jsxRuntimeExports.jsx("style",{id:ID.styles,children:styles$3.toString()}),jsxRuntimeExports.jsx("h1",{id:ID.header,children:`Maid's Bondage Scripts ${MBS_VERSION}`}),ElementMenu.Create(ID.menubar,[ElementButton.Create(ID.exit,this.exit.bind(this),{image:"Icons/Exit.png",tooltip:"Exit"})],{direction:"rtl"}),jsxRuntimeExports.jsxs("main",{id:ID.settingsGrid,role:"form","aria-label":"Configure MBS",children:[jsxRuntimeExports.jsxs("section",{"aria-labelledby":ID.wheelHeader,children:[jsxRuntimeExports.jsx("h2",{id:ID.wheelHeader,children:"Wheel of fortune settings"}),jsxRuntimeExports.jsxs("p",{class:"mbs-preference-settings-pair",children:[ElementButton.Create(ID.wheelButton,__classPrivateFieldGet(this,_MBSPreferenceScreen_instances,"m",_MBSPreferenceScreen_loadWheel).bind(this),{image:"Icons/Crafting.png"},{button:{attributes:{"aria-labelledby":ID.wheelLabel}}}),jsxRuntimeExports.jsx("span",{id:ID.wheelLabel,children:"Configure the wheel of fortune"})]}),jsxRuntimeExports.jsxs("p",{class:"mbs-preference-settings-pair",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",class:"checkbox",name:"RollWhenRestrained",onClick:__classPrivateFieldGet(this,_MBSPreferenceScreen_instances,"m",_MBSPreferenceScreen_boolSwitch).bind(this),"aria-labelledby":ID.rollRestrainedLabel}),jsxRuntimeExports.jsx("span",{id:ID.rollRestrainedLabel,children:"Allow wheel rolling while restrained"})]}),jsxRuntimeExports.jsxs("p",{class:"mbs-preference-settings-pair",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",class:"checkbox",name:"LockedWhenRestrained",onClick:__classPrivateFieldGet(this,_MBSPreferenceScreen_instances,"m",_MBSPreferenceScreen_boolSwitch).bind(this),"aria-labelledby":ID.lockSettingsLabel}),jsxRuntimeExports.jsx("span",{id:ID.lockSettingsLabel,children:"Lock MBS settings while restrained"})]})]}),jsxRuntimeExports.jsxs("section",{"aria-labelledby":ID.garbleHeader,children:[jsxRuntimeExports.jsx("h2",{id:ID.garbleHeader,children:"Garbling settings"}),jsxRuntimeExports.jsxs("p",{class:"mbs-preference-settings-pair",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",class:"checkbox",name:"AlternativeGarbling",onClick:__classPrivateFieldGet(this,_MBSPreferenceScreen_instances,"m",_MBSPreferenceScreen_boolSwitch).bind(this),"aria-labelledby":ID.garbleLabel}),jsxRuntimeExports.jsxs("span",{id:ID.garbleLabel,children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Experimental"}),": whether gags will use an alternative form of, more phonetically accurate, speech garbling based on ",jsxRuntimeExports.jsx("a",{href:"https://github.com/CordeliaMist/Dalamud-GagSpeak",target:"_blank",children:"Dalamud-GagSpeak"})]}),jsxRuntimeExports.jsxs("p",{children:["Incompatible-ish with ",jsxRuntimeExports.jsx("a",{href:"https://wce-docs.vercel.app/docs/intro",target:"_blank",children:"WCE/FBC"}),"'s garbling anti-cheat as of the moment"]})]})]}),jsxRuntimeExports.jsxs("p",{class:"mbs-preference-settings-pair",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",class:"checkbox",name:"DropTrailing",onClick:__classPrivateFieldGet(this,_MBSPreferenceScreen_instances,"m",_MBSPreferenceScreen_boolSwitch).bind(this),"aria-labelledby":ID.garbleTrailingLabel}),jsxRuntimeExports.jsx("span",{id:ID.garbleTrailingLabel,children:"Whether to heaviest gags will drop up to half of all trailing characters when alternate garbling is enabled"})]}),jsxRuntimeExports.jsxs("p",{class:"mbs-preference-settings-pair",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",class:"checkbox",name:"GarblePerSyllable",onClick:__classPrivateFieldGet(this,_MBSPreferenceScreen_instances,"m",_MBSPreferenceScreen_boolSwitch).bind(this),"aria-labelledby":ID.garbleSyllableLabel}),jsxRuntimeExports.jsx("span",{id:ID.garbleSyllableLabel,children:"Interpolate between the three alternative garbling levels, allowing for a more gradual increase in garbling strength (on a syllable by syllable basis) as the gag level increases"})]})]}),jsxRuntimeExports.jsxs("section",{"aria-labelledby":ID.miscHeader,children:[jsxRuntimeExports.jsx("h2",{id:ID.miscHeader,children:"Misc settings"}),jsxRuntimeExports.jsxs("div",{class:"mbs-preference-settings-pair",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",class:"checkbox",name:"ShowChangelog",onClick:__classPrivateFieldGet(this,_MBSPreferenceScreen_instances,"m",_MBSPreferenceScreen_boolSwitch).bind(this),"aria-labelledby":ID.changelogLabel}),jsxRuntimeExports.jsx("span",{id:ID.changelogLabel,children:"Show the MBS changelog in chat whenever a new MBS version is released"})]})]})]}),jsxRuntimeExports.jsxs("menu",{id:ID.miscGrid,children:[jsxRuntimeExports.jsx("li",{children:ElementButton.Create(ID.resetButton,__classPrivateFieldGet(this,_MBSPreferenceScreen_instances,"m",_MBSPreferenceScreen_settingsReset).bind(this),{image:"Icons/ServiceBell.png",label:"Reset MBS",tooltip:"Clear all MBS data",labelPosition:"center"})}),jsxRuntimeExports.jsx("li",{children:ElementButton.Create(ID.import,__classPrivateFieldGet(this,_MBSPreferenceScreen_instances,"m",_MBSPreferenceScreen_settingsImport).bind(this),{image:"Icons/Upload.png",label:"Import",tooltip:"Import MBS settings",labelPosition:"center"})}),jsxRuntimeExports.jsx("li",{children:ElementButton.Create(ID.export,__classPrivateFieldGet(this,_MBSPreferenceScreen_instances,"m",_MBSPreferenceScreen_settingsExport).bind(this),{image:"Icons/Download.png",label:"Export",tooltip:"Export MBS settings",labelPosition:"center"})}),jsxRuntimeExports.jsx("li",{children:ElementButton.Create(ID.changelog,()=>open(getChangeLogURL(),"_blank"),{image:"Icons/Changelog.png",label:"Latest Changes",tooltip:"Open the MBS changelog",labelPosition:"center"})})]})]})),document.body.appendChild(jsxRuntimeExports.jsx("div",{id:ID.resetScreen,class:"mbs-screen","screen-generated":MBSPreferenceScreen.screen,children:jsxRuntimeExports.jsxs("div",{id:ID.resetBackground,children:[jsxRuntimeExports.jsx("h1",{children:"MBS data reset"}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("strong",{children:"- Warning -"})}),jsxRuntimeExports.jsxs("p",{children:["If you confirm, ",jsxRuntimeExports.jsx("i",{children:"all"})," MBS data (including settings, overrides, and current states) will be permanently reset!"]}),jsxRuntimeExports.jsx("p",{children:"You will be able to continue using MBS, but all of your configuration will be reset to default!"}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("strong",{children:"This action cannot be undone!"})}),jsxRuntimeExports.jsxs("div",{id:ID.resetGrid,children:[ElementButton.Create(ID.resetAccept,()=>__classPrivateFieldGet(this,_MBSPreferenceScreen_instances,"m",_MBSPreferenceScreen_resetConfirm).call(this),{disabled:!0,label:"Confirm (10)"}),ElementButton.Create(ID.resetCancel,()=>this.exit(),{label:"Cancel"})]})]})}))}async load(){__classPrivateFieldGet(this,_MBSPreferenceScreen_instances,"m",_MBSPreferenceScreen_lockInputs).call(this),super.load()}draw(){DrawCharacter(Player,50,50,.9)}exit(){const e=document.getElementById(ID.resetScreen);e.hidden?(super.exit(),this.exitScreens(!1)):e.hidden=!0}}let preferenceState;var _MBSObject_children,_FWObject_instances,_FWObject_registerFindStart;_MBSPreferenceScreen_instances=new WeakSet,_MBSPreferenceScreen_boolSwitch=function(e){const t=e.target.name;if(t in Player.MBSSettings)switch(Player.MBSSettings[t]=!Player.MBSSettings[t],pushMBSSettings([SettingsType.SETTINGS]),t){case"AlternativeGarbling":Player.MBSSettings[t]&&json.init();break;case"LockedWhenRestrained":__classPrivateFieldGet(this,_MBSPreferenceScreen_instances,"m",_MBSPreferenceScreen_lockInputs).call(this)}},_MBSPreferenceScreen_settingsImport=function(){const e=prompt("Please paste MBS settings.\nImporting settings will overwrite existing settings. Are you sure?");if(!e)return;const t=importSettings(e);switch(t.status){case SettingsStatus.OK:return logger.log("Settings successfully updated"),alert("Settings successfully updated!");case SettingsStatus.ERROR:return alert("ERROR: Detected corrupted MBS settings.\nNo changes were made.");case SettingsStatus.EMPTY_SETTINGS:return alert("ERROR: Detected empty or corrupted MBS settings.\nNo changes were made.");case SettingsStatus.WARN:return void(confirm("WARNING: MBS successfully parsed the settings but found one or more invalid fields; please check the browser console for more details.\nAre you sure you want to continue?")&&(Player.MBSSettings=t.settings,pushMBSSettings([SettingsType.SETTINGS,SettingsType.SHARED],!0),logSettingsSize(),logger.log("Settings successfully updated"),alert("Settings successfully updated!")));default:throw new Error(`Unknown status type: ${t.status}`)}},_MBSPreferenceScreen_settingsExport=function(){const e=exportSettings();navigator.clipboard.writeText(e),alert("MBS settings copied to clipboard.")},_MBSPreferenceScreen_settingsReset=function(){const e=document.getElementById(ID.resetScreen),t=document.getElementById(ID.resetAccept);e.hidden=!1,t.disabled=!0,__classPrivateFieldGet(this,_MBSPreferenceScreen_instances,"m",_MBSPreferenceScreen_startTimer).call(this,t)},_MBSPreferenceScreen_startTimer=async function(e){const t=e.querySelector(".button-label");let r=9;for(;r>=0;)await new Promise(e=>setTimeout(e,1e3)),t?.replaceChildren(`Confirm (${r})`),r--;t?.replaceChildren("Confirm"),e.disabled=!1},_MBSPreferenceScreen_resetConfirm=function(){clearMBSSettings(),this.exit()},_MBSPreferenceScreen_loadWheel=async function(){const e={FortuneWheelItemSets:loadFortuneWheelObjects(Player,"FortuneWheelItemSets","item sets"),FortuneWheelCommands:loadFortuneWheelObjects(Player,"FortuneWheelCommands","commands")},[t,r,n,a]=this.screenParams[this.ids.root].shape,o={[FWSelectScreen.ids.root]:{shape:[95,r,n+(t-95),a]}};this.loadChild(FWSelectScreen,e,Player,o)},_MBSPreferenceScreen_lockInputs=function(){const e=Player.IsRestrained()&&Player.MBSSettings.LockedWhenRestrained;for(const t of document.querySelectorAll(`#${ID.settingsGrid} input[type="checkbox"]`))t.name in Player.MBSSettings&&(t.checked=Player.MBSSettings[t.name],t.disabled=e)},MBSPreferenceScreen.screen="MBS_PreferenceScreen",MBSPreferenceScreen.ids=ID,MBSPreferenceScreen.screenParamsDefault={[root]:Object.freeze({shape:[525,75,1380,850],visibility:"visible"}),[ID.resetScreen]:Object.freeze({shape:[0,0,2e3,1e3],visibility:"hidden"})},waitForBC("settings_screen",{async afterLoad(){preferenceState=new PreferenceScreenProxy,PreferenceRegisterExtensionSetting({Identifier:"MBS",load(){preferenceState.loadChild(MBSPreferenceScreen)},run(){},click(){},exit(){},ButtonText:"MBS Settings",Image:"Icons/Maid.png"})}});const ITEM_SET_CATEGORY_ID_RANGE=256,ITEM_SET_FLAG_COUNT=16,MBS_MAX_SETS=32,MBS_MAX_ID_SETS=8,FORTUNE_WHEEL_COLORS=Object.freeze(["Blue","Gold","Gray","Green","Orange","Purple","Red","Yellow"]);function validateCharacter(e){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "character" type: '+typeof e);if(!e.IsSimple()&&!e.IsPlayer())throw new Error("Expected a simple or player character")}function canChangeCosplay(e){if(!(e.OnlineSharedSettings?.BlockBodyCosplay??!0))return!0;const t=BCX_MOD_API.getRuleState("alt_allow_changing_appearance");return!(null===t||!e.IsPlayer())&&(t.inEffect&&t.isEnforced&&(t.customData?.minimumRole??-1)>3)}function sanitizeWheelFortuneIDs(e){if("string"!=typeof e)throw new TypeError('Invalid "IDs" type: '+typeof e);let t="";for(const r of WheelFortuneOption)e.includes(r.ID)&&(t+=r.ID);return t}function settingsMBSLoaded(){return"undefined"!=typeof Player&&void 0!==Player.MBSSettings}const DEFAULT_ITEM_SET_INDEX=Object.freeze({"PSO Bondage":0,Mummification:1,"Bondage Maid":2,Petrification:3});class MBSSelectedObject{constructor(e,t){this.name=null,this.mbsList=e,this.weight=Number.isInteger(t)?clamp(t,1,9):1}reset(){this.name=null,this.weight=1}isValid(e=null){return!!this.name&&this.mbsList.every((t,r)=>r===e||t?.name!==this.name)}toString(){return toStringTemplate(typeof this,this.toJSON())}}class FWSelectedItemSet extends MBSSelectedObject{get stripLevel(){return this.stripIter.value}set stripLevel(e){const t=this.stripIter.list.indexOf(e);this.stripIter.setPosition(t)}get equipLevel(){return this.equipIter.value}set equipLevel(e){const t=this.equipIter.list.indexOf(e);this.equipIter.setPosition(t)}constructor(e,t){super(e,t),this.itemList=null,this.flags=Object.freeze(DEFAULT_FLAGS.map(e=>Object.seal({...e}))),this.outfitCache=null,this.stripIter=new LoopIterator([StripLevel.NONE,StripLevel.CLOTHES,StripLevel.UNDERWEAR,StripLevel.COSPLAY],StripLevel.UNDERWEAR),this.equipIter=new LoopIterator([StripLevel.NONE,StripLevel.CLOTHES,StripLevel.UNDERWEAR,StripLevel.COSPLAY],StripLevel.UNDERWEAR),this.activeHooks=new Map}reset(){super.reset(),this.itemList=null,this.outfitCache=null,this.stripLevel=StripLevel.UNDERWEAR,this.equipLevel=StripLevel.UNDERWEAR,this.activeHooks.clear(),DEFAULT_FLAGS.forEach((e,t)=>Object.assign(this.flags[t],e))}readSettings(e){if(!(e instanceof FWItemSet))throw new TypeError('Invalid "ItemSet" type: '+typeof e);this.name=e.name,this.itemList=e.itemList,this.stripLevel=e.stripLevel,this.equipLevel=e.equipLevel,this.outfitCache=null,this.weight=e.weight,this.activeHooks.clear();for(const[t,r]of Object.entries(e.activeHooks))this.activeHooks.set(t,{...r,kwargs:new Map(Object.entries(r.kwargs))});e.flags.forEach((e,t)=>Object.assign(this.flags[t],e))}writeSettings(e=!1){let t=this.name;if(e&&(t??="preview"),null===t||null===this.itemList)throw new Error('Cannot create an ItemSet while "name" or "itemList" is null');const r={};for(const[e,t]of this.activeHooks)r[e]={...t,kwargs:Object.fromEntries(t.kwargs),get kwargsConfig(){return wheelHookRegister.get(this.modName,this.hookType,this.hookName)?.kwargs??{}}};return new FWItemSet(t,this.itemList,this.mbsList,this.stripLevel,this.equipLevel,this.flags,!0,this.weight,r)}loadFromBase64(){if(null===this.outfitCache)return!1;let e,t;try{e=JSON.parse(LZString.decompressFromBase64(this.outfitCache.trim())),t=fromItemBundles(e)}catch(e){return logger.warn("Failed to parse outfit code:",e),!1}return 0!==t.length&&(this.itemList=Object.freeze(fortuneItemsSort(t)),!0)}isValid(e=null){return super.isValid(e)&&null!==this.itemList&&this.flags.some(e=>e.enabled)}toJSON(){const e={};for(const[t,r]of this.activeHooks){const n={};for(const[e,t]of r.kwargs)if("select-multiple"===t.type)n[e]={...t,value:Array.from(t.value)};else n[e]=t;e[t]={...r,kwargs:n}}return{name:this.name,itemList:this.itemList,stripLevel:this.stripLevel,equipLevel:this.equipLevel,flags:this.flags,outfitCache:this.outfitCache,activeHooks:e}}}class FWSelectedCommand extends MBSSelectedObject{readSettings(e){if(!(e instanceof FWCommand))throw new TypeError('Invalid "command" type: '+typeof e);this.name=e.name,this.weight=e.weight}writeSettings(){if(null===this.name)throw new Error('Cannot create a Command while "name" is null');return new FWCommand(this.name,this.mbsList,this.weight)}toJSON(){return{name:this.name}}}class MBSObject{get children(){return __classPrivateFieldGet(this,_MBSObject_children,"f")}get index(){return this.mbsList.findIndex(e=>e===this)}constructor(e,t,r,n){_MBSObject_children.set(this,null),this.name=e,this.custom=t,this.mbsList=r,this.weight=n}static validate(e){throw new Error("Trying to call an abstract method")}static fromObject(...e){throw new Error("Trying to call an abstract method")}register(){__classPrivateFieldSet(this,_MBSObject_children,this.toOptions(),"f")}unregister(){__classPrivateFieldSet(this,_MBSObject_children,null,"f")}toString(){return toStringTemplate(typeof this,this.toJSON())}}_MBSObject_children=new WeakMap;class FWObject extends MBSObject{constructor(){super(...arguments),_FWObject_instances.add(this)}register(e=!0){super.register();let t=__classPrivateFieldGet(this,_FWObject_instances,"m",_FWObject_registerFindStart).call(this);for(const e of this.children){const r=WheelFortuneOption.findIndex(t=>t.ID===e.ID);-1!==r?(WheelFortuneOption[r]=e,e.Default&&!WheelFortuneDefault.includes(e.ID)&&(WheelFortuneDefault+=e.ID)):(WheelFortuneOption.splice(t,0,e),e.Default&&(WheelFortuneDefault+=e.ID)),t+=1}e&&pushMBSSettings([SettingsType.SHARED])}unregister(e=!0){const t=this.children?.map(e=>e.ID)??[];super.unregister(),WheelFortuneOption=WheelFortuneOption.filter(e=>!t.includes(e.ID)),WheelFortuneDefault=Array.from(WheelFortuneDefault).filter(e=>!t.includes(e)).join(""),e&&pushMBSSettings([SettingsType.SHARED])}}function validateFlags(e){return DEFAULT_FLAGS.map((t,r)=>{const n=e[r];if(null===n||"object"!=typeof n||n.type!==t.type)return{...t};const a="boolean"==typeof n.enabled?n.enabled:t.enabled;switch(n.type){case"TimerPasswordPadlock":return Number.isInteger(n.time)&&n.time>=1&&n.time<=86400?{type:n.type,description:t.description,time:n.time,enabled:a}:{...t};case"ExclusivePadlock":case"HighSecurityPadlock":case null:return{type:n.type,description:t.description,enabled:a};default:return{...t}}})}_FWObject_instances=new WeakSet,_FWObject_registerFindStart=function(){if(this.children?.length){const e=this.children[0].ID,t=WheelFortuneOption.findIndex(t=>t.ID>=e);return-1===t?WheelFortuneOption.length:t}return WheelFortuneOption.length};class FWItemSet extends FWObject{constructor(e,t,r,n,a,o,i,s,l){const c=FWItemSet.validate({name:e,itemList:t,mbsList:r,stripLevel:n,equipLevel:a,flags:o,custom:i,weight:s,activeHooks:l});super(c.name,c.custom,c.mbsList,c.weight),this.itemList=c.itemList,this.stripLevel=c.stripLevel,this.equipLevel=c.equipLevel,this.flags=c.flags,this.activeHooks=c.activeHooks}static validate(e){if("string"!=typeof e.name)throw new TypeError('Invalid "name" type: '+typeof e.name);if(!isArray(e.itemList))throw new TypeError('Invalid "itemList" type: '+typeof e.itemList);{const t=[],r=[];for(let n of e.itemList){const e=AssetGet("Female3DCG",n.Group,n.Name);null!=e?(e.Group.IsItem()||e.Group.IsAppearance()&&e.Group.AllowNone)&&(n.TypeRecord||void 0===n.Type||(n=Object.freeze({...omit(n,"Type"),TypeRecord:ExtendedItemTypeToRecord(e,n.Type)})),t.push(n)):r.push(`${n.Group}:${n.Name}`)}e.itemList=Object.freeze(t),0!==r.length&&logger.warn(`Found ${r.length} items in wheel of fortune item set "${this.name}": ${r}`)}if(!isArray(e.mbsList))throw new TypeError('Invalid "mbsList" type: '+typeof e.mbsList);if(includes(Object.values(StripLevel),e.stripLevel)||(e.stripLevel=StripLevel.UNDERWEAR),includes(Object.values(StripLevel),e.equipLevel)||(e.stripLevel=StripLevel.UNDERWEAR),isArray(e.flags)){let t;if(e.flags.every(e=>"string"==typeof e)){t=parseLegacyFlags(e.flags)}else t=validateFlags(e.flags);t.every(e=>!e.enabled)&&(t[0].enabled=!0),e.flags=Object.freeze(t.map(e=>Object.freeze(e)))}else e.flags=DEFAULT_FLAGS;return"boolean"!=typeof e.custom&&(e.custom=!0),Number.isInteger(e.weight)?e.weight=clamp(e.weight,1,9):e.weight=1,CommonIsObject(e.activeHooks)?e.activeHooks=validateHooks(e.activeHooks,wheelHookRegister):e.activeHooks={},e}static fromObject(e,t){const r=[t.name,t.itemList,e,t.stripLevel,t.equipLevel,t.flags,t.custom,t.weight,t.activeHooks];return new FWItemSet(...r)}scriptFactory(e,t){const r=this.itemList.map(({Name:e,Group:t})=>AssetGet(Player.AssetFamily,t,e));return n=>{n??=Player;const a=WheelFortuneCharacter??n,o=getStripCondition(this.equipLevel,n),i=this.itemList.filter((e,t)=>{const n=r[t];return null!=n&&("Appearance"!==n.Group.Category||o(n))});fortuneWheelEquip(this.name,i,this.stripLevel,n,t,e,a)}}getIDs(){const e=[];for(const[t,r]of this.flags.entries())r.enabled&&e.push(t);let t;if(this.custom){if(t=(2+Math.floor(this.index/16))*ITEM_SET_CATEGORY_ID_RANGE+this.index*ITEM_SET_FLAG_COUNT,t<0)throw new Error(`Item set "${this.name}" absent from currently selected fortune wheel sets`)}else if(t=ITEM_SET_CATEGORY_ID_RANGE+DEFAULT_ITEM_SET_INDEX[this.name]*ITEM_SET_FLAG_COUNT,Number.isNaN(t))throw new Error(`Unknown default item set "${this.name}"`);return generateIDs(t,e)}toOptions(){const e=this.flags.filter(e=>e.enabled),t=this.getIDs();return e.map((e,r)=>{const n=null===e.type?this.name:`${this.name}: ${getFlagDescription(e)}`;let a=!0;switch(e.type){case"HighSecurityPadlock":case null:a=!1;break;case"TimerPasswordPadlock":a=4!==r}return{ID:t[r],Color:sample(FORTUNE_WHEEL_COLORS),Script:this.scriptFactory(e,this.activeHooks),Description:n,Default:a,Custom:this.custom,Parent:this,Flag:e,Weight:this.weight}})}toJSON(){const e={};for(const[t,r]of Object.entries(this.activeHooks)){const n={};for(const[e,t]of Object.entries(r.kwargs))if("select-multiple"===t.type)n[e]={...t,value:Array.from(t.value)};else n[e]=t;e[t]={...r,kwargs:n}}return{name:this.name,itemList:this.itemList,stripLevel:this.stripLevel,equipLevel:this.equipLevel,flags:this.flags,custom:this.custom,weight:this.weight,activeHooks:e}}}class FWCommand extends FWObject{constructor(e,t,r){const n=FWCommand.validate({name:e,mbsList:t,weight:r});super(n.name,!0,n.mbsList,n.weight)}static validate(e){if("string"!=typeof e.name)throw new TypeError('Invalid "name" type: '+typeof e.name);if(!Array.isArray(e.mbsList))throw new TypeError('Invalid "mbsList" type: '+typeof e.mbsList);return Number.isInteger(e.weight)?e.weight=clamp(e.weight,1,9):e.weight=1,e}static fromObject(e,t){const r=[t.name,e,t.weight];return new FWCommand(...r)}toOptions(){const[e]=this.getIDs();return[{ID:e,Color:sample(FORTUNE_WHEEL_COLORS),Description:this.name,Default:!0,Custom:this.custom,Parent:this,Script:void 0,Flag:void 0,Weight:this.weight}]}getIDs(){const e=(3+Math.floor(this.index/16))*ITEM_SET_CATEGORY_ID_RANGE+this.index;return[String.fromCharCode(e)]}toJSON(){return{name:this.name,weight:this.weight}}}function getFWIDs(...e){const t=[];for(const r of e)for(const e of r)null!==e&&t.push(...e.getIDs());return new Set(t)}function createWeightedWheelIDs(e){const t=Array.from(e).flatMap(e=>{const t=WheelFortuneOption.find(t=>t.ID===e);return void 0===t?[]:Array(t.Weight??1).fill(e)});if(0===t.length)return"";const r=[];for(;r.length<50;)r.push(...sortBy(t,Math.random));return r.join("")}let MBSAPIDummy=null;function getDummyChar(){return null===MBSAPIDummy&&(MBSAPIDummy=CharacterLoadSimple("MBSAPI")),MBSAPIDummy}const getAll=function(){if(!settingsMBSLoaded())return logger.error("MBS not fully loaded yet"),{};const e=Player.MBSSettings.FortuneWheelItemSets,t={};for(const[r,n]of e.entries())null!==n&&(t[n.name]={name:n.name,index:r,items:toItemBundles(n.itemList,getDummyChar())});return t},getByName=function(e){if("string"!=typeof e)throw new TypeError('Invalid "name" type: '+typeof e);if(!settingsMBSLoaded())return void logger.error("MBS not fully loaded yet");let t=-1;const r=Player.MBSSettings.FortuneWheelItemSets.find((r,n)=>{const a=r?.name===e;return a&&(t=n),a});return null==r?void 0:{name:e,index:t,items:toItemBundles(r.itemList,getDummyChar())}},getByIndex=function(e){if("number"!=typeof e)throw new TypeError('Invalid "index" type: '+typeof e);if(!settingsMBSLoaded())return void logger.error("MBS not fully loaded yet");const t=Player.MBSSettings.FortuneWheelItemSets[e];return null==t?void 0:{name:t.name,index:e,items:toItemBundles(t.itemList,getDummyChar())}},getNames=function(){return settingsMBSLoaded()?Player.MBSSettings.FortuneWheelItemSets.filter(e=>null!==e).map(e=>e.name):(logger.error("MBS not fully loaded yet"),[])},getIndices=function(){return settingsMBSLoaded()?Player.MBSSettings.FortuneWheelItemSets.filter(e=>null!==e).map((e,t)=>t):(logger.error("MBS not fully loaded yet"),[])};var wheel_outfits=Object.freeze({__proto__:null,getAll:getAll,getByIndex:getByIndex,getByName:getByName,getIndices:getIndices,getNames:getNames});const FIELD_MAPPING=Object.freeze({backgroundColor:"--mbs-background-color",buttonColor:"--mbs-button-color",buttonHoverColor:"--mbs-hover-color",tooltipColor:"--mbs-tooltip-color",borderColor:"--mbs-border-color",textColor:"--mbs-text-color"}),DEFAULT_STYLE=Object.freeze({backgroundColor:"white",buttonColor:"white",buttonHoverColor:"cyan",tooltipColor:"lightyellow",borderColor:"black",textColor:"black"}),setStyle=function(e){if("object"!=typeof e)throw new TypeError(`Invalid style type: "${typeof e}"`);if(null===e)throw new Error("Invalid style value: null");const t=document.querySelector(":root");if(t)for(const[r,n]of entries(FIELD_MAPPING)){const a=e[r];void 0!==a&&t.style.setProperty(n,a)}else logger.error(":root selector missing in document")},getStyle=function(){const e=document.querySelector(":root");return e?fromEntries(entries(FIELD_MAPPING).map(([t,r])=>[t,e.style.getPropertyValue(r)||DEFAULT_STYLE[t]])):(logger.error(":root selector missing in document"),{...DEFAULT_STYLE})};var css=Object.freeze({__proto__:null,DEFAULT_STYLE:DEFAULT_STYLE,getStyle:getStyle,setStyle:setStyle});const ALLOWED_HOOK_TYPES=Object.freeze(new Set(["beforeOutfitEquip","validateItemEquip","beforeItemEquip","afterItemEquip","afterOutfitEquip"])),addEventListener$1=function(e,t,r){if(!ALLOWED_HOOK_TYPES.has(e))throw new Error(`Invalid hook type "${e}"`);const n=bcModSdk.getModsInfo().find(e=>e.name===t);if(!n)throw new Error(`Addon "${t}" is not registered in bcModSdk`);if("mbs"===t.normalize().toLowerCase())throw new Error('Cannot register event listener to addon "MBS"');const a={...lodashExports.pick(r,"listener","hookName","label","description","kwargs"),conditional:!0,showConfig:!0};wheelHookRegister.addEventListener(e,n,a)},listEventListeners=function(){const e={};for(const t of wheelHookRegister.values()){const r=t.hookType;ALLOWED_HOOK_TYPES.has(t.hookType)&&(e[t.registrationData.name]??={},(e[t.registrationData.name][r]??=new Set).add(t.hookName))}return e};var wheel_events=Object.freeze({__proto__:null,addEventListener:addEventListener$1,listEventListeners:listEventListeners});const API_VERSION=Object.freeze({major:1,minor:5});function jsonStringifier(e,t){return t instanceof Set?Array.from(t):t instanceof Map?Object.fromEntries(t):t instanceof Error?{...t}:t instanceof Date?t.toString():t}const getDebug=function(){return settingsMBSLoaded()?JSON.stringify({log:logger,settings:Player.MBSSettings},jsonStringifier,4):JSON.stringify({log:logger,settings:"ERROR: MBS not fully loaded yet"},void 0,4)};waitForBC("api",{async afterLogin(){"undefined"!=typeof FUSAM&&"function"==typeof FUSAM.registerDebugMethod&&FUSAM.registerDebugMethod("mbs",getDebug)}});const RAISES="raises",PASSES="passes";function assert(e,t,r){if(!t)throw void 0===r?new Error(`${e}`):new Error(`${e}: ${r}`)}function assertRaises(e,t,r){try{t()}catch(t){const n=t;if(n?.message!==r)throw new Error(`${e}: Invalid error message\nExpected error: "${r}"\nObserved error: "${n?.message}"`);return}throw new Error(`${e}: Failed to raise an error`)}function assertPasses(e,t){try{return t()}catch(t){throw new Error(`${e}: Unexpected error message: ${t}`,{cause:t})}}function assertEqual(e,t,r,n){if(n=n??stringify,!isEqual(t,r))throw new Error(`${e}: Passed objects not equal:\nObserved: ${n(t)}\nExpected: ${n(r)}`)}function assertNotEqual(e,t,r,n){if(n=n??stringify,isEqual(t,r))throw new Error(`${e}: Passed objects equal:\nObserved: ${n(t)}\nNot expected: ${n(r)}`)}function assertIncludes(e,t,r){if(!t.includes(r))throw new Error(`${e}: Passed array ${t} does not contain element ${r?.toString()??r}`)}function assertTypeof(e,t,r){if(typeof t!==r)throw new Error(`${e}: Invalid object type "${typeof t}", expected "${r}"`)}function assertLength(e,t,r){if(t.length!==r)throw new Error(`${e}: Invalid object length ${t.length}, expected ${r}`)}function _replacer(e,t){switch(typeof t){case"undefined":return"__UNDEFINED__";case"function":return"__FUNCTION__";case"symbol":return"__SYMBOL__";default:return t}}function stringify(e){return JSON.stringify(e,_replacer,1)}var testing_tools=Object.freeze({__proto__:null,PASSES:PASSES,RAISES:RAISES,assert:assert,assertEqual:assertEqual,assertIncludes:assertIncludes,assertLength:assertLength,assertNotEqual:assertNotEqual,assertPasses:assertPasses,assertRaises:assertRaises,assertTypeof:assertTypeof,stringify:stringify});function test_validateInt(){const e="test_validateInt";[{args:[.5,"test"],excMessage:'"test" must be an integer: 0.5'},{args:["test","test"],excMessage:'Invalid "test" type: string'},{args:[5,"test",10],excMessage:'"test" must fall in the [10, Infinity] interval: 5'},{args:[5,"test",0,3],excMessage:'"test" must fall in the [0, 3] interval: 5'}].forEach(({args:t,excMessage:r},n)=>{assertRaises(`${e}:${RAISES}:${n}`,()=>validateInt(...t),r)}),assertPasses(`${e}:${PASSES}:0`,()=>validateInt(0,"test"))}function test_padArray(){const e="test_padArray";[{args:[[],.5,null],excMessage:'"n" must be an integer: 0.5'},{args:[void 0,5,null],excMessage:'Invalid "list" type: undefined'}].forEach(({args:t,excMessage:r},n)=>{assertRaises(`${e}:${RAISES}:${n}`,()=>padArray(...t),r)});[{args:[["a","b","c"],5,"test"],output:["a","b","c","test","test"]},{args:[["a","b","c"],2,"test"],output:["a","b","c"]}].forEach(({args:t,output:r},n)=>{const a=assertPasses(`${e}:${PASSES}:${n}`,()=>padArray(...t));assertEqual(`${e}:${PASSES}:${n}`,a,r)})}function test_trimArray(){const e="test_trimArray";[{args:[[],.5],excMessage:'"n" must be an integer: 0.5'},{args:[void 0,5],excMessage:'Invalid "list" type: undefined'}].forEach(({args:t,excMessage:r},n)=>{assertRaises(`${e}:${RAISES}:${n}`,()=>trimArray(...t),r)});[{args:[["a","b","c"],1],output:["a"]},{args:[["a","b","c"],4],output:["a","b","c"]}].forEach(({args:t,output:r},n)=>{const a=assertPasses(`${e}:${PASSES}:${n}`,()=>trimArray(...t));assertEqual(`${e}:${PASSES}:${n}`,a,r)})}function test_getRandomPassword(){const e="test_getRandomPassword";[{args:[void 0],excMessage:'Invalid "n" type: undefined'}].forEach(({args:t,excMessage:r},n)=>{assertRaises(`${e}:${RAISES}:${n}`,()=>getRandomPassword(...t),r)}),range(0,9).forEach(t=>{const r=assertPasses(`${e}:${PASSES}:${t}`,()=>getRandomPassword(t));assertTypeof(`${e}:${PASSES}:${t}`,r,"string"),assertLength(`${e}:${PASSES}:${t}`,r,t)})}function test_MBS_VERSION(){assertTypeof(`test_MBS_VERSION:${PASSES}:0`,MBS_VERSION,"string")}function test_LoopIterator(){const e="test_LoopIterator";[{args:[void 0],excMessage:'Invalid "iterable" type: undefined'},{args:[[]],excMessage:'Passed "iterable" must contain at least one element'},{args:[[1],.5],excMessage:'"index" must be an integer: 0.5'},{args:[[0,1],3],excMessage:'"index" must fall in the [0, 1] interval: 3'}].forEach(({args:t,excMessage:r},n)=>{assertRaises(`${e}:constructor:${RAISES}:${n}`,()=>new LoopIterator(...t),r)});const t=new LoopIterator([0,1,2,3],0);let r;assertEqual(`${e}:list:${PASSES}:0`,t.list,[0,1,2,3]),assertEqual(`${e}:index:${PASSES}:0`,t.index,0),assertEqual(`${e}:value:${PASSES}:0`,t.index,0),assertTypeof(`${e}:[Symbol.iterator]:${PASSES}:0`,t[Symbol.iterator],"function"),r=assertPasses(`${e}:next:${PASSES}:0`,()=>t.next(!1)),assertEqual(`${e}:next:${PASSES}:0`,r,1),assertEqual(`${e}:next:${PASSES}:0`,t.index,0),r=assertPasses(`${e}:next:${PASSES}:0`,()=>t.next()),assertEqual(`${e}:next:${PASSES}:0`,r,1),assertEqual(`${e}:next:${PASSES}:0`,t.index,1),assertRaises(`${e}:setPosition:${RAISES}:0`,()=>t.setPosition(10),'"index" must fall in the [0, 3] interval: 10'),assertPasses(`${e}:setPosition:${PASSES}:0`,()=>t.setPosition(0)),assertEqual(`${e}:setPosition:${PASSES}:0`,t.index,0),r=assertPasses(`${e}:previous:${PASSES}:0`,()=>t.previous(!1)),assertEqual(`${e}:previous:${PASSES}:0`,r,3),assertEqual(`${e}:previous:${PASSES}:0`,t.index,0),r=assertPasses(`${e}:previous:${PASSES}:0`,()=>t.previous()),assertEqual(`${e}:previous:${PASSES}:0`,r,3),assertEqual(`${e}:previous:${PASSES}:0`,t.index,3),r=assertPasses(`${e}:toString:${PASSES}:0`,()=>t.toString()),assertTypeof(`${e}:toString:${PASSES}:0`,r,"string"),r=assertPasses(`${e}:toJSON:${PASSES}:0`,()=>t.toJSON()),assertEqual(`${e}:toJSON:${PASSES}:0`,t.toJSON(),{list:[0,1,2,3],index:3})}function test_generateIDs(){const e="test_generateIDs";[{args:[0,void 0],excMessage:'Invalid "indices" type: undefined'},{args:[65535,[5]],excMessage:'"stop" must fall in the [65536, 65535] interval: 65541'}].forEach(({args:t,excMessage:r},n)=>{assertRaises(`${e}:${RAISES}:${n}`,()=>generateIDs(...t),r)});[{args:[80,[0,4,6]],output:["P","T","V"]},{args:[1024,[0,4,1]],output:["","",""]},{args:[0,[]],output:[]}].forEach(({args:t,output:r},n)=>{const a=assertPasses(`${e}:${PASSES}:${n}`,()=>generateIDs(...t));assertEqual(`${e}:${PASSES}:${n}`,a,r)})}function test_isIterable(){const e="test_isIterable";[{args:[null],output:!1},{args:[1],output:!1},{args:[[1]],output:!0},{args:[new Set],output:!0}].forEach(({args:t,output:r},n)=>{const a=assertPasses(`${e}:${PASSES}:${n}`,()=>isIterable(...t));assertEqual(`${e}:${PASSES}:${n}`,a,r)})}function test_Version(){const e="test_Version";[{args:["bob",0,0,!1],excMessage:'Invalid "major" type: string'},{args:[0,"bob",0,!1],excMessage:'Invalid "minor" type: string'},{args:[0,0,"bob",!1],excMessage:'Invalid "micro" type: string'},{args:[0,0,0,"bob"],excMessage:'Invalid "beta" type: string'}].forEach(({args:t,excMessage:r},n)=>{assertRaises(`${e}:constructor:${RAISES}:${n}`,()=>new Version(...t),r)});const t=new Version(1,0,5),r=new Version(2,3,1),n=new Version(0,99,5,!0);assertEqual(`${e}:major:${PASSES}:0`,t.major,1),assertEqual(`${e}:minor:${PASSES}:0`,t.minor,0),assertEqual(`${e}:micro:${PASSES}:0`,t.micro,5),assertEqual(`${e}:beta:${PASSES}:0`,t.beta,!1),assert(`${e}:equal:${PASSES}:0`,!t.equal(null)),assert(`${e}:equal:${PASSES}:1`,t.equal(t)),assert(`${e}:equal:${PASSES}:2`,!t.equal(r)),assert(`${e}:equal:${PASSES}:3`,!t.equal(n)),assert(`${e}:greater:${PASSES}:0`,!t.greater(null)),assert(`${e}:greater:${PASSES}:1`,!t.greater(t)),assert(`${e}:greater:${PASSES}:2`,!t.greater(r)),assert(`${e}:greater:${PASSES}:3`,t.greater(n)),assert(`${e}:lesser:${PASSES}:0`,!t.lesser(null)),assert(`${e}:lesser:${PASSES}:1`,!t.lesser(t)),assert(`${e}:lesser:${PASSES}:2`,t.lesser(r)),assert(`${e}:lesser:${PASSES}:3`,!t.lesser(n)),assert(`${e}:greaterOrEqual:${PASSES}:0`,!t.greaterOrEqual(null)),assert(`${e}:greaterOrEqual:${PASSES}:1`,t.greaterOrEqual(t)),assert(`${e}:greaterOrEqual:${PASSES}:2`,!t.greaterOrEqual(r)),assert(`${e}:greaterOrEqual:${PASSES}:3`,t.greaterOrEqual(n)),assert(`${e}:lesserOrEqual:${PASSES}:0`,!t.lesserOrEqual(null)),assert(`${e}:lesserOrEqual:${PASSES}:1`,t.lesserOrEqual(t)),assert(`${e}:lesserOrEqual:${PASSES}:2`,t.lesserOrEqual(r)),assert(`${e}:lesserOrEqual:${PASSES}:3`,!t.lesserOrEqual(n));let a=assertPasses(`${e}:fromVersion:${PASSES}:0`,()=>Version.fromVersion("1.0.5"));assertEqual(`${e}:fromVersion:${PASSES}:0`,a,t),assertRaises(`${e}:fromVersion:${RAISES}:0`,()=>Version.fromVersion(void 0),'Invalid "version": undefined'),a=assertPasses(`${e}:fromVersion:${PASSES}:0`,()=>Version.fromBCVersion("R109Beta3")),assertEqual(`${e}:fromVersion:${PASSES}:0`,a,new Version(109,0,0,!0)),assertRaises(`${e}:fromVersion:${RAISES}:0`,()=>Version.fromVersion(void 0),'Invalid "version": undefined'),a=assertPasses(`${e}:toString:${PASSES}:0`,()=>t.toString()),assertTypeof(`${e}:toString:${PASSES}:0`,a,"string"),a=assertPasses(`${e}:toJSON:${PASSES}:0`,()=>t.toJSON()),assertEqual(`${e}:toJSON:${PASSES}:0`,a,{major:1,minor:0,micro:5,beta:!1})}var test_common=Object.freeze({__proto__:null,test_LoopIterator:test_LoopIterator,test_MBS_VERSION:test_MBS_VERSION,test_Version:test_Version,test_generateIDs:test_generateIDs,test_getRandomPassword:test_getRandomPassword,test_isIterable:test_isIterable,test_padArray:test_padArray,test_trimArray:test_trimArray,test_validateInt:test_validateInt});function test_FORTUNE_WHEEL_COLORS(){const e="test_FORTUNE_WHEEL_COLORS";assert(`${e}:${PASSES}:0`,Array.isArray(FORTUNE_WHEEL_COLORS)),assert(`${e}:${PASSES}:0`,FORTUNE_WHEEL_COLORS.every(e=>"string"==typeof e))}function test_FORTUNE_WHEEL_MAX_SETS(){const e="test_FORTUNE_WHEEL_MAX_SETS";assertTypeof(`${e}:${PASSES}:0`,MBS_MAX_SETS,"number"),assert(`${e}:${PASSES}:0`,Number.isInteger(MBS_MAX_SETS)),assert(`${e}:${PASSES}:0`,MBS_MAX_SETS>=0)}function test_canChangeCosplay(){const e="test_canChangeCosplay",t=range(0,3).map(t=>`${e}${t}`),r=t.map(e=>{const t=CharacterLoadSimple(e);return t.OnlineSharedSettings=t.OnlineSharedSettings??{},t});try{r[1].OnlineSharedSettings={...r[1].OnlineSharedSettings??{},BlockBodyCosplay:!1},r[2].OnlineSharedSettings={...r[1].OnlineSharedSettings??{},BlockBodyCosplay:!0};[{args:[r[0]],output:!1},{args:[r[1]],output:!0},{args:[r[2]],output:!1}].forEach(({args:t,output:r},n)=>{const a=assertPasses(`${e}:${PASSES}:${n}`,()=>canChangeCosplay(...t));assertEqual(`${e}:${PASSES}:${n}`,a,r)})}finally{r.forEach(e=>CharacterDelete(e))}}function test_sanitizeWheelFortuneIDs(){const e="test_sanitizeWheelFortuneIDs";assertRaises(`${e}:${RAISES}:0`,()=>sanitizeWheelFortuneIDs(void 0),'Invalid "IDs" type: undefined');[{args:["ABC"],output:"ABC"},{args:["A"],output:"A"}].forEach(({args:t,output:r},n)=>{const a=assertPasses(`${e}:${PASSES}:${n}`,()=>sanitizeWheelFortuneIDs(...t));assertEqual(`${e}:${PASSES}:${n}`,a,r)})}function test_equipTimerLock(){const e="test_equipTimerLock",t=CharacterLoadSimple(e);try{const r=AssetGet(t.AssetFamily,"ItemArms","LatexArmbinder");if(null==r)throw new Error;const n={Asset:r};assertRaises(`${e}:${RAISES}:0`,()=>equipTimerLock(n,void 0,t),'Invalid "seconds" type: undefined'),assertPasses(`${e}:${PASSES}:0`,()=>equipTimerLock(n,99,t)),assert(`${e}:${PASSES}:0`,(n.Property?.RemoveTimer??1/0)<=CurrentTime+198e4),assertEqual(`${e}:${PASSES}:0`,n.Property?.RemoveItem,!0),assertEqual(`${e}:${PASSES}:0`,n.Property?.LockSet,!0),assertTypeof(`${e}:${PASSES}:0`,n.Property?.Password,"string")}finally{CharacterDelete(t)}}function test_equipHighSecLock(){const e="test_equipHighSecLock",t=CharacterLoadSimple(e);try{const r=AssetGet(t.AssetFamily,"ItemArms","LatexArmbinder");if(null==r)throw new Error;const n={Asset:r};assertPasses(`${e}:${PASSES}:0`,()=>equipHighSecLock(n,t)),assertEqual(`${e}:${PASSES}:0`,n.Property?.MemberNumberListKeys,"")}finally{CharacterDelete(t)}}function test_equipLock(){const e="test_equipLock",t=range(0,5).map(t=>`${e}-${t}`),r=t.map(CharacterLoadSimple);try{r[4].PermissionItems["ItemMisc/ExclusivePadlock"]=PreferencePermissionGetDefault(),r[4].PermissionItems["ItemMisc/ExclusivePadlock"].Permission="Block",InventoryWear(r[2],"LatexArmbinder","ItemArms"),InventoryLock(r[2],r[2].Appearance.at(-1),"ExclusivePadlock");const t=AssetGet(r[0].AssetFamily,"ItemArms","LatexArmbinder"),n=AssetGet(r[0].AssetFamily,"ItemArms","NylonRope");if(null==t||null==n)throw new Error;const a={Asset:t};[{args:["bob","ExclusivePadlock",r[0]],excMessage:'Invalid "item" type: string'},{args:[a,0,r[0]],excMessage:'Invalid "lockName" type: number'},{args:[a,"bob",r[0]],excMessage:'Invalid "lockName" value: bob'},{args:[a,"ExclusivePadlock",1],excMessage:'Invalid "character" type: number'}].forEach(({args:t,excMessage:r},n)=>{assertRaises(`${e}:${RAISES}:${n}`,()=>equipLock(...t),r)});[{args:[a,"ExclusivePadlock",r[1]],output:!0},{args:[a,"ExclusivePadlock",r[2]],output:!1},{args:[{Asset:n},"ExclusivePadlock",r[3]],output:!1},{args:[a,"ExclusivePadlock",r[4]],output:!1}].forEach(({args:t,output:r},n)=>{const a=assertPasses(`${e}:${PASSES}:${n}`,()=>equipLock(...t));assertEqual(`${e}:${PASSES}:0`,a,r)})}finally{r.forEach(e=>CharacterDelete(e))}}function test_settingsMBSLoaded(){const e="test_settingsMBSLoaded",t=assertPasses(`${e}:${PASSES}:0`,settingsMBSLoaded);assertEqual(`${e}:${PASSES}:0`,t,!0)}var test_common_bc=Object.freeze({__proto__:null,test_FORTUNE_WHEEL_COLORS:test_FORTUNE_WHEEL_COLORS,test_FORTUNE_WHEEL_MAX_SETS:test_FORTUNE_WHEEL_MAX_SETS,test_canChangeCosplay:test_canChangeCosplay,test_equipHighSecLock:test_equipHighSecLock,test_equipLock:test_equipLock,test_equipTimerLock:test_equipTimerLock,test_sanitizeWheelFortuneIDs:test_sanitizeWheelFortuneIDs,test_settingsMBSLoaded:test_settingsMBSLoaded});const OptionFilters=Object.freeze({Mummification:e=>({...e,TypeRecord:void 0})});function test_builtinMBSWheel(){const e="test_builtinMBSWheel",t=flatten(Object.values(FORTUNE_WHEEL_ITEM_SETS).map(e=>e.children??[])),r=t.map(e=>e.Description),n=r.map(e=>CharacterLoadSimple(e));try{t.forEach(t=>{if(!(t.Parent instanceof FWItemSet))return;const r=CharacterLoadSimple(t.Description);t.Script(r);for(let n of t.Parent.itemList){const a=InventoryGet(r,n.Group);if(void 0!==n.Equip)continue;assert(`${e}:${t.Description}:${n.Group}:${n.Name}:${PASSES}`,null!=a);const o=OptionFilters[t.Parent.name]??(e=>e),i=o(fromItemBundle(a.Asset,{...a,Group:a.Asset.Group.Name,Name:a.Asset.Name,Color:void 0===n.Color?void 0:a.Color},!1),r);null!==i&&(n={...n,Property:{...i.Property,...n.Property},Equip:void 0,Craft:void 0!==n.Craft&&"HighSecurityPadlock"===t.Flag.type&&InventoryDoesItemAllowLock(a)?{...n.Craft,Property:"Puzzling"}:n.Craft},assertEqual(`${e}:${t.Description}:${n.Group}:${n.Name}:${PASSES}`,i,n))}})}finally{n.forEach(e=>CharacterDelete(e))}}var test_fortune_wheel=Object.freeze({__proto__:null,test_builtinMBSWheel:test_builtinMBSWheel});const runTests=function(){if(!settingsMBSLoaded())return logger.warn("MBS not fully loaded yet"),!1;const e={...test_common,...test_common_bc,...test_fortune_wheel},t={};for(const[r,n]of entries(e))try{n()}catch(e){t[r]=e}return 0===Object.values(t).length||(logger.warn(t),!1)};var styles$2=":root {\n  --mbs-background-color: white;\n  --mbs-button-color: white;\n  --mbs-hover-color: cyan;\n  --mbs-tooltip-color: lightyellow;\n  --mbs-border-color: black;\n  --mbs-text-color: black;\n  --mbs-font-small: min(3.5dvh, 1.75dvw);\n  --mbs-font-large: min(5dvh, 2.5dvw);\n  --mbs-font-family: arial, sans-serif;\n}\n\n.mbs-timer {\n  height: min(6dvh, 3dvw);\n  text-align: center;\n  width: min(21dvh, 10.5dvw);\n}\n\n.mbs-screen {\n  display: grid;\n  position: fixed;\n  text-align: center;\n  user-select: none;\n  grid-gap: min(2dvh, 1dvw);\n  color: var(--mbs-text-color);\n  font-family: var(--mbs-font-family);\n  font-size: var(--mbs-font-small);\n}\n.mbs-screen .button,\n.mbs-screen .custom-select {\n  --button-color: var(--mbs-button-color);\n  --hover-color: var(--mbs-hover-color);\n}\n.mbs-screen .button-styling,\n.mbs-screen .button-tooltip {\n  border-color: var(--mbs-border-color);\n}\n.mbs-screen h1, .mbs-screen h2, .mbs-screen h3, .mbs-screen h4, .mbs-screen h5, .mbs-screen h6, .mbs-screen [role=heading], .mbs-screen p, .mbs-screen ul {\n  align-items: center;\n  align-self: center;\n}\n.mbs-screen h1 {\n  font-size: var(--mbs-font-large);\n}\n.mbs-screen h2 {\n  margin: min(1dvh, 0.5dvw);\n}\n.mbs-screen ul {\n  margin: 0;\n  text-align: left;\n}\n.mbs-screen input {\n  background-color: var(--mbs-background-color);\n  box-sizing: border-box;\n  color: var(--mbs-text-color);\n  font: inherit;\n  font-family: var(--mbs-font-family);\n  font-size: var(--mbs-font-small);\n  padding: unset;\n}\n.mbs-screen input:invalid {\n  background-color: #fbb;\n  box-shadow: 0 0 3px 2px #c22;\n}\n.mbs-screen input[type=checkbox] {\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  cursor: pointer;\n  height: min(7dvh, 3.5dvw);\n  width: min(7dvh, 3.5dvw);\n}\n.mbs-screen input[type=checkbox]:hover {\n  background-color: var(--mbs-hover-color);\n}\n.mbs-screen input[type=checkbox]:disabled {\n  background-color: color-mix(in srgb, var(--mbs-background-color) 60%, black 40%);\n  cursor: auto;\n}\n.mbs-screen input[type=checkbox]::before {\n  height: min(4.6dvh, 2.3dvw);\n  width: min(4.6dvh, 2.3dvw);\n}\n.mbs-screen select {\n  background-color: var(--mbs-button-color);\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  box-sizing: border-box;\n  color: var(--mbs-text-color);\n  cursor: pointer;\n  font: inherit;\n  font-family: var(--mbs-font-family);\n  font-size: var(--mbs-font-small);\n  text-overflow: ellipsis;\n}\n.mbs-screen select:disabled {\n  background-color: color-mix(in srgb, var(--mbs-background-color) 60%, black 40%);\n  cursor: auto;\n}\n.mbs-screen label:not(:has(:disabled)) > span {\n  cursor: pointer;\n}\n.mbs-screen .button,\n.mbs-screen .button-tooltip {\n  border-width: min(0.3dvh, 0.15dvw);\n}";waitForBC("backgrounds",{async afterLoad(){const e={[`${FWItemSetScreen.screen}Background`]:FWItemSetScreen.background,[`${FWCommandScreen.screen}Background`]:FWCommandScreen.background,[`${FWSelectScreen.screen}Background`]:FWSelectScreen.background,[`${MBSPreferenceScreen.screen}Background`]:MBSPreferenceScreen.background,[`${WheelPresetScreen.screen}Background`]:WheelPresetScreen.background},t=globalThis;Object.assign(t,e)}});var styles$1="/* stylelint-disable no-empty-source */";const BC_NEXT=BC_MIN_VERSION+1,backportIDs=new Set;waitForBC("backport",{async afterLoad(){if("R122"===GameVersion)"E2407218"===MBS_MOD_API.getOriginalHash("ColorPickerReload")&&"2222E0A5"===MBS_MOD_API.getOriginalHash("ItemColorLoad")&&(backportIDs.add(6036),MBS_MOD_API.patchFunction("ColorPickerReload",{"ColorPicker.setColor(fieldset, { colorString: singularColor, opacity: singularOpacity }, { overrideEditOpacity: true });":"ColorPicker.setColor(fieldset, { colorString: singularColor, opacity: singularOpacity }, { overrideEditOpacity: true, dispatch: options.dispatch });"}),ColorPicker.setColor=eval(`(() => function ${ColorPicker.setColor.toString()})()`),MBS_MOD_API.patchFunction("ColorPicker.setColor",{'fieldset.dispatchEvent(new CustomEvent("input", { detail: { source: outputInput.name } }));':'if (options.dispatch ?? true) { fieldset.dispatchEvent(new CustomEvent("input", { detail: { source: outputInput.name } })); }'}),MBS_MOD_API.patchFunction("ItemColorLoad",{"await ColorPickerInit({ shape });":"await ColorPickerInit({ shape, dispatch: false });"})),"518C2598"===MBS_MOD_API.getOriginalHash("ItemColorNextColor")&&(backportIDs.add(6033),MBS_MOD_API.patchFunction("ItemColorNextColor",{"const newColors = [...ItemColorState.colors];":";","colorIndicesToSet.forEach(i => newColors[i] = ItemColorState.defaultColors[i]);":"colorIndicesToSet.forEach(i => ItemColorItem.Color[i] = ItemColorState.colors[i] = ItemColorState.defaultColors[i]);","colorIndicesToSet.forEach(i => newColors[i] = nextColor);":"colorIndicesToSet.forEach(i => ItemColorItem.Color[i] = ItemColorState.colors[i] = nextColor);","ItemColorItem.Color = newColors;":";"})),backportIDs.add(6035),ServerPlayerChatRoom.register({screen:"GameMagicBattle"},{screen:"GameClubCard"});document.getElementById("mbs-backport-style")||document.body.append(jsxRuntimeExports.jsx("style",{id:"mbs-backport-style",children:styles$1.toString()})),backportIDs.size?logger.log(`Initializing R${BC_NEXT} backports`,sortBy(Array.from(backportIDs))):logger.log(`No R${BC_NEXT} backports`)}});var AnkletLeft$1={BandAnklet:"R111",HeelBinders:"R111",LegFur:"R111",Ribbon:"R111",Ribbon1:"R111"},AnkletRight$1={BandAnklet:"R111",HeelBinders:"R111",LegFur:"R111",Ribbon:"R111",Ribbon1:"R111"},ArmsLeft$1={"":"R111"},ArmsRight$1={"":"R111"},Blush$1={Blush:"R98"},BodyLower$1={Large:"R98",Normal:"R98",Small:"R98",XLarge:"R98"},BodyMarkings$1={BodyWritings:"R103",FacePaints:"R111",FaceScars:"R109",Splatters:"R114",WombTattoos:"R101"},BodyStyle$1={EchoV1:"R117",EchoV2:"R118",Original:"R117"},BodyUpper$1={FlatMedium:"R98",FlatSmall:"R98",Large:"R98",Normal:"R98",Small:"R98",XLarge:"R98"},Bra$1={Bandage:"R117",Bandeau1:"R98",Bikini1:"R98",BondageBra1:"R98",Bra1:"R98",Bra10:"R98",Bra2:"R98",Bra7:"R98",Bra8:"R98",Bra9:"R98",BunnySuit:"R98",Bustier1:"R98",Camisole:"R98",ChineseBra1:"R98",ClamShell:"R98",CoconutBra:"R98",CorsetBikini1:"R98",CowPrintedBra:"R98",CuteBikini1:"R98",DominatrixLeotard:"R98",FishnetBikini1:"R98",FlowerBra:"R98",FrameBra1:"R98",FrameBra2:"R98",FullLatexBra:"R98",FullLatexBra2:"R98",HaremBra:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeartTop:"R98",KittyBra1:"R98",LatexBra1:"R98",LatexBunnySuit:"R98",LeatherBreastBinder:"R98",LeatherBunnyHollowBra:"R117",LeatherStrapBra1:"R98",LeatherVestSuit:"R104",MaidBra:"R117",MaidBra1:"R98",MeshTop:"R113",OrnateMetalBra:"R116",OuvertPerl1:"R98",Ribbons:"R98",Sarashi1:"R98",SatinCorset:"R117",SexyBeachBra1:"R98",SexyBikini1:"R98",SexyBikini2:"R98",SexyBikini3:"R98",SexyBikiniBra1:"R98",ShinyLeotard:"R114",SleevelessSlimLatexLeotard:"R98",SportBra:"R120",SportSwimsuit:"R120",StarHarnessBra:"R98",StrapBra:"R98",StuddedHarness:"R98",Swimsuit1:"R98",Swimsuit2:"R98",Swimsuit3:"R98"},Bracelet$1={Band1:"R98",BowBand:"R98",KinkBracelet:"R98",LaceBands:"R98",LesBand:"R98",SpikeBands:"R98",WristWatch:"R103",Wristband:"R98"},Cloth$1={AdmiralTop:"R98",AdultBabyDress1:"R98",AdultBabyDress2:"R98",AdultBabyDress3:"R98",AdultBabyDress4:"R98",AnimeGirl:"R106",BabydollDress1:"R98",BartenderVest:"R115",BartenderVestM:"R115",Blouse1:"R98",Bodice1:"R98",BodyTowel1:"R98",BondageBustier1:"R98",BondageBustier2:"R98",BondageDress1:"R98",BondageDress2:"R98",BridesmaidDress1:"R98",BusinessSuit:"R101",ButtonShirt:"R98",CheerleaderTop:"R98",ChineseDress1:"R98",ChineseDress2:"R98",CocktailDress:"R116",CollegeOutfit1:"R98",ComfyTop:"R98",CorsetDress:"R101",CorsetShirt:"R98",CropTop:"R98",CustomTShirt:"R103",Dress2:"R98",Dress3:"R98",DressFur:"R98",EveningGown:"R102",FishnetTop:"R98",FlowerDress:"R98",FrilledShirt:"R98",FurCoat:"R98",FuzzyDress:"R98",Gown1:"R98",Gown2Top:"R98",Gown3:"R98",GrandMage:"R98",HeavyLeatherDress:"R102",Hoodie:"R98",Jacket:"R98",LaceBabydoll:"R98",LatexHobbleDress:"R106",LatexLacedSuit:"R98",LatexTankTop:"R98",LatexTop:"R98",Laurel:"R98",LeatherBolero:"R98",LeatherCorsetTop1:"R98",LeatherCropTop:"R98",MaidApron1:"R98",MaidApron2:"R98",MaidBikini:"R116",MaidLatex:"R101",MaidOutfit1:"R98",MaidOutfit2:"R98",MaleTankTop1:"R98",MeshTop:"R113",MistressTop:"R98",NunRobes:"R104",NurseUniform:"R98",OffTheShoulderTop:"R119",RetroGirdle:"R98",ReverseBunnySuit:"R98",RibbonCorset:"R112",Robe1:"R98",SeethroughTop:"R98",ShoulderlessTop:"R98",SlaveRags:"R98",SleevelessTop:"R98",SteampunkCorsetTop1:"R98",StudentOutfit1:"R98",StudentOutfit2:"R98",StudentOutfit3:"R98",SummerDress:"R98",SuspenderTop1:"R98",Sweater1:"R98",TShirt1:"R98",TShirt2:"R98",TeacherOutfit1:"R98",TennisShirt1:"R98",VirginKiller1:"R98",WeddingDress1:"R98",WeddingDress2:"R98",Yukata1:"R98",YuletideVelvetWarmth:"R104"},ClothAccessory$1={Bib:"R98",BodyWritings:"R103",Bouquet:"R98",BowBackAccessory:"R104",BugLegs:"R98",BunnyCollarCuffs:"R98",Camera1:"R98",Cape:"R98",CatsuitCollar:"R98",ComboBelt:"R112",FacePaint:"R98",FaceWritings:"R112",FrillyApron:"R98",FurBolero:"R98",FuzzyScarf:"R121",Glitter:"R98",HoodedCloak:"R116",JewelrySet:"R98",Kissmark:"R98",KissmarkDummy:"R98",LargeBelt:"R98",LargeBeltClassic:"R121",LargeNeckFur:"R109",LatexApron:"R101",LeatherBeltCloth:"R111",LeatherStraps:"R98",Poncho:"R98",RuffledCollar:"R120",SatinScarf:"R112",Scarf:"R98",SideRuffles:"R116",SmallNeckFur:"R109",SpikyNeckFur:"R109",StudentOutfit3Bow1:"R98",StudentOutfit3Bow2:"R98",StudentOutfit3Bow3:"R98",StudentOutfit3Scarf:"R98",VampiricCloak:"R121",WitchShawl:"R121",WombTattoos:"R101",XmasLongShawl:"R121",XmasShortShawl:"R121",ZipperBelt:"R99"},ClothLower$1={ASRubberSkirt:"R107",AdmiralSkirt:"R98",AsymmetricSkirt:"R98",BaggyJeans:"R121",BondageSkirt:"R98",BusinessSkirt:"R98",BusinessTrousers:"R101",CheerleaderSkirt:"R98",ChineseSkirt1:"R98",ClothSkirt1:"R98",CollegeSkirt:"R98",CrossSkirt:"R98",CrossSkirtLight:"R98",ElegantSkirt:"R98",Gown2Skirt:"R98",GymShorts:"R120",HaremPants:"R98",HaremPants2:"R98",HulaSkirt:"R98",JeanSkirt:"R98",Jeans1:"R98",Jeans2:"R98",JeansShorts:"R98",LatexPants1:"R98",LatexSkirt1:"R98",LatexSkirt2:"R98",Leggings1:"R98",Leggings2:"R98",LongLeatherSkirt:"R98",LongPleatedSkirt:"R98",LongSkirt1:"R98",MageSkirt:"R98",MidLegSkirt:"R112",MiniDenimHotPants:"R121",MistressBottom:"R98",OpenLeatherSkirt:"R121",PVCHobbleSkirt:"R121",Pajama1:"R98",PantBoots:"R98",PencilSkirt:"R98",PleatedSkirt:"R98",RuffledMiniskirt:"R120",RuffledSkirt:"R98",SatinSkirt:"R105",ShortPencilSkirt:"R98",ShortPlaidSkirt:"R98",Shorts1:"R98",Skirt1:"R98",Skirt2:"R98",Skirt3:"R98",TennisSkirt1:"R98",TulleSkirt:"R98",Tutu:"R98",UtilityKilt:"R113",Waspie1:"R98",Waspie2:"R98",Waspie3:"R98",YogaPants:"R121"},ClothOuter$1={AdmiralTop:"R117",BartenderVest:"R120",BartenderVestM:"R120",BusinessSuit:"R117",FurCoat:"R117",Hoodie:"R121",JacketHoodie:"R120",LeatherJacket:"R117",Robe1:"R117"},Corset$1={BarrelCorset:"R118",ClassicLatexCorset:"R98",Corset1:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",Corset6:"R98",CorsetDress:"R101",ExtremeCorset:"R115",LatexCorset1:"R98",LeatherCorsetTop1:"R98",RibbonCorset:"R112",SatinCorset:"R118",SteampunkCorsetTop1:"R98",TightCorset:"R107",Underbust:"R98"},Decals$1={AmberFam:"R119",AzureCorp:"R119",BCRules:"R120",BTG:"R120",BTeacher:"R120",BondageCollege:"R120",Bonk:"R120",Bullseye:"R120",ControlPad1:"R120",DataRoom:"R120",DemonsBar:"R119",DenOfSin:"R119",Dominant:"R120",Eclipse:"R120",Elite:"R120",Gangriels:"R119",HWood:"R120",Hogtied:"R120",Keys:"R120",LukeChill:"R119",Malkuth:"R119",RadFrog:"R120",Raiders:"R120",RatAss:"R119",Shibari:"R120",SlaveHelpline:"R119",Staff:"R120",VoidOrder:"R119",WhiteMoon:"R120",ZamStick:"R120",ZamStickII:"R120"},Emoticon$1={Emoticon:"R98"},Eyebrows$1={Eyebrows1:"R98",Eyebrows2:"R98",Eyebrows7:"R98",Eyebrows8:"R98"},Eyes$1={Eyes1:"R98",Eyes10:"R98",Eyes11:"R98",Eyes12:"R98",Eyes13:"R98",Eyes14:"R99",Eyes15:"R117",Eyes2:"R98",Eyes3:"R98",Eyes4:"R98",Eyes5:"R98",Eyes6:"R98",Eyes7:"R98",Eyes8:"R98",Eyes9:"R98"},Eyes2$1={Eyes1:"R98",Eyes10:"R98",Eyes11:"R98",Eyes12:"R98",Eyes13:"R98",Eyes14:"R99",Eyes15:"R117",Eyes2:"R98",Eyes3:"R98",Eyes4:"R98",Eyes5:"R98",Eyes6:"R98",Eyes7:"R98",Eyes8:"R98",Eyes9:"R98"},EyeShadow$1={CatEye:"R98",CatEye2:"R98",LargeBlurred:"R98",LargeSolid:"R98",SmallBlurred:"R98",SmallSolid:"R98",SuperstarBlurred:"R98",SuperstarSolid:"R98",Tanuki:"R98",UndershadowedBlurred:"R98",UndershadowedSolid:"R98",Wings:"R98"},FaceMarkings$1={AnimalNoses:"R112",FacePaint:"R119",FaceScars:"R112",FaceWritings:"R112",Splatters:"R114"},FacialHair$1={BigBeard:"R98",ChinstrapBeard:"R98",Goatee:"R98",Handlebar:"R115",LargeBeard:"R115",LargeGoatee:"R115",MediumBeard:"R98",Moustache:"R98",MoustacheBeard:"R98",MuttonChops:"R115",VanDyke:"R115",VanDykeHandlebar:"R115",XLBeard:"R115",XLGoatie:"R115",XLMoustache:"R115",XXLBeard:"R115",XXLBeardHandlebar:"R115",XXLBeardXLStache:"R115"},Fluids$1={Fluids:"R98"},Garters$1={ButterflyGarter:"R115",ComboBelt:"R112",DropBag:"R98",FemPelvisHarness:"R114",GarterBelt:"R98",GarterBelt2:"R98",GarterBelt3:"R98",HipHarness:"R107",Tentacles:"R98",WaistLegHarness:"R111"},Glasses$1={CatGlasses:"R98",EyePatch1:"R98",Glasses1:"R98",Glasses2:"R98",Glasses3:"R98",Glasses4:"R98",Glasses5:"R98",Glasses6:"R98",Goggles:"R98",GradientSunglasses:"R98",HalfRimGlasses:"R121",JokeGlasses:"R98",Monocle:"R121",Pincenez:"R106",RoundSunglasses:"R114",ShutterSunshades:"R121",StreetEyewear:"R100",SunGlasses1:"R98",SunGlasses2:"R98",SunGlassesClear:"R98",VGlasses:"R98",VintageSunglasses:"R121"},Gloves$1={AnimeGirlGloves:"R106",BikerGloves:"R98",Catsuit:"R98",CheerleaderPomPoms:"R98",CowPrintedGloves:"R98",FingerlessGloves:"R98",FishnetGloves:"R98",Gloves1:"R98",Gloves2:"R98",Gloves3:"R98",GlovesFur:"R98",HaremGlove:"R98",LatexElbowGloves:"R98",LatexShortGloves:"R98",MistressGloves:"R98",OperaGloves:"R105",SeethroughSuit:"R98",WarmGloves:"R103"},HairAccessory1$1={Antennae:"R98",AquaticEars:"R111",BatWings:"R98",BigLynxEars:"R98",BunnyEars1:"R98",BunnyEars2:"R98",CowEars:"R104",CowHorns:"R98",CustomizableCatEars:"R119",CustomizableCowEars:"R119",CustomizableElfEars:"R119",CustomizableFluffyEars1:"R119",CustomizableFluffyEars2:"R119",CustomizableFluffyEars3:"R119",CyberEars:"R117",CyberneticEars1:"R108",DildocornHorn:"R98",EarWarmer:"R103",Ears1:"R98",Ears2:"R98",ElfEars:"R98",FloppyBunnyEars:"R117",FoxEars1:"R98",FoxEars2:"R98",FoxEars3:"R98",GiantBow1:"R98",HairFeathers1:"R98",HairFlower1:"R98",Halo:"R98",Headset1:"R101",Horns:"R98",Horns2:"R98",Horns3:"R98",Horns4:"R104",Horns5:"R104",KittenEars1:"R98",KittenEars2:"R98",MouseEars1:"R98",MouseEars2:"R98",Onihorns:"R109",PonyEars1:"R98",PuppyEars1:"R98",PuppyEars2:"R98",RaccoonEars1:"R98",Ribbons1:"R98",Ribbons2:"R98",Ribbons3:"R98",Ribbons4:"R98",SkunkEars:"R109",SuccubusHorns:"R98",UnicornHorn:"R98",WeddingVeil1:"R98",WolfEars1:"R98",WolfEars2:"R98"},HairAccessory2$1={Antennae:"R98",AquaticEars:"R111",BatWings:"R98",BigLynxEars:"R116",BunnyEars1:"R98",BunnyEars2:"R98",CowEars:"R104",CowHorns:"R98",CustomizableCatEars:"R119",CustomizableCowEars:"R119",CustomizableElfEars:"R119",CustomizableFluffyEars1:"R119",CustomizableFluffyEars2:"R119",CustomizableFluffyEars3:"R119",CyberEars:"R117",CyberneticEars1:"R111",DildocornHorn:"R98",Ears1:"R98",Ears2:"R98",ElfEars:"R98",FloppyBunnyEars:"R117",FoxEars1:"R98",FoxEars2:"R98",FoxEars3:"R98",Horns:"R98",Horns2:"R98",Horns3:"R98",Horns4:"R104",Horns5:"R104",KittenEars1:"R98",KittenEars2:"R98",MouseEars1:"R98",MouseEars2:"R98",Onihorns:"R109",PonyEars1:"R98",PuppyEars1:"R98",PuppyEars2:"R98",RaccoonEars1:"R98",SkunkEars:"R109",SuccubusHorns:"R98",UnicornHorn:"R98",WolfEars1:"R98",WolfEars2:"R98"},HairAccessory3$1={EarWarmer:"R103",GiantBow1:"R98",HairFeathers1:"R98",HairFlower1:"R98",Halo:"R98",Headset1:"R101",Ribbons1:"R98",Ribbons2:"R98",Ribbons3:"R98",Ribbons4:"R98",WeddingVeil1:"R98"},HairBack$1={HairBack1:"R98",HairBack10:"R98",HairBack10b:"R98",HairBack11:"R98",HairBack12:"R98",HairBack12b:"R98",HairBack13:"R98",HairBack13b:"R98",HairBack14:"R98",HairBack15:"R98",HairBack15b:"R98",HairBack16:"R98",HairBack17:"R98",HairBack18:"R98",HairBack18b:"R98",HairBack19:"R98",HairBack19b:"R98",HairBack1b:"R98",HairBack2:"R98",HairBack20:"R98",HairBack20b:"R98",HairBack21:"R98",HairBack22:"R98",HairBack23:"R98",HairBack24:"R98",HairBack25:"R98",HairBack26:"R98",HairBack27:"R98",HairBack28:"R98",HairBack29:"R98",HairBack2b:"R98",HairBack30:"R98",HairBack31:"R98",HairBack32:"R98",HairBack33:"R98",HairBack34:"R98",HairBack35:"R98",HairBack36:"R98",HairBack37:"R98",HairBack38:"R98",HairBack39:"R98",HairBack4:"R98",HairBack40:"R98",HairBack41:"R98",HairBack42:"R98",HairBack43:"R98",HairBack44:"R98",HairBack45:"R98",HairBack46:"R98",HairBack47:"R98",HairBack48:"R98",HairBack49:"R98",HairBack4b:"R98",HairBack5:"R98",HairBack50:"R98",HairBack51:"R98",HairBack52:"R98",HairBack53:"R98",HairBack54:"R98",HairBack54b:"R98",HairBack55:"R98",HairBack55b:"R98",HairBack56:"R98",HairBack56b:"R98",HairBack57:"R98",HairBack57b:"R98",HairBack57c:"R98",HairBack57d:"R102",HairBack58:"R103",HairBack58b:"R103",HairBack59:"R103",HairBack5b:"R98",HairBack6:"R98",HairBack60:"R103",HairBack61:"R103",HairBack62:"R104",HairBack63:"R104",HairBack64:"R112",HairBack65:"R112",HairBack65b:"R112",HairBack66:"R112",HairBack67:"R112",HairBack68:"R112",HairBack69:"R112",HairBack69b:"R112",HairBack6b:"R98",HairBack7:"R98",HairBack70:"R112",HairBack70b:"R112",HairBack71:"R112",HairBack72:"R112",HairBack73:"R112",HairBack74:"R112",HairBack75:"R112",HairBack76:"R112",HairBack76b:"R112",HairBack77:"R112",HairBack77b:"R112",HairBack77c:"R112",HairBack78:"R112",HairBack78b:"R112",HairBack78c:"R112",HairBack79:"R115",HairBack7b:"R98",HairBack7c:"R98",HairBack8:"R98",HairBack80:"R115",HairBack81:"R115",HairBack82:"R115",HairBack83:"R115",HairBack84:"R115",HairBack9:"R98",HairBack9b:"R98",HairNone:"R98",ScalyBackHair:"R109"},HairFront$1={HairFront1:"R98",HairFront10:"R98",HairFront10b:"R98",HairFront11:"R98",HairFront11b:"R98",HairFront12:"R98",HairFront12b:"R98",HairFront13:"R98",HairFront13b:"R98",HairFront14:"R98",HairFront14b:"R98",HairFront15:"R98",HairFront16:"R98",HairFront17:"R98",HairFront17b:"R98",HairFront18:"R98",HairFront19:"R98",HairFront1b:"R98",HairFront2:"R98",HairFront20:"R98",HairFront21:"R98",HairFront22:"R98",HairFront22b:"R98",HairFront23:"R98",HairFront23b:"R98",HairFront24:"R98",HairFront25:"R98",HairFront26:"R98",HairFront27:"R98",HairFront28:"R98",HairFront28b:"R98",HairFront29:"R98",HairFront29b:"R98",HairFront2b:"R98",HairFront3:"R98",HairFront30:"R98",HairFront31:"R98",HairFront32:"R98",HairFront33:"R98",HairFront33b:"R98",HairFront34:"R98",HairFront35:"R98",HairFront36:"R98",HairFront37:"R98",HairFront37b:"R98",HairFront38:"R98",HairFront38b:"R98",HairFront39:"R98",HairFront39b:"R98",HairFront3b:"R98",HairFront4:"R98",HairFront40:"R98",HairFront40b:"R98",HairFront41:"R98",HairFront41b:"R98",HairFront42:"R98",HairFront42b:"R98",HairFront43:"R98",HairFront43b:"R98",HairFront44:"R98",HairFront44b:"R98",HairFront45:"R98",HairFront45b:"R98",HairFront46:"R98",HairFront46b:"R98",HairFront47:"R98",HairFront47b:"R98",HairFront48:"R98",HairFront48b:"R98",HairFront49:"R98",HairFront4b:"R98",HairFront5:"R98",HairFront50:"R98",HairFront51:"R98",HairFront51b:"R98",HairFront52:"R98",HairFront52b:"R98",HairFront53:"R98",HairFront54:"R103",HairFront55:"R103",HairFront56:"R103",HairFront57:"R104",HairFront58:"R108",HairFront59:"R109",HairFront5b:"R98",HairFront6:"R98",HairFront60:"R109",HairFront61:"R109",HairFront62a:"R110",HairFront62b:"R110",HairFront63:"R112",HairFront64:"R112",HairFront65:"R113",HairFront66:"R115",HairFront67:"R115",HairFront68:"R115",HairFront69:"R115",HairFront6b:"R98",HairFront7:"R98",HairFront70:"R115",HairFront71:"R115",HairFront72:"R115",HairFront73:"R115",HairFront74:"R115",HairFront7b:"R98",HairFront8:"R98",HairFront8b:"R98",HairFront9:"R98",HairFront9b:"R98",ScalyHair:"R109"},HandAccessoryLeft$1={CatsuitGloves:"R111",Claws:"R111",Fingernails:"R111",Rings:"R111"},HandAccessoryRight$1={CatsuitGloves:"R111",Claws:"R111",Fingernails:"R111",Rings:"R111"},HandsLeft$1={"":"R111"},HandsRight$1={"":"R111"},Hat$1={AnimeGirlTiara:"R106",BakerBoyHat:"R98",BallCapBack:"R98",BallCapFront:"R98",Band1:"R98",Band2:"R98",Bandana:"R98",Beanie:"R98",Beret1:"R98",Bonnet1:"R98",Bonnet2:"R98",BunnySuccubus2:"R98",CaptainHat1:"R98",CheapHelmet:"R107",CollegeDunce:"R98",CowboyHat:"R98",Crown1:"R98",Crown2:"R98",Crown3:"R98",Crown4:"R98",Crown5:"R98",FacePaint:"R98",FlatCap:"R120",FlowerCrown:"R98",FurHeadband:"R98",Gat:"R120",HeadTowel1:"R98",LatexHabit:"R98",MaidHairband1:"R98",MaidLatexHairband:"R101",NunHabit:"R98",NunVeil:"R104",NurseCap:"R98",PirateBandana1:"R98",PirateHat:"R98",PoliceWomanHat:"R98",PoppyCrown:"R98",ReindeerBand:"R98",RoseCrown:"R98",Santa1:"R98",SmallHat1:"R98",SwimCap:"R98",Tiara1:"R98",Veil1:"R98",Veil2:"R98",VintageHat:"R106",WitchHat1:"R98"},Head$1={Default:"R98",NoEars:"R98",SmallEars:"R98"},Height$1={H0900:"R98",H0910:"R98",H0920:"R98",H0930:"R98",H0940:"R98",H0950:"R98",H0960:"R98",H0970:"R98",H0980:"R98",H0990:"R98",H1000:"R98"},ItemAddon$1={BedChains:"R98",BedRopes:"R98",BedStraps:"R98",BedTape:"R98",CeilingChain:"R98",CeilingNeckCuff:"R115",CeilingRope:"R98",Covers:"R98"},ItemArms$1={ArmbinderJacket:"R98",ArmbinderSuit:"R107",BedMetalCuffs:"R110",BitchSuit:"R98",Bolero:"R98",BondageBouquet:"R98",BondageBra:"R98",BoxTieArmbinder:"R98",CanvasStraitjacket1:"R98",CeilingShackles:"R98",Chains:"R98",CollarCuffs:"R98",CollarMetalcuffs:"R103",DuctTape:"R98",FourLimbsShackles:"R98",FullBodyLeatherHarness:"R98",FullBodyShackles:"R98",FullLatexSuit:"R98",FurStraitJacket:"R98",FuturisticArmbinder:"R98",FuturisticCuffs:"R98",FuturisticStraitjacket:"R98",HeavyYoke:"R98",HempRope:"R98",HighSecurityStraitJacket:"R98",HighStyleSteelCuffs:"R98",InflatableDress:"R112",InflatableStraightLeotard:"R98",LatexArmbinder:"R98",LatexBoxtieLeotard:"R98",LatexButterflyLeotard:"R98",LatexSleevelessLeotard:"R98",LeatherArmSplints:"R98",LeatherArmbinder:"R98",LeatherCuffs:"R98",LeatherDeluxeCuffs:"R98",LeatherStraitJacket:"R98",Manacles:"R98",MedicalBedRestraints:"R98",MermaidSuit:"R98",MetalCuffs:"R98",NylonRope:"R98",OrnateCuffs:"R98",PantyhoseBody:"R98",PantyhoseBodyOpen:"R98",PawPaddedPetsuitArms:"R119",PetCrawler:"R98",Pillory:"R98",PlasticWrap:"R98",PrisonLockdownSuit:"R98",PrisonSJ:"R98",Ribbons:"R98",SeamlessLatexArmbinder:"R98",SeamlessStraitDress:"R98",SeamlessStraitDressOpen:"R98",ShinyArmbinder:"R98",ShinyPetSuit:"R98",ShinyStraitjacket:"R98",SleepSac:"R98",Slime:"R98",SmoothLeatherArmbinder1:"R98",SteelBelt:"R115",SteelCuffs:"R98",StraitDress:"R98",StraitDressOpen:"R98",StraitJacket:"R98",StraitLeotard:"R98",StrappedPetsuitArms:"R119",StrictLeatherPetCrawler:"R98",SturdyLeatherBelts:"R98",Tentacles:"R98",ThinLeatherStraps:"R98",TightJacket:"R98",TightJacketCrotch:"R98",TransportJacket:"R98",UnderBedBondageCuffs:"R98",Web:"R98",WoodenCuffs:"R98",WrappedBlanket:"R98",WristShackles:"R98",Yoke:"R98",Zipties:"R98"},ItemBoots$1={BalletHeels:"R98",BalletHeels1:"R98",BalletMittens:"R112",BalletWedges:"R98",FuturisticHeels:"R98",FuturisticHeels2:"R98",HeellessHoof:"R113",HighThighBoots:"R98",HoofBoots:"R115",LeatherFootMitts1:"R98",LeatherToeCuffs:"R98",LockingBoots1:"R98",LockingHeels:"R98",LockingHeels2:"R98",LockingShoes1:"R98",LockingShoes2:"R98",MetalBallet:"R100",MonoHeel:"R98",PonyBoots:"R98",ShortPonyBoots:"R98",SingleBalletBoot:"R120",Slime:"R98",StrictPonyBoots:"R104",ThighHighLatexHeels:"R98",ToeCuffs:"R98",ToeTape:"R98",ToeTie:"R98",TormentHeels:"R103",ZipperBBoots:"R120",Zipties:"R98"},ItemBreast$1={ChastityPlate:"R105",ForbiddenChastityBra:"R98",FuturisticBra:"R98",FuturisticBra2:"R98",LeatherBreastBinder:"R98",MetalChastityBra:"R98",OrnateChastityBra:"R98",PolishedChastityBra:"R98",Ribbons:"R98",TickleBra:"R98"},ItemButt$1={AnalBeads:"R98",AnalBeads2:"R98",AnalHook:"R98",BlackButtPlug:"R98",BunnyTailPlug1:"R98",BunnyTailPlug2:"R98",BunnyTailVibePlug:"R98",ButtPlugLock:"R98",ButtPump:"R98",Cowtail:"R98",DemonPlug:"R98",EggVibePlugXXL:"R98",FoxTail:"R122",FoxTails:"R98",FuckPlug:"R119",HollowButtPlug:"R98",HorsetailPlug:"R98",HorsetailPlug1:"R98",InflVibeButtPlug:"R98",KittenTail1:"R98",KittenTail2:"R98",LockingVibePlug:"R98",MouseTail1:"R98",MouseTail2:"R98",PenisPlug:"R98",PuppyTailPlug:"R98",PuppyTailPlug1:"R98",RaccoonButtPlug:"R98",RaccoonTailPlug:"R98",ShockPlug:"R98",Stitches:"R98",SuccubusButtPlug:"R98",SuccubusHeartButtPlug:"R98",TailButtPlug:"R98",Tentacles:"R98",VibratingButtplug:"R98",VibratingDildoPlug:"R98",WolfTail1:"R98",WolfTail2:"R98",WolfTail3:"R98"},ItemDevices$1={BBQ:"R98",Bed:"R98",BondageBench:"R98",BrickWall:"R107",BurlapSack:"R98",Cage:"R98",Cement:"R106",ChangingTable:"R98",Coffin:"R98",ConcealingCloak:"R98",Crib:"R98",CryoCapsule:"R98",Cushion:"R98",DisplayCase:"R98",DollBox:"R98",Enema:"R122",ExclusiveWaitress:"R113",Familiar:"R98",FoldingScreen:"R98",FuckMachine:"R98",FurBlanketWrap:"R98",FuturisticCrate:"R98",GlueFloor:"R105",Highchair:"R116",InflatableBodyBag:"R98",KabeshiriWall:"R98",Kennel:"R98",LeatherCage:"R115",LittleMonster:"R98",Locker:"R98",LowCage:"R98",LuckyWheel:"R98",MedicalBed:"R98",Microphone:"R120",MilkCan:"R98",Net:"R98",OneBarGirl:"R105",OneBarPrison:"R98",PersonalCage:"R98",PetBed:"R98",PetBowl:"R98",PogoBall:"R112",Pole:"R98",Potty:"R122",SaddleStand:"R98",SingleBalletBoot:"R120",SmallDisplayCase:"R98",SmallLocker:"R98",SmallWoodenBox:"R98",SmallWoodenBoxOpenHead:"R98",Snowman:"R98",StrapOnSmooth:"R98",StrapOnStuds:"R98",Sybian:"R98",TheDisplayFrame:"R98",TheHangingFrame:"R101",Throne:"R113",TransportWoodenBox:"R98",Trolley:"R99",VacBedDeluxe:"R98",VacCube:"R98",Vacbed:"R98",VacbedClear:"R98",WaterCell:"R98",WetFloor:"R98",WheelFortune:"R98",WoodenBox:"R98",WoodenBoxOpenHead:"R98",WoodenHorse:"R98",WoodenRack:"R98",WoodenStocks:"R98","X-Cross":"R98"},ItemEars$1={BluetoothEarbuds:"R98",CustomizableCatEars:"R122",CustomizableCowEars:"R122",CustomizableElfEars:"R122",CustomizableFluffyEars1:"R122",CustomizableFluffyEars2:"R122",CustomizableFluffyEars3:"R122",FuturisticEarphones:"R98",HeadphoneEarPlugs:"R98",Headphones:"R98",HeavyDutyEarPlugs:"R98",LightDutyEarPlugs:"R98"},ItemFeet$1={AnkleShackles:"R98",BallChain:"R98",Chains:"R98",DuctTape:"R98",EscortAnkleCuffs:"R98",FloorShackles:"R98",FuturisticAnkleCuffs:"R98",HeavyAnkleCuffs:"R98",HeavySpreaderMetal:"R98",HeelBinders:"R110",HempRope:"R98",HighStyleSteelAnkleCuffs:"R98",Irish8Cuffs:"R98",KneeOvernighter:"R110",LeatherAnkleCuffs:"R98",LeatherBelt:"R98",LeatherDeluxeAnkleCuffs:"R98",MassiveAnkleCuffs:"R110",MedicalBedRestraints:"R98",NylonRope:"R98",OrnateAnkleCuffs:"R98",PlasticWrap:"R98",Slime:"R98",SpreaderDildoBar:"R98",SpreaderMetal:"R98",SpreaderVibratingDildoBar:"R98",SteelAnkleCuffs:"R98",SturdyLeatherBelts:"R98",SuspensionCuffs:"R98",Tentacles:"R98",WoodenCuffs:"R98",Zipties:"R98"},ItemHandheld$1={AnimeGirlWand:"R106",BabyPowder:"R122",Baguette:"R98",Ballgag:"R98",Belt:"R98",Brick:"R107",Broom:"R98",BunPlush:"R98",CandleWax:"R98",Cane:"R98",CattleProd:"R98",Cigarette:"R119",Crop:"R98",Diaper:"R122",ElectricToothbrush:"R98",Feather:"R98",FeatherDuster:"R98",Flogger:"R98",FoamRoll:"R120",ForSaleSign:"R98",FoxPlush:"R98",Gavel:"R98",GlassEmpty:"R98",GlassFilled:"R98",GlueTube:"R105",Hairbrush:"R98",HeartCrop:"R98",IceCube:"R98",Karl:"R98",KeyProp:"R98",Kyosensu:"R115",LargeDildo:"R98",LongDuster:"R98",LongSock:"R98",Lotion:"R98",MedicalInjector:"R98",MiniDolls:"R122",Mug:"R98",Paddle:"R98",Panties:"R98",PetPotato:"R98",PetToy:"R98",Phone1:"R98",Phone2:"R98",PlasticWrap:"R98",Plushie:"R120",Popcorn:"R99",PortalTablet:"R98",PotionBottle:"R98",RainbowWand:"R98",RopeCoilLong:"R98",RopeCoilShort:"R98",Ruler:"R98",Scissors:"R98",Shark:"R98",ShockRemote:"R98",ShockWand:"R98",SmallDildo:"R98",SmallVibratingWand:"R98",Smartphone:"R99",Spatula:"R98",Sword:"R98",TapeRoll:"R98",TennisRacket:"R98",Toothbrush:"R98",Towel:"R98",Trowel:"R107",Uchiwa:"R115",VibeRemote:"R98",VibratingWand:"R98",Vibrator:"R98",WartenbergWheel:"R98",Whip:"R98",WhipPaddle:"R98",Wipes:"R122"},ItemHands$1={BalletBootsMittens:"R121",CheerleaderPomPoms:"R98",DuctTape:"R98",ElbowLengthMittens:"R103",FoamMittens:"R120",FullMittens:"R110",FuturisticMittens:"R98",GlueMittens:"R105",HempRopeCuffs:"R107",HoofMittens:"R98",LatexBondageMitts:"R111",LeatherMittens:"R98",PaddedLeatherMittens:"R98",PaddedMittens:"R98",PawMittens:"R98",PolishedMittens:"R98",PonyMittensBinder:"R100",SmoothLeatherMittens1:"R98"},ItemHead$1={AnimeLenses:"R98",AsylumBlindfold:"R115",BigMouthHood:"R101",BlackoutLenses:"R98",ClothBlindfold:"R98",DroneMask:"R98",DuctTape:"R98",FrilledSleepMask:"R98",FullBlindfold:"R98",FurScarf:"R98",FuturisticMask:"R98",HypnoticVisor:"R117",InteractiveVRHeadset:"R98",InteractiveVisor:"R98",Kigu2Hood:"R112",KittyBlindfold:"R98",LatexBlindfold:"R98",LeatherBlindfold:"R98",LeatherSlimMask:"R98",LeatherSlimMaskOpenEyes:"R98",LeatherSlimMaskOpenMouth:"R98",LewdBlindfold:"R98",MedicalPatch:"R98",PaddedBlindfold:"R98",Pantyhose:"R98",PrisonLockdownBlindfold:"R98",Ribbons:"R98",RopeBlindfold:"R98",ScarfBlindfold:"R98",SleepMask:"R98",Slime:"R98",SmallBlindfold:"R98",Snorkel:"R98",Stitches:"R98",StuddedBlindfold:"R98",Tentacles:"R98",WebBlindfold:"R98"},ItemHood$1={AccentHood:"R98",Balloon:"R111",BigMouthHood:"R101",BlanketHood:"R98",CanvasHood:"R98",CollarHood:"R98",CorsetHood:"R98",CowHood:"R98",CreepyIronMask:"R114",CustomBallHood:"R109",CustomLatexHood:"R98",DobermanMask:"R98",DogHood:"R98",DroneMask:"R98",FestivalFoxMask:"R98",FoxHood:"R98",FoxyMask:"R98",Fu:"R104",FuturisticHelmet:"R98",GGTSHelmet:"R98",GP9GasMask:"R98",GasMask:"R98",GwenHood:"R98",HalloIII:"R115",HarnessCatMask:"R98",HeadboxSeethrough:"R98",InflatableGagMask:"R98",InflatedBallHood:"R98",Kigu2Hood:"R112",KirugumiMask:"R98",KittyHood:"R98",LampHeadHood:"R98",LatexBunny:"R98",LatexDogHood:"R98",LatexDogMask:"R98",LatexHabit:"R98",LatexHoodOpenHair:"R98",LeatherHood:"R98",LeatherHoodOpenEyes:"R98",LeatherHoodOpenMouth:"R98",LeatherHoodSealed:"R98",LeatherHoodSensDep:"R98",OldGasMask:"R98",OpenFaceHood:"R98",OpenMouthPlugHood:"R98",PantyHood:"R98",Pantyhose:"R98",Paperbag:"R104",PolishedSteelHood:"R98",PonyHood:"R98",PumpkinHead:"R98",RubberMask:"R107",SackHood:"R98",SensoryDeprivationHood:"R98",Slime:"R98",SpaceMask:"R100",TechnoHelmet1:"R98",TransparentLatexHood:"R121",VacHood:"R98",ZipperHood:"R98"},ItemLegs$1={BarrelCorset:"R115",Chains:"R98",DuctTape:"R98",FrogtieMetalCuffs:"R103",FrogtieStraps:"R98",FuturisticLegCuffs:"R98",HempRope:"R98",HobbleSkirt:"R98",LeatherBelt:"R98",LeatherDeluxeLegCuffs:"R98",LeatherLegCuffs:"R98",LegBinder:"R98",MedicalBedRestraints:"R98",MermaidTail:"R98",NylonRope:"R98",OrnateLegCuffs:"R98",PawPaddedPetsuitLegs:"R119",PlasticWrap:"R98",Ribbons:"R98",SeamlessHobbleSkirt:"R98",SeamlessLegBinder:"R98",ShinyLegBinder:"R98",Slime:"R98",StrappedPetsuitLegs:"R119",SturdyLeatherBelts:"R98",Tentacles:"R98",Zipties:"R98"},ItemMisc$1={BountySuitcase:"R98",BountySuitcaseEmpty:"R98",BunPlush:"R98",CombinationPadlock:"R98",ExclusivePadlock:"R98",FamilyPadlock:"R98",FamilyPadlockKey:"R98",FoxPlush:"R98",HighSecurityPadlock:"R98",IntricatePadlock:"R98",Karl:"R98",Lockpicks:"R98",LoversPadlock:"R98",LoversPadlockKey:"R98",LoversTimerPadlock:"R98",MetalCuffsKey:"R98",MetalPadlock:"R98",MetalPadlockKey:"R98",MiniDolls:"R122",MistressPadlock:"R98",MistressPadlockKey:"R98",MistressTimerPadlock:"R98",OwnerPadlock:"R98",OwnerPadlockKey:"R98",OwnerTimerPadlock:"R98",PandoraPadlock:"R98",PandoraPadlockKey:"R98",PasswordPadlock:"R98",PetPost:"R98",PetPotato:"R98",Plushie:"R120",PortalLinkPadlock:"R98",SafewordPadlock:"R98",ServingTray:"R98",TeddyBear:"R98",TimerPadlock:"R98",TimerPasswordPadlock:"R98",WoodenMaidTray:"R98",WoodenMaidTrayFull:"R98",WoodenPaddle:"R98",WoodenSign:"R98"},ItemMouth$1={AOMGag:"R113",AsylumMuzzle:"R115",Ball:"R98",BallGag:"R98",BallGagMask:"R98",BambooGag:"R98",BigMouth:"R98",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CaneGag:"R98",CarrotGag:"R98",ChloroformCloth:"R98",ChopstickGag:"R98",Cigarette:"R119",ClothGag:"R98",ClothStuffing:"R98",CompGag:"R120",CropGag:"R98",CupholderGag:"R98",DeepthroatGag:"R98",DentalGag:"R98",DildoGag:"R98",DildoPlugGag:"R98",DogMuzzleExposed:"R98",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FunnelGag:"R98",FurScarf:"R98",FuturisticHarnessBallGag:"R98",FuturisticHarnessPanelGag:"R98",FuturisticMuzzle:"R98",FuturisticPanelGag:"R98",GasMaskGag:"R98",GenitalGag:"R107",GlueGag:"R105",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",HookGagMask:"R98",HorrorMuzzle:"R114",Kissmark:"R102",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LargeDildo:"R98",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R102",LatexSheathGag:"R98",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",MilkBottle:"R98",ModularGag:"R99",MouthFeatureGag:"R102",MuzzleGag:"R98",OTNPlugGag:"R98",OverfilledGag:"R110",PaciGag:"R98",PacifierGag:"R98",PaddedFaceMask:"R102",PantiesMask:"R98",PantyStuffing:"R98",PlasticWrap:"R98",PlugGag:"R98",PonyGag:"R98",PremiumMuzzle:"R110",PrisonLockdownGag:"R98",PumpGag:"R98",PumpkinGag:"R98",QualityHarnessGag:"R106",RegressedMilk:"R98",RegularSleepingPill:"R98",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SockStuffing:"R98",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R102",TechnoGag:"R98",Tentacles:"R98",TonguePiercingGag:"R100",TongueStrapGag:"R98",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98",XmasStickerGag:"R111"},ItemMouth2$1={AOMGag:"R113",AsylumMuzzle:"R115",Ball:"R103",BallGag:"R98",BallGagMask:"R98",BambooGag:"R103",BigMouth:"R103",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CaneGag:"R103",CarrotGag:"R98",ChloroformCloth:"R98",ChopstickGag:"R103",ClothGag:"R98",ClothStuffing:"R103",CompGag:"R120",CropGag:"R103",CupholderGag:"R98",DeepthroatGag:"R103",DentalGag:"R103",DildoGag:"R98",DildoPlugGag:"R103",DogMuzzleExposed:"R103",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FunnelGag:"R103",FurScarf:"R98",FuturisticHarnessBallGag:"R101",FuturisticHarnessPanelGag:"R101",FuturisticMuzzle:"R98",FuturisticPanelGag:"R101",GasMaskGag:"R98",GenitalGag:"R107",GlueGag:"R105",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",HookGagMask:"R103",HorrorMuzzle:"R114",Kissmark:"R102",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LargeDildo:"R103",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R102",LatexSheathGag:"R103",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",MilkBottle:"R103",ModularGag:"R99",MouthFeatureGag:"R98",MuzzleGag:"R98",OTNPlugGag:"R103",OverfilledGag:"R110",PaciGag:"R98",PacifierGag:"R103",PaddedFaceMask:"R102",PantiesMask:"R98",PantyStuffing:"R103",PlasticWrap:"R98",PlugGag:"R103",PonyGag:"R98",PremiumMuzzle:"R110",PrisonLockdownGag:"R98",PumpGag:"R103",PumpkinGag:"R98",QualityHarnessGag:"R106",RegressedMilk:"R98",RegularSleepingPill:"R103",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SockStuffing:"R103",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R102",TechnoGag:"R103",Tentacles:"R98",TonguePiercingGag:"R103",TongueStrapGag:"R103",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98",XmasStickerGag:"R111"},ItemMouth3$1={AOMGag:"R113",AsylumMuzzle:"R115",Ball:"R103",BallGag:"R98",BallGagMask:"R98",BambooGag:"R103",BigMouth:"R103",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CaneGag:"R103",CarrotGag:"R98",ChloroformCloth:"R98",ChopstickGag:"R103",ClothGag:"R98",ClothStuffing:"R103",CropGag:"R103",CupholderGag:"R98",DeepthroatGag:"R103",DentalGag:"R103",DildoGag:"R98",DildoPlugGag:"R103",DogMuzzleExposed:"R103",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FunnelGag:"R103",FurScarf:"R98",FuturisticHarnessBallGag:"R101",FuturisticHarnessPanelGag:"R101",FuturisticMuzzle:"R98",FuturisticPanelGag:"R101",GasMaskGag:"R98",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",HookGagMask:"R103",HorrorMuzzle:"R114",Kissmark:"R98",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LargeDildo:"R103",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R98",LatexSheathGag:"R103",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",MilkBottle:"R103",ModularGag:"R99",MouthFeatureGag:"R102",MuzzleGag:"R98",OTNPlugGag:"R103",OverfilledGag:"R110",PaciGag:"R98",PacifierGag:"R103",PaddedFaceMask:"R98",PantiesMask:"R98",PantyStuffing:"R103",PlasticWrap:"R98",PlugGag:"R103",PonyGag:"R98",PremiumMuzzle:"R110",PrisonLockdownGag:"R98",PumpGag:"R103",PumpkinGag:"R98",QualityHarnessGag:"R106",RegressedMilk:"R98",RegularSleepingPill:"R103",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SockStuffing:"R103",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R98",TechnoGag:"R103",Tentacles:"R98",TonguePiercingGag:"R103",TongueStrapGag:"R103",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98",XmasStickerGag:"R111"},ItemNeck$1={AsylumCollar:"R115",AutoShockCollar:"R98",BatCollar:"R98",BonedNeckCorset:"R98",BordelleCollar:"R98",ChainCollar:"R115",ClubSlaveCollar:"R98",ComboHarness:"R98",DogCollar:"R98",ExtendablePostureCollar:"R99",FuturisticCollar:"R98",GothicCollar:"R98",HeartCollar:"R98",HeartLinkChoker:"R98",HighCollar:"R98",HighSecurityCollar:"R98",HighStyleSteelCollar:"R98",LatexCollar1:"R98",LatexCollar2:"R98",LatexPostureCollar:"R98",LatexRingCollar:"R99",LeatherChoker:"R98",LeatherCollar:"R98",LeatherCollarBell:"R98",LeatherCollarBow:"R98",LeatherCorsetCollar:"R98",LeatherDeluxeCollar:"R98",LoveLeatherCollar:"R98",MaidCollar:"R98",MoonCollar:"R110",NeckRope:"R98",NobleCorsetCollar:"R98",NylonCollar:"R98",OrnateCollar:"R98",PaddedBeltCollar:"R99",PetCollar:"R98",PetSuitShockCollar:"R98",PostureCollar:"R98",SSpikedCollar:"R121",ShinySteelCollar:"R98",ShockCollar:"R98",SlaveCollar:"R98",SlenderSteelCollar:"R98",SpikeCollar:"R98",SpikedChoker:"R99",SteampunkCollar:"R121",SteelPostureCollar:"R98",StrictPostureCollar:"R98",SunCollar:"R110",TechnoCollar:"R98"},ItemNeckAccessories$1={CollarAutoShockUnit:"R98",CollarBell:"R98",CollarBow:"R98",CollarButterfly:"R98",CollarCowBell:"R98",CollarFlower:"R98",CollarLapis:"R98",CollarMoon:"R98",CollarNameTag:"R98",CollarNameTagLivestock:"R98",CollarNameTagLover:"R98",CollarNameTagOval:"R98",CollarNameTagPet:"R98",CollarPentagram:"R98",CollarPupBone:"R98",CollarRose:"R98",CollarRoseAmulet:"R118",CollarShockUnit:"R98",CollarSun:"R98",CustomCollarTag:"R98",ElectronicTag:"R98",Key:"R98"},ItemNeckRestraints$1={Bedchain:"R111",ChainLeash:"R98",ChokeChain:"R115",CollarChainLong:"R98",CollarChainMedium:"R98",CollarChainShort:"R98",CollarLeash:"R98",CollarRopeLong:"R98",CollarRopeMedium:"R98",CollarRopeShort:"R98",MCuffCollar:"R115",PetPost:"R98",Post:"R98"},ItemNipples$1={BellClamps:"R98",ChainClamp:"R98",ChainTassles:"R98",ChopStickNippleClamps:"R98",Clothespins:"R98",HeartPasties:"R98",KittyPasties:"R98",LactationPump:"R98",NippleClamp:"R98",NippleClamps2:"R98",NippleSuctionCups:"R98",NippleTape:"R98",NippleVibe:"R98",NippleWeightClamps:"R98",PlateClamps:"R98",ScrewClamps:"R98",ShockClamps:"R98",StretchClovers:"R98",TapedVibeEggs:"R98",VibeNippleClamp:"R98",VibratorRemote:"R98"},ItemNipplesPiercings$1={BarbellPiercing:"R98",BellPiercing:"R98",CrossedStraightPiercing:"R98",NecklacePiercingChain:"R98",NippleAccessory1:"R98",NippleAccessory2:"R98",NippleAccessory3:"R98",NippleChastityPiercing1:"R98",NippleChastityPiercing2:"R98",RoundPiercing:"R98",StraightPiercing:"R98",VibeHeartPiercings:"R98"},ItemNose$1={BarbelPiercing:"R98",ClownNose:"R99",DuctTape:"R98",GlueNose:"R105",NoseClip:"R114",NoseHook:"R98",NosePlugs:"R98",NoseRing:"R98",PigNose:"R98",PigNoseHook:"R98"},ItemPelvis$1={BulkyDiaper:"R98",DiaperHarness:"R98",FemPelvisHarness:"R114",ForbiddenChastityBelt:"R98",FuturisticChastityBelt:"R98",FuturisticTrainingBelt:"R98",HarnessPanties1:"R98",HarnessPanties2:"R98",HeavyDutyBelt:"R98",HempRope:"R98",HipHarness:"R107",HybridChastityBelt:"R98",LatexDiaper:"R116",LeatherChastityBelt:"R98",LeatherStrapPanties1:"R98",LoveChastityBelt:"R98",MetalChastityBelt:"R98",ModularChastityBelt:"R99",ObedienceBelt:"R98",OrnateChastityBelt:"R98",PelvisChainLeash:"R98",PolishedChastityBelt:"R98",PoofyDiaper:"R98",PortalPanties:"R98",Ribbons:"R98",SciFiPleasurePanties:"R98",SleekLeatherChastityBelt:"R98",SteelChastityPanties:"R98",StraponPanties:"R98",StuddedChastityBelt:"R98",UntrainersThin:"R116",WaistLegHarness:"R111",WombTattoos:"R122"},ItemScript$1={Script:"R98"},ItemTorso$1={AdultBabyHarness:"R98",BarrelCorset:"R115",ClassicLatexCorset:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",CrotchChain:"R98",ExtremeCorset:"R115",FemPelvisHarness:"R114",FuturisticHarness:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeavyLatexCorset:"R98",HempRopeHarness:"R98",HighSecurityHarness:"R98",HipHarness:"R107",LatexCorset1:"R98",LeatherBreastBinder:"R98",LeatherChestHarness1:"R98",LeatherHarness:"R98",LeatherStrapBra1:"R98",LeatherStrapHarness:"R98",LockingSwimsuit:"R98",LockingSwimsuit2:"R98",NavelBar1:"R98",NylonRopeHarness:"R98",RibbonCorset:"R112",Ribbons:"R98",ShinyLeotardLock:"R114",SteelBelt:"R115",StuddedHarness:"R98",ThinLeatherStraps:"R98",TightCorset:"R107",Underbust:"R98"},ItemTorso2$1={AdultBabyHarness:"R98",BarrelCorset:"R115",ClassicLatexCorset:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",CrotchChain:"R98",ExtremeCorset:"R115",FemPelvisHarness:"R114",FuturisticHarness:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeavyLatexCorset:"R98",HempRopeHarness:"R98",HighSecurityHarness:"R98",HipHarness:"R107",LatexCorset1:"R98",LeatherBreastBinder:"R98",LeatherChestHarness1:"R98",LeatherHarness:"R98",LeatherStrapBra1:"R98",LeatherStrapHarness:"R98",LockingSwimsuit:"R98",LockingSwimsuit2:"R98",NavelBar1:"R98",NylonRopeHarness:"R98",RibbonCorset:"R112",Ribbons:"R98",ShinyLeotardLock:"R114",SteelBelt:"R115",StuddedHarness:"R98",ThinLeatherStraps:"R98",TightCorset:"R107",Underbust:"R98"},ItemVulva$1={Ballspreader:"R118",BasicCockring:"R98",BenWaBalls:"R98",ChastityPouch:"R98",ClitAndDildoVibratorbelt:"R98",ClitSuctionCup:"R98",ClitoralStimulator:"R98",DoubleEndDildo:"R98",FlatChastityCage:"R98",FullCasingCage:"R103",FullLatexSuitWand:"R98",FuturisticVibrator:"R98",HeavyWeightClamp:"R98",HempRopeBelt:"R98",InflatableVibeDildo:"R98",InflatableVibratingPanties:"R98",LatexNulge:"R104",LockingCockring:"R104",LoversVibrator:"R98",LoversVibratorRemote:"R98",PenisDildo:"R98",PlasticChastityCage1:"R98",PlasticChastityCage2:"R98",ShockDildo:"R98",Stitches:"R98",TapeStrips:"R98",TechnoChastityCage:"R98",VibeEggPenisBase:"R98",VibratingDildo:"R98",VibratingEgg:"R98",VibratingLatexPanties:"R98",VibratorRemote:"R98",WandBelt:"R98",WiredEgg:"R98"},ItemVulvaPiercings$1={AdornedClitPiercing:"R98",BarbellClitPiercing:"R98",ChastityClitPiercing:"R98",ChastityClitShield:"R98",ClitRing:"R98",CockRingLeash:"R103",HighSecurityVulvaShield:"R98",JewelClitPiercing:"R98",RoundClitPiercing:"R98",StraightClitPiercing:"R98",TapedClitEgg:"R98",UrethralSound:"R103",VibeEggGlans:"R98",VibeHeartClitPiercing:"R98"},Jewelry$1={JewelrySet:"R98"},Mask$1={AngelMask:"R109",AnimalNoses:"R109",AnimeLenses:"R99",BunnyMask1:"R98",BunnyMask2:"R98",BunnyMask3:"R98",ButterflyMask:"R98",DemonMask:"R109",DominoMask:"R98",DroneMask:"R98",EldritchMask:"R109",FacePaint:"R98",FaceScars:"R109",FaceVeil:"R98",FestivalFoxMask:"R98",FoxMask:"R98",FuturisticVisor:"R98",Glitter:"R98",HeadHarness:"R98",Kigu2Hood:"R112",Kissmark:"R98",KittyMask1:"R98",KittyMask2:"R98",KittyMask3:"R98",LaceMask1:"R98",LaceMask2:"R98",LatexMuzzleMask:"R99",MedicalMask:"R98",NecromancerHelmet:"R109",OpenFaceHood:"R98",PetNose:"R98",RubberMask:"R107",ShinobiMask:"R98",Splatters:"R114",SwimCap:"R98",VenetianMask:"R98"},Mouth$1={Discreet:"R98",Full:"R98",Regular:"R98"},Necklace$1={AnimeGirlNecklace:"R106",Bandana:"R98",BeadNecklace:"R121",BlackHeart:"R98",BodyChainNecklace:"R98",CatsuitCollar:"R98",ChokerTattoo:"R98",EldritchNecklace:"R121",ElegantHeartNecklace:"R98",FlowerGarland:"R98",FurScarf:"R98",IDCard:"R98",Necklace1:"R98",Necklace2:"R98",Necklace3:"R98",Necklace4:"R98",NecklaceBallGag:"R98",NecklaceButterfly:"R98",NecklaceKey:"R98",NecklaceLock:"R98",NecklaceRope:"R98",PearlNecklace1:"R105",PlantNecklace:"R121",RosePendant:"R118",RuffledCollar:"R120",SatinScarf:"R112"},Nipples$1={Nipples1:"R98",Nipples2:"R98",Nipples3:"R98"},Panties$1={Bikini1:"R98",BoxerShorts:"R98",Briefs:"R98",BulkyDiaper:"R98",CatsuitPanties:"R98",ChinesePanties1:"R98",CockSock:"R98",CowPrintedPanties:"R98",CrotchPanties1:"R98",Diapers1:"R98",Diapers2:"R98",Diapers3:"R98",Diapers4:"R98",FemPelvisHarness:"R114",FloralPanties2:"R98",FlowerPanties:"R98",HarnessPanties1:"R98",HarnessPanties2:"R98",HipHarness:"R107",Jockstrap:"R98",KittyPanties1:"R98",LatexCrotchlessPanties:"R98",LatexDiaper:"R116",LatexPanties1:"R98",LatexPanties2:"R98",LeatherStrapPanties1:"R98",MaidPanties1:"R98",MaidPanties2:"R98",MaleCatsuitPanties:"R98",MicroThong:"R98",Panties1:"R98",Panties11:"R98",Panties12:"R98",Panties13:"R98",Panties14:"R98",Panties15:"R98",Panties16:"R98",Panties7:"R98",Panties8:"R98",PearlPanties1:"R98",PilotPanties:"R98",PoofyDiaper:"R98",RedBowPanties:"R98",SexyBeachPanties1:"R98",SportPanties:"R120",StringPanties1:"R98",StringPasty1:"R98",StringThong:"R98",SunstripePanties1:"R98",Thong:"R98",UntrainersThin:"R116",WaistLegHarness:"R111",WrapPanties1:"R98",ZipPanties1:"R98"},Pronouns$1={HeHim:"R98",SheHer:"R98",TheyThem:"R118"},Pussy$1={Penis:"R98",Pussy1:"R98",Pussy2:"R98",Pussy3:"R98"},Shoes$1={AnimeGirlBoots:"R106",AnkleBoots1:"R98",AnkleStrapShoes:"R98",BalletHeels1:"R98",BarefootSandals1:"R98",Boots1:"R98",Clogs:"R99",CombatBoots:"R118",CustomHeels:"R107",DeluxeBoots:"R98",DutyShoes:"R98",Flippers:"R98",FullLegBoots:"R110",FuturisticHeels2:"R98",FuzzyBoots:"R98",Geta:"R98",HeellessHoof:"R113",Heels1:"R98",Heels2:"R98",Heels3:"R98",HoofBoots:"R115",IndoorSlippers:"R111",LatexAnkleShoes:"R98",LatexHeels:"R98",MaryShoes:"R102",MistressBoots:"R98",PawBoots:"R98",PonyBoots:"R98",PumpHighHeels:"R121",Sandals:"R98",SandalsRS:"R98",Shoes1:"R98",Shoes2:"R98",Shoes4:"R98",Shoes5:"R98",Sneakers1:"R98",Sneakers2:"R98",SneakersSport:"R98",SocialHeels:"R98",StilettoHeels:"R98",StreetBoots:"R98",StrictPonyBoots:"R104",TallerBoots:"R100",ThighBoots:"R98",ThighHighLatexHeels:"R98",WesternBoots:"R98",WitchShoes:"R112",WoollyBootsTall:"R98",ZipperBBoots:"R120"},Socks$1={CowPrintedSocks:"R98",FootlessSocks1:"R98",GradientPantyhose:"R98",HaremStockings:"R98",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",LongFishnets:"R110",Pantyhose1:"R98",Pantyhose2:"R98",ReverseBunnySuit:"R98",RippedPantyhose:"R111",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98",YuletideVelvetWarmth:"R104"},SocksLeft$1={CowPrintedSocks:"R98",FootlessSocks1:"R98",HaremStockings:"R98",HeelBinders:"R110",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",LooseSocks:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98"},SocksRight$1={CowPrintedSocks:"R98",FootlessSocks1:"R98",HaremStockings:"R98",HeelBinders:"R110",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",LooseSocks:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98"},Suit$1={BartenderVest:"R115",BartenderVestM:"R115",Blouse1:"R98",Catsuit:"R98",FishnetTop:"R98",LatexCatsuit:"R98",MaleSeamlessCatsuit:"R98",PilotSuit:"R98",ReverseBunnySuit:"R98",SeamlessCatsuit:"R98",SeethroughSuit:"R98",SeethroughSuitZip:"R98",ShinyLeotard:"R114",SleevelessCatsuit:"R98",SleevelessSlimLatexLeotard:"R98"},SuitLower$1={Catsuit:"R98",CatsuitPanties:"R98",LatexCatsuit:"R98",LongFishnets:"R110",MaleCatsuitPanties:"R98",MaleSeamlessCatsuit:"R98",Pantyhose1:"R98",Pantyhose2:"R98",PilotPanties:"R98",PilotSuit:"R98",ReverseBunnySuit:"R98",RippedPantyhose:"R111",SeamlessCatsuit:"R98",SeethroughSuit:"R98",SeethroughSuitZip:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",YogaPants:"R121"},TailStraps$1={BunnyTailStrap:"R98",CowtailStrap:"R98",DemonPlug:"R98",DragonTailStrap1:"R98",DragonTailStrap2Left:"R104",DragonTailStrap2Right:"R104",DragonsTail:"R119",FoxTailStrap:"R122",FoxTailsStrap:"R98",HorseTailStrap:"R98",HorseTailStrap1:"R98",KittenTailStrap1:"R98",KittenTailStrap2:"R98",LargeBushyTail:"R115",LatexFoxTail:"R109",LionTailStrap:"R98",MouseTailStrap1:"R98",MouseTailStrap2:"R98",PuppyTailStrap:"R98",PuppyTailStrap1:"R98",RaccoonStrap:"R98",RaccoonTailStrap:"R98",SkunkTail:"R109",SuccubusHeartTailStrap:"R98",SuccubusTailStrap:"R98",TailStrap:"R98",Tentacles:"R98",WolfTailStrap1:"R98",WolfTailStrap2:"R98",WolfTailStrap3:"R98"},Wings$1={AngelFeather:"R98",AngelWings:"R98",BatWings:"R98",BeeWings:"R98",CyberWings:"R98",DevilWings:"R98",DragonWings:"R107",FairyWings:"R98",FallenAngelWings:"R98",PixieWings:"R98",SteampunkWings:"R98",SuccubusFeather:"R98",SuccubusWings:"R98"},assetVersion={AnkletLeft:AnkletLeft$1,AnkletRight:AnkletRight$1,ArmsLeft:ArmsLeft$1,ArmsRight:ArmsRight$1,Blush:Blush$1,BodyLower:BodyLower$1,BodyMarkings:BodyMarkings$1,BodyStyle:BodyStyle$1,BodyUpper:BodyUpper$1,Bra:Bra$1,Bracelet:Bracelet$1,Cloth:Cloth$1,ClothAccessory:ClothAccessory$1,ClothLower:ClothLower$1,ClothOuter:ClothOuter$1,Corset:Corset$1,Decals:Decals$1,Emoticon:Emoticon$1,Eyebrows:Eyebrows$1,Eyes:Eyes$1,Eyes2:Eyes2$1,EyeShadow:EyeShadow$1,FaceMarkings:FaceMarkings$1,FacialHair:FacialHair$1,Fluids:Fluids$1,Garters:Garters$1,Glasses:Glasses$1,Gloves:Gloves$1,HairAccessory1:HairAccessory1$1,HairAccessory2:HairAccessory2$1,HairAccessory3:HairAccessory3$1,HairBack:HairBack$1,HairFront:HairFront$1,HandAccessoryLeft:HandAccessoryLeft$1,HandAccessoryRight:HandAccessoryRight$1,HandsLeft:HandsLeft$1,HandsRight:HandsRight$1,Hat:Hat$1,Head:Head$1,Height:Height$1,ItemAddon:ItemAddon$1,ItemArms:ItemArms$1,ItemBoots:ItemBoots$1,ItemBreast:ItemBreast$1,ItemButt:ItemButt$1,ItemDevices:ItemDevices$1,ItemEars:ItemEars$1,ItemFeet:ItemFeet$1,ItemHandheld:ItemHandheld$1,ItemHands:ItemHands$1,ItemHead:ItemHead$1,ItemHood:ItemHood$1,ItemLegs:ItemLegs$1,ItemMisc:ItemMisc$1,ItemMouth:ItemMouth$1,ItemMouth2:ItemMouth2$1,ItemMouth3:ItemMouth3$1,ItemNeck:ItemNeck$1,ItemNeckAccessories:ItemNeckAccessories$1,ItemNeckRestraints:ItemNeckRestraints$1,ItemNipples:ItemNipples$1,ItemNipplesPiercings:ItemNipplesPiercings$1,ItemNose:ItemNose$1,ItemPelvis:ItemPelvis$1,ItemScript:ItemScript$1,ItemTorso:ItemTorso$1,ItemTorso2:ItemTorso2$1,ItemVulva:ItemVulva$1,ItemVulvaPiercings:ItemVulvaPiercings$1,Jewelry:Jewelry$1,Mask:Mask$1,Mouth:Mouth$1,Necklace:Necklace$1,Nipples:Nipples$1,Panties:Panties$1,Pronouns:Pronouns$1,Pussy:Pussy$1,Shoes:Shoes$1,Socks:Socks$1,SocksLeft:SocksLeft$1,SocksRight:SocksRight$1,Suit:Suit$1,SuitLower:SuitLower$1,TailStraps:TailStraps$1,Wings:Wings$1},assetVersion$1=Object.freeze({__proto__:null,AnkletLeft:AnkletLeft$1,AnkletRight:AnkletRight$1,ArmsLeft:ArmsLeft$1,ArmsRight:ArmsRight$1,Blush:Blush$1,BodyLower:BodyLower$1,BodyMarkings:BodyMarkings$1,BodyStyle:BodyStyle$1,BodyUpper:BodyUpper$1,Bra:Bra$1,Bracelet:Bracelet$1,Cloth:Cloth$1,ClothAccessory:ClothAccessory$1,ClothLower:ClothLower$1,ClothOuter:ClothOuter$1,Corset:Corset$1,Decals:Decals$1,Emoticon:Emoticon$1,EyeShadow:EyeShadow$1,Eyebrows:Eyebrows$1,Eyes:Eyes$1,Eyes2:Eyes2$1,FaceMarkings:FaceMarkings$1,FacialHair:FacialHair$1,Fluids:Fluids$1,Garters:Garters$1,Glasses:Glasses$1,Gloves:Gloves$1,HairAccessory1:HairAccessory1$1,HairAccessory2:HairAccessory2$1,HairAccessory3:HairAccessory3$1,HairBack:HairBack$1,HairFront:HairFront$1,HandAccessoryLeft:HandAccessoryLeft$1,HandAccessoryRight:HandAccessoryRight$1,HandsLeft:HandsLeft$1,HandsRight:HandsRight$1,Hat:Hat$1,Head:Head$1,Height:Height$1,ItemAddon:ItemAddon$1,ItemArms:ItemArms$1,ItemBoots:ItemBoots$1,ItemBreast:ItemBreast$1,ItemButt:ItemButt$1,ItemDevices:ItemDevices$1,ItemEars:ItemEars$1,ItemFeet:ItemFeet$1,ItemHandheld:ItemHandheld$1,ItemHands:ItemHands$1,ItemHead:ItemHead$1,ItemHood:ItemHood$1,ItemLegs:ItemLegs$1,ItemMisc:ItemMisc$1,ItemMouth:ItemMouth$1,ItemMouth2:ItemMouth2$1,ItemMouth3:ItemMouth3$1,ItemNeck:ItemNeck$1,ItemNeckAccessories:ItemNeckAccessories$1,ItemNeckRestraints:ItemNeckRestraints$1,ItemNipples:ItemNipples$1,ItemNipplesPiercings:ItemNipplesPiercings$1,ItemNose:ItemNose$1,ItemPelvis:ItemPelvis$1,ItemScript:ItemScript$1,ItemTorso:ItemTorso$1,ItemTorso2:ItemTorso2$1,ItemVulva:ItemVulva$1,ItemVulvaPiercings:ItemVulvaPiercings$1,Jewelry:Jewelry$1,Mask:Mask$1,Mouth:Mouth$1,Necklace:Necklace$1,Nipples:Nipples$1,Panties:Panties$1,Pronouns:Pronouns$1,Pussy:Pussy$1,Shoes:Shoes$1,Socks:Socks$1,SocksLeft:SocksLeft$1,SocksRight:SocksRight$1,Suit:Suit$1,SuitLower:SuitLower$1,TailStraps:TailStraps$1,Wings:Wings$1,default:assetVersion}),Blush={id:0,assets:{Blush:0}},BodyLower={id:1,assets:{Large:0,Normal:1,Small:2,XLarge:3}},BodyMarkings={id:2,assets:{WombTattoos:0,BodyWritings:1,FaceScars:2,FacePaints:3,Splatters:4,FacePaint:5}},BodyUpper={id:3,assets:{FlatMedium:0,FlatSmall:1,Large:2,Normal:3,Small:4,XLarge:5}},Bra={id:4,assets:{Bandeau1:0,Bikini1:1,BondageBra1:2,Bra1:3,Bra10:4,Bra2:5,Bra7:6,Bra8:7,Bra9:8,BunnySuit:9,Bustier1:10,Camisole:11,ChineseBra1:12,ClamShell:13,CoconutBra:14,CorsetBikini1:15,CowPrintedBra:16,CuteBikini1:17,DominatrixLeotard:18,FishnetBikini1:19,FlowerBra:20,FrameBra1:21,FrameBra2:22,FullLatexBra:23,FullLatexBra2:24,HaremBra:25,HarnessBra1:26,HarnessBra2:27,HeartTop:28,KittyBra1:29,LatexBra1:30,LatexBunnySuit:31,LeatherBreastBinder:32,LeatherStrapBra1:33,MaidBra1:34,OuvertPerl1:35,Ribbons:36,Sarashi1:37,SexyBeachBra1:38,SexyBikini1:39,SexyBikini2:40,SexyBikini3:41,SexyBikiniBra1:42,SleevelessSlimLatexLeotard:43,StarHarnessBra:44,StrapBra:45,StuddedHarness:46,Swimsuit1:47,Swimsuit2:48,Swimsuit3:49,LeatherVestSuit:50,MeshTop:51,ShinyLeotard:52,OrnateMetalBra:53,Bandage:54,LeatherBunnyHollowBra:55,MaidBra:56,SatinCorset:57,SportBra:58,SportSwimsuit:59}},Bracelet={id:5,assets:{Band1:0,BowBand:1,KinkBracelet:2,LaceBands:3,LesBand:4,SpikeBands:5,Wristband:6,WristWatch:7}},Cloth={id:6,assets:{AdmiralTop:0,AdultBabyDress1:1,AdultBabyDress2:2,AdultBabyDress3:3,AdultBabyDress4:4,BabydollDress1:5,Blouse1:6,Bodice1:7,BodyTowel1:8,BondageBustier1:9,BondageBustier2:10,BondageDress1:11,BondageDress2:12,BridesmaidDress1:13,BusinessSuit:14,ButtonShirt:15,CheerleaderTop:16,ChineseDress1:17,ChineseDress2:18,CollegeOutfit1:19,ComfyTop:20,CorsetDress:21,CorsetShirt:22,CropTop:23,Dress2:24,Dress3:25,DressFur:26,EveningGown:27,FishnetTop:28,FlowerDress:29,FrilledShirt:30,FurCoat:31,FuzzyDress:32,Gown1:33,Gown2Top:34,Gown3:35,GrandMage:36,HeavyLeatherDress:37,Hoodie:38,Jacket:39,LaceBabydoll:40,LatexLacedSuit:41,LatexTankTop:42,LatexTop:43,Laurel:44,LeatherBolero:45,LeatherCorsetTop1:46,LeatherCropTop:47,MaidApron1:48,MaidApron2:49,MaidLatex:50,MaidOutfit1:51,MaidOutfit2:52,MaleTankTop1:53,MistressTop:54,NurseUniform:55,RetroGirdle:56,ReverseBunnySuit:57,Robe1:58,SeethroughTop:59,ShoulderlessTop:60,SlaveRags:61,SleevelessTop:62,SteampunkCorsetTop1:63,StudentOutfit1:64,StudentOutfit2:65,StudentOutfit3:66,SummerDress:67,SuspenderTop1:68,Sweater1:69,TeacherOutfit1:70,TennisShirt1:71,TShirt1:72,TShirt2:73,VirginKiller1:74,WeddingDress1:75,WeddingDress2:76,Yukata1:77,CustomTShirt:78,NunRobes:79,YuletideVelvetWarmth:80,AnimeGirl:81,LatexHobbleDress:82,RibbonCorset:83,MeshTop:84,BartenderVest:85,BartenderVestM:86,CocktailDress:87,MaidBikini:88,OffTheShoulderTop:89}},ClothAccessory={id:7,assets:{Bib:0,Bouquet:1,BugLegs:2,BunnyCollarCuffs:3,Camera1:4,Cape:5,CatsuitCollar:6,FacePaint:7,FrillyApron:8,FurBolero:9,Glitter:10,JewelrySet:11,Kissmark:12,KissmarkDummy:13,LargeBelt:14,LatexApron:15,LeatherStraps:16,Poncho:17,Scarf:18,StudentOutfit3Bow1:19,StudentOutfit3Bow2:20,StudentOutfit3Bow3:21,StudentOutfit3Scarf:22,WombTattoos:23,ZipperBelt:24,BodyWritings:25,BowBackAccessory:26,LargeNeckFur:27,SmallNeckFur:28,SpikyNeckFur:29,LeatherBeltCloth:30,ComboBelt:31,FaceWritings:32,SatinScarf:33,HoodedCloak:34,SideRuffles:35,RuffledCollar:36,FuzzyScarf:37,LargeBeltClassic:38,VampiricCloak:39,WitchShawl:40,XmasLongShawl:41,XmasShortShawl:42}},ClothLower={id:8,assets:{AdmiralSkirt:0,AsymmetricSkirt:1,BondageSkirt:2,BusinessSkirt:3,BusinessTrousers:4,CheerleaderSkirt:5,ChineseSkirt1:6,ClothSkirt1:7,CollegeSkirt:8,CrossSkirt:9,CrossSkirtLight:10,ElegantSkirt:11,Gown2Skirt:12,HaremPants:13,HaremPants2:14,HulaSkirt:15,Jeans1:16,Jeans2:17,JeanSkirt:18,JeansShorts:19,LatexPants1:20,LatexSkirt1:21,LatexSkirt2:22,Leggings1:23,Leggings2:24,LongLeatherSkirt:25,LongPleatedSkirt:26,LongSkirt1:27,MageSkirt:28,MistressBottom:29,Pajama1:30,PantBoots:31,PencilSkirt:32,PleatedSkirt:33,RuffledSkirt:34,ShortPencilSkirt:35,ShortPlaidSkirt:36,Shorts1:37,Skirt1:38,Skirt2:39,Skirt3:40,TennisSkirt1:41,TulleSkirt:42,Tutu:43,Waspie1:44,Waspie2:45,Waspie3:46,SatinSkirt:47,ASRubberSkirt:48,MidLegSkirt:49,UtilityKilt:50,GymShorts:51,RuffledMiniskirt:52,BaggyJeans:53,MiniDenimHotPants:54,OpenLeatherSkirt:55,PVCHobbleSkirt:56,YogaPants:57}},Corset={id:9,assets:{ClassicLatexCorset:0,Corset1:1,Corset2:2,Corset3:3,Corset4:4,Corset5:5,Corset6:6,CorsetDress:7,LatexCorset1:8,LeatherCorsetTop1:9,SteampunkCorsetTop1:10,Underbust:11,TightCorset:12,RibbonCorset:13,ExtremeCorset:14,SatinCorset:15,BarrelCorset:16}},Emoticon={id:10,assets:{Emoticon:0}},Eyebrows={id:11,assets:{Eyebrows1:0,Eyebrows2:1,Eyebrows7:2,Eyebrows8:3}},Eyes={id:12,assets:{Eyes1:0,Eyes10:1,Eyes11:2,Eyes12:3,Eyes13:4,Eyes14:5,Eyes2:6,Eyes3:7,Eyes4:8,Eyes5:9,Eyes6:10,Eyes7:11,Eyes8:12,Eyes9:13,Eyes15:14}},Eyes2={id:13,assets:{Eyes1:0,Eyes10:1,Eyes11:2,Eyes12:3,Eyes13:4,Eyes14:5,Eyes2:6,Eyes3:7,Eyes4:8,Eyes5:9,Eyes6:10,Eyes7:11,Eyes8:12,Eyes9:13,Eyes15:14}},EyeShadow={id:14,assets:{CatEye:0,CatEye2:1,LargeBlurred:2,LargeSolid:3,SmallBlurred:4,SmallSolid:5,SuperstarBlurred:6,SuperstarSolid:7,Tanuki:8,UndershadowedBlurred:9,UndershadowedSolid:10,Wings:11}},FacialHair={id:15,assets:{BigBeard:0,ChinstrapBeard:1,Goatee:2,MediumBeard:3,Moustache:4,MoustacheBeard:5,Handlebar:6,LargeBeard:7,LargeGoatee:8,MuttonChops:9,VanDyke:10,VanDykeHandlebar:11,XLBeard:12,XLGoatie:13,XLMoustache:14,XXLBeard:15,XXLBeardHandlebar:16,XXLBeardXLStache:17}},Fluids={id:16,assets:{Fluids:0}},Garters={id:17,assets:{DropBag:0,GarterBelt:1,GarterBelt2:2,GarterBelt3:3,Tentacles:4,HipHarness:5,WaistLegHarness:6,ComboBelt:7,FemPelvisHarness:8,ButterflyGarter:9}},Glasses={id:18,assets:{CatGlasses:0,EyePatch1:1,Glasses1:2,Glasses2:3,Glasses3:4,Glasses4:5,Glasses5:6,Glasses6:7,Goggles:8,GradientSunglasses:9,JokeGlasses:10,StreetEyewear:11,SunGlasses1:12,SunGlasses2:13,SunGlassesClear:14,VGlasses:15,Pincenez:16,RoundSunglasses:17,HalfRimGlasses:18,Monocle:19,ShutterSunshades:20,VintageSunglasses:21}},Gloves={id:19,assets:{BikerGloves:0,Catsuit:1,CheerleaderPomPoms:2,CowPrintedGloves:3,FingerlessGloves:4,FishnetGloves:5,Gloves1:6,Gloves2:7,Gloves3:8,GlovesFur:9,HaremGlove:10,LatexElbowGloves:11,LatexShortGloves:12,MistressGloves:13,SeethroughSuit:14,WarmGloves:15,OperaGloves:16,AnimeGirlGloves:17}},HairAccessory1={id:20,assets:{Antennae:0,BatWings:1,BigLynxEars:2,BunnyEars1:3,BunnyEars2:4,CowHorns:5,DildocornHorn:6,Ears1:7,Ears2:8,EarWarmer:9,ElfEars:10,FoxEars1:11,FoxEars2:12,FoxEars3:13,GiantBow1:14,HairFeathers1:15,HairFlower1:16,Halo:17,Headset1:18,Horns:19,Horns2:20,Horns3:21,KittenEars1:22,KittenEars2:23,MouseEars1:24,MouseEars2:25,PonyEars1:26,PuppyEars1:27,PuppyEars2:28,RaccoonEars1:29,Ribbons1:30,Ribbons2:31,Ribbons3:32,Ribbons4:33,SuccubusHorns:34,UnicornHorn:35,WeddingVeil1:36,WolfEars1:37,WolfEars2:38,CowEars:39,Horns4:40,Horns5:41,CyberneticEars1:42,Onihorns:43,SkunkEars:44,AquaticEars:45,CyberEars:46,FloppyBunnyEars:47,CustomizableCatEars:48,CustomizableCowEars:49,CustomizableElfEars:50,CustomizableFluffyEars1:51,CustomizableFluffyEars2:52,CustomizableFluffyEars3:53}},HairAccessory2={id:21,assets:{Antennae:0,BatWings:1,BunnyEars1:2,BunnyEars2:3,CowHorns:4,DildocornHorn:5,Ears1:6,Ears2:7,ElfEars:8,FoxEars1:9,FoxEars2:10,FoxEars3:11,Horns:12,Horns2:13,Horns3:14,KittenEars1:15,KittenEars2:16,MouseEars1:17,MouseEars2:18,PonyEars1:19,PuppyEars1:20,PuppyEars2:21,RaccoonEars1:22,SuccubusHorns:23,UnicornHorn:24,WolfEars1:25,WolfEars2:26,CowEars:27,Horns4:28,Horns5:29,Onihorns:30,SkunkEars:31,AquaticEars:32,CyberneticEars1:33,BigLynxEars:34,CyberEars:35,FloppyBunnyEars:36,CustomizableCatEars:37,CustomizableCowEars:38,CustomizableElfEars:39,CustomizableFluffyEars1:40,CustomizableFluffyEars2:41,CustomizableFluffyEars3:42}},HairAccessory3={id:22,assets:{EarWarmer:0,GiantBow1:1,HairFeathers1:2,HairFlower1:3,Halo:4,Headset1:5,Ribbons1:6,Ribbons2:7,Ribbons3:8,Ribbons4:9,WeddingVeil1:10}},HairBack={id:23,assets:{HairBack1:0,HairBack10:1,HairBack10b:2,HairBack11:3,HairBack12:4,HairBack12b:5,HairBack13:6,HairBack13b:7,HairBack14:8,HairBack15:9,HairBack15b:10,HairBack16:11,HairBack17:12,HairBack18:13,HairBack18b:14,HairBack19:15,HairBack19b:16,HairBack1b:17,HairBack2:18,HairBack20:19,HairBack20b:20,HairBack21:21,HairBack22:22,HairBack23:23,HairBack24:24,HairBack25:25,HairBack26:26,HairBack27:27,HairBack28:28,HairBack29:29,HairBack2b:30,HairBack30:31,HairBack31:32,HairBack32:33,HairBack33:34,HairBack34:35,HairBack35:36,HairBack36:37,HairBack37:38,HairBack38:39,HairBack39:40,HairBack4:41,HairBack40:42,HairBack41:43,HairBack42:44,HairBack43:45,HairBack44:46,HairBack45:47,HairBack46:48,HairBack47:49,HairBack48:50,HairBack49:51,HairBack4b:52,HairBack5:53,HairBack50:54,HairBack51:55,HairBack52:56,HairBack53:57,HairBack54:58,HairBack54b:59,HairBack55:60,HairBack55b:61,HairBack56:62,HairBack56b:63,HairBack57:64,HairBack57b:65,HairBack57c:66,HairBack57d:67,HairBack5b:68,HairBack6:69,HairBack6b:70,HairBack7:71,HairBack7b:72,HairBack7c:73,HairBack8:74,HairBack9:75,HairBack9b:76,HairNone:77,HairBack58:78,HairBack58b:79,HairBack59:80,HairBack60:81,HairBack61:82,HairBack62:83,HairBack63:84,ScalyBackHair:85,HairBack64:86,HairBack65:87,HairBack65b:88,HairBack66:89,HairBack67:90,HairBack68:91,HairBack69:92,HairBack69b:93,HairBack70:94,HairBack70b:95,HairBack71:96,HairBack72:97,HairBack73:98,HairBack74:99,HairBack75:100,HairBack76:101,HairBack76b:102,HairBack77:103,HairBack77b:104,HairBack77c:105,HairBack78:106,HairBack78b:107,HairBack78c:108,HairBack79:109,HairBack80:110,HairBack81:111,HairBack82:112,HairBack83:113,HairBack84:114}},HairFront={id:24,assets:{HairFront1:0,HairFront10:1,HairFront10b:2,HairFront11:3,HairFront11b:4,HairFront12:5,HairFront12b:6,HairFront13:7,HairFront13b:8,HairFront14:9,HairFront14b:10,HairFront15:11,HairFront16:12,HairFront17:13,HairFront17b:14,HairFront18:15,HairFront19:16,HairFront1b:17,HairFront2:18,HairFront20:19,HairFront21:20,HairFront22:21,HairFront22b:22,HairFront23:23,HairFront23b:24,HairFront24:25,HairFront25:26,HairFront26:27,HairFront27:28,HairFront28:29,HairFront28b:30,HairFront29:31,HairFront29b:32,HairFront2b:33,HairFront3:34,HairFront30:35,HairFront31:36,HairFront32:37,HairFront33:38,HairFront33b:39,HairFront34:40,HairFront35:41,HairFront36:42,HairFront37:43,HairFront37b:44,HairFront38:45,HairFront38b:46,HairFront39:47,HairFront39b:48,HairFront3b:49,HairFront4:50,HairFront40:51,HairFront40b:52,HairFront41:53,HairFront41b:54,HairFront42:55,HairFront42b:56,HairFront43:57,HairFront43b:58,HairFront44:59,HairFront44b:60,HairFront45:61,HairFront45b:62,HairFront46:63,HairFront46b:64,HairFront47:65,HairFront47b:66,HairFront48:67,HairFront48b:68,HairFront49:69,HairFront4b:70,HairFront5:71,HairFront50:72,HairFront51:73,HairFront51b:74,HairFront52:75,HairFront52b:76,HairFront53:77,HairFront5b:78,HairFront6:79,HairFront6b:80,HairFront7:81,HairFront7b:82,HairFront8:83,HairFront8b:84,HairFront9:85,HairFront9b:86,HairFront54:87,HairFront55:88,HairFront56:89,HairFront57:90,HairFront58:91,HairFront59:92,HairFront60:93,HairFront61:94,ScalyHair:95,HairFront62a:96,HairFront62b:97,HairFront63:98,HairFront64:99,HairFront65:100,HairFront66:101,HairFront67:102,HairFront68:103,HairFront69:104,HairFront70:105,HairFront71:106,HairFront72:107,HairFront73:108,HairFront74:109}},Hands={id:25,assets:{Default:0}},Hat={id:26,assets:{BakerBoyHat:0,BallCapBack:1,BallCapFront:2,Band1:3,Band2:4,Bandana:5,Beanie:6,Beret1:7,Bonnet1:8,Bonnet2:9,BunnySuccubus2:10,CaptainHat1:11,CollegeDunce:12,CowboyHat:13,Crown1:14,Crown2:15,Crown3:16,Crown4:17,Crown5:18,FacePaint:19,FlowerCrown:20,FurHeadband:21,HeadTowel1:22,LatexHabit:23,MaidHairband1:24,MaidLatexHairband:25,NunHabit:26,NurseCap:27,PirateBandana1:28,PirateHat:29,PoliceWomanHat:30,PoppyCrown:31,ReindeerBand:32,RoseCrown:33,Santa1:34,SmallHat1:35,SwimCap:36,Tiara1:37,Veil1:38,Veil2:39,WitchHat1:40,NunVeil:41,AnimeGirlTiara:42,VintageHat:43,CheapHelmet:44,FlatCap:45,Gat:46}},Head={id:27,assets:{Default:0,NoEars:1,SmallEars:2}},Height={id:28,assets:{H0900:0,H0910:1,H0920:2,H0930:3,H0940:4,H0950:5,H0960:6,H0970:7,H0980:8,H0990:9,H1000:10}},ItemAddon={id:29,assets:{BedChains:0,BedRopes:1,BedStraps:2,BedTape:3,CeilingChain:4,CeilingRope:5,Covers:6,CeilingNeckCuff:7}},ItemArms={id:30,assets:{ArmbinderJacket:0,BitchSuit:1,Bolero:2,BondageBouquet:3,BondageBra:4,BoxTieArmbinder:5,CanvasStraitjacket1:6,CeilingShackles:7,Chains:8,CollarCuffs:9,DuctTape:10,FourLimbsShackles:11,FullBodyLeatherHarness:12,FullBodyShackles:13,FullLatexSuit:14,FurStraitJacket:15,FuturisticArmbinder:16,FuturisticCuffs:17,FuturisticStraitjacket:18,HeavyYoke:19,HempRope:20,HighSecurityStraitJacket:21,HighStyleSteelCuffs:22,InflatableStraightLeotard:23,LatexArmbinder:24,LatexBoxtieLeotard:25,LatexButterflyLeotard:26,LatexSleevelessLeotard:27,LeatherArmbinder:28,LeatherArmSplints:29,LeatherCuffs:30,LeatherDeluxeCuffs:31,LeatherStraitJacket:32,Manacles:33,MedicalBedRestraints:34,MermaidSuit:35,MetalCuffs:36,NylonRope:37,OrnateCuffs:38,PantyhoseBody:39,PantyhoseBodyOpen:40,PetCrawler:41,Pillory:42,PlasticWrap:43,PrisonLockdownSuit:44,PrisonSJ:45,Ribbons:46,SeamlessLatexArmbinder:47,SeamlessStraitDress:48,SeamlessStraitDressOpen:49,ShinyArmbinder:50,ShinyPetSuit:51,ShinyStraitjacket:52,SleepSac:53,Slime:54,SmoothLeatherArmbinder1:55,SteelCuffs:56,StraitDress:57,StraitDressOpen:58,StraitJacket:59,StraitLeotard:60,StrictLeatherPetCrawler:61,SturdyLeatherBelts:62,Tentacles:63,ThinLeatherStraps:64,TightJacket:65,TightJacketCrotch:66,TransportJacket:67,UnderBedBondageCuffs:68,Web:69,WoodenCuffs:70,WrappedBlanket:71,WristShackles:72,Yoke:73,Zipties:74,CollarMetalcuffs:75,ArmbinderSuit:76,BedMetalCuffs:77,InflatableDress:78,SteelBelt:79,PawPaddedPetsuitArms:80,StrappedPetsuitArms:81}},ItemBoots={id:31,assets:{BalletHeels:0,BalletHeels1:1,BalletWedges:2,FuturisticHeels:3,FuturisticHeels2:4,HighThighBoots:5,LeatherFootMitts1:6,LeatherToeCuffs:7,LockingBoots1:8,LockingHeels:9,LockingHeels2:10,LockingShoes1:11,LockingShoes2:12,MetalBallet:13,MonoHeel:14,PonyBoots:15,ShortPonyBoots:16,Slime:17,ThighHighLatexHeels:18,ToeCuffs:19,ToeTape:20,ToeTie:21,Zipties:22,TormentHeels:23,StrictPonyBoots:24,BalletMittens:25,HeellessHoof:26,HoofBoots:27,SingleBalletBoot:28,ZipperBBoots:29}},ItemBreast={id:32,assets:{ForbiddenChastityBra:0,FuturisticBra:1,FuturisticBra2:2,LeatherBreastBinder:3,MetalChastityBra:4,OrnateChastityBra:5,PolishedChastityBra:6,Ribbons:7,TickleBra:8,ChastityPlate:9}},ItemButt={id:33,assets:{AnalBeads:0,AnalBeads2:1,AnalHook:2,BlackButtPlug:3,BunnyTailPlug1:4,BunnyTailPlug2:5,BunnyTailVibePlug:6,ButtPlugLock:7,ButtPump:8,Cowtail:9,DemonPlug:10,EggVibePlugXXL:11,FoxTail1:12,FoxTail2:13,FoxTails:14,HollowButtPlug:15,HorsetailPlug:16,HorsetailPlug1:17,InflVibeButtPlug:18,KittenTail1:19,KittenTail2:20,LockingVibePlug:21,MouseTail1:22,MouseTail2:23,PenisPlug:24,PuppyTailPlug:25,PuppyTailPlug1:26,RaccoonButtPlug:27,RaccoonTailPlug:28,ShockPlug:29,Stitches:30,SuccubusButtPlug:31,SuccubusHeartButtPlug:32,TailButtPlug:33,Tentacles:34,VibratingButtplug:35,VibratingDildoPlug:36,WolfTail1:37,WolfTail2:38,WolfTail3:39,FuckPlug:40,FoxTail:41}},ItemDevices={id:34,assets:{BBQ:0,Bed:1,BondageBench:2,BurlapSack:3,Cage:4,ChangingTable:5,Coffin:6,ConcealingCloak:7,Crib:8,CryoCapsule:9,Cushion:10,DisplayCase:11,DollBox:12,Familiar:13,FoldingScreen:14,FuckMachine:15,FurBlanketWrap:16,FuturisticCrate:17,InflatableBodyBag:18,KabeshiriWall:19,Kennel:20,LittleMonster:21,Locker:22,LowCage:23,LuckyWheel:24,MedicalBed:25,MilkCan:26,Net:27,OneBarPrison:28,PersonalCage:29,PetBed:30,PetBowl:31,Pole:32,SaddleStand:33,SmallDisplayCase:34,SmallLocker:35,SmallWoodenBox:36,SmallWoodenBoxOpenHead:37,Snowman:38,StrapOnSmooth:39,StrapOnStuds:40,Sybian:41,TheDisplayFrame:42,TheHangingFrame:43,TransportWoodenBox:44,Trolley:45,Vacbed:46,VacbedClear:47,VacBedDeluxe:48,VacCube:49,WaterCell:50,WetFloor:51,WheelFortune:52,WoodenBox:53,WoodenBoxOpenHead:54,WoodenHorse:55,WoodenRack:56,WoodenStocks:57,"X-Cross":58,GlueFloor:59,OneBarGirl:60,Cement:61,BrickWall:62,PogoBall:63,BoundBar:64,Throne:65,ExclusiveWaitress:66,LeatherCage:67,Highchair:68,SingleBalletBoot:69,Microphone:70,Enema:71,Potty:72}},ItemEars={id:35,assets:{BluetoothEarbuds:0,FuturisticEarphones:1,HeadphoneEarPlugs:2,Headphones:3,HeavyDutyEarPlugs:4,LightDutyEarPlugs:5,CustomizableCatEars:6,CustomizableCowEars:7,CustomizableElfEars:8,CustomizableFluffyEars1:9,CustomizableFluffyEars2:10,CustomizableFluffyEars3:11}},ItemFeet={id:36,assets:{AnkleShackles:0,BallChain:1,Chains:2,DuctTape:3,EscortAnkleCuffs:4,FloorShackles:5,FuturisticAnkleCuffs:6,HeavyAnkleCuffs:7,HeavySpreaderMetal:8,HempRope:9,HighStyleSteelAnkleCuffs:10,Irish8Cuffs:11,LeatherAnkleCuffs:12,LeatherBelt:13,LeatherDeluxeAnkleCuffs:14,MedicalBedRestraints:15,NylonRope:16,OrnateAnkleCuffs:17,PlasticWrap:18,Slime:19,SpreaderDildoBar:20,SpreaderMetal:21,SpreaderVibratingDildoBar:22,SteelAnkleCuffs:23,SturdyLeatherBelts:24,SuspensionCuffs:25,Tentacles:26,WoodenCuffs:27,Zipties:28,HeelBinders:29,KneeOvernighter:30,MassiveAnkleCuffs:31}},ItemHandheld={id:37,assets:{Baguette:0,Ballgag:1,Belt:2,Broom:3,BunPlush:4,CandleWax:5,Cane:6,CattleProd:7,Crop:8,ElectricToothbrush:9,Feather:10,FeatherDuster:11,Flogger:12,ForSaleSign:13,FoxPlush:14,Gavel:15,GlassEmpty:16,GlassFilled:17,Hairbrush:18,HeartCrop:19,IceCube:20,Karl:21,KeyProp:22,LargeDildo:23,LongDuster:24,LongSock:25,Lotion:26,MedicalInjector:27,Mug:28,Paddle:29,Panties:30,PetPotato:31,PetToy:32,Phone1:33,Phone2:34,PlasticWrap:35,Popcorn:36,PortalTablet:37,PotionBottle:38,RainbowWand:39,RopeCoilLong:40,RopeCoilShort:41,Ruler:42,Scissors:43,Shark:44,ShockRemote:45,ShockWand:46,SmallDildo:47,SmallVibratingWand:48,Smartphone:49,Spatula:50,Sword:51,TapeRoll:52,TennisRacket:53,Toothbrush:54,Towel:55,VibeRemote:56,VibratingWand:57,Vibrator:58,WartenbergWheel:59,Whip:60,WhipPaddle:61,GlueTube:62,AnimeGirlWand:63,Brick:64,Trowel:65,Kyosensu:66,Uchiwa:67,Cigarette:68,Plushies:69,FoamRoll:70,Plushie:71,BabyPowder:72,Diaper:73,MiniDolls:74,Wipes:75}},ItemHands={id:38,assets:{CheerleaderPomPoms:0,DuctTape:1,FuturisticMittens:2,HoofMittens:3,LeatherMittens:4,PaddedLeatherMittens:5,PaddedMittens:6,PawMittens:7,PolishedMittens:8,PonyMittensBinder:9,SmoothLeatherMittens1:10,ElbowLengthMittens:11,GlueMittens:12,HempRopeCuffs:13,FullMittens:14,LatexBondageMitts:15,FoamMittens:16,BalletBootsMittens:17}},ItemHead={id:39,assets:{AnimeLenses:0,BigMouthHood:1,BlackoutLenses:2,ClothBlindfold:3,DroneMask:4,DuctTape:5,FrilledSleepMask:6,FullBlindfold:7,FurScarf:8,FuturisticMask:9,InteractiveVisor:10,InteractiveVRHeadset:11,KittyBlindfold:12,LatexBlindfold:13,LeatherBlindfold:14,LeatherSlimMask:15,LeatherSlimMaskOpenEyes:16,LeatherSlimMaskOpenMouth:17,LewdBlindfold:18,MedicalPatch:19,PaddedBlindfold:20,Pantyhose:21,PrisonLockdownBlindfold:22,Ribbons:23,RopeBlindfold:24,ScarfBlindfold:25,SleepMask:26,Slime:27,SmallBlindfold:28,Snorkel:29,Stitches:30,StuddedBlindfold:31,Tentacles:32,WebBlindfold:33,RubberMask:34,Kigu2Hood:35,AsylumBlindfold:36,HypnoticVisor:37}},ItemHood={id:40,assets:{AccentHood:0,BigMouthHood:1,BlanketHood:2,CanvasHood:3,CollarHood:4,CorsetHood:5,CowHood:6,CustomLatexHood:7,DobermanMask:8,DogHood:9,DroneMask:10,FestivalFoxMask:11,FoxHood:12,FoxyMask:13,FuturisticHelmet:14,GasMask:15,GGTSHelmet:16,GP9GasMask:17,GwenHood:18,HarnessCatMask:19,HeadboxSeethrough:20,InflatableGagMask:21,InflatedBallHood:22,KirugumiMask:23,KittyHood:24,LampHeadHood:25,LatexBunny:26,LatexDogHood:27,LatexDogMask:28,LatexHabit:29,LatexHoodOpenHair:30,LeatherHood:31,LeatherHoodOpenEyes:32,LeatherHoodOpenMouth:33,LeatherHoodSealed:34,LeatherHoodSensDep:35,OldGasMask:36,OpenFaceHood:37,OpenMouthPlugHood:38,PantyHood:39,Pantyhose:40,PolishedSteelHood:41,PonyHood:42,PumpkinHead:43,SackHood:44,SensoryDeprivationHood:45,Slime:46,SpaceMask:47,TechnoHelmet1:48,VacHood:49,ZipperHood:50,Fu:51,Paperbag:52,RubberMask:53,CustomBallHood:54,Balloon:55,Kigu2Hood:56,CreepyIronMask:57,HalloIII:58,TransparentLatexHood:59}},ItemLegs={id:41,assets:{Chains:0,DuctTape:1,FrogtieStraps:2,FuturisticLegCuffs:3,HempRope:4,HobbleSkirt:5,LeatherBelt:6,LeatherDeluxeLegCuffs:7,LeatherLegCuffs:8,LegBinder:9,MedicalBedRestraints:10,MermaidTail:11,NylonRope:12,OrnateLegCuffs:13,PlasticWrap:14,Ribbons:15,SeamlessHobbleSkirt:16,SeamlessLegBinder:17,ShinyLegBinder:18,Slime:19,SturdyLeatherBelts:20,Tentacles:21,Zipties:22,FrogtieMetalCuffs:23,BarrelCorset:24,PawPaddedPetsuitLegs:25,StrappedPetsuitLegs:26}},ItemMisc={id:42,assets:{BountySuitcase:0,BountySuitcaseEmpty:1,BunPlush:2,CombinationPadlock:3,ExclusivePadlock:4,FamilyPadlock:5,FamilyPadlockKey:6,FoxPlush:7,HighSecurityPadlock:8,IntricatePadlock:9,Karl:10,Lockpicks:11,LoversPadlock:12,LoversPadlockKey:13,LoversTimerPadlock:14,MetalCuffsKey:15,MetalPadlock:16,MetalPadlockKey:17,MistressPadlock:18,MistressPadlockKey:19,MistressTimerPadlock:20,OwnerPadlock:21,OwnerPadlockKey:22,OwnerTimerPadlock:23,PandoraPadlock:24,PandoraPadlockKey:25,PasswordPadlock:26,PetPost:27,PetPotato:28,PortalLinkPadlock:29,SafewordPadlock:30,ServingTray:31,TeddyBear:32,TimerPadlock:33,TimerPasswordPadlock:34,WoodenMaidTray:35,WoodenMaidTrayFull:36,WoodenPaddle:37,WoodenSign:38,Plushies:39,Plushie:40,MiniDolls:41}},ItemMouth={id:43,assets:{Ball:0,BallGag:1,BallGagMask:2,BambooGag:3,BigMouth:4,BitGag:5,BoneGag:6,CageMuzzle:7,CaneGag:8,CarrotGag:9,ChloroformCloth:10,ChopstickGag:11,ClothGag:12,ClothStuffing:13,CropGag:14,CupholderGag:15,DeepthroatGag:16,DentalGag:17,DildoGag:18,DildoPlugGag:19,DogMuzzleExposed:20,DuctTape:21,DusterGag:22,FoxyHarnessPanelGag:23,FunnelGag:24,FurScarf:25,FuturisticHarnessBallGag:26,FuturisticHarnessPanelGag:27,FuturisticMuzzle:28,FuturisticPanelGag:29,GasMaskGag:30,HarnessBallGag:31,HarnessBallGag1:32,HarnessPacifierGag:33,HarnessPanelGag:34,HarnessPonyBits:35,HookGagMask:36,Kissmark:37,KittyGag:38,KittyHarnessPanelGag:39,KittyMuzzleGag:40,LargeDildo:41,LatexBallMuzzleGag:42,LatexMuzzleMask:43,LatexPostureCollar:44,LatexRespirator:45,LatexSheathGag:46,LeatherCorsetCollar:47,LewdGag:48,LipGag:49,MedicalMask:50,MilkBottle:51,ModularGag:52,MouthFeatureGag:53,MuzzleGag:54,OTNPlugGag:55,PacifierGag:56,PaciGag:57,PaddedFaceMask:58,PantiesMask:59,PantyStuffing:60,PlasticWrap:61,PlugGag:62,PonyGag:63,PrisonLockdownGag:64,PumpGag:65,PumpkinGag:66,RegressedMilk:67,RegularSleepingPill:68,Ribbons:69,RingGag:70,RopeBallGag:71,RopeGag:72,ScarfGag:73,ShoeGag:74,Slime:75,SockStuffing:76,SpiderGag:77,SteelMuzzleGag:78,StitchedMuzzleGag:79,Stitches:80,TechnoGag:81,Tentacles:82,TonguePiercingGag:83,TongueStrapGag:84,WebGag:85,WiffleGag:86,XLBoneGag:87,GlueGag:88,QualityHarnessGag:89,GenitalGag:90,OverfilledGag:91,PremiumMuzzle:92,XmasStickerGag:93,AOMGag:94,HorrorMuzzle:95,AsylumMuzzle:96,Cigarette:97,CompGag:98}},ItemMouth2={id:44,assets:{BallGag:0,BallGagMask:1,BitGag:2,BoneGag:3,CageMuzzle:4,CarrotGag:5,ChloroformCloth:6,ClothGag:7,CupholderGag:8,DildoGag:9,DuctTape:10,DusterGag:11,FoxyHarnessPanelGag:12,FurScarf:13,FuturisticHarnessBallGag:14,FuturisticHarnessPanelGag:15,FuturisticMuzzle:16,FuturisticPanelGag:17,GasMaskGag:18,HarnessBallGag:19,HarnessBallGag1:20,HarnessPacifierGag:21,HarnessPanelGag:22,HarnessPonyBits:23,Kissmark:24,KittyGag:25,KittyHarnessPanelGag:26,KittyMuzzleGag:27,LatexBallMuzzleGag:28,LatexMuzzleMask:29,LatexPostureCollar:30,LatexRespirator:31,LeatherCorsetCollar:32,LewdGag:33,LipGag:34,MedicalMask:35,ModularGag:36,MouthFeatureGag:37,MuzzleGag:38,PaciGag:39,PaddedFaceMask:40,PantiesMask:41,PlasticWrap:42,PonyGag:43,PrisonLockdownGag:44,PumpkinGag:45,RegressedMilk:46,Ribbons:47,RingGag:48,RopeBallGag:49,RopeGag:50,ScarfGag:51,ShoeGag:52,Slime:53,SpiderGag:54,SteelMuzzleGag:55,StitchedMuzzleGag:56,Stitches:57,Tentacles:58,WebGag:59,WiffleGag:60,XLBoneGag:61,Ball:62,BambooGag:63,BigMouth:64,CaneGag:65,ChopstickGag:66,ClothStuffing:67,CropGag:68,DeepthroatGag:69,DentalGag:70,DildoPlugGag:71,DogMuzzleExposed:72,FunnelGag:73,HookGagMask:74,LargeDildo:75,LatexSheathGag:76,MilkBottle:77,OTNPlugGag:78,PacifierGag:79,PantyStuffing:80,PlugGag:81,PumpGag:82,RegularSleepingPill:83,SockStuffing:84,TechnoGag:85,TonguePiercingGag:86,TongueStrapGag:87,GlueGag:88,QualityHarnessGag:89,GenitalGag:90,OverfilledGag:91,PremiumMuzzle:92,XmasStickerGag:93,AOMGag:94,HorrorMuzzle:95,AsylumMuzzle:96,CompGag:97}},ItemMouth3={id:45,assets:{BallGag:0,BallGagMask:1,BitGag:2,BoneGag:3,CageMuzzle:4,CarrotGag:5,ChloroformCloth:6,ClothGag:7,CupholderGag:8,DildoGag:9,DuctTape:10,DusterGag:11,FoxyHarnessPanelGag:12,FurScarf:13,FuturisticHarnessBallGag:14,FuturisticHarnessPanelGag:15,FuturisticMuzzle:16,FuturisticPanelGag:17,GasMaskGag:18,HarnessBallGag:19,HarnessBallGag1:20,HarnessPacifierGag:21,HarnessPanelGag:22,HarnessPonyBits:23,Kissmark:24,KittyGag:25,KittyHarnessPanelGag:26,KittyMuzzleGag:27,LatexBallMuzzleGag:28,LatexMuzzleMask:29,LatexPostureCollar:30,LatexRespirator:31,LeatherCorsetCollar:32,LewdGag:33,LipGag:34,MedicalMask:35,ModularGag:36,MouthFeatureGag:37,MuzzleGag:38,PaciGag:39,PaddedFaceMask:40,PantiesMask:41,PlasticWrap:42,PonyGag:43,PrisonLockdownGag:44,PumpkinGag:45,RegressedMilk:46,Ribbons:47,RingGag:48,RopeBallGag:49,RopeGag:50,ScarfGag:51,ShoeGag:52,Slime:53,SpiderGag:54,SteelMuzzleGag:55,StitchedMuzzleGag:56,Stitches:57,Tentacles:58,WebGag:59,WiffleGag:60,XLBoneGag:61,Ball:62,BambooGag:63,BigMouth:64,CaneGag:65,ChopstickGag:66,ClothStuffing:67,CropGag:68,DeepthroatGag:69,DentalGag:70,DildoPlugGag:71,DogMuzzleExposed:72,FunnelGag:73,HookGagMask:74,LargeDildo:75,LatexSheathGag:76,MilkBottle:77,OTNPlugGag:78,PacifierGag:79,PantyStuffing:80,PlugGag:81,PumpGag:82,RegularSleepingPill:83,SockStuffing:84,TechnoGag:85,TonguePiercingGag:86,TongueStrapGag:87,QualityHarnessGag:88,OverfilledGag:89,PremiumMuzzle:90,XmasStickerGag:91,AOMGag:92,HorrorMuzzle:93,AsylumMuzzle:94}},ItemNeck={id:46,assets:{AutoShockCollar:0,BatCollar:1,BonedNeckCorset:2,BordelleCollar:3,ClubSlaveCollar:4,ComboHarness:5,DogCollar:6,ExtendablePostureCollar:7,FuturisticCollar:8,GothicCollar:9,HeartCollar:10,HeartLinkChoker:11,HighCollar:12,HighSecurityCollar:13,HighStyleSteelCollar:14,LatexCollar1:15,LatexCollar2:16,LatexPostureCollar:17,LatexRingCollar:18,LeatherChoker:19,LeatherCollar:20,LeatherCollarBell:21,LeatherCollarBow:22,LeatherCorsetCollar:23,LeatherDeluxeCollar:24,LoveLeatherCollar:25,MaidCollar:26,NeckRope:27,NobleCorsetCollar:28,NylonCollar:29,OrnateCollar:30,PaddedBeltCollar:31,PetCollar:32,PetSuitShockCollar:33,PostureCollar:34,ShinySteelCollar:35,ShockCollar:36,SlaveCollar:37,SlenderSteelCollar:38,SpikeCollar:39,SpikedChoker:40,SteelPostureCollar:41,StrictPostureCollar:42,TechnoCollar:43,MoonCollar:44,SunCollar:45,AsylumCollar:46,ChainCollar:47,MCuffCollar:48,SSpikedCollar:49,SteampunkCollar:50}},ItemNeckAccessories={id:47,assets:{CollarAutoShockUnit:0,CollarBell:1,CollarBow:2,CollarButterfly:3,CollarCowBell:4,CollarFlower:5,CollarLapis:6,CollarMoon:7,CollarNameTag:8,CollarNameTagLivestock:9,CollarNameTagLover:10,CollarNameTagOval:11,CollarNameTagPet:12,CollarPentagram:13,CollarPupBone:14,CollarRose:15,CollarShockUnit:16,CollarSun:17,CustomCollarTag:18,ElectronicTag:19,Key:20,CollarRoseAmulet:21}},ItemNeckRestraints={id:48,assets:{ChainLeash:0,CollarChainLong:1,CollarChainMedium:2,CollarChainShort:3,CollarLeash:4,CollarRopeLong:5,CollarRopeMedium:6,CollarRopeShort:7,PetPost:8,Post:9,Bedchain:10,ChokeChain:11,MCuffCollar:12}},ItemNipples={id:49,assets:{BellClamps:0,ChainClamp:1,ChainTassles:2,ChopStickNippleClamps:3,Clothespins:4,HeartPasties:5,KittyPasties:6,LactationPump:7,NippleClamp:8,NippleClamps2:9,NippleSuctionCups:10,NippleTape:11,NippleVibe:12,NippleWeightClamps:13,PlateClamps:14,ScrewClamps:15,ShockClamps:16,StretchClovers:17,TapedVibeEggs:18,VibeNippleClamp:19,VibratorRemote:20}},ItemNipplesPiercings={id:50,assets:{BarbellPiercing:0,BellPiercing:1,CrossedStraightPiercing:2,NecklacePiercingChain:3,NippleAccessory1:4,NippleAccessory2:5,NippleAccessory3:6,NippleChastityPiercing1:7,NippleChastityPiercing2:8,RoundPiercing:9,StraightPiercing:10,VibeHeartPiercings:11}},ItemNose={id:51,assets:{BarbelPiercing:0,ClownNose:1,DuctTape:2,NoseHook:3,NosePlugs:4,NoseRing:5,PigNose:6,PigNoseHook:7,GlueNose:8,NoseClip:9}},ItemPelvis={id:52,assets:{BulkyDiaper:0,DiaperHarness:1,ForbiddenChastityBelt:2,FuturisticChastityBelt:3,FuturisticTrainingBelt:4,HarnessPanties1:5,HarnessPanties2:6,HeavyDutyBelt:7,HempRope:8,HybridChastityBelt:9,LeatherChastityBelt:10,LeatherStrapPanties1:11,LoveChastityBelt:12,MetalChastityBelt:13,ModularChastityBelt:14,ObedienceBelt:15,OrnateChastityBelt:16,PelvisChainLeash:17,PolishedChastityBelt:18,PoofyDiaper:19,PortalPanties:20,Ribbons:21,SciFiPleasurePanties:22,SleekLeatherChastityBelt:23,SteelChastityPanties:24,StraponPanties:25,StuddedChastityBelt:26,HipHarness:27,WaistLegHarness:28,FemPelvisHarness:29,LatexDiaper:30,UntrainersThin:31,WombTattoos:32}},ItemScript={id:53,assets:{Script:0}},ItemTorso={id:54,assets:{AdultBabyHarness:0,ClassicLatexCorset:1,Corset2:2,Corset3:3,Corset4:4,Corset5:5,CrotchChain:6,FuturisticHarness:7,HarnessBra1:8,HarnessBra2:9,HeavyLatexCorset:10,HempRopeHarness:11,HighSecurityHarness:12,LatexCorset1:13,LeatherBreastBinder:14,LeatherChestHarness1:15,LeatherHarness:16,LeatherStrapBra1:17,LeatherStrapHarness:18,LockingSwimsuit:19,LockingSwimsuit2:20,NavelBar1:21,NylonRopeHarness:22,Ribbons:23,StuddedHarness:24,ThinLeatherStraps:25,Underbust:26,HipHarness:27,TightCorset:28,RibbonCorset:29,FemPelvisHarness:30,ShinyLeotardLock:31,BarrelCorset:32,ExtremeCorset:33,SteelBelt:34}},ItemTorso2={id:55,assets:{AdultBabyHarness:0,ClassicLatexCorset:1,Corset2:2,Corset3:3,Corset4:4,Corset5:5,CrotchChain:6,FuturisticHarness:7,HarnessBra1:8,HarnessBra2:9,HeavyLatexCorset:10,HempRopeHarness:11,HighSecurityHarness:12,LatexCorset1:13,LeatherBreastBinder:14,LeatherChestHarness1:15,LeatherHarness:16,LeatherStrapBra1:17,LeatherStrapHarness:18,LockingSwimsuit:19,LockingSwimsuit2:20,NavelBar1:21,NylonRopeHarness:22,Ribbons:23,StuddedHarness:24,ThinLeatherStraps:25,Underbust:26,HipHarness:27,TightCorset:28,RibbonCorset:29,FemPelvisHarness:30,ShinyLeotardLock:31,BarrelCorset:32,ExtremeCorset:33,SteelBelt:34}},ItemVulva={id:56,assets:{BasicCockring:0,BenWaBalls:1,ChastityPouch:2,ClitAndDildoVibratorbelt:3,ClitoralStimulator:4,ClitSuctionCup:5,DoubleEndDildo:6,FlatChastityCage:7,FullLatexSuitWand:8,FuturisticVibrator:9,HeavyWeightClamp:10,HempRopeBelt:11,InflatableVibeDildo:12,InflatableVibratingPanties:13,LoversVibrator:14,LoversVibratorRemote:15,PenisDildo:16,PlasticChastityCage1:17,PlasticChastityCage2:18,ShockDildo:19,Stitches:20,TapeStrips:21,TechnoChastityCage:22,VibeEggPenisBase:23,VibratingDildo:24,VibratingEgg:25,VibratingLatexPanties:26,VibratorRemote:27,WandBelt:28,WiredEgg:29,FullCasingCage:30,LatexNulge:31,LockingCockring:32,Ballspreader:33}},ItemVulvaPiercings={id:57,assets:{AdornedClitPiercing:0,BarbellClitPiercing:1,ChastityClitPiercing:2,ChastityClitShield:3,ClitRing:4,HighSecurityVulvaShield:5,JewelClitPiercing:6,RoundClitPiercing:7,StraightClitPiercing:8,TapedClitEgg:9,UrethralSound:10,VibeEggGlans:11,VibeHeartClitPiercing:12,CockRingLeash:13}},Jewelry={id:58,assets:{JewelrySet:0}},LeftAnklet={id:59,assets:{BandAnklet:0,LegFur:1,Ribbon:2,Ribbon1:3,HeelBinders:4}},LeftHand={id:60,assets:{CatsuitGloves:0,Claws:1,Fingernails:2,Rings:3}},Mask={id:61,assets:{AnimeLenses:0,BunnyMask1:1,BunnyMask2:2,BunnyMask3:3,ButterflyMask:4,DominoMask:5,DroneMask:6,FacePaint:7,FaceVeil:8,FestivalFoxMask:9,FoxMask:10,FuturisticVisor:11,Glitter:12,HeadHarness:13,Kissmark:14,KittyMask1:15,KittyMask2:16,KittyMask3:17,LaceMask1:18,LaceMask2:19,LatexMuzzleMask:20,MedicalMask:21,OpenFaceHood:22,PetNose:23,ShinobiMask:24,SwimCap:25,VenetianMask:26,RubberMask:27,AngelMask:28,AnimalNoses:29,DemonMask:30,EldritchMask:31,FaceScars:32,NecromancerHelmet:33,Kigu2Hood:34,Splatters:35}},Mouth={id:62,assets:{Discreet:0,Full:1,Regular:2}},Necklace={id:63,assets:{Bandana:0,BlackHeart:1,BodyChainNecklace:2,CatsuitCollar:3,ChokerTattoo:4,ElegantHeartNecklace:5,FlowerGarland:6,FurScarf:7,IDCard:8,Necklace1:9,Necklace2:10,Necklace3:11,Necklace4:12,NecklaceBallGag:13,NecklaceButterfly:14,NecklaceKey:15,NecklaceLock:16,NecklaceRope:17,PearlNecklace1:18,AnimeGirlNecklace:19,SatinScarf:20,RosePendant:21,RuffledCollar:22,BeadNecklace:23,EldritchNecklace:24,PlantNecklace:25}},Nipples={id:64,assets:{Nipples1:0,Nipples2:1,Nipples3:2}},Panties={id:65,assets:{Bikini1:0,BoxerShorts:1,Briefs:2,BulkyDiaper:3,CatsuitPanties:4,ChinesePanties1:5,CockSock:6,CowPrintedPanties:7,CrotchPanties1:8,Diapers1:9,Diapers2:10,Diapers3:11,Diapers4:12,FloralPanties2:13,FlowerPanties:14,HarnessPanties1:15,HarnessPanties2:16,Jockstrap:17,KittyPanties1:18,LatexCrotchlessPanties:19,LatexPanties1:20,LatexPanties2:21,LeatherStrapPanties1:22,MaidPanties1:23,MaidPanties2:24,MaleCatsuitPanties:25,MicroThong:26,Panties1:27,Panties11:28,Panties12:29,Panties13:30,Panties14:31,Panties15:32,Panties16:33,Panties7:34,Panties8:35,PearlPanties1:36,PilotPanties:37,PoofyDiaper:38,RedBowPanties:39,SexyBeachPanties1:40,StringPanties1:41,StringPasty1:42,StringThong:43,SunstripePanties1:44,Thong:45,WrapPanties1:46,ZipPanties1:47,HipHarness:48,WaistLegHarness:49,FemPelvisHarness:50,LatexDiaper:51,UntrainersThin:52,SportPanties:53}},Pronouns={id:66,assets:{HeHim:0,SheHer:1,TheyThem:2}},Pussy={id:67,assets:{Penis:0,Pussy1:1,Pussy2:2,Pussy3:3}},RightAnklet={id:68,assets:{BandAnklet:0,LegFur:1,Ribbon:2,Ribbon1:3,HeelBinders:4}},RightHand={id:69,assets:{CatsuitGloves:0,Claws:1,Fingernails:2,Rings:3}},Shoes={id:70,assets:{AnkleBoots1:0,AnkleStrapShoes:1,BalletHeels1:2,BarefootSandals1:3,Boots1:4,Clogs:5,DeluxeBoots:6,DutyShoes:7,Flippers:8,FuturisticHeels2:9,FuzzyBoots:10,Geta:11,Heels1:12,Heels2:13,Heels3:14,LatexAnkleShoes:15,LatexHeels:16,MaryShoes:17,MistressBoots:18,PawBoots:19,PonyBoots:20,Sandals:21,SandalsRS:22,Shoes1:23,Shoes2:24,Shoes4:25,Shoes5:26,Sneakers1:27,Sneakers2:28,SneakersSport:29,SocialHeels:30,StilettoHeels:31,StreetBoots:32,TallerBoots:33,ThighBoots:34,ThighHighLatexHeels:35,WesternBoots:36,WoollyBootsTall:37,StrictPonyBoots:38,AnimeGirlBoots:39,CustomHeels:40,FullLegBoots:41,IndoorSlippers:42,WitchShoes:43,HeellessHoof:44,HoofBoots:45,CombatBoots:46,ZipperBBoots:47,PumpHighHeels:48}},Socks={id:71,assets:{CowPrintedSocks:0,FootlessSocks1:1,GradientPantyhose:2,HaremStockings:3,KneePads:4,LatexSocks1:5,LeatherSocks1:6,Pantyhose1:7,Pantyhose2:8,ReverseBunnySuit:9,Socks0:10,Socks1:11,Socks2:12,Socks3:13,Socks4:14,Socks5:15,Socks6:16,SocksFur:17,SocksStriped1:18,Stockings1:19,Stockings2:20,Stockings3:21,Stockings4:22,VSocks1:23,YuletideVelvetWarmth:24,LongFishnets:25,RippedPantyhose:26}},SocksLeft={id:72,assets:{CowPrintedSocks:0,FootlessSocks1:1,HaremStockings:2,KneePads:3,LatexSocks1:4,LeatherSocks1:5,LooseSocks:6,Socks0:7,Socks1:8,Socks2:9,Socks3:10,Socks4:11,Socks5:12,Socks6:13,SocksFur:14,SocksStriped1:15,Stockings1:16,Stockings2:17,Stockings3:18,Stockings4:19,VSocks1:20,HeelBinders:21}},SocksRight={id:73,assets:{CowPrintedSocks:0,FootlessSocks1:1,HaremStockings:2,KneePads:3,LatexSocks1:4,LeatherSocks1:5,LooseSocks:6,Socks0:7,Socks1:8,Socks2:9,Socks3:10,Socks4:11,Socks5:12,Socks6:13,SocksFur:14,SocksStriped1:15,Stockings1:16,Stockings2:17,Stockings3:18,Stockings4:19,VSocks1:20,HeelBinders:21}},Suit={id:74,assets:{Blouse1:0,Catsuit:1,FishnetTop:2,LatexCatsuit:3,MaleSeamlessCatsuit:4,PilotSuit:5,ReverseBunnySuit:6,SeamlessCatsuit:7,SeethroughSuit:8,SeethroughSuitZip:9,SleevelessCatsuit:10,SleevelessSlimLatexLeotard:11,ShinyLeotard:12,BartenderVest:13,BartenderVestM:14}},SuitLower={id:75,assets:{Catsuit:0,CatsuitPanties:1,LatexCatsuit:2,MaleCatsuitPanties:3,MaleSeamlessCatsuit:4,Pantyhose1:5,Pantyhose2:6,PilotPanties:7,PilotSuit:8,ReverseBunnySuit:9,SeamlessCatsuit:10,SeethroughSuit:11,SeethroughSuitZip:12,Stockings1:13,Stockings2:14,Stockings3:15,Stockings4:16,LongFishnets:17,RippedPantyhose:18,YogaPants:19}},TailStraps={id:76,assets:{BunnyTailStrap:0,CowtailStrap:1,DemonPlug:2,DragonTailStrap1:3,FoxTailsStrap:4,FoxTailStrap1:5,FoxTailStrap2:6,HorseTailStrap:7,HorseTailStrap1:8,KittenTailStrap1:9,KittenTailStrap2:10,LionTailStrap:11,MouseTailStrap1:12,MouseTailStrap2:13,PuppyTailStrap:14,PuppyTailStrap1:15,RaccoonStrap:16,RaccoonTailStrap:17,SuccubusHeartTailStrap:18,SuccubusTailStrap:19,TailStrap:20,Tentacles:21,WolfTailStrap1:22,WolfTailStrap2:23,WolfTailStrap3:24,DragonTailStrap2Left:25,DragonTailStrap2Right:26,LatexFoxTail:27,SkunkTail:28,LargeBushyTail:29,DragonsTail:30,FoxTailStrap:31}},Wings={id:77,assets:{AngelFeather:0,AngelWings:1,BatWings:2,BeeWings:3,CyberWings:4,DevilWings:5,FairyWings:6,FallenAngelWings:7,PixieWings:8,SteampunkWings:9,SuccubusFeather:10,SuccubusWings:11,DragonWings:12}},AnkletLeft={id:78,assets:{BandAnklet:0,HeelBinders:1,LegFur:2,Ribbon:3,Ribbon1:4}},AnkletRight={id:79,assets:{BandAnklet:0,HeelBinders:1,LegFur:2,Ribbon:3,Ribbon1:4}},ArmsLeft={id:80,assets:{"":0}},ArmsRight={id:81,assets:{"":0}},HandAccessoryLeft={id:82,assets:{CatsuitGloves:0,Claws:1,Fingernails:2,Rings:3}},HandAccessoryRight={id:83,assets:{CatsuitGloves:0,Claws:1,Fingernails:2,Rings:3}},HandsLeft={id:84,assets:{"":0}},HandsRight={id:85,assets:{"":0}},FaceMarkings={id:86,assets:{AnimalNoses:0,FaceScars:1,FaceWritings:2,Splatters:3,FacePaint:4}},BodyStyle={id:87,assets:{EchoV1:0,Original:1,EchoV2:2}},ClothOuter={id:88,assets:{AdmiralTop:0,BusinessSuit:1,FurCoat:2,LeatherJacket:3,Robe1:4,BartenderVest:5,BartenderVestM:6,JacketHoodie:7,Hoodie:8}},Decals={id:89,assets:{AmberFam:0,DemonsBar:1,DenOfSin:2,Gangriels:3,LukeChill:4,Malkuth:5,RatAss:6,SlaveHelpline:7,VoidOrder:8,AzureCorp:9,BCRules:10,BondageCollege:11,Bonk:12,BTeacher:13,BTG:14,Bullseye:15,ControlPad1:16,DataRoom:17,Dominant:18,Eclipse:19,Elite:20,Hogtied:21,HWood:22,Keys:23,RadFrog:24,Raiders:25,Shibari:26,Staff:27,WhiteMoon:28,ZamStick:29,ZamStickII:30}},assetID={Blush:Blush,BodyLower:BodyLower,BodyMarkings:BodyMarkings,BodyUpper:BodyUpper,Bra:Bra,Bracelet:Bracelet,Cloth:Cloth,ClothAccessory:ClothAccessory,ClothLower:ClothLower,Corset:Corset,Emoticon:Emoticon,Eyebrows:Eyebrows,Eyes:Eyes,Eyes2:Eyes2,EyeShadow:EyeShadow,FacialHair:FacialHair,Fluids:Fluids,Garters:Garters,Glasses:Glasses,Gloves:Gloves,HairAccessory1:HairAccessory1,HairAccessory2:HairAccessory2,HairAccessory3:HairAccessory3,HairBack:HairBack,HairFront:HairFront,Hands:Hands,Hat:Hat,Head:Head,Height:Height,ItemAddon:ItemAddon,ItemArms:ItemArms,ItemBoots:ItemBoots,ItemBreast:ItemBreast,ItemButt:ItemButt,ItemDevices:ItemDevices,ItemEars:ItemEars,ItemFeet:ItemFeet,ItemHandheld:ItemHandheld,ItemHands:ItemHands,ItemHead:ItemHead,ItemHood:ItemHood,ItemLegs:ItemLegs,ItemMisc:ItemMisc,ItemMouth:ItemMouth,ItemMouth2:ItemMouth2,ItemMouth3:ItemMouth3,ItemNeck:ItemNeck,ItemNeckAccessories:ItemNeckAccessories,ItemNeckRestraints:ItemNeckRestraints,ItemNipples:ItemNipples,ItemNipplesPiercings:ItemNipplesPiercings,ItemNose:ItemNose,ItemPelvis:ItemPelvis,ItemScript:ItemScript,ItemTorso:ItemTorso,ItemTorso2:ItemTorso2,ItemVulva:ItemVulva,ItemVulvaPiercings:ItemVulvaPiercings,Jewelry:Jewelry,LeftAnklet:LeftAnklet,LeftHand:LeftHand,Mask:Mask,Mouth:Mouth,Necklace:Necklace,Nipples:Nipples,Panties:Panties,Pronouns:Pronouns,Pussy:Pussy,RightAnklet:RightAnklet,RightHand:RightHand,Shoes:Shoes,Socks:Socks,SocksLeft:SocksLeft,SocksRight:SocksRight,Suit:Suit,SuitLower:SuitLower,TailStraps:TailStraps,Wings:Wings,AnkletLeft:AnkletLeft,AnkletRight:AnkletRight,ArmsLeft:ArmsLeft,ArmsRight:ArmsRight,HandAccessoryLeft:HandAccessoryLeft,HandAccessoryRight:HandAccessoryRight,HandsLeft:HandsLeft,HandsRight:HandsRight,FaceMarkings:FaceMarkings,BodyStyle:BodyStyle,ClothOuter:ClothOuter,Decals:Decals},assetID$1=Object.freeze({__proto__:null,AnkletLeft:AnkletLeft,AnkletRight:AnkletRight,ArmsLeft:ArmsLeft,ArmsRight:ArmsRight,Blush:Blush,BodyLower:BodyLower,BodyMarkings:BodyMarkings,BodyStyle:BodyStyle,BodyUpper:BodyUpper,Bra:Bra,Bracelet:Bracelet,Cloth:Cloth,ClothAccessory:ClothAccessory,ClothLower:ClothLower,ClothOuter:ClothOuter,Corset:Corset,Decals:Decals,Emoticon:Emoticon,EyeShadow:EyeShadow,Eyebrows:Eyebrows,Eyes:Eyes,Eyes2:Eyes2,FaceMarkings:FaceMarkings,FacialHair:FacialHair,Fluids:Fluids,Garters:Garters,Glasses:Glasses,Gloves:Gloves,HairAccessory1:HairAccessory1,HairAccessory2:HairAccessory2,HairAccessory3:HairAccessory3,HairBack:HairBack,HairFront:HairFront,HandAccessoryLeft:HandAccessoryLeft,HandAccessoryRight:HandAccessoryRight,Hands:Hands,HandsLeft:HandsLeft,HandsRight:HandsRight,Hat:Hat,Head:Head,Height:Height,ItemAddon:ItemAddon,ItemArms:ItemArms,ItemBoots:ItemBoots,ItemBreast:ItemBreast,ItemButt:ItemButt,ItemDevices:ItemDevices,ItemEars:ItemEars,ItemFeet:ItemFeet,ItemHandheld:ItemHandheld,ItemHands:ItemHands,ItemHead:ItemHead,ItemHood:ItemHood,ItemLegs:ItemLegs,ItemMisc:ItemMisc,ItemMouth:ItemMouth,ItemMouth2:ItemMouth2,ItemMouth3:ItemMouth3,ItemNeck:ItemNeck,ItemNeckAccessories:ItemNeckAccessories,ItemNeckRestraints:ItemNeckRestraints,ItemNipples:ItemNipples,ItemNipplesPiercings:ItemNipplesPiercings,ItemNose:ItemNose,ItemPelvis:ItemPelvis,ItemScript:ItemScript,ItemTorso:ItemTorso,ItemTorso2:ItemTorso2,ItemVulva:ItemVulva,ItemVulvaPiercings:ItemVulvaPiercings,Jewelry:Jewelry,LeftAnklet:LeftAnklet,LeftHand:LeftHand,Mask:Mask,Mouth:Mouth,Necklace:Necklace,Nipples:Nipples,Panties:Panties,Pronouns:Pronouns,Pussy:Pussy,RightAnklet:RightAnklet,RightHand:RightHand,Shoes:Shoes,Socks:Socks,SocksLeft:SocksLeft,SocksRight:SocksRight,Suit:Suit,SuitLower:SuitLower,TailStraps:TailStraps,Wings:Wings,default:assetID}),styles="#mbs-shop-root {\n  display: grid;\n  grid-template-rows: 2fr 3fr;\n}\n#mbs-shop-root > span {\n  color: white;\n  place-self: center center;\n  user-select: none;\n}\n\n#mbs-shop-select {\n  background-color: var(--mbs-button-color);\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  box-sizing: border-box;\n  color: var(--mbs-text-color);\n  cursor: pointer;\n  font: inherit;\n}\n#mbs-shop-select:disabled {\n  background-color: color-mix(in srgb, var(--mbs-background-color) 60%, black 40%);\n  cursor: auto;\n}\n\n/* stylelint-disable selector-id-pattern */\n#Shop2GroupSelect, #Shop2PoseSelect {\n  z-index: 1;\n}";const ASSETS={},IDs=Object.freeze({root:"mbs-shop-root",select:"mbs-shop-select",style:"mbs-shop-style"});function versionSelectChange(){if(this.value){const e=ASSETS[this.value];if(!e)return;Shop2Vars.Filters.MBS_VersionFilter=t=>e[`${t.Asset.Group.Name}${t.Asset.Name}`]?["Buy","Sell","Preview"]:[],Shop2.ApplyItemFilters()}else delete Shop2Vars.Filters.MBS_VersionFilter,Shop2.ApplyItemFilters()}function getShopItems(){const e=Object.fromEntries(Object.entries(ASSETS).filter(([e])=>"R98"!==e).flatMap(([e,t])=>Object.entries(t)));return Shop2.ParseAssets(Asset.filter(t=>t.Group.Name===t.DynamicGroupName&&(e[`${t.Group.Name}${t.Name}`]||(Shop2Consts.BuyGroups[t.BuyGroup]?.Value??t.Value)>0)&&!ShopHideGenderedAsset(t)).sort((e,t)=>e.Group.Category.localeCompare(t.Group.Category)||e.Group.Description.localeCompare(t.Group.Description)||e.Description.localeCompare(t.Description)))}function loadHook(e){document.getElementById(IDs.style)||document.body.append(jsxRuntimeExports.jsx("style",{id:IDs.style,children:styles.toString()})),(0===Shop2InitVars.Items.length||e)&&(Shop2InitVars.Items=getShopItems())}waitForBC("new_items_screen",{async afterLoad(){logger.log("Initializing new item screen hooks");if(null==GameVersionFormat.exec(GameVersion))return void logger.error(`Invalid BC version: "${GameVersion}"`);for(const[e,t]of entries(assetVersion$1))for(const[r,n]of entries(t)){const t=AssetGet("Female3DCG",e,r);null!=t&&(t.Group.Name===t.DynamicGroupName&&(ASSETS[n]??={},ASSETS[n][`${t.DynamicGroupName}${t.Name}`]=t))}Shop2.Elements.MBS={Coords:[135,445,420,180],Mode:new Set(["Preview","Buy","Sell"]),Draw:()=>null,Load:async()=>{let e=document.getElementById(IDs.root);if(!e){const t=Object.keys(ASSETS).filter(e=>"R98"!==e).sort((e,t)=>{const r=Number.parseInt(e.slice(1),10),n=Number.parseInt(t.slice(1),10);return r>n?-1:n>r?1:0});e=jsxRuntimeExports.jsxs("label",{id:IDs.root,children:[jsxRuntimeExports.jsx("span",{children:"MBS: Filter by BC version"}),jsxRuntimeExports.jsxs("select",{id:IDs.select,onChange:versionSelectChange,children:[jsxRuntimeExports.jsx("option",{selected:!0,children:"All versions"}),jsxRuntimeExports.jsx("hr",{}),t.map(e=>jsxRuntimeExports.jsx("option",{children:e}))]})]}),e.querySelector("option[selected]")?.setAttribute("value",""),document.body.append(e)}e.toggleAttribute("hidden",!1)},Resize:()=>{ElementPositionFix(IDs.root,36,...Shop2.Elements.MBS.Coords)},Unload:()=>{document.getElementById(IDs.root)?.toggleAttribute("hidden",!0)},Exit:()=>{ElementRemove(IDs.root)}},MBS_MOD_API.hookFunction("Shop2Load",0,(e,t)=>(loadHook(!1),t(e))),"Shop2"===CurrentScreen&&(loadHook(!0),Shop2.Elements.MBS.Mode.has(Shop2Vars.Mode)&&(Shop2.Elements.MBS.Load?.(),Shop2.Elements.MBS.Resize?.(!0)))}});const _getOriginalHash=MBS_MOD_API.getOriginalHash,_version=MBS_VERSION;return logger.log(`Initializing MBS version ${MBS_VERSION}`),waitForBC("mbs",{async afterLoad(){validateHookHashes(),document.body.appendChild(jsxRuntimeExports.jsx("style",{id:"mbs-style",children:styles$2.toString()}))}}),exports.API_VERSION=API_VERSION,exports.MBS_VERSION=_version,exports._getOriginalHash=_getOriginalHash,exports._toItemBundles=toItemBundles,exports._unpackSettings=unpackSettings,exports.css=css,exports.getDebug=getDebug,exports.runTests=runTests,exports.wheelEvents=wheel_events,exports.wheelOutfits=wheel_outfits,exports}({});
//# sourceMappingURL=mbs.js.map
