/*!
 * MBS: Maid's Bondage Scripts
 *
 * Copyright (C) 2023-2024 Bananarama92
 *
 * This program is free software: you can redistribute it and/or modify it under the terms of
 * the GNU General Public License as published by the Free Software Foundation,
 * either version 3 of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program.
 * If not, see https://www.gnu.org/licenses/.
 *
 * An exception is made for the "mbs.css" API, which is licensed under the terms of GNU LGPL
 * version 3 (see https://www.gnu.org/licenses/lgpl-3.0.en.html).
 */
var mbs=function(e){"use strict";const t="1.7.38";var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i={},o={};Object.defineProperty(o,"__esModule",{value:!0});o.setAttributes=void 0;function a(e,t){for(const n of Object.keys(e))n in t&&(t[n]=e[n])}o.setAttributes=function(e,t){for(const n of Object.keys(t)){if("__source"===n||"__self"===n)continue;const r=t[n];if(n.startsWith("on")){const t=n.replace(/Capture$/,""),i=n!==t,o=t.toLowerCase().substring(2);e.addEventListener(o,r,i)}else"style"===n&&"string"!=typeof r?a(r,e.style):"dangerouslySetInnerHTML"===n?e.innerHTML=r:!0===r?e.setAttribute(n,n):(r||0===r)&&e.setAttribute(n,r.toString())}};var s={};Object.defineProperty(s,"__esModule",{value:!0});s.createDomElement=s.applyChildren=void 0;function l(e,t){t instanceof Element?e.appendChild(t):"string"==typeof t||"number"==typeof t?e.appendChild(document.createTextNode(t.toString())):console.warn("Unknown type to append: ",t)}s.applyChildren=function e(t,n){for(const r of n)(r||0===r)&&(Array.isArray(r)?e(t,r):l(t,r))};s.createDomElement=function(e,t){const n=(null==t?void 0:t.is)?{is:t.is}:void 0;return(null==t?void 0:t.xmlns)?document.createElementNS(t.xmlns,e,n):document.createElement(e,n)},Object.defineProperty(i,"__esModule",{value:!0});i.jsxDEV=p=i.jsxs=h=i.jsx=void 0;const u=o,c=s;function d(e,t){if("function"==typeof e)return e(t);const{children:n,...r}=t,i=(0,c.createDomElement)(e,r);return r&&(0,u.setAttributes)(i,r),(0,c.applyChildren)(i,[n]),i}var h=i.jsx=d,p=i.jsxs=d;i.jsxDEV=d;var f={},g={};Object.defineProperty(g,"__esModule",{value:!0});g.h=g.createElement=void 0;const m=o,R=s;function v(e,t,...n){if("function"==typeof e)return e({...t,children:n});const r=(0,R.createDomElement)(e,t);return t&&(0,m.setAttributes)(r,t),(0,R.applyChildren)(r,n),r}g.createElement=v;g.h=v;var b={};Object.defineProperty(b,"__esModule",{value:!0}),function(e){var t=n&&n.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=n&&n.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),r(g,e),r(i,e),r(b,e)}(f);Object.create;Object.create;function y(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function S(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}"function"==typeof SuppressedError&&SuppressedError;var B="object"==typeof global&&global&&global.Object===Object&&global,w="object"==typeof self&&self&&self.Object===Object&&self,C=B||w||Function("return this")(),k=C.Symbol,P=Object.prototype,x=P.hasOwnProperty,M=P.toString,I=k?k.toStringTag:void 0;var F=Object.prototype.toString;var E="[object Null]",_="[object Undefined]",O=k?k.toStringTag:void 0;function A(e){return null==e?void 0===e?_:E:O&&O in Object(e)?function(e){var t=x.call(e,I),n=e[I];try{e[I]=void 0;var r=!0}catch(e){}var i=M.call(e);return r&&(t?e[I]=n:delete e[I]),i}(e):function(e){return F.call(e)}(e)}function $(e){return null!=e&&"object"==typeof e}function H(e){return"symbol"==typeof e||$(e)&&"[object Symbol]"==A(e)}function L(e){return"number"==typeof e?e:H(e)?NaN:+e}function j(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var T=Array.isArray,D=k?k.prototype:void 0,N=D?D.toString:void 0;function G(e){if("string"==typeof e)return e;if(T(e))return j(e,G)+"";if(H(e))return N?N.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function W(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=G(n),r=G(r)):(n=L(n),r=L(r)),i=e(n,r)}return i}}var z=W((function(e,t){return e+t}),0),q=/\s/;function V(e){for(var t=e.length;t--&&q.test(e.charAt(t)););return t}var U=/^\s+/;function K(e){return e?e.slice(0,V(e)+1).replace(U,""):e}function J(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Y=/^[-+]0x[0-9a-f]+$/i,Z=/^0b[01]+$/i,X=/^0o[0-7]+$/i,Q=parseInt;function ee(e){if("number"==typeof e)return e;if(H(e))return NaN;if(J(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=J(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=K(e);var n=Z.test(e);return n||X.test(e)?Q(e.slice(2),n?2:8):Y.test(e)?NaN:+e}var te=1/0;function ne(e){return e?(e=ee(e))===te||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function re(e){var t=ne(e),n=t%1;return t==t?n?t-n:t:0}function ie(e){return e}var oe="[object AsyncFunction]",ae="[object Function]",se="[object GeneratorFunction]",le="[object Proxy]";function ue(e){if(!J(e))return!1;var t=A(e);return t==ae||t==se||t==oe||t==le}var ce,de=C["__core-js_shared__"],he=(ce=/[^.]+$/.exec(de&&de.keys&&de.keys.IE_PROTO||""))?"Symbol(src)_1."+ce:"";var pe=Function.prototype.toString;function fe(e){if(null!=e){try{return pe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var ge=/^\[object .+?Constructor\]$/,me=Function.prototype,Re=Object.prototype,ve=me.toString,be=Re.hasOwnProperty,ye=RegExp("^"+ve.call(be).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Se(e){return!(!J(e)||function(e){return!!he&&he in e}(e))&&(ue(e)?ye:ge).test(fe(e))}function Be(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Se(n)?n:void 0}var we=Be(C,"WeakMap"),Ce=we&&new we,ke=Ce?function(e,t){return Ce.set(e,t),e}:ie,Pe=Object.create,xe=function(){function e(){}return function(t){if(!J(t))return{};if(Pe)return Pe(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Me(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=xe(e.prototype),r=e.apply(n,t);return J(r)?r:n}}function Ie(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Fe=Math.max;function Ee(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,l=t.length,u=Fe(o-a,0),c=Array(l+u),d=!r;++s<l;)c[s]=t[s];for(;++i<a;)(d||i<o)&&(c[n[i]]=e[i]);for(;u--;)c[s++]=e[i++];return c}var _e=Math.max;function Oe(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,l=-1,u=t.length,c=_e(o-s,0),d=Array(c+u),h=!r;++i<c;)d[i]=e[i];for(var p=i;++l<u;)d[p+l]=t[l];for(;++a<s;)(h||i<o)&&(d[p+n[a]]=e[i++]);return d}function Ae(){}function $e(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function He(){}$e.prototype=xe(Ae.prototype),$e.prototype.constructor=$e;var Le=Ce?function(e){return Ce.get(e)}:He,je={},Te=Object.prototype.hasOwnProperty;function De(e){for(var t=e.name+"",n=je[t],r=Te.call(je,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Ne(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Ge(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function We(e){if(e instanceof $e)return e.clone();var t=new Ne(e.__wrapped__,e.__chain__);return t.__actions__=Ge(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}Ne.prototype=xe(Ae.prototype),Ne.prototype.constructor=Ne;var ze=Object.prototype.hasOwnProperty;function qe(e){if($(e)&&!T(e)&&!(e instanceof $e)){if(e instanceof Ne)return e;if(ze.call(e,"__wrapped__"))return We(e)}return new Ne(e)}function Ve(e){var t=De(e),n=qe[t];if("function"!=typeof n||!(t in $e.prototype))return!1;if(e===n)return!0;var r=Le(n);return!!r&&e===r[0]}qe.prototype=Ae.prototype,qe.prototype.constructor=qe;var Ue=Date.now;function Ke(e){var t=0,n=0;return function(){var r=Ue(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Je=Ke(ke),Ye=/\{\n\/\* \[wrapped with (.+)\] \*/,Ze=/,? & /;var Xe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function Qe(e){return function(){return e}}var et=function(){try{var e=Be(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),tt=et?function(e,t){return et(e,"toString",{configurable:!0,enumerable:!1,value:Qe(t),writable:!0})}:ie,nt=Ke(tt);function rt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function it(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function ot(e){return e!=e}function at(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):it(e,ot,n)}function st(e,t){return!!(null==e?0:e.length)&&at(e,t,0)>-1}var lt=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function ut(e,t,n){var r=t+"";return nt(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Xe,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return rt(lt,(function(n){var r="_."+n[0];t&n[1]&&!st(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(Ye);return t?t[1].split(Ze):[]}(r),n)))}function ct(e,t,n,r,i,o,a,s,l,u){var c=8&t;t|=c?32:64,4&(t&=~(c?64:32))||(t&=-4);var d=[e,t,i,c?o:void 0,c?a:void 0,c?void 0:o,c?void 0:a,s,l,u],h=n.apply(void 0,d);return Ve(e)&&Je(h,d),h.placeholder=r,ut(h,e,t)}function dt(e){return e.placeholder}var ht=9007199254740991,pt=/^(?:0|[1-9]\d*)$/;function ft(e,t){var n=typeof e;return!!(t=null==t?ht:t)&&("number"==n||"symbol"!=n&&pt.test(e))&&e>-1&&e%1==0&&e<t}var gt=Math.min;var mt="__lodash_placeholder__";function Rt(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==mt||(e[n]=mt,o[i++]=n)}return o}function vt(e,t,n,r,i,o,a,s,l,u){var c=128&t,d=1&t,h=2&t,p=24&t,f=512&t,g=h?void 0:Me(e);return function m(){for(var R=arguments.length,v=Array(R),b=R;b--;)v[b]=arguments[b];if(p)var y=dt(m),S=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(v,y);if(r&&(v=Ee(v,r,i,p)),o&&(v=Oe(v,o,a,p)),R-=S,p&&R<u){var B=Rt(v,y);return ct(e,t,vt,m.placeholder,n,v,B,s,l,u-R)}var w=d?n:this,k=h?w[e]:e;return R=v.length,s?v=function(e,t){for(var n=e.length,r=gt(t.length,n),i=Ge(e);r--;){var o=t[r];e[r]=ft(o,n)?i[o]:void 0}return e}(v,s):f&&R>1&&v.reverse(),c&&l<R&&(v.length=l),this&&this!==C&&this instanceof m&&(k=g||Me(k)),k.apply(w,v)}}var bt="__lodash_placeholder__",yt=128,St=Math.min;var Bt=Math.max;function wt(e,t,n,r,i,o,a,s){var l=2&t;if(!l&&"function"!=typeof e)throw new TypeError("Expected a function");var u=r?r.length:0;if(u||(t&=-97,r=i=void 0),a=void 0===a?a:Bt(re(a),0),s=void 0===s?s:re(s),u-=i?i.length:0,64&t){var c=r,d=i;r=i=void 0}var h=l?void 0:Le(e),p=[e,t,n,r,i,c,d,o,a,s];if(h&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=r==yt&&8==n||r==yt&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var s=t[3];if(s){var l=e[3];e[3]=l?Ee(l,s,t[4]):s,e[4]=l?Rt(e[3],bt):t[4]}(s=t[5])&&(l=e[5],e[5]=l?Oe(l,s,t[6]):s,e[6]=l?Rt(e[5],bt):t[6]),(s=t[7])&&(e[7]=s),r&yt&&(e[8]=null==e[8]?t[8]:St(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(p,h),e=p[0],t=p[1],n=p[2],r=p[3],i=p[4],!(s=p[9]=void 0===p[9]?l?0:e.length:Bt(p[9]-u,0))&&24&t&&(t&=-25),t&&1!=t)f=8==t||16==t?function(e,t,n){var r=Me(e);return function i(){for(var o=arguments.length,a=Array(o),s=o,l=dt(i);s--;)a[s]=arguments[s];var u=o<3&&a[0]!==l&&a[o-1]!==l?[]:Rt(a,l);return(o-=u.length)<n?ct(e,t,vt,i.placeholder,void 0,a,u,void 0,void 0,n-o):Ie(this&&this!==C&&this instanceof i?r:e,this,a)}}(e,t,s):32!=t&&33!=t||i.length?vt.apply(void 0,p):function(e,t,n,r){var i=1&t,o=Me(e);return function t(){for(var a=-1,s=arguments.length,l=-1,u=r.length,c=Array(u+s),d=this&&this!==C&&this instanceof t?o:e;++l<u;)c[l]=r[l];for(;s--;)c[l++]=arguments[++a];return Ie(d,i?n:this,c)}}(e,t,n,r);else var f=function(e,t,n){var r=1&t,i=Me(e);return function t(){return(this&&this!==C&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return ut((h?ke:Je)(f,p),e,t)}function Ct(e,t,n){return t=n?void 0:t,wt(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function kt(e,t,n){"__proto__"==t&&et?et(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Pt(e,t){return e===t||e!=e&&t!=t}var xt=Object.prototype.hasOwnProperty;function Mt(e,t,n){var r=e[t];xt.call(e,t)&&Pt(r,n)&&(void 0!==n||t in e)||kt(e,t,n)}function It(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?kt(n,s,l):Mt(n,s,l)}return n}var Ft=Math.max;function Et(e,t,n){return t=Ft(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Ft(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),Ie(e,this,s)}}function _t(e,t){return nt(Et(e,t,ie),e+"")}var Ot=9007199254740991;function At(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ot}function $t(e){return null!=e&&At(e.length)&&!ue(e)}function Ht(e,t,n){if(!J(n))return!1;var r=typeof t;return!!("number"==r?$t(n)&&ft(t,n.length):"string"==r&&t in n)&&Pt(n[t],e)}function Lt(e){return _t((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&Ht(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}var jt=Object.prototype;function Tt(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||jt)}function Dt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Nt(e){return $(e)&&"[object Arguments]"==A(e)}var Gt=Object.prototype,Wt=Gt.hasOwnProperty,zt=Gt.propertyIsEnumerable,qt=Nt(function(){return arguments}())?Nt:function(e){return $(e)&&Wt.call(e,"callee")&&!zt.call(e,"callee")};function Vt(){return!1}var Ut="object"==typeof e&&e&&!e.nodeType&&e,Kt=Ut&&"object"==typeof module&&module&&!module.nodeType&&module,Jt=Kt&&Kt.exports===Ut?C.Buffer:void 0,Yt=(Jt?Jt.isBuffer:void 0)||Vt,Zt={};function Xt(e){return function(t){return e(t)}}Zt["[object Float32Array]"]=Zt["[object Float64Array]"]=Zt["[object Int8Array]"]=Zt["[object Int16Array]"]=Zt["[object Int32Array]"]=Zt["[object Uint8Array]"]=Zt["[object Uint8ClampedArray]"]=Zt["[object Uint16Array]"]=Zt["[object Uint32Array]"]=!0,Zt["[object Arguments]"]=Zt["[object Array]"]=Zt["[object ArrayBuffer]"]=Zt["[object Boolean]"]=Zt["[object DataView]"]=Zt["[object Date]"]=Zt["[object Error]"]=Zt["[object Function]"]=Zt["[object Map]"]=Zt["[object Number]"]=Zt["[object Object]"]=Zt["[object RegExp]"]=Zt["[object Set]"]=Zt["[object String]"]=Zt["[object WeakMap]"]=!1;var Qt="object"==typeof e&&e&&!e.nodeType&&e,en=Qt&&"object"==typeof module&&module&&!module.nodeType&&module,tn=en&&en.exports===Qt&&B.process,nn=function(){try{var e=en&&en.require&&en.require("util").types;return e||tn&&tn.binding&&tn.binding("util")}catch(e){}}(),rn=nn&&nn.isTypedArray,on=rn?Xt(rn):function(e){return $(e)&&At(e.length)&&!!Zt[A(e)]},an=Object.prototype.hasOwnProperty;function sn(e,t){var n=T(e),r=!n&&qt(e),i=!n&&!r&&Yt(e),o=!n&&!r&&!i&&on(e),a=n||r||i||o,s=a?Dt(e.length,String):[],l=s.length;for(var u in e)!t&&!an.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ft(u,l))||s.push(u);return s}function ln(e,t){return function(n){return e(t(n))}}var un=ln(Object.keys,Object),cn=Object.prototype.hasOwnProperty;function dn(e){if(!Tt(e))return un(e);var t=[];for(var n in Object(e))cn.call(e,n)&&"constructor"!=n&&t.push(n);return t}function hn(e){return $t(e)?sn(e):dn(e)}var pn=Object.prototype.hasOwnProperty,fn=Lt((function(e,t){if(Tt(t)||$t(t))It(t,hn(t),e);else for(var n in t)pn.call(t,n)&&Mt(e,n,t[n])}));var gn=Object.prototype.hasOwnProperty;function mn(e){if(!J(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Tt(e),n=[];for(var r in e)("constructor"!=r||!t&&gn.call(e,r))&&n.push(r);return n}function Rn(e){return $t(e)?sn(e,!0):mn(e)}var vn=Lt((function(e,t){It(t,Rn(t),e)})),bn=Lt((function(e,t,n,r){It(t,Rn(t),e,r)})),yn=Lt((function(e,t,n,r){It(t,hn(t),e,r)})),Sn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bn=/^\w*$/;function wn(e,t){if(T(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!H(e))||(Bn.test(e)||!Sn.test(e)||null!=t&&e in Object(t))}var Cn=Be(Object,"create");var kn=Object.prototype.hasOwnProperty;var Pn=Object.prototype.hasOwnProperty;function xn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Mn(e,t){for(var n=e.length;n--;)if(Pt(e[n][0],t))return n;return-1}xn.prototype.clear=function(){this.__data__=Cn?Cn(null):{},this.size=0},xn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},xn.prototype.get=function(e){var t=this.__data__;if(Cn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return kn.call(t,e)?t[e]:void 0},xn.prototype.has=function(e){var t=this.__data__;return Cn?void 0!==t[e]:Pn.call(t,e)},xn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Cn&&void 0===t?"__lodash_hash_undefined__":t,this};var In=Array.prototype.splice;function Fn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Fn.prototype.clear=function(){this.__data__=[],this.size=0},Fn.prototype.delete=function(e){var t=this.__data__,n=Mn(t,e);return!(n<0)&&(n==t.length-1?t.pop():In.call(t,n,1),--this.size,!0)},Fn.prototype.get=function(e){var t=this.__data__,n=Mn(t,e);return n<0?void 0:t[n][1]},Fn.prototype.has=function(e){return Mn(this.__data__,e)>-1},Fn.prototype.set=function(e,t){var n=this.__data__,r=Mn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var En=Be(C,"Map");function _n(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function On(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}On.prototype.clear=function(){this.size=0,this.__data__={hash:new xn,map:new(En||Fn),string:new xn}},On.prototype.delete=function(e){var t=_n(this,e).delete(e);return this.size-=t?1:0,t},On.prototype.get=function(e){return _n(this,e).get(e)},On.prototype.has=function(e){return _n(this,e).has(e)},On.prototype.set=function(e,t){var n=_n(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function An(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(An.Cache||On),n}An.Cache=On;var $n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Hn=/\\(\\)?/g,Ln=function(e){var t=An(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace($n,(function(e,n,r,i){t.push(r?i.replace(Hn,"$1"):n||e)})),t}));function jn(e){return null==e?"":G(e)}function Tn(e,t){return T(e)?e:wn(e,t)?[e]:Ln(jn(e))}function Dn(e){if("string"==typeof e||H(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Nn(e,t){for(var n=0,r=(t=Tn(t,e)).length;null!=e&&n<r;)e=e[Dn(t[n++])];return n&&n==r?e:void 0}function Gn(e,t,n){var r=null==e?void 0:Nn(e,t);return void 0===r?n:r}function Wn(e,t){for(var n=-1,r=t.length,i=Array(r),o=null==e;++n<r;)i[n]=o?void 0:Gn(e,t[n]);return i}function zn(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var qn=k?k.isConcatSpreadable:void 0;function Vn(e){return T(e)||qt(e)||!!(qn&&e&&e[qn])}function Un(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=Vn),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?Un(s,t-1,n,r,i):zn(i,s):r||(i[i.length]=s)}return i}function Kn(e){return(null==e?0:e.length)?Un(e,1):[]}function Jn(e){return nt(Et(e,void 0,Kn),e+"")}var Yn=Jn(Wn),Zn=ln(Object.getPrototypeOf,Object),Xn=Function.prototype,Qn=Object.prototype,er=Xn.toString,tr=Qn.hasOwnProperty,nr=er.call(Object);function rr(e){if(!$(e)||"[object Object]"!=A(e))return!1;var t=Zn(e);if(null===t)return!0;var n=tr.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&er.call(n)==nr}function ir(e){if(!$(e))return!1;var t=A(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!rr(e)}var or=_t((function(e,t){try{return Ie(e,void 0,t)}catch(e){return ir(e)?e:new Error(e)}}));function ar(e,t){var n;if("function"!=typeof t)throw new TypeError("Expected a function");return e=re(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var sr=_t((function(e,t,n){var r=1;if(n.length){var i=Rt(n,dt(sr));r|=32}return wt(e,r,t,n,i)}));sr.placeholder={};var lr=Jn((function(e,t){return rt(t,(function(t){t=Dn(t),kt(e,t,sr(e[t],e))})),e})),ur=_t((function(e,t,n){var r=3;if(n.length){var i=Rt(n,dt(ur));r|=32}return wt(t,r,e,n,i)}));function cr(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}function dr(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:cr(e,t,n)}ur.placeholder={};var hr=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function pr(e){return hr.test(e)}var fr="\\ud800-\\udfff",gr="["+fr+"]",mr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Rr="\\ud83c[\\udffb-\\udfff]",vr="[^"+fr+"]",br="(?:\\ud83c[\\udde6-\\uddff]){2}",yr="[\\ud800-\\udbff][\\udc00-\\udfff]",Sr="(?:"+mr+"|"+Rr+")"+"?",Br="[\\ufe0e\\ufe0f]?",wr=Br+Sr+("(?:\\u200d(?:"+[vr,br,yr].join("|")+")"+Br+Sr+")*"),Cr="(?:"+[vr+mr+"?",mr,br,yr,gr].join("|")+")",kr=RegExp(Rr+"(?="+Rr+")|"+Cr+wr,"g");function Pr(e){return pr(e)?function(e){return e.match(kr)||[]}(e):function(e){return e.split("")}(e)}function xr(e){return function(t){var n=pr(t=jn(t))?Pr(t):void 0,r=n?n[0]:t.charAt(0),i=n?dr(n,1).join(""):t.slice(1);return r[e]()+i}}var Mr=xr("toUpperCase");function Ir(e){return Mr(jn(e).toLowerCase())}function Fr(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Er(e){return function(t){return null==e?void 0:e[t]}}var _r=Er({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Or=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ar=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");function $r(e){return(e=jn(e))&&e.replace(Or,_r).replace(Ar,"")}var Hr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var Lr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var jr="\\ud800-\\udfff",Tr="\\u2700-\\u27bf",Dr="a-z\\xdf-\\xf6\\xf8-\\xff",Nr="A-Z\\xc0-\\xd6\\xd8-\\xde",Gr="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wr="["+Gr+"]",zr="\\d+",qr="["+Tr+"]",Vr="["+Dr+"]",Ur="[^"+jr+Gr+zr+Tr+Dr+Nr+"]",Kr="(?:\\ud83c[\\udde6-\\uddff]){2}",Jr="[\\ud800-\\udbff][\\udc00-\\udfff]",Yr="["+Nr+"]",Zr="(?:"+Vr+"|"+Ur+")",Xr="(?:"+Yr+"|"+Ur+")",Qr="(?:['’](?:d|ll|m|re|s|t|ve))?",ei="(?:['’](?:D|LL|M|RE|S|T|VE))?",ti="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",ni="[\\ufe0e\\ufe0f]?",ri=ni+ti+("(?:\\u200d(?:"+["[^"+jr+"]",Kr,Jr].join("|")+")"+ni+ti+")*"),ii="(?:"+[qr,Kr,Jr].join("|")+")"+ri,oi=RegExp([Yr+"?"+Vr+"+"+Qr+"(?="+[Wr,Yr,"$"].join("|")+")",Xr+"+"+ei+"(?="+[Wr,Yr+Zr,"$"].join("|")+")",Yr+"?"+Zr+"+"+Qr,Yr+"+"+ei,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zr,ii].join("|"),"g");function ai(e,t,n){return e=jn(e),void 0===(t=n?void 0:t)?function(e){return Lr.test(e)}(e)?function(e){return e.match(oi)||[]}(e):function(e){return e.match(Hr)||[]}(e):e.match(t)||[]}var si=RegExp("['’]","g");function li(e){return function(t){return Fr(ai($r(t).replace(si,"")),e,"")}}var ui=li((function(e,t,n){return t=t.toLowerCase(),e+(n?Ir(t):t)}));var ci=C.isFinite,di=Math.min;function hi(e){var t=Math[e];return function(e,n){if(e=ee(e),(n=null==n?0:di(re(n),292))&&ci(e)){var r=(jn(e)+"e").split("e");return+((r=(jn(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var pi=hi("ceil");function fi(e){var t=qe(e);return t.__chain__=!0,t}var gi=Math.ceil,mi=Math.max;function Ri(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function vi(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=ee(n))==n?n:0),void 0!==t&&(t=(t=ee(t))==t?t:0),Ri(ee(e),t,n)}function bi(e){var t=this.__data__=new Fn(e);this.size=t.size}function yi(e,t){return e&&It(t,hn(t),e)}bi.prototype.clear=function(){this.__data__=new Fn,this.size=0},bi.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},bi.prototype.get=function(e){return this.__data__.get(e)},bi.prototype.has=function(e){return this.__data__.has(e)},bi.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Fn){var r=n.__data__;if(!En||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new On(r)}return n.set(e,t),this.size=n.size,this};var Si="object"==typeof e&&e&&!e.nodeType&&e,Bi=Si&&"object"==typeof module&&module&&!module.nodeType&&module,wi=Bi&&Bi.exports===Si?C.Buffer:void 0,Ci=wi?wi.allocUnsafe:void 0;function ki(e,t){if(t)return e.slice();var n=e.length,r=Ci?Ci(n):new e.constructor(n);return e.copy(r),r}function Pi(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function xi(){return[]}var Mi=Object.prototype.propertyIsEnumerable,Ii=Object.getOwnPropertySymbols,Fi=Ii?function(e){return null==e?[]:(e=Object(e),Pi(Ii(e),(function(t){return Mi.call(e,t)})))}:xi;var Ei=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)zn(t,Fi(e)),e=Zn(e);return t}:xi;function _i(e,t,n){var r=t(e);return T(e)?r:zn(r,n(e))}function Oi(e){return _i(e,hn,Fi)}function Ai(e){return _i(e,Rn,Ei)}var $i=Be(C,"DataView"),Hi=Be(C,"Promise"),Li=Be(C,"Set"),ji="[object Map]",Ti="[object Promise]",Di="[object Set]",Ni="[object WeakMap]",Gi="[object DataView]",Wi=fe($i),zi=fe(En),qi=fe(Hi),Vi=fe(Li),Ui=fe(we),Ki=A;($i&&Ki(new $i(new ArrayBuffer(1)))!=Gi||En&&Ki(new En)!=ji||Hi&&Ki(Hi.resolve())!=Ti||Li&&Ki(new Li)!=Di||we&&Ki(new we)!=Ni)&&(Ki=function(e){var t=A(e),n="[object Object]"==t?e.constructor:void 0,r=n?fe(n):"";if(r)switch(r){case Wi:return Gi;case zi:return ji;case qi:return Ti;case Vi:return Di;case Ui:return Ni}return t});var Ji=Ki,Yi=Object.prototype.hasOwnProperty;var Zi=C.Uint8Array;function Xi(e){var t=new e.constructor(e.byteLength);return new Zi(t).set(new Zi(e)),t}var Qi=/\w*$/;var eo=k?k.prototype:void 0,to=eo?eo.valueOf:void 0;function no(e,t){var n=t?Xi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var ro="[object Boolean]",io="[object Date]",oo="[object Map]",ao="[object Number]",so="[object RegExp]",lo="[object Set]",uo="[object String]",co="[object Symbol]",ho="[object ArrayBuffer]",po="[object DataView]",fo="[object Float32Array]",go="[object Float64Array]",mo="[object Int8Array]",Ro="[object Int16Array]",vo="[object Int32Array]",bo="[object Uint8Array]",yo="[object Uint8ClampedArray]",So="[object Uint16Array]",Bo="[object Uint32Array]";function wo(e,t,n){var r,i=e.constructor;switch(t){case ho:return Xi(e);case ro:case io:return new i(+e);case po:return function(e,t){var n=t?Xi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case fo:case go:case mo:case Ro:case vo:case bo:case yo:case So:case Bo:return no(e,n);case oo:return new i;case ao:case uo:return new i(e);case so:return function(e){var t=new e.constructor(e.source,Qi.exec(e));return t.lastIndex=e.lastIndex,t}(e);case lo:return new i;case co:return r=e,to?Object(to.call(r)):{}}}function Co(e){return"function"!=typeof e.constructor||Tt(e)?{}:xe(Zn(e))}var ko=nn&&nn.isMap,Po=ko?Xt(ko):function(e){return $(e)&&"[object Map]"==Ji(e)};var xo=nn&&nn.isSet,Mo=xo?Xt(xo):function(e){return $(e)&&"[object Set]"==Ji(e)},Io=1,Fo=2,Eo=4,_o="[object Arguments]",Oo="[object Function]",Ao="[object GeneratorFunction]",$o="[object Object]",Ho={};function Lo(e,t,n,r,i,o){var a,s=t&Io,l=t&Fo,u=t&Eo;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!J(e))return e;var c=T(e);if(c){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Yi.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!s)return Ge(e,a)}else{var d=Ji(e),h=d==Oo||d==Ao;if(Yt(e))return ki(e,s);if(d==$o||d==_o||h&&!i){if(a=l||h?{}:Co(e),!s)return l?function(e,t){return It(e,Ei(e),t)}(e,function(e,t){return e&&It(t,Rn(t),e)}(a,e)):function(e,t){return It(e,Fi(e),t)}(e,yi(a,e))}else{if(!Ho[d])return i?e:{};a=wo(e,d,s)}}o||(o=new bi);var p=o.get(e);if(p)return p;o.set(e,a),Mo(e)?e.forEach((function(r){a.add(Lo(r,t,n,r,e,o))})):Po(e)&&e.forEach((function(r,i){a.set(i,Lo(r,t,n,i,e,o))}));var f=c?void 0:(u?l?Ai:Oi:l?Rn:hn)(e);return rt(f||e,(function(r,i){f&&(r=e[i=r]),Mt(a,i,Lo(r,t,n,i,e,o))})),a}Ho[_o]=Ho["[object Array]"]=Ho["[object ArrayBuffer]"]=Ho["[object DataView]"]=Ho["[object Boolean]"]=Ho["[object Date]"]=Ho["[object Float32Array]"]=Ho["[object Float64Array]"]=Ho["[object Int8Array]"]=Ho["[object Int16Array]"]=Ho["[object Int32Array]"]=Ho["[object Map]"]=Ho["[object Number]"]=Ho[$o]=Ho["[object RegExp]"]=Ho["[object Set]"]=Ho["[object String]"]=Ho["[object Symbol]"]=Ho["[object Uint8Array]"]=Ho["[object Uint8ClampedArray]"]=Ho["[object Uint16Array]"]=Ho["[object Uint32Array]"]=!0,Ho["[object Error]"]=Ho[Oo]=Ho["[object WeakMap]"]=!1;var jo=4;function To(e){return Lo(e,jo)}var Do=1,No=4;function Go(e){return Lo(e,Do|No)}function Wo(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new On;++t<n;)this.add(e[t])}function zo(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function qo(e,t){return e.has(t)}Wo.prototype.add=Wo.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Wo.prototype.has=function(e){return this.__data__.has(e)};function Vo(e,t,n,r,i,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(e),c=o.get(t);if(u&&c)return u==t&&c==e;var d=-1,h=!0,p=2&n?new Wo:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var f=e[d],g=t[d];if(r)var m=a?r(g,f,d,t,e,o):r(f,g,d,e,t,o);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!zo(t,(function(e,t){if(!qo(p,t)&&(f===e||i(f,e,n,r,o)))return p.push(t)}))){h=!1;break}}else if(f!==g&&!i(f,g,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Uo(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Ko(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Jo=k?k.prototype:void 0,Yo=Jo?Jo.valueOf:void 0;var Zo=Object.prototype.hasOwnProperty;var Xo="[object Arguments]",Qo="[object Array]",ea="[object Object]",ta=Object.prototype.hasOwnProperty;function na(e,t,n,r,i,o){var a=T(e),s=T(t),l=a?Qo:Ji(e),u=s?Qo:Ji(t),c=(l=l==Xo?ea:l)==ea,d=(u=u==Xo?ea:u)==ea,h=l==u;if(h&&Yt(e)){if(!Yt(t))return!1;a=!0,c=!1}if(h&&!c)return o||(o=new bi),a||on(e)?Vo(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Zi(e),new Zi(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Pt(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Uo;case"[object Set]":var l=1&r;if(s||(s=Ko),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var c=Vo(s(e),s(t),r,i,o,a);return a.delete(e),c;case"[object Symbol]":if(Yo)return Yo.call(e)==Yo.call(t)}return!1}(e,t,l,n,r,i,o);if(!(1&n)){var p=c&&ta.call(e,"__wrapped__"),f=d&&ta.call(t,"__wrapped__");if(p||f){var g=p?e.value():e,m=f?t.value():t;return o||(o=new bi),i(g,m,n,r,o)}}return!!h&&(o||(o=new bi),function(e,t,n,r,i,o){var a=1&n,s=Oi(e),l=s.length;if(l!=Oi(t).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in t:Zo.call(t,c)))return!1}var d=o.get(e),h=o.get(t);if(d&&h)return d==t&&h==e;var p=!0;o.set(e,t),o.set(t,e);for(var f=a;++u<l;){var g=e[c=s[u]],m=t[c];if(r)var R=a?r(m,g,c,t,e,o):r(g,m,c,e,t,o);if(!(void 0===R?g===m||i(g,m,n,r,o):R)){p=!1;break}f||(f="constructor"==c)}if(p&&!f){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,o))}function ra(e,t,n,r,i){return e===t||(null==e||null==t||!$(e)&&!$(t)?e!=e&&t!=t:na(e,t,n,r,ra,i))}function ia(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var l=(s=n[i])[0],u=e[l],c=s[1];if(a&&s[2]){if(void 0===u&&!(l in e))return!1}else{var d=new bi;if(r)var h=r(u,c,l,e,t,d);if(!(void 0===h?ra(c,u,3,r,d):h))return!1}}return!0}function oa(e){return e==e&&!J(e)}function aa(e){for(var t=hn(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,oa(i)]}return t}function sa(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function la(e){var t=aa(e);return 1==t.length&&t[0][2]?sa(t[0][0],t[0][1]):function(n){return n===e||ia(n,e,t)}}function ua(e,t){return null!=e&&t in Object(e)}function ca(e,t,n){for(var r=-1,i=(t=Tn(t,e)).length,o=!1;++r<i;){var a=Dn(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&At(i)&&ft(a,i)&&(T(e)||qt(e))}function da(e,t){return null!=e&&ca(e,t,ua)}function ha(e,t){return wn(e)&&oa(t)?sa(Dn(e),t):function(n){var r=Gn(n,e);return void 0===r&&r===t?da(n,e):ra(t,r,3)}}function pa(e){return function(t){return null==t?void 0:t[e]}}function fa(e){return wn(e)?pa(Dn(e)):function(e){return function(t){return Nn(t,e)}}(e)}function ga(e){return"function"==typeof e?e:null==e?ie:"object"==typeof e?T(e)?ha(e[0],e[1]):la(e):fa(e)}function ma(e,t,n){var r=n.length;if(null==e)return!r;for(e=Object(e);r--;){var i=n[r],o=t[i],a=e[i];if(void 0===a&&!(i in e)||!o(a))return!1}return!0}function Ra(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function va(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}var ba=va();function ya(e,t){return e&&ba(e,t,hn)}function Sa(e,t){return function(n,r){if(null==n)return n;if(!$t(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Object(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}var Ba=Sa(ya);function wa(e,t,n,r){return Ba(e,(function(e,i,o){t(r,e,n(e),o)})),r}function Ca(e,t){return function(n,r){var i=T(n)?Ra:wa,o=t?t():{};return i(n,e,ga(r),o)}}var ka=Object.prototype.hasOwnProperty,Pa=Ca((function(e,t,n){ka.call(e,n)?++e[n]:kt(e,n,1)}));function xa(e,t,n){var r=wt(e,8,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return r.placeholder=xa.placeholder,r}xa.placeholder={};function Ma(e,t,n){var r=wt(e,16,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return r.placeholder=Ma.placeholder,r}Ma.placeholder={};var Ia=function(){return C.Date.now()},Fa=Math.max,Ea=Math.min;function _a(e,t,n){var r,i,o,a,s,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function f(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=o}function g(){var e=Ia();if(f(e))return m(e);s=setTimeout(g,function(e){var n=t-(e-l);return d?Ea(n,o-(e-u)):n}(e))}function m(e){return s=void 0,h&&r?p(e):(r=i=void 0,a)}function R(){var e=Ia(),n=f(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return function(e){return u=e,s=setTimeout(g,t),c?p(e):a}(l);if(d)return clearTimeout(s),s=setTimeout(g,t),p(l)}return void 0===s&&(s=setTimeout(g,t)),a}return t=ee(t)||0,J(n)&&(c=!!n.leading,o=(d="maxWait"in n)?Fa(ee(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),R.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},R.flush=function(){return void 0===s?a:m(Ia())},R}var Oa=Object.prototype,Aa=Oa.hasOwnProperty,$a=_t((function(e,t){e=Object(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&Ht(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=Rn(o),s=-1,l=a.length;++s<l;){var u=a[s],c=e[u];(void 0===c||Pt(c,Oa[u])&&!Aa.call(e,u))&&(e[u]=o[u])}return e}));function Ha(e,t,n){(void 0!==n&&!Pt(e[t],n)||void 0===n&&!(t in e))&&kt(e,t,n)}function La(e){return $(e)&&$t(e)}function ja(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Ta(e){return It(e,Rn(e))}function Da(e,t,n,r,i){e!==t&&ba(t,(function(o,a){if(i||(i=new bi),J(o))!function(e,t,n,r,i,o,a){var s=ja(e,n),l=ja(t,n),u=a.get(l);if(u)Ha(e,n,u);else{var c=o?o(s,l,n+"",e,t,a):void 0,d=void 0===c;if(d){var h=T(l),p=!h&&Yt(l),f=!h&&!p&&on(l);c=l,h||p||f?T(s)?c=s:La(s)?c=Ge(s):p?(d=!1,c=ki(l,!0)):f?(d=!1,c=no(l,!0)):c=[]:rr(l)||qt(l)?(c=s,qt(s)?c=Ta(s):J(s)&&!ue(s)||(c=Co(l))):d=!1}d&&(a.set(l,c),i(c,l,r,o,a),a.delete(l)),Ha(e,n,c)}}(e,t,a,n,Da,r,i);else{var s=r?r(ja(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),Ha(e,a,s)}}),Rn)}function Na(e,t,n,r,i,o){return J(e)&&J(t)&&(o.set(t,e),Da(e,t,void 0,Na,o),o.delete(t)),e}var Ga=Lt((function(e,t,n,r){Da(e,t,n,r)})),Wa=_t((function(e){return e.push(void 0,Na),Ie(Ga,void 0,e)}));function za(e,t,n){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,n)}),t)}var qa=_t((function(e,t){return za(e,1,t)})),Va=_t((function(e,t,n){return za(e,ee(t)||0,n)}));function Ua(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Ka(e,t,n,r){var i=-1,o=st,a=!0,s=e.length,l=[],u=t.length;if(!s)return l;n&&(t=j(t,Xt(n))),r?(o=Ua,a=!1):t.length>=200&&(o=qo,a=!1,t=new Wo(t));e:for(;++i<s;){var c=e[i],d=null==n?c:n(c);if(c=r||0!==c?c:0,a&&d==d){for(var h=u;h--;)if(t[h]===d)continue e;l.push(c)}else o(t,d,r)||l.push(c)}return l}var Ja=_t((function(e,t){return La(e)?Ka(e,Un(t,1,La,!0)):[]}));function Ya(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Za=_t((function(e,t){var n=Ya(t);return La(n)&&(n=void 0),La(e)?Ka(e,Un(t,1,La,!0),ga(n)):[]})),Xa=_t((function(e,t){var n=Ya(t);return La(n)&&(n=void 0),La(e)?Ka(e,Un(t,1,La,!0),void 0,n):[]})),Qa=W((function(e,t){return e/t}),1);function es(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?cr(e,r?0:o,r?o+1:i):cr(e,r?o+1:0,r?i:o)}function ts(e){return"function"==typeof e?e:ie}function ns(e,t){return(T(e)?rt:Ba)(e,ts(t))}function rs(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}var is=va(!0);function os(e,t){return e&&is(e,t,hn)}var as=Sa(os,!0);function ss(e,t){return(T(e)?rs:as)(e,ts(t))}function ls(e){return function(t){var n=Ji(t);return"[object Map]"==n?Uo(t):"[object Set]"==n?function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}(t):function(e,t){return j(t,(function(t){return[t,e[t]]}))}(t,e(t))}}var us=ls(hn),cs=ls(Rn),ds=Er({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),hs=/[&<>"']/g,ps=RegExp(hs.source);function fs(e){return(e=jn(e))&&ps.test(e)?e.replace(hs,ds):e}var gs=/[\\^$.*+?()[\]{}|]/g,ms=RegExp(gs.source);function Rs(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function vs(e,t){var n=!0;return Ba(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function bs(e){return e?Ri(re(e),0,4294967295):0}function ys(e,t){var n=[];return Ba(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function Ss(e){return function(t,n,r){var i=Object(t);if(!$t(t)){var o=ga(n);t=hn(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:void 0}}var Bs=Math.max;function ws(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:re(n);return i<0&&(i=Bs(r+i,0)),it(e,ga(t),i)}var Cs=Ss(ws);function ks(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}var Ps=Math.max,xs=Math.min;function Ms(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=re(n),i=n<0?Ps(r+i,0):xs(i,r-1)),it(e,ga(t),i,!0)}var Is=Ss(Ms);function Fs(e){return e&&e.length?e[0]:void 0}function Es(e,t){var n=-1,r=$t(e)?Array(e.length):[];return Ba(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function _s(e,t){return(T(e)?j:Es)(e,ga(t))}var Os=1/0;var As=1/0;var $s=hi("floor");function Hs(e){return Jn((function(t){var n=t.length,r=n,i=Ne.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new TypeError("Expected a function");if(i&&!a&&"wrapper"==De(o))var a=new Ne([],!0)}for(r=a?r:n;++r<n;){var s=De(o=t[r]),l="wrapper"==s?Le(o):void 0;a=l&&Ve(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?a[De(l[0])].apply(a,l[3]):1==o.length&&Ve(o)?a[s]():a.thru(o)}return function(){var e=arguments,r=e[0];if(a&&1==e.length&&T(r))return a.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}var Ls=Hs(),js=Hs(!0);function Ts(e,t){return Pi(t,(function(t){return ue(e[t])}))}var Ds=Object.prototype.hasOwnProperty,Ns=Ca((function(e,t,n){Ds.call(e,n)?e[n].push(t):kt(e,n,[t])}));function Gs(e,t){return e>t}function Ws(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ee(t),n=ee(n)),e(t,n)}}var zs=Ws(Gs),qs=Ws((function(e,t){return e>=t})),Vs=Object.prototype.hasOwnProperty;function Us(e,t){return null!=e&&Vs.call(e,t)}var Ks=Math.max,Js=Math.min;function Ys(e){return"string"==typeof e||!T(e)&&$(e)&&"[object String]"==A(e)}function Zs(e,t){return j(t,(function(t){return e[t]}))}function Xs(e){return null==e?[]:Zs(e,hn(e))}var Qs=Math.max;var el=Math.max;var tl=Math.min;function nl(e,t,n){for(var r=n?Ua:st,i=e[0].length,o=e.length,a=o,s=Array(o),l=1/0,u=[];a--;){var c=e[a];a&&t&&(c=j(c,Xt(t))),l=tl(c.length,l),s[a]=!n&&(t||i>=120&&c.length>=120)?new Wo(a&&c):void 0}c=e[0];var d=-1,h=s[0];e:for(;++d<i&&u.length<l;){var p=c[d],f=t?t(p):p;if(p=n||0!==p?p:0,!(h?qo(h,f):r(u,f,n))){for(a=o;--a;){var g=s[a];if(!(g?qo(g,f):r(e[a],f,n)))continue e}h&&h.push(f),u.push(p)}}return u}function rl(e){return La(e)?e:[]}var il=_t((function(e){var t=j(e,rl);return t.length&&t[0]===e[0]?nl(t):[]})),ol=_t((function(e){var t=Ya(e),n=j(e,rl);return t===Ya(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?nl(n,ga(t)):[]})),al=_t((function(e){var t=Ya(e),n=j(e,rl);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?nl(n,void 0,t):[]}));function sl(e,t){return function(n,r){return function(e,t,n,r){return ya(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}var ll=Object.prototype.toString,ul=sl((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ll.call(t)),e[t]=n}),Qe(ie)),cl=Object.prototype,dl=cl.hasOwnProperty,hl=cl.toString,pl=sl((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=hl.call(t)),dl.call(e,t)?e[t].push(n):e[t]=[n]}),ga);function fl(e,t){return t.length<2?e:Nn(e,cr(t,0,-1))}function gl(e,t,n){var r=null==(e=fl(e,t=Tn(t,e)))?e:e[Dn(Ya(t))];return null==r?void 0:Ie(r,e,n)}var ml=_t(gl),Rl=_t((function(e,t,n){var r=-1,i="function"==typeof t,o=$t(e)?Array(e.length):[];return Ba(e,(function(e){o[++r]=i?Ie(t,e,n):gl(e,t,n)})),o}));var vl=nn&&nn.isArrayBuffer,bl=vl?Xt(vl):function(e){return $(e)&&"[object ArrayBuffer]"==A(e)};var yl=nn&&nn.isDate,Sl=yl?Xt(yl):function(e){return $(e)&&"[object Date]"==A(e)};var Bl=Object.prototype.hasOwnProperty;function wl(e,t){return ra(e,t)}var Cl=C.isFinite;function kl(e){return"number"==typeof e&&e==re(e)}function Pl(e){return"number"==typeof e||$(e)&&"[object Number]"==A(e)}var xl=de?ue:Vt;var Ml=nn&&nn.isRegExp,Il=Ml?Xt(Ml):function(e){return $(e)&&"[object RegExp]"==A(e)},Fl=9007199254740991;var El=Array.prototype.join;var _l=li((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ol=Ca((function(e,t,n){kt(e,n,t)}));var Al=Math.max,$l=Math.min;var Hl=li((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ll=xr("toLowerCase");function jl(e,t){return e<t}var Tl=Ws(jl),Dl=Ws((function(e,t){return e<=t}));function Nl(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(void 0===s?a==a&&!H(a):n(a,s)))var s=a,l=o}return l}function Gl(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Wl(e,t){var n=null==e?0:e.length;return n?Gl(e,t)/n:NaN}var zl=Lt((function(e,t,n){Da(e,t,n)})),ql=_t((function(e,t){return function(n){return gl(n,e,t)}})),Vl=_t((function(e,t){return function(n){return gl(e,n,t)}}));function Ul(e,t,n){var r=hn(t),i=Ts(t,r),o=!(J(n)&&"chain"in n&&!n.chain),a=ue(e);return rt(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Ge(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,zn([this.value()],arguments))})})),e}var Kl=W((function(e,t){return e*t}),1);function Jl(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var Yl=k?k.iterator:void 0;function Zl(e){if(!e)return[];if($t(e))return Ys(e)?Pr(e):Ge(e);if(Yl&&e[Yl])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Yl]());var t=Ji(e);return("[object Map]"==t?Uo:"[object Set]"==t?Ko:Xs)(e)}function Xl(e,t){var n=e.length;if(n)return ft(t+=t<0?n:0,n)?e[t]:void 0}function Ql(e,t){return null==(e=fl(e,t=Tn(t,e)))||delete e[Dn(Ya(t))]}function eu(e){return rr(e)?void 0:e}var tu=Jn((function(e,t){var n={};if(null==e)return n;var r=!1;t=j(t,(function(t){return t=Tn(t,e),r||(r=t.length>1),t})),It(e,Ai(e),n),r&&(n=Lo(n,7,eu));for(var i=t.length;i--;)Ql(n,t[i]);return n}));function nu(e,t,n,r){if(!J(e))return e;for(var i=-1,o=(t=Tn(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var l=Dn(t[i]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=a){var c=s[l];void 0===(u=r?r(c,l,s):void 0)&&(u=J(c)?c:ft(t[i+1])?[]:{})}Mt(s,l,u),s=s[l]}return e}function ru(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Nn(e,a);n(s,a)&&nu(o,Tn(a,e),s)}return o}function iu(e,t){if(null==e)return{};var n=j(Ai(e),(function(e){return[e]}));return t=ga(t),ru(e,n,(function(e,n){return t(e,n[0])}))}function ou(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=H(e),a=void 0!==t,s=null===t,l=t==t,u=H(t);if(!s&&!u&&!o&&e>t||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&e<t||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}function au(e,t,n){t=t.length?j(t,(function(e){return T(e)?function(t){return Nn(t,1===e.length?e[0]:e)}:e})):[ie];var r=-1;t=j(t,Xt(ga));var i=Es(e,(function(e,n,i){var o=j(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var l=ou(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function su(e){return Jn((function(t){return t=j(t,Xt(ga)),_t((function(n){var r=this;return e(t,(function(e){return Ie(e,r,n)}))}))}))}var lu=su(j),uu=_t,cu=Math.min,du=uu((function(e,t){var n=(t=1==t.length&&T(t[0])?j(t[0],Xt(ga)):j(Un(t,1),Xt(ga))).length;return _t((function(r){for(var i=-1,o=cu(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Ie(e,this,r)}))})),hu=su(Rs),pu=su(zo),fu=Math.floor;function gu(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=fu(t/2))&&(e+=e)}while(t);return n}var mu=pa("length"),Ru="\\ud800-\\udfff",vu="["+Ru+"]",bu="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",yu="\\ud83c[\\udffb-\\udfff]",Su="[^"+Ru+"]",Bu="(?:\\ud83c[\\udde6-\\uddff]){2}",wu="[\\ud800-\\udbff][\\udc00-\\udfff]",Cu="(?:"+bu+"|"+yu+")"+"?",ku="[\\ufe0e\\ufe0f]?",Pu=ku+Cu+("(?:\\u200d(?:"+[Su,Bu,wu].join("|")+")"+ku+Cu+")*"),xu="(?:"+[Su+bu+"?",bu,Bu,wu,vu].join("|")+")",Mu=RegExp(yu+"(?="+yu+")|"+xu+Pu,"g");function Iu(e){return pr(e)?function(e){for(var t=Mu.lastIndex=0;Mu.test(e);)++t;return t}(e):mu(e)}var Fu=Math.ceil;function Eu(e,t){var n=(t=void 0===t?" ":G(t)).length;if(n<2)return n?gu(t,e):t;var r=gu(t,Fu(e/Iu(t)));return pr(t)?dr(Pr(r),0,e).join(""):r.slice(0,e)}var _u=Math.ceil,Ou=Math.floor;var Au=/^\s+/,$u=C.parseInt;var Hu=_t((function(e,t){return wt(e,32,void 0,t,Rt(t,dt(Hu)))}));Hu.placeholder={};var Lu=_t((function(e,t){return wt(e,64,void 0,t,Rt(t,dt(Lu)))}));Lu.placeholder={};var ju=Ca((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Tu=Jn((function(e,t){return null==e?{}:function(e,t){return ru(e,t,(function(t,n){return da(e,n)}))}(e,t)}));function Du(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}var Nu=Array.prototype.splice;function Gu(e,t,n,r){var i=r?Du:at,o=-1,a=t.length,s=e;for(e===t&&(t=Ge(t)),n&&(s=j(e,Xt(n)));++o<a;)for(var l=0,u=t[o],c=n?n(u):u;(l=i(s,c,l,r))>-1;)s!==e&&Nu.call(s,l,1),Nu.call(e,l,1);return e}function Wu(e,t){return e&&e.length&&t&&t.length?Gu(e,t):e}var zu=_t(Wu);var qu=Array.prototype.splice;function Vu(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;ft(i)?qu.call(e,i,1):Ql(e,i)}}return e}var Uu=Jn((function(e,t){var n=null==e?0:e.length,r=Wn(e,t);return Vu(e,j(t,(function(e){return ft(e,n)?+e:e})).sort(ou)),r})),Ku=Math.floor,Ju=Math.random;function Yu(e,t){return e+Ku(Ju()*(t-e+1))}var Zu=parseFloat,Xu=Math.min,Qu=Math.random;var ec=Math.ceil,tc=Math.max;function nc(e){return function(t,n,r){return r&&"number"!=typeof r&&Ht(t,n,r)&&(n=r=void 0),t=ne(t),void 0===n?(n=t,t=0):n=ne(n),function(e,t,n,r){for(var i=-1,o=tc(ec((t-e)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=e,e+=n;return a}(t,n,r=void 0===r?t<n?1:-1:ne(r),e)}}var rc=nc(),ic=nc(!0),oc=Jn((function(e,t){return wt(e,256,void 0,void 0,void 0,t)}));function ac(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function sc(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}var lc=Array.prototype.reverse;function uc(e){return null==e?e:lc.call(e)}var cc=hi("round");function dc(e){var t=e.length;return t?e[Yu(0,t-1)]:void 0}function hc(e){return dc(Xs(e))}function pc(e){return(T(e)?dc:hc)(e)}function fc(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var o=Yu(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}function gc(e,t){return fc(Ge(e),Ri(t,0,e.length))}function mc(e,t){var n=Xs(e);return fc(n,Ri(t,0,n.length))}function Rc(e){return fc(Ge(e))}function vc(e){return fc(Xs(e))}var bc=li((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));function yc(e,t){var n;return Ba(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}var Sc=_t((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Ht(e,t[0],t[1])?t=[]:n>2&&Ht(t[0],t[1],t[2])&&(t=[t[0]]),au(e,Un(t,1),[])})),Bc=Math.floor,wc=Math.min;function Cc(e,t,n,r){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=n(t))!=t,s=null===t,l=H(t),u=void 0===t;i<o;){var c=Bc((i+o)/2),d=n(e[c]),h=void 0!==d,p=null===d,f=d==d,g=H(d);if(a)var m=r||f;else m=u?f&&(r||h):s?f&&h&&(r||!p):l?f&&h&&!p&&(r||!g):!p&&!g&&(r?d<=t:d<t);m?i=c+1:o=c}return wc(o,4294967294)}function kc(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!H(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return Cc(e,t,ie,n)}function Pc(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Pt(s,l)){var l=s;o[i++]=0===a?0:a}}return o}var xc=Math.max;var Mc=li((function(e,t,n){return e+(n?" ":"")+Mr(t)}));var Ic=W((function(e,t){return e-t}),0);function Fc(e,t){return e&&e.length?Gl(e,ga(t)):0}var Ec=Object.prototype,_c=Ec.hasOwnProperty;function Oc(e,t,n,r){return void 0===e||Pt(e,Ec[n])&&!_c.call(r,n)?t:e}var Ac={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function $c(e){return"\\"+Ac[e]}var Hc=/<%=([\s\S]+?)%>/g,Lc={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Hc,variable:"",imports:{_:{escape:fs}}},jc=/\b__p \+= '';/g,Tc=/\b(__p \+=) '' \+/g,Dc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Nc=/[()=,{}\[\]\/\s]/,Gc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wc=/($^)/,zc=/['\n\r\u2028\u2029\\]/g,qc=Object.prototype.hasOwnProperty;function Vc(e,t){return t(e)}var Uc=4294967295,Kc=Math.min;function Jc(e,t){var n=e;return n instanceof $e&&(n=n.value()),Fr(t,(function(e,t){return t.func.apply(t.thisArg,zn([e],t.args))}),n)}function Yc(){return Jc(this.__wrapped__,this.__actions__)}var Zc=9007199254740991;function Xc(e,t){for(var n=e.length;n--&&at(t,e[n],0)>-1;);return n}function Qc(e,t){for(var n=-1,r=e.length;++n<r&&at(t,e[n],0)>-1;);return n}var ed=/^\s+/;var td=/\w*$/;var nd=Er({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),rd=/&(?:amp|lt|gt|quot|#39);/g,id=RegExp(rd.source);var od=Li&&1/Ko(new Li([,-0]))[1]==1/0?function(e){return new Li(e)}:He;function ad(e,t,n){var r=-1,i=st,o=e.length,a=!0,s=[],l=s;if(n)a=!1,i=Ua;else if(o>=200){var u=t?null:od(e);if(u)return Ko(u);a=!1,i=qo,l=new Wo}else l=t?[]:s;e:for(;++r<o;){var c=e[r],d=t?t(c):c;if(c=n||0!==c?c:0,a&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),s.push(c)}else i(l,d,n)||(l!==s&&l.push(d),s.push(c))}return s}var sd=_t((function(e){return ad(Un(e,1,La,!0))})),ld=_t((function(e){var t=Ya(e);return La(t)&&(t=void 0),ad(Un(e,1,La,!0),ga(t))})),ud=_t((function(e){var t=Ya(e);return t="function"==typeof t?t:void 0,ad(Un(e,1,La,!0),void 0,t)}));var cd=0;var dd=Math.max;function hd(e){if(!e||!e.length)return[];var t=0;return e=Pi(e,(function(e){if(La(e))return t=dd(e.length,t),!0})),Dt(t,(function(t){return j(e,pa(t))}))}function pd(e,t){if(!e||!e.length)return[];var n=hd(e);return null==t?n:j(n,(function(e){return Ie(t,void 0,e)}))}function fd(e,t,n,r){return nu(e,t,n(Nn(e,t)),r)}var gd=li((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}));var md=_t((function(e,t){return La(e)?Ka(e,t):[]}));var Rd=Jn((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Wn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof $e&&ft(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:Vc,args:[i],thisArg:void 0}),new Ne(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));function vd(e,t,n){var r=e.length;if(r<2)return r?ad(e[0]):[];for(var i=-1,o=Array(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=Ka(o[i]||a,e[s],t,n));return ad(Un(o,1),t,n)}var bd=_t((function(e){return vd(Pi(e,La))})),yd=_t((function(e){var t=Ya(e);return La(t)&&(t=void 0),vd(Pi(e,La),ga(t))})),Sd=_t((function(e){var t=Ya(e);return t="function"==typeof t?t:void 0,vd(Pi(e,La),void 0,t)})),Bd=_t(hd);function wd(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:void 0;n(a,e[r],s)}return a}var Cd=_t((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,pd(e,n)})),kd={chunk:function(e,t,n){t=(n?Ht(e,t,n):void 0===t)?1:mi(re(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,a=Array(gi(r/t));i<r;)a[o++]=cr(e,i,i+=t);return a},compact:function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},concat:function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return zn(T(n)?Ge(n):[n],Un(t,1))},difference:Ja,differenceBy:Za,differenceWith:Xa,drop:function(e,t,n){var r=null==e?0:e.length;return r?cr(e,(t=n||void 0===t?1:re(t))<0?0:t,r):[]},dropRight:function(e,t,n){var r=null==e?0:e.length;return r?cr(e,0,(t=r-(t=n||void 0===t?1:re(t)))<0?0:t):[]},dropRightWhile:function(e,t){return e&&e.length?es(e,ga(t),!0,!0):[]},dropWhile:function(e,t){return e&&e.length?es(e,ga(t),!0):[]},fill:function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Ht(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=re(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:re(r))<0&&(r+=i),r=n>r?0:bs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},findIndex:ws,findLastIndex:Ms,first:Fs,flatten:Kn,flattenDeep:function(e){return(null==e?0:e.length)?Un(e,As):[]},flattenDepth:function(e,t){return(null==e?0:e.length)?Un(e,t=void 0===t?1:re(t)):[]},fromPairs:function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},head:Fs,indexOf:function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:re(n);return i<0&&(i=el(r+i,0)),at(e,t,i)},initial:function(e){return(null==e?0:e.length)?cr(e,0,-1):[]},intersection:il,intersectionBy:ol,intersectionWith:al,join:function(e,t){return null==e?"":El.call(e,t)},last:Ya,lastIndexOf:function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=re(n))<0?Al(r+i,0):$l(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):it(e,ot,i,!0)},nth:function(e,t){return e&&e.length?Xl(e,re(t)):void 0},pull:zu,pullAll:Wu,pullAllBy:function(e,t,n){return e&&e.length&&t&&t.length?Gu(e,t,ga(n)):e},pullAllWith:function(e,t,n){return e&&e.length&&t&&t.length?Gu(e,t,void 0,n):e},pullAt:Uu,remove:function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=ga(t);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Vu(e,i),n},reverse:uc,slice:function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Ht(e,t,n)?(t=0,n=r):(t=null==t?0:re(t),n=void 0===n?r:re(n)),cr(e,t,n)):[]},sortedIndex:function(e,t){return kc(e,t)},sortedIndexBy:function(e,t,n){return Cc(e,t,ga(n))},sortedIndexOf:function(e,t){var n=null==e?0:e.length;if(n){var r=kc(e,t);if(r<n&&Pt(e[r],t))return r}return-1},sortedLastIndex:function(e,t){return kc(e,t,!0)},sortedLastIndexBy:function(e,t,n){return Cc(e,t,ga(n),!0)},sortedLastIndexOf:function(e,t){if(null==e?0:e.length){var n=kc(e,t,!0)-1;if(Pt(e[n],t))return n}return-1},sortedUniq:function(e){return e&&e.length?Pc(e):[]},sortedUniqBy:function(e,t){return e&&e.length?Pc(e,ga(t)):[]},tail:function(e){var t=null==e?0:e.length;return t?cr(e,1,t):[]},take:function(e,t,n){return e&&e.length?cr(e,0,(t=n||void 0===t?1:re(t))<0?0:t):[]},takeRight:function(e,t,n){var r=null==e?0:e.length;return r?cr(e,(t=r-(t=n||void 0===t?1:re(t)))<0?0:t,r):[]},takeRightWhile:function(e,t){return e&&e.length?es(e,ga(t),!1,!0):[]},takeWhile:function(e,t){return e&&e.length?es(e,ga(t)):[]},union:sd,unionBy:ld,unionWith:ud,uniq:function(e){return e&&e.length?ad(e):[]},uniqBy:function(e,t){return e&&e.length?ad(e,ga(t)):[]},uniqWith:function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?ad(e,void 0,t):[]},unzip:hd,unzipWith:pd,without:md,xor:bd,xorBy:yd,xorWith:Sd,zip:Bd,zipObject:function(e,t){return wd(e||[],t||[],Mt)},zipObjectDeep:function(e,t){return wd(e||[],t||[],nu)},zipWith:Cd},Pd={countBy:Pa,each:ns,eachRight:ss,every:function(e,t,n){var r=T(e)?Rs:vs;return n&&Ht(e,t,n)&&(t=void 0),r(e,ga(t))},filter:function(e,t){return(T(e)?Pi:ys)(e,ga(t))},find:Cs,findLast:Is,flatMap:function(e,t){return Un(_s(e,t),1)},flatMapDeep:function(e,t){return Un(_s(e,t),Os)},flatMapDepth:function(e,t,n){return n=void 0===n?1:re(n),Un(_s(e,t),n)},forEach:ns,forEachRight:ss,groupBy:Ns,includes:function(e,t,n,r){e=$t(e)?e:Xs(e),n=n&&!r?re(n):0;var i=e.length;return n<0&&(n=Qs(i+n,0)),Ys(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&at(e,t,n)>-1},invokeMap:Rl,keyBy:Ol,map:_s,orderBy:function(e,t,n,r){return null==e?[]:(T(t)||(t=null==t?[]:[t]),T(n=r?void 0:n)||(n=null==n?[]:[n]),au(e,t,n))},partition:ju,reduce:function(e,t,n){var r=T(e)?Fr:ac,i=arguments.length<3;return r(e,ga(t),n,i,Ba)},reduceRight:function(e,t,n){var r=T(e)?sc:ac,i=arguments.length<3;return r(e,ga(t),n,i,as)},reject:function(e,t){return(T(e)?Pi:ys)(e,Jl(ga(t)))},sample:pc,sampleSize:function(e,t,n){return t=(n?Ht(e,t,n):void 0===t)?1:re(t),(T(e)?gc:mc)(e,t)},shuffle:function(e){return(T(e)?Rc:vc)(e)},size:function(e){if(null==e)return 0;if($t(e))return Ys(e)?Iu(e):e.length;var t=Ji(e);return"[object Map]"==t||"[object Set]"==t?e.size:dn(e).length},some:function(e,t,n){var r=T(e)?zo:yc;return n&&Ht(e,t,n)&&(t=void 0),r(e,ga(t))},sortBy:Sc},xd=Ia,Md={after:function(e,t){if("function"!=typeof t)throw new TypeError("Expected a function");return e=re(e),function(){if(--e<1)return t.apply(this,arguments)}},ary:Ct,before:ar,bind:sr,bindKey:ur,curry:xa,curryRight:Ma,debounce:_a,defer:qa,delay:Va,flip:function(e){return wt(e,512)},memoize:An,negate:Jl,once:function(e){return ar(2,e)},overArgs:du,partial:Hu,partialRight:Lu,rearg:oc,rest:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return _t(e,t=void 0===t?t:re(t))},spread:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=null==t?0:xc(re(t),0),_t((function(n){var r=n[t],i=dr(n,0,t);return r&&zn(i,r),Ie(e,this,i)}))},throttle:function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return J(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),_a(e,t,{leading:r,maxWait:t,trailing:i})},unary:function(e){return Ct(e,1)},wrap:function(e,t){return Hu(ts(t),e)}},Id={castArray:function(){if(!arguments.length)return[];var e=arguments[0];return T(e)?e:[e]},clone:To,cloneDeep:Go,cloneDeepWith:function(e,t){return Lo(e,5,t="function"==typeof t?t:void 0)},cloneWith:function(e,t){return Lo(e,4,t="function"==typeof t?t:void 0)},conformsTo:function(e,t){return null==t||ma(e,t,hn(t))},eq:Pt,gt:zs,gte:qs,isArguments:qt,isArray:T,isArrayBuffer:bl,isArrayLike:$t,isArrayLikeObject:La,isBoolean:function(e){return!0===e||!1===e||$(e)&&"[object Boolean]"==A(e)},isBuffer:Yt,isDate:Sl,isElement:function(e){return $(e)&&1===e.nodeType&&!rr(e)},isEmpty:function(e){if(null==e)return!0;if($t(e)&&(T(e)||"string"==typeof e||"function"==typeof e.splice||Yt(e)||on(e)||qt(e)))return!e.length;var t=Ji(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Tt(e))return!dn(e).length;for(var n in e)if(Bl.call(e,n))return!1;return!0},isEqual:wl,isEqualWith:function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?ra(e,t,void 0,n):!!r},isError:ir,isFinite:function(e){return"number"==typeof e&&Cl(e)},isFunction:ue,isInteger:kl,isLength:At,isMap:Po,isMatch:function(e,t){return e===t||ia(e,t,aa(t))},isMatchWith:function(e,t,n){return n="function"==typeof n?n:void 0,ia(e,t,aa(t),n)},isNaN:function(e){return Pl(e)&&e!=+e},isNative:function(e){if(xl(e))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Se(e)},isNil:function(e){return null==e},isNull:function(e){return null===e},isNumber:Pl,isObject:J,isObjectLike:$,isPlainObject:rr,isRegExp:Il,isSafeInteger:function(e){return kl(e)&&e>=-9007199254740991&&e<=Fl},isSet:Mo,isString:Ys,isSymbol:H,isTypedArray:on,isUndefined:function(e){return void 0===e},isWeakMap:function(e){return $(e)&&"[object WeakMap]"==Ji(e)},isWeakSet:function(e){return $(e)&&"[object WeakSet]"==A(e)},lt:Tl,lte:Dl,toArray:Zl,toFinite:ne,toInteger:re,toLength:bs,toNumber:ee,toPlainObject:Ta,toSafeInteger:function(e){return e?Ri(re(e),-9007199254740991,Zc):0===e?e:0},toString:jn},Fd={add:z,ceil:pi,divide:Qa,floor:$s,max:function(e){return e&&e.length?Nl(e,ie,Gs):void 0},maxBy:function(e,t){return e&&e.length?Nl(e,ga(t),Gs):void 0},mean:function(e){return Wl(e,ie)},meanBy:function(e,t){return Wl(e,ga(t))},min:function(e){return e&&e.length?Nl(e,ie,jl):void 0},minBy:function(e,t){return e&&e.length?Nl(e,ga(t),jl):void 0},multiply:Kl,round:cc,subtract:Ic,sum:function(e){return e&&e.length?Gl(e,ie):0},sumBy:Fc},Ed=vi,_d=function(e,t,n){return t=ne(t),void 0===n?(n=t,t=0):n=ne(n),function(e,t,n){return e>=Js(t,n)&&e<Ks(t,n)}(e=ee(e),t,n)},Od=function(e,t,n){if(n&&"boolean"!=typeof n&&Ht(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=ne(e),void 0===t?(t=e,e=0):t=ne(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Qu();return Xu(e+i*(t-e+Zu("1e-"+((i+"").length-1))),t)}return Yu(e,t)},Ad={assign:fn,assignIn:vn,assignInWith:bn,assignWith:yn,at:Yn,create:function(e,t){var n=xe(e);return null==t?n:yi(n,t)},defaults:$a,defaultsDeep:Wa,entries:us,entriesIn:cs,extend:vn,extendWith:bn,findKey:function(e,t){return ks(e,ga(t),ya)},findLastKey:function(e,t){return ks(e,ga(t),os)},forIn:function(e,t){return null==e?e:ba(e,ts(t),Rn)},forInRight:function(e,t){return null==e?e:is(e,ts(t),Rn)},forOwn:function(e,t){return e&&ya(e,ts(t))},forOwnRight:function(e,t){return e&&os(e,ts(t))},functions:function(e){return null==e?[]:Ts(e,hn(e))},functionsIn:function(e){return null==e?[]:Ts(e,Rn(e))},get:Gn,has:function(e,t){return null!=e&&ca(e,t,Us)},hasIn:da,invert:ul,invertBy:pl,invoke:ml,keys:hn,keysIn:Rn,mapKeys:function(e,t){var n={};return t=ga(t),ya(e,(function(e,r,i){kt(n,t(e,r,i),e)})),n},mapValues:function(e,t){var n={};return t=ga(t),ya(e,(function(e,r,i){kt(n,r,t(e,r,i))})),n},merge:zl,mergeWith:Ga,omit:tu,omitBy:function(e,t){return iu(e,Jl(ga(t)))},pick:Tu,pickBy:iu,result:function(e,t,n){var r=-1,i=(t=Tn(t,e)).length;for(i||(i=1,e=void 0);++r<i;){var o=null==e?void 0:e[Dn(t[r])];void 0===o&&(r=i,o=n),e=ue(o)?o.call(e):o}return e},set:function(e,t,n){return null==e?e:nu(e,t,n)},setWith:function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:nu(e,t,n,r)},toPairs:us,toPairsIn:cs,transform:function(e,t,n){var r=T(e),i=r||Yt(e)||on(e);if(t=ga(t),null==n){var o=e&&e.constructor;n=i?r?new o:[]:J(e)&&ue(o)?xe(Zn(e)):{}}return(i?rt:ya)(e,(function(e,r,i){return t(n,e,r,i)})),n},unset:function(e,t){return null==e||Ql(e,t)},update:function(e,t,n){return null==e?e:fd(e,t,ts(n))},updateWith:function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:fd(e,t,ts(n),r)},values:Xs,valuesIn:function(e){return null==e?[]:Zs(e,Rn(e))}},$d={at:Rd,chain:fi,commit:function(){return new Ne(this.value(),this.__chain__)},lodash:qe,next:function(){void 0===this.__values__&&(this.__values__=Zl(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},plant:function(e){for(var t,n=this;n instanceof Ae;){var r=We(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},reverse:function(){var e=this.__wrapped__;if(e instanceof $e){var t=e;return this.__actions__.length&&(t=new $e(this)),(t=t.reverse()).__actions__.push({func:Vc,args:[uc],thisArg:void 0}),new Ne(t,this.__chain__)}return this.thru(uc)},tap:function(e,t){return t(e),e},thru:Vc,toIterator:function(){return this},toJSON:Yc,value:Yc,valueOf:Yc,wrapperChain:function(){return fi(this)}},Hd={camelCase:ui,capitalize:Ir,deburr:$r,endsWith:function(e,t,n){e=jn(e),t=G(t);var r=e.length,i=n=void 0===n?r:Ri(re(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},escape:fs,escapeRegExp:function(e){return(e=jn(e))&&ms.test(e)?e.replace(gs,"\\$&"):e},kebabCase:_l,lowerCase:Hl,lowerFirst:Ll,pad:function(e,t,n){e=jn(e);var r=(t=re(t))?Iu(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Eu(Ou(i),n)+e+Eu(_u(i),n)},padEnd:function(e,t,n){e=jn(e);var r=(t=re(t))?Iu(e):0;return t&&r<t?e+Eu(t-r,n):e},padStart:function(e,t,n){e=jn(e);var r=(t=re(t))?Iu(e):0;return t&&r<t?Eu(t-r,n)+e:e},parseInt:function(e,t,n){return n||null==t?t=0:t&&(t=+t),$u(jn(e).replace(Au,""),t||0)},repeat:function(e,t,n){return t=(n?Ht(e,t,n):void 0===t)?1:re(t),gu(jn(e),t)},replace:function(){var e=arguments,t=jn(e[0]);return e.length<3?t:t.replace(e[1],e[2])},snakeCase:bc,split:function(e,t,n){return n&&"number"!=typeof n&&Ht(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=jn(e))&&("string"==typeof t||null!=t&&!Il(t))&&!(t=G(t))&&pr(e)?dr(Pr(e),0,n):e.split(t,n):[]},startCase:Mc,startsWith:function(e,t,n){return e=jn(e),n=null==n?0:Ri(re(n),0,e.length),t=G(t),e.slice(n,n+t.length)==t},template:function(e,t,n){var r=Lc.imports._.templateSettings||Lc;n&&Ht(e,t,n)&&(t=void 0),e=jn(e),t=bn({},t,r,Oc);var i,o,a=bn({},t.imports,r.imports,Oc),s=hn(a),l=Zs(a,s),u=0,c=t.interpolate||Wc,d="__p += '",h=RegExp((t.escape||Wc).source+"|"+c.source+"|"+(c===Hc?Gc:Wc).source+"|"+(t.evaluate||Wc).source+"|$","g"),p=qc.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(h,(function(t,n,r,a,s,l){return r||(r=a),d+=e.slice(u,l).replace(zc,$c),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),d+="';\n";var f=qc.call(t,"variable")&&t.variable;if(f){if(Nc.test(f))throw new Error("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(jc,""):d).replace(Tc,"$1").replace(Dc,"$1;"),d="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=or((function(){return Function(s,p+"return "+d).apply(void 0,l)}));if(g.source=d,ir(g))throw g;return g},templateSettings:Lc,toLower:function(e){return jn(e).toLowerCase()},toUpper:function(e){return jn(e).toUpperCase()},trim:function(e,t,n){if((e=jn(e))&&(n||void 0===t))return K(e);if(!e||!(t=G(t)))return e;var r=Pr(e),i=Pr(t);return dr(r,Qc(r,i),Xc(r,i)+1).join("")},trimEnd:function(e,t,n){if((e=jn(e))&&(n||void 0===t))return e.slice(0,V(e)+1);if(!e||!(t=G(t)))return e;var r=Pr(e);return dr(r,0,Xc(r,Pr(t))+1).join("")},trimStart:function(e,t,n){if((e=jn(e))&&(n||void 0===t))return e.replace(ed,"");if(!e||!(t=G(t)))return e;var r=Pr(e);return dr(r,Qc(r,Pr(t))).join("")},truncate:function(e,t){var n=30,r="...";if(J(t)){var i="separator"in t?t.separator:i;n="length"in t?re(t.length):n,r="omission"in t?G(t.omission):r}var o=(e=jn(e)).length;if(pr(e)){var a=Pr(e);o=a.length}if(n>=o)return e;var s=n-Iu(r);if(s<1)return r;var l=a?dr(a,0,s).join(""):e.slice(0,s);if(void 0===i)return l+r;if(a&&(s+=l.length-s),Il(i)){if(e.slice(s).search(i)){var u,c=l;for(i.global||(i=RegExp(i.source,jn(td.exec(i))+"g")),i.lastIndex=0;u=i.exec(c);)var d=u.index;l=l.slice(0,void 0===d?s:d)}}else if(e.indexOf(G(i),s)!=s){var h=l.lastIndexOf(i);h>-1&&(l=l.slice(0,h))}return l+r},unescape:function(e){return(e=jn(e))&&id.test(e)?e.replace(rd,nd):e},upperCase:gd,upperFirst:Mr,words:ai},Ld={attempt:or,bindAll:lr,cond:function(e){var t=null==e?0:e.length,n=ga;return e=t?j(e,(function(e){if("function"!=typeof e[1])throw new TypeError("Expected a function");return[n(e[0]),e[1]]})):[],_t((function(n){for(var r=-1;++r<t;){var i=e[r];if(Ie(i[0],this,n))return Ie(i[1],this,n)}}))},conforms:function(e){return function(e){var t=hn(e);return function(n){return ma(n,e,t)}}(Lo(e,1))},constant:Qe,defaultTo:function(e,t){return null==e||e!=e?t:e},flow:Ls,flowRight:js,identity:ie,iteratee:function(e){return ga("function"==typeof e?e:Lo(e,1))},matches:function(e){return la(Lo(e,1))},matchesProperty:function(e,t){return ha(e,Lo(t,1))},method:ql,methodOf:Vl,mixin:Ul,noop:He,nthArg:function(e){return e=re(e),_t((function(t){return Xl(t,e)}))},over:lu,overEvery:hu,overSome:pu,property:fa,propertyOf:function(e){return function(t){return null==e?void 0:Nn(e,t)}},range:rc,rangeRight:ic,stubArray:xi,stubFalse:Vt,stubObject:function(){return{}},stubString:function(){return""},stubTrue:function(){return!0},times:function(e,t){if((e=re(e))<1||e>9007199254740991)return[];var n=Uc,r=Kc(e,Uc);t=ts(t),e-=Uc;for(var i=Dt(r,t);++n<e;)t(n);return i},toPath:function(e){return T(e)?j(e,Dn):H(e)?[e]:Ge(Ln(jn(e)))},uniqueId:function(e){var t=++cd;return jn(e)+t}};var jd=Math.max,Td=Math.min;var Dd=Math.min;
/**
	 * @license
	 * Lodash (Custom Build) <https://lodash.com/>
	 * Build: `lodash modularize exports="es" -o ./`
	 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	 * Released under MIT license <https://lodash.com/license>
	 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 */
var Nd,Gd=4294967295,Wd=Array.prototype,zd=Object.prototype.hasOwnProperty,qd=k?k.iterator:void 0,Vd=Math.max,Ud=Math.min,Kd=function(e){return function(t,n,r){if(null==r){var i=J(n),o=i&&hn(n),a=o&&o.length&&Ts(n,o);(a?a.length:i)||(r=n,n=t,t=this)}return e(t,n,r)}}(Ul);qe.after=Md.after,qe.ary=Md.ary,qe.assign=Ad.assign,qe.assignIn=Ad.assignIn,qe.assignInWith=Ad.assignInWith,qe.assignWith=Ad.assignWith,qe.at=Ad.at,qe.before=Md.before,qe.bind=Md.bind,qe.bindAll=Ld.bindAll,qe.bindKey=Md.bindKey,qe.castArray=Id.castArray,qe.chain=$d.chain,qe.chunk=kd.chunk,qe.compact=kd.compact,qe.concat=kd.concat,qe.cond=Ld.cond,qe.conforms=Ld.conforms,qe.constant=Ld.constant,qe.countBy=Pd.countBy,qe.create=Ad.create,qe.curry=Md.curry,qe.curryRight=Md.curryRight,qe.debounce=Md.debounce,qe.defaults=Ad.defaults,qe.defaultsDeep=Ad.defaultsDeep,qe.defer=Md.defer,qe.delay=Md.delay,qe.difference=kd.difference,qe.differenceBy=kd.differenceBy,qe.differenceWith=kd.differenceWith,qe.drop=kd.drop,qe.dropRight=kd.dropRight,qe.dropRightWhile=kd.dropRightWhile,qe.dropWhile=kd.dropWhile,qe.fill=kd.fill,qe.filter=Pd.filter,qe.flatMap=Pd.flatMap,qe.flatMapDeep=Pd.flatMapDeep,qe.flatMapDepth=Pd.flatMapDepth,qe.flatten=kd.flatten,qe.flattenDeep=kd.flattenDeep,qe.flattenDepth=kd.flattenDepth,qe.flip=Md.flip,qe.flow=Ld.flow,qe.flowRight=Ld.flowRight,qe.fromPairs=kd.fromPairs,qe.functions=Ad.functions,qe.functionsIn=Ad.functionsIn,qe.groupBy=Pd.groupBy,qe.initial=kd.initial,qe.intersection=kd.intersection,qe.intersectionBy=kd.intersectionBy,qe.intersectionWith=kd.intersectionWith,qe.invert=Ad.invert,qe.invertBy=Ad.invertBy,qe.invokeMap=Pd.invokeMap,qe.iteratee=Ld.iteratee,qe.keyBy=Pd.keyBy,qe.keys=hn,qe.keysIn=Ad.keysIn,qe.map=Pd.map,qe.mapKeys=Ad.mapKeys,qe.mapValues=Ad.mapValues,qe.matches=Ld.matches,qe.matchesProperty=Ld.matchesProperty,qe.memoize=Md.memoize,qe.merge=Ad.merge,qe.mergeWith=Ad.mergeWith,qe.method=Ld.method,qe.methodOf=Ld.methodOf,qe.mixin=Kd,qe.negate=Jl,qe.nthArg=Ld.nthArg,qe.omit=Ad.omit,qe.omitBy=Ad.omitBy,qe.once=Md.once,qe.orderBy=Pd.orderBy,qe.over=Ld.over,qe.overArgs=Md.overArgs,qe.overEvery=Ld.overEvery,qe.overSome=Ld.overSome,qe.partial=Md.partial,qe.partialRight=Md.partialRight,qe.partition=Pd.partition,qe.pick=Ad.pick,qe.pickBy=Ad.pickBy,qe.property=Ld.property,qe.propertyOf=Ld.propertyOf,qe.pull=kd.pull,qe.pullAll=kd.pullAll,qe.pullAllBy=kd.pullAllBy,qe.pullAllWith=kd.pullAllWith,qe.pullAt=kd.pullAt,qe.range=Ld.range,qe.rangeRight=Ld.rangeRight,qe.rearg=Md.rearg,qe.reject=Pd.reject,qe.remove=kd.remove,qe.rest=Md.rest,qe.reverse=kd.reverse,qe.sampleSize=Pd.sampleSize,qe.set=Ad.set,qe.setWith=Ad.setWith,qe.shuffle=Pd.shuffle,qe.slice=kd.slice,qe.sortBy=Pd.sortBy,qe.sortedUniq=kd.sortedUniq,qe.sortedUniqBy=kd.sortedUniqBy,qe.split=Hd.split,qe.spread=Md.spread,qe.tail=kd.tail,qe.take=kd.take,qe.takeRight=kd.takeRight,qe.takeRightWhile=kd.takeRightWhile,qe.takeWhile=kd.takeWhile,qe.tap=$d.tap,qe.throttle=Md.throttle,qe.thru=Vc,qe.toArray=Id.toArray,qe.toPairs=Ad.toPairs,qe.toPairsIn=Ad.toPairsIn,qe.toPath=Ld.toPath,qe.toPlainObject=Id.toPlainObject,qe.transform=Ad.transform,qe.unary=Md.unary,qe.union=kd.union,qe.unionBy=kd.unionBy,qe.unionWith=kd.unionWith,qe.uniq=kd.uniq,qe.uniqBy=kd.uniqBy,qe.uniqWith=kd.uniqWith,qe.unset=Ad.unset,qe.unzip=kd.unzip,qe.unzipWith=kd.unzipWith,qe.update=Ad.update,qe.updateWith=Ad.updateWith,qe.values=Ad.values,qe.valuesIn=Ad.valuesIn,qe.without=kd.without,qe.words=Hd.words,qe.wrap=Md.wrap,qe.xor=kd.xor,qe.xorBy=kd.xorBy,qe.xorWith=kd.xorWith,qe.zip=kd.zip,qe.zipObject=kd.zipObject,qe.zipObjectDeep=kd.zipObjectDeep,qe.zipWith=kd.zipWith,qe.entries=Ad.toPairs,qe.entriesIn=Ad.toPairsIn,qe.extend=Ad.assignIn,qe.extendWith=Ad.assignInWith,Kd(qe,qe),qe.add=Fd.add,qe.attempt=Ld.attempt,qe.camelCase=Hd.camelCase,qe.capitalize=Hd.capitalize,qe.ceil=Fd.ceil,qe.clamp=Ed,qe.clone=Id.clone,qe.cloneDeep=Id.cloneDeep,qe.cloneDeepWith=Id.cloneDeepWith,qe.cloneWith=Id.cloneWith,qe.conformsTo=Id.conformsTo,qe.deburr=Hd.deburr,qe.defaultTo=Ld.defaultTo,qe.divide=Fd.divide,qe.endsWith=Hd.endsWith,qe.eq=Id.eq,qe.escape=Hd.escape,qe.escapeRegExp=Hd.escapeRegExp,qe.every=Pd.every,qe.find=Pd.find,qe.findIndex=kd.findIndex,qe.findKey=Ad.findKey,qe.findLast=Pd.findLast,qe.findLastIndex=kd.findLastIndex,qe.findLastKey=Ad.findLastKey,qe.floor=Fd.floor,qe.forEach=Pd.forEach,qe.forEachRight=Pd.forEachRight,qe.forIn=Ad.forIn,qe.forInRight=Ad.forInRight,qe.forOwn=Ad.forOwn,qe.forOwnRight=Ad.forOwnRight,qe.get=Ad.get,qe.gt=Id.gt,qe.gte=Id.gte,qe.has=Ad.has,qe.hasIn=Ad.hasIn,qe.head=kd.head,qe.identity=ie,qe.includes=Pd.includes,qe.indexOf=kd.indexOf,qe.inRange=_d,qe.invoke=Ad.invoke,qe.isArguments=Id.isArguments,qe.isArray=T,qe.isArrayBuffer=Id.isArrayBuffer,qe.isArrayLike=Id.isArrayLike,qe.isArrayLikeObject=Id.isArrayLikeObject,qe.isBoolean=Id.isBoolean,qe.isBuffer=Id.isBuffer,qe.isDate=Id.isDate,qe.isElement=Id.isElement,qe.isEmpty=Id.isEmpty,qe.isEqual=Id.isEqual,qe.isEqualWith=Id.isEqualWith,qe.isError=Id.isError,qe.isFinite=Id.isFinite,qe.isFunction=Id.isFunction,qe.isInteger=Id.isInteger,qe.isLength=Id.isLength,qe.isMap=Id.isMap,qe.isMatch=Id.isMatch,qe.isMatchWith=Id.isMatchWith,qe.isNaN=Id.isNaN,qe.isNative=Id.isNative,qe.isNil=Id.isNil,qe.isNull=Id.isNull,qe.isNumber=Id.isNumber,qe.isObject=J,qe.isObjectLike=Id.isObjectLike,qe.isPlainObject=Id.isPlainObject,qe.isRegExp=Id.isRegExp,qe.isSafeInteger=Id.isSafeInteger,qe.isSet=Id.isSet,qe.isString=Id.isString,qe.isSymbol=Id.isSymbol,qe.isTypedArray=Id.isTypedArray,qe.isUndefined=Id.isUndefined,qe.isWeakMap=Id.isWeakMap,qe.isWeakSet=Id.isWeakSet,qe.join=kd.join,qe.kebabCase=Hd.kebabCase,qe.last=Ya,qe.lastIndexOf=kd.lastIndexOf,qe.lowerCase=Hd.lowerCase,qe.lowerFirst=Hd.lowerFirst,qe.lt=Id.lt,qe.lte=Id.lte,qe.max=Fd.max,qe.maxBy=Fd.maxBy,qe.mean=Fd.mean,qe.meanBy=Fd.meanBy,qe.min=Fd.min,qe.minBy=Fd.minBy,qe.stubArray=Ld.stubArray,qe.stubFalse=Ld.stubFalse,qe.stubObject=Ld.stubObject,qe.stubString=Ld.stubString,qe.stubTrue=Ld.stubTrue,qe.multiply=Fd.multiply,qe.nth=kd.nth,qe.noop=Ld.noop,qe.now=xd,qe.pad=Hd.pad,qe.padEnd=Hd.padEnd,qe.padStart=Hd.padStart,qe.parseInt=Hd.parseInt,qe.random=Od,qe.reduce=Pd.reduce,qe.reduceRight=Pd.reduceRight,qe.repeat=Hd.repeat,qe.replace=Hd.replace,qe.result=Ad.result,qe.round=Fd.round,qe.sample=Pd.sample,qe.size=Pd.size,qe.snakeCase=Hd.snakeCase,qe.some=Pd.some,qe.sortedIndex=kd.sortedIndex,qe.sortedIndexBy=kd.sortedIndexBy,qe.sortedIndexOf=kd.sortedIndexOf,qe.sortedLastIndex=kd.sortedLastIndex,qe.sortedLastIndexBy=kd.sortedLastIndexBy,qe.sortedLastIndexOf=kd.sortedLastIndexOf,qe.startCase=Hd.startCase,qe.startsWith=Hd.startsWith,qe.subtract=Fd.subtract,qe.sum=Fd.sum,qe.sumBy=Fd.sumBy,qe.template=Hd.template,qe.times=Ld.times,qe.toFinite=Id.toFinite,qe.toInteger=re,qe.toLength=Id.toLength,qe.toLower=Hd.toLower,qe.toNumber=Id.toNumber,qe.toSafeInteger=Id.toSafeInteger,qe.toString=Id.toString,qe.toUpper=Hd.toUpper,qe.trim=Hd.trim,qe.trimEnd=Hd.trimEnd,qe.trimStart=Hd.trimStart,qe.truncate=Hd.truncate,qe.unescape=Hd.unescape,qe.uniqueId=Ld.uniqueId,qe.upperCase=Hd.upperCase,qe.upperFirst=Hd.upperFirst,qe.each=Pd.forEach,qe.eachRight=Pd.forEachRight,qe.first=kd.head,Kd(qe,(Nd={},ya(qe,(function(e,t){zd.call(qe.prototype,t)||(Nd[t]=e)})),Nd),{chain:!1}),qe.VERSION="4.17.21",(qe.templateSettings=Hd.templateSettings).imports._=qe,rt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){qe[e].placeholder=qe})),rt(["drop","take"],(function(e,t){$e.prototype[e]=function(n){n=void 0===n?1:Vd(re(n),0);var r=this.__filtered__&&!t?new $e(this):this.clone();return r.__filtered__?r.__takeCount__=Ud(n,r.__takeCount__):r.__views__.push({size:Ud(n,Gd),type:e+(r.__dir__<0?"Right":"")}),r},$e.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),rt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;$e.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ga(e),type:n}),t.__filtered__=t.__filtered__||r,t}})),rt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");$e.prototype[e]=function(){return this[n](1).value()[0]}})),rt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");$e.prototype[e]=function(){return this.__filtered__?new $e(this):this[n](1)}})),$e.prototype.compact=function(){return this.filter(ie)},$e.prototype.find=function(e){return this.filter(e).head()},$e.prototype.findLast=function(e){return this.reverse().find(e)},$e.prototype.invokeMap=_t((function(e,t){return"function"==typeof e?new $e(this):this.map((function(n){return gl(n,e,t)}))})),$e.prototype.reject=function(e){return this.filter(Jl(ga(e)))},$e.prototype.slice=function(e,t){e=re(e);var n=this;return n.__filtered__&&(e>0||t<0)?new $e(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=re(t))<0?n.dropRight(-t):n.take(t-e)),n)},$e.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},$e.prototype.toArray=function(){return this.take(Gd)},ya($e.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=qe[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(qe.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,s=t instanceof $e,l=a[0],u=s||T(t),c=function(e){var t=i.apply(qe,zn([e],a));return r&&d?t[0]:t};u&&n&&"function"==typeof l&&1!=l.length&&(s=u=!1);var d=this.__chain__,h=!!this.__actions__.length,p=o&&!d,f=s&&!h;if(!o&&u){t=f?t:new $e(this);var g=e.apply(t,a);return g.__actions__.push({func:Vc,args:[c],thisArg:void 0}),new Ne(g,d)}return p&&f?e.apply(this,a):(g=this.thru(c),p?r?g.value()[0]:g.value():g)})})),rt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Wd[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);qe.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(T(i)?i:[],e)}return this[n]((function(n){return t.apply(T(n)?n:[],e)}))}})),ya($e.prototype,(function(e,t){var n=qe[t];if(n){var r=n.name+"";zd.call(je,r)||(je[r]=[]),je[r].push({name:t,func:n})}})),je[vt(void 0,2).name]=[{name:"wrapper",func:void 0}],$e.prototype.clone=function(){var e=new $e(this.__wrapped__);return e.__actions__=Ge(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ge(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ge(this.__views__),e},$e.prototype.reverse=function(){if(this.__filtered__){var e=new $e(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},$e.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=T(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Td(t,e+a);break;case"takeRight":e=jd(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,c=this.__iteratees__,d=c.length,h=0,p=Dd(l,this.__takeCount__);if(!n||!r&&i==l&&p==l)return Jc(e,this.__actions__);var f=[];e:for(;l--&&h<p;){for(var g=-1,m=e[u+=t];++g<d;){var R=c[g],v=R.iteratee,b=R.type,y=v(m);if(2==b)m=y;else if(!y){if(1==b)continue e;break e}}f[h++]=m}return f},qe.prototype.at=$d.at,qe.prototype.chain=$d.wrapperChain,qe.prototype.commit=$d.commit,qe.prototype.next=$d.next,qe.prototype.plant=$d.plant,qe.prototype.reverse=$d.reverse,qe.prototype.toJSON=qe.prototype.valueOf=qe.prototype.value=$d.value,qe.prototype.first=qe.prototype.head,qd&&(qe.prototype[qd]=$d.toIterator)
/**
	 * @license
	 * Lodash (Custom Build) <https://lodash.com/>
	 * Build: `lodash modularize exports="es" -o ./`
	 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	 * Released under MIT license <https://lodash.com/license>
	 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 */;var Jd={};!function(e){!function(){const t="1.2.0";function n(e){alert("Mod ERROR:\n"+e);const t=new Error(e);throw console.error(t),t}const r=new TextEncoder;function i(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function o(e){const t=new Set;return e.filter((e=>!t.has(e)&&t.add(e)))}const a=new Map,s=new Set;function l(e){s.has(e)||(s.add(e),console.warn(e))}function u(e){const t=[],n=new Map,r=new Set;for(const i of p.values()){const o=i.patching.get(e.name);if(o){t.push(...o.hooks);for(const[t,a]of o.patches.entries())n.has(t)&&n.get(t)!==a&&l(`ModSDK: Mod '${i.name}' is patching function ${e.name} with same pattern that is already applied by different mod, but with different pattern:\nPattern:\n${t}\nPatch1:\n${n.get(t)||""}\nPatch2:\n${a}`),n.set(t,a),r.add(i.name)}}t.sort(((e,t)=>t.priority-e.priority));const i=function(e,t){if(0===t.size)return e;let n=e.toString().replaceAll("\r\n","\n");for(const[r,i]of t.entries())n.includes(r)||l(`ModSDK: Patching ${e.name}: Patch ${r} not applied`),n=n.replaceAll(r,i);return(0,eval)(`(${n})`)}(e.original,n);let o=function(t){var n,o;const a=null===(o=(n=R.errorReporterHooks).hookChainExit)||void 0===o?void 0:o.call(n,e.name,r),s=i.apply(this,t);return null==a||a(),s};for(let n=t.length-1;n>=0;n--){const r=t[n],i=o;o=function(t){var n,o;const a=null===(o=(n=R.errorReporterHooks).hookEnter)||void 0===o?void 0:o.call(n,e.name,r.mod),s=r.hook.apply(this,[t,e=>{if(1!==arguments.length||!Array.isArray(t))throw new Error(`Mod ${r.mod} failed to call next hook: Expected args to be array, got ${typeof e}`);return i.call(this,e)}]);return null==a||a(),s}}return{hooks:t,patches:n,patchesSources:r,enter:o,final:i}}function c(e,t=!1){let n=a.get(e);if(n)t&&(n.precomputed=u(n));else{let t=window;const o=e.split(".");for(let n=0;n<o.length-1;n++)if(t=t[o[n]],!i(t))throw new Error(`ModSDK: Function ${e} to be patched not found; ${o.slice(0,n+1).join(".")} is not object`);const s=t[o[o.length-1]];if("function"!=typeof s)throw new Error(`ModSDK: Function ${e} to be patched not found`);const l=function(e){let t=-1;for(const n of r.encode(e)){let e=255&(t^n);for(let t=0;t<8;t++)e=1&e?-306674912^e>>>1:e>>>1;t=t>>>8^e}return(~t>>>0).toString(16).padStart(8,"0").toUpperCase()}(s.toString().replaceAll("\r\n","\n")),c={name:e,original:s,originalHash:l};n=Object.assign(Object.assign({},c),{precomputed:u(c),router:()=>{},context:t,contextProperty:o[o.length-1]}),n.router=function(e){return function(...t){return e.precomputed.enter.apply(this,[t])}}(n),a.set(e,n),t[n.contextProperty]=n.router}return n}function d(){for(const e of a.values())e.precomputed=u(e)}function h(){const e=new Map;for(const[t,n]of a)e.set(t,{name:t,original:n.original,originalHash:n.originalHash,sdkEntrypoint:n.router,currentEntrypoint:n.context[n.contextProperty],hookedByMods:o(n.precomputed.hooks.map((e=>e.mod))),patchedByMods:Array.from(n.precomputed.patchesSources)});return e}const p=new Map;function f(e){p.get(e.name)!==e&&n(`Failed to unload mod '${e.name}': Not registered`),p.delete(e.name),e.loaded=!1,d()}function g(e,t){e&&"object"==typeof e||n("Failed to register mod: Expected info object, got "+typeof e),"string"==typeof e.name&&e.name||n("Failed to register mod: Expected name to be non-empty string, got "+typeof e.name);let r=`'${e.name}'`;"string"==typeof e.fullName&&e.fullName||n(`Failed to register mod ${r}: Expected fullName to be non-empty string, got ${typeof e.fullName}`),r=`'${e.fullName} (${e.name})'`,"string"!=typeof e.version&&n(`Failed to register mod ${r}: Expected version to be string, got ${typeof e.version}`),e.repository||(e.repository=void 0),void 0!==e.repository&&"string"!=typeof e.repository&&n(`Failed to register mod ${r}: Expected repository to be undefined or string, got ${typeof e.version}`),null==t&&(t={}),t&&"object"==typeof t||n(`Failed to register mod ${r}: Expected options to be undefined or object, got ${typeof t}`);const o=!0===t.allowReplace,a=p.get(e.name);a&&(a.allowReplace&&o||n(`Refusing to load mod ${r}: it is already loaded and doesn't allow being replaced.\nWas the mod loaded multiple times?`),f(a));const s=e=>{let t=h.patching.get(e.name);return t||(t={hooks:[],patches:new Map},h.patching.set(e.name,t)),t},l=(e,t)=>(...i)=>{var o,a;const s=null===(a=(o=R.errorReporterHooks).apiEndpointEnter)||void 0===a?void 0:a.call(o,e,h.name);h.loaded||n(`Mod ${r} attempted to call SDK function after being unloaded`);const l=t(...i);return null==s||s(),l},u={unload:l("unload",(()=>f(h))),hookFunction:l("hookFunction",((e,t,i)=>{"string"==typeof e&&e||n(`Mod ${r} failed to patch a function: Expected function name string, got ${typeof e}`);const o=c(e),a=s(o);"number"!=typeof t&&n(`Mod ${r} failed to hook function '${e}': Expected priority number, got ${typeof t}`),"function"!=typeof i&&n(`Mod ${r} failed to hook function '${e}': Expected hook function, got ${typeof i}`);const l={mod:h.name,priority:t,hook:i};return a.hooks.push(l),d(),()=>{const e=a.hooks.indexOf(l);e>=0&&(a.hooks.splice(e,1),d())}})),patchFunction:l("patchFunction",((e,t)=>{"string"==typeof e&&e||n(`Mod ${r} failed to patch a function: Expected function name string, got ${typeof e}`);const o=c(e),a=s(o);i(t)||n(`Mod ${r} failed to patch function '${e}': Expected patches object, got ${typeof t}`);for(const[i,o]of Object.entries(t))"string"==typeof o?a.patches.set(i,o):null===o?a.patches.delete(i):n(`Mod ${r} failed to patch function '${e}': Invalid format of patch '${i}'`);d()})),removePatches:l("removePatches",(e=>{"string"==typeof e&&e||n(`Mod ${r} failed to patch a function: Expected function name string, got ${typeof e}`);const t=c(e);s(t).patches.clear(),d()})),callOriginal:l("callOriginal",((e,t,i)=>{"string"==typeof e&&e||n(`Mod ${r} failed to call a function: Expected function name string, got ${typeof e}`);const o=c(e);return Array.isArray(t)||n(`Mod ${r} failed to call a function: Expected args array, got ${typeof t}`),o.original.apply(null!=i?i:globalThis,t)})),getOriginalHash:l("getOriginalHash",(e=>("string"==typeof e&&e||n(`Mod ${r} failed to get hash: Expected function name string, got ${typeof e}`),c(e).originalHash)))},h={name:e.name,fullName:e.fullName,version:e.version,repository:e.repository,allowReplace:o,api:u,loaded:!0,patching:new Map};return p.set(e.name,h),Object.freeze(u)}function m(){const e=[];for(const t of p.values())e.push({name:t.name,fullName:t.fullName,version:t.version,repository:t.repository});return e}let R;const v=void 0===window.bcModSdk?window.bcModSdk=function(){const e={version:t,apiVersion:1,registerMod:g,getModsInfo:m,getPatchingInfo:h,errorReporterHooks:Object.seal({apiEndpointEnter:null,hookEnter:null,hookChainExit:null})};return R=e,Object.freeze(e)}():(i(window.bcModSdk)||n("Failed to init Mod SDK: Name already in use"),1!==window.bcModSdk.apiVersion&&n(`Failed to init Mod SDK: Different version already loaded ('1.2.0' vs '${window.bcModSdk.version}')`),window.bcModSdk.version!==t&&alert(`Mod SDK warning: Loading different but compatible versions ('1.2.0' vs '${window.bcModSdk.version}')\nOne of mods you are using is using an old version of SDK. It will work for now but please inform author to update`),window.bcModSdk);Object.defineProperty(e,"__esModule",{value:!0}),e.default=v}()}(Jd);var Yd,Zd,Xd=r(Jd);const Qd=Array.isArray,eh=Object.keys,th=Object.entries,nh=Object.fromEntries;function rh(e,t){return e.includes(t)}const ih=Number.isInteger;Yd=new WeakSet,Zd=function(e,t){const n=new Date(Date.now());console[e]("MBS:",...t),this.push({date:n,level:e,args:t})};const oh=new class extends Array{constructor(){super(...arguments),Yd.add(this)}debug(...e){y(this,Yd,"m",Zd).call(this,"debug",e)}log(...e){y(this,Yd,"m",Zd).call(this,"log",e)}warn(...e){y(this,Yd,"m",Zd).call(this,"warn",e)}error(...e){y(this,Yd,"m",Zd).call(this,"error",e)}toJSON(){return this.map((e=>({date:e.date.toUTCString(),level:e.level,args:e.args.map((e=>e instanceof Map||e instanceof Set?Array.from(e):e))})))}};async function ah(e,t=100){for(;!e();)await new Promise((e=>setTimeout(e,t)));return!0}var sh,lh,uh,ch;const dh=Object.freeze(["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]),hh=/^(v?)([0-9]+)\.([0-9]+)\.([0-9]+)(\.\S+)?$/;function ph(e,t,n=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){if(!(Number.isInteger(e)&&e>=n&&e<=r))throw"number"!=typeof e?new TypeError(`Invalid "${t}" type: ${typeof e}`):Number.isInteger(e)?new RangeError(`"${t}" must fall in the [${n}, ${r}] interval: ${e}`):new Error(`"${t}" must be an integer: ${e}`)}function fh(e,t,n){if(ph(t,"n",0),!Array.isArray(e))throw new TypeError('Invalid "list" type: '+typeof e);const r=t-e.length;return r>0&&e.push(...Array(r).fill(n)),e}function gh(e,t){if(ph(t,"n",0),!Array.isArray(e))throw new TypeError('Invalid "list" type: '+typeof e);const n=e.length-t;return n>0&&e.splice(t,n),e}function mh(e){return ph(e,"n",0,8),rc(0,e).map((e=>pc(dh))).join("")}const Rh=Xd.registerMod({name:"MBS",fullName:"Maid's Bondage Scripts",repository:"https://github.com/bananarama92/MBS",version:t});sh=new WeakMap;const vh=new class{constructor(){sh.set(this,null)}get modName(){return"MBS"}getRuleState(e){return null===y(this,sh,"f")&&"undefined"!=typeof bcx&&S(this,sh,bcx.getModApi("MBS"),"f"),y(this,sh,"f")?.getRuleState(e)??null}};function bh(e,t){let n=`${e}(`;return n+=Object.values(t).map((e=>String(e))).join(", "),n+=")",n}class yh{get index(){return y(this,uh,"f")}set index(e){this.setPosition(e)}get value(){return y(this,lh,"f")[y(this,uh,"f")]}get list(){return y(this,lh,"f")}constructor(e,t=0){if(lh.set(this,void 0),uh.set(this,void 0),!Bh(e))throw new TypeError('Invalid "iterable" type: '+typeof e);const n=Object.freeze([...e]);if(0===n.length)throw new Error('Passed "iterable" must contain at least one element');ph(t,"index",0,n.length-1),S(this,lh,n,"f"),S(this,uh,t,"f")}*[(lh=new WeakMap,uh=new WeakMap,Symbol.iterator)](){for(;;)yield this.next()}next(e=!0){const t=(y(this,uh,"f")+1)%y(this,lh,"f").length;return e&&S(this,uh,t,"f"),y(this,lh,"f")[t]}previous(e=!0){const t=(y(this,uh,"f")+y(this,lh,"f").length-1)%y(this,lh,"f").length;return e&&S(this,uh,t,"f"),y(this,lh,"f")[t]}setPosition(e){ph(e,"index",0,y(this,lh,"f").length-1),S(this,uh,e,"f")}toString(){return bh(typeof this,this.toJSON())}toJSON(){return{list:this.list,index:this.index}}}function Sh(e,t){if(ph(e,"start",0,65535),!Qd(t))throw new TypeError('Invalid "indices" type: '+typeof t);const n=e+Math.max(0,...t)+1;ph(n,"stop",e+1,65535);const r=rc(e,n);return t.map((e=>String.fromCharCode(r[e])))}function Bh(e){return Symbol.iterator in Object(e)}class wh{constructor(e=0,t=0,n=0,r=!1){if(ch.set(this,void 0),ph(e,"major",0,65535),ph(t,"minor",0,65535),ph(n,"micro",0,65535),"boolean"!=typeof r)throw new TypeError('Invalid "beta" type: '+typeof r);this.major=e,this.minor=t,this.micro=n,this.beta=r,S(this,ch,[e,t,n].map((e=>String.fromCharCode(e)))+String.fromCharCode(r?0:1),"f"),Object.freeze(this)}equal(e){return e instanceof wh&&this.valueOf()===e.valueOf()}greater(e){return e instanceof wh&&this.valueOf()>e.valueOf()}lesser(e){return e instanceof wh&&this.valueOf()<e.valueOf()}greaterOrEqual(e){return e instanceof wh&&this.valueOf()>=e.valueOf()}lesserOrEqual(e){return e instanceof wh&&this.valueOf()<=e.valueOf()}static fromVersion(e){const t=hh.exec(e);if(null===t)throw new Error(`Invalid "version": ${e}`);return new wh(Number(t[2]),Number(t[3]),Number(t[4]),void 0!==t[5])}static fromBCVersion(e){const t=GameVersionFormat.exec(e);if(null===t)throw new Error(`Invalid BC version: "${e}"`);return new wh(Number(t[1]),0,0,void 0!==t[2])}toString(){return bh(typeof this,this.toJSON())}valueOf(){return y(this,ch,"f")}toJSON(){return{major:this.major,minor:this.minor,micro:this.micro,beta:this.beta}}}ch=new WeakMap;const Ch=Object.freeze(Object.fromEntries([["CraftingSaveServer",["025B434F"]],["CraftingClick",["5E7225EA"]],["CraftingRun",["4CD7AB08"]],["SpeechTransformProcess",["666DDA2F"]],["SpeechTransformGagGarble",["691A05BF"]],["WheelFortuneLoad",["EA252C35"]],["WheelFortuneClick",["D368BBF2"]],["WheelFortuneRun",["D4DF7BB8"]],["WheelFortuneMouseUp",["887E5D09"]],["WheelFortuneMouseDown",["78354D35"]],["WheelFortuneCustomizeLoad",["97F0A81E"]],["WheelFortuneDrawWheel",["B21DAEA9"]]].map((e=>{const[t,n]=e,r=new Set(n.filter((e=>null!=e)));return[t,Object.freeze(r)]}))));function kh(){const e=function(){const e=wh.fromVersion(t),n=`#v${e.major}${e.minor}${e.micro}`;return e.beta?["blob/devel",""]:["blob/main",n]}();return`https://github.com/bananarama92/MBS/${e[0]}/CHANGELOG.md${e[1]}`}async function Ph(e,n=null){const r=document.getElementById("mbs-changelog");if(r){if(r.getAttribute("data-start")===e&&r.getAttribute("data-stop")===n)return r.remove(),void ChatRoomAppendChat(r);r.remove()}const i=wh.fromVersion(t).beta?"devel":"main",o='<h1 id="mbs-changelog">MBS Changelog</h1>\n<h2 id="v1738">v1.7.38</h2>\n<ul>\n<li>Fix the players <code>FocusGroup</code> grid persisting after performing an activity</li>\n</ul>\n<h2 id="v1737">v1.7.37</h2>\n<ul>\n<li>Backport two more R113 fixes:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5383">BondageProjects/Bondage-College#5383</a>: Misc chat-related styling changes</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5389">BondageProjects/Bondage-College#5389</a>: Fix <code>DialogLeave()</code> clearing the player&#39;s focus group if there&#39;s no current character</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1736">v1.7.36</h2>\n<ul>\n<li>Backport two R113 fixes:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5377">BondageProjects/Bondage-College#5377</a>: Fix an issue wherein the focus group could be <code>null</code></li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5378">BondageProjects/Bondage-College#5378</a>: Fix more unintended dialog refreshes</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1735">v1.7.35</h2>\n<ul>\n<li>Drop R110 support</li>\n<li>Forcefully set the <code>&lt;select&gt;</code>-element text color to black (affects specific browsers such as iOS Safari)</li>\n<li>Add R112Beta1 support</li>\n<li>Backport five R112 changes to R111:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5309">BondageProjects/Bondage-College#5309</a>: Add styling for un-toggleable radio buttons</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5348">BondageProjects/Bondage-College#5348</a>: Ensure that crafted items are first sorted by asset name and then custom craft name</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5349">BondageProjects/Bondage-College#5349</a>: Change the crafting description text-alignment to <code>left</code></li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5357">BondageProjects/Bondage-College#5357</a>: Provide better DOM element support for older browsers</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5360">BondageProjects/Bondage-College#5360</a>: Fix the padlock validation failing to properly validate the <code>Lock</code> effect</li>\n</ul>\n</li>\n<li>Backport one R112-Beta2 change to R112-Beta1:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5364">BondageProjects/Bondage-College#5364</a>: Do not set the button aria-labelledby/describedby attribute if there&#39;s no tooltip</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1734">v1.7.34</h2>\n<ul>\n<li>Fix the MBS changelog showing up more than intended</li>\n<li>Add R111Beta1 support</li>\n</ul>\n<h2 id="v1733">v1.7.33</h2>\n<ul>\n<li>Backport four R111 bug fixes:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5264">BondageProjects/Bondage-College#5264</a>: Ensure that voice-triggered auto-punishments more thoroughly check for OOC blocks</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5272">BondageProjects/Bondage-College#5272</a>: Silence deprecation warning about mobile-web-app-capable</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5274">BondageProjects/Bondage-College#5274</a>: Fix the shop not properly unhiding DOM elements after exiting certain subscreens</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5290">BondageProjects/Bondage-College#5290</a>: Fix blur effects being enabled by default when rendering backgrounds</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1732">v1.7.32</h2>\n<ul>\n<li>Drop R109 support</li>\n<li>Add a setting for enabling or disabling MBS changelog notifications</li>\n<li>Add a BC version selection dropdown in the shop</li>\n</ul>\n<h2 id="v1731">v1.7.31</h2>\n<ul>\n<li>Backport one R111 feature:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5254">BondageProjects/Bondage-College#5254</a>: Add the <code>/changelog</code> chat command</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1730">v1.7.30</h2>\n<ul>\n<li>Drop R108 support</li>\n<li>Add R110Beta1 support</li>\n<li>Backport one R110 bug fix:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5237">BondageProjects/Bondage-College#5237</a>: Fix <code>CraftingDescription.Decode</code> failing to properly handle zero-terminated bits</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1729">v1.7.29</h2>\n<ul>\n<li>Add R109Beta1 support</li>\n</ul>\n<h2 id="v1728">v1.7.28</h2>\n<ul>\n<li>Disable MBS&#39;s extended crafting descriptions in R109 in favor of BC&#39;s native implementation</li>\n</ul>\n<h2 id="v1727">v1.7.27</h2>\n<ul>\n<li>Drop R107 support</li>\n<li>Ensure that exiting the MBS preference screen returns one to the preference extension subscreen</li>\n<li>Backport two R109 changes:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5205">BondageProjects/Bondage-College#5205</a>: Take <code>Asset.CraftGroup</code> into account when sorting crafted items</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5207">BondageProjects/Bondage-College#5207</a>: Fix two crafting screen bugs</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5208">BondageProjects/Bondage-College#5208</a>: Fix the appropriate default color failing to be selected upon creating a new crafted item</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1726">v1.7.26</h2>\n<ul>\n<li>Add R108Beta1 support</li>\n<li>Move the MBS preferences from <code>Preferences &gt; MBS</code> to <code>Preferences &gt; Extensions &gt; MBS</code> starting from R108</li>\n<li>Partially backport two changes to R108Beta1:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5187">BondageProjects/Bondage-College#5187</a>: Minor crafting UI-related tweaks</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5188">BondageProjects/Bondage-College#5188</a>: Fix the subscreen exiting logic in <code>PreferenceExit()</code> and <code>PreferenceSubscreenExtensionsExit()</code></li>\n</ul>\n</li>\n</ul>\n<h2 id="v1725">v1.7.25</h2>\n<ul>\n<li>Set the max supported BC version to R107 until full beta support can be added</li>\n</ul>\n<h2 id="v1724">v1.7.24</h2>\n<ul>\n<li>Fix extended crafting descriptions sometimes dropping the last character</li>\n</ul>\n<h2 id="v1723">v1.7.23</h2>\n<ul>\n<li>Add a missing extended crafted item description check to <code>CraftingModeSet</code></li>\n</ul>\n<h2 id="v1722">v1.7.22</h2>\n<ul>\n<li>Include the new BC EU host URL in the MBS user script</li>\n<li>Add the ability to create crafted item description with up to 398 &quot;simple&quot; characters (<em>i.e.</em> extended ASCII).\nThis functionality can be enabled under <code>Preferences</code> &gt; <code>MBS Settings</code>.\nNote that these descriptions will only be legible for MBS users.</li>\n</ul>\n<h2 id="v1721">v1.7.21</h2>\n<ul>\n<li>Drop R106 support</li>\n<li>Update reported R107 items</li>\n</ul>\n<h2 id="v1720">v1.7.20</h2>\n<ul>\n<li>Add R107Beta1 support</li>\n<li>Drop R105 support</li>\n</ul>\n<h2 id="v1719">v1.7.19</h2>\n<ul>\n<li>Add R106Beta1 support</li>\n<li>Show the MBS changelog in the chat</li>\n<li>Add the <code>/mbschangelog</code> chat command to show the latest MBS changelog (default behavior) or alternatively the changelog of a specific version or version range.</li>\n</ul>\n<h2 id="v1718">v1.7.18</h2>\n<ul>\n<li>Backport two bug fixes:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5108">BondageProjects/Bondage-College#5108</a>: Fix number inputs being clamped to zero if no min/max is specified on the input element</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5109">BondageProjects/Bondage-College#5109</a>: Fix item visibility settings not saving</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1717">v1.7.17</h2>\n<ul>\n<li>Drop R104 support</li>\n</ul>\n<h2 id="v1716">v1.7.16</h2>\n<ul>\n<li>Add R105Beta1 support</li>\n</ul>\n<h2 id="v1715">v1.7.15</h2>\n<ul>\n<li>Allow search inputs to provide suggestions<ul>\n<li>Backports <a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5065">BondageProjects/Bondage-College#5065</a>: Offer search suggestions when typing into search bars</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1714">v1.7.14</h2>\n<ul>\n<li>Switch a few remaining units from viewport- to dynamic viewport</li>\n<li>Chat room separator tweaks (xref <a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5063">BondageProjects/Bondage-College#5063</a>: Various minor chat room separator adjustments):<ul>\n<li>Fix the spurious chat room separator transparency when in sens dep</li>\n<li>Ensure that the chat room separator buttons are unfocused on mobile after a click</li>\n<li>Ensure that sending a message or action scrolls the chat area to the bottom</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1713">v1.7.13</h2>\n<ul>\n<li>New improvements to the chat room separator</li>\n<li>Backport a pose-related bug fix<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5059">BondageProjects/Bondage-College#5059</a>: Fix the freeze effect accidentally limiting upper body changes</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1712">v1.7.12</h2>\n<ul>\n<li>Backport PR 5508 - Make the chat room separator much more fancier<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5058">BondageProjects/Bondage-College#5058</a>: Make the chat room separator much more fancier</li>\n</ul>\n</li>\n</ul>\n<h2 id="v1711">v1.7.11</h2>\n<ul>\n<li>Fix another crash in the fortune wheel command screen</li>\n</ul>\n<h2 id="v1710">v1.7.10</h2>\n<ul>\n<li>Fix a crash in the fortune wheel command screen</li>\n</ul>\n<h2 id="v179">v1.7.9</h2>\n<ul>\n<li>Use a hook for patching <code>Layering._ApplyAssetPriority</code></li>\n</ul>\n<h2 id="v178">v1.7.8</h2>\n<ul>\n<li>Backport two R105 bug fixes<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5052">BondageProjects/Bondage-College#5052</a>: fix <code>PreferenceSubscreenExtensionsClear()</code> when the optional unload function is undefined</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/5055">BondageProjects/Bondage-College#5055</a>: Disable layering for locked items that one cannot unlock</li>\n</ul>\n</li>\n</ul>\n<h2 id="v177">v1.7.7</h2>\n<ul>\n<li>Drop BC R103 support</li>\n<li>Fix the screen shape not being passed on to the fortune wheel command screen</li>\n</ul>\n<h2 id="v176">v1.7.6</h2>\n<ul>\n<li>Fix the R104 alignment of the item version filter</li>\n</ul>\n<h2 id="v174">v1.7.4</h2>\n<ul>\n<li>Switch from viewport- to dynamic viewport units. This should provide a more consistent UI positioning on mobile.</li>\n<li>Add BC R104Beta1 support</li>\n</ul>\n<h2 id="v173">v1.7.3</h2>\n<ul>\n<li>Fix a race condition related to the alternate garbling initialization</li>\n</ul>\n<h2 id="v172">v1.7.2</h2>\n<ul>\n<li>Fix the shop not showing newly released assets</li>\n</ul>\n<h2 id="v171">v1.7.1</h2>\n<ul>\n<li>Improve button alignment in the wheel of fortune item set menu</li>\n<li>Use custom <code>text</code>-based inputs (rather than <code>time</code>-based) for the wheel of fortune timers;\nfixes the odd time-offsets and AM/PM markers occasionally observed.</li>\n</ul>\n<h2 id="v170">v1.7.0</h2>\n<ul>\n<li>Increment the MBS API to version 1.4:<ul>\n<li>Relicense the <code>mbs.css</code> API under terms of LPGL-v3</li>\n</ul>\n</li>\n</ul>\n<h2 id="v163">v1.6.3</h2>\n<ul>\n<li>Drop support for BC R102</li>\n<li>Fix the save-condition being broken for the fortune wheel commands screen</li>\n</ul>\n<h2 id="v162">v1.6.2</h2>\n<ul>\n<li>Update for BC R103Beta2</li>\n<li>Add a safeguard for loading MBS while the <code>WheelFortuneCustomize</code> screen is open</li>\n<li>Remote-fetch the alternative garbling JSON data rather than directly vendoring it (again...)</li>\n<li>Fix various OOC-related issues related to alternative garbling</li>\n<li>Add the option to vary the (alternative) garbling strength per syllable</li>\n<li>Switch from the en_UK phonetic data to the larger en_US dataset</li>\n</ul>\n<h2 id="v161">v1.6.1</h2>\n<ul>\n<li>Fix the garbling JSON data failing to load</li>\n</ul>\n<h2 id="v160">v1.6.0</h2>\n<ul>\n<li>Experimental: Add an alternative form of more phonetically-acurate garbling based on Cordelia Mist&#39;s <a href="https://github.com/CordeliaMist/Dalamud-GagSpeak">Dalamud-GagSpeak</a>.\nNote that the alternative garbling is disabled by default.</li>\n<li>Add support for BC R103Beta1</li>\n</ul>\n<h2 id="v150">v1.5.0</h2>\n<ul>\n<li>Use DOM elements for all remaining MBS screens, wrapping up the DOM-ification</li>\n<li>Remove a few redundant functions and replace the with lodash equivalents</li>\n<li>Reduce the tooltip overlap in the wheel preset screen and improve the tooltip standardization</li>\n<li>Further centralize the CSS styling</li>\n<li>Add safeguards for loading MBS while the preference- or wheel screen is open</li>\n<li>Increment the MBS API to version 1.3:<ul>\n<li>Add the new <code>mbs.css</code> namespace, which contains functions modifying MBS&#39;s style sheets.</li>\n</ul>\n</li>\n</ul>\n<h2 id="v147">v1.4.7</h2>\n<ul>\n<li>Fix the MBS settings menu sometimes requiring two clicks to exit</li>\n<li>Fix the MBS settings menu locking being incorrectly locked when restrained</li>\n</ul>\n<h2 id="v146">v1.4.6</h2>\n<ul>\n<li>Use DOM elements for the MBS preference screens</li>\n<li>Bump the BC mod SDK to 1.2.0</li>\n</ul>\n<h2 id="v145">v1.4.5</h2>\n<ul>\n<li>Remove MBS&#39;s dedicated &quot;show new item screen&quot; buttons when in R103</li>\n<li>Rewrite the MBS fortune wheel preset screen using DOM elements</li>\n</ul>\n<h2 id="v144">v1.4.4</h2>\n<ul>\n<li>Fix the broken exit button image in the MBS wheel of fortune selection menu</li>\n<li>Rewrite the MBS fortune wheel item set screen using DOM elements</li>\n</ul>\n<h2 id="v143">v1.4.3</h2>\n<ul>\n<li>Remove the the fortune wheel option hiding checkbox</li>\n<li>Fix the <a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4900">BondageProjects/Bondage-College#4900</a> backport not hiding owner/lovers/family-locked items when required</li>\n<li>Rewrite the MBS fortune wheel selection screen using DOM elements; add a scroll bar</li>\n<li>Fix spurious MBS warnings about duplicate crafts</li>\n</ul>\n<h2 id="v142">v1.4.2</h2>\n<ul>\n<li>Drop support for BCR101</li>\n<li>Fix the FUSAM button not disappearing when accessing the SHOP via the MBS preferences menu</li>\n<li>Backport one BC R103 change to R102:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4900">BondageProjects/Bondage-College#4900</a>: Optimize the handling of crafted items in <code>DialogInventoryBuild</code></li>\n</ul>\n</li>\n</ul>\n<h2 id="v141">v1.4.1</h2>\n<ul>\n<li>Fix unconditional accessing of a BC R102 variable</li>\n</ul>\n<h2 id="v140">v1.4.0</h2>\n<ul>\n<li>Increment the MBS API to version 1.2:<ul>\n<li>Guarantee that the <code>mbs.getDebug()</code> output strings are JSON-safe</li>\n<li>Provide better documentation regarding when features were added to the API</li>\n</ul>\n</li>\n<li>Add the ability to import &amp; export MBS settings</li>\n<li>Send a beep to the player if errors are encountered while initializing MBS settings</li>\n<li>Add support for BC R102</li>\n<li>Deprecate MBS&#39; custom entry points for the Show New Items menu, all of which will be removed in R103.\nOnce R102 is live (or its beta), you can use the Club Shop button in the main hall or the <code>/shop</code> chat command instead.</li>\n</ul>\n<h2 id="v137">v1.3.7</h2>\n<ul>\n<li>Minor UI adjustments in the wheel of fortune screens</li>\n<li>Add the option to change an items color in the show new items menu</li>\n<li>Drop support for BC R100</li>\n</ul>\n<h2 id="v136">v1.3.6</h2>\n<ul>\n<li>Do not display the wheel storage size for non-player characters</li>\n<li>Fix the reported index for entries in the wheel customization menu</li>\n<li>Fix the show now item buy menu failing to update for items with no buygroup</li>\n<li>Misc minor changes to how the data storage size is reported</li>\n</ul>\n<h2 id="v135">v1.3.5</h2>\n<ul>\n<li>Refactor the logic for checking whether BC is properly loaded or not</li>\n<li>Re-enable the storing of crafted item descriptions in the wheel of fortune, reverting their previous removal in MBS v0.6.22</li>\n<li>Add checks to ensure that MBS does not exceed the 180 KB storage limit for its shared settings, exceeding of which can cause crashes and unstable behavior in BC</li>\n</ul>\n<h2 id="v134">v1.3.4</h2>\n<ul>\n<li>Add R101Beta2 support; no support for Beta1 will be added</li>\n<li>Let the Show New Items menu display whether the player has F-/M-only shop items enabled</li>\n<li>Bump the MBS build target from ES2020 to ES2021</li>\n</ul>\n<h2 id="v133">v1.3.3</h2>\n<ul>\n<li>Backport three BC R101 fixes to R100 (and fixed the KD one from MBS v1.3.2):<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4777">BondageProjects/Bondage-College#4777</a>: Fix eye colour reset on expression clear</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4779">BondageProjects/Bondage-College#4779</a>: Fix <code>Item.Property</code> not always properly initializing in KD</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4780">BondageProjects/Bondage-College#4780</a>: Fix the futuristic harness ball gag auto-inflation triggering validation</li>\n</ul>\n</li>\n</ul>\n<h2 id="v132">v1.3.2</h2>\n<ul>\n<li>Add the ability to buy items from the Show New Items menu</li>\n<li>Add safeguards in the MBS API for checking whether MBS is fully loaded already</li>\n<li>Fix the new item preview refreshing to the wrong outfit</li>\n<li>Ensure that the Show New Items menu respect the players <code>HideShopItems</code> setting</li>\n</ul>\n<h2 id="v131">v1.3.1</h2>\n<ul>\n<li>Add a duration-tooltip for the builtin BC wheel options in the preset config screen</li>\n<li>Add extended item screen support to the Show New Item menu</li>\n<li>Allow chatroom backgrounds to show in the Show New Item menu</li>\n</ul>\n<h2 id="v130">v1.3.0</h2>\n<ul>\n<li>Ensure that the Show New Item preview does not remove new items when switching clothing mode</li>\n<li>Restructure the MBS files and directories</li>\n<li>Add a new screen for storing wheel of fortune option presets\n<img src="static/images/preset.png" alt="New items"></li>\n</ul>\n<h2 id="v122">v1.2.2</h2>\n<ul>\n<li>Fix a the Show New Item menu preview again only partially resetting</li>\n</ul>\n<h2 id="v121">v1.2.1</h2>\n<ul>\n<li>Fix a the Show New Item menu preview only partially resetting</li>\n<li>Fix a crash when paginating in the Show New Item menu</li>\n<li>Add a button the to MBS preference screen for accessing the Show New Item menu</li>\n</ul>\n<h2 id="v120">v1.2.0</h2>\n<ul>\n<li>Add a new button in the main hallway for showing all new items added in the current version (beta or otherwise):\n<img src="static/images/new_beta_items.png" alt="New items"></li>\n</ul>\n<h2 id="v117">v1.1.7</h2>\n<ul>\n<li>Add R100Beta1 support</li>\n<li>Backport two BC R100Beta2 fixes to R100Beta1:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4740">BondageProjects/Bondage-College#4740</a>: Fix <code>PreferenceArousalSettingsValidate</code> calling the wrong cloning function</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4741">BondageProjects/Bondage-College#4741</a>: Ensure that the <code>GameVersion</code> validation modifies the players game version when required</li>\n</ul>\n</li>\n</ul>\n<h2 id="v116">v1.1.6</h2>\n<ul>\n<li>Drop BC R98 support</li>\n</ul>\n<h2 id="v115">v1.1.5</h2>\n<ul>\n<li>Fix a faulty <code>TypeRecord</code> check</li>\n</ul>\n<h2 id="v114">v1.1.4</h2>\n<ul>\n<li>Add R99Beta1 support</li>\n<li>Add a dedicated MBS logger.</li>\n<li>Increment the MBS API to version 1.1:<ul>\n<li>Expose <code>mbs.getDebug()</code> to the API</li>\n</ul>\n</li>\n<li>Backport one BC R99Beta2 fix to R99Beta1:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4662">BondageProjects/Bondage-College#4662</a>: Various <code>TypeRecord</code>-related fixes</li>\n</ul>\n</li>\n</ul>\n<h2 id="v113">v1.1.3</h2>\n<ul>\n<li>Fix (non-shared) MBS settings not saving</li>\n</ul>\n<h2 id="v111">v1.1.1</h2>\n<ul>\n<li>Misc CI updates</li>\n<li>Remove the last <code>OnlineSettings</code> remnants</li>\n<li>Provide more console output upon encountering errors related to MBS extra crafting items</li>\n<li>Register an MBS debugger to FUSAM</li>\n<li>Backport one BC R99 fix:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4610">BondageProjects/Bondage-College#4610</a>: Remove <code>InventoryAllow</code> checks from <code>DialogMenuButtonBuild()</code></li>\n</ul>\n</li>\n</ul>\n<h2 id="v110">v1.1.0</h2>\n<ul>\n<li>Add the ability to specify weights for wheel of fortune options</li>\n<li>Move <code>OnlineSettings</code> to <code>ExtensionSettings</code>. Note that this does not affect data stored in <code>OnlineSharedSettings</code>.</li>\n<li>Append the MBS version with the git tag on non-release commits</li>\n<li>Backport three BC R99 fixes:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4602">BondageProjects/Bondage-College#4602</a>: Allow to specify <code>Top</code>/<code>Left</code> on a pose-by-pose basis</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4604">BondageProjects/Bondage-College#4604</a>: Fix the futuristic gag auto inflation tripping up on the <code>Init</code> validation</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4605">BondageProjects/Bondage-College#4605</a>: Properly implement Advanced vibrator mode support for the vibrating item <code>Init</code> validation</li>\n</ul>\n</li>\n</ul>\n<h2 id="v101">v1.0.1</h2>\n<ul>\n<li>Drop support for BC R98</li>\n<li>Backport one BC R98 hotfix:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4597">BondageProjects/Bondage-College#4597</a>: Fix a validation loop triggered by the love chastity belt</li>\n</ul>\n</li>\n</ul>\n<h2 id="v100">v1.0.0</h2>\n<ul>\n<li>Add full R98Beta1 support</li>\n<li>Added a button for clearing all MBS data</li>\n</ul>\n<h2 id="v0628">v0.6.28</h2>\n<ul>\n<li>Add preliminarily R98 support</li>\n<li>Formalize and expand the MBS API with <code>API_VERSION</code> and the <code>wheelOutfits</code> namespace</li>\n</ul>\n<h2 id="v0627">v0.6.27</h2>\n<ul>\n<li>Remove more R96 leftovers</li>\n<li>Fix a faulty check for the presence of LSCG</li>\n</ul>\n<h2 id="v0626">v0.6.26</h2>\n<ul>\n<li>Fix the parsing of outfit codes with extended items sometimes raising</li>\n<li>Refactor and deduplicate elements shared between <code>Settings</code> and <code>OnlineSharedSettings</code></li>\n<li>Install BC-stubs via NPM rather than vendoring them</li>\n<li>Drop support for BC R97</li>\n<li>Special case LSCG item-specific keywords, allowing them in wheel of fortune crafted item descriptions</li>\n</ul>\n<h2 id="v0625">v0.6.25</h2>\n<ul>\n<li>Minor wheel of fortune performance improvement (requires BC R97Beta1 or later)</li>\n<li>Backport two R97Beta2 bug fixes to R97Beta1:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4508">BondageProjects/Bondage-College#4508</a>: Fix items not being applicable anymore</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4509">BondageProjects/Bondage-College#4509</a>: Fix <code>CantChangeWhileLocked</code> stopping player-made changes to the crafting preview character when tied up</li>\n</ul>\n</li>\n</ul>\n<h2 id="v0624">v0.6.24</h2>\n<ul>\n<li>Add support for BC R97Beta1</li>\n<li>Add the option to disallow wheel spins while restrained</li>\n<li>Made the wheel of fortune character preview more responsive (requires BC R97Beta1 or later)</li>\n</ul>\n<h2 id="v0623">v0.6.23</h2>\n<ul>\n<li>Use heavier MBS settings compression</li>\n</ul>\n<h2 id="v0622">v0.6.22</h2>\n<ul>\n<li>Optimize the amount of stored server-side data</li>\n<li>Crafted items applied by the wheel of fortune no longer have a description in order to save on data</li>\n</ul>\n<h2 id="v0621">v0.6.21</h2>\n<ul>\n<li>Add the option to forgo any locks when equipping fortune wheel item sets</li>\n</ul>\n<h2 id="v0620">v0.6.20</h2>\n<ul>\n<li>Drop support for BC R95</li>\n<li>Update the MBS URL&#39;s in the bookmark &amp; *.user.js files with a cache bust.</li>\n<li>Backport two R97 bug fixes:<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4478">BondageProjects/Bondage-College#4478</a>: Fix a bunch issues related to the forbidden chastity belt and bra</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4475">BondageProjects/Bondage-College#4475</a>: Fix the crafting validation sometimes looking up the wrong asset</li>\n</ul>\n</li>\n</ul>\n<h2 id="v0619">v0.6.19</h2>\n<ul>\n<li>Add support for BC R96Beta1</li>\n</ul>\n<h2 id="v0618">v0.6.18</h2>\n<ul>\n<li>Update type annotations for BC R95Beta1</li>\n<li>Increase the maximum number of wheel of fortune item sets and commands to 32</li>\n</ul>\n<h2 id="v0617">v0.6.17</h2>\n<ul>\n<li>Perform stricter validation of wheel of fortune embedded items</li>\n<li>Fix the wheel of fortune preview character failing to equip items if the player is enclosed</li>\n</ul>\n<h2 id="v0616">v0.6.16</h2>\n<ul>\n<li>Fix <code>PreferenceExit</code> not being called when opening the MBS preference screen</li>\n</ul>\n<h2 id="v0615">v0.6.15</h2>\n<ul>\n<li>Drop support for BC R95</li>\n<li>Fix a double call to <code>PreferenceLoad</code> when exiting the MBS settings screen</li>\n</ul>\n<h2 id="v0614">v0.6.14</h2>\n<ul>\n<li>Update for R94Beta3</li>\n</ul>\n<h2 id="v0613">v0.6.13</h2>\n<ul>\n<li>More crafting duplication fixes</li>\n</ul>\n<h2 id="v0612">v0.6.12</h2>\n<ul>\n<li>Add even more safeguards against crafting duplication</li>\n</ul>\n<h2 id="v0610">v0.6.10</h2>\n<ul>\n<li>Fix a bug that would cause crafting item duplication when upgrading from BC R93 to R94</li>\n</ul>\n<h2 id="v069">v0.6.9</h2>\n<ul>\n<li>Adapt to BC R94Beta1 failing to actually increment its version</li>\n</ul>\n<h2 id="v068">v0.6.8</h2>\n<ul>\n<li>Add full support for BC R94Beta1</li>\n<li>Increase the number of crafting slots from 100 to 160</li>\n</ul>\n<h2 id="v067">v0.6.7</h2>\n<ul>\n<li>Ensure that ModSDK hooks always call <code>next()</code></li>\n<li>Add basic support for BC R94Beta1</li>\n<li>Increase the max number of lines for crafted item descriptions to 7</li>\n</ul>\n<h2 id="v066">v0.6.6</h2>\n<ul>\n<li>Fix an incompatibility between MBS settings screen and BCTweaks</li>\n</ul>\n<h2 id="v065">v0.6.5</h2>\n<ul>\n<li>Update type annotations for BC R93</li>\n<li>Drop support for BC R92</li>\n<li>Added a basic MBS settings menu to the BC preferences</li>\n<li>Increase the maximum description length of crafted items from 100 to 200</li>\n</ul>\n<h2 id="v064">v0.6.4</h2>\n<ul>\n<li>Update type annotations for BC R93Beta1</li>\n<li>Misc GitHub Actions workflow maintenance</li>\n<li>Backport two BC R93Beta2 bug fixes to R93Beta1<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4289">BondageProjects/Bondage-College#4289</a>: Remove the <code>TapedHands</code> entry from the <code>HideForPose</code> array of handheld items</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4290">BondageProjects/Bondage-College#4290</a>: Fix a hard-coded <code>IsOwnedByPlayer</code> check</li>\n</ul>\n</li>\n</ul>\n<h2 id="v063">v0.6.3</h2>\n<ul>\n<li>Add support for storing record-based <code>Item.OverridePriority</code> values</li>\n<li>Fix the bookmark loader URL</li>\n</ul>\n<h2 id="v062">v0.6.2</h2>\n<ul>\n<li>Misc CI fixes</li>\n</ul>\n<h2 id="v061">v0.6.1</h2>\n<ul>\n<li>Drop support for BC R91</li>\n<li>Do not send a version-update beep when installing MBS for the first time</li>\n<li>Overhauled the build artifact storage system</li>\n<li>Demand that at least one wheel of fortune lock flag is enabled</li>\n<li>Add support for saving futuristic training belt properties</li>\n</ul>\n<h2 id="v060">v0.6.0</h2>\n<ul>\n<li>Allow the specification of custom timer lock durations for the wheel of fortune</li>\n<li>Reduced the number of exposed functions</li>\n<li>Backport two more BC R92Beta2 bug fixes to R92Beta1<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4204">BondageProjects/Bondage-College#4204</a>: Fix a crash with the color picker when on mobile</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4207">BondageProjects/Bondage-College#4207</a>: Fix subscreens not opening when the respective super-screen option was previously already selected</li>\n</ul>\n</li>\n</ul>\n<h2 id="v0514">v0.5.14</h2>\n<ul>\n<li>Backport two BC R92Beta2 bug fixes to R92Beta1<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4202">BondageProjects/Bondage-College#4202</a>: Fix the high-sec and intricate locks not being unlockable</li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4203">BondageProjects/Bondage-College#4203</a>: Make the two chastity shields block clit activities</li>\n</ul>\n</li>\n</ul>\n<h2 id="v0513">v0.5.13</h2>\n<ul>\n<li>Full R92Beta1 support</li>\n<li>Various misc Github Actions related updates</li>\n</ul>\n<h2 id="v0512">v0.5.12</h2>\n<ul>\n<li>Preliminary R92Beta1 compatibility changes</li>\n</ul>\n<h2 id="v0511">v0.5.11</h2>\n<ul>\n<li>Add formal R91 support and drop R90 support</li>\n<li>Fix certain wheel checks being skipped if an item is added without replacement</li>\n</ul>\n<h2 id="v0510">v0.5.10</h2>\n<ul>\n<li>Update type annotations for R91Beta1</li>\n<li>Add a few minor R91Beta1 fixes</li>\n</ul>\n<h2 id="v059">v0.5.9</h2>\n<ul>\n<li>Fix a bug that could cause MBS to crash if zero flags were selected for a particular fortune wheel item set.</li>\n</ul>\n<h2 id="v058">v0.5.8</h2>\n<ul>\n<li>Backport even more BC R91 bug fixes<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4049">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4049</a></li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4057">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4057</a></li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4062">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4062</a></li>\n</ul>\n</li>\n</ul>\n<h2 id="v057">v0.5.7</h2>\n<ul>\n<li>Backport a number of BC R91 bug fixes<ul>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4044">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4044</a></li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4046">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4046</a></li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4047">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4047</a></li>\n<li><a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4048">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4048</a></li>\n</ul>\n</li>\n</ul>\n<h2 id="v056">v0.5.6</h2>\n<ul>\n<li>Drop support for R89</li>\n<li>Attach build artifacts whenever creating a new release</li>\n<li>Bump dev dependencies</li>\n<li>Add more conveniently typed variations of a few stdlib functions</li>\n<li>Misc improvements to the player settings parsing</li>\n</ul>\n<h2 id="v055">v0.5.5</h2>\n<ul>\n<li>Revert the <a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4030">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4030</a> port-forward patch.</li>\n</ul>\n<h2 id="v054">v0.5.4</h2>\n<ul>\n<li>Port forward a few more BC R90Beta3 bug fixes to R90Beta2 (xref <a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4030">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4030</a>, <a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4031">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4031</a> and <a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4033">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4033</a>)</li>\n</ul>\n<h2 id="v053">v0.5.3</h2>\n<ul>\n<li>Port forward a BC R90Beta2 crash fix to R90Beta1 (xref <a href="https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4023">https://gitgud.io/BondageProjects/Bondage-College/-/merge_requests/4023</a>)</li>\n<li>Remove an unused function</li>\n</ul>\n<h2 id="v052">v0.5.2</h2>\n<ul>\n<li>Fix the name of the <code>MiniGame</code> module</li>\n<li>Ensure that colors are always copied when creating items</li>\n<li>Update type annotations for BC R90Beta1</li>\n<li>Allow custom item sets to be specified via (serialized) single items in addition to item lists (for real this time...)</li>\n</ul>\n<h2 id="v051">v0.5.1</h2>\n<ul>\n<li>Fix the &quot;Missing outfit&quot; error message not showing</li>\n<li>Allow custom item sets to be specified via (serialized) single items in addition to item lists</li>\n</ul>\n<h2 id="v050">v0.5.0</h2>\n<ul>\n<li>Add a MBS test suite</li>\n<li>Drop BC R88 support</li>\n<li>Expand the BC .d.ts stub files with those autogenerated from BC</li>\n<li>Add custom classes for managing (sub-)screens</li>\n<li>Add the option to create custom wheel of fortune (RP) commands:\n<img src="static/images/spin_command.png" alt="Command example"></li>\n</ul>\n<h2 id="v045">v0.4.5</h2>\n<ul>\n<li>Fix the <code>padArray</code> and <code>trimArray</code> logic; make them more lenient</li>\n</ul>\n<h2 id="v044">v0.4.4</h2>\n<ul>\n<li>Properly respect items with the <code>Enclose</code> effect such as the futuristic create</li>\n<li>Do not attempt to wear clothes if one is wearing a clubsslave collar</li>\n<li>Allow <code>FortuneWheelOption.Script</code> to be used on arbitrary player- and simple characters</li>\n</ul>\n<h2 id="v043">v0.4.3</h2>\n<ul>\n<li>Fix <code>Item.Craft</code> not being properly copied</li>\n<li>Further enforce the immutability of <code>FortuneWheelItem</code></li>\n</ul>\n<h2 id="v042">v0.4.2</h2>\n<ul>\n<li>Fixed a crash that could occur when BCX is not installed</li>\n<li>Fixed builtin MBS options not properly saving</li>\n</ul>\n<h2 id="v041">v0.4.1</h2>\n<ul>\n<li>Consolidate and expand the BC validation</li>\n<li>Allow custom wheel of fortune item sets to store the <code>OverrideHeight</code> property</li>\n<li>Check for the BCX <code>alt_allow_changing_appearance</code> rule when determining whether cosplay items can be changed</li>\n<li>Add <code>lodash</code> as a dependency; remove <code>mapsort</code></li>\n<li>Fix custom override priorities of the builtin MBS item sets</li>\n<li>Check whether an item is not blocked at the room level before equipping</li>\n</ul>\n<h2 id="v040">v0.4.0</h2>\n<ul>\n<li>Place the <code>ITEM_SET_TYPE_DICT</code> and <code>MBSDummy</code> initialization behind a <code>waitFor</code> guard</li>\n<li>Split <code>common</code> into two modules</li>\n<li>Fix the previously broken <code>Version.beta</code> comparison</li>\n<li>Overhaul the ID assignment of custom item sets; make it more robust</li>\n<li>Add <code>mapsort</code> as a dependency</li>\n<li>Ensure that the previous item set is properly unregistered before saving a new one</li>\n<li>Fix a potential issue with the BC version comparison</li>\n<li>Resize the preview character for a better fit</li>\n<li>Up the number of custom item slots from 14 to 16</li>\n</ul>\n<h2 id="v033">v0.3.3</h2>\n<ul>\n<li>Ensure that MBS does not throw literals as exceptions</li>\n<li>Fix the vibrator mode not being properly read for custom outfits</li>\n<li>Various fixes and improvements related to the futuristic vibrator</li>\n<li>Update <code>MBSSelect.currentFortuneWheelSets</code> when saving/removing wheel of fortune outfits</li>\n</ul>\n<h2 id="v032">v0.3.2</h2>\n<ul>\n<li>Minor bugfixes related to interactions with people that lack MBS</li>\n<li>Make the inspection of other people&#39;s custom item sets a bit more robust</li>\n</ul>\n<h2 id="v031">v0.3.1</h2>\n<ul>\n<li>Minor improvements to the README documentation</li>\n<li>Minor <code>pushMBSSettings</code> optimizations</li>\n<li>Raise whenever an unsupported BC version is detected</li>\n<li>Always check for <code>null</code> when performing <code>typeof ... &quot;object&quot;</code> checks</li>\n</ul>\n<h2 id="v030">v0.3.0</h2>\n<ul>\n<li>Expand the list of padlocks that MBS can (potentially) remove, including support for BCX&#39;s <code>block_keyuse_self</code> rule</li>\n<li>Switch from LGPL3 to GPL3</li>\n<li>Up the priority of the <code>WheelFortuneLoad</code> and <code>WheelFortuneExit</code> hooks</li>\n<li>Try to unequip blocking restraints, even if their group does not intersect with the to-be equipped item set</li>\n<li>Fix the wheel of fortune item set preview using the incorrect item set list when viewing other players</li>\n<li>Fix the petrifcation wheel of fortune option occasionally failing to properly color the skin</li>\n</ul>\n<h2 id="v023">v0.2.3</h2>\n<ul>\n<li>Ensure that crafting ID lists are joined via empty strings rather than commas</li>\n</ul>\n<h2 id="v022">v0.2.2</h2>\n<ul>\n<li>Allow the viewing other people&#39;s wheel of fortune item set config</li>\n<li>Create a dedicated MBS changelog file</li>\n<li>Report the changelog whenever the MBS version is incremented</li>\n</ul>\n<h2 id="v021">v0.2.1</h2>\n<ul>\n<li>Fix the first-time initialization of the MBS wheel of fortune settings</li>\n</ul>\n<h2 id="v020">v0.2.0</h2>\n<ul>\n<li>Add the option to create custom wheel of fortune outfits\n<img src="static/images/config.png" alt="Item set example"></li>\n</ul>\n<h2 id="v0118">v0.1.18</h2>\n<ul>\n<li>Always disallow the wheel of fortune to remove owner-/lovers locked items,\neven when decoy restraints are used</li>\n</ul>\n<h2 id="v0117">v0.1.17</h2>\n<ul>\n<li>Add a new petrification-based wheel of fortune option</li>\n<li>Make the first-time initialization of MBS settings more robust</li>\n</ul>\n<h2 id="v0116">v0.1.16</h2>\n<ul>\n<li>Add bookmark-based installation instructions</li>\n<li>Ensure that the user.js scripts are also pushed to github pages</li>\n<li>Add MBS settings and cache the extra crafting items in the MBS settings</li>\n<li>Minor adjustments to the bondage maid outfit color and boots</li>\n</ul>\n<h2 id="v0115">v0.1.15</h2>\n<ul>\n<li>Do not set the member number for locks as this will cause the player to see its password</li>\n<li>Do not let the crafting check raise if the user does not own an item</li>\n<li>Only load MBS after BC is properly loaded</li>\n</ul>\n<h2 id="v0114">v0.1.14</h2>\n<ul>\n<li>Make specifying the strip level mandatory and expand on the available levels</li>\n<li>Add a new mummy outfit for the wheel of fortune</li>\n<li>Add a new bondage maid outfit for the wheel of fortune</li>\n</ul>\n<h2 id="v0113">v0.1.13</h2>\n<ul>\n<li>Fix the downloadURL of the user.js files</li>\n<li>Lower the priority of the futuristic harness</li>\n<li>Allow the removal of locked decoy restraints</li>\n</ul>\n<h2 id="v0112">v0.1.12</h2>\n<ul>\n<li>Use the player&#39;s member number rather than ID</li>\n<li>Check for the Lock effect rather than the presence of a lock</li>\n</ul>\n<h2 id="v0111">v0.1.11</h2>\n<ul>\n<li>Log it whenever a wheel of fortune item fails to equip</li>\n<li>Make the dev and normal <code>user.js</code> scripts more distinct</li>\n<li>Ensure that <code>playerNakedNoCosplay</code> modifies the appearance inplace</li>\n</ul>\n<h2 id="v0110">v0.1.10</h2>\n<ul>\n<li>Ensure that a assigned Typed item properties are copied</li>\n</ul>\n<h2 id="v019">v0.1.9</h2>\n<ul>\n<li>Never strip the character of their cosplay items, regardless of permission settings</li>\n<li>Use the <code>Puzzling</code> crafting property with the High security PSO bondage wheel of fortune option</li>\n</ul>\n<h2 id="v018">v0.1.8</h2>\n<ul>\n<li>Add additional wheel of fortune options based on the PSO (permanently sealed object) suit.</li>\n<li>Bump the number of available crafting slots from 40 to 100.</li>\n</ul>\n'.replaceAll('<img src="static/images/',`<img src="https://bananarama92.github.io/MBS/${i}/images/`);await ah((()=>!!document.getElementById("TextAreaChatLog")),1e3),CommandsChangelog.Publish(o,{id:"mbs-changelog",href:`https://github.com/bananarama92/MBS/blob/${i}/CHANGELOG.md`,startID:e,stopID:n})}const xh=/^(v?)([0-9]+)(\.([0-9]+))?(\.([0-9]+))?(\.\S+)?$/i;function Mh(e,n,r){const i=r[0]?xh.exec(r[0]):null,o=r[1]?xh.exec(r[1]):null;let a=null,s=null;if(i&&o){const e=new wh(Number.parseInt(i[2],10),Number.parseInt(i[4]||"0",10),Number.parseInt(i[6]||"0",10)),t=new wh(Number.parseInt(o[2],10),Number.parseInt(o[4]||"0",10),Number.parseInt(o[6]||"0",10));e.greater(t)?(a=`v${e.major}${e.minor}${e.micro}`,s=`v${t.major}${t.minor}${t.micro}`):(a=`v${t.major}${t.minor}${t.micro}`,s=`v${e.major}${e.minor}${e.micro}`)}else if(i)a=`v${i[2]}${i[4]||0}${i[6]||0}`;else if(o)a=`v${o[2]}${o[4]||0}${o[6]||0}`;else{const e=wh.fromVersion(t);a=`v${e.major}${e.minor}${e.beta?e.micro-1:e.micro}`}Ph(a,s)}function Ih(e,t,n){if(qf(t),null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);ExtendedItemSetOptionByRecord(t,e,n,{refresh:!1,push:!1})}function Fh(e,t,n){const r={Asset:e};return ExtendedItemInit(t,r,!1,!1),n&&Ih(r,t,n),r.Property??{}}ah(Kf).then((()=>{CommandCombine({Tag:"mbschangelog",Description:"[version-start] [version-end]: Show the changelog(s) of the specified MBS version or version range; defaults to the latest version",Action:Mh})}));const Eh=Object.freeze({NONE:0,CLOTHES:1,UNDERWEAR:2,COSPLAY:3,ALL:4});let _h;function Oh(e,t){switch(e){case Eh.NONE:return()=>!1;case Eh.CLOTHES:return e=>e.Group.AllowNone&&!e.BodyCosplay&&!e.Group.Underwear;case Eh.UNDERWEAR:return e=>e.Group.AllowNone&&!e.BodyCosplay;case Eh.COSPLAY:return e=>!Vf(t)?e.Group.AllowNone&&!e.BodyCosplay:e.Group.AllowNone;case Eh.ALL:return e=>!!Vf(t)||e.Group.AllowNone&&!e.BodyCosplay;default:throw new Error(`Invalid "stripLevel" value: ${e}`)}}function Ah(e,t){if(void 0===t)return[-1,!1];if(void 0!==t.priority&&void 0!==t.blocksSubSet)return[t.priority,t.blocksSubSet];if(0===t.block.size)return t.priority=0,t.blocksSubSet=!1,[t.priority,t.blocksSubSet];{const n=[];for(const r of t.block)n.push(Ah(e,e.get(r)));return t.priority=1+Math.max(0,...n.map((e=>e[0]))),t.blocksSubSet=t.superSet&&n.some((e=>e[1])),[t.priority,t.blocksSubSet]}}function $h(e,t,n=[]){if(!Qd(e))throw new TypeError('Invalid "itemList" type: '+typeof e);const r=new Map;[e,n].forEach(((e,n)=>{for(const{Group:i,Name:o,TypeRecord:a}of e){if(r.has(i))continue;const e=AssetGet(t.AssetFamily,i,o);if(null==e)throw new Error(`Unknown asset: ${i}${o}`);if("Item"!==e.Group.Category)continue;const s=Fh(e,t,a),l={superSet:1===n,block:new Set(...e.Block??[],...s.Block??[])};(e.Effect?.includes("Enclose")||s.Effect?.includes("Enclose"))&&(l.priority=AssetGroup.length,l.blocksSubSet=l.superSet),r.set(i,l)}}));for(const[e,t]of r)Ah(r,t);return r}ah(Kf).then((()=>_h=CharacterLoadSimple("MBSDummy")));const Hh=new Map;function Lh(e,t){const n=InventoryGetLock(e);if(!InventoryItemHasEffect(e,"Lock"))return!0;if("Decoy"===e.Craft?.Property){if(null==n)return!1;return!["OwnerOnly","LoverOnly","FamilyOnly"].some((t=>n.Asset[t]||e.Asset[t]))}const r=vh.getRuleState("block_keyuse_self"),i=t.IsPlayer()&&r?.inEffect&&r?.isEnforced;switch(n?.Asset?.Name){case"SafewordPadlock":return!0;case"MetalPadlock":case"MistressPadlock":case"MistressTimerPadlock":case"PandoraPadlock":{if(i||LogQuery("KeyDeposit","Cell"))return!1;let e=Hh.get(`${t.ID}:${n.Asset.Name}`);return void 0===e&&(e=t.Inventory.some((e=>e.Asset.Name===`${n.Asset.Name}Key`)),Hh.set(`${t.ID}:${n.Asset.Name}`,e)),e}case"TimerPasswordPadlock":case"PasswordPadlock":case"CombinationPadlock":return Number(e.Property?.LockMemberNumber)===t.MemberNumber;case"HighSecurityPadlock":{const n=(e?.Property?.MemberNumberListKeys??"").split(",").map(Number);return!i&&rh(n,t.MemberNumber)}default:return!1}}function jh(e,t,n,r=null,i=null,o=Player){if(!Qd(t))throw new TypeError('Invalid "itemList" type: '+typeof t);if(function(e){const t=e.Appearance.find((e=>InventoryItemHasEffect(e,"Enclose")));return null!=t&&!Lh(t,e)}(o))return void oh.log(`Failed to equip all "${e}" wheel of fortune items: cannot unlock enclosing item`);!function(e,t){qf(t);const n=Oh(e,t),r=t.Appearance;for(let e=r.length-1;e>=0;e--){const t=r[e].Asset;t.Group.AllowNone&&"Appearance"===t.Group.Category&&n(t)&&r.splice(e,1)}}(n,o),"function"==typeof i&&(t=i(t,o));const a=function(e,t,n){const r=$h(e,n,t);return t.filter((e=>r.get(e.Group)?.blocksSubSet))}(t,o.Appearance.map((e=>({Group:e.Asset.Group.Name,Name:e.Asset.Name,TypeRecord:e.Property?.TypeRecord,NoEquip:!0}))),o);Hh.clear();const s={},l=new Set,u=o.IsPlayer()&&LogQuery("ClubSlave","Management");for(const{Name:e,Group:n,Equip:r,NoEquip:i}of[...a,...t]){const t=AssetGet(o.AssetFamily,n,e),a=InventoryGet(o,n),c="function"!=typeof r||r(o);if(null!=t)if(c){const e={InventoryGroupIsBlockedForCharacter:InventoryGroupIsBlockedForCharacter(o,n,!1),InventoryGroupIsBlockedByOwnerRule:InventoryGroupIsBlockedByOwnerRule(o,n),"Locked item equipped":null!=a&&!Lh(a,o)};i||(e.InventoryBlockedOrLimited=InventoryBlockedOrLimited(o,{Asset:t}),e.InventoryChatRoomAllow=!InventoryChatRoomAllow(t.Category??[]),e["Blocked via Club Slave Collar"]=u&&"Appearance"===t.Group.Category);const r=th(e).filter((e=>e[1]));0!==r.length?s[t.Description]=r.map((e=>e[0])):null!=a&&InventoryRemove(o,n,!1)}else l.add(n);else s[e]=["Unknown asset"]}for(const{Name:e,Group:n,Craft:i,ItemCallback:a,Color:u,TypeRecord:c,Property:d}of t){const t=AssetGet(o.AssetFamily,n,e),h=s[t?.Description??e];if(null==t||void 0!==h||l.has(n))continue;if(!InventoryAllow(o,t,t.Prerequisite,!1)){s[t.Description]=["InventoryAllow"];continue}const p=[...u??t.DefaultColor],f=CharacterAppearanceSetItem(o,n,t,p,SkillGetWithRatio(o,"Bondage"),o.MemberNumber,!1);null!=f&&(c&&Ih(f,o,c),void 0!==i&&(f.Craft=Go(i),InventoryCraft(o,o,n,f.Craft,!1,!1)),f.Property=Object.assign(f.Property??{},Go(d)),"function"==typeof a&&a(f,o),"function"==typeof r&&r(f,o))}if(CharacterRefresh(o,!1,!1),o.IsPlayer()){ChatRoomCharacterUpdate(o);const t=Object.values(s).length;0!==t&&oh.log(`Failed to equip ${t} "${e}" wheel of fortune items`,s)}}function Th(e,t,n){if("string"!=typeof t||!DynamicDrawTextRegex.test(t))return!1;const r=`${n.Group.Name}${n.Name}`,[i,o]=th(TextItemDataLookup).find((([e])=>e.includes(r)))??["",null];return null!==o&&t.length<=(o.maxLength[e]??-1)}const Dh=Object.freeze({OverridePriority:(e,t)=>{if(ih(e))return!0;if(CommonIsObject(e)){const n=t.Layer.map((e=>e.Name));return th(e).every((([e,t])=>n.includes(e)&&ih(t)))}return!1},Opacity:(e,t)=>"number"==typeof e&&e<=t.MaxOpacity&&e>=t.MinOpacity,Text:(e,t)=>Th("Text",e,t),Text2:(e,t)=>Th("Text2",e,t),Text3:(e,t)=>Th("Text3",e,t),ShowText:(e,t)=>"boolean"==typeof e,TriggerValues:(e,t)=>"string"==typeof e&&e.split(",").length===ItemVulvaFuturisticVibratorTriggers.length,AccessMode:(e,t)=>"string"==typeof e&&ItemVulvaFuturisticVibratorAccessModes.includes(e),PunishOrgasm:(e,t)=>"boolean"==typeof e,PunishStandup:(e,t)=>"boolean"==typeof e,Texts:(e,t)=>!!Array.isArray(e)&&(!(e.length<ItemDevicesLuckyWheelMinTexts||e.length>ItemDevicesLuckyWheelMaxTexts)&&e.every((e=>"string"==typeof e&&e.length<=ItemDevicesLuckyWheelMaxTextLength))),TargetAngle:(e,t)=>"number"==typeof e&&e>=0&&e<=360,OverrideHeight:function(e,t){const n=VariableHeightDataLookup[`${t.Group.Name}${t.Name}`];if(void 0===n)return!1;const r=e;return null!==r&&"object"==typeof r&&Number.isInteger(r.Priority)&&"number"==typeof r.Height&&r.Height<=n.maxHeight&&r.Height>=n.minHeight&&(null==r.HeightRatioProportion||"number"==typeof r.HeightRatioProportion&&r.HeightRatioProportion>=0&&r.HeightRatioProportion<=1)},PunishStruggle:(e,t)=>"boolean"==typeof e,PunishStruggleOther:(e,t)=>"boolean"==typeof e,PunishRequiredSpeechWord:(e,t)=>"string"==typeof e&&e.length<=70,PunishProhibitedSpeechWords:(e,t)=>"string"==typeof e&&e.length<=70,PunishSpeech:(e,t)=>ih(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PunishRequiredSpeech:(e,t)=>ih(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PunishProhibitedSpeech:(e,t)=>ih(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PublicModeCurrent:(e,t)=>ih(e)&&e>=0&&e<FuturisticTrainingBeltModes.length,PublicModePermission:(e,t)=>ih(e)&&e>=0&&e<FuturisticTrainingBeltPermissions.length,ShockLevel:(e,t)=>ih(e)&&e>=0&&e<=2,PortalLinkCode:(e,t)=>"string"==typeof e&&PortalLinkCodeRegex.test(e)});function Nh(e,t){if(null===t||"object"!=typeof t)return{};const n=new Set(["OverridePriority"]);if(e.Archetype){const r=ExtendedItemGatherOptions({Asset:e,Property:t});for(const e of r){"VariableHeightOption"===e.OptionType&&n.add("OverrideHeight");for(const t of eh(e.ParentData.baselineProperty??{}))CraftingPropertyExclude.has(t)||n.add(t)}}const r={};for(const[i,o]of th(t)){const t=Dh[i];null!=o&&n.has(i)&&void 0!==t&&(t(o,e)&&(r[i]=o))}return r}const Gh=Object.freeze(new Map([["Unknown asset",e=>null==e],["Unsupported owner-only asset",e=>e?.OwnerOnly],["Unsupported lovers-only asset",e=>e?.LoverOnly],["Unsupported D/S family-only asset",e=>e?.FamilyOnly],["Unsupported disabled asset",e=>!e?.Enable],["Unsupported script-asset",e=>"Script"===e?.Group?.Category]]));function Wh(e,t,n=!0){for(const[n,r]of Gh)if(r(e))throw new Error(`${n}: ${t.Group}${t.Name}`);let r,i;"string"==typeof t.Color?r=[t.Color]:Array.isArray(t.Color)&&t.Color.every((e=>"string"==typeof e))&&(r=[...t.Color]),null!==t.Craft&&"object"==typeof t.Craft&&(i=Object.assign(Go(t.Craft),{TypeRecord:void 0,OverridePriority:null,Lock:""}),CraftingValidate(i,e,!1));const o=t.Property??{};let a;return CommonIsObject(o.TypeRecord)?a=Object.freeze({...o.TypeRecord}):"string"==typeof o.Type||null===o.Type?a=ExtendedItemTypeToRecord(e,o.Type):"string"==typeof o.Mode&&(a=ExtendedItemTypeToRecord(e,o.Mode)),Object.freeze({Name:t.Name,Group:t.Group,Custom:n,Property:Object.freeze(Nh(e,t.Property)),TypeRecord:a,Color:r,Craft:Object.freeze(i),ItemCallback:void 0,Equip:void 0})}function zh(e,t){if(!Qd(e))throw new TypeError('Invalid "items" type: '+typeof e);return e.map((e=>function(e,t){const{Group:n,Name:r,Color:i,Craft:o,TypeRecord:a,Property:s}=e,l=AssetGet(t.AssetFamily,n,r);if(null==l)throw new Error(`Unknown asset: ${n}${r}`);return{Group:n,Name:r,Color:To(i),Craft:To(o),Property:Object.assign(Fh(l,t,a),Go(s))}}(e,t)))}var qh;class Vh{get screen(){return this.constructor.screen}get ids(){return this.constructor.ids}get rootParams(){return this.screenParams[this.constructor.ids.root]}constructor(e,t,n){this.parent=e,this.screenParams=zl(Go(t),n??{}),this.child=null}resize(e){const t=MainCanvas.canvas.clientHeight/1e3,n=MainCanvas.canvas.clientWidth/2e3;for(const[r,{shape:i,visibility:o}]of th(this.screenParams)){const a={left:`${MainCanvas.canvas.offsetLeft+i[0]*n}px`,top:`${MainCanvas.canvas.offsetTop+i[1]*t}px`,width:`${i[2]*n}px`,height:`${i[3]*t}px`};e&&(a.fontFamily=CommonGetFontName(),a.visibility=o);const s=document.getElementById(r);Object.assign(s.style,a)}}unload(){for(const e of eh(this.screenParams)){const t=document.getElementById(e);null!==t&&(t.style.visibility="hidden")}}exit(){for(const e of eh(this.screenParams))ElementRemove(e)}load(){const e=CurrentScreen;CurrentScreenFunctions?.Unload?.(),ControllerIsActive()&&ControllerClearAreas(),CurrentScreen=this.screen,CurrentScreenFunctions=this.getFunctions(),CurrentDarkFactor=1,CommonGetFont.clearCache(),CommonGetFontName.clearCache(),CurrentScreenFunctions?.Resize?.(!0),"ChatSearch"!=e&&"ChatCreate"!=e||ChatRoomStimulationMessage("Walk")}loadChild(e,...t){return this.child&&this.child.exit(),this.child=new e(this,...t),this.child.load(),this.child}exitScreens(e){let t=this.parent,n=this.child;for(;null!=n?.child;)n=n.child;for(;n&&n!==this;)n.child=null,n.exit(),n=n.parent;if(e)for(;null!==t&&!(t instanceof Uh);)t.child=null,t.exit(),t=t.parent;null!==t&&(t.load(),t.child=null)}getFunctions(){return{Run:this.run?.bind(this)??CommonNoop,Draw:this.draw?.bind(this),Click:this.click?.bind(this)??CommonNoop,Load:this.load.bind(this),Unload:this.unload?.bind(this),Resize:this.resize?.bind(this),Exit:this.exit.bind(this)}}}Vh.background="Sheet",Vh.screen="",Vh.screenParamsDefault={};class Uh extends Vh{constructor(e,t,n,r){super(e,Uh.screenParamsDefault,null),this.module=t,this.background=n,this.screenFunctions=Object.freeze({...r})}run(e){return this.screenFunctions.Run(e)}draw(){return this.screenFunctions.Draw?.()}click(e){return this.screenFunctions.Click(e)}load(){return this.screenFunctions.Load?.()}unload(){return this.screenFunctions.Unload?.()}resize(e){return this.screenFunctions.Resize?.(e)}keyDown(e){return this.screenFunctions.KeyDown?.(e)??!1}exit(){return this.screenFunctions.Exit?.()}}Uh.screenParamsDefault={};const Kh=Object.freeze({NONE:0,SAVE:1,DELETE:2});class Jh extends Vh{get index(){return y(this,qh,"f")}set index(e){ph(e,"index",0,this.mbsList.length-1),S(this,qh,e,"f")}get mbsObject(){return this.mbsList[y(this,qh,"f")]}hasStorageSpace(){return null!==this.mbsList[this.index]||this.dataSize.value<=this.dataSize.max*this.dataSize.marigin}constructor(e,t,n,r,i,o){super(e,i,o),qh.set(this,0),this.character=r,this.mbsList=t,this.index=n,this.dataSize=Object.seal({value:0,valueRecord:{},max:ff,marigin:.9})}load(){const e=gf(this.character.OnlineSharedSettings);this.dataSize.value=Fc(Object.values(e),(e=>Number.isNaN(e)?0:e)),this.dataSize.valueRecord=e,super.load()}exit(e=!0,t=Kh.NONE){if(super.exit(),!this.character.IsPlayer())return this.exitScreens(e);switch(t){case Kh.NONE:break;case Kh.SAVE:this.settings.isValid(this.index)&&this.hasStorageSpace()&&(this.mbsList[this.index]=this.settings.writeSettings(),this.mbsList[this.index]?.register());break;case Kh.DELETE:{const e=this.mbsList[this.index];this.mbsList[this.index]=null,e?.unregister();break}default:throw new Error(`Unsupported action: ${t}`)}this.exitScreens(e)}}qh=new WeakMap;var Yh,Zh,Xh,Qh,ep;const tp=Object.freeze({[Eh.NONE]:"None",[Eh.CLOTHES]:"Clothes",[Eh.UNDERWEAR]:"Clothes and underwear",[Eh.COSPLAY]:"Clothes, underwear and cosplay items",[Eh.ALL]:"Clothes, underwear, cosplay items and body"});function np(e){e=Number.isNaN(e)?60:vi(e,60,14400);const t={h:0,m:0,s:0};return t.h=Math.floor(e/3600),e-=3600*t.h,t.m=Math.floor(e/60),e-=60*t.m,t.s=e,`${t.h.toString().padStart(2,"0")}:${t.m.toString().padStart(2,"0")}:${t.s.toString().padStart(2,"0")}`}function rp(e,t,n){return p("div",{id:e.inputID,class:"mbs-dropdown",onWheel:n=>{const r=document.getElementById(e.buttonID);if(r.disabled)return;let i;if(n.deltaY<0)i=vi(t[e.level]-1,Eh.NONE,Eh.COSPLAY);else{if(!(n.deltaY>0))return;i=vi(t[e.level]+1,Eh.NONE,Eh.COSPLAY)}t[e.level]=i,r.innerText=tp[t[e.level]]},children:[h("button",{class:"mbs-button",disabled:n,id:e.buttonID,children:tp[Eh.UNDERWEAR]}),p("div",{class:"mbs-dropdown-content",id:e.dropdownID,children:[" ",Object.values(tp).slice(0,4).map(((r,i)=>h("button",{class:"mbs-button mbs-dropdown-button",disabled:n,"data-level":i,id:e.optionID+i.toString(),onClick:n=>{const r=n.target;t[e.level]=vi(Number.parseInt(r.dataset.level),Eh.NONE,Eh.COSPLAY);document.getElementById(e.buttonID).innerText=tp[t[e.level]]},children:r})))," "]})]})}const ip="mbs-fwitemset",op=Object.freeze({root:ip,styles:`${ip}-style`,delete:`${ip}-delete`,deleteButton:`${ip}-delete-button`,deleteTooltip:`${ip}-delete-tooltip`,accept:`${ip}-accept`,acceptButton:`${ip}-accept-button`,acceptTooltip:`${ip}-accept-tooltip`,cancel:`${ip}-cancel`,cancelButton:`${ip}-cancel-button`,cancelTooltip:`${ip}-cancel-tooltip`,exit:`${ip}-exit`,exitButton:`${ip}-exit-button`,exitTooltip:`${ip}-exit-tooltip`,header:`${ip}-header`,midDiv:`${ip}-mid-grid`,botDiv:`${ip}-bot-grid`,outfitName:`${ip}-outfit-name`,outfitInput:`${ip}-outfit-input`,outfitDiv:`${ip}-outfit-div`,outfitButton:`${ip}-outfit-button`,outfitTooltip:`${ip}-outfit-tooltip`,stripHeader:`${ip}-strip-header`,stripInput:`${ip}-strip-dropdown`,stripButton:`${ip}-strip-dropdown-button`,stripDropdown:`${ip}-strip-dropdown-content`,stripOption:`${ip}-strip-dropdown-option`,equipHeader:`${ip}-equip-header`,equipInput:`${ip}-equip-dropdown`,equipButton:`${ip}-equip-dropdown-button`,equipDropdown:`${ip}-equip-dropdown-content`,equipOption:`${ip}-equip-dropdown-option`,weightHeader:`${ip}-weight-header`,weightInput:`${ip}-weight-input`,lockHeader:`${ip}-lock-header`,lockGrid:`${ip}-lock-grid`,lockContainer:`${ip}-lock-container`,lockCheckbox:`${ip}-lock-checkbox`,lockTimer:`${ip}-lock-timer`});class ap extends Jh{constructor(e,t,n,r,i=null){const o=!r.IsPlayer();super(e,t,n,r,ap.screenParamsDefault,i),Yh.add(this),this.settings=new Qf(t),this.preview=CharacterLoadSimple("MBSFortuneWheelPreview"),document.body.appendChild(p("div",{id:op.root,class:"mbs-screen",children:[h("style",{id:op.styles,children:'#mbs-fwitemset {\n  grid-template: "delete header header header accept cancel exit" min(9dvh, 4.5dvw) ". . name-input name-input . . ." min(7dvh, 3.5dvw) ". . outfit-input outfit-input outfit-button outfit-button outfit-button" min(7dvh, 3.5dvw) ". . strip-header lock-header lock-header lock-header lock-header" min(7dvh, 3.5dvw) ". . strip-input lock-grid lock-grid lock-grid lock-grid" min(7dvh, 3.5dvw) ". . equip-header lock-grid lock-grid lock-grid lock-grid" min(7dvh, 3.5dvw) ". . equip-input lock-grid lock-grid lock-grid lock-grid" min(7dvh, 3.5dvw) ". . weight-header lock-grid lock-grid lock-grid lock-grid" min(7dvh, 3.5dvw) ". . weight-input lock-grid lock-grid lock-grid lock-grid" min(7dvh, 3.5dvw)/min(9dvh, 4.5dvw) min(40dvh, 20dvw) auto min(38dvh, 19dvw) min(16dvh, 8dvw) min(9dvh, 4.5dvw) min(9dvh, 4.5dvw);\n}\n#mbs-fwitemset span {\n  place-self: end start;\n}\n\n#mbs-fwitemset-delete {\n  grid-area: delete;\n}\n\n#mbs-fwitemset-header {\n  grid-area: header;\n  margin-left: min(20dvh, 10dvw);\n}\n\n#mbs-fwitemset-accept {\n  grid-area: accept;\n  justify-self: end;\n}\n\n#mbs-fwitemset-cancel {\n  grid-area: cancel;\n}\n\n#mbs-fwitemset-exit {\n  grid-area: exit;\n}\n\n#mbs-fwitemset-outfit-name {\n  grid-area: name-input;\n}\n\n#mbs-fwitemset-outfit-input {\n  grid-area: outfit-input;\n}\n\n#mbs-fwitemset-outfit-div {\n  grid-area: outfit-button;\n  grid-template-columns: auto;\n  grid-template-rows: min(7dvh, 3.5dvw) auto;\n}\n\n#mbs-fwitemset-strip-header {\n  grid-area: strip-header;\n}\n\n#mbs-fwitemset-strip-dropdown {\n  grid-area: strip-input;\n  width: min(40dvh, 20dvw);\n}\n\n#mbs-fwitemset-equip-header {\n  grid-area: equip-header;\n}\n\n#mbs-fwitemset-equip-dropdown {\n  grid-area: equip-input;\n  width: min(40dvh, 20dvw);\n}\n\n#mbs-fwitemset-weight-header {\n  grid-area: weight-header;\n}\n\n#mbs-fwitemset-weight-input {\n  align-self: start;\n  grid-area: weight-input;\n  height: 100%;\n  width: calc(min(7dvh, 3.5dvw) + 16px);\n}\n\n#mbs-fwitemset-lock-header {\n  grid-area: lock-header;\n}\n\n#mbs-fwitemset-lock-grid {\n  align-self: start;\n  display: grid;\n  gap: min(2dvh, 1dvw);\n  grid-area: lock-grid;\n  grid-template-columns: min(38dvh, 19dvw) min(38dvh, 19dvw);\n  overflow-y: scroll;\n}\n\n.mbs-fwitemset-lock-container {\n  align-items: center;\n  display: grid;\n  word-wrap: break-word;\n  gap: min(2dvh, 1dvw);\n  grid-template-columns: min(7dvh, 3.5dvw) auto;\n}\n\n.mbs-timer {\n  height: 100%;\n  text-align: center;\n  width: 100%;\n}\n\n#mbs-fwitemset-strip-dropdown-content, #mbs-fwitemset-equip-dropdown-content {\n  width: min-content;\n}'.toString()}),h("h1",{id:op.header,children:`Customize wheel of fortune item set ${this.index}`}),p("div",{id:op.delete,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:op.deleteButton,style:{backgroundImage:"url('./Icons/Trash.png')"},onClick:()=>this.exit(!1,Kh.DELETE),disabled:o}),h("div",{class:"mbs-button-tooltip",id:op.deleteTooltip,style:{justifySelf:"left"},children:"Delete item set"})]}),p("div",{id:op.accept,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:op.acceptButton,style:{backgroundImage:"url('./Icons/Accept.png')"},onClick:()=>this.exit(!1,Kh.SAVE),disabled:!0}),h("div",{class:"mbs-button-tooltip",id:op.acceptTooltip,style:{justifySelf:"right"},children:"Save item set:\\nMissing outfit"})]}),p("div",{id:op.cancel,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:op.cancelButton,style:{backgroundImage:"url('./Icons/Cancel.png')"},onClick:()=>this.exit(!1,Kh.NONE)}),h("div",{class:"mbs-button-tooltip",id:op.cancelTooltip,style:{justifySelf:"right"},children:"Cancel"})]}),p("div",{id:op.exit,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:op.exitButton,style:{backgroundImage:"url('./Icons/Exit.png')"},onClick:()=>this.exit(!0,Kh.NONE)}),h("div",{class:"mbs-button-tooltip",id:op.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),h("input",{type:"text",id:op.outfitName,placeholder:"Name",disabled:o,maxLength:70,onInput:e=>{this.settings.name=e.target.value,y(this,Yh,"m",Xh).call(this,op.acceptButton)},onFocus:e=>e.target.select()}),h("input",{type:"text",id:op.outfitInput,placeholder:"Outfit code",disabled:o,onInput:e=>{this.settings.outfitCache=e.target.value,y(this,Yh,"m",Xh).call(this,op.outfitButton)},onFocus:e=>e.target.select()}),p("div",{id:op.outfitDiv,class:"mbs-button-div",children:[h("button",{class:"mbs-button",disabled:!0,id:op.outfitButton,onClick:()=>y(this,Yh,"m",Xh).call(this,op.acceptButton,!0),children:"Parse"}),h("div",{class:"mbs-button-tooltip",id:op.outfitTooltip,children:"Parse the outfit code"})]}),h("span",{id:op.stripHeader,children:"Clothing strip level:"}),h("span",{id:op.equipHeader,children:"Clothing equip level:"}),h("span",{id:op.weightHeader,children:"Wheel option weight:"}),h("span",{id:op.lockHeader,children:"Enabled lock types:"}),h("input",{type:"number",id:op.weightInput,min:1,max:9,value:1,disabled:o,onInput:e=>{const t=e.target;this.settings.weight=vi(Number.parseInt(t.value,10),1,9)},onWheel:e=>{const t=e.target;if(!t.disabled){if(e.deltaY<0)t.stepUp(1);else{if(!(e.deltaY>0))return;t.stepDown(1)}this.settings.weight=vi(Number.parseInt(t.value,10),1,9)}},onFocus:e=>e.target.select()}),rp({inputID:op.stripInput,buttonID:op.stripButton,optionID:op.stripOption,dropdownID:op.stripDropdown,level:"stripLevel"},this.settings,o),rp({inputID:op.equipInput,buttonID:op.equipButton,optionID:op.equipOption,dropdownID:op.equipDropdown,level:"equipLevel"},this.settings,o),p("div",{id:op.lockGrid,children:[" ",this.settings.flags.map(((e,t)=>{let n;if("TimerPasswordPadlock"===e.type)n=function(e,t,n){return h("input",{type:"text",class:"mbs-timer",id:op.lockTimer+t.toString(),disabled:n,value:np(e.time),pattern:/([0]?[0-4]:)?([0-6]?[0-9]:)?([0-6]?[0-9])?/.source,maxLength:8,onInput:t=>{const n=t.target,[r,i]=[n.selectionStart,n.selectionEnd],o=n.value;if(n.value=o.replace(/[^0-9:]/g,""),n.value!==o&&(null!==r||null!==i)){const e=/[^0-9:]/g,t=Array.from(o).map(((t,n)=>e.test(t)?n:-1)).filter((e=>-1!==e));null!==r&&(n.selectionStart=t.reduce(((e,t)=>e+(r>=t?-1:0)),r)),null!==i&&(n.selectionEnd=t.reduce(((e,t)=>e+(i>=t?-1:0)),i))}const[a,s,l]=n.value.split(":").slice(-3).map((e=>Number.parseInt(e,10)||0)),u=3600*a+60*s+l;e.time=vi(u,60,14400)},onBlur:t=>{const n=t.target;if(n.disabled)return;const[r,i,o]=n.value.split(":").slice(-3).map((e=>Number.parseInt(e,10)||0)),a=3600*r+60*i+o;n.value=np(a),e.time=vi(a,60,14400)},onFocus:e=>{const t=e.target,n=t.selectionStart;null!==n&&(n<=2?(t.selectionStart=0,t.selectionEnd=2):n<=5?(t.selectionStart=3,t.selectionEnd=5):n<=8&&(t.selectionStart=6,t.selectionEnd=8))},onWheel:t=>{const n=t.target;if(n.disabled)return;const r=n.value.replace(/[^0-9:]/g,""),[i,o,a]=r.split(":").slice(-3).map((e=>Number.parseInt(e,10)||0));let s=3600*i+60*o+a;if(t.deltaY<0)s+=120;else{if(!(t.deltaY>0))return;s-=120}n.value=np(s),e.time=vi(s,60,14400)}})}(e,t,o);else n=e.description;return p("div",{class:op.lockContainer,id:op.lockContainer+t.toString(),children:[h("input",{type:"checkbox",class:op.lockCheckbox,id:op.lockCheckbox+t.toString(),disabled:o,checked:e.enabled,onClick:()=>{e.enabled=!e.enabled,y(this,Yh,"m",Xh).call(this,op.acceptButton)}}),n]})}))," "]})]}))}load(){super.load();const e=this.mbsObject;if(null!==e){this.settings.readSettings(e),this.settings.outfitCache=LZString.compressToBase64(JSON.stringify(zh(e.itemList,this.preview))),ElementValue(op.outfitName,e.name),ElementValue(op.weightInput,e.weight.toString()),ElementValue(op.outfitInput,this.settings.outfitCache);for(const[e,t]of this.settings.flags.entries()){if(document.getElementById(`${op.lockCheckbox}${e}`).checked=t.enabled,"TimerPasswordPadlock"===t.type)ElementValue(`${op.lockTimer}${e}`,np(t.time))}const t=document.getElementById(op.equipButton),n=document.getElementById(op.stripButton);t.innerText=tp[this.settings.equipLevel],n.innerText=tp[this.settings.stripLevel],y(this,Yh,"m",Xh).call(this,op.acceptButton,!0),y(this,Yh,"m",Xh).call(this,op.outfitButton)}else this.settings.reset(),y(this,Yh,"m",Xh).call(this,op.acceptButton),y(this,Yh,"m",Xh).call(this,op.outfitButton);y(this,Yh,"m",ep).call(this)}draw(){DrawCharacter(this.preview,200,175,.78,!1)}exit(e,t){CharacterDelete(this.preview),super.exit(e,t)}}Yh=new WeakSet,Zh=function(){return this.settings.isValid(this.index)&&this.hasStorageSpace()},Xh=function(e,t=!1){const n=document.getElementById(e),r=!this.character.IsPlayer();switch(e){case op.acceptButton:if(t){const e=this.settings.loadFromBase64();n.disabled=r||!(e&&y(this,Yh,"m",Zh).call(this)),!r&&e&&y(this,Yh,"m",ep).call(this)}else n.disabled=r||!(null!==this.settings.itemList&&y(this,Yh,"m",Zh).call(this));y(this,Yh,"m",Qh).call(this,op.acceptTooltip);break;case op.outfitButton:n.disabled=r||!this.settings.outfitCache,y(this,Yh,"m",Qh).call(this,op.outfitTooltip);break;default:throw new Error(`Unsupported tooltip type: ${e}`)}},Qh=function(e){const t=document.getElementById(e);switch(e){case op.acceptTooltip:{const e="Save item set";this.settings.loadFromBase64()?y(this,Yh,"m",Zh).call(this)?t.innerText=e:this.settings.name?this.settings.flags.every((e=>!e.enabled))?t.innerText=`${e}:\nMust enable at least one lock type`:this.hasStorageSpace()?t.innerText=`${e}:\nMax allowed OnlineSharedSettings storage size exceeded (${mf(this.dataSize.value)} / ${mf(this.dataSize.max)}`:t.innerText=`${e}:\nDuplicate name`:t.innerText=`${e}:\nMissing name`:t.innerText=`${e}:\nMissing outfit`;break}case op.outfitTooltip:{const e="Parse outfit code";this.settings.outfitCache?t.innerText=e:t.innerText=`${e}:\nMissing code`;break}default:throw new Error(`Unsupported tooltip type: ${e}`)}},ep=function(){if(this.preview.Appearance=[...this.character.Appearance],this.preview.OnlineSharedSettings=this.character.OnlineSharedSettings,CharacterReleaseTotal(this.preview),null===this.settings.itemList)return;const e=Oh(this.settings.equipLevel,this.preview),t=this.preview.AssetFamily;jh("MBSPreview",this.settings.itemList.filter((({Name:n,Group:r})=>{const i=AssetGet(t,r,n);return null!=i&&("Appearance"!==i.Group.Category||e(i))})),this.settings.stripLevel,null,null,this.preview)},ap.ids=op,ap.screen="MBS_FWItemSetScreen",ap.background="Sheet",ap.screenParamsDefault={[ip]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};const sp="mbs-fwcommand",lp=Object.freeze({root:sp,styles:`${sp}-style`,delete:`${sp}-delete`,deleteButton:`${sp}-delete-button`,deleteTooltip:`${sp}-delete-tooltip`,accept:`${sp}-accept`,acceptButton:`${sp}-accept-button`,acceptTooltip:`${sp}-accept-tooltip`,cancel:`${sp}-cancel`,cancelButton:`${sp}-cancel-button`,cancelTooltip:`${sp}-cancel-tooltip`,exit:`${sp}-exit`,exitButton:`${sp}-exit-button`,exitTooltip:`${sp}-exit-tooltip`,header:`${sp}-header`,commandInput:`${sp}-command-input`,weightHeader:`${sp}-weight-header`,weightInput:`${sp}-weight-input`});class up extends Jh{constructor(e,t,n,r,i=null){super(e,t,n,r,up.screenParamsDefault,i),this.settings=new eg(t);const o=!r.IsPlayer();document.body.appendChild(p("div",{id:lp.root,class:"mbs-screen",children:[h("style",{id:lp.styles,children:'#mbs-fwcommand {\n  grid-template: "delete header accept cancel exit" min(9dvh, 4.5dvw) "commandInput commandInput commandInput commandInput commandInput" min(7dvh, 3.5dvw) "weightHeader weightHeader weightHeader weightHeader weightHeader" min(7dvh, 3.5dvw) "weightInput weightInput weightInput weightInput weightInput" min(7dvh, 3.5dvw)/min(9dvh, 4.5dvw) auto min(9dvh, 4.5dvw) min(9dvh, 4.5dvw) min(9dvh, 4.5dvw);\n}\n\n#mbs-fwcommand-delete {\n  grid-area: delete;\n}\n\n#mbs-fwcommand-header {\n  grid-area: header;\n  margin-left: min(20dvh, 10dvw);\n}\n\n#mbs-fwcommand-accept {\n  grid-area: accept;\n}\n\n#mbs-fwcommand-cancel {\n  grid-area: cancel;\n}\n\n#mbs-fwcommand-exit {\n  grid-area: exit;\n}\n\n#mbs-fwcommand-command-input {\n  grid-area: commandInput;\n  height: min(7dvh, 3.5dvw);\n  place-self: self-end center;\n  width: 50%;\n}\n\n#mbs-fwcommand-weight-header {\n  align-self: self-end;\n  grid-area: weightHeader;\n}\n\n#mbs-fwcommand-weight-input {\n  grid-area: weightInput;\n  height: 100%;\n  place-self: start center;\n  width: calc(min(7dvh, 3.5dvw) + 16px);\n}'.toString()}),h("h1",{id:lp.header,children:`Customize wheel of fortune command ${this.index}`}),p("div",{id:lp.delete,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:lp.deleteButton,style:{backgroundImage:"url('./Icons/Trash.png')"},onClick:()=>this.exit(!1,Kh.DELETE),disabled:o}),h("div",{class:"mbs-button-tooltip",id:lp.deleteTooltip,style:{justifySelf:"left"},children:"Delete command"})]}),p("div",{id:lp.accept,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:lp.acceptButton,style:{backgroundImage:"url('./Icons/Accept.png')"},onClick:()=>this.exit(!1,Kh.SAVE),disabled:!0}),h("div",{class:"mbs-button-tooltip",id:lp.acceptTooltip,style:{justifySelf:"right"},children:"Save command"})]}),p("div",{id:lp.cancel,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:lp.cancelButton,style:{backgroundImage:"url('./Icons/Cancel.png')"},onClick:()=>this.exit(!1,Kh.NONE)}),h("div",{class:"mbs-button-tooltip",id:lp.cancelTooltip,style:{justifySelf:"right"},children:"Cancel"})]}),p("div",{id:lp.exit,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:lp.exitButton,style:{backgroundImage:"url('./Icons/Exit.png')"},onClick:()=>this.exit(!0,Kh.NONE)}),h("div",{class:"mbs-button-tooltip",id:lp.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),h("input",{type:"text",id:lp.commandInput,placeholder:"Role play command",disabled:o,maxLength:70,onInput:e=>{this.settings.name=e.target.value;document.getElementById(lp.acceptButton).disabled=0===this.settings.name.length},onFocus:e=>e.target.select()}),h("div",{id:lp.weightHeader,children:"Wheel option weight:"}),h("input",{type:"number",id:lp.weightInput,min:1,max:9,value:1,disabled:o,onInput:e=>{const t=e.target;this.settings.weight=vi(Number.parseInt(t.value,10),1,9)},onWheel:e=>{const t=e.target;if(!t.disabled){if(e.deltaY<0)t.stepUp(1);else{if(!(e.deltaY>0))return;t.stepDown(1)}this.settings.weight=vi(Number.parseInt(t.value,10),1,9)}},onFocus:e=>e.target.select()})]}))}load(){if(super.load(),null!==this.mbsObject){this.settings.readSettings(this.mbsObject),ElementValue(lp.commandInput,this.mbsObject.name),ElementValue(lp.weightInput,this.mbsObject.weight.toString());document.getElementById(lp.acceptButton).disabled=this.character.IsPlayer()}else this.settings.reset()}}up.ids=lp,up.screen="MBS_FWCommandScreen",up.background="Sheet",up.screenParamsDefault={[sp]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};var cp,dp;function hp(e,t,n){const r=yf(e.OnlineSharedSettings?.MBS,"OnlineSharedSettings",!1);let i,o=void 0===r?void 0:r[t];if(Array.isArray(o)||(void 0!==o&&oh.warn(`Failed to load "${e.AccountName}" wheel of fortune ${n}`),o=Array(Gf).fill(null)),e.IsPlayer())i=Player.MBSSettings[t];else{const e=[];i=vf("FortuneWheelItemSets"===t?rg.fromObject:ig.fromObject,o,e),e.forEach((e=>console.warn(e)))}return i.forEach((e=>e?.register(!1))),i}function pp(e,t){return h("button",{class:"mbs-button",id:gp.button+t.toString(),style:{height:"min(7dvh, 3.5dvw)"},onClick:()=>{if(t<Gf){const n={[ap.ids.root]:{shape:e.rootParams.shape}};return e.loadChild(ap,e.wheelStruct.FortuneWheelItemSets,t,e.character,n)}{const n={[up.ids.root]:{shape:e.rootParams.shape}};return e.loadChild(up,e.wheelStruct.FortuneWheelCommands,t-Gf,e.character,n)}}})}const fp="mbs-fwselect",gp=Object.freeze({root:fp,styles:`${fp}-style`,exit:`${fp}-exit`,exitButton:`${fp}-exit-button`,exitTooltip:`${fp}-exit-tooltip`,storage:`${fp}-storage`,storageInner:`${fp}-storage-cover`,storageTooltip:`${fp}-storage-tooltip`,storageFooter:`${fp}-storage-footer`,buttonOuterGrid:`${fp}-button-grid-outer`,buttonInnerGrid0:`${fp}-button-grid-inner0`,buttonInnerGrid1:`${fp}-button-grid-inner1`,button:`${fp}-button`,itemSets:`${fp}-header0`,commandSets:`${fp}-header1`});class mp extends Vh{get wheelList(){return[...this.wheelStruct.FortuneWheelItemSets,...this.wheelStruct.FortuneWheelCommands]}constructor(e,t,n,r=null){super(e,mp.screenParamsDefault,r),cp.add(this),this.wheelStruct=t,this.character=n,this.dataSize=Object.seal({value:0,valueRecord:{},max:ff,marigin:.9});const i=this.character.IsPlayer();document.body.appendChild(p("div",{id:gp.root,class:"mbs-screen",children:[h("style",{id:gp.styles,children:'#mbs-fwselect {\n  grid-template: ". buttonOuterGrid exit" min(9dvh, 4.5dvw) "storage buttonOuterGrid ." auto "storageFooter buttonOuterGrid ." min(14dvh, 7dvw)/min(30dvh, 15dvw) auto min(20dvh, 10dvw);\n}\n\n#mbs-fwselect-exit {\n  grid-area: exit;\n  height: min(9dvh, 4.5dvw);\n  justify-self: end;\n  width: min(9dvh, 4.5dvw);\n}\n\n#mbs-fwselect-storage {\n  background-image: linear-gradient(180deg, #d80000, #d80000 10%, #00d800 60%, #00d800) !important;\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  display: grid;\n  grid-area: storage;\n  height: 100%;\n  justify-self: center;\n  width: 35%;\n}\n#mbs-fwselect-storage #mbs-fwselect-storage-tooltip {\n  bottom: unset;\n  left: 15%;\n  position: absolute;\n  visibility: hidden;\n}\n#mbs-fwselect-storage:hover #mbs-fwselect-storage-tooltip {\n  visibility: visible;\n}\n\n#mbs-fwselect-storage-cover {\n  width: 100%;\n}\n\n#mbs-fwselect-storage-footer {\n  grid-area: storageFooter;\n  height: min(7dvh, 3.5dvw);\n  padding-top: min(1dvh, 0.5dvw);\n}\n\n#mbs-fwselect-button-grid-outer {\n  display: grid;\n  grid-area: buttonOuterGrid;\n  grid-template-rows: min(9dvh, 4.5dvw) auto min(9dvh, 4.5dvw) auto;\n  height: 94%;\n  overflow-y: scroll;\n  padding-left: min(2dvh, 1dvw);\n  padding-right: min(2dvh, 1dvw);\n}\n\n#mbs-fwselect-button-grid-inner0, #mbs-fwselect-button-grid-inner1 {\n  display: grid;\n  grid-template-columns: minmax(0, 4fr) minmax(0, 4fr);\n  grid-gap: min(2dvh, 1dvw);\n  padding-bottom: min(2dvh, 1dvw);\n  padding-top: min(2dvh, 1dvw);\n}\n\n#mbs-fwselect-header0, #mbs-fwselect-header1 {\n  background-color: var(--mbs-background-color);\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  position: sticky;\n  top: 0%;\n}'.toString()}),p("div",{id:gp.buttonOuterGrid,children:[h("h1",{id:gp.itemSets,"z-index":1,children:i?"Fortune wheel item sets":`${this.character.Nickname??this.character.Name}'s fortune wheel item sets`}),h("div",{id:gp.buttonInnerGrid0,children:rc(0,Gf).map((e=>pp(this,e)))}),h("h1",{id:gp.commandSets,"z-index":1,children:i?"Fortune wheel commands":`${this.character.Nickname??this.character.Name}'s fortune wheel commands`}),h("div",{id:gp.buttonInnerGrid1,children:rc(Gf,2*Gf).map((e=>pp(this,e)))})]}),p("div",{id:gp.exit,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:gp.exitButton,onClick:this.exit.bind(this),style:{backgroundImage:"url('./Icons/Exit.png')"}}),h("span",{class:"mbs-button-tooltip",id:gp.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),p("div",{id:gp.storage,children:[h("div",{id:gp.storageInner}),p("div",{id:gp.storageTooltip,class:"mbs-button-tooltip",children:[h("h2",{id:gp.storageTooltip+"-header",children:"OnlineSharedSettings Data Usage"}),h("ul",{id:gp.storageTooltip+"-list"})]})]}),h("div",{id:gp.storageFooter})]}))}load(){const e=gf(this.character.OnlineSharedSettings);this.dataSize.value=Fc(Object.values(e),(e=>Number.isNaN(e)?0:e)),this.dataSize.valueRecord=e,y(this,cp,"m",dp).call(this),super.load()}exit(){super.exit(),this.exitScreens(!1)}}cp=new WeakSet,dp=function(){const e=this.character.IsPlayer();for(const[t,n]of this.wheelList.entries()){const r=document.getElementById(`${gp.button}${t}`);r.innerText=`${(t%Gf).toString().padStart(2)}: ${n?.name??"<Empty>"}`,r.disabled=null===n&&!e}const t=document.getElementById(gp.storage),n=document.getElementById(gp.storageInner),r=document.getElementById(gp.storageFooter);if(e){const e=vi(mf(this.dataSize.value),0,9999),i=100*e/(ff/1e3);r.innerText=`${e} / ${ff/1e3} KB`,n.style.height=100-i+"%",n.style.backgroundColor="var(--mbs-background-color)",n.style.borderBottom="min(0.3dvh, 0.15dvw) solid var(--mbs-border-color)",i>=90&&(t.style.boxShadow="0 0 min(2dvh, 1dvw) red");const o=/\W/g;let a=Object.entries(this.dataSize.valueRecord).map((([e,t])=>[e.replaceAll(o,""),Number.isNaN(t)?"Unknown":`${mf(t)} KB`]));a.length>=11&&(a=a.slice(0,10),a.push(["...",""]));const s=document.getElementById(gp.storageTooltip+"-list");s.innerHTML="";for(const[e,t]of a)s.appendChild(p("li",{children:[h("span",{style:{float:"left"},children:e}),h("span",{style:{float:"right",paddingLeft:"min(7dvh, 3.5dvw)"},children:t})]}))}else{const e=document.getElementById(gp.storageTooltip);r.innerText=`- / ${ff/1e3} KB`,n.style.height="100%",n.style.backgroundColor="gray",e.style.display="none"}},mp.ids=gp,mp.screen="MBS_FWSelectScreen",mp.background="Sheet",mp.screenParamsDefault={[fp]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};const Rp=Object.freeze(["Exclusive","5 Minutes","15 Minutes","1 Hour","4 Hours","High Security"]),vp=Object.freeze([Object.freeze({type:"ExclusivePadlock",description:"Exclusive",enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:300,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:900,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:3600,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:14400,enabled:!1}),Object.freeze({type:"HighSecurityPadlock",description:"High security",enabled:!1}),Object.freeze({type:null,description:"No lock",enabled:!1})]);function bp(e,t,n){ph(t,"seconds",60,14400),Sp(e,"TimerPasswordPadlock",n)&&(null==e.Property&&(e.Property={}),e.Property.RemoveTimer=CurrentTime+1e3*t,e.Property.RemoveItem=!0,e.Property.LockSet=!0,e.Property.Password=mh(8))}function yp(e,t){Sp(e,"HighSecurityPadlock",t),null==e.Property&&(e.Property={}),e.Property.MemberNumberListKeys=""}function Sp(e,t,n){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);if("string"!=typeof t)throw new TypeError('Invalid "lockName" type: '+typeof t);qf(n);const r=AssetGet(n.AssetFamily,"ItemMisc",t);if(null==r)throw new Error(`Invalid "lockName" value: ${t}`);return!(null!=InventoryGetLock(e)||!InventoryDoesItemAllowLock(e)||InventoryBlockedOrLimited(n,{Asset:r}))&&(InventoryLock(n,e,{Asset:r},null,!1),!0)}function Bp(e,t){return e.forEach(((e,n)=>{e.enabled=t.includes(n)})),e}function wp(e){switch(e.type){case"ExclusivePadlock":return"Exclusive";case"HighSecurityPadlock":return"High Security";case"TimerPasswordPadlock":return`${Math.floor(e.time/60)} Minutes`;case null:return"No Lock";default:throw new Error(`Invalid flag type: ${e.type}`)}}var Cp,kp,Pp,xp,Mp,Ip,Fp,Ep;let _p;const Op=Object.freeze({builtinBC:0,builtinMBS:1,customMBS:2});let Ap,$p,Hp,Lp;ah(Kf).then((async()=>{_p=await TextCache.buildAsync("Screens/MiniGame/WheelFortune/Text_WheelFortune.csv")}));const jp="mbs-fwpreset",Tp=Object.freeze({root:jp,styles:`${jp}-style`,delete:`${jp}-delete`,deleteButton:`${jp}-delete-button`,deleteTooltip:`${jp}-delete-tooltip`,accept:`${jp}-accept`,acceptButton:`${jp}-accept-button`,acceptTooltip:`${jp}-accept-tooltip`,save:`${jp}-save`,saveButton:`${jp}-save-button`,saveTooltip:`${jp}-save-tooltip`,exit:`${jp}-exit`,exitButton:`${jp}-exit-button`,exitTooltip:`${jp}-exit-tooltip`,header:`${jp}-header`,midDiv:`${jp}-mid-div`,nameDiv:`${jp}-name-div`,nameHeader:`${jp}-name-header`,nameInput:`${jp}-name-input`,nameDropdown:`${jp}-name-dropdown`,nameDropdownDiv:`${jp}-name-dropdown-div`,nameDropdownContent:`${jp}-name-dropdown-content`,builtinBC:`${jp}-builtin-bc`,builtinBCColor:`${jp}-builtin-bc-color`,builtinBCTooltip:`${jp}-builtin-bc-tooltip`,builtinBCTooltipHeader:`${jp}-builtin-bc-tooltip-header`,builtinBCTooltipList:`${jp}-builtin-bc-tooltip-list`,builtinBCDiv:`${jp}-builtin-bc-div`,builtinBCHeader:`${jp}-builtin-bc-header`,builtinMBS:`${jp}-builtin-mbs`,builtinMBSColor:`${jp}-builtin-mbs-color`,builtinMBSTooltip:`${jp}-builtin-mbs-button-tooltip`,builtinMBSTooltipHeader:`${jp}-builtin-mbs-button-tooltip-header`,builtinMBSTooltipList:`${jp}-builtin-mbs-button-tooltip-list`,builtinMBSDiv:`${jp}-builtin-mbs-div`,builtinMBSHeader:`${jp}-builtin-mbs-header`,customMBS:`${jp}-custom-mbs`,customMBSColor:`${jp}-custom-mbs-color`,customMBSTooltip:`${jp}-custom-mbs-button-tooltip`,customMBSTooltipHeader:`${jp}-custom-mbs-button-tooltip-header`,customMBSTooltipList:`${jp}-custom-mbs-button-tooltip-list`,customMBSDiv:`${jp}-custom-mbs-div`,customMBSHeader:`${jp}-custom-mbs-header`});class Dp extends Vh{get index(){return y(this,kp,"f")}set index(e){ph(e,"index",0,this.presets.length-1),y(this,kp,"f")!==e&&(S(this,kp,e,"f"),y(this,Cp,"m",Ep).call(this))}constructor(e,t,n=null){!function(){if(void 0!==Ap)return;const e=/^([a-zA-Z0-9_\s]+) for ([0-9]+) (minutes|hours)$/,t=WheelFortuneOption.filter((e=>void 0===e.Custom)),n=new Set,r={};for(const i of t){const t=_p.get(`Option${i.ID}`),o=e.exec(t);if(!o){r[i.ID]={header:t,type:Op.builtinBC},n.add(t);continue}const[a,s]=[o[1],o[3]];let l=Number.parseInt(o[2]);"hours"===s&&(l*=60),n.add(a),r[i.ID]={header:a,description:`${l} Minutes`,type:Op.builtinBC}}Ap=Array.from(n),$p=Object.fromEntries(Object.entries(r).map((([e,t])=>[e,{...t,index:Ap.indexOf(t.header)}])));const i=256;Hp=Object.fromEntries(zp.flatMap(((e,t)=>e.flags.map(((n,r)=>[String.fromCharCode(i+16*t+r),{header:e.name,description:wp(n),index:t,type:Op.builtinMBS}]))))),Lp=Object.fromEntries(rc(512,1536).map(((e,t)=>{const n=String.fromCharCode(e),r=Math.floor(t/i);let o;switch(r){case 0:case 2:o=(0===r?0:16)+Math.floor(t%i/16);break;case 1:case 3:o=(1===r?0:16)+Math.floor(t%i/16)+32;break;default:throw new RangeError(`Index ${t} lies out of the [0, 2**10) range`)}return[n,{header:"<Empty>",type:Op.customMBS,index:o}]})))}(),super(e,Dp.screenParamsDefault,n),Cp.add(this),this.activePreset={name:"<PLACEHOLDER>",ids:new Set},kp.set(this,0),this.presets=t,this.queueServer=new Set,this.idMapping={...Go($p),...Go(Hp),...Go(Lp)},document.body.appendChild(p("div",{id:Tp.root,class:"mbs-screen",children:[h("style",{id:Tp.styles,children:'#mbs-fwpreset {\n  grid-template: "delete header accept save exit" min(9dvh, 4.5dvw) "mid mid mid mid mid" auto/min(9dvh, 4.5dvw) auto min(9dvh, 4.5dvw) min(9dvh, 4.5dvw) min(9dvh, 4.5dvw);\n}\n\n#mbs-fwpreset-delete {\n  grid-area: delete;\n}\n\n#mbs-fwpreset-header {\n  grid-area: header;\n  margin-left: min(20dvh, 10dvw);\n}\n\n#mbs-fwpreset-accept {\n  grid-area: accept;\n}\n\n#mbs-fwpreset-save {\n  grid-area: save;\n}\n\n#mbs-fwpreset-exit {\n  grid-area: exit;\n}\n\n#mbs-fwpreset-mid-div {\n  display: grid;\n  grid-area: mid;\n  text-align: center;\n  grid-gap: min(2dvh, 1dvw);\n  grid-template: "name-header builtin-bc-header builtin-mbs-header custom-mbs-header" min(9dvh, 4.5dvw) "name builtin-bc builtin-mbs custom-mbs" auto/auto min-content min-content min-content;\n  justify-items: center;\n  justify-self: center;\n  width: 100%;\n}\n#mbs-fwpreset-mid-div > p {\n  text-wrap: nowrap;\n}\n\n#mbs-fwpreset-name-header {\n  grid-area: name-header;\n}\n\n#mbs-fwpreset-builtin-bc-header {\n  grid-area: builtin-bc-header;\n}\n\n#mbs-fwpreset-builtin-mbs-header {\n  grid-area: builtin-mbs-header;\n}\n\n#mbs-fwpreset-custom-mbs-header {\n  grid-area: custom-mbs-header;\n}\n\n.mbs-fwpreset-grid {\n  display: grid;\n  grid-gap: min(1.2dvh, 0.6dvw);\n  grid-auto-flow: column;\n  grid-template-rows: repeat(8, min(7dvh, 3.5dvw));\n  width: fit-content;\n}\n\n#mbs-fwpreset-name-div {\n  grid-area: name;\n}\n\n#mbs-fwpreset-name-input {\n  height: min(7dvh, 3.5dvw);\n  width: min(35dvh, 17.5dvw);\n}\n\n#mbs-fwpreset-name-dropdown-div {\n  height: min(7dvh, 3.5dvw);\n  position: relative;\n  text-wrap: auto;\n  top: 5%;\n  width: min(36dvh, 18dvw);\n}\n\n#mbs-fwpreset-builtin-bc-div {\n  grid-area: builtin-bc;\n  grid-template-columns: repeat(4, min(7dvh, 3.5dvw));\n}\n\n#mbs-fwpreset-builtin-mbs-div {\n  grid-area: builtin-mbs;\n  grid-template-columns: min(7dvh, 3.5dvw);\n}\n\n#mbs-fwpreset-custom-mbs-div {\n  grid-area: custom-mbs;\n  grid-template-columns: repeat(8, min(7dvh, 3.5dvw));\n}\n\n.mbs-fwpreset-color {\n  border: unset !important;\n  height: 84%;\n  left: 4%;\n  position: relative;\n  top: 4%;\n  width: 84%;\n}\n.mbs-fwpreset-color[data-color=red] {\n  background-color: red;\n}\n.mbs-fwpreset-color[data-color=green] {\n  background-color: green;\n}\n.mbs-fwpreset-color:focus {\n  filter: brightness(60%);\n}\n.mbs-fwpreset-color + .mbs-button-tooltip {\n  z-index: 2;\n}\n.mbs-fwpreset-color:focus + .mbs-button-tooltip {\n  visibility: visible;\n  z-index: 1;\n}\n\n.mbs-fwpreset {\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  display: grid;\n  grid-template-columns: min(7dvh, 3.5dvw);\n  grid-template-rows: min(7dvh, 3.5dvw) auto;\n}\n.mbs-fwpreset:hover .mbs-fwpreset-color {\n  filter: brightness(60%);\n}\n.mbs-fwpreset:hover .mbs-button-tooltip {\n  visibility: visible;\n}'.toString()}),p("h1",{id:Tp.header,children:["Wheel of Fortune preset ",this.index]}),p("div",{id:Tp.delete,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:Tp.deleteButton,style:{backgroundImage:"url('./Icons/Trash.png')"},onClick:this.deletePreset.bind(this),disabled:!0}),h("div",{class:"mbs-button-tooltip",id:Tp.deleteTooltip,style:{justifySelf:"left"},children:"Delete the current preset"})]}),p("div",{id:Tp.accept,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:Tp.acceptButton,style:{backgroundImage:"url('./Icons/Accept.png')"},onClick:this.equipPreset.bind(this),disabled:!0}),h("div",{class:"mbs-button-tooltip",id:Tp.acceptTooltip,style:{justifySelf:"right"},children:"Equip the current preset"})]}),p("div",{id:Tp.save,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:Tp.saveButton,style:{backgroundImage:"url('./Icons/Save.png')"},onClick:this.savePreset.bind(this)}),h("div",{class:"mbs-button-tooltip",id:Tp.saveTooltip,style:{justifySelf:"right"},children:"Save the current preset"})]}),p("div",{id:Tp.exit,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:Tp.exitButton,style:{backgroundImage:"url('./Icons/Exit.png')"},onClick:()=>this.exit(!1)}),h("div",{class:"mbs-button-tooltip",id:Tp.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),p("div",{id:Tp.midDiv,children:[h("p",{id:Tp.nameHeader,children:"Preset Name"}),h("p",{id:Tp.builtinBCHeader,children:"Builtin BC Options"}),h("p",{id:Tp.builtinMBSHeader,children:"Builtin MBS Options"}),h("p",{id:Tp.customMBSHeader,children:"Custom MBS Options"}),p("div",{id:Tp.nameDiv,children:[h("input",{type:"text",id:Tp.nameInput,maxLength:20,onFocus:e=>e.target.select(),onInput:e=>this.activePreset.name=e.target.value}),p("div",{id:Tp.nameDropdownDiv,class:"mbs-dropdown",onWheel:e=>this.index=vi(this.index+Math.sign(e.deltaY),0,this.presets.length-1),children:[h("button",{class:"mbs-button",id:Tp.nameDropdown}),p("div",{class:"mbs-dropdown-content",id:Tp.nameDropdownContent,children:[" ",Object.values(this.presets).map(((e,t)=>h("button",{class:"mbs-button mbs-dropdown-button",id:Tp.nameDropdown+t.toString(),onClick:()=>this.index=t,children:`${t}: ${e?.name??"<Empty>"}`})))," "]})]})]}),h("div",{id:Tp.builtinBCDiv,class:"mbs-fwpreset-grid",children:y(this,Cp,"m",Mp).call(this,Op.builtinBC)}),h("div",{id:Tp.builtinMBSDiv,class:"mbs-fwpreset-grid",children:y(this,Cp,"m",Mp).call(this,Op.builtinMBS)}),h("div",{id:Tp.customMBSDiv,class:"mbs-fwpreset-grid",children:y(this,Cp,"m",Mp).call(this,Op.customMBS)})]})]}))}savePreset(){const e=this.presets[this.index],t={name:this.activePreset.name,ids:Uf(Array.from(this.activePreset.ids).sort().join(""))};t.name===e?.name&&t.ids===e?.ids||(this.presets[this.index]=t,this.queueServer.add(Rf.SETTINGS),y(this,Cp,"m",Fp).call(this))}equipPreset(){const e=Uf(Array.from(this.activePreset.ids).sort().join(""));Player.OnlineSharedSettings&&Player.OnlineSharedSettings.WheelFortune!==e&&(Player.OnlineSharedSettings.WheelFortune=e,this.queueServer.add(Rf.SHARED))}deletePreset(){null!==this.presets[this.index]&&(this.queueServer.add(Rf.SETTINGS),this.presets[this.index]=null,y(this,Cp,"m",Ep).call(this))}load(){super.load(),y(this,Cp,"m",Pp).call(this),y(this,Cp,"m",Ep).call(this)}exit(e=!0){super.exit(),this.queueServer.size&&Bf(Array.from(this.queueServer),!0),this.exitScreens(e)}}function Np(e,t,n){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);if(!Qd(n))throw new TypeError('Invalid "indices" type: '+typeof n);if(null===t||"object"!=typeof t)throw new TypeError('Invalid "character" type: '+typeof t);if(!t.IsSimple()&&!t.IsPlayer())throw new Error("Expected a simple or player character");const r=t.Appearance.find((e=>"HairFront"===e.Asset.Group.Name));if(void 0===r)return;const i=Math.max(0,...n);let o;"string"==typeof e.Color?e.Color=o=fh([e.Color],i,"Default"):Array.isArray(e.Color)&&0!==e.Color.length?o=e.Color:e.Color=o=Array(i).fill("Default"),"string"==typeof r.Color?n.forEach((e=>o[e]=r.Color)):Array.isArray(r.Color)&&r.Color.length>=1&&n.forEach((e=>o[e]=r.Color[0]))}function Gp(e,t){if(null===t||"object"!=typeof t)throw new TypeError('Invalid "character" type: '+typeof t);if(!t.IsSimple()&&!t.IsPlayer())throw new Error("Expected a simple or player character");if(Vf(t)){!function(e,t,n){if(!Qd(e))throw new TypeError('Invalid "groupNames" type: '+typeof e);if("string"!=typeof n)throw new TypeError('Invalid "color" type: '+typeof e);for(const r of e){const e=InventoryGet(t,r);null!=e&&(e.Color=Array(e.Asset.ColorableLayerCount).fill(n))}}(["HairAccessory1","HairAccessory2","HairAccessory3","HairBack","HairFront","BodyUpper","BodyLower","Wings","TailStraps","Nipples","Blush","Mouth"],t,"#484747")}return e}let Wp,zp,qp,Vp,Up;kp=new WeakMap,Cp=new WeakSet,Pp=function(){const e=[...Player.MBSSettings.FortuneWheelItemSets,...Player.MBSSettings.FortuneWheelCommands];for(const[t,n]of e.entries()){let e=512;if(e+=t<32?t>=16?16*(16+t):16*t:t>=48?16*t:16*(16+t),n instanceof rg)for(const[t,r]of n.flags.entries()){const i=String.fromCharCode(e+t);this.idMapping[i].description=wp(r),this.idMapping[i].header=n.name}else if(n instanceof ig){const t=String.fromCharCode(e);this.idMapping[t].header=n.name,delete this.idMapping[t].description}else for(const t of rc(16)){const n=String.fromCharCode(e+t);this.idMapping[n].header="<Empty>",delete this.idMapping[n].description}}},xp=function(e,t,n,r){const i=e.toString();return p("div",{id:r.root+i,class:"mbs-fwpreset",children:[h("button",{id:r.color+i,class:"mbs-fwpreset-color","data-color":"red",onClick:e=>e.target.focus()}),p("div",{id:r.tooltip+i,class:"mbs-button-tooltip",style:{justifySelf:n},children:[h("h2",{id:r.tooltipHeader+i,"data-prefix":t??""}),h("ul",{id:r.tooltipList+i})]})]})},Mp=function(e){let t,n,r;const i=y(this,Cp,"m",Ip).call(this,e);switch(e){case Op.builtinBC:t=Ap,n="left";break;case Op.builtinMBS:t=zp,n="center";break;case Op.customMBS:t=[...Player.MBSSettings.FortuneWheelItemSets,...Player.MBSSettings.FortuneWheelCommands],n="right",r=(e,t)=>t>=Gf?`Command Set ${t-32}: `:`Item Set ${t}: `;break;default:throw new Error(`Unknown type: ${e}`)}return t.map(((e,t)=>y(this,Cp,"m",xp).call(this,t,r?.(e,t),n,i)))},Ip=function(e){switch(e){case Op.builtinBC:return{root:Tp.builtinBC,color:Tp.builtinBCColor,tooltip:Tp.builtinBCTooltip,tooltipHeader:Tp.builtinBCTooltipHeader,tooltipList:Tp.builtinBCTooltipList};case Op.builtinMBS:return{root:Tp.builtinMBS,color:Tp.builtinMBSColor,tooltip:Tp.builtinMBSTooltip,tooltipHeader:Tp.builtinMBSTooltipHeader,tooltipList:Tp.builtinMBSTooltipList};case Op.customMBS:return{root:Tp.customMBS,color:Tp.customMBSColor,tooltip:Tp.customMBSTooltip,tooltipHeader:Tp.customMBSTooltipHeader,tooltipList:Tp.customMBSTooltipList};default:throw new Error(`Unknown type: ${e}`)}},Fp=function(){const e=this.presets[y(this,kp,"f")],t=document.getElementById(Tp.nameInput),n=document.getElementById(Tp.nameDropdown),r=document.getElementById(`${Tp.nameDropdown}${this.index}`);t.placeholder=`Preset ${this.index}`,r.innerText=n.innerText=`${y(this,kp,"f")}: ${this.activePreset.name}`;const i=document.getElementById(Tp.deleteButton),o=document.getElementById(Tp.deleteTooltip),a=document.getElementById(Tp.acceptButton),s=document.getElementById(Tp.acceptTooltip),l=document.getElementById(Tp.header);null===e?(t.value="",i.disabled=!0,a.disabled=!0,o.innerText="Delete the current preset:\nunsaved preset",s.innerText="Equip the current preset:\nunsaved preset",l.innerText=`Wheel of Fortune preset ${this.index} (unsaved)`):(t.value=e.name,i.disabled=!1,a.disabled=!1,o.innerText="Delete the current preset",s.innerText="Equip the current preset",l.innerText=`Wheel of Fortune preset ${this.index}`)},Ep=function(){const e=this.presets[y(this,kp,"f")];this.activePreset=null!==e?{name:e.name,ids:new Set(e.ids)}:{name:"<Empty>",ids:new Set(Player.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault)},y(this,Cp,"m",Fp).call(this);const t={[Op.builtinBC]:{},[Op.builtinMBS]:{},[Op.customMBS]:{}};for(const[e,{type:n,index:r,description:i,header:o}]of Object.entries(this.idMapping)){const a=this.activePreset.ids.has(e),s=t[n][r]??={header:o,enabled:a,description:[]};s.enabled||=a,i&&a&&s.description.push(i)}for(const e of Object.values(Op)){const n=y(this,Cp,"m",Ip).call(this,e);for(const[r,i]of Object.entries(t[e])){document.getElementById(`${n.color}${r}`).dataset.color=i.enabled?"green":"red";const e=document.getElementById(`${n.tooltipHeader}${r}`);e.innerText=(e.dataset.prefix??"")+i.header;const t=document.getElementById(`${n.tooltipList}${r}`);t.innerHTML="";for(const e of i.description)t.appendChild(h("li",{children:e}))}}},Dp.background="Sheet",Dp.screen=`MBS_${Dp.name}`,Dp.ids=Tp,Dp.screenParamsDefault={[jp]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};class Kp extends Uh{constructor(){super(null,"WheelFortune","MiniGame",{Run:WheelFortuneRun,Click:WheelFortuneClick,Exit:WheelFortuneExit,Load:()=>{CommonSetScreen("MiniGame","WheelFortune"),WheelFortuneLoad()}}),this.character=Player,this.FortuneWheelItemSets=Array(Gf).fill(null),this.FortuneWheelCommands=Array(Gf).fill(null),this.weightedIDs=this.character.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault}initialize(){if(null==WheelFortuneCharacter)throw new Error("Cannot load the fortune wheel UI while `WheelFortuneCharacter == null`");WheelFortuneOption=[...qp],WheelFortuneDefault=Vp,this.character=WheelFortuneCharacter,this.FortuneWheelItemSets=hp(WheelFortuneCharacter,"FortuneWheelItemSets","item sets"),this.FortuneWheelCommands=hp(WheelFortuneCharacter,"FortuneWheelCommands","commands"),this.weightedIDs=function(e){const t=Array.from(e).flatMap((e=>{const t=WheelFortuneOption.find((t=>t.ID===e));return void 0===t?[]:Array(t.Weight??1).fill(e)}));if(0===t.length)return"";const n=[];for(;n.length<50;)n.push(...Sc(t,Math.random));return n.join("")}(this.character.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault)}}function Jp(){if(Up.initialize(),null!=TextScreenCache)for(const{Description:e,Custom:t,ID:n}of WheelFortuneOption)void 0!==e&&(TextScreenCache.cache[`Option${n}`]=t?`*${e}`:e)}function Yp(){if(null!=TextScreenCache)for(const{Description:e,Custom:t,ID:n}of WheelFortuneOption)void 0!==e&&(TextScreenCache.cache[`Option${n}`]=t?`*${e}`:e)}Kp.screen="WheelFortune",ah(Kf).then((()=>{const e={exit:[1830,60,90,90],roll:[1720,60,90,90],select:[1610,60,90,90],preset:[1500,60,90,90]};if(oh.log("Initializing wheel of fortune hooks"),function(){const e=String.fromCharCode(256),t=WheelFortuneOption.find((t=>void 0===t.Custom&&t.ID>=e));return void 0===t||(oh.warn("Aborting wheel of fortune hook initialization: Found one or more builtin wheel of fortune option-IDs outside of the extended ASCII range",t),!1)}())switch(Rh.patchFunction("WheelFortuneRun",{'DrawTextWrap(TextGet(textTag), 1375, 200, 550, 200, "White")':";",'DrawButton(1720, 60, 90, 90, "", (WheelFortuneVelocity == 0 && !isInvalidWheel) ? "White" : "Silver", "Icons/Random.png", TextGet("Random"), isInvalidWheel);':";"}),Rh.hookFunction("WheelFortuneLoad",11,((e,t)=>(Jp(),t(e)))),Rh.hookFunction("WheelFortuneCustomizeLoad",0,((e,t)=>(Yp(),t(e)))),Rh.hookFunction("WheelFortuneRun",0,((t,n)=>{const r=Player.MBSSettings.RollWhenRestrained||!Player.IsRestrained();r||(WheelFortuneForced=!1),n(t);const i=0===WheelFortuneVelocity,o=i?"White":"Silver",a=WheelFortuneCharacter?.Nickname??WheelFortuneCharacter?.Name,s=WheelFortuneCharacter?.IsPlayer()?"MBS: Configure custom options":`MBS: View ${a}'s option config`;DrawButton(...e.select,"",o,"Icons/Crafting.png",s,!i);const l=!(0!==WheelFortuneVelocity||!WheelFortuneCharacter?.IsPlayer()),u=l?"White":"Silver",c=WheelFortuneCharacter?.Nickname??WheelFortuneCharacter?.Name,d=WheelFortuneCharacter?.IsPlayer()?"MBS: Configure option presets":`MBS: View ${c}'s option presets`;DrawButton(...e.preset,"",u,"Icons/Crafting.png",d,!l);const h=0==WheelFortuneVelocity&&r&&WheelFortuneList.length>0?"White":"Silver";DrawButton(...e.roll,"",h,"Icons/Random.png",r?TextGet("Random"):"MBS: Cannot spin while restrained",!r);let p="";p=0===WheelFortuneList.length?TextGet("Invalid"):0!==WheelFortuneVelocity?TextGet("Wait"):r?WheelFortuneForced?TextGet("Forced"):TextGet("Title"):"MBS: Cannot spin the wheel of fortune while restrained",DrawTextWrap(p,1375,200,550,200,"White")})),Rh.hookFunction("WheelFortuneClick",0,((t,n)=>{if(Player.MBSSettings.RollWhenRestrained||!Player.IsRestrained()||(WheelFortuneForced=!1,!MouseIn(...e.roll))){if(0===WheelFortuneVelocity&&MouseIn(...e.select)){const e={FortuneWheelItemSets:Up.FortuneWheelItemSets,FortuneWheelCommands:Up.FortuneWheelCommands};Up.loadChild(mp,e,Up.character)}else 0===WheelFortuneVelocity&&MouseIn(...e.preset)&&WheelFortuneCharacter?.IsPlayer()&&Up.loadChild(Dp,WheelFortuneCharacter.MBSSettings.FortuneWheelPresets);return n(t)}})),Rh.hookFunction("WheelFortuneMouseUp",11,((e,t)=>{!Player.MBSSettings.RollWhenRestrained&&Player.IsRestrained()||t(e)})),Rh.hookFunction("WheelFortuneMouseDown",11,((e,t)=>{!Player.MBSSettings.RollWhenRestrained&&Player.IsRestrained()||t(e)})),Rh.hookFunction("WheelFortuneDrawWheel",11,(([e,...t],n)=>n([Up.weightedIDs,...t]))),Up=new Kp,ah(Yf).then((()=>{oh.log("Initializing wheel of fortune module"),Wp=function(){const e=nh(th({leash_candy:[{Name:"ReverseBunnySuit",Group:"Suit",ItemCallback:(e,t)=>Np(e,t,[0,1])},{Name:"Catsuit",Group:"SuitLower",ItemCallback:(e,t)=>Np(e,t,[0,1])},{Name:"FaceVeil",Group:"Mask",Color:["#000","Default"],ItemCallback:(e,t)=>Np(e,t,[1])},{Name:"FuturisticMittens",Group:"ItemHands",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Mittens"},ItemCallback:(e,t)=>Np(e,t,[0,1])},{Name:"InteractiveVRHeadset",Group:"ItemHead",TypeRecord:{b:3,f:3,g:1},Craft:{Property:"Secure",Name:"Permanent PSO Headset"},ItemCallback:(e,t)=>Np(e,t,[0])},{Name:"LargeDildo",Group:"ItemMouth",Craft:{Property:"Secure",Name:"Permanent PSO Dildo",Description:"Specially made to fill a PSOs mouth and throat"}},{Name:"LatexBallMuzzleGag",Group:"ItemMouth2",Craft:{Property:"Secure",Name:"Permanent PSO Muzzle",Description:"Forcing the dildo in and keeping it secure"}},{Name:"FuturisticMuzzle",Group:"ItemMouth3",TypeRecord:{n:1,h:0,s:3},Craft:{Property:"Secure",Name:"Permanent PSO Muzzle",Description:"Keeping your cries muffled"},ItemCallback:(e,t)=>Np(e,t,[3])},{Name:"FuturisticVibrator",Group:"ItemVulva",TypeRecord:{vibrating:9},Craft:{Property:"Secure",Name:"Permanent PSO Vibe",Description:"Specially made to fill a PSO"}},{Name:"SciFiPleasurePanties",Group:"ItemPelvis",TypeRecord:{c:3,i:4,o:1,s:2},Craft:{Property:"Secure",Name:"Permanent PSO Panties",Description:"No escape and no Orgasms"},ItemCallback:(e,t)=>Np(e,t,[0,2,4,5])},{Name:"BonedNeckCorset",Group:"ItemNeck",Color:["#222222","#888888","#AA2121","#AA2121","#888888"],TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Permanent PSO Collar"},ItemCallback:(e,t)=>Np(e,t,[2,3])},{Name:"CollarChainShort",Group:"ItemNeckRestraints",Craft:{Property:"Secure",Name:"Permanent PSO Chain",Description:"To keep a PSO on their knees"},Property:{OverridePriority:7},ItemCallback:(e,t)=>Np(e,t,[0])},{Name:"StrictLeatherPetCrawler",Group:"ItemArms",Craft:{Property:"Secure",Name:"Permanent PSO Suit",Description:"Extra tight and unremovable"}},{Name:"HeavyLatexCorset",Group:"ItemTorso",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Corset",Description:"Extra tight and specially molded"}},{Name:"FuturisticHarness",Group:"ItemTorso2",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Harness",Description:"Special harness that constantly shrinks...."},Property:{OverridePriority:23},ItemCallback:(e,t)=>Np(e,t,[0,1,2])},{Name:"FuturisticEarphones",Group:"ItemEars",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Earphones"},Color:["#0F0F0F","Default","Default"],ItemCallback:(e,t)=>Np(e,t,[1])},{Name:"CeilingChain",Group:"ItemAddon",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Chain",Description:"Never to escape"},ItemCallback:(e,t)=>Np(e,t,[0])},{Name:"RoundPiercing",Group:"ItemNipplesPiercings",TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Permanent PSO Piercings"},Color:["#000000","Default","Default"],ItemCallback:(e,t)=>Np(e,t,[1,2])},{Name:"CollarAutoShockUnit",Group:"ItemNeckAccessories",TypeRecord:{s:2,y:0},Craft:{Property:"Secure",Name:"Permanent PSO Shock Unit"}},{Name:"FrogtieStraps",Group:"ItemLegs",Craft:{Property:"Secure",Name:"Permanent PSO Straps",Description:"To keep a PSO on their knees"},ItemCallback:(e,t)=>Np(e,t,[2])},{Name:"DroneMask",Group:"ItemHood",TypeRecord:{m:0,e:0,p:1,g:0,s:1,h:2,j:0},Craft:{Property:"Thin",Name:"Permanent PSO Mask"},ItemCallback:(e,t)=>Np(e,t,[2])}],mummy:[{Name:"DuctTape",Group:"ItemFeet",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{Np(e,t,[0]);const n=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],r=(n?.options??[]).map((e=>e.Property.TypeRecord));0!==r.length&&Ih(e,t,pc(r)??{})}},{Name:"DuctTape",Group:"ItemLegs",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{Np(e,t,[0]);const n=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],r=(n?.options??[]).map((e=>e.Property.TypeRecord));0!==r.length&&Ih(e,t,pc(r)??{})}},{Name:"DuctTape",Group:"ItemHands",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>Np(e,t,[0])},{Name:"DuctTape",Group:"ItemArms",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{Np(e,t,[0]);const n=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],r=(n?.options??[]).map((e=>e.Property.TypeRecord));0!==r.length&&Ih(e,t,pc(r)??{})}},{Name:"LargeDildo",Group:"ItemMouth",Craft:{Property:"Large",Name:"Rubber Mouth Sealant",Description:"A rubber mass molded to shape of your mouth"}},{Name:"DuctTape",Group:"ItemMouth2",TypeRecord:{typed:0},Craft:{Property:"Large",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{Np(e,t,[0]);const n=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],r=(n?.options??[]).map((e=>e.Property.TypeRecord));r.length<2||Ih(e,t,pc(r.slice(1))??{})}},{Name:"DuctTape",Group:"ItemMouth3",TypeRecord:{typed:0},Craft:{Property:"Large",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},Equip:()=>Math.random()>.5,ItemCallback:(e,t)=>{Np(e,t,[0]);const n=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],r=(n?.options??[]).map((e=>e.Property.TypeRecord));0!==r.length&&Ih(e,t,pc(r)??{})}}],maid:[{Name:"LaceBands",Group:"Bracelet",Color:["#aaaaaa","#151515"]},{Name:"MaidOutfit2",Group:"Cloth",Color:["#0C0C0C","#919194","#9C9C9F"]},{Name:"CatsuitCollar",Group:"ClothAccessory",Color:["#0E0E0E"]},{Name:"MaidHairband1",Group:"Hat",Color:["#979797"]},{Name:"Socks6",Group:"Socks",Color:["#0D0D0D","#919194"]},{Name:"HeartTop",Group:"Bra",Color:["#0E0E0E"]},{Name:"FuturisticHeels2",Group:"Shoes",Color:["#101010","Default","#F1FAFF","#898989","#898989"],TypeRecord:{typed:1}},{Name:"MaidCollar",Group:"ItemNeck",Color:["#DCDCDC","#1B1B1B","Default"],Craft:{Property:"Secure",Name:"Maid Collar",Description:"A tight fitting yet comfortable collar"}},{Name:"FuturisticMittens",Group:"ItemHands",Color:["#FFFFFF","#FFFFFF","#2E2E2E","#050505"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Maid Mittens",Description:"For keeping a maid out of trouble"}},{Name:"FuturisticHeels2",Group:"ItemBoots",Color:["#101010","#101010","Default","#F1FAFF","#898989","#898989","#898989"],TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Maid Heels",Description:"For keeping a maid on their toes"}},{Name:"WiredEgg",Group:"ItemVulva",Color:["Default","#141414"],TypeRecord:{vibrating:1},Craft:{Property:"Arousing",Name:"Maid Teaser",Description:"A little reminder to keep a maid on edge"},Property:{OverridePriority:21}},{Name:"StraitLeotard",Group:"ItemArms",Color:["#FFFFFF","#1A1A1A","#FFFFFF"],TypeRecord:{cl:1,co:1,np:0,vp:0},Craft:{Property:"Secure",Name:"Maid Jacket",Description:"For keeping a maid out of trouble"}},{Name:"LeatherAnkleCuffs",Group:"ItemFeet",Color:["#969696","#191919","#969696"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Maid Cuffs",Description:"For keeping a maid out of trouble"}},{Name:"BallGag",Group:"ItemMouth",TypeRecord:{typed:2},Craft:{Property:"Large",Name:"Maid Silencer",Description:"Silence is golden"}}],statue:[{Name:"ReverseBunnySuit",Group:"SuitLower",Color:["#1B1B1B"],Equip:e=>Vf(e)},{Name:"SeamlessCatsuit",Group:"SuitLower",Color:["#484747"],Equip:e=>!Vf(e)},{Name:"SeamlessCatsuit",Group:"Suit",Color:["#484747"],Equip:e=>!Vf(e)},{Name:"ReverseBunnySuit",Group:"Cloth",Color:["#1B1B1B","#1B1B1B"]},{Name:"BondageSkirt",Group:"ClothLower",Color:["#484747","#333333","#333333"]},{Name:"CatsuitCollar",Group:"ClothAccessory",Color:["#484747"]},{Name:"HighCollar",Group:"ItemNeck",Color:["#363636","#717171"],Craft:{Property:"Secure",Name:"Statue Neck"}},{Name:"LargeDildo",Group:"ItemMouth",Color:["#333333"],Craft:{Property:"Large",Name:"Mouth Sealant"},Property:{OverridePriority:27}},{Name:"LatexPostureCollar",Group:"ItemMouth2",Color:["Default"],Craft:{Property:"Large",Name:"Mouth Sealant"},Property:{OverridePriority:28}},{Name:"LatexBallMuzzleGag",Group:"ItemMouth3",Color:["#A1A1A1"],Craft:{Property:"Large",Name:"Mouth Sealant"}},{Name:"KirugumiMask",Group:"ItemHood",Color:["#484747","#484747","#484747","#484747"],TypeRecord:{e:0,m:3,b:0,br:0,op:0,ms:0},Craft:{Property:"Secure",Name:"Statue's Visage"}},{Name:"MonoHeel",Group:"ItemBoots",Color:["#737070","#737070","#101010"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Statue Base"}},{Name:"FuturisticMittens",Group:"ItemHands",Color:["#767676","#5F5F5F","#3C3C3C","#4F4F4F"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Statue Hands"}},{Name:"SmoothLeatherArmbinder1",Group:"ItemArms",Color:["#191919","#3D3D3D","#191919","#191919","#191919"],Craft:{Property:"Secure",Name:"Statue Arms"}}]}).map((([e,t])=>{const n=Object.freeze(t.map((t=>{let n;if(null!==t.Craft&&"object"==typeof t.Craft){const r=AssetGet(Player.AssetFamily,t.Group,t.Name);if(null==r)throw new Error(`Invalid ${e} item: ${t.Group}${t.Name}`);n={...t.Craft,Item:t.Name,Private:!0,Lock:"",TypeRecord:void 0,Name:t.Craft.Name||r.Description,MemberNumber:void 0,MemberName:""},CraftingValidate(n,r,!1)}return Object.freeze({...t,Custom:!1,Property:Object.freeze(t.Property??{}),TypeRecord:t.TypeRecord,Craft:Object.freeze(n),Color:t.Color,ItemCallback:t.ItemCallback,Equip:t.Equip})})));return[e,n]})));return Object.freeze(e)}(),zp=Object.freeze([new rg("PSO Bondage",Wp.leash_candy,Player.MBSSettings.FortuneWheelItemSets,Eh.UNDERWEAR,Eh.UNDERWEAR,Bp(vp.map(To),[0,1,2,3,4,5]),!1),new rg("Mummification",Wp.mummy,Player.MBSSettings.FortuneWheelItemSets,Eh.CLOTHES,Eh.UNDERWEAR,Bp(vp.map(To),[3]),!1),new rg("Bondage Maid",Wp.maid,Player.MBSSettings.FortuneWheelItemSets,Eh.UNDERWEAR,Eh.UNDERWEAR,Bp(vp.map(To),[0,1,2,3]),!1),new rg("Petrification",Wp.statue,Player.MBSSettings.FortuneWheelItemSets,Eh.UNDERWEAR,Eh.UNDERWEAR,Bp(vp.map(To),[0,1,2,3]),!1,Gp)]),zp.forEach((e=>e.register(!1))),qp=Object.freeze(WheelFortuneOption.filter((e=>!e.Custom))),Vp=WheelFortuneDefault,Bf([Rf.SHARED])})),CurrentScreen){case"WheelFortune":return Jp();case"WheelFortuneCustomize":return Yp()}}));const Zp=80,Xp=160;var Qp,ef,tf,nf,rf,of;ah(Kf).then((()=>{oh.log("Initializing crafting hooks"),Rh.patchFunction("CraftingClick",{"if (CraftingOffset < 0) CraftingOffset = 80 - 20;":"if (CraftingOffset < 0) CraftingOffset = 160 - 20;","if (CraftingOffset >= 80) CraftingOffset = 0;":"if (CraftingOffset >= 160) CraftingOffset = 0;"}),Rh.patchFunction("CraftingRun",{"/ ${80 / 20}.":"/ 8."}),ah(Yf).then((()=>{oh.log("Initializing crafting cache"),Rh.hookFunction("CraftingSaveServer",0,((e,t)=>{const n=Player.Crafting;Player.Crafting=n?.slice(0,Zp),t(e),Player.Crafting=n;const r=null==(i=Player.Crafting?Player.Crafting.slice(Zp):null)?"":i.map((e=>e?.Item?CraftingSerialize(e):"")).join(CraftingSerializeItemSep);var i;r!=Player.MBSSettings.CraftingCache&&(Player.MBSSettings.CraftingCache=r,Bf([Rf.SETTINGS]))})),function(e,t){if(e.Crafting??=[],fh(e.Crafting,Zp,null),!t)return;const n=LZString.compressToUTF16(t),r=CraftingDecompressServerData(n),i=new Set(e.Crafting.map((e=>JSON.stringify(e))));let o=!1;for(const[e,t]of r.entries())if(null!=t)e:switch(CraftingValidate(t)){case CraftingStatusType.OK:{const n=JSON.stringify(t);i.has(n)&&(oh.warn(`Filtering duplicate crafting item ${Zp+e}: "${t.Name} (${t.Item})"`),r[e]=null);break e}case CraftingStatusType.ERROR:{const n=JSON.stringify(t);i.has(n)?(oh.warn(`Filtering duplicate crafting item ${Zp+e}:"${t.Name} (${t.Item})"`),r[e]=null):o=!0;break e}case CraftingStatusType.CRITICAL_ERROR:oh.error(`Removing corrupt crafting item ${Zp+e}: "${t?.Name} (${t?.Item})"`),r[e]=null}for(const t of r)if(e.Crafting.length>=Xp){if(null==t)continue;if(e.Crafting.includes(null,Zp))oh.warn("Found more than 160 crafting items, trimming down [80, 160)-interval null entries"),e.Crafting=e.Crafting.filter(((e,t)=>t<Zp||null!=e));else{if(!e.Crafting.includes(null)){const t=e.Crafting.length-Xp;oh.error(`Found more than 160 crafting items, the last ${t} will be deleted`);break}oh.warn("Found more than 160 crafting items, trimming down [0, 80)-interval null entries"),e.Crafting=e.Crafting.filter((e=>null!=e))}}else e.Crafting.push(t);o&&e.IsPlayer()&&CraftingSaveServer()}(Player,Player.MBSSettings.CraftingCache)}))}));ef=new WeakMap,tf=new WeakMap,nf=new WeakMap,rf=new WeakMap,Qp=new WeakSet,of=async function(e,t){const n=await fetch(t).then((t=>t.ok?(oh.debug(`Successfully fetched "${e}" json`,t),t.json()):(oh.debug(`Failed to fetch "${e}" json`,t),Promise.resolve(null)))).catch((e=>(oh.error(e),null)));if(null!==n)switch(e){case"phoneticDict":S(this,ef,Object.freeze(n),"f"),S(this,nf,!0,"f");break;case"gagData":S(this,tf,Object.freeze(n),"f"),S(this,rf,!0,"f");break;default:throw new Error(`Invalid type: ${e}`)}};const af=new class{constructor(){Qp.add(this),ef.set(this,Object.freeze({})),tf.set(this,Object.freeze({})),nf.set(this,!1),rf.set(this,!1)}get gagData(){return y(this,rf,"f")||y(this,Qp,"m",of).call(this,"gagData","https://bananarama92.github.io/MBS/devel/vendor/gag_data.json"),y(this,tf,"f")}get phoneticDict(){return y(this,nf,"f")||y(this,Qp,"m",of).call(this,"phoneticDict","https://bananarama92.github.io/MBS/devel/vendor/en_US.json"),y(this,ef,"f")}init(){this.gagData,this.phoneticDict}},sf=Object.freeze({LIGHT:3,MEDIUM:6,HEAVY:9,KILO_HEAVY:12,MEGA_HEAVY:15,GIGA_HEAVY:18,MAX:21}),lf=Object.freeze(new Set(["aɪ","aʊ","b","d","dʒ","eɪ","f","h","i","j","k","m","n","oʊ","p","s","t","tʃ","u","v","w","z","æ","ð","ŋ","ɑ","ɔ","ɔɪ","ə","ɛ","ɝ","ɡ","ɪ","ɪə","ɫ","ɹ","ʃ","ʊ","ʒ","θ"])),uf=/\p{L}/u;function cf(e){const t=e.toLowerCase(),n=af.phoneticDict[t];if(void 0===n)return;const r=rc(0,n.length).map((e=>[]));for(const e of Bd(n,r)){const[t,n]=e;let r=0;for(;r<t.length;){const e=t[r],i=t.slice(r,r+2);lf.has(i)?(n.push(i),r+=2):(n.push(e),r+=1)}}return r}function df(e,t){let n=e=>e;if(null!=e?.dropChars){const r={level:t,levelMin:e.dropChars.levelMin??sf.HEAVY,levelMax:e.dropChars.levelMax??sf.MAX,maxFrac:e.dropChars.maxFrac??.5};n=e=>function(e,t){const{level:n,levelMax:r,levelMin:i,maxFrac:o}=t;if(n<i)return e;const a=Array.from(e),s=Math.max(o,o*(n-i)/(r-i)),l=Math.floor(a.length*s);return e.slice(0,a.length-l).padEnd(a.length-Math.floor(l/2))}(e,r)}return{dropChars:n,character:e?.character??null,fallback:e?.fallback??(e=>Rh.callOriginal("SpeechGarbleByGagLevel",[e[1],e[0],e[2]])),ignoreOOC:e?.ignoreOOC??!1,perSyllable:e?.perSyllable??!1}}function hf(e,t,n=null){if(e&&e.HasEffect("OpenMouth")&&!e.HasEffect("BlockMouth"))return af.gagData["Ring Gag"]??{};e:if(null!==n){const e=Math.floor(t/3);if(0===e)break e;t/3-e>n.syllable/n.syllableMax&&(t=3*(1+e))}return t<=sf.LIGHT?af.gagData["Cleave Gag"]??{}:t<=sf.MEDIUM?af.gagData["Ball Gag"]??{}:af.gagData["Dildo Gag"]??{}}function pf(e,t,n=null){const{dropChars:r,fallback:i,character:o,ignoreOOC:a,perSyllable:s}=df(n,t);let l="";const u=function(e,t=!1){const n=SpeechGetOOCRanges(e).values();let r=n.next();if(r.done||t)return[{words:e,ooc:!1}];const i=[];let o=0;for(;!r.done;){const t=r.value.start,a=t+r.value.length;i.push({words:e.slice(o,t),ooc:!1}),i.push({words:e.slice(t,a),ooc:!0}),r=n.next(),o=a}return i.push({words:e.slice(o),ooc:!1}),i}(e,a);for(const e of u){if(e.ooc){l+=e.words;continue}let n="",a=[];const u=e.words.length-1;for(const[c,d]of Array.from(e.words).entries()){const e=uf.test(d);if(e&&(n+=d,a.push(d.toUpperCase()===d),c<u))continue;const h=cf(n);if(h){const e=r(h.flatMap(((e,n)=>{const r=s?{syllable:n+1,syllableMax:h.length}:null,i=hf(o,t,r);return e.map((e=>i[e]?.SOUND??""))})).join(""));a.every(Boolean)?l+=e.toUpperCase():a[0]&&e.length>0?l+=`${e[0].toUpperCase()}${e.slice(1)}`:l+=e}else l+=i([n,t]);n="",a=[],e||(l+=i([d,t]))}}return l}ah(Yf).then((()=>{oh.log("Initializing garbling module"),Rh.patchFunction("SpeechTransformProcess",{"text = SpeechTransformGagGarble(text, intensity, ignoreOOC);":"text = SpeechTransformGagGarble(text, intensity, ignoreOOC, C);"}),Rh.hookFunction("SpeechTransformGagGarble",0,(([e,t,n,...r],i)=>{const o=r[0];if(t&&e&&Player.MBSSettings.AlternativeGarbling){return pf(e,t,{dropChars:Player.MBSSettings.DropTrailing?{}:void 0,perSyllable:Player.MBSSettings.GarblePerSyllable,fallback:i,ignoreOOC:n,character:o})}return i([e,t,n,...r])}))}));const ff=18e4;function gf(e){const t=[],n=CommonIsObject(e)?e:{};for(const[e,r]of Object.entries(n))try{const n=JSON.stringify(r??"");t.push([e,(new TextEncoder).encode(n).byteLength])}catch{t.push([e,NaN])}return Object.fromEntries(t.sort((([e,t],[n,r])=>{t=Math.round(t/100),r=Math.round(r/100);const i=Number.isNaN(t),o=Number.isNaN(r);return t===r||i&&o?e.localeCompare(n):i||o?o?-1:1:r-t})))}function mf(e){return Math.round(e/100)/10}const Rf=Object.freeze({SETTINGS:0,SHARED:1});function vf(e,t,n){Array.isArray(t)?t.length>Gf&&(gh(t,Gf),n.push([`Trimming too long wheel of fortune item list: ${t.length}/${Gf}`])):(t=[],n.push(["Re-initializing invalid wheel of fortune item list: "+typeof t]));const r=Object.seal(Array(Gf).fill(null));return t.forEach(((t,i)=>{if(null!==t)try{(r[i]=e(r,t)).register(!1)}catch(e){n.push([`Failed to load corrupted custom wheel of fortune item ${i}`,e])}})),r}function bf(e,t){Array.isArray(e)?e.length>Wf&&(gh(e,Wf),t.push([`Trimming too long wheel of fortune preset list: ${e.length}/${Wf}`])):(e=[],t.push(["Re-initializing invalid wheel of fortune preset list: "+typeof e]));const n=Object.seal(Array(Wf).fill(null));return e.forEach(((e,r)=>{if(null===e)return;if(Array.isArray(e)||"object"!=typeof e||"string"!=typeof e.ids)return void t.push([`Failed to load corrupted custom wheel of fortune preset ${r}`]);const{name:i,ids:o}=e;n[r]={name:"string"==typeof i&&i.length>0&&i.length<=20?i:`Preset ${r}`,ids:o}})),n}function yf(e,t,n=!0){let r=null;try{if(e&&"string"==typeof e){let t=LZString.decompressFromUTF16(e);t||(t=LZString.decompressFromBase64(e)),r=JSON.parse(t||"null")}}catch(e){n&&oh.warn(`failed to load corrupted MBS ${t}`,e)}return null!==r&&"object"==typeof r?r:{}}function Sf(e=null,n=!0){if(void 0===Player.OnlineSharedSettings)throw new Error('"Player.OnlineSharedSettings" still uninitialized');e??={...yf(Player.OnlineSettings?.MBS,"OnlineSettings"),...yf(Player.ExtensionSettings.MBS,"ExtensionSettings"),...yf(Player.OnlineSharedSettings.MBS,"OnlineSharedSettings")};const r=void 0!==e.Version&&function(e){if(void 0===e)return oh.log("Detecting first-time MBS initialization"),!1;const n=wh.fromVersion(t);let r;try{r=wh.fromVersion(e)}catch(t){return oh.warn(`Failed to parse previous MBS version: ${e}`),!1}return n.greater(r)?(oh.log(`Upgrading MBS from ${e} to ${t}`),!0):!!n.lesser(r)&&(oh.warn(`Downgrading MBS from ${e} to ${t}`),!1)}(Player.OnlineSharedSettings.MBSVersion??Player.OnlineSettings?.MBSVersion);let i=!1;void 0!==Player.OnlineSettings?.MBSVersion&&(delete Player.OnlineSettings.MBSVersion,i=!0),Player.OnlineSettings?.MBS&&(delete Player.OnlineSettings.MBS,i=!0),i&&ServerAccountUpdate.QueueData({OnlineSettings:Player.OnlineSettings});const o=function(e){const n={AlternativeGarbling:[],CraftingCache:[],DropTrailing:[],FortuneWheelCommands:[],FortuneWheelItemSets:[],FortuneWheelPresets:[],LockedWhenRestrained:[],GarblePerSyllable:[],RollWhenRestrained:[],ShowChangelog:[],Version:[]},r={CraftingCache:"",AlternativeGarbling:!1,DropTrailing:!1,GarblePerSyllable:!1,LockedWhenRestrained:!1,RollWhenRestrained:!0,ShowChangelog:!0};for(const[t,i]of th(r))void 0!==e[t]&&(typeof e[t]!=typeof i?n[t]=[[`Invalid type, expected a ${typeof i}: ${typeof n[t]}`]]:r[t]=e[t]);const i={AlternativeGarbling:r.AlternativeGarbling,CraftingCache:r.CraftingCache,DropTrailing:r.DropTrailing,FortuneWheelCommands:vf(ig.fromObject,e.FortuneWheelCommands??[],n.FortuneWheelCommands),FortuneWheelItemSets:vf(rg.fromObject,e.FortuneWheelSets??e.FortuneWheelItemSets??[],n.FortuneWheelItemSets),FortuneWheelPresets:bf(e.FortuneWheelPresets??[],n.FortuneWheelPresets),LockedWhenRestrained:r.LockedWhenRestrained,GarblePerSyllable:r.GarblePerSyllable,RollWhenRestrained:r.RollWhenRestrained,ShowChangelog:r.ShowChangelog,Version:t};return i.AlternativeGarbling&&af.init(),{settings:i,ok:0===Fc(Object.values(n).map((e=>e.length))),err:nh(th(n).filter((([e,t])=>t.length>0)))}}(e);if((o.ok||n)&&(Player.MBSSettings=o.settings,Player.MBSSettings.ShowChangelog&&r)){const e=wh.fromVersion(t);Ph(`v${e.major}${e.minor}${e.micro}`)}return o.ok||(oh.warn("Encountered and fixed one or more errors while parsing MBS settings",o.err),n&&function(e){const t=nh(th(e).map((([e,t])=>[e,t.map((e=>e.join(", ")))]))),n=`Encountered one or more errors while parsing MBS settings:\n\n${JSON.stringify(t,void 0,4)}`;"number"==typeof Player.MemberNumber&&ServerAccountBeep({MemberNumber:Player.MemberNumber,MemberName:"MBS",ChatRoomName:"MBS Settings Error",Private:!0,Message:n,ChatRoomSpace:"",BeepType:""})}(o.err)),Player.OnlineSharedSettings.WheelFortune??=WheelFortuneDefault,o}function Bf(e,n=!0){if(void 0===Player.OnlineSharedSettings)throw new Error("Player.OnlineSharedSettings is still uninitialized");const r={};if(e.includes(Rf.SETTINGS)){const e=tu(Player.MBSSettings,"FortuneWheelItemSets","FortuneWheelCommands");Player.ExtensionSettings.MBS=LZString.compressToUTF16(JSON.stringify(e)),n&&(r["ExtensionSettings.MBS"]=Player.ExtensionSettings.MBS)}if(e.includes(Rf.SHARED)){const e=Object.freeze({FortuneWheelItemSets:Player.MBSSettings.FortuneWheelItemSets,FortuneWheelCommands:Player.MBSSettings.FortuneWheelCommands});Player.OnlineSharedSettings.MBS=LZString.compressToUTF16(JSON.stringify(e)),Player.OnlineSharedSettings.MBSVersion=t,n&&(Player.OnlineSharedSettings.WheelFortune=Uf(Player.OnlineSharedSettings.WheelFortune),r.OnlineSharedSettings=Player.OnlineSharedSettings)}n&&ServerAccountUpdate.QueueData(r)}function wf(){const e=["ExtensionSettings","OnlineSharedSettings"];for(const t of e){const e=gf(Player[t]),n=Object.fromEntries(Object.entries(e).map((([e,t])=>[e,mf(t)]))),r=mf(Fc(Object.values(e),(e=>Number.isNaN(e)?0:e)));r>=.9*ff/1e3?oh.warn(`Total ${t} data usage at ${r} / ${ff/1e3} KB`,n):oh.log(`Total ${t} data usage at ${r} / ${ff/1e3} KB`,n)}}const Cf=Object.freeze({OK:0,ERROR:1,EMPTY_SETTINGS:2,WARN:3});ah(Jf).then((()=>{Sf(),Bf([Rf.SETTINGS,Rf.SHARED],!1),oh.log("Initializing settings module"),wf()}));var kf,Pf,xf,Mf,If,Ff,Ef,_f,Of;class Af extends Uh{constructor(){super(null,"Character","Preference",{Run:PreferenceRun,Click:PreferenceClick,Exit:PreferenceExit,Load:()=>{CommonSetScreen("Character","Preference"),PreferencePageCurrent=1;const e=PreferenceSubscreens.find((e=>"Extensions"===e.name));e&&(e.load?.(),PreferenceSubscreen=e)}})}}Af.screen="Preference";const $f="mbs-preference",Hf=Object.freeze({root:$f,styles:`${$f}-style`,header:`${$f}-header`,exit:`${$f}-exit`,exitButton:`${$f}-exit-button`,exitTooltip:`${$f}-exit-tooltip`,settingsGrid:`${$f}-settings`,settingsPair:`${$f}-settings-pair`,itemsButton:`${$f}-items-button`,itemsHeader:`${$f}-items-header`,wheelButton:`${$f}-wheel-button`,wheelHeader:`${$f}-wheel-header`,rollCheckbox:`${$f}-roll-checkbox`,rollHeader:`${$f}-roll-header`,lockCheckbox:`${$f}-lock-checkbox`,lockHeader:`${$f}-lock-header`,gagCheckbox:`${$f}-gag-checkbox`,gagHeader:`${$f}-gag-header`,miscGrid:`${$f}-misc`,reset:`${$f}-reset`,resetButton:`${$f}-reset-button`,resetTooltip:`${$f}-reset-tooltip`,resetScreen:`${$f}-reset-screen`,resetBackground:`${$f}-reset-background`,resetGrid:`${$f}-reset-grid`,resetAccept:`${$f}-reset-accept`,resetCancel:`${$f}-reset-cancel`,import:`${$f}-import`,importButton:`${$f}-import-button`,importTooltip:`${$f}-import-tooltip`,export:`${$f}-export`,exportButton:`${$f}-export-button`,exportTooltip:`${$f}-export-tooltip`,changelog:`${$f}-changelog`,changelogButton:`${$f}-changelog-button`,changelogTooltip:`${$f}-changelog-tooltip`});class Lf extends Vh{constructor(e,n=null){super(e,Lf.screenParamsDefault,n),kf.add(this),document.body.appendChild(p("div",{id:Hf.root,class:"mbs-screen",children:[h("style",{id:Hf.styles,children:'#mbs-preference {\n  grid-template: "header header exit" min(9dvh, 4.5dvw) "settings misc misc" auto/auto min(29dvh, 14.5dvw) min(9dvh, 4.5dvw);\n}\n\n#mbs-preference-header {\n  grid-area: header;\n}\n\n#mbs-preference-exit {\n  grid-area: exit;\n}\n\n.mbs-preference-settings-pair {\n  grid-column-gap: min(3dvh, 1.5dvw);\n  align-items: center;\n  display: grid;\n  grid-template-columns: min(9dvh, 4.5dvw) auto;\n  padding-right: min(6dvh, 3dvw);\n  text-align: justify;\n}\n.mbs-preference-settings-pair button {\n  height: min(9dvh, 4.5dvw);\n  width: min(9dvh, 4.5dvw);\n}\n.mbs-preference-settings-pair > p {\n  margin: 0;\n}\n\n#mbs-preference-settings {\n  display: grid;\n  grid-area: settings;\n  height: 100%;\n  overflow: hidden scroll;\n  grid-gap: min(2dvh, 1dvw);\n}\n\n#mbs-preference-misc {\n  align-self: self-end;\n  display: grid;\n  grid-gap: min(2dvh, 1dvw);\n  grid-area: misc;\n  grid-template: "reset reset" min(9dvh, 4.5dvw) "import export" min(9dvh, 4.5dvw) "changelog changelog" min(9dvh, 4.5dvw)/auto auto;\n}\n#mbs-preference-misc button {\n  background-origin: padding-box;\n  background-position: left;\n  background-size: min(7dvh, 3.5dvw) min(7dvh, 3.5dvw);\n}\n\n#mbs-preference-reset {\n  grid-area: reset;\n  grid-template-columns: min(40dvh, 20dvw);\n}\n#mbs-preference-reset button:not(:hover) {\n  background-color: pink;\n}\n\n#mbs-preference-import {\n  grid-area: import;\n  grid-template-columns: min(19dvh, 9.5dvw);\n}\n\n#mbs-preference-export {\n  grid-area: export;\n  grid-template-columns: min(19dvh, 9.5dvw);\n}\n\n#mbs-preference-changelog {\n  grid-area: changelog;\n  grid-template-columns: min(40dvh, 20dvw);\n}\n\n#mbs-preference-reset-screen {\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 2;\n}\n\n#mbs-preference-reset-background {\n  background: url("https://bananarama92.github.io/MBS/main/images/SheetMBS.png") var(--mbs-background-color);\n  background-blend-mode: multiply;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: contain;\n  box-sizing: border-box;\n  height: 80%;\n  justify-self: center;\n  mask-image: url("https://bananarama92.github.io/MBS/main/images/SheetMBS.png");\n  mask-position: center;\n  mask-repeat: no-repeat;\n  mask-size: contain;\n  padding: min(6dvh, 3dvw);\n  padding-top: min(3dvh, 1.5dvw);\n  position: relative;\n  width: 80%;\n  word-break: break-word;\n}\n\n#mbs-preference-reset-grid {\n  display: grid;\n  grid-template-columns: auto auto;\n  justify-items: center;\n  padding-top: min(10dvh, 5dvw);\n}\n#mbs-preference-reset-grid .mbs-button {\n  height: min(9dvh, 4.5dvw);\n  width: min(27dvh, 13.5dvw);\n}'.toString()}),h("h1",{id:Hf.header,children:`Maid's Bondage Scripts ${t}`}),p("div",{id:Hf.exit,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:Hf.exitButton,onClick:this.exit.bind(this),style:{backgroundImage:"url('./Icons/Exit.png')"}}),h("span",{class:"mbs-button-tooltip",style:{justifySelf:"right"},children:"Exit"})]}),p("div",{id:Hf.settingsGrid,children:[h("h2",{children:"Wheel of fortune settings"}),p("div",{class:"mbs-preference-settings-pair",children:[h("button",{class:"mbs-button",style:{backgroundImage:"url('./Icons/Crafting.png')"},onClick:y(this,kf,"m",_f).bind(this)}),"Configure the wheel of fortune"]}),p("div",{class:"mbs-preference-settings-pair",children:[h("input",{type:"checkbox","data-field":"RollWhenRestrained",onClick:y(this,kf,"m",Pf).bind(this)}),"Allow wheel rolling while restrained"]}),p("div",{class:"mbs-preference-settings-pair",children:[h("input",{type:"checkbox","data-field":"LockedWhenRestrained",onClick:y(this,kf,"m",Pf).bind(this)}),"Lock MBS settings while restrained"]}),h("h2",{children:"Garbling settings"}),p("div",{class:"mbs-preference-settings-pair",children:[h("input",{type:"checkbox","data-field":"AlternativeGarbling",onClick:y(this,kf,"m",Pf).bind(this)}),p("span",{children:[p("p",{children:[h("strong",{children:"Experimental"}),": whether gags will use an alternative form of, more phonetically acurate, speech garbling based on ",h("a",{href:"https://github.com/CordeliaMist/Dalamud-GagSpeak",target:"_blank",children:"Dalamud-GagSpeak"})]}),p("p",{children:["Incompatible-ish with ",h("a",{href:"https://wce-docs.vercel.app/docs/intro",target:"_blank",children:"WCE/FBC"}),"'s garbling anti-cheat as of the moment"]})]})]}),p("div",{class:"mbs-preference-settings-pair",children:[h("input",{type:"checkbox","data-field":"DropTrailing",onClick:y(this,kf,"m",Pf).bind(this)}),"Whether to heaviest gags will drop up to half of all trailing characters when alternate garbling is enabled"]}),p("div",{class:"mbs-preference-settings-pair",children:[h("input",{type:"checkbox","data-field":"GarblePerSyllable",onClick:y(this,kf,"m",Pf).bind(this)}),"Interpolate between the three alternative garbling levels, allowing for a more gradual increase in garbling strength (on a syllable by syllable basis) as the gag level increases"]}),h("h2",{children:"Misc settings"}),p("div",{class:"mbs-preference-settings-pair",children:[h("input",{type:"checkbox","data-field":"ShowChangelog",onClick:y(this,kf,"m",Pf).bind(this)}),"Show the MBS changelog in chat whenever a new MBS version is released"]}),h("h2",{children:"Crafting settings"}),p("div",{class:"mbs-preference-settings-pair",children:[h("input",{type:"checkbox",disabled:!0}),p("span",{style:{color:"gray"},children:['Allow crafted item descriptions to use up to 398 "simple" characters (',h("i",{children:"e.g."})," no smilies or other non-ASCII characters).",h("br",{}),"Note: Available in unmodded Bondage Club as of R109; see the crafting screen"]})]})]}),p("div",{id:Hf.miscGrid,children:[p("div",{id:Hf.reset,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:Hf.resetButton,style:{backgroundImage:"url('./Icons/ServiceBell.png')"},onClick:y(this,kf,"m",If).bind(this),children:"Reset MBS"}),h("span",{class:"mbs-button-tooltip",children:"Clear all MBS data"})]}),p("div",{id:Hf.import,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:Hf.importButton,onClick:y(this,kf,"m",xf).bind(this),children:"Import"}),h("span",{class:"mbs-button-tooltip",children:"Import MBS settings"})]}),p("div",{id:Hf.export,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:Hf.exportButton,onClick:y(this,kf,"m",Mf).bind(this),children:"Export"}),h("span",{class:"mbs-button-tooltip",children:" Export MBS settings"})]}),p("div",{id:Hf.changelog,class:"mbs-button-div",children:[h("button",{class:"mbs-button",id:Hf.changelogButton,style:{backgroundImage:"url('./Icons/Changelog.png')"},onClick:()=>open(kh(),"_blank"),children:"Latest Changes"}),h("span",{class:"mbs-button-tooltip",children:"Open the MBS changelog"})]})]})]})),document.body.appendChild(h("div",{id:Hf.resetScreen,class:"mbs-screen","screen-generated":Lf.screen,children:p("div",{id:Hf.resetBackground,children:[h("h1",{children:"MBS data reset"}),h("p",{children:h("strong",{children:"- Warning -"})}),p("p",{children:["If you confirm, ",h("i",{children:"all"})," MBS data (including settings, overrides, and current states) will be permanently reset!"]}),h("p",{children:"You will be able to continue using MBS, but all of your configuration will be reset to default!"}),h("p",{children:h("strong",{children:"This action cannot be undone!"})}),p("div",{id:Hf.resetGrid,children:[h("button",{class:"mbs-button",onClick:y(this,kf,"m",Ef).bind(this),disabled:!0,id:Hf.resetAccept,children:"Confirm (10)"}),h("button",{class:"mbs-button",onClick:this.exit.bind(this),id:Hf.resetCancel,children:"Cancel"})]})]})}))}load(){y(this,kf,"m",Of).call(this),super.load()}draw(){DrawCharacter(Player,50,50,.9)}exit(){const e=document.getElementById(Hf.resetScreen);"visible"===e.style.visibility?e.style.visibility="hidden":(super.exit(),this.exitScreens(!1))}}let jf;var Tf,Df,Nf;kf=new WeakSet,Pf=function(e){const t=e.target.dataset.field;if(t in Player.MBSSettings)switch(Player.MBSSettings[t]=!Player.MBSSettings[t],Bf([Rf.SETTINGS]),t){case"AlternativeGarbling":Player.MBSSettings[t]&&af.init();break;case"LockedWhenRestrained":y(this,kf,"m",Of).call(this)}},xf=function(){const e=prompt("Please paste MBS settings.\nImporting settings will overwrite existing settings. Are you sure?");if(!e)return;const t=function(e){oh.log("Importing new MBS settings");let t=null,n=null;try{t=JSON.parse(LZString.decompressFromBase64(e.trim())||"{}")}catch(e){n=e}if(n||null===t||"object"!=typeof t||Qd(t))return oh.error("Aborting, failed to parse corrupted MBS settings",n),{status:Cf.ERROR,ok:!1};if(0===Object.keys(t).length)return oh.error("Aborting, detected empty or corrupted MBS settings"),{status:Cf.EMPTY_SETTINGS,ok:!1};const r=Sf(t,!1);return r.ok?(Bf([Rf.SETTINGS,Rf.SHARED],!0),wf(),{status:Cf.OK,...r}):{status:Cf.WARN,...r}}(e);switch(t.status){case Cf.OK:return oh.log("Settings successfully updated"),alert("Settings successfully updated!");case Cf.ERROR:return alert("ERROR: Detected corrupted MBS settings.\nNo changes were made.");case Cf.EMPTY_SETTINGS:return alert("ERROR: Detected empty or corrupted MBS settings.\nNo changes were made.");case Cf.WARN:return void(confirm("WARNING: MBS successfully parsed the settings but found one or more invalid fields; please check the browser console for more details.\nAre you sure you want to continue?")&&(Player.MBSSettings=t.settings,Bf([Rf.SETTINGS,Rf.SHARED],!0),wf(),oh.log("Settings successfully updated"),alert("Settings successfully updated!")));default:throw new Error(`Unknown status type: ${t.status}`)}},Mf=function(){const e=LZString.compressToBase64(JSON.stringify(Player.MBSSettings));navigator.clipboard.writeText(e),alert("MBS settings copied to clipboard.")},If=function(){const e=document.getElementById(Hf.resetScreen),t=document.getElementById(Hf.resetAccept);e.style.visibility="visible",t.disabled=!0,y(this,kf,"m",Ff).call(this,t)},Ff=async function(e){let t=9;for(;t>=0;)await new Promise((e=>setTimeout(e,1e3))),e.innerText=`Confirm (${t})`,t--;e.innerText="Confirm",e.disabled=!1},Ef=function(){delete Player.ExtensionSettings.MBS,void 0!==Player.OnlineSharedSettings&&(delete Player.OnlineSharedSettings.MBSVersion,delete Player.OnlineSharedSettings.MBS,Player.OnlineSharedSettings.WheelFortune=Vp),WheelFortuneOption=WheelFortuneOption.filter((e=>!0!==e.Custom)),WheelFortuneDefault=Vp,Player.Crafting=Player.Crafting?.slice(0,Zp),Player.MBSSettings=Object.seal({AlternativeGarbling:!1,CraftingCache:"",DropTrailing:!1,FortuneWheelCommands:Object.seal(Array(Gf).fill(null)),FortuneWheelItemSets:Object.seal(Array(Gf).fill(null)),FortuneWheelPresets:Object.seal(Array(Wf).fill(null)),GarblePerSyllable:!1,LockedWhenRestrained:!1,RollWhenRestrained:!0,ShowChangelog:!0,Version:t}),ServerAccountUpdate.QueueData({ExtensionSettings:Player.ExtensionSettings,OnlineSharedSettings:Player.OnlineSharedSettings},!0),oh.log("Settings successfully reset"),wf(),this.exit()},_f=function(){const e={FortuneWheelItemSets:hp(Player,"FortuneWheelItemSets","item sets"),FortuneWheelCommands:hp(Player,"FortuneWheelCommands","commands")},[t,n,r,i]=this.screenParams[this.ids.root].shape,o={[mp.ids.root]:{shape:[95,n,r+(t-95),i]}};this.loadChild(mp,e,Player,o)},Of=function(){const e=Player.IsRestrained()&&Player.MBSSettings.LockedWhenRestrained,t=document.getElementById(Hf.settingsGrid);for(const n of t.children)for(const t of n.children){const n=t.dataset?.field;n&&n in Player.MBSSettings&&(t.checked=Player.MBSSettings[n],t.disabled=e)}},Lf.screen="MBS_PreferenceScreen",Lf.ids=Hf,Lf.screenParamsDefault={[$f]:Object.freeze({shape:[525,75,1380,850],visibility:"visible"}),[Hf.resetScreen]:Object.freeze({shape:[0,0,2e3,1e3],visibility:"hidden"})},ah(Kf).then((()=>{jf=new Af,PreferenceRegisterExtensionSetting({Identifier:"MBS",load(){PreferenceExit(),jf.loadChild(Lf)},run(){},click(){},exit(){},ButtonText:"MBS Settings",Image:"Icons/Maid.png"})}));const Gf=32,Wf=8,zf=Object.freeze(["Blue","Gold","Gray","Green","Orange","Purple","Red","Yellow"]);function qf(e){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "character" type: '+typeof e);if(!e.IsSimple()&&!e.IsPlayer())throw new Error("Expected a simple or player character")}function Vf(e){if(!(e.OnlineSharedSettings?.BlockBodyCosplay??!0))return!0;const t=vh.getRuleState("alt_allow_changing_appearance");return!(null===t||!e.IsPlayer())&&(t.inEffect&&t.isEnforced&&t.customData.minimumRole>3)}function Uf(e){if("string"!=typeof e)throw new TypeError('Invalid "IDs" type: '+typeof e);let t="";for(const n of WheelFortuneOption)e.includes(n.ID)&&(t+=n.ID);return t}function Kf(e=!0){return"object"==typeof ServerSocket&&null!==ServerSocket&&(!e||GameVersionFormat.test(GameVersion))}function Jf(){return Kf()&&void 0!==Player.OnlineSharedSettings}function Yf(){return Jf()&&void 0!==Player.MBSSettings}const Zf=Object.freeze({"PSO Bondage":0,Mummification:1,"Bondage Maid":2,Petrification:3});class Xf{constructor(e,t){this.name=null,this.mbsList=e,this.weight=Number.isInteger(t)?vi(t,1,9):1}reset(){this.name=null,this.weight=1}isValid(e=null){return!!this.name&&this.mbsList.every(((t,n)=>n===e||t?.name!==this.name))}toString(){return bh(typeof this,this.toJSON())}}class Qf extends Xf{get stripLevel(){return this.stripIter.value}set stripLevel(e){const t=this.stripIter.list.indexOf(e);this.stripIter.setPosition(t)}get equipLevel(){return this.equipIter.value}set equipLevel(e){const t=this.equipIter.list.indexOf(e);this.equipIter.setPosition(t)}constructor(e,t){super(e,t),this.itemList=null,this.flags=Object.freeze(vp.map((e=>Object.seal({...e})))),this.outfitCache=null,this.stripIter=new yh([Eh.NONE,Eh.CLOTHES,Eh.UNDERWEAR,Eh.COSPLAY],Eh.UNDERWEAR),this.equipIter=new yh([Eh.NONE,Eh.CLOTHES,Eh.UNDERWEAR,Eh.COSPLAY],Eh.UNDERWEAR)}reset(){super.reset(),this.itemList=null,this.outfitCache=null,this.stripLevel=Eh.UNDERWEAR,this.equipLevel=Eh.UNDERWEAR,vp.forEach(((e,t)=>Object.assign(this.flags[t],e)))}readSettings(e){if(!(e instanceof rg))throw new TypeError('Invalid "ItemSet" type: '+typeof e);this.name=e.name,this.itemList=e.itemList,this.stripLevel=e.stripLevel,this.equipLevel=e.equipLevel,this.outfitCache=null,this.weight=e.weight,e.flags.forEach(((e,t)=>Object.assign(this.flags[t],e)))}writeSettings(e=null){if(null===this.name||null===this.itemList)throw new Error('Cannot create an ItemSet while "name" or "itemList" is null');return new rg(this.name,this.itemList,this.mbsList,this.stripLevel,this.equipLevel,this.flags,!0,e,this.weight)}loadFromBase64(){if(null===this.outfitCache)return!1;let e,t;try{e=JSON.parse(LZString.decompressFromBase64(this.outfitCache.trim())),t=function(e){if(!Qd(e)){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "items" type: '+typeof e);e=[e]}const t=[],n=new Map,r=new Set;return e.forEach(((e,i)=>{let o=null;try{o=AssetGet("Female3DCG",e.Group,e.Name);const n=Wh(o,e);!r.has(e.Group)&&null!=o&&(o.Group.IsItem()||o.Group.IsAppearance()&&o.Group.AllowNone)&&(r.add(e.Group),t.push(n))}catch(e){let t=`${o?.Group?.Name}${o?.Name}`;t.includes("undefined")&&(t=`Item ${i}`),n.set(t,e)}})),0!==n.size&&oh.log(`Failed to parse ${n.size} of the provided items`,n),t}(e)}catch(e){return oh.warn("Failed to parse outfit code:",e),!1}return 0!==t.length&&(this.itemList=Object.freeze(function(e,t=_h){const n=$h(e,t);return Sc(e,(e=>n.get(e.Group)?.priority??1/0))}(t)),!0)}isValid(e=null){return super.isValid(e)&&null!==this.itemList&&this.flags.some((e=>e.enabled))}toJSON(){return{name:this.name,itemList:this.itemList,stripLevel:this.stripLevel,equipLevel:this.equipLevel,flags:this.flags,outfitCache:this.outfitCache}}}class eg extends Xf{readSettings(e){if(!(e instanceof ig))throw new TypeError('Invalid "command" type: '+typeof e);this.name=e.name,this.weight=e.weight}writeSettings(){if(null===this.name)throw new Error('Cannot create a Command while "name" is null');return new ig(this.name,this.mbsList,this.weight)}toJSON(){return{name:this.name}}}class tg{get children(){return y(this,Tf,"f")}get index(){return this.mbsList.findIndex((e=>e===this))}constructor(e,t,n,r){Tf.set(this,null),this.name=e,this.custom=t,this.mbsList=n,this.weight=r}static validate(e){throw new Error("Trying to call an abstract method")}static fromObject(...e){throw new Error("Trying to call an abstract method")}register(){S(this,Tf,this.toOptions(),"f")}unregister(){S(this,Tf,null,"f")}toString(){return bh(typeof this,this.toJSON())}}Tf=new WeakMap;class ng extends tg{constructor(){super(...arguments),Df.add(this)}register(e=!0){super.register();let t=y(this,Df,"m",Nf).call(this);for(const e of this.children){const n=WheelFortuneOption.findIndex((t=>t.ID===e.ID));-1!==n?(WheelFortuneOption[n]=e,e.Default&&!WheelFortuneDefault.includes(e.ID)&&(WheelFortuneDefault+=e.ID)):(WheelFortuneOption.splice(t,0,e),e.Default&&(WheelFortuneDefault+=e.ID)),t+=1}e&&Bf([Rf.SHARED])}unregister(e=!0){const t=this.children?.map((e=>e.ID))??[];super.unregister(),WheelFortuneOption=WheelFortuneOption.filter((e=>!t.includes(e.ID))),WheelFortuneDefault=Array.from(WheelFortuneDefault).filter((e=>!t.includes(e))).join(""),e&&Bf([Rf.SHARED])}}Df=new WeakSet,Nf=function(){if(this.children?.length){const e=this.children[0].ID,t=WheelFortuneOption.findIndex((t=>t.ID>=e));return-1===t?WheelFortuneOption.length:t}return WheelFortuneOption.length};class rg extends ng{constructor(e,t,n,r,i,o,a,s,l){const u=rg.validate({name:e,itemList:t,mbsList:n,stripLevel:r,equipLevel:i,flags:o,custom:a,preRunCallback:s,weight:l});super(u.name,u.custom,u.mbsList,u.weight),this.itemList=u.itemList,this.stripLevel=u.stripLevel,this.equipLevel=u.equipLevel,this.flags=u.flags,this.preRunCallback=u.preRunCallback}static validate(e){if("string"!=typeof e.name)throw new TypeError('Invalid "name" type: '+typeof e.name);if(!Qd(e.itemList))throw new TypeError('Invalid "itemList" type: '+typeof e.itemList);{const t=[],n=[];for(let r of e.itemList){const e=AssetGet("Female3DCG",r.Group,r.Name);null!=e?(e.Group.IsItem()||e.Group.IsAppearance()&&e.Group.AllowNone)&&(r.TypeRecord||void 0===r.Type||(r=Object.freeze({...tu(r,"Type"),TypeRecord:ExtendedItemTypeToRecord(e,r.Type)})),t.push(r)):n.push(`${r.Group}:${r.Name}`)}e.itemList=Object.freeze(t),0!==n.length&&oh.warn(`Found ${n.length} items in wheel of fortune item set "${this.name}": ${n}`)}if(!Qd(e.mbsList))throw new TypeError('Invalid "mbsList" type: '+typeof e.mbsList);if(rh(Object.values(Eh),e.stripLevel)||(e.stripLevel=Eh.UNDERWEAR),rh(Object.values(Eh),e.equipLevel)||(e.stripLevel=Eh.UNDERWEAR),Qd(e.flags)){let t;if(e.flags.every((e=>"string"==typeof e))){t=function(e){return vp.map(((t,n)=>{const r={...t};return r.enabled=e.includes(Rp[n]),r}))}(e.flags)}else t=function(e){return vp.map(((t,n)=>{const r=e[n];if(null===r||"object"!=typeof r||r.type!==t.type)return{...t};const i="boolean"==typeof r.enabled?r.enabled:t.enabled;switch(r.type){case"TimerPasswordPadlock":return Number.isInteger(r.time)&&r.time>=1&&r.time<=86400?{type:r.type,description:t.description,time:r.time,enabled:i}:{...t};case"ExclusivePadlock":case"HighSecurityPadlock":case null:return{type:r.type,description:t.description,enabled:i};default:return{...t}}}))}(e.flags);t.every((e=>!e.enabled))&&(t[0].enabled=!0),e.flags=Object.freeze(t.map((e=>Object.freeze(e))))}else e.flags=vp;return"boolean"!=typeof e.custom&&(e.custom=!0),null!==e.preRunCallback&&"function"!=typeof e.preRunCallback&&(e.preRunCallback=null),Number.isInteger(e.weight)?e.weight=vi(e.weight,1,9):e.weight=1,e}static fromObject(e,t){const n=[t.name,t.itemList,e,t.stripLevel,t.equipLevel,t.flags,t.custom,t.preRunCallback,t.weight];return new rg(...n)}scriptFactory(e=null){const t=this.itemList.map((({Name:e,Group:t})=>AssetGet(Player.AssetFamily,t,e)));return n=>{n=n??Player;const r=Oh(this.equipLevel,n),i=this.itemList.filter(((e,n)=>{const i=t[n];return null!=i&&("Appearance"!==i.Group.Category||r(i))}));jh(this.name,i,this.stripLevel,e,this.preRunCallback,n??Player)}}getIDs(){const e=[];for(const[t,n]of this.flags.entries())n.enabled&&e.push(t);let t;if(this.custom){if(t=256*(2+Math.floor(this.index/16))+16*this.index,t<0)throw new Error(`Item set "${this.name}" absent from currently selected fortune wheel sets`)}else if(t=256+16*Zf[this.name],Number.isNaN(t))throw new Error(`Unknown default item set "${this.name}"`);return Sh(t,e)}toOptions(){const e=this.flags.filter((e=>e.enabled)),t=this.getIDs();return e.map(((e,n)=>{const r=null===e.type?this.name:`${this.name}: ${wp(e)}`;let i=!0;switch(e.type){case"HighSecurityPadlock":case null:i=!1;break;case"TimerPasswordPadlock":i=4!==n}return{ID:t[n],Color:pc(zf),Script:this.scriptFactory(((...t)=>function(e,t,n){const r=e.type;switch(r){case"TimerPasswordPadlock":bp(t,e.time,n);break;case"ExclusivePadlock":Sp(t,"ExclusivePadlock",n);break;case"HighSecurityPadlock":InventoryDoesItemAllowLock(t)&&t.Craft&&(t.Craft.Property="Puzzling"),yp(t,n);break;case null:break;default:throw new Error(`Unknown flag type: ${r}`,e)}}(e,...t))),Description:r,Default:i,Custom:this.custom,Parent:this,Flag:e,Weight:this.weight}}))}toJSON(){return{name:this.name,itemList:this.itemList,stripLevel:this.stripLevel,equipLevel:this.equipLevel,flags:this.flags,custom:this.custom,preRunCallback:this.preRunCallback,weight:this.weight}}}class ig extends ng{constructor(e,t,n){const r=ig.validate({name:e,mbsList:t,weight:n});super(r.name,!0,r.mbsList,r.weight)}static validate(e){if("string"!=typeof e.name)throw new TypeError('Invalid "name" type: '+typeof e.name);if(!Array.isArray(e.mbsList))throw new TypeError('Invalid "mbsList" type: '+typeof e.mbsList);return Number.isInteger(e.weight)?e.weight=vi(e.weight,1,9):e.weight=1,e}static fromObject(e,t){const n=[t.name,e,t.weight];return new ig(...n)}toOptions(){const[e]=this.getIDs();return[{ID:e,Color:pc(zf),Description:this.name,Default:!0,Custom:this.custom,Parent:this,Script:void 0,Flag:void 0,Weight:this.weight}]}getIDs(){const e=256*(3+Math.floor(this.index/16))+this.index;return[String.fromCharCode(e)]}toJSON(){return{name:this.name,weight:this.weight}}}let og=null;function ag(){return null===og&&(og=CharacterLoadSimple("MBSAPI")),og}var sg=Object.freeze({__proto__:null,getAll:function(){if(!Yf())return oh.error("MBS not fully loaded yet"),{};const e=Player.MBSSettings.FortuneWheelItemSets,t={};for(const[n,r]of e.entries())null!==r&&(t[r.name]={name:r.name,index:n,items:zh(r.itemList,ag())});return t},getByIndex:function(e){if("number"!=typeof e)throw new TypeError('Invalid "index" type: '+typeof e);if(!Yf())return void oh.error("MBS not fully loaded yet");const t=Player.MBSSettings.FortuneWheelItemSets[e];return null==t?void 0:{name:t.name,index:e,items:zh(t.itemList,ag())}},getByName:function(e){if("string"!=typeof e)throw new TypeError('Invalid "name" type: '+typeof e);if(!Yf())return void oh.error("MBS not fully loaded yet");let t=-1;const n=Player.MBSSettings.FortuneWheelItemSets.find(((n,r)=>{const i=n?.name===e;return i&&(t=r),i}));return null==n?void 0:{name:e,index:t,items:zh(n.itemList,ag())}},getIndices:function(){return Yf()?Player.MBSSettings.FortuneWheelItemSets.filter((e=>null!==e)).map(((e,t)=>t)):(oh.error("MBS not fully loaded yet"),[])},getNames:function(){return Yf()?Player.MBSSettings.FortuneWheelItemSets.filter((e=>null!==e)).map((e=>e.name)):(oh.error("MBS not fully loaded yet"),[])}});const lg=Object.freeze({backgroundColor:"--mbs-background-color",buttonColor:"--mbs-button-color",buttonHoverColor:"--mbs-hover-color",tooltipColor:"--mbs-tooltip-color",borderColor:"--mbs-border-color",textColor:"--mbs-text-color"}),ug=Object.freeze({backgroundColor:"white",buttonColor:"white",buttonHoverColor:"cyan",tooltipColor:"lightyellow",borderColor:"black",textColor:"black"});var cg=Object.freeze({__proto__:null,DEFAULT_STYLE:ug,getStyle:function(){const e=document.querySelector(":root");return e?nh(th(lg).map((([t,n])=>[t,e.style.getPropertyValue(n)||ug[t]]))):(oh.error(":root selector missing in document"),{...ug})},setStyle:function(e){if("object"!=typeof e)throw new TypeError(`Invalid style type: "${typeof e}"`);if(null===e)throw new Error("Invalid style value: null");const t=document.querySelector(":root");if(t)for(const[n,r]of th(lg)){const i=e[n];void 0!==i&&t.style.setProperty(r,i)}else oh.error(":root selector missing in document")}});const dg=Object.freeze({major:1,minor:4}),hg=function(){return Yf()?JSON.stringify({log:oh,settings:Player.MBSSettings},void 0,4):JSON.stringify({log:oh,settings:"ERROR: MBS not fully loaded yet"},void 0,4)};ah(Kf).then((()=>{"undefined"!=typeof FUSAM&&"function"==typeof FUSAM.registerDebugMethod&&FUSAM.registerDebugMethod("mbs",hg)}));const pg="raises",fg="passes";function gg(e,t,n){if(!t)throw void 0===n?new Error(`${e}`):new Error(`${e}: ${n}`)}function mg(e,t,n){try{t()}catch(t){const r=t;if(r?.message!==n)throw new Error(`${e}: Invalid error message\nExpected error: "${n}"\nObserved error: "${r?.message}"`);return}throw new Error(`${e}: Failed to raise an error`)}function Rg(e,t){try{return t()}catch(t){throw new Error(`${e}: Unexpected error message: ${t}`,{cause:t})}}function vg(e,t,n,r){if(r=r??Bg,!wl(t,n))throw new Error(`${e}: Passed objects not equal:\nObserved: ${r(t)}\nExpected: ${r(n)}`)}function bg(e,t,n){if(typeof t!==n)throw new Error(`${e}: Invalid object type "${typeof t}", expected "${n}"`)}function yg(e,t,n){if(t.length!==n)throw new Error(`${e}: Invalid object length ${t.length}, expected ${n}`)}function Sg(e,t){switch(typeof t){case"undefined":return"__UNDEFINED__";case"function":return"__FUNCTION__";case"symbol":return"__SYMBOL__";default:return t}}function Bg(e){return JSON.stringify(e,Sg,1)}var wg=Object.freeze({__proto__:null,test_LoopIterator:function(){const e="test_LoopIterator";[{args:[void 0],excMessage:'Invalid "iterable" type: undefined'},{args:[[]],excMessage:'Passed "iterable" must contain at least one element'},{args:[[1],.5],excMessage:'"index" must be an integer: 0.5'},{args:[[0,1],3],excMessage:'"index" must fall in the [0, 1] interval: 3'}].forEach((({args:t,excMessage:n},r)=>{mg(`${e}:constructor:${pg}:${r}`,(()=>new yh(...t)),n)}));const t=new yh([0,1,2,3],0);let n;vg(`${e}:list:${fg}:0`,t.list,[0,1,2,3]),vg(`${e}:index:${fg}:0`,t.index,0),vg(`${e}:value:${fg}:0`,t.index,0),bg(`${e}:[Symbol.iterator]:${fg}:0`,t[Symbol.iterator],"function"),n=Rg(`${e}:next:${fg}:0`,(()=>t.next(!1))),vg(`${e}:next:${fg}:0`,n,1),vg(`${e}:next:${fg}:0`,t.index,0),n=Rg(`${e}:next:${fg}:0`,(()=>t.next())),vg(`${e}:next:${fg}:0`,n,1),vg(`${e}:next:${fg}:0`,t.index,1),mg(`${e}:setPosition:${pg}:0`,(()=>t.setPosition(10)),'"index" must fall in the [0, 3] interval: 10'),Rg(`${e}:setPosition:${fg}:0`,(()=>t.setPosition(0))),vg(`${e}:setPosition:${fg}:0`,t.index,0),n=Rg(`${e}:previous:${fg}:0`,(()=>t.previous(!1))),vg(`${e}:previous:${fg}:0`,n,3),vg(`${e}:previous:${fg}:0`,t.index,0),n=Rg(`${e}:previous:${fg}:0`,(()=>t.previous())),vg(`${e}:previous:${fg}:0`,n,3),vg(`${e}:previous:${fg}:0`,t.index,3),n=Rg(`${e}:toString:${fg}:0`,(()=>t.toString())),bg(`${e}:toString:${fg}:0`,n,"string"),n=Rg(`${e}:toJSON:${fg}:0`,(()=>t.toJSON())),vg(`${e}:toJSON:${fg}:0`,t.toJSON(),{list:[0,1,2,3],index:3})},test_MBS_VERSION:function(){bg(`test_MBS_VERSION:${fg}:0`,t,"string")},test_Version:function(){const e="test_Version";[{args:["bob",0,0,!1],excMessage:'Invalid "major" type: string'},{args:[0,"bob",0,!1],excMessage:'Invalid "minor" type: string'},{args:[0,0,"bob",!1],excMessage:'Invalid "micro" type: string'},{args:[0,0,0,"bob"],excMessage:'Invalid "beta" type: string'}].forEach((({args:t,excMessage:n},r)=>{mg(`${e}:constructor:${pg}:${r}`,(()=>new wh(...t)),n)}));const t=new wh(1,0,5),n=new wh(2,3,1),r=new wh(0,99,5,!0);vg(`${e}:major:${fg}:0`,t.major,1),vg(`${e}:minor:${fg}:0`,t.minor,0),vg(`${e}:micro:${fg}:0`,t.micro,5),vg(`${e}:beta:${fg}:0`,t.beta,!1),gg(`${e}:equal:${fg}:0`,!t.equal(null)),gg(`${e}:equal:${fg}:1`,t.equal(t)),gg(`${e}:equal:${fg}:2`,!t.equal(n)),gg(`${e}:equal:${fg}:3`,!t.equal(r)),gg(`${e}:greater:${fg}:0`,!t.greater(null)),gg(`${e}:greater:${fg}:1`,!t.greater(t)),gg(`${e}:greater:${fg}:2`,!t.greater(n)),gg(`${e}:greater:${fg}:3`,t.greater(r)),gg(`${e}:lesser:${fg}:0`,!t.lesser(null)),gg(`${e}:lesser:${fg}:1`,!t.lesser(t)),gg(`${e}:lesser:${fg}:2`,t.lesser(n)),gg(`${e}:lesser:${fg}:3`,!t.lesser(r)),gg(`${e}:greaterOrEqual:${fg}:0`,!t.greaterOrEqual(null)),gg(`${e}:greaterOrEqual:${fg}:1`,t.greaterOrEqual(t)),gg(`${e}:greaterOrEqual:${fg}:2`,!t.greaterOrEqual(n)),gg(`${e}:greaterOrEqual:${fg}:3`,t.greaterOrEqual(r)),gg(`${e}:lesserOrEqual:${fg}:0`,!t.lesserOrEqual(null)),gg(`${e}:lesserOrEqual:${fg}:1`,t.lesserOrEqual(t)),gg(`${e}:lesserOrEqual:${fg}:2`,t.lesserOrEqual(n)),gg(`${e}:lesserOrEqual:${fg}:3`,!t.lesserOrEqual(r));let i=Rg(`${e}:fromVersion:${fg}:0`,(()=>wh.fromVersion("1.0.5")));vg(`${e}:fromVersion:${fg}:0`,i,t),mg(`${e}:fromVersion:${pg}:0`,(()=>wh.fromVersion(void 0)),'Invalid "version": undefined'),i=Rg(`${e}:fromVersion:${fg}:0`,(()=>wh.fromBCVersion("R109Beta3"))),vg(`${e}:fromVersion:${fg}:0`,i,new wh(109,0,0,!0)),mg(`${e}:fromVersion:${pg}:0`,(()=>wh.fromVersion(void 0)),'Invalid "version": undefined'),i=Rg(`${e}:toString:${fg}:0`,(()=>t.toString())),bg(`${e}:toString:${fg}:0`,i,"string"),i=Rg(`${e}:toJSON:${fg}:0`,(()=>t.toJSON())),vg(`${e}:toJSON:${fg}:0`,i,{major:1,minor:0,micro:5,beta:!1})},test_generateIDs:function(){const e="test_generateIDs";[{args:[0,void 0],excMessage:'Invalid "indices" type: undefined'},{args:[65535,[5]],excMessage:'"stop" must fall in the [65536, 65535] interval: 65541'}].forEach((({args:t,excMessage:n},r)=>{mg(`${e}:${pg}:${r}`,(()=>Sh(...t)),n)})),[{args:[80,[0,4,6]],output:["P","T","V"]},{args:[1024,[0,4,1]],output:["Ѐ","Є","Ё"]},{args:[0,[]],output:[]}].forEach((({args:t,output:n},r)=>{const i=Rg(`${e}:${fg}:${r}`,(()=>Sh(...t)));vg(`${e}:${fg}:${r}`,i,n)}))},test_getRandomPassword:function(){const e="test_getRandomPassword";[{args:[void 0],excMessage:'Invalid "n" type: undefined'}].forEach((({args:t,excMessage:n},r)=>{mg(`${e}:${pg}:${r}`,(()=>mh(...t)),n)})),rc(0,9).forEach((t=>{const n=Rg(`${e}:${fg}:${t}`,(()=>mh(t)));bg(`${e}:${fg}:${t}`,n,"string"),yg(`${e}:${fg}:${t}`,n,t)}))},test_isIterable:function(){const e="test_isIterable";[{args:[null],output:!1},{args:[1],output:!1},{args:[[1]],output:!0},{args:[new Set],output:!0}].forEach((({args:t,output:n},r)=>{const i=Rg(`${e}:${fg}:${r}`,(()=>Bh(...t)));vg(`${e}:${fg}:${r}`,i,n)}))},test_padArray:function(){const e="test_padArray";[{args:[[],.5,null],excMessage:'"n" must be an integer: 0.5'},{args:[void 0,5,null],excMessage:'Invalid "list" type: undefined'}].forEach((({args:t,excMessage:n},r)=>{mg(`${e}:${pg}:${r}`,(()=>fh(...t)),n)})),[{args:[["a","b","c"],5,"test"],output:["a","b","c","test","test"]},{args:[["a","b","c"],2,"test"],output:["a","b","c"]}].forEach((({args:t,output:n},r)=>{const i=Rg(`${e}:${fg}:${r}`,(()=>fh(...t)));vg(`${e}:${fg}:${r}`,i,n)}))},test_trimArray:function(){const e="test_trimArray";[{args:[[],.5],excMessage:'"n" must be an integer: 0.5'},{args:[void 0,5],excMessage:'Invalid "list" type: undefined'}].forEach((({args:t,excMessage:n},r)=>{mg(`${e}:${pg}:${r}`,(()=>gh(...t)),n)})),[{args:[["a","b","c"],1],output:["a"]},{args:[["a","b","c"],4],output:["a","b","c"]}].forEach((({args:t,output:n},r)=>{const i=Rg(`${e}:${fg}:${r}`,(()=>gh(...t)));vg(`${e}:${fg}:${r}`,i,n)}))},test_validateInt:function(){const e="test_validateInt";[{args:[.5,"test"],excMessage:'"test" must be an integer: 0.5'},{args:["test","test"],excMessage:'Invalid "test" type: string'},{args:[5,"test",10],excMessage:'"test" must fall in the [10, Infinity] interval: 5'},{args:[5,"test",0,3],excMessage:'"test" must fall in the [0, 3] interval: 5'}].forEach((({args:t,excMessage:n},r)=>{mg(`${e}:${pg}:${r}`,(()=>ph(...t)),n)})),Rg(`${e}:${fg}:0`,(()=>ph(0,"test")))}});var Cg=Object.freeze({__proto__:null,test_FORTUNE_WHEEL_COLORS:function(){const e="test_FORTUNE_WHEEL_COLORS";gg(`${e}:${fg}:0`,Array.isArray(zf)),gg(`${e}:${fg}:0`,zf.every((e=>"string"==typeof e)))},test_FORTUNE_WHEEL_MAX_SETS:function(){const e="test_FORTUNE_WHEEL_MAX_SETS";bg(`${e}:${fg}:0`,Gf,"number"),gg(`${e}:${fg}:0`,Number.isInteger(Gf)),gg(`${e}:${fg}:0`,Gf>=0)},test_canChangeCosplay:function(){const e="test_canChangeCosplay",t=rc(0,3).map((t=>`${e}${t}`)).map((e=>{const t=CharacterLoadSimple(e);return t.OnlineSharedSettings=t.OnlineSharedSettings??{},t}));try{t[1].OnlineSharedSettings={...t[1].OnlineSharedSettings??{},BlockBodyCosplay:!1},t[2].OnlineSharedSettings={...t[1].OnlineSharedSettings??{},BlockBodyCosplay:!0};[{args:[t[0]],output:!1},{args:[t[1]],output:!0},{args:[t[2]],output:!1}].forEach((({args:t,output:n},r)=>{const i=Rg(`${e}:${fg}:${r}`,(()=>Vf(...t)));vg(`${e}:${fg}:${r}`,i,n)}))}finally{t.forEach((e=>CharacterDelete(e)))}},test_equipHighSecLock:function(){const e="test_equipHighSecLock",t=CharacterLoadSimple(e);try{const n=AssetGet(t.AssetFamily,"ItemArms","LatexArmbinder");if(null==n)throw new Error;const r={Asset:n};Rg(`${e}:${fg}:0`,(()=>yp(r,t))),vg(`${e}:${fg}:0`,r.Property?.MemberNumberListKeys,"")}finally{CharacterDelete(t)}},test_equipLock:function(){const e="test_equipLock",t=rc(0,5).map((t=>`${e}-${t}`)).map(CharacterLoadSimple);try{t[4].PermissionItems["ItemMisc/ExclusivePadlock"]=PreferencePermissionGetDefault(),t[4].PermissionItems["ItemMisc/ExclusivePadlock"].Permission="Block",InventoryWear(t[2],"LatexArmbinder","ItemArms"),InventoryLock(t[2],t[2].Appearance.at(-1),"ExclusivePadlock");const n=AssetGet(t[0].AssetFamily,"ItemArms","LatexArmbinder"),r=AssetGet(t[0].AssetFamily,"ItemArms","NylonRope");if(null==n||null==r)throw new Error;const i={Asset:n};[{args:["bob","ExclusivePadlock",t[0]],excMessage:'Invalid "item" type: string'},{args:[i,0,t[0]],excMessage:'Invalid "lockName" type: number'},{args:[i,"bob",t[0]],excMessage:'Invalid "lockName" value: bob'},{args:[i,"ExclusivePadlock",1],excMessage:'Invalid "character" type: number'}].forEach((({args:t,excMessage:n},r)=>{mg(`${e}:${pg}:${r}`,(()=>Sp(...t)),n)}));[{args:[i,"ExclusivePadlock",t[1]],output:!0},{args:[i,"ExclusivePadlock",t[2]],output:!1},{args:[{Asset:r},"ExclusivePadlock",t[3]],output:!1},{args:[i,"ExclusivePadlock",t[4]],output:!1}].forEach((({args:t,output:n},r)=>{const i=Rg(`${e}:${fg}:${r}`,(()=>Sp(...t)));vg(`${e}:${fg}:0`,i,n)}))}finally{t.forEach((e=>CharacterDelete(e)))}},test_equipTimerLock:function(){const e="test_equipTimerLock",t=CharacterLoadSimple(e);try{const n=AssetGet(t.AssetFamily,"ItemArms","LatexArmbinder");if(null==n)throw new Error;const r={Asset:n};mg(`${e}:${pg}:0`,(()=>bp(r,void 0,t)),'Invalid "seconds" type: undefined'),Rg(`${e}:${fg}:0`,(()=>bp(r,99,t))),gg(`${e}:${fg}:0`,(r.Property?.RemoveTimer??1/0)<=CurrentTime+198e4),vg(`${e}:${fg}:0`,r.Property?.RemoveItem,!0),vg(`${e}:${fg}:0`,r.Property?.LockSet,!0),bg(`${e}:${fg}:0`,r.Property?.Password,"string")}finally{CharacterDelete(t)}},test_sanitizeWheelFortuneIDs:function(){const e="test_sanitizeWheelFortuneIDs";mg(`${e}:${pg}:0`,(()=>Uf(void 0)),'Invalid "IDs" type: undefined'),[{args:["ABC"],output:"ABC"},{args:["A䀁"],output:"A"}].forEach((({args:t,output:n},r)=>{const i=Rg(`${e}:${fg}:${r}`,(()=>Uf(...t)));vg(`${e}:${fg}:${r}`,i,n)}))},test_settingsLoaded:function(){const e="test_settingsLoaded",t=Rg(`${e}:${fg}:0`,Jf);vg(`${e}:${fg}:0`,t,!0)},test_settingsMBSLoaded:function(){const e="test_settingsMBSLoaded",t=Rg(`${e}:${fg}:0`,Yf);vg(`${e}:${fg}:0`,t,!0)}});const kg=Object.freeze({Mummification:e=>({...e,TypeRecord:void 0})});var Pg=Object.freeze({__proto__:null,test_builtinMBSWheel:function(){const e="test_builtinMBSWheel",t=Kn(Object.values(zp).map((e=>e.children??[]))),n=t.map((e=>e.Description)).map((e=>CharacterLoadSimple(e)));try{t.forEach((t=>{if(!(t.Parent instanceof rg))return;const n=CharacterLoadSimple(t.Description);t.Script(n);for(let r of t.Parent.itemList){const i=InventoryGet(n,r.Group);if(void 0!==r.Equip)continue;gg(`${e}:${t.Description}:${r.Group}:${r.Name}:${fg}`,null!=i);const o=(kg[t.Parent.name]??(e=>e))(Wh(i.Asset,{...i,Group:i.Asset.Group.Name,Name:i.Asset.Name,Color:void 0===r.Color?void 0:i.Color},!1),n);null!==o&&(r={...r,ItemCallback:void 0,Property:{...o.Property,...r.Property},Equip:void 0,Craft:void 0!==r.Craft&&"HighSecurityPadlock"===t.Flag.type&&InventoryDoesItemAllowLock(i)?{...r.Craft,Property:"Puzzling"}:r.Craft},vg(`${e}:${t.Description}:${r.Group}:${r.Name}:${fg}`,o,r))}}))}finally{n.forEach((e=>CharacterDelete(e)))}}});const xg=function(){if(!Yf())return oh.warn("MBS not fully loaded yet"),!1;const e={...wg,...Cg,...Pg},t={};for(const[n,r]of th(e))try{r()}catch(e){t[n]=e}return 0===Object.values(t).length||(oh.warn(t),!1)};ah(Kf).then((()=>{const e={[`${ap.screen}Background`]:ap.background,[`${up.screen}Background`]:up.background,[`${mp.screen}Background`]:mp.background,[`${Lf.screen}Background`]:Lf.background,[`${Dp.screen}Background`]:Dp.background},t=globalThis;Object.assign(t,e)}));const Mg=new Set;ah(Kf).then((()=>{if("R112"===GameVersion)"F29AC8A4"===Rh.getOriginalHash("DialogMenuMapping.items._ReloadStatus")&&"86642438"===Rh.getOriginalHash("DialogMenuMapping.items.clickStatusCallbacks.InventoryGroupIsAvailable")&&(Mg.add(5377),Rh.hookFunction("DialogMenuMapping.items._ReloadStatus",0,(e=>{const[t,n,r,i,o]=e;let a=!1,s=o.status;null==s&&(InventoryGroupIsBlockedByOwnerRule(r,i.Name)?(s=InterfaceTextGet("ZoneBlockedOwner"),a=!0):InventoryIsBlockedByDistance(r)?(s=InterfaceTextGet("ZoneBlockedRange"),a=!0):InventoryGroupIsBlocked(r,i.Name)?(s=InterfaceTextGet("ZoneBlocked"),a=!0):Player.CanInteract()?s=InterfaceTextGet("SelectItemGroup"):(s=InterfaceTextGet("AccessBlocked"),a=!0)),t.toggleAttribute("data-show-icon",a),DialogSetStatus(s,o.statusTimer??0,{asset:undefined,group:i,C:r})})),Rh.patchFunction("DialogMenuMapping.items.clickStatusCallbacks.InventoryGroupIsAvailable",{"return equippedItem ? InventoryGroupIsAvailable(C, C.FocusGroup.Name, false) : null;":"return equippedItem ? InventoryGroupIsAvailable(C, clickedItem.Asset.Group.Name, false) : null;"})),"EC032BEE"===Rh.getOriginalHash("CharacterSetFacialExpression")&&"AD3A0840"===Rh.getOriginalHash("DialogLeave")&&"C1F40E3E"===Rh.getOriginalHash("DialogLeaveFocusItemHandlers.DialogFocusItem.Appearance")&&(Mg.add(5378),Mg.add(5389),Rh.patchFunction("CharacterSetFacialExpression",{"CharacterRefresh(C, !inChatRoom && !isTransient);":"CharacterRefresh(C, !inChatRoom && !isTransient, false);"}),Rh.patchFunction("DialogLeave",{"if (CurrentCharacter) {":"if (StruggleMinigameIsRunning()) { StruggleMinigameStop(); } AudioDialogStop(); Player.FocusGroup = null; if (CurrentCharacter) { CurrentCharacter.FocusGroup = null;","DialogChangeFocusToGroup(CurrentCharacter, null);":";"}),Rh.patchFunction("DialogLeaveFocusItemHandlers.DialogFocusItem.Appearance",{"DialogLeave();":"const focusGroup = Player.FocusGroup; DialogLeave(); Player.FocusGroup = focusGroup;"})),document.getElementById("mbs-backport-style")||(Mg.add(5383),document.body.append(h("style",{id:"mbs-backport-style",children:"@media (hover: hover) {\n  @supports selector(:has(*)) {\n    .button-styling:hover:not(:has(.button-tooltip:hover)) {\n      background-color: var(--hover-color);\n    }\n    .button:hover:not(:has(.button-tooltip:hover)) > .button-tooltip {\n      visibility: visible;\n    }\n  }\n  @supports not selector(:has(*)) {\n    .button-styling:hover {\n      background-color: var(--hover-color);\n    }\n    .button:hover > .button-tooltip {\n      visibility: visible;\n    }\n  }\n}\n.chat-room-changelog ul {\n  margin: unset;\n  padding: 0.5em 1em;\n}\n\n.chat-room-changelog h1,\n.chat-room-changelog h2,\n.chat-room-changelog h3,\n.chat-room-changelog h4,\n.chat-room-changelog h5,\n.chat-room-changelog h6,\n.chat-room-changelog [role=heading] {\n  font-size: inherit;\n  margin: unset;\n  padding: 0.25em;\n  text-align: center;\n}\n\n.chat-room-changelog-button {\n  height: 1em;\n  width: 1em;\n}\n\n.chat-room-changelog-button-collapse > .button-label {\n  font-size: unset;\n}\n\n.chat-room-changelog-header-div > span[aria-hidden=true] {\n  text-align: center;\n  width: 0.5em;\n}\n\n.chat-room-changelog-image {\n  margin: unset;\n  margin-bottom: 0.5em;\n  margin-top: 0.5em;\n}\n\n/* stylelint-disable */\n#TextAreaChatLog {\n  overflow-y: scroll;\n}".toString()})));Mg.size?oh.log("Initializing R113 backports",Sc(Array.from(Mg))):oh.log("No R113 backports")}));var Ig={BandAnklet:"R111",HeelBinders:"R111",LegFur:"R111",Ribbon:"R111",Ribbon1:"R111"},Fg={BandAnklet:"R111",HeelBinders:"R111",LegFur:"R111",Ribbon:"R111",Ribbon1:"R111"},Eg={"":"R111"},_g={"":"R111"},Og={Blush:"R98"},Ag={Large:"R98",Normal:"R98",Small:"R98",XLarge:"R98"},$g={BodyWritings:"R103",FacePaints:"R111",FaceScars:"R109",WombTattoos:"R101"},Hg={FlatMedium:"R98",FlatSmall:"R98",Large:"R98",Normal:"R98",Small:"R98",XLarge:"R98"},Lg={Bandeau1:"R98",Bikini1:"R98",BondageBra1:"R98",Bra1:"R98",Bra10:"R98",Bra2:"R98",Bra7:"R98",Bra8:"R98",Bra9:"R98",BunnySuit:"R98",Bustier1:"R98",Camisole:"R98",ChineseBra1:"R98",ClamShell:"R98",CoconutBra:"R98",CorsetBikini1:"R98",CowPrintedBra:"R98",CuteBikini1:"R98",DominatrixLeotard:"R98",FishnetBikini1:"R98",FlowerBra:"R98",FrameBra1:"R98",FrameBra2:"R98",FullLatexBra:"R98",FullLatexBra2:"R98",HaremBra:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeartTop:"R98",KittyBra1:"R98",LatexBra1:"R98",LatexBunnySuit:"R98",LeatherBreastBinder:"R98",LeatherStrapBra1:"R98",LeatherVestSuit:"R104",MaidBra1:"R98",OuvertPerl1:"R98",Ribbons:"R98",Sarashi1:"R98",SexyBeachBra1:"R98",SexyBikini1:"R98",SexyBikini2:"R98",SexyBikini3:"R98",SexyBikiniBra1:"R98",SleevelessSlimLatexLeotard:"R98",StarHarnessBra:"R98",StrapBra:"R98",StuddedHarness:"R98",Swimsuit1:"R98",Swimsuit2:"R98",Swimsuit3:"R98"},jg={Band1:"R98",BowBand:"R98",KinkBracelet:"R98",LaceBands:"R98",LesBand:"R98",SpikeBands:"R98",WristWatch:"R103",Wristband:"R98"},Tg={AdmiralTop:"R98",AdultBabyDress1:"R98",AdultBabyDress2:"R98",AdultBabyDress3:"R98",AdultBabyDress4:"R98",AnimeGirl:"R106",BabydollDress1:"R98",Blouse1:"R98",Bodice1:"R98",BodyTowel1:"R98",BondageBustier1:"R98",BondageBustier2:"R98",BondageDress1:"R98",BondageDress2:"R98",BridesmaidDress1:"R98",BusinessSuit:"R101",ButtonShirt:"R98",CheerleaderTop:"R98",ChineseDress1:"R98",ChineseDress2:"R98",CollegeOutfit1:"R98",ComfyTop:"R98",CorsetDress:"R101",CorsetShirt:"R98",CropTop:"R98",CustomTShirt:"R103",Dress2:"R98",Dress3:"R98",DressFur:"R98",EveningGown:"R102",FishnetTop:"R98",FlowerDress:"R98",FrilledShirt:"R98",FurCoat:"R98",FuzzyDress:"R98",Gown1:"R98",Gown2Top:"R98",Gown3:"R98",GrandMage:"R98",HeavyLeatherDress:"R102",Hoodie:"R98",Jacket:"R98",LaceBabydoll:"R98",LatexHobbleDress:"R106",LatexLacedSuit:"R98",LatexTankTop:"R98",LatexTop:"R98",Laurel:"R98",LeatherBolero:"R98",LeatherCorsetTop1:"R98",LeatherCropTop:"R98",MaidApron1:"R98",MaidApron2:"R98",MaidLatex:"R101",MaidOutfit1:"R98",MaidOutfit2:"R98",MaleTankTop1:"R98",MistressTop:"R98",NunRobes:"R104",NurseUniform:"R98",RetroGirdle:"R98",ReverseBunnySuit:"R98",RibbonCorset:"R112",Robe1:"R98",SeethroughTop:"R98",ShoulderlessTop:"R98",SlaveRags:"R98",SleevelessTop:"R98",SteampunkCorsetTop1:"R98",StudentOutfit1:"R98",StudentOutfit2:"R98",StudentOutfit3:"R98",SummerDress:"R98",SuspenderTop1:"R98",Sweater1:"R98",TShirt1:"R98",TShirt2:"R98",TeacherOutfit1:"R98",TennisShirt1:"R98",VirginKiller1:"R98",WeddingDress1:"R98",WeddingDress2:"R98",Yukata1:"R98",YuletideVelvetWarmth:"R104"},Dg={Bib:"R98",BodyWritings:"R103",Bouquet:"R98",BowBackAccessory:"R104",BugLegs:"R98",BunnyCollarCuffs:"R98",Camera1:"R98",Cape:"R98",CatsuitCollar:"R98",ComboBelt:"R112",FacePaint:"R98",FaceWritings:"R112",FrillyApron:"R98",FurBolero:"R98",Glitter:"R98",JewelrySet:"R98",Kissmark:"R98",KissmarkDummy:"R98",LargeBelt:"R98",LargeNeckFur:"R109",LatexApron:"R101",LeatherBeltCloth:"R111",LeatherStraps:"R98",Poncho:"R98",SatinScarf:"R112",Scarf:"R98",SmallNeckFur:"R109",SpikyNeckFur:"R109",StudentOutfit3Bow1:"R98",StudentOutfit3Bow2:"R98",StudentOutfit3Bow3:"R98",StudentOutfit3Scarf:"R98",WombTattoos:"R101",ZipperBelt:"R99"},Ng={ASRubberSkirt:"R107",AdmiralSkirt:"R98",AsymmetricSkirt:"R98",BondageSkirt:"R98",BusinessSkirt:"R98",BusinessTrousers:"R101",CheerleaderSkirt:"R98",ChineseSkirt1:"R98",ClothSkirt1:"R98",CollegeSkirt:"R98",CrossSkirt:"R98",CrossSkirtLight:"R98",ElegantSkirt:"R98",Gown2Skirt:"R98",HaremPants:"R98",HaremPants2:"R98",HulaSkirt:"R98",JeanSkirt:"R98",Jeans1:"R98",Jeans2:"R98",JeansShorts:"R98",LatexPants1:"R98",LatexSkirt1:"R98",LatexSkirt2:"R98",Leggings1:"R98",Leggings2:"R98",LongLeatherSkirt:"R98",LongPleatedSkirt:"R98",LongSkirt1:"R98",MageSkirt:"R98",MidLegSkirt:"R112",MistressBottom:"R98",Pajama1:"R98",PantBoots:"R98",PencilSkirt:"R98",PleatedSkirt:"R98",RuffledSkirt:"R98",SatinSkirt:"R105",ShortPencilSkirt:"R98",ShortPlaidSkirt:"R98",Shorts1:"R98",Skirt1:"R98",Skirt2:"R98",Skirt3:"R98",TennisSkirt1:"R98",TulleSkirt:"R98",Tutu:"R98",Waspie1:"R98",Waspie2:"R98",Waspie3:"R98"},Gg={ClassicLatexCorset:"R98",Corset1:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",Corset6:"R98",CorsetDress:"R101",LatexCorset1:"R98",LeatherCorsetTop1:"R98",RibbonCorset:"R112",SteampunkCorsetTop1:"R98",TightCorset:"R107",Underbust:"R98"},Wg={Emoticon:"R98"},zg={Eyebrows1:"R98",Eyebrows2:"R98",Eyebrows7:"R98",Eyebrows8:"R98"},qg={Eyes1:"R98",Eyes10:"R98",Eyes11:"R98",Eyes12:"R98",Eyes13:"R98",Eyes14:"R99",Eyes2:"R98",Eyes3:"R98",Eyes4:"R98",Eyes5:"R98",Eyes6:"R98",Eyes7:"R98",Eyes8:"R98",Eyes9:"R98"},Vg={Eyes1:"R98",Eyes10:"R98",Eyes11:"R98",Eyes12:"R98",Eyes13:"R98",Eyes14:"R99",Eyes2:"R98",Eyes3:"R98",Eyes4:"R98",Eyes5:"R98",Eyes6:"R98",Eyes7:"R98",Eyes8:"R98",Eyes9:"R98"},Ug={CatEye:"R98",CatEye2:"R98",LargeBlurred:"R98",LargeSolid:"R98",SmallBlurred:"R98",SmallSolid:"R98",SuperstarBlurred:"R98",SuperstarSolid:"R98",Tanuki:"R98",UndershadowedBlurred:"R98",UndershadowedSolid:"R98",Wings:"R98"},Kg={AnimalNoses:"R112",FaceScars:"R112",FaceWritings:"R112"},Jg={BigBeard:"R98",ChinstrapBeard:"R98",Goatee:"R98",MediumBeard:"R98",Moustache:"R98",MoustacheBeard:"R98"},Yg={Fluids:"R98"},Zg={ComboBelt:"R112",DropBag:"R98",GarterBelt:"R98",GarterBelt2:"R98",GarterBelt3:"R98",HipHarness:"R107",Tentacles:"R98",WaistLegHarness:"R111"},Xg={CatGlasses:"R98",EyePatch1:"R98",Glasses1:"R98",Glasses2:"R98",Glasses3:"R98",Glasses4:"R98",Glasses5:"R98",Glasses6:"R98",Goggles:"R98",GradientSunglasses:"R98",JokeGlasses:"R98",Pincenez:"R106",StreetEyewear:"R100",SunGlasses1:"R98",SunGlasses2:"R98",SunGlassesClear:"R98",VGlasses:"R98"},Qg={AnimeGirlGloves:"R106",BikerGloves:"R98",Catsuit:"R98",CheerleaderPomPoms:"R98",CowPrintedGloves:"R98",FingerlessGloves:"R98",FishnetGloves:"R98",Gloves1:"R98",Gloves2:"R98",Gloves3:"R98",GlovesFur:"R98",HaremGlove:"R98",LatexElbowGloves:"R98",LatexShortGloves:"R98",MistressGloves:"R98",OperaGloves:"R105",SeethroughSuit:"R98",WarmGloves:"R103"},em={Antennae:"R98",AquaticEars:"R111",BatWings:"R98",BigLynxEars:"R98",BunnyEars1:"R98",BunnyEars2:"R98",CowEars:"R104",CowHorns:"R98",CyberneticEars1:"R108",DildocornHorn:"R98",EarWarmer:"R103",Ears1:"R98",Ears2:"R98",ElfEars:"R98",FoxEars1:"R98",FoxEars2:"R98",FoxEars3:"R98",GiantBow1:"R98",HairFeathers1:"R98",HairFlower1:"R98",Halo:"R98",Headset1:"R101",Horns:"R98",Horns2:"R98",Horns3:"R98",Horns4:"R104",Horns5:"R104",KittenEars1:"R98",KittenEars2:"R98",MouseEars1:"R98",MouseEars2:"R98",Onihorns:"R109",PonyEars1:"R98",PuppyEars1:"R98",PuppyEars2:"R98",RaccoonEars1:"R98",Ribbons1:"R98",Ribbons2:"R98",Ribbons3:"R98",Ribbons4:"R98",SkunkEars:"R109",SuccubusHorns:"R98",UnicornHorn:"R98",WeddingVeil1:"R98",WolfEars1:"R98",WolfEars2:"R98"},tm={Antennae:"R98",AquaticEars:"R111",BatWings:"R98",BunnyEars1:"R98",BunnyEars2:"R98",CowEars:"R104",CowHorns:"R98",CyberneticEars1:"R111",DildocornHorn:"R98",Ears1:"R98",Ears2:"R98",ElfEars:"R98",FoxEars1:"R98",FoxEars2:"R98",FoxEars3:"R98",Horns:"R98",Horns2:"R98",Horns3:"R98",Horns4:"R104",Horns5:"R104",KittenEars1:"R98",KittenEars2:"R98",MouseEars1:"R98",MouseEars2:"R98",Onihorns:"R109",PonyEars1:"R98",PuppyEars1:"R98",PuppyEars2:"R98",RaccoonEars1:"R98",SkunkEars:"R109",SuccubusHorns:"R98",UnicornHorn:"R98",WolfEars1:"R98",WolfEars2:"R98"},nm={EarWarmer:"R103",GiantBow1:"R98",HairFeathers1:"R98",HairFlower1:"R98",Halo:"R98",Headset1:"R101",Ribbons1:"R98",Ribbons2:"R98",Ribbons3:"R98",Ribbons4:"R98",WeddingVeil1:"R98"},rm={HairBack1:"R98",HairBack10:"R98",HairBack10b:"R98",HairBack11:"R98",HairBack12:"R98",HairBack12b:"R98",HairBack13:"R98",HairBack13b:"R98",HairBack14:"R98",HairBack15:"R98",HairBack15b:"R98",HairBack16:"R98",HairBack17:"R98",HairBack18:"R98",HairBack18b:"R98",HairBack19:"R98",HairBack19b:"R98",HairBack1b:"R98",HairBack2:"R98",HairBack20:"R98",HairBack20b:"R98",HairBack21:"R98",HairBack22:"R98",HairBack23:"R98",HairBack24:"R98",HairBack25:"R98",HairBack26:"R98",HairBack27:"R98",HairBack28:"R98",HairBack29:"R98",HairBack2b:"R98",HairBack30:"R98",HairBack31:"R98",HairBack32:"R98",HairBack33:"R98",HairBack34:"R98",HairBack35:"R98",HairBack36:"R98",HairBack37:"R98",HairBack38:"R98",HairBack39:"R98",HairBack4:"R98",HairBack40:"R98",HairBack41:"R98",HairBack42:"R98",HairBack43:"R98",HairBack44:"R98",HairBack45:"R98",HairBack46:"R98",HairBack47:"R98",HairBack48:"R98",HairBack49:"R98",HairBack4b:"R98",HairBack5:"R98",HairBack50:"R98",HairBack51:"R98",HairBack52:"R98",HairBack53:"R98",HairBack54:"R98",HairBack54b:"R98",HairBack55:"R98",HairBack55b:"R98",HairBack56:"R98",HairBack56b:"R98",HairBack57:"R98",HairBack57b:"R98",HairBack57c:"R98",HairBack57d:"R102",HairBack58:"R103",HairBack58b:"R103",HairBack59:"R103",HairBack5b:"R98",HairBack6:"R98",HairBack60:"R103",HairBack61:"R103",HairBack62:"R104",HairBack63:"R104",HairBack64:"R112",HairBack65:"R112",HairBack65b:"R112",HairBack66:"R112",HairBack67:"R112",HairBack68:"R112",HairBack69:"R112",HairBack69b:"R112",HairBack6b:"R98",HairBack7:"R98",HairBack70:"R112",HairBack70b:"R112",HairBack71:"R112",HairBack72:"R112",HairBack73:"R112",HairBack74:"R112",HairBack75:"R112",HairBack76:"R112",HairBack76b:"R112",HairBack77:"R112",HairBack77b:"R112",HairBack77c:"R112",HairBack78:"R112",HairBack78b:"R112",HairBack78c:"R112",HairBack7b:"R98",HairBack7c:"R98",HairBack8:"R98",HairBack9:"R98",HairBack9b:"R98",HairNone:"R98",ScalyBackHair:"R109"},im={HairFront1:"R98",HairFront10:"R98",HairFront10b:"R98",HairFront11:"R98",HairFront11b:"R98",HairFront12:"R98",HairFront12b:"R98",HairFront13:"R98",HairFront13b:"R98",HairFront14:"R98",HairFront14b:"R98",HairFront15:"R98",HairFront16:"R98",HairFront17:"R98",HairFront17b:"R98",HairFront18:"R98",HairFront19:"R98",HairFront1b:"R98",HairFront2:"R98",HairFront20:"R98",HairFront21:"R98",HairFront22:"R98",HairFront22b:"R98",HairFront23:"R98",HairFront23b:"R98",HairFront24:"R98",HairFront25:"R98",HairFront26:"R98",HairFront27:"R98",HairFront28:"R98",HairFront28b:"R98",HairFront29:"R98",HairFront29b:"R98",HairFront2b:"R98",HairFront3:"R98",HairFront30:"R98",HairFront31:"R98",HairFront32:"R98",HairFront33:"R98",HairFront33b:"R98",HairFront34:"R98",HairFront35:"R98",HairFront36:"R98",HairFront37:"R98",HairFront37b:"R98",HairFront38:"R98",HairFront38b:"R98",HairFront39:"R98",HairFront39b:"R98",HairFront3b:"R98",HairFront4:"R98",HairFront40:"R98",HairFront40b:"R98",HairFront41:"R98",HairFront41b:"R98",HairFront42:"R98",HairFront42b:"R98",HairFront43:"R98",HairFront43b:"R98",HairFront44:"R98",HairFront44b:"R98",HairFront45:"R98",HairFront45b:"R98",HairFront46:"R98",HairFront46b:"R98",HairFront47:"R98",HairFront47b:"R98",HairFront48:"R98",HairFront48b:"R98",HairFront49:"R98",HairFront4b:"R98",HairFront5:"R98",HairFront50:"R98",HairFront51:"R98",HairFront51b:"R98",HairFront52:"R98",HairFront52b:"R98",HairFront53:"R98",HairFront54:"R103",HairFront55:"R103",HairFront56:"R103",HairFront57:"R104",HairFront58:"R108",HairFront59:"R109",HairFront5b:"R98",HairFront6:"R98",HairFront60:"R109",HairFront61:"R109",HairFront62a:"R110",HairFront62b:"R110",HairFront63:"R112",HairFront64:"R112",HairFront6b:"R98",HairFront7:"R98",HairFront7b:"R98",HairFront8:"R98",HairFront8b:"R98",HairFront9:"R98",HairFront9b:"R98",ScalyHair:"R109"},om={CatsuitGloves:"R111",Claws:"R111",Fingernails:"R111",Rings:"R111"},am={CatsuitGloves:"R111",Claws:"R111",Fingernails:"R111",Rings:"R111"},sm={"":"R111"},lm={"":"R111"},um={AnimeGirlTiara:"R106",BakerBoyHat:"R98",BallCapBack:"R98",BallCapFront:"R98",Band1:"R98",Band2:"R98",Bandana:"R98",Beanie:"R98",Beret1:"R98",Bonnet1:"R98",Bonnet2:"R98",BunnySuccubus2:"R98",CaptainHat1:"R98",CheapHelmet:"R107",CollegeDunce:"R98",CowboyHat:"R98",Crown1:"R98",Crown2:"R98",Crown3:"R98",Crown4:"R98",Crown5:"R98",FacePaint:"R98",FlowerCrown:"R98",FurHeadband:"R98",HeadTowel1:"R98",LatexHabit:"R98",MaidHairband1:"R98",MaidLatexHairband:"R101",NunHabit:"R98",NunVeil:"R104",NurseCap:"R98",PirateBandana1:"R98",PirateHat:"R98",PoliceWomanHat:"R98",PoppyCrown:"R98",ReindeerBand:"R98",RoseCrown:"R98",Santa1:"R98",SmallHat1:"R98",SwimCap:"R98",Tiara1:"R98",Veil1:"R98",Veil2:"R98",VintageHat:"R106",WitchHat1:"R98"},cm={Default:"R98",NoEars:"R98",SmallEars:"R98"},dm={H0900:"R98",H0910:"R98",H0920:"R98",H0930:"R98",H0940:"R98",H0950:"R98",H0960:"R98",H0970:"R98",H0980:"R98",H0990:"R98",H1000:"R98"},hm={BedChains:"R98",BedRopes:"R98",BedStraps:"R98",BedTape:"R98",CeilingChain:"R98",CeilingRope:"R98",Covers:"R98"},pm={ArmbinderJacket:"R98",ArmbinderSuit:"R107",BedMetalCuffs:"R110",BitchSuit:"R98",Bolero:"R98",BondageBouquet:"R98",BondageBra:"R98",BoxTieArmbinder:"R98",CanvasStraitjacket1:"R98",CeilingShackles:"R98",Chains:"R98",CollarCuffs:"R98",CollarMetalcuffs:"R103",DuctTape:"R98",FourLimbsShackles:"R98",FullBodyLeatherHarness:"R98",FullBodyShackles:"R98",FullLatexSuit:"R98",FurStraitJacket:"R98",FuturisticArmbinder:"R98",FuturisticCuffs:"R98",FuturisticStraitjacket:"R98",HeavyYoke:"R98",HempRope:"R98",HighSecurityStraitJacket:"R98",HighStyleSteelCuffs:"R98",InflatableDress:"R112",InflatableStraightLeotard:"R98",LatexArmbinder:"R98",LatexBoxtieLeotard:"R98",LatexButterflyLeotard:"R98",LatexSleevelessLeotard:"R98",LeatherArmSplints:"R98",LeatherArmbinder:"R98",LeatherCuffs:"R98",LeatherDeluxeCuffs:"R98",LeatherStraitJacket:"R98",Manacles:"R98",MedicalBedRestraints:"R98",MermaidSuit:"R98",MetalCuffs:"R98",NylonRope:"R98",OrnateCuffs:"R98",PantyhoseBody:"R98",PantyhoseBodyOpen:"R98",PetCrawler:"R98",Pillory:"R98",PlasticWrap:"R98",PrisonLockdownSuit:"R98",PrisonSJ:"R98",Ribbons:"R98",SeamlessLatexArmbinder:"R98",SeamlessStraitDress:"R98",SeamlessStraitDressOpen:"R98",ShinyArmbinder:"R98",ShinyPetSuit:"R98",ShinyStraitjacket:"R98",SleepSac:"R98",Slime:"R98",SmoothLeatherArmbinder1:"R98",SteelCuffs:"R98",StraitDress:"R98",StraitDressOpen:"R98",StraitJacket:"R98",StraitLeotard:"R98",StrictLeatherPetCrawler:"R98",SturdyLeatherBelts:"R98",Tentacles:"R98",ThinLeatherStraps:"R98",TightJacket:"R98",TightJacketCrotch:"R98",TransportJacket:"R98",UnderBedBondageCuffs:"R98",Web:"R98",WoodenCuffs:"R98",WrappedBlanket:"R98",WristShackles:"R98",Yoke:"R98",Zipties:"R98"},fm={BalletHeels:"R98",BalletHeels1:"R98",BalletMittens:"R112",BalletWedges:"R98",FuturisticHeels:"R98",FuturisticHeels2:"R98",HighThighBoots:"R98",LeatherFootMitts1:"R98",LeatherToeCuffs:"R98",LockingBoots1:"R98",LockingHeels:"R98",LockingHeels2:"R98",LockingShoes1:"R98",LockingShoes2:"R98",MetalBallet:"R100",MonoHeel:"R98",PonyBoots:"R98",ShortPonyBoots:"R98",Slime:"R98",StrictPonyBoots:"R104",ThighHighLatexHeels:"R98",ToeCuffs:"R98",ToeTape:"R98",ToeTie:"R98",TormentHeels:"R103",Zipties:"R98"},gm={ChastityPlate:"R105",ForbiddenChastityBra:"R98",FuturisticBra:"R98",FuturisticBra2:"R98",LeatherBreastBinder:"R98",MetalChastityBra:"R98",OrnateChastityBra:"R98",PolishedChastityBra:"R98",Ribbons:"R98",TickleBra:"R98"},mm={AnalBeads:"R98",AnalBeads2:"R98",AnalHook:"R98",BlackButtPlug:"R98",BunnyTailPlug1:"R98",BunnyTailPlug2:"R98",BunnyTailVibePlug:"R98",ButtPlugLock:"R98",ButtPump:"R98",Cowtail:"R98",DemonPlug:"R98",EggVibePlugXXL:"R98",FoxTail1:"R98",FoxTail2:"R98",FoxTails:"R98",HollowButtPlug:"R98",HorsetailPlug:"R98",HorsetailPlug1:"R98",InflVibeButtPlug:"R98",KittenTail1:"R98",KittenTail2:"R98",LockingVibePlug:"R98",MouseTail1:"R98",MouseTail2:"R98",PenisPlug:"R98",PuppyTailPlug:"R98",PuppyTailPlug1:"R98",RaccoonButtPlug:"R98",RaccoonTailPlug:"R98",ShockPlug:"R98",Stitches:"R98",SuccubusButtPlug:"R98",SuccubusHeartButtPlug:"R98",TailButtPlug:"R98",Tentacles:"R98",VibratingButtplug:"R98",VibratingDildoPlug:"R98",WolfTail1:"R98",WolfTail2:"R98",WolfTail3:"R98"},Rm={BBQ:"R98",Bed:"R98",BondageBench:"R98",BrickWall:"R107",BurlapSack:"R98",Cage:"R98",Cement:"R106",ChangingTable:"R98",Coffin:"R98",ConcealingCloak:"R98",Crib:"R98",CryoCapsule:"R98",Cushion:"R98",DisplayCase:"R98",DollBox:"R98",Familiar:"R98",FoldingScreen:"R98",FuckMachine:"R98",FurBlanketWrap:"R98",FuturisticCrate:"R98",GlueFloor:"R105",InflatableBodyBag:"R98",KabeshiriWall:"R98",Kennel:"R98",LittleMonster:"R98",Locker:"R98",LowCage:"R98",LuckyWheel:"R98",MedicalBed:"R98",MilkCan:"R98",Net:"R98",OneBarGirl:"R105",OneBarPrison:"R98",PersonalCage:"R98",PetBed:"R98",PetBowl:"R98",PogoBall:"R112",Pole:"R98",SaddleStand:"R98",SmallDisplayCase:"R98",SmallLocker:"R98",SmallWoodenBox:"R98",SmallWoodenBoxOpenHead:"R98",Snowman:"R98",StrapOnSmooth:"R98",StrapOnStuds:"R98",Sybian:"R98",TheDisplayFrame:"R98",TheHangingFrame:"R101",TransportWoodenBox:"R98",Trolley:"R99",VacBedDeluxe:"R98",VacCube:"R98",Vacbed:"R98",VacbedClear:"R98",WaterCell:"R98",WetFloor:"R98",WheelFortune:"R98",WoodenBox:"R98",WoodenBoxOpenHead:"R98",WoodenHorse:"R98",WoodenRack:"R98",WoodenStocks:"R98","X-Cross":"R98"},vm={BluetoothEarbuds:"R98",FuturisticEarphones:"R98",HeadphoneEarPlugs:"R98",Headphones:"R98",HeavyDutyEarPlugs:"R98",LightDutyEarPlugs:"R98"},bm={AnkleShackles:"R98",BallChain:"R98",Chains:"R98",DuctTape:"R98",EscortAnkleCuffs:"R98",FloorShackles:"R98",FuturisticAnkleCuffs:"R98",HeavyAnkleCuffs:"R98",HeavySpreaderMetal:"R98",HeelBinders:"R110",HempRope:"R98",HighStyleSteelAnkleCuffs:"R98",Irish8Cuffs:"R98",KneeOvernighter:"R110",LeatherAnkleCuffs:"R98",LeatherBelt:"R98",LeatherDeluxeAnkleCuffs:"R98",MassiveAnkleCuffs:"R110",MedicalBedRestraints:"R98",NylonRope:"R98",OrnateAnkleCuffs:"R98",PlasticWrap:"R98",Slime:"R98",SpreaderDildoBar:"R98",SpreaderMetal:"R98",SpreaderVibratingDildoBar:"R98",SteelAnkleCuffs:"R98",SturdyLeatherBelts:"R98",SuspensionCuffs:"R98",Tentacles:"R98",WoodenCuffs:"R98",Zipties:"R98"},ym={AnimeGirlWand:"R106",Baguette:"R98",Ballgag:"R98",Belt:"R98",Brick:"R107",Broom:"R98",BunPlush:"R98",CandleWax:"R98",Cane:"R98",CattleProd:"R98",Crop:"R98",ElectricToothbrush:"R98",Feather:"R98",FeatherDuster:"R98",Flogger:"R98",ForSaleSign:"R98",FoxPlush:"R98",Gavel:"R98",GlassEmpty:"R98",GlassFilled:"R98",GlueTube:"R105",Hairbrush:"R98",HeartCrop:"R98",IceCube:"R98",Karl:"R98",KeyProp:"R98",LargeDildo:"R98",LongDuster:"R98",LongSock:"R98",Lotion:"R98",MedicalInjector:"R98",Mug:"R98",Paddle:"R98",Panties:"R98",PetPotato:"R98",PetToy:"R98",Phone1:"R98",Phone2:"R98",PlasticWrap:"R98",Popcorn:"R99",PortalTablet:"R98",PotionBottle:"R98",RainbowWand:"R98",RopeCoilLong:"R98",RopeCoilShort:"R98",Ruler:"R98",Scissors:"R98",Shark:"R98",ShockRemote:"R98",ShockWand:"R98",SmallDildo:"R98",SmallVibratingWand:"R98",Smartphone:"R99",Spatula:"R98",Sword:"R98",TapeRoll:"R98",TennisRacket:"R98",Toothbrush:"R98",Towel:"R98",Trowel:"R107",VibeRemote:"R98",VibratingWand:"R98",Vibrator:"R98",WartenbergWheel:"R98",Whip:"R98",WhipPaddle:"R98"},Sm={CheerleaderPomPoms:"R98",DuctTape:"R98",ElbowLengthMittens:"R103",FullMittens:"R110",FuturisticMittens:"R98",GlueMittens:"R105",HempRopeCuffs:"R107",HoofMittens:"R98",LatexBondageMitts:"R111",LeatherMittens:"R98",PaddedLeatherMittens:"R98",PaddedMittens:"R98",PawMittens:"R98",PolishedMittens:"R98",PonyMittensBinder:"R100",SmoothLeatherMittens1:"R98"},Bm={AnimeLenses:"R98",BigMouthHood:"R101",BlackoutLenses:"R98",ClothBlindfold:"R98",DroneMask:"R98",DuctTape:"R98",FrilledSleepMask:"R98",FullBlindfold:"R98",FurScarf:"R98",FuturisticMask:"R98",InteractiveVRHeadset:"R98",InteractiveVisor:"R98",Kigu2Hood:"R112",KittyBlindfold:"R98",LatexBlindfold:"R98",LeatherBlindfold:"R98",LeatherSlimMask:"R98",LeatherSlimMaskOpenEyes:"R98",LeatherSlimMaskOpenMouth:"R98",LewdBlindfold:"R98",MedicalPatch:"R98",PaddedBlindfold:"R98",Pantyhose:"R98",PrisonLockdownBlindfold:"R98",Ribbons:"R98",RopeBlindfold:"R98",ScarfBlindfold:"R98",SleepMask:"R98",Slime:"R98",SmallBlindfold:"R98",Snorkel:"R98",Stitches:"R98",StuddedBlindfold:"R98",Tentacles:"R98",WebBlindfold:"R98"},wm={AccentHood:"R98",Balloon:"R111",BigMouthHood:"R101",BlanketHood:"R98",CanvasHood:"R98",CollarHood:"R98",CorsetHood:"R98",CowHood:"R98",CustomBallHood:"R109",CustomLatexHood:"R98",DobermanMask:"R98",DogHood:"R98",DroneMask:"R98",FestivalFoxMask:"R98",FoxHood:"R98",FoxyMask:"R98",Fu:"R104",FuturisticHelmet:"R98",GGTSHelmet:"R98",GP9GasMask:"R98",GasMask:"R98",GwenHood:"R98",HarnessCatMask:"R98",HeadboxSeethrough:"R98",InflatableGagMask:"R98",InflatedBallHood:"R98",Kigu2Hood:"R112",KirugumiMask:"R98",KittyHood:"R98",LampHeadHood:"R98",LatexBunny:"R98",LatexDogHood:"R98",LatexDogMask:"R98",LatexHabit:"R98",LatexHoodOpenHair:"R98",LeatherHood:"R98",LeatherHoodOpenEyes:"R98",LeatherHoodOpenMouth:"R98",LeatherHoodSealed:"R98",LeatherHoodSensDep:"R98",OldGasMask:"R98",OpenFaceHood:"R98",OpenMouthPlugHood:"R98",PantyHood:"R98",Pantyhose:"R98",Paperbag:"R104",PolishedSteelHood:"R98",PonyHood:"R98",PumpkinHead:"R98",RubberMask:"R107",SackHood:"R98",SensoryDeprivationHood:"R98",Slime:"R98",SpaceMask:"R100",TechnoHelmet1:"R98",VacHood:"R98",ZipperHood:"R98"},Cm={Chains:"R98",DuctTape:"R98",FrogtieMetalCuffs:"R103",FrogtieStraps:"R98",FuturisticLegCuffs:"R98",HempRope:"R98",HobbleSkirt:"R98",LeatherBelt:"R98",LeatherDeluxeLegCuffs:"R98",LeatherLegCuffs:"R98",LegBinder:"R98",MedicalBedRestraints:"R98",MermaidTail:"R98",NylonRope:"R98",OrnateLegCuffs:"R98",PlasticWrap:"R98",Ribbons:"R98",SeamlessHobbleSkirt:"R98",SeamlessLegBinder:"R98",ShinyLegBinder:"R98",Slime:"R98",SturdyLeatherBelts:"R98",Tentacles:"R98",Zipties:"R98"},km={BountySuitcase:"R98",BountySuitcaseEmpty:"R98",BunPlush:"R98",CombinationPadlock:"R98",ExclusivePadlock:"R98",FamilyPadlock:"R98",FamilyPadlockKey:"R98",FoxPlush:"R98",HighSecurityPadlock:"R98",IntricatePadlock:"R98",Karl:"R98",Lockpicks:"R98",LoversPadlock:"R98",LoversPadlockKey:"R98",LoversTimerPadlock:"R98",MetalCuffsKey:"R98",MetalPadlock:"R98",MetalPadlockKey:"R98",MistressPadlock:"R98",MistressPadlockKey:"R98",MistressTimerPadlock:"R98",OwnerPadlock:"R98",OwnerPadlockKey:"R98",OwnerTimerPadlock:"R98",PandoraPadlock:"R98",PandoraPadlockKey:"R98",PasswordPadlock:"R98",PetPost:"R98",PetPotato:"R98",PortalLinkPadlock:"R98",SafewordPadlock:"R98",ServingTray:"R98",TeddyBear:"R98",TimerPadlock:"R98",TimerPasswordPadlock:"R98",WoodenMaidTray:"R98",WoodenMaidTrayFull:"R98",WoodenPaddle:"R98",WoodenSign:"R98"},Pm={Ball:"R98",BallGag:"R98",BallGagMask:"R98",BambooGag:"R98",BigMouth:"R98",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CaneGag:"R98",CarrotGag:"R98",ChloroformCloth:"R98",ChopstickGag:"R98",ClothGag:"R98",ClothStuffing:"R98",CropGag:"R98",CupholderGag:"R98",DeepthroatGag:"R98",DentalGag:"R98",DildoGag:"R98",DildoPlugGag:"R98",DogMuzzleExposed:"R98",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FunnelGag:"R98",FurScarf:"R98",FuturisticHarnessBallGag:"R98",FuturisticHarnessPanelGag:"R98",FuturisticMuzzle:"R98",FuturisticPanelGag:"R98",GasMaskGag:"R98",GenitalGag:"R107",GlueGag:"R105",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",HookGagMask:"R98",Kissmark:"R102",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LargeDildo:"R98",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R102",LatexSheathGag:"R98",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",MilkBottle:"R98",ModularGag:"R99",MouthFeatureGag:"R102",MuzzleGag:"R98",OTNPlugGag:"R98",OverfilledGag:"R110",PaciGag:"R98",PacifierGag:"R98",PaddedFaceMask:"R102",PantiesMask:"R98",PantyStuffing:"R98",PlasticWrap:"R98",PlugGag:"R98",PonyGag:"R98",PremiumMuzzle:"R110",PrisonLockdownGag:"R98",PumpGag:"R98",PumpkinGag:"R98",QualityHarnessGag:"R106",RegressedMilk:"R98",RegularSleepingPill:"R98",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SockStuffing:"R98",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R102",TechnoGag:"R98",Tentacles:"R98",TonguePiercingGag:"R100",TongueStrapGag:"R98",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98",XmasStickerGag:"R111"},xm={Ball:"R103",BallGag:"R98",BallGagMask:"R98",BambooGag:"R103",BigMouth:"R103",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CaneGag:"R103",CarrotGag:"R98",ChloroformCloth:"R98",ChopstickGag:"R103",ClothGag:"R98",ClothStuffing:"R103",CropGag:"R103",CupholderGag:"R98",DeepthroatGag:"R103",DentalGag:"R103",DildoGag:"R98",DildoPlugGag:"R103",DogMuzzleExposed:"R103",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FunnelGag:"R103",FurScarf:"R98",FuturisticHarnessBallGag:"R101",FuturisticHarnessPanelGag:"R101",FuturisticMuzzle:"R98",FuturisticPanelGag:"R101",GasMaskGag:"R98",GenitalGag:"R107",GlueGag:"R105",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",HookGagMask:"R103",Kissmark:"R102",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LargeDildo:"R103",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R102",LatexSheathGag:"R103",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",MilkBottle:"R103",ModularGag:"R99",MouthFeatureGag:"R98",MuzzleGag:"R98",OTNPlugGag:"R103",OverfilledGag:"R110",PaciGag:"R98",PacifierGag:"R103",PaddedFaceMask:"R102",PantiesMask:"R98",PantyStuffing:"R103",PlasticWrap:"R98",PlugGag:"R103",PonyGag:"R98",PremiumMuzzle:"R110",PrisonLockdownGag:"R98",PumpGag:"R103",PumpkinGag:"R98",QualityHarnessGag:"R106",RegressedMilk:"R98",RegularSleepingPill:"R103",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SockStuffing:"R103",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R102",TechnoGag:"R103",Tentacles:"R98",TonguePiercingGag:"R103",TongueStrapGag:"R103",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98",XmasStickerGag:"R111"},Mm={Ball:"R103",BallGag:"R98",BallGagMask:"R98",BambooGag:"R103",BigMouth:"R103",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CaneGag:"R103",CarrotGag:"R98",ChloroformCloth:"R98",ChopstickGag:"R103",ClothGag:"R98",ClothStuffing:"R103",CropGag:"R103",CupholderGag:"R98",DeepthroatGag:"R103",DentalGag:"R103",DildoGag:"R98",DildoPlugGag:"R103",DogMuzzleExposed:"R103",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FunnelGag:"R103",FurScarf:"R98",FuturisticHarnessBallGag:"R101",FuturisticHarnessPanelGag:"R101",FuturisticMuzzle:"R98",FuturisticPanelGag:"R101",GasMaskGag:"R98",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",HookGagMask:"R103",Kissmark:"R98",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LargeDildo:"R103",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R98",LatexSheathGag:"R103",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",MilkBottle:"R103",ModularGag:"R99",MouthFeatureGag:"R102",MuzzleGag:"R98",OTNPlugGag:"R103",OverfilledGag:"R110",PaciGag:"R98",PacifierGag:"R103",PaddedFaceMask:"R98",PantiesMask:"R98",PantyStuffing:"R103",PlasticWrap:"R98",PlugGag:"R103",PonyGag:"R98",PremiumMuzzle:"R110",PrisonLockdownGag:"R98",PumpGag:"R103",PumpkinGag:"R98",QualityHarnessGag:"R106",RegressedMilk:"R98",RegularSleepingPill:"R103",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SockStuffing:"R103",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R98",TechnoGag:"R103",Tentacles:"R98",TonguePiercingGag:"R103",TongueStrapGag:"R103",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98",XmasStickerGag:"R111"},Im={AutoShockCollar:"R98",BatCollar:"R98",BonedNeckCorset:"R98",BordelleCollar:"R98",ClubSlaveCollar:"R98",ComboHarness:"R98",DogCollar:"R98",ExtendablePostureCollar:"R99",FuturisticCollar:"R98",GothicCollar:"R98",HeartCollar:"R98",HeartLinkChoker:"R98",HighCollar:"R98",HighSecurityCollar:"R98",HighStyleSteelCollar:"R98",LatexCollar1:"R98",LatexCollar2:"R98",LatexPostureCollar:"R98",LatexRingCollar:"R99",LeatherChoker:"R98",LeatherCollar:"R98",LeatherCollarBell:"R98",LeatherCollarBow:"R98",LeatherCorsetCollar:"R98",LeatherDeluxeCollar:"R98",LoveLeatherCollar:"R98",MaidCollar:"R98",MoonCollar:"R110",NeckRope:"R98",NobleCorsetCollar:"R98",NylonCollar:"R98",OrnateCollar:"R98",PaddedBeltCollar:"R99",PetCollar:"R98",PetSuitShockCollar:"R98",PostureCollar:"R98",ShinySteelCollar:"R98",ShockCollar:"R98",SlaveCollar:"R98",SlenderSteelCollar:"R98",SpikeCollar:"R98",SpikedChoker:"R99",SteelPostureCollar:"R98",StrictPostureCollar:"R98",SunCollar:"R110",TechnoCollar:"R98"},Fm={CollarAutoShockUnit:"R98",CollarBell:"R98",CollarBow:"R98",CollarButterfly:"R98",CollarCowBell:"R98",CollarFlower:"R98",CollarLapis:"R98",CollarMoon:"R98",CollarNameTag:"R98",CollarNameTagLivestock:"R98",CollarNameTagLover:"R98",CollarNameTagOval:"R98",CollarNameTagPet:"R98",CollarPentagram:"R98",CollarPupBone:"R98",CollarRose:"R98",CollarShockUnit:"R98",CollarSun:"R98",CustomCollarTag:"R98",ElectronicTag:"R98",Key:"R98"},Em={Bedchain:"R111",ChainLeash:"R98",CollarChainLong:"R98",CollarChainMedium:"R98",CollarChainShort:"R98",CollarLeash:"R98",CollarRopeLong:"R98",CollarRopeMedium:"R98",CollarRopeShort:"R98",PetPost:"R98",Post:"R98"},_m={BellClamps:"R98",ChainClamp:"R98",ChainTassles:"R98",ChopStickNippleClamps:"R98",Clothespins:"R98",HeartPasties:"R98",KittyPasties:"R98",LactationPump:"R98",NippleClamp:"R98",NippleClamps2:"R98",NippleSuctionCups:"R98",NippleTape:"R98",NippleVibe:"R98",NippleWeightClamps:"R98",PlateClamps:"R98",ScrewClamps:"R98",ShockClamps:"R98",StretchClovers:"R98",TapedVibeEggs:"R98",VibeNippleClamp:"R98",VibratorRemote:"R98"},Om={BarbellPiercing:"R98",BellPiercing:"R98",CrossedStraightPiercing:"R98",NecklacePiercingChain:"R98",NippleAccessory1:"R98",NippleAccessory2:"R98",NippleAccessory3:"R98",NippleChastityPiercing1:"R98",NippleChastityPiercing2:"R98",RoundPiercing:"R98",StraightPiercing:"R98",VibeHeartPiercings:"R98"},Am={BarbelPiercing:"R98",ClownNose:"R99",DuctTape:"R98",GlueNose:"R105",NoseHook:"R98",NosePlugs:"R98",NoseRing:"R98",PigNose:"R98",PigNoseHook:"R98"},$m={BulkyDiaper:"R98",DiaperHarness:"R98",ForbiddenChastityBelt:"R98",FuturisticChastityBelt:"R98",FuturisticTrainingBelt:"R98",HarnessPanties1:"R98",HarnessPanties2:"R98",HeavyDutyBelt:"R98",HempRope:"R98",HipHarness:"R107",HybridChastityBelt:"R98",LeatherChastityBelt:"R98",LeatherStrapPanties1:"R98",LoveChastityBelt:"R98",MetalChastityBelt:"R98",ModularChastityBelt:"R99",ObedienceBelt:"R98",OrnateChastityBelt:"R98",PelvisChainLeash:"R98",PolishedChastityBelt:"R98",PoofyDiaper:"R98",PortalPanties:"R98",Ribbons:"R98",SciFiPleasurePanties:"R98",SleekLeatherChastityBelt:"R98",SteelChastityPanties:"R98",StraponPanties:"R98",StuddedChastityBelt:"R98",WaistLegHarness:"R111"},Hm={Script:"R98"},Lm={AdultBabyHarness:"R98",ClassicLatexCorset:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",CrotchChain:"R98",FuturisticHarness:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeavyLatexCorset:"R98",HempRopeHarness:"R98",HighSecurityHarness:"R98",HipHarness:"R107",LatexCorset1:"R98",LeatherBreastBinder:"R98",LeatherChestHarness1:"R98",LeatherHarness:"R98",LeatherStrapBra1:"R98",LeatherStrapHarness:"R98",LockingSwimsuit:"R98",LockingSwimsuit2:"R98",NavelBar1:"R98",NylonRopeHarness:"R98",RibbonCorset:"R112",Ribbons:"R98",StuddedHarness:"R98",ThinLeatherStraps:"R98",TightCorset:"R107",Underbust:"R98"},jm={AdultBabyHarness:"R98",ClassicLatexCorset:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",CrotchChain:"R98",FuturisticHarness:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeavyLatexCorset:"R98",HempRopeHarness:"R98",HighSecurityHarness:"R98",HipHarness:"R107",LatexCorset1:"R98",LeatherBreastBinder:"R98",LeatherChestHarness1:"R98",LeatherHarness:"R98",LeatherStrapBra1:"R98",LeatherStrapHarness:"R98",LockingSwimsuit:"R98",LockingSwimsuit2:"R98",NavelBar1:"R98",NylonRopeHarness:"R98",RibbonCorset:"R112",Ribbons:"R98",StuddedHarness:"R98",ThinLeatherStraps:"R98",TightCorset:"R107",Underbust:"R98"},Tm={BasicCockring:"R98",BenWaBalls:"R98",ChastityPouch:"R98",ClitAndDildoVibratorbelt:"R98",ClitSuctionCup:"R98",ClitoralStimulator:"R98",DoubleEndDildo:"R98",FlatChastityCage:"R98",FullCasingCage:"R103",FullLatexSuitWand:"R98",FuturisticVibrator:"R98",HeavyWeightClamp:"R98",HempRopeBelt:"R98",InflatableVibeDildo:"R98",InflatableVibratingPanties:"R98",LatexNulge:"R104",LockingCockring:"R104",LoversVibrator:"R98",LoversVibratorRemote:"R98",PenisDildo:"R98",PlasticChastityCage1:"R98",PlasticChastityCage2:"R98",ShockDildo:"R98",Stitches:"R98",TapeStrips:"R98",TechnoChastityCage:"R98",VibeEggPenisBase:"R98",VibratingDildo:"R98",VibratingEgg:"R98",VibratingLatexPanties:"R98",VibratorRemote:"R98",WandBelt:"R98",WiredEgg:"R98"},Dm={AdornedClitPiercing:"R98",BarbellClitPiercing:"R98",ChastityClitPiercing:"R98",ChastityClitShield:"R98",ClitRing:"R98",CockRingLeash:"R103",HighSecurityVulvaShield:"R98",JewelClitPiercing:"R98",RoundClitPiercing:"R98",StraightClitPiercing:"R98",TapedClitEgg:"R98",UrethralSound:"R103",VibeEggGlans:"R98",VibeHeartClitPiercing:"R98"},Nm={JewelrySet:"R98"},Gm={AngelMask:"R109",AnimalNoses:"R109",AnimeLenses:"R99",BunnyMask1:"R98",BunnyMask2:"R98",BunnyMask3:"R98",ButterflyMask:"R98",DemonMask:"R109",DominoMask:"R98",DroneMask:"R98",EldritchMask:"R109",FacePaint:"R98",FaceScars:"R109",FaceVeil:"R98",FestivalFoxMask:"R98",FoxMask:"R98",FuturisticVisor:"R98",Glitter:"R98",HeadHarness:"R98",Kigu2Hood:"R112",Kissmark:"R98",KittyMask1:"R98",KittyMask2:"R98",KittyMask3:"R98",LaceMask1:"R98",LaceMask2:"R98",LatexMuzzleMask:"R99",MedicalMask:"R98",NecromancerHelmet:"R109",OpenFaceHood:"R98",PetNose:"R98",RubberMask:"R107",ShinobiMask:"R98",SwimCap:"R98",VenetianMask:"R98"},Wm={Discreet:"R98",Full:"R98",Regular:"R98"},zm={AnimeGirlNecklace:"R106",Bandana:"R98",BlackHeart:"R98",BodyChainNecklace:"R98",CatsuitCollar:"R98",ChokerTattoo:"R98",ElegantHeartNecklace:"R98",FlowerGarland:"R98",FurScarf:"R98",IDCard:"R98",Necklace1:"R98",Necklace2:"R98",Necklace3:"R98",Necklace4:"R98",NecklaceBallGag:"R98",NecklaceButterfly:"R98",NecklaceKey:"R98",NecklaceLock:"R98",NecklaceRope:"R98",PearlNecklace1:"R105",SatinScarf:"R112"},qm={Nipples1:"R98",Nipples2:"R98",Nipples3:"R98"},Vm={Bikini1:"R98",BoxerShorts:"R98",Briefs:"R98",BulkyDiaper:"R98",CatsuitPanties:"R98",ChinesePanties1:"R98",CockSock:"R98",CowPrintedPanties:"R98",CrotchPanties1:"R98",Diapers1:"R98",Diapers2:"R98",Diapers3:"R98",Diapers4:"R98",FloralPanties2:"R98",FlowerPanties:"R98",HarnessPanties1:"R98",HarnessPanties2:"R98",HipHarness:"R107",Jockstrap:"R98",KittyPanties1:"R98",LatexCrotchlessPanties:"R98",LatexPanties1:"R98",LatexPanties2:"R98",LeatherStrapPanties1:"R98",MaidPanties1:"R98",MaidPanties2:"R98",MaleCatsuitPanties:"R98",MicroThong:"R98",Panties1:"R98",Panties11:"R98",Panties12:"R98",Panties13:"R98",Panties14:"R98",Panties15:"R98",Panties16:"R98",Panties7:"R98",Panties8:"R98",PearlPanties1:"R98",PilotPanties:"R98",PoofyDiaper:"R98",RedBowPanties:"R98",SexyBeachPanties1:"R98",StringPanties1:"R98",StringPasty1:"R98",StringThong:"R98",SunstripePanties1:"R98",Thong:"R98",WaistLegHarness:"R111",WrapPanties1:"R98",ZipPanties1:"R98"},Um={HeHim:"R98",SheHer:"R98"},Km={Penis:"R98",Pussy1:"R98",Pussy2:"R98",Pussy3:"R98"},Jm={AnimeGirlBoots:"R106",AnkleBoots1:"R98",AnkleStrapShoes:"R98",BalletHeels1:"R98",BarefootSandals1:"R98",Boots1:"R98",Clogs:"R99",CustomHeels:"R107",DeluxeBoots:"R98",DutyShoes:"R98",Flippers:"R98",FullLegBoots:"R110",FuturisticHeels2:"R98",FuzzyBoots:"R98",Geta:"R98",Heels1:"R98",Heels2:"R98",Heels3:"R98",IndoorSlippers:"R111",LatexAnkleShoes:"R98",LatexHeels:"R98",MaryShoes:"R102",MistressBoots:"R98",PawBoots:"R98",PonyBoots:"R98",Sandals:"R98",SandalsRS:"R98",Shoes1:"R98",Shoes2:"R98",Shoes4:"R98",Shoes5:"R98",Sneakers1:"R98",Sneakers2:"R98",SneakersSport:"R98",SocialHeels:"R98",StilettoHeels:"R98",StreetBoots:"R98",StrictPonyBoots:"R104",TallerBoots:"R100",ThighBoots:"R98",ThighHighLatexHeels:"R98",WesternBoots:"R98",WitchShoes:"R112",WoollyBootsTall:"R98"},Ym={CowPrintedSocks:"R98",FootlessSocks1:"R98",GradientPantyhose:"R98",HaremStockings:"R98",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",LongFishnets:"R110",Pantyhose1:"R98",Pantyhose2:"R98",ReverseBunnySuit:"R98",RippedPantyhose:"R111",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98",YuletideVelvetWarmth:"R104"},Zm={CowPrintedSocks:"R98",FootlessSocks1:"R98",HaremStockings:"R98",HeelBinders:"R110",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",LooseSocks:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98"},Xm={CowPrintedSocks:"R98",FootlessSocks1:"R98",HaremStockings:"R98",HeelBinders:"R110",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",LooseSocks:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98"},Qm={Blouse1:"R98",Catsuit:"R98",FishnetTop:"R98",LatexCatsuit:"R98",MaleSeamlessCatsuit:"R98",PilotSuit:"R98",ReverseBunnySuit:"R98",SeamlessCatsuit:"R98",SeethroughSuit:"R98",SeethroughSuitZip:"R98",SleevelessCatsuit:"R98",SleevelessSlimLatexLeotard:"R98"},eR={Catsuit:"R98",CatsuitPanties:"R98",LatexCatsuit:"R98",LongFishnets:"R110",MaleCatsuitPanties:"R98",MaleSeamlessCatsuit:"R98",Pantyhose1:"R98",Pantyhose2:"R98",PilotPanties:"R98",PilotSuit:"R98",ReverseBunnySuit:"R98",RippedPantyhose:"R111",SeamlessCatsuit:"R98",SeethroughSuit:"R98",SeethroughSuitZip:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98"},tR={BunnyTailStrap:"R98",CowtailStrap:"R98",DemonPlug:"R98",DragonTailStrap1:"R98",DragonTailStrap2Left:"R104",DragonTailStrap2Right:"R104",FoxTailStrap1:"R98",FoxTailStrap2:"R98",FoxTailsStrap:"R98",HorseTailStrap:"R98",HorseTailStrap1:"R98",KittenTailStrap1:"R98",KittenTailStrap2:"R98",LatexFoxTail:"R109",LionTailStrap:"R98",MouseTailStrap1:"R98",MouseTailStrap2:"R98",PuppyTailStrap:"R98",PuppyTailStrap1:"R98",RaccoonStrap:"R98",RaccoonTailStrap:"R98",SkunkTail:"R109",SuccubusHeartTailStrap:"R98",SuccubusTailStrap:"R98",TailStrap:"R98",Tentacles:"R98",WolfTailStrap1:"R98",WolfTailStrap2:"R98",WolfTailStrap3:"R98"},nR={AngelFeather:"R98",AngelWings:"R98",BatWings:"R98",BeeWings:"R98",CyberWings:"R98",DevilWings:"R98",DragonWings:"R107",FairyWings:"R98",FallenAngelWings:"R98",PixieWings:"R98",SteampunkWings:"R98",SuccubusFeather:"R98",SuccubusWings:"R98"},rR={AnkletLeft:Ig,AnkletRight:Fg,ArmsLeft:Eg,ArmsRight:_g,Blush:Og,BodyLower:Ag,BodyMarkings:$g,BodyUpper:Hg,Bra:Lg,Bracelet:jg,Cloth:Tg,ClothAccessory:Dg,ClothLower:Ng,Corset:Gg,Emoticon:Wg,Eyebrows:zg,Eyes:qg,Eyes2:Vg,EyeShadow:Ug,FaceMarkings:Kg,FacialHair:Jg,Fluids:Yg,Garters:Zg,Glasses:Xg,Gloves:Qg,HairAccessory1:em,HairAccessory2:tm,HairAccessory3:nm,HairBack:rm,HairFront:im,HandAccessoryLeft:om,HandAccessoryRight:am,HandsLeft:sm,HandsRight:lm,Hat:um,Head:cm,Height:dm,ItemAddon:hm,ItemArms:pm,ItemBoots:fm,ItemBreast:gm,ItemButt:mm,ItemDevices:Rm,ItemEars:vm,ItemFeet:bm,ItemHandheld:ym,ItemHands:Sm,ItemHead:Bm,ItemHood:wm,ItemLegs:Cm,ItemMisc:km,ItemMouth:Pm,ItemMouth2:xm,ItemMouth3:Mm,ItemNeck:Im,ItemNeckAccessories:Fm,ItemNeckRestraints:Em,ItemNipples:_m,ItemNipplesPiercings:Om,ItemNose:Am,ItemPelvis:$m,ItemScript:Hm,ItemTorso:Lm,ItemTorso2:jm,ItemVulva:Tm,ItemVulvaPiercings:Dm,Jewelry:Nm,Mask:Gm,Mouth:Wm,Necklace:zm,Nipples:qm,Panties:Vm,Pronouns:Um,Pussy:Km,Shoes:Jm,Socks:Ym,SocksLeft:Zm,SocksRight:Xm,Suit:Qm,SuitLower:eR,TailStraps:tR,Wings:nR},iR=Object.freeze({__proto__:null,AnkletLeft:Ig,AnkletRight:Fg,ArmsLeft:Eg,ArmsRight:_g,Blush:Og,BodyLower:Ag,BodyMarkings:$g,BodyUpper:Hg,Bra:Lg,Bracelet:jg,Cloth:Tg,ClothAccessory:Dg,ClothLower:Ng,Corset:Gg,Emoticon:Wg,EyeShadow:Ug,Eyebrows:zg,Eyes:qg,Eyes2:Vg,FaceMarkings:Kg,FacialHair:Jg,Fluids:Yg,Garters:Zg,Glasses:Xg,Gloves:Qg,HairAccessory1:em,HairAccessory2:tm,HairAccessory3:nm,HairBack:rm,HairFront:im,HandAccessoryLeft:om,HandAccessoryRight:am,HandsLeft:sm,HandsRight:lm,Hat:um,Head:cm,Height:dm,ItemAddon:hm,ItemArms:pm,ItemBoots:fm,ItemBreast:gm,ItemButt:mm,ItemDevices:Rm,ItemEars:vm,ItemFeet:bm,ItemHandheld:ym,ItemHands:Sm,ItemHead:Bm,ItemHood:wm,ItemLegs:Cm,ItemMisc:km,ItemMouth:Pm,ItemMouth2:xm,ItemMouth3:Mm,ItemNeck:Im,ItemNeckAccessories:Fm,ItemNeckRestraints:Em,ItemNipples:_m,ItemNipplesPiercings:Om,ItemNose:Am,ItemPelvis:$m,ItemScript:Hm,ItemTorso:Lm,ItemTorso2:jm,ItemVulva:Tm,ItemVulvaPiercings:Dm,Jewelry:Nm,Mask:Gm,Mouth:Wm,Necklace:zm,Nipples:qm,Panties:Vm,Pronouns:Um,Pussy:Km,Shoes:Jm,Socks:Ym,SocksLeft:Zm,SocksRight:Xm,Suit:Qm,SuitLower:eR,TailStraps:tR,Wings:nR,default:rR});let oR;const aR={},sR=Object.freeze({root:"mbs-shop-root",label:"mbs-shop-label",select:"mbs-shop-select",style:"mbs-shop-style"});function lR(){if("All versions"===this.value)delete Shop2Vars.Filters.MBS_VersionFilter,Shop2.ApplyItemFilters();else{const e=aR[this.value];if(!e)return;Shop2Vars.Filters.MBS_VersionFilter=t=>e[`${t.Asset.Group.Name}${t.Asset.Name}`]?["Buy","Sell","Preview"]:[],Shop2.ApplyItemFilters()}}ah(Kf).then((()=>{oh.log("Initializing new item screen hooks");const e=GameVersionFormat.exec(GameVersion);if(null!=e){oR=Number.parseInt(e[1],10);for(const[e,t]of th(iR))for(const[n,r]of th(t)){const t=AssetGet("Female3DCG",e,n);null!=t&&(t.Group.Name===t.DynamicGroupName&&(aR[r]??={},aR[r][`${t.DynamicGroupName}${t.Name}`]=t))}Shop2.Elements.MBS={Coords:[135,445,420,180],Mode:new Set(["Preview","Buy","Sell"]),Draw:()=>null,Load:()=>{let e=document.getElementById(sR.root);if(!e){const t=Object.keys(aR).filter((e=>"R98"!==e)).sort(((e,t)=>{const n=Number.parseInt(e.slice(1),10),r=Number.parseInt(t.slice(1),10);return n>r?-1:r>n?1:0}));e=p("div",{id:sR.root,children:[h("span",{id:sR.label,children:"Filter by BC version"}),p("select",{id:sR.select,"aria-labelledby":sR.label,onChange:lR,children:[h("option",{selected:!0,children:"All versions"}),h("hr",{}),t.map((e=>h("option",{children:e})))]})]}),document.body.append(e)}e.toggleAttribute("data-unload",!1)},Resize:()=>{ElementPositionFix(sR.root,36,...Shop2.Elements.MBS.Coords)},Unload:()=>{document.getElementById(sR.root)?.toggleAttribute("data-unload",!0)},Exit:()=>{ElementRemove(sR.root)}},Rh.hookFunction("Shop2Load",0,((e,t)=>{if(document.getElementById(sR.style)||document.body.append(h("style",{id:sR.style,children:"#mbs-shop-root {\n  display: grid;\n  grid-template-rows: 2fr 3fr;\n}\n#mbs-shop-root[data-unload] {\n  display: none;\n}\n\n#mbs-shop-label {\n  color: white;\n  place-self: center center;\n  user-select: none;\n}\n\n#mbs-shop-select {\n  background-color: var(--mbs-button-color);\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  box-sizing: border-box;\n  color: var(--mbs-text-color);\n  cursor: pointer;\n  font: inherit;\n}\n\n/* stylelint-disable selector-id-pattern */\n#Shop2GroupSelect, #Shop2PoseSelect {\n  z-index: 1;\n}".toString()})),0===Shop2InitVars.Items.length){const e=Object.fromEntries(Object.entries(aR).filter((([e])=>"R98"!==e)).flatMap((([e,t])=>Object.entries(t))));Shop2InitVars.Items=Shop2.ParseAssets(Asset.filter((t=>t.Group.Name===t.DynamicGroupName&&(e[`${t.Group.Name}${t.Name}`]||(Shop2Consts.BuyGroups[t.BuyGroup]?.Value??t.Value)>0)&&!ShopHideGenderedAsset(t))).sort(((e,t)=>e.Group.Category.localeCompare(t.Group.Category)||e.Group.Description.localeCompare(t.Group.Description)||e.Description.localeCompare(t.Description))))}t(e)}))}else oh.error(`Invalid BC version: "${GameVersion}"`)}));const uR=Rh.getOriginalHash,cR=t;return oh.log(`Initializing MBS version ${t}`),ah((()=>Kf(!1))).then((()=>{!function(e){const t=wh.fromBCVersion(e),n=wh.fromBCVersion("R112");if(t.lesser(n))throw new Error(`BC ${GameVersion} detected; MBS requires version R112 or later`);oh.log(`Detected BC ${GameVersion}`)}(GameVersion),function(){const e={};for(const[t,n]of Object.entries(Ch)){const r=Rh.getOriginalHash(t);n.has(r)||(e[t]=r)}const t=Object.values(e).length;0!==t&&oh.warn(`Found ${t} patched functions with an unknown hash`,e)}(),document.body.appendChild(h("style",{id:"mbs-style",children:":root {\n  --mbs-background-color: white;\n  --mbs-button-color: white;\n  --mbs-hover-color: cyan;\n  --mbs-tooltip-color: lightyellow;\n  --mbs-border-color: black;\n  --mbs-text-color: black;\n  --mbs-font-small: min(3.5dvh, 1.75dvw);\n  --mbs-font-large: min(5dvh, 2.5dvw);\n  --mbs-font-family: arial, sans-serif;\n}\n\n.mbs-button {\n  background-origin: content-box;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  height: 100%;\n  overflow: clip;\n  padding-left: min(2dvh, 1dvw);\n  padding-right: min(2dvh, 1dvw);\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 100%;\n}\n.mbs-button:hover {\n  background-color: var(--mbs-hover-color);\n}\n.mbs-button:disabled {\n  background-color: var(--mbs-button-color);\n  filter: brightness(60%);\n}\n\n.mbs-button-tooltip {\n  background-color: var(--mbs-tooltip-color) !important;\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  bottom: -10%;\n  box-shadow: min(0.4dvh, 0.2dvw) min(0.4dvh, 0.2dvw) min(2dvh, 1dvw) 0 rgba(0, 0, 0, 0.5);\n  line-height: 1.4;\n  padding: min(1dvh, 0.5dvw) min(2dvh, 1dvw);\n  position: relative;\n  text-align: center;\n  visibility: hidden;\n  white-space: nowrap;\n  width: fit-content;\n  z-index: 1;\n}\n\n.mbs-button-div {\n  display: grid;\n  grid-template-columns: min(9dvh, 4.5dvw);\n  grid-template-rows: min(9dvh, 4.5dvw) auto;\n}\n.mbs-button-div .mbs-button-tooltip {\n  justify-self: center;\n}\n.mbs-button-div .mbs-button {\n  height: inherit;\n  width: inherit;\n}\n.mbs-button-div .mbs-button:hover + .mbs-button-tooltip {\n  visibility: visible;\n}\n\n.mbs-timer {\n  height: min(6dvh, 3dvw);\n  text-align: center;\n  width: min(21dvh, 10.5dvw);\n}\n\n.mbs-dropdown-button {\n  border: unset !important;\n  padding-bottom: min(1dvh, 0.5dvw);\n  padding-top: min(1dvh, 0.5dvw);\n}\n.mbs-dropdown-button:nth-child(even) {\n  filter: brightness(85%);\n}\n\n.mbs-dropdown-content {\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  overflow-y: scroll;\n  position: absolute;\n  visibility: hidden;\n  z-index: 1;\n}\n\n.mbs-dropdown:hover .mbs-dropdown-content {\n  visibility: visible;\n}\n\n.mbs-screen {\n  display: grid;\n  position: fixed;\n  text-align: center;\n  user-select: none;\n  visibility: hidden;\n  grid-gap: min(2dvh, 1dvw);\n}\n.mbs-screen h1, .mbs-screen h2, .mbs-screen p, .mbs-screen ul {\n  align-items: center;\n  align-self: center;\n  color: var(--mbs-text-color);\n  font-family: var(--mbs-font-family);\n}\n.mbs-screen h1 {\n  font-size: var(--mbs-font-large);\n}\n.mbs-screen h2 {\n  margin: min(1dvh, 0.5dvw);\n}\n.mbs-screen ul {\n  margin: 0;\n  text-align: left;\n}\n.mbs-screen p, .mbs-screen h2, .mbs-screen ul, .mbs-screen span {\n  font-size: var(--mbs-font-small);\n}\n.mbs-screen div, .mbs-screen input {\n  background-color: var(--mbs-background-color);\n  color: var(--mbs-text-color);\n  font-family: var(--mbs-font-family);\n  font-size: var(--mbs-font-small);\n}\n.mbs-screen button {\n  background-color: var(--mbs-button-color);\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  color: var(--mbs-text-color);\n  font-family: var(--mbs-font-family);\n  font-size: var(--mbs-font-small);\n}\n.mbs-screen input {\n  box-sizing: border-box;\n  padding: unset;\n}\n.mbs-screen input:invalid {\n  background-color: #fbb;\n  box-shadow: 0 0 3px 2px #c22;\n}\n.mbs-screen input[type=checkbox] {\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  height: min(7dvh, 3.5dvw);\n  width: min(7dvh, 3.5dvw);\n}\n.mbs-screen input[type=checkbox]:hover {\n  background-color: var(--mbs-hover-color);\n}\n.mbs-screen input[type=checkbox]:disabled {\n  background-color: var(--mbs-background-color);\n  filter: brightness(60%);\n}\n.mbs-screen input[type=checkbox]::before {\n  height: min(4.6dvh, 2.3dvw);\n  width: min(4.6dvh, 2.3dvw);\n}".toString()}))})),e.API_VERSION=dg,e.MBS_VERSION=cR,e._getOriginalHash=uR,e._toItemBundles=zh,e._unpackSettings=yf,e.css=cg,e.getDebug=hg,e.runTests=xg,e.wheelOutfits=sg,e}({});
//# sourceMappingURL=mbs.js.map
