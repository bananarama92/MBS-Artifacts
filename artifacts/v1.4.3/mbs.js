var mbs=function(e){"use strict";const t="1.4.3";Object.create;Object.create;function r(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function n(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}"function"==typeof SuppressedError&&SuppressedError;var o="object"==typeof global&&global&&global.Object===Object&&global,i="object"==typeof self&&self&&self.Object===Object&&self,a=o||i||Function("return this")(),s=a.Symbol,l=Object.prototype,u=l.hasOwnProperty,c=l.toString,f=s?s.toStringTag:void 0;var h=Object.prototype.toString;var d="[object Null]",p="[object Undefined]",R=s?s.toStringTag:void 0;function g(e){return null==e?void 0===e?p:d:R&&R in Object(e)?function(e){var t=u.call(e,f),r=e[f];try{e[f]=void 0;var n=!0}catch(e){}var o=c.call(e);return n&&(t?e[f]=r:delete e[f]),o}(e):function(e){return h.call(e)}(e)}function m(e){return null!=e&&"object"==typeof e}var y="[object Symbol]";function v(e){return"symbol"==typeof e||m(e)&&g(e)==y}var S=NaN;function b(e){return"number"==typeof e?e:v(e)?S:+e}function C(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var w=Array.isArray,B=1/0,k=s?s.prototype:void 0,P=k?k.toString:void 0;function M(e){if("string"==typeof e)return e;if(w(e))return C(e,M)+"";if(v(e))return P?P.call(e):"";var t=e+"";return"0"==t&&1/e==-B?"-0":t}function x(e,t){return function(r,n){var o;if(void 0===r&&void 0===n)return t;if(void 0!==r&&(o=r),void 0!==n){if(void 0===o)return n;"string"==typeof r||"string"==typeof n?(r=M(r),n=M(n)):(r=b(r),n=b(n)),o=e(r,n)}return o}}var _=x((function(e,t){return e+t}),0),I=/\s/;function E(e){for(var t=e.length;t--&&I.test(e.charAt(t)););return t}var F=/^\s+/;function O(e){return e?e.slice(0,E(e)+1).replace(F,""):e}function L(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var $=NaN,A=/^[-+]0x[0-9a-f]+$/i,H=/^0b[01]+$/i,T=/^0o[0-7]+$/i,N=parseInt;function D(e){if("number"==typeof e)return e;if(v(e))return $;if(L(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=L(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=O(e);var r=H.test(e);return r||T.test(e)?N(e.slice(2),r?2:8):A.test(e)?$:+e}var W=1/0,G=17976931348623157e292;function j(e){return e?(e=D(e))===W||e===-W?(e<0?-1:1)*G:e==e?e:0:0===e?e:0}function z(e){var t=j(e),r=t%1;return t==t?r?t-r:t:0}function V(e){return e}var q="[object AsyncFunction]",U="[object Function]",K="[object GeneratorFunction]",J="[object Proxy]";function Z(e){if(!L(e))return!1;var t=g(e);return t==U||t==K||t==q||t==J}var Y,X=a["__core-js_shared__"],Q=(Y=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"";var ee=Function.prototype.toString;function te(e){if(null!=e){try{return ee.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var re=/^\[object .+?Constructor\]$/,ne=Function.prototype,oe=Object.prototype,ie=ne.toString,ae=oe.hasOwnProperty,se=RegExp("^"+ie.call(ae).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function le(e){return!(!L(e)||function(e){return!!Q&&Q in e}(e))&&(Z(e)?se:re).test(te(e))}function ue(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return le(r)?r:void 0}var ce=ue(a,"WeakMap"),fe=ce&&new ce,he=fe?function(e,t){return fe.set(e,t),e}:V,de=Object.create,pe=function(){function e(){}return function(t){if(!L(t))return{};if(de)return de(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Re(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=pe(e.prototype),n=e.apply(r,t);return L(n)?n:r}}var ge=1;function me(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var ye=Math.max;function ve(e,t,r,n){for(var o=-1,i=e.length,a=r.length,s=-1,l=t.length,u=ye(i-a,0),c=Array(l+u),f=!n;++s<l;)c[s]=t[s];for(;++o<a;)(f||o<i)&&(c[r[o]]=e[o]);for(;u--;)c[s++]=e[o++];return c}var Se=Math.max;function be(e,t,r,n){for(var o=-1,i=e.length,a=-1,s=r.length,l=-1,u=t.length,c=Se(i-s,0),f=Array(c+u),h=!n;++o<c;)f[o]=e[o];for(var d=o;++l<u;)f[d+l]=t[l];for(;++a<s;)(h||o<i)&&(f[d+r[a]]=e[o++]);return f}function Ce(){}var we=4294967295;function Be(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=we,this.__views__=[]}function ke(){}Be.prototype=pe(Ce.prototype),Be.prototype.constructor=Be;var Pe=fe?function(e){return fe.get(e)}:ke,Me={},xe=Object.prototype.hasOwnProperty;function _e(e){for(var t=e.name+"",r=Me[t],n=xe.call(Me,t)?r.length:0;n--;){var o=r[n],i=o.func;if(null==i||i==e)return o.name}return t}function Ie(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Ee(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function Fe(e){if(e instanceof Be)return e.clone();var t=new Ie(e.__wrapped__,e.__chain__);return t.__actions__=Ee(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}Ie.prototype=pe(Ce.prototype),Ie.prototype.constructor=Ie;var Oe=Object.prototype.hasOwnProperty;function Le(e){if(m(e)&&!w(e)&&!(e instanceof Be)){if(e instanceof Ie)return e;if(Oe.call(e,"__wrapped__"))return Fe(e)}return new Ie(e)}function $e(e){var t=_e(e),r=Le[t];if("function"!=typeof r||!(t in Be.prototype))return!1;if(e===r)return!0;var n=Pe(r);return!!n&&e===n[0]}Le.prototype=Ce.prototype,Le.prototype.constructor=Le;var Ae=Date.now;function He(e){var t=0,r=0;return function(){var n=Ae(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Te=He(he),Ne=/\{\n\/\* \[wrapped with (.+)\] \*/,De=/,? & /;var We=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function Ge(e){return function(){return e}}var je=function(){try{var e=ue(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),ze=je?function(e,t){return je(e,"toString",{configurable:!0,enumerable:!1,value:Ge(t),writable:!0})}:V,Ve=He(ze);function qe(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function Ue(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function Ke(e){return e!=e}function Je(e,t,r){return t==t?function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}(e,t,r):Ue(e,Ke,r)}function Ze(e,t){return!!(null==e?0:e.length)&&Je(e,t,0)>-1}var Ye=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function Xe(e,t,r){var n=t+"";return Ve(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(We,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return qe(Ye,(function(r){var n="_."+r[0];t&r[1]&&!Ze(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(Ne);return t?t[1].split(De):[]}(n),r)))}var Qe=1,et=2,tt=4,rt=8,nt=32,ot=64;function it(e,t,r,n,o,i,a,s,l,u){var c=t&rt;t|=c?nt:ot,(t&=~(c?ot:nt))&tt||(t&=~(Qe|et));var f=[e,t,o,c?i:void 0,c?a:void 0,c?void 0:i,c?void 0:a,s,l,u],h=r.apply(void 0,f);return $e(e)&&Te(h,f),h.placeholder=n,Xe(h,e,t)}function at(e){return e.placeholder}var st=9007199254740991,lt=/^(?:0|[1-9]\d*)$/;function ut(e,t){var r=typeof e;return!!(t=null==t?st:t)&&("number"==r||"symbol"!=r&&lt.test(e))&&e>-1&&e%1==0&&e<t}var ct=Math.min;var ft="__lodash_placeholder__";function ht(e,t){for(var r=-1,n=e.length,o=0,i=[];++r<n;){var a=e[r];a!==t&&a!==ft||(e[r]=ft,i[o++]=r)}return i}var dt=1,pt=2,Rt=8,gt=16,mt=128,yt=512;function vt(e,t,r,n,o,i,s,l,u,c){var f=t&mt,h=t&dt,d=t&pt,p=t&(Rt|gt),R=t&yt,g=d?void 0:Re(e);return function m(){for(var y=arguments.length,v=Array(y),S=y;S--;)v[S]=arguments[S];if(p)var b=at(m),C=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(v,b);if(n&&(v=ve(v,n,o,p)),i&&(v=be(v,i,s,p)),y-=C,p&&y<c){var w=ht(v,b);return it(e,t,vt,m.placeholder,r,v,w,l,u,c-y)}var B=h?r:this,k=d?B[e]:e;return y=v.length,l?v=function(e,t){for(var r=e.length,n=ct(t.length,r),o=Ee(e);n--;){var i=t[n];e[n]=ut(i,r)?o[i]:void 0}return e}(v,l):R&&y>1&&v.reverse(),f&&u<y&&(v.length=u),this&&this!==a&&this instanceof m&&(k=g||Re(k)),k.apply(B,v)}}var St=1;var bt="__lodash_placeholder__",Ct=1,wt=2,Bt=4,kt=8,Pt=128,Mt=256,xt=Math.min;var _t="Expected a function",It=1,Et=2,Ft=8,Ot=16,Lt=32,$t=64,At=Math.max;function Ht(e,t,r,n,o,i,s,l){var u=t&Et;if(!u&&"function"!=typeof e)throw new TypeError(_t);var c=n?n.length:0;if(c||(t&=~(Lt|$t),n=o=void 0),s=void 0===s?s:At(z(s),0),l=void 0===l?l:z(l),c-=o?o.length:0,t&$t){var f=n,h=o;n=o=void 0}var d=u?void 0:Pe(e),p=[e,t,r,n,o,f,h,i,s,l];if(d&&function(e,t){var r=e[1],n=t[1],o=r|n,i=o<(Ct|wt|Pt),a=n==Pt&&r==kt||n==Pt&&r==Mt&&e[7].length<=t[8]||n==(Pt|Mt)&&t[7].length<=t[8]&&r==kt;if(!i&&!a)return e;n&Ct&&(e[2]=t[2],o|=r&Ct?0:Bt);var s=t[3];if(s){var l=e[3];e[3]=l?ve(l,s,t[4]):s,e[4]=l?ht(e[3],bt):t[4]}(s=t[5])&&(l=e[5],e[5]=l?be(l,s,t[6]):s,e[6]=l?ht(e[5],bt):t[6]),(s=t[7])&&(e[7]=s),n&Pt&&(e[8]=null==e[8]?t[8]:xt(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o}(p,d),e=p[0],t=p[1],r=p[2],n=p[3],o=p[4],!(l=p[9]=void 0===p[9]?u?0:e.length:At(p[9]-c,0))&&t&(Ft|Ot)&&(t&=~(Ft|Ot)),t&&t!=It)R=t==Ft||t==Ot?function(e,t,r){var n=Re(e);return function o(){for(var i=arguments.length,s=Array(i),l=i,u=at(o);l--;)s[l]=arguments[l];var c=i<3&&s[0]!==u&&s[i-1]!==u?[]:ht(s,u);return(i-=c.length)<r?it(e,t,vt,o.placeholder,void 0,s,c,void 0,void 0,r-i):me(this&&this!==a&&this instanceof o?n:e,this,s)}}(e,t,l):t!=Lt&&t!=(It|Lt)||o.length?vt.apply(void 0,p):function(e,t,r,n){var o=t&St,i=Re(e);return function t(){for(var s=-1,l=arguments.length,u=-1,c=n.length,f=Array(c+l),h=this&&this!==a&&this instanceof t?i:e;++u<c;)f[u]=n[u];for(;l--;)f[u++]=arguments[++s];return me(h,o?r:this,f)}}(e,t,r,n);else var R=function(e,t,r){var n=t&ge,o=Re(e);return function t(){return(this&&this!==a&&this instanceof t?o:e).apply(n?r:this,arguments)}}(e,t,r);return Xe((d?he:Te)(R,p),e,t)}var Tt=128;function Nt(e,t,r){return t=r?void 0:t,t=e&&null==t?e.length:t,Ht(e,Tt,void 0,void 0,void 0,void 0,t)}function Dt(e,t,r){"__proto__"==t&&je?je(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Wt(e,t){return e===t||e!=e&&t!=t}var Gt=Object.prototype.hasOwnProperty;function jt(e,t,r){var n=e[t];Gt.call(e,t)&&Wt(n,r)&&(void 0!==r||t in e)||Dt(e,t,r)}function zt(e,t,r,n){var o=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var s=t[i],l=n?n(r[s],e[s],s,r,e):void 0;void 0===l&&(l=e[s]),o?Dt(r,s,l):jt(r,s,l)}return r}var Vt=Math.max;function qt(e,t,r){return t=Vt(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=Vt(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(a),me(e,this,s)}}function Ut(e,t){return Ve(qt(e,t,V),e+"")}var Kt=9007199254740991;function Jt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Kt}function Zt(e){return null!=e&&Jt(e.length)&&!Z(e)}function Yt(e,t,r){if(!L(r))return!1;var n=typeof t;return!!("number"==n?Zt(r)&&ut(t,r.length):"string"==n&&t in r)&&Wt(r[t],e)}function Xt(e){return Ut((function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&Yt(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n,i)}return t}))}var Qt=Object.prototype;function er(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Qt)}function tr(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function rr(e){return m(e)&&"[object Arguments]"==g(e)}var nr=Object.prototype,or=nr.hasOwnProperty,ir=nr.propertyIsEnumerable,ar=rr(function(){return arguments}())?rr:function(e){return m(e)&&or.call(e,"callee")&&!ir.call(e,"callee")};function sr(){return!1}var lr="object"==typeof e&&e&&!e.nodeType&&e,ur=lr&&"object"==typeof module&&module&&!module.nodeType&&module,cr=ur&&ur.exports===lr?a.Buffer:void 0,fr=(cr?cr.isBuffer:void 0)||sr,hr={};function dr(e){return function(t){return e(t)}}hr["[object Float32Array]"]=hr["[object Float64Array]"]=hr["[object Int8Array]"]=hr["[object Int16Array]"]=hr["[object Int32Array]"]=hr["[object Uint8Array]"]=hr["[object Uint8ClampedArray]"]=hr["[object Uint16Array]"]=hr["[object Uint32Array]"]=!0,hr["[object Arguments]"]=hr["[object Array]"]=hr["[object ArrayBuffer]"]=hr["[object Boolean]"]=hr["[object DataView]"]=hr["[object Date]"]=hr["[object Error]"]=hr["[object Function]"]=hr["[object Map]"]=hr["[object Number]"]=hr["[object Object]"]=hr["[object RegExp]"]=hr["[object Set]"]=hr["[object String]"]=hr["[object WeakMap]"]=!1;var pr="object"==typeof e&&e&&!e.nodeType&&e,Rr=pr&&"object"==typeof module&&module&&!module.nodeType&&module,gr=Rr&&Rr.exports===pr&&o.process,mr=function(){try{var e=Rr&&Rr.require&&Rr.require("util").types;return e||gr&&gr.binding&&gr.binding("util")}catch(e){}}(),yr=mr&&mr.isTypedArray,vr=yr?dr(yr):function(e){return m(e)&&Jt(e.length)&&!!hr[g(e)]},Sr=Object.prototype.hasOwnProperty;function br(e,t){var r=w(e),n=!r&&ar(e),o=!r&&!n&&fr(e),i=!r&&!n&&!o&&vr(e),a=r||n||o||i,s=a?tr(e.length,String):[],l=s.length;for(var u in e)!t&&!Sr.call(e,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ut(u,l))||s.push(u);return s}function Cr(e,t){return function(r){return e(t(r))}}var wr=Cr(Object.keys,Object),Br=Object.prototype.hasOwnProperty;function kr(e){if(!er(e))return wr(e);var t=[];for(var r in Object(e))Br.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Pr(e){return Zt(e)?br(e):kr(e)}var Mr=Object.prototype.hasOwnProperty,xr=Xt((function(e,t){if(er(t)||Zt(t))zt(t,Pr(t),e);else for(var r in t)Mr.call(t,r)&&jt(e,r,t[r])}));var _r=Object.prototype.hasOwnProperty;function Ir(e){if(!L(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=er(e),r=[];for(var n in e)("constructor"!=n||!t&&_r.call(e,n))&&r.push(n);return r}function Er(e){return Zt(e)?br(e,!0):Ir(e)}var Fr=Xt((function(e,t){zt(t,Er(t),e)})),Or=Xt((function(e,t,r,n){zt(t,Er(t),e,n)})),Lr=Xt((function(e,t,r,n){zt(t,Pr(t),e,n)})),$r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ar=/^\w*$/;function Hr(e,t){if(w(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!v(e))||(Ar.test(e)||!$r.test(e)||null!=t&&e in Object(t))}var Tr=ue(Object,"create");var Nr=Object.prototype.hasOwnProperty;var Dr=Object.prototype.hasOwnProperty;function Wr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Gr(e,t){for(var r=e.length;r--;)if(Wt(e[r][0],t))return r;return-1}Wr.prototype.clear=function(){this.__data__=Tr?Tr(null):{},this.size=0},Wr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Wr.prototype.get=function(e){var t=this.__data__;if(Tr){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Nr.call(t,e)?t[e]:void 0},Wr.prototype.has=function(e){var t=this.__data__;return Tr?void 0!==t[e]:Dr.call(t,e)},Wr.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Tr&&void 0===t?"__lodash_hash_undefined__":t,this};var jr=Array.prototype.splice;function zr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}zr.prototype.clear=function(){this.__data__=[],this.size=0},zr.prototype.delete=function(e){var t=this.__data__,r=Gr(t,e);return!(r<0)&&(r==t.length-1?t.pop():jr.call(t,r,1),--this.size,!0)},zr.prototype.get=function(e){var t=this.__data__,r=Gr(t,e);return r<0?void 0:t[r][1]},zr.prototype.has=function(e){return Gr(this.__data__,e)>-1},zr.prototype.set=function(e,t){var r=this.__data__,n=Gr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var Vr=ue(a,"Map");function qr(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function Ur(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ur.prototype.clear=function(){this.size=0,this.__data__={hash:new Wr,map:new(Vr||zr),string:new Wr}},Ur.prototype.delete=function(e){var t=qr(this,e).delete(e);return this.size-=t?1:0,t},Ur.prototype.get=function(e){return qr(this,e).get(e)},Ur.prototype.has=function(e){return qr(this,e).has(e)},Ur.prototype.set=function(e,t){var r=qr(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var Kr="Expected a function";function Jr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Kr);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(Jr.Cache||Ur),r}Jr.Cache=Ur;var Zr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yr=/\\(\\)?/g,Xr=function(e){var t=Jr(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Zr,(function(e,r,n,o){t.push(n?o.replace(Yr,"$1"):r||e)})),t}));function Qr(e){return null==e?"":M(e)}function en(e,t){return w(e)?e:Hr(e,t)?[e]:Xr(Qr(e))}var tn=1/0;function rn(e){if("string"==typeof e||v(e))return e;var t=e+"";return"0"==t&&1/e==-tn?"-0":t}function nn(e,t){for(var r=0,n=(t=en(t,e)).length;null!=e&&r<n;)e=e[rn(t[r++])];return r&&r==n?e:void 0}function on(e,t,r){var n=null==e?void 0:nn(e,t);return void 0===n?r:n}function an(e,t){for(var r=-1,n=t.length,o=Array(n),i=null==e;++r<n;)o[r]=i?void 0:on(e,t[r]);return o}function sn(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var ln=s?s.isConcatSpreadable:void 0;function un(e){return w(e)||ar(e)||!!(ln&&e&&e[ln])}function cn(e,t,r,n,o){var i=-1,a=e.length;for(r||(r=un),o||(o=[]);++i<a;){var s=e[i];t>0&&r(s)?t>1?cn(s,t-1,r,n,o):sn(o,s):n||(o[o.length]=s)}return o}function fn(e){return(null==e?0:e.length)?cn(e,1):[]}function hn(e){return Ve(qt(e,void 0,fn),e+"")}var dn=hn(an),pn=Cr(Object.getPrototypeOf,Object),Rn="[object Object]",gn=Function.prototype,mn=Object.prototype,yn=gn.toString,vn=mn.hasOwnProperty,Sn=yn.call(Object);function bn(e){if(!m(e)||g(e)!=Rn)return!1;var t=pn(e);if(null===t)return!0;var r=vn.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&yn.call(r)==Sn}var Cn="[object DOMException]",wn="[object Error]";function Bn(e){if(!m(e))return!1;var t=g(e);return t==wn||t==Cn||"string"==typeof e.message&&"string"==typeof e.name&&!bn(e)}var kn=Ut((function(e,t){try{return me(e,void 0,t)}catch(e){return Bn(e)?e:new Error(e)}})),Pn="Expected a function";function Mn(e,t){var r;if("function"!=typeof t)throw new TypeError(Pn);return e=z(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}}var xn=Ut((function(e,t,r){var n=1;if(r.length){var o=ht(r,at(xn));n|=32}return Ht(e,n,t,r,o)}));xn.placeholder={};var _n=hn((function(e,t){return qe(t,(function(t){t=rn(t),Dt(e,t,xn(e[t],e))})),e})),In=Ut((function(e,t,r){var n=3;if(r.length){var o=ht(r,at(In));n|=32}return Ht(t,n,e,r,o)}));function En(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}function Fn(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:En(e,t,r)}In.placeholder={};var On=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Ln(e){return On.test(e)}var $n="\\ud800-\\udfff",An="["+$n+"]",Hn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Tn="\\ud83c[\\udffb-\\udfff]",Nn="[^"+$n+"]",Dn="(?:\\ud83c[\\udde6-\\uddff]){2}",Wn="[\\ud800-\\udbff][\\udc00-\\udfff]",Gn="(?:"+Hn+"|"+Tn+")"+"?",jn="[\\ufe0e\\ufe0f]?",zn=jn+Gn+("(?:\\u200d(?:"+[Nn,Dn,Wn].join("|")+")"+jn+Gn+")*"),Vn="(?:"+[Nn+Hn+"?",Hn,Dn,Wn,An].join("|")+")",qn=RegExp(Tn+"(?="+Tn+")|"+Vn+zn,"g");function Un(e){return Ln(e)?function(e){return e.match(qn)||[]}(e):function(e){return e.split("")}(e)}function Kn(e){return function(t){var r=Ln(t=Qr(t))?Un(t):void 0,n=r?r[0]:t.charAt(0),o=r?Fn(r,1).join(""):t.slice(1);return n[e]()+o}}var Jn=Kn("toUpperCase");function Zn(e){return Jn(Qr(e).toLowerCase())}function Yn(e,t,r,n){var o=-1,i=null==e?0:e.length;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}function Xn(e){return function(t){return null==e?void 0:e[t]}}var Qn=Xn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),eo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,to=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");function ro(e){return(e=Qr(e))&&e.replace(eo,Qn).replace(to,"")}var no=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var oo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var io="\\ud800-\\udfff",ao="\\u2700-\\u27bf",so="a-z\\xdf-\\xf6\\xf8-\\xff",lo="A-Z\\xc0-\\xd6\\xd8-\\xde",uo="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",co="["+uo+"]",fo="\\d+",ho="["+ao+"]",po="["+so+"]",Ro="[^"+io+uo+fo+ao+so+lo+"]",go="(?:\\ud83c[\\udde6-\\uddff]){2}",mo="[\\ud800-\\udbff][\\udc00-\\udfff]",yo="["+lo+"]",vo="(?:"+po+"|"+Ro+")",So="(?:"+yo+"|"+Ro+")",bo="(?:['’](?:d|ll|m|re|s|t|ve))?",Co="(?:['’](?:D|LL|M|RE|S|T|VE))?",wo="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Bo="[\\ufe0e\\ufe0f]?",ko=Bo+wo+("(?:\\u200d(?:"+["[^"+io+"]",go,mo].join("|")+")"+Bo+wo+")*"),Po="(?:"+[ho,go,mo].join("|")+")"+ko,Mo=RegExp([yo+"?"+po+"+"+bo+"(?="+[co,yo,"$"].join("|")+")",So+"+"+Co+"(?="+[co,yo+vo,"$"].join("|")+")",yo+"?"+vo+"+"+bo,yo+"+"+Co,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fo,Po].join("|"),"g");function xo(e,t,r){return e=Qr(e),void 0===(t=r?void 0:t)?function(e){return oo.test(e)}(e)?function(e){return e.match(Mo)||[]}(e):function(e){return e.match(no)||[]}(e):e.match(t)||[]}var _o=RegExp("['’]","g");function Io(e){return function(t){return Yn(xo(ro(t).replace(_o,"")),e,"")}}var Eo=Io((function(e,t,r){return t=t.toLowerCase(),e+(r?Zn(t):t)}));var Fo=a.isFinite,Oo=Math.min;function Lo(e){var t=Math[e];return function(e,r){if(e=D(e),(r=null==r?0:Oo(z(r),292))&&Fo(e)){var n=(Qr(e)+"e").split("e");return+((n=(Qr(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var $o=Lo("ceil");function Ao(e){var t=Le(e);return t.__chain__=!0,t}var Ho=Math.ceil,To=Math.max;function No(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}function Do(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=D(r))==r?r:0),void 0!==t&&(t=(t=D(t))==t?t:0),No(D(e),t,r)}function Wo(e){var t=this.__data__=new zr(e);this.size=t.size}function Go(e,t){return e&&zt(t,Pr(t),e)}Wo.prototype.clear=function(){this.__data__=new zr,this.size=0},Wo.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Wo.prototype.get=function(e){return this.__data__.get(e)},Wo.prototype.has=function(e){return this.__data__.has(e)},Wo.prototype.set=function(e,t){var r=this.__data__;if(r instanceof zr){var n=r.__data__;if(!Vr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ur(n)}return r.set(e,t),this.size=r.size,this};var jo="object"==typeof e&&e&&!e.nodeType&&e,zo=jo&&"object"==typeof module&&module&&!module.nodeType&&module,Vo=zo&&zo.exports===jo?a.Buffer:void 0,qo=Vo?Vo.allocUnsafe:void 0;function Uo(e,t){if(t)return e.slice();var r=e.length,n=qo?qo(r):new e.constructor(r);return e.copy(n),n}function Ko(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}function Jo(){return[]}var Zo=Object.prototype.propertyIsEnumerable,Yo=Object.getOwnPropertySymbols,Xo=Yo?function(e){return null==e?[]:(e=Object(e),Ko(Yo(e),(function(t){return Zo.call(e,t)})))}:Jo;var Qo=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)sn(t,Xo(e)),e=pn(e);return t}:Jo;function ei(e,t,r){var n=t(e);return w(e)?n:sn(n,r(e))}function ti(e){return ei(e,Pr,Xo)}function ri(e){return ei(e,Er,Qo)}var ni=ue(a,"DataView"),oi=ue(a,"Promise"),ii=ue(a,"Set"),ai="[object Map]",si="[object Promise]",li="[object Set]",ui="[object WeakMap]",ci="[object DataView]",fi=te(ni),hi=te(Vr),di=te(oi),pi=te(ii),Ri=te(ce),gi=g;(ni&&gi(new ni(new ArrayBuffer(1)))!=ci||Vr&&gi(new Vr)!=ai||oi&&gi(oi.resolve())!=si||ii&&gi(new ii)!=li||ce&&gi(new ce)!=ui)&&(gi=function(e){var t=g(e),r="[object Object]"==t?e.constructor:void 0,n=r?te(r):"";if(n)switch(n){case fi:return ci;case hi:return ai;case di:return si;case pi:return li;case Ri:return ui}return t});var mi=gi,yi=Object.prototype.hasOwnProperty;var vi=a.Uint8Array;function Si(e){var t=new e.constructor(e.byteLength);return new vi(t).set(new vi(e)),t}var bi=/\w*$/;var Ci=s?s.prototype:void 0,wi=Ci?Ci.valueOf:void 0;function Bi(e,t){var r=t?Si(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var ki="[object Boolean]",Pi="[object Date]",Mi="[object Map]",xi="[object Number]",_i="[object RegExp]",Ii="[object Set]",Ei="[object String]",Fi="[object Symbol]",Oi="[object ArrayBuffer]",Li="[object DataView]",$i="[object Float32Array]",Ai="[object Float64Array]",Hi="[object Int8Array]",Ti="[object Int16Array]",Ni="[object Int32Array]",Di="[object Uint8Array]",Wi="[object Uint8ClampedArray]",Gi="[object Uint16Array]",ji="[object Uint32Array]";function zi(e,t,r){var n,o=e.constructor;switch(t){case Oi:return Si(e);case ki:case Pi:return new o(+e);case Li:return function(e,t){var r=t?Si(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case $i:case Ai:case Hi:case Ti:case Ni:case Di:case Wi:case Gi:case ji:return Bi(e,r);case Mi:return new o;case xi:case Ei:return new o(e);case _i:return function(e){var t=new e.constructor(e.source,bi.exec(e));return t.lastIndex=e.lastIndex,t}(e);case Ii:return new o;case Fi:return n=e,wi?Object(wi.call(n)):{}}}function Vi(e){return"function"!=typeof e.constructor||er(e)?{}:pe(pn(e))}var qi=mr&&mr.isMap,Ui=qi?dr(qi):function(e){return m(e)&&"[object Map]"==mi(e)};var Ki=mr&&mr.isSet,Ji=Ki?dr(Ki):function(e){return m(e)&&"[object Set]"==mi(e)},Zi=1,Yi=2,Xi=4,Qi="[object Arguments]",ea="[object Function]",ta="[object GeneratorFunction]",ra="[object Object]",na={};function oa(e,t,r,n,o,i){var a,s=t&Zi,l=t&Yi,u=t&Xi;if(r&&(a=o?r(e,n,o,i):r(e)),void 0!==a)return a;if(!L(e))return e;var c=w(e);if(c){if(a=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&yi.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!s)return Ee(e,a)}else{var f=mi(e),h=f==ea||f==ta;if(fr(e))return Uo(e,s);if(f==ra||f==Qi||h&&!o){if(a=l||h?{}:Vi(e),!s)return l?function(e,t){return zt(e,Qo(e),t)}(e,function(e,t){return e&&zt(t,Er(t),e)}(a,e)):function(e,t){return zt(e,Xo(e),t)}(e,Go(a,e))}else{if(!na[f])return o?e:{};a=zi(e,f,s)}}i||(i=new Wo);var d=i.get(e);if(d)return d;i.set(e,a),Ji(e)?e.forEach((function(n){a.add(oa(n,t,r,n,e,i))})):Ui(e)&&e.forEach((function(n,o){a.set(o,oa(n,t,r,o,e,i))}));var p=c?void 0:(u?l?ri:ti:l?Er:Pr)(e);return qe(p||e,(function(n,o){p&&(n=e[o=n]),jt(a,o,oa(n,t,r,o,e,i))})),a}na[Qi]=na["[object Array]"]=na["[object ArrayBuffer]"]=na["[object DataView]"]=na["[object Boolean]"]=na["[object Date]"]=na["[object Float32Array]"]=na["[object Float64Array]"]=na["[object Int8Array]"]=na["[object Int16Array]"]=na["[object Int32Array]"]=na["[object Map]"]=na["[object Number]"]=na[ra]=na["[object RegExp]"]=na["[object Set]"]=na["[object String]"]=na["[object Symbol]"]=na["[object Uint8Array]"]=na["[object Uint8ClampedArray]"]=na["[object Uint16Array]"]=na["[object Uint32Array]"]=!0,na["[object Error]"]=na[ea]=na["[object WeakMap]"]=!1;var ia=4;function aa(e){return oa(e,ia)}var sa=1,la=4;function ua(e){return oa(e,sa|la)}function ca(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Ur;++t<r;)this.add(e[t])}function fa(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function ha(e,t){return e.has(t)}ca.prototype.add=ca.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ca.prototype.has=function(e){return this.__data__.has(e)};var da=1,pa=2;function Ra(e,t,r,n,o,i){var a=r&da,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=i.get(e),c=i.get(t);if(u&&c)return u==t&&c==e;var f=-1,h=!0,d=r&pa?new ca:void 0;for(i.set(e,t),i.set(t,e);++f<s;){var p=e[f],R=t[f];if(n)var g=a?n(R,p,f,t,e,i):n(p,R,f,e,t,i);if(void 0!==g){if(g)continue;h=!1;break}if(d){if(!fa(t,(function(e,t){if(!ha(d,t)&&(p===e||o(p,e,r,n,i)))return d.push(t)}))){h=!1;break}}else if(p!==R&&!o(p,R,r,n,i)){h=!1;break}}return i.delete(e),i.delete(t),h}function ga(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function ma(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var ya=1,va=2,Sa="[object Boolean]",ba="[object Date]",Ca="[object Error]",wa="[object Map]",Ba="[object Number]",ka="[object RegExp]",Pa="[object Set]",Ma="[object String]",xa="[object Symbol]",_a="[object ArrayBuffer]",Ia="[object DataView]",Ea=s?s.prototype:void 0,Fa=Ea?Ea.valueOf:void 0;var Oa=1,La=Object.prototype.hasOwnProperty;var $a=1,Aa="[object Arguments]",Ha="[object Array]",Ta="[object Object]",Na=Object.prototype.hasOwnProperty;function Da(e,t,r,n,o,i){var a=w(e),s=w(t),l=a?Ha:mi(e),u=s?Ha:mi(t),c=(l=l==Aa?Ta:l)==Ta,f=(u=u==Aa?Ta:u)==Ta,h=l==u;if(h&&fr(e)){if(!fr(t))return!1;a=!0,c=!1}if(h&&!c)return i||(i=new Wo),a||vr(e)?Ra(e,t,r,n,o,i):function(e,t,r,n,o,i,a){switch(r){case Ia:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _a:return!(e.byteLength!=t.byteLength||!i(new vi(e),new vi(t)));case Sa:case ba:case Ba:return Wt(+e,+t);case Ca:return e.name==t.name&&e.message==t.message;case ka:case Ma:return e==t+"";case wa:var s=ga;case Pa:var l=n&ya;if(s||(s=ma),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;n|=va,a.set(e,t);var c=Ra(s(e),s(t),n,o,i,a);return a.delete(e),c;case xa:if(Fa)return Fa.call(e)==Fa.call(t)}return!1}(e,t,l,r,n,o,i);if(!(r&$a)){var d=c&&Na.call(e,"__wrapped__"),p=f&&Na.call(t,"__wrapped__");if(d||p){var R=d?e.value():e,g=p?t.value():t;return i||(i=new Wo),o(R,g,r,n,i)}}return!!h&&(i||(i=new Wo),function(e,t,r,n,o,i){var a=r&Oa,s=ti(e),l=s.length;if(l!=ti(t).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in t:La.call(t,c)))return!1}var f=i.get(e),h=i.get(t);if(f&&h)return f==t&&h==e;var d=!0;i.set(e,t),i.set(t,e);for(var p=a;++u<l;){var R=e[c=s[u]],g=t[c];if(n)var m=a?n(g,R,c,t,e,i):n(R,g,c,e,t,i);if(!(void 0===m?R===g||o(R,g,r,n,i):m)){d=!1;break}p||(p="constructor"==c)}if(d&&!p){var y=e.constructor,v=t.constructor;y==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v||(d=!1)}return i.delete(e),i.delete(t),d}(e,t,r,n,o,i))}function Wa(e,t,r,n,o){return e===t||(null==e||null==t||!m(e)&&!m(t)?e!=e&&t!=t:Da(e,t,r,n,Wa,o))}var Ga=1,ja=2;function za(e,t,r,n){var o=r.length,i=o,a=!n;if(null==e)return!i;for(e=Object(e);o--;){var s=r[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var l=(s=r[o])[0],u=e[l],c=s[1];if(a&&s[2]){if(void 0===u&&!(l in e))return!1}else{var f=new Wo;if(n)var h=n(u,c,l,e,t,f);if(!(void 0===h?Wa(c,u,Ga|ja,n,f):h))return!1}}return!0}function Va(e){return e==e&&!L(e)}function qa(e){for(var t=Pr(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,Va(o)]}return t}function Ua(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}function Ka(e){var t=qa(e);return 1==t.length&&t[0][2]?Ua(t[0][0],t[0][1]):function(r){return r===e||za(r,e,t)}}function Ja(e,t){return null!=e&&t in Object(e)}function Za(e,t,r){for(var n=-1,o=(t=en(t,e)).length,i=!1;++n<o;){var a=rn(t[n]);if(!(i=null!=e&&r(e,a)))break;e=e[a]}return i||++n!=o?i:!!(o=null==e?0:e.length)&&Jt(o)&&ut(a,o)&&(w(e)||ar(e))}function Ya(e,t){return null!=e&&Za(e,t,Ja)}var Xa=1,Qa=2;function es(e,t){return Hr(e)&&Va(t)?Ua(rn(e),t):function(r){var n=on(r,e);return void 0===n&&n===t?Ya(r,e):Wa(t,n,Xa|Qa)}}function ts(e){return function(t){return null==t?void 0:t[e]}}function rs(e){return Hr(e)?ts(rn(e)):function(e){return function(t){return nn(t,e)}}(e)}function ns(e){return"function"==typeof e?e:null==e?V:"object"==typeof e?w(e)?es(e[0],e[1]):Ka(e):rs(e)}function os(e,t,r){var n=r.length;if(null==e)return!n;for(e=Object(e);n--;){var o=r[n],i=t[o],a=e[o];if(void 0===a&&!(o in e)||!i(a))return!1}return!0}function is(e,t,r,n){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(n,a,r(a),e)}return n}function as(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),s=a.length;s--;){var l=a[e?s:++o];if(!1===r(i[l],l,i))break}return t}}var ss=as();function ls(e,t){return e&&ss(e,t,Pr)}function us(e,t){return function(r,n){if(null==r)return r;if(!Zt(r))return e(r,n);for(var o=r.length,i=t?o:-1,a=Object(r);(t?i--:++i<o)&&!1!==n(a[i],i,a););return r}}var cs=us(ls);function fs(e,t,r,n){return cs(e,(function(e,o,i){t(n,e,r(e),i)})),n}function hs(e,t){return function(r,n){var o=w(r)?is:fs,i=t?t():{};return o(r,e,ns(n),i)}}var ds=Object.prototype.hasOwnProperty,ps=hs((function(e,t,r){ds.call(e,r)?++e[r]:Dt(e,r,1)}));function Rs(e,t,r){var n=Ht(e,8,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=Rs.placeholder,n}Rs.placeholder={};function gs(e,t,r){var n=Ht(e,16,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=gs.placeholder,n}gs.placeholder={};var ms=function(){return a.Date.now()},ys="Expected a function",vs=Math.max,Ss=Math.min;function bs(e,t,r){var n,o,i,a,s,l,u=0,c=!1,f=!1,h=!0;if("function"!=typeof e)throw new TypeError(ys);function d(t){var r=n,i=o;return n=o=void 0,u=t,a=e.apply(i,r)}function p(e){var r=e-l;return void 0===l||r>=t||r<0||f&&e-u>=i}function R(){var e=ms();if(p(e))return g(e);s=setTimeout(R,function(e){var r=t-(e-l);return f?Ss(r,i-(e-u)):r}(e))}function g(e){return s=void 0,h&&n?d(e):(n=o=void 0,a)}function m(){var e=ms(),r=p(e);if(n=arguments,o=this,l=e,r){if(void 0===s)return function(e){return u=e,s=setTimeout(R,t),c?d(e):a}(l);if(f)return clearTimeout(s),s=setTimeout(R,t),d(l)}return void 0===s&&(s=setTimeout(R,t)),a}return t=D(t)||0,L(r)&&(c=!!r.leading,i=(f="maxWait"in r)?vs(D(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h),m.cancel=function(){void 0!==s&&clearTimeout(s),u=0,n=l=o=s=void 0},m.flush=function(){return void 0===s?a:g(ms())},m}var Cs=Object.prototype,ws=Cs.hasOwnProperty,Bs=Ut((function(e,t){e=Object(e);var r=-1,n=t.length,o=n>2?t[2]:void 0;for(o&&Yt(t[0],t[1],o)&&(n=1);++r<n;)for(var i=t[r],a=Er(i),s=-1,l=a.length;++s<l;){var u=a[s],c=e[u];(void 0===c||Wt(c,Cs[u])&&!ws.call(e,u))&&(e[u]=i[u])}return e}));function ks(e,t,r){(void 0!==r&&!Wt(e[t],r)||void 0===r&&!(t in e))&&Dt(e,t,r)}function Ps(e){return m(e)&&Zt(e)}function Ms(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function xs(e){return zt(e,Er(e))}function _s(e,t,r,n,o){e!==t&&ss(t,(function(i,a){if(o||(o=new Wo),L(i))!function(e,t,r,n,o,i,a){var s=Ms(e,r),l=Ms(t,r),u=a.get(l);if(u)ks(e,r,u);else{var c=i?i(s,l,r+"",e,t,a):void 0,f=void 0===c;if(f){var h=w(l),d=!h&&fr(l),p=!h&&!d&&vr(l);c=l,h||d||p?w(s)?c=s:Ps(s)?c=Ee(s):d?(f=!1,c=Uo(l,!0)):p?(f=!1,c=Bi(l,!0)):c=[]:bn(l)||ar(l)?(c=s,ar(s)?c=xs(s):L(s)&&!Z(s)||(c=Vi(l))):f=!1}f&&(a.set(l,c),o(c,l,n,i,a),a.delete(l)),ks(e,r,c)}}(e,t,a,r,_s,n,o);else{var s=n?n(Ms(e,a),i,a+"",e,t,o):void 0;void 0===s&&(s=i),ks(e,a,s)}}),Er)}function Is(e,t,r,n,o,i){return L(e)&&L(t)&&(i.set(t,e),_s(e,t,void 0,Is,i),i.delete(t)),e}var Es=Xt((function(e,t,r,n){_s(e,t,r,n)})),Fs=Ut((function(e){return e.push(void 0,Is),me(Es,void 0,e)}));function Os(e,t,r){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,r)}),t)}var Ls=Ut((function(e,t){return Os(e,1,t)})),$s=Ut((function(e,t,r){return Os(e,D(t)||0,r)}));function As(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}var Hs=200;function Ts(e,t,r,n){var o=-1,i=Ze,a=!0,s=e.length,l=[],u=t.length;if(!s)return l;r&&(t=C(t,dr(r))),n?(i=As,a=!1):t.length>=Hs&&(i=ha,a=!1,t=new ca(t));e:for(;++o<s;){var c=e[o],f=null==r?c:r(c);if(c=n||0!==c?c:0,a&&f==f){for(var h=u;h--;)if(t[h]===f)continue e;l.push(c)}else i(t,f,n)||l.push(c)}return l}var Ns=Ut((function(e,t){return Ps(e)?Ts(e,cn(t,1,Ps,!0)):[]}));function Ds(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Ws=Ut((function(e,t){var r=Ds(t);return Ps(r)&&(r=void 0),Ps(e)?Ts(e,cn(t,1,Ps,!0),ns(r)):[]})),Gs=Ut((function(e,t){var r=Ds(t);return Ps(r)&&(r=void 0),Ps(e)?Ts(e,cn(t,1,Ps,!0),void 0,r):[]})),js=x((function(e,t){return e/t}),1);function zs(e,t,r,n){for(var o=e.length,i=n?o:-1;(n?i--:++i<o)&&t(e[i],i,e););return r?En(e,n?0:i,n?i+1:o):En(e,n?i+1:0,n?o:i)}function Vs(e){return"function"==typeof e?e:V}function qs(e,t){return(w(e)?qe:cs)(e,Vs(t))}function Us(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}var Ks=as(!0);function Js(e,t){return e&&Ks(e,t,Pr)}var Zs=us(Js,!0);function Ys(e,t){return(w(e)?Us:Zs)(e,Vs(t))}function Xs(e){return function(t){var r=mi(t);return"[object Map]"==r?ga(t):"[object Set]"==r?function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}(t):function(e,t){return C(t,(function(t){return[t,e[t]]}))}(t,e(t))}}var Qs=Xs(Pr),el=Xs(Er),tl=Xn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),rl=/[&<>"']/g,nl=RegExp(rl.source);function ol(e){return(e=Qr(e))&&nl.test(e)?e.replace(rl,tl):e}var il=/[\\^$.*+?()[\]{}|]/g,al=RegExp(il.source);function sl(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function ll(e,t){var r=!0;return cs(e,(function(e,n,o){return r=!!t(e,n,o)})),r}var ul=4294967295;function cl(e){return e?No(z(e),0,ul):0}function fl(e,t){var r=[];return cs(e,(function(e,n,o){t(e,n,o)&&r.push(e)})),r}function hl(e){return function(t,r,n){var o=Object(t);if(!Zt(t)){var i=ns(r);t=Pr(t),r=function(e){return i(o[e],e,o)}}var a=e(t,r,n);return a>-1?o[i?t[a]:a]:void 0}}var dl=Math.max;function pl(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=null==r?0:z(r);return o<0&&(o=dl(n+o,0)),Ue(e,ns(t),o)}var Rl=hl(pl);function gl(e,t,r){var n;return r(e,(function(e,r,o){if(t(e,r,o))return n=r,!1})),n}var ml=Math.max,yl=Math.min;function vl(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=n-1;return void 0!==r&&(o=z(r),o=r<0?ml(n+o,0):yl(o,n-1)),Ue(e,ns(t),o,!0)}var Sl=hl(vl);function bl(e){return e&&e.length?e[0]:void 0}function Cl(e,t){var r=-1,n=Zt(e)?Array(e.length):[];return cs(e,(function(e,o,i){n[++r]=t(e,o,i)})),n}function wl(e,t){return(w(e)?C:Cl)(e,ns(t))}var Bl=1/0;var kl=1/0;var Pl=Lo("floor");function Ml(e){return hn((function(t){var r=t.length,n=r,o=Ie.prototype.thru;for(e&&t.reverse();n--;){var i=t[n];if("function"!=typeof i)throw new TypeError("Expected a function");if(o&&!a&&"wrapper"==_e(i))var a=new Ie([],!0)}for(n=a?n:r;++n<r;){var s=_e(i=t[n]),l="wrapper"==s?Pe(i):void 0;a=l&&$e(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?a[_e(l[0])].apply(a,l[3]):1==i.length&&$e(i)?a[s]():a.thru(i)}return function(){var e=arguments,n=e[0];if(a&&1==e.length&&w(n))return a.plant(n).value();for(var o=0,i=r?t[o].apply(this,e):n;++o<r;)i=t[o].call(this,i);return i}}))}var xl=Ml(),_l=Ml(!0);function Il(e,t){return Ko(t,(function(t){return Z(e[t])}))}var El=Object.prototype.hasOwnProperty,Fl=hs((function(e,t,r){El.call(e,r)?e[r].push(t):Dt(e,r,[t])}));function Ol(e,t){return e>t}function Ll(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=D(t),r=D(r)),e(t,r)}}var $l=Ll(Ol),Al=Ll((function(e,t){return e>=t})),Hl=Object.prototype.hasOwnProperty;function Tl(e,t){return null!=e&&Hl.call(e,t)}var Nl=Math.max,Dl=Math.min;var Wl="[object String]";function Gl(e){return"string"==typeof e||!w(e)&&m(e)&&g(e)==Wl}function jl(e,t){return C(t,(function(t){return e[t]}))}function zl(e){return null==e?[]:jl(e,Pr(e))}var Vl=Math.max;var ql=Math.max;var Ul=Math.min;function Kl(e,t,r){for(var n=r?As:Ze,o=e[0].length,i=e.length,a=i,s=Array(i),l=1/0,u=[];a--;){var c=e[a];a&&t&&(c=C(c,dr(t))),l=Ul(c.length,l),s[a]=!r&&(t||o>=120&&c.length>=120)?new ca(a&&c):void 0}c=e[0];var f=-1,h=s[0];e:for(;++f<o&&u.length<l;){var d=c[f],p=t?t(d):d;if(d=r||0!==d?d:0,!(h?ha(h,p):n(u,p,r))){for(a=i;--a;){var R=s[a];if(!(R?ha(R,p):n(e[a],p,r)))continue e}h&&h.push(p),u.push(d)}}return u}function Jl(e){return Ps(e)?e:[]}var Zl=Ut((function(e){var t=C(e,Jl);return t.length&&t[0]===e[0]?Kl(t):[]})),Yl=Ut((function(e){var t=Ds(e),r=C(e,Jl);return t===Ds(r)?t=void 0:r.pop(),r.length&&r[0]===e[0]?Kl(r,ns(t)):[]})),Xl=Ut((function(e){var t=Ds(e),r=C(e,Jl);return(t="function"==typeof t?t:void 0)&&r.pop(),r.length&&r[0]===e[0]?Kl(r,void 0,t):[]}));function Ql(e,t){return function(r,n){return function(e,t,r,n){return ls(e,(function(e,o,i){t(n,r(e),o,i)})),n}(r,e,t(n),{})}}var eu=Object.prototype.toString,tu=Ql((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=eu.call(t)),e[t]=r}),Ge(V)),ru=Object.prototype,nu=ru.hasOwnProperty,ou=ru.toString,iu=Ql((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ou.call(t)),nu.call(e,t)?e[t].push(r):e[t]=[r]}),ns);function au(e,t){return t.length<2?e:nn(e,En(t,0,-1))}function su(e,t,r){var n=null==(e=au(e,t=en(t,e)))?e:e[rn(Ds(t))];return null==n?void 0:me(n,e,r)}var lu=Ut(su),uu=Ut((function(e,t,r){var n=-1,o="function"==typeof t,i=Zt(e)?Array(e.length):[];return cs(e,(function(e){i[++n]=o?me(t,e,r):su(e,t,r)})),i}));var cu=mr&&mr.isArrayBuffer,fu=cu?dr(cu):function(e){return m(e)&&"[object ArrayBuffer]"==g(e)};var hu=mr&&mr.isDate,du=hu?dr(hu):function(e){return m(e)&&"[object Date]"==g(e)};var pu=Object.prototype.hasOwnProperty;function Ru(e,t){return Wa(e,t)}var gu=a.isFinite;function mu(e){return"number"==typeof e&&e==z(e)}var yu="[object Number]";function vu(e){return"number"==typeof e||m(e)&&g(e)==yu}var Su=X?Z:sr;var bu=mr&&mr.isRegExp,Cu=bu?dr(bu):function(e){return m(e)&&"[object RegExp]"==g(e)},wu=9007199254740991;var Bu=Array.prototype.join;var ku=Io((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),Pu=hs((function(e,t,r){Dt(e,r,t)}));var Mu=Math.max,xu=Math.min;var _u=Io((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Iu=Kn("toLowerCase");function Eu(e,t){return e<t}var Fu=Ll(Eu),Ou=Ll((function(e,t){return e<=t}));function Lu(e,t,r){for(var n=-1,o=e.length;++n<o;){var i=e[n],a=t(i);if(null!=a&&(void 0===s?a==a&&!v(a):r(a,s)))var s=a,l=i}return l}function $u(e,t){for(var r,n=-1,o=e.length;++n<o;){var i=t(e[n]);void 0!==i&&(r=void 0===r?i:r+i)}return r}var Au=NaN;function Hu(e,t){var r=null==e?0:e.length;return r?$u(e,t)/r:Au}var Tu=Xt((function(e,t,r){_s(e,t,r)})),Nu=Ut((function(e,t){return function(r){return su(r,e,t)}})),Du=Ut((function(e,t){return function(r){return su(e,r,t)}}));function Wu(e,t,r){var n=Pr(t),o=Il(t,n),i=!(L(r)&&"chain"in r&&!r.chain),a=Z(e);return qe(o,(function(r){var n=t[r];e[r]=n,a&&(e.prototype[r]=function(){var t=this.__chain__;if(i||t){var r=e(this.__wrapped__);return(r.__actions__=Ee(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,sn([this.value()],arguments))})})),e}var Gu=x((function(e,t){return e*t}),1),ju="Expected a function";function zu(e){if("function"!=typeof e)throw new TypeError(ju);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var Vu="[object Map]",qu="[object Set]",Uu=s?s.iterator:void 0;function Ku(e){if(!e)return[];if(Zt(e))return Gl(e)?Un(e):Ee(e);if(Uu&&e[Uu])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Uu]());var t=mi(e);return(t==Vu?ga:t==qu?ma:zl)(e)}function Ju(e,t){var r=e.length;if(r)return ut(t+=t<0?r:0,r)?e[t]:void 0}function Zu(e,t){return null==(e=au(e,t=en(t,e)))||delete e[rn(Ds(t))]}function Yu(e){return bn(e)?void 0:e}var Xu=hn((function(e,t){var r={};if(null==e)return r;var n=!1;t=C(t,(function(t){return t=en(t,e),n||(n=t.length>1),t})),zt(e,ri(e),r),n&&(r=oa(r,7,Yu));for(var o=t.length;o--;)Zu(r,t[o]);return r}));function Qu(e,t,r,n){if(!L(e))return e;for(var o=-1,i=(t=en(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var l=rn(t[o]),u=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=a){var c=s[l];void 0===(u=n?n(c,l,s):void 0)&&(u=L(c)?c:ut(t[o+1])?[]:{})}jt(s,l,u),s=s[l]}return e}function ec(e,t,r){for(var n=-1,o=t.length,i={};++n<o;){var a=t[n],s=nn(e,a);r(s,a)&&Qu(i,en(a,e),s)}return i}function tc(e,t){if(null==e)return{};var r=C(ri(e),(function(e){return[e]}));return t=ns(t),ec(e,r,(function(e,r){return t(e,r[0])}))}function rc(e,t){if(e!==t){var r=void 0!==e,n=null===e,o=e==e,i=v(e),a=void 0!==t,s=null===t,l=t==t,u=v(t);if(!s&&!u&&!i&&e>t||i&&a&&l&&!s&&!u||n&&a&&l||!r&&l||!o)return 1;if(!n&&!i&&!u&&e<t||u&&r&&o&&!n&&!i||s&&r&&o||!a&&o||!l)return-1}return 0}function nc(e,t,r){t=t.length?C(t,(function(e){return w(e)?function(t){return nn(t,1===e.length?e[0]:e)}:e})):[V];var n=-1;t=C(t,dr(ns));var o=Cl(e,(function(e,r,o){var i=C(t,(function(t){return t(e)}));return{criteria:i,index:++n,value:e}}));return function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(o,(function(e,t){return function(e,t,r){for(var n=-1,o=e.criteria,i=t.criteria,a=o.length,s=r.length;++n<a;){var l=rc(o[n],i[n]);if(l)return n>=s?l:l*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}))}function oc(e){return hn((function(t){return t=C(t,dr(ns)),Ut((function(r){var n=this;return e(t,(function(e){return me(e,n,r)}))}))}))}var ic=oc(C),ac=Ut,sc=Math.min,lc=ac((function(e,t){var r=(t=1==t.length&&w(t[0])?C(t[0],dr(ns)):C(cn(t,1),dr(ns))).length;return Ut((function(n){for(var o=-1,i=sc(n.length,r);++o<i;)n[o]=t[o].call(this,n[o]);return me(e,this,n)}))})),uc=oc(sl),cc=oc(fa),fc=9007199254740991,hc=Math.floor;function dc(e,t){var r="";if(!e||t<1||t>fc)return r;do{t%2&&(r+=e),(t=hc(t/2))&&(e+=e)}while(t);return r}var pc=ts("length"),Rc="\\ud800-\\udfff",gc="["+Rc+"]",mc="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",yc="\\ud83c[\\udffb-\\udfff]",vc="[^"+Rc+"]",Sc="(?:\\ud83c[\\udde6-\\uddff]){2}",bc="[\\ud800-\\udbff][\\udc00-\\udfff]",Cc="(?:"+mc+"|"+yc+")"+"?",wc="[\\ufe0e\\ufe0f]?",Bc=wc+Cc+("(?:\\u200d(?:"+[vc,Sc,bc].join("|")+")"+wc+Cc+")*"),kc="(?:"+[vc+mc+"?",mc,Sc,bc,gc].join("|")+")",Pc=RegExp(yc+"(?="+yc+")|"+kc+Bc,"g");function Mc(e){return Ln(e)?function(e){for(var t=Pc.lastIndex=0;Pc.test(e);)++t;return t}(e):pc(e)}var xc=Math.ceil;function _c(e,t){var r=(t=void 0===t?" ":M(t)).length;if(r<2)return r?dc(t,e):t;var n=dc(t,xc(e/Mc(t)));return Ln(t)?Fn(Un(n),0,e).join(""):n.slice(0,e)}var Ic=Math.ceil,Ec=Math.floor;var Fc=/^\s+/,Oc=a.parseInt;var Lc=Ut((function(e,t){return Ht(e,32,void 0,t,ht(t,at(Lc)))}));Lc.placeholder={};var $c=Ut((function(e,t){return Ht(e,64,void 0,t,ht(t,at($c)))}));$c.placeholder={};var Ac=hs((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]}));var Hc=hn((function(e,t){return null==e?{}:function(e,t){return ec(e,t,(function(t,r){return Ya(e,r)}))}(e,t)}));function Tc(e,t,r,n){for(var o=r-1,i=e.length;++o<i;)if(n(e[o],t))return o;return-1}var Nc=Array.prototype.splice;function Dc(e,t,r,n){var o=n?Tc:Je,i=-1,a=t.length,s=e;for(e===t&&(t=Ee(t)),r&&(s=C(e,dr(r)));++i<a;)for(var l=0,u=t[i],c=r?r(u):u;(l=o(s,c,l,n))>-1;)s!==e&&Nc.call(s,l,1),Nc.call(e,l,1);return e}function Wc(e,t){return e&&e.length&&t&&t.length?Dc(e,t):e}var Gc=Ut(Wc);var jc=Array.prototype.splice;function zc(e,t){for(var r=e?t.length:0,n=r-1;r--;){var o=t[r];if(r==n||o!==i){var i=o;ut(o)?jc.call(e,o,1):Zu(e,o)}}return e}var Vc=hn((function(e,t){var r=null==e?0:e.length,n=an(e,t);return zc(e,C(t,(function(e){return ut(e,r)?+e:e})).sort(rc)),n})),qc=Math.floor,Uc=Math.random;function Kc(e,t){return e+qc(Uc()*(t-e+1))}var Jc=parseFloat,Zc=Math.min,Yc=Math.random;function Xc(e,t,r){if(r&&"boolean"!=typeof r&&Yt(e,t,r)&&(t=r=void 0),void 0===r&&("boolean"==typeof t?(r=t,t=void 0):"boolean"==typeof e&&(r=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=j(e),void 0===t?(t=e,e=0):t=j(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var o=Yc();return Zc(e+o*(t-e+Jc("1e-"+((o+"").length-1))),t)}return Kc(e,t)}var Qc=Math.ceil,ef=Math.max;function tf(e){return function(t,r,n){return n&&"number"!=typeof n&&Yt(t,r,n)&&(r=n=void 0),t=j(t),void 0===r?(r=t,t=0):r=j(r),function(e,t,r,n){for(var o=-1,i=ef(Qc((t-e)/(r||1)),0),a=Array(i);i--;)a[n?i:++o]=e,e+=r;return a}(t,r,n=void 0===n?t<r?1:-1:j(n),e)}}var rf=tf(),nf=tf(!0),of=hn((function(e,t){return Ht(e,256,void 0,void 0,void 0,t)}));function af(e,t,r,n,o){return o(e,(function(e,o,i){r=n?(n=!1,e):t(r,e,o,i)})),r}function sf(e,t,r,n){var o=null==e?0:e.length;for(n&&o&&(r=e[--o]);o--;)r=t(r,e[o],o,e);return r}var lf=Array.prototype.reverse;function uf(e){return null==e?e:lf.call(e)}var cf=Lo("round");function ff(e){var t=e.length;return t?e[Kc(0,t-1)]:void 0}function hf(e){return ff(zl(e))}function df(e,t){var r=-1,n=e.length,o=n-1;for(t=void 0===t?n:t;++r<t;){var i=Kc(r,o),a=e[i];e[i]=e[r],e[r]=a}return e.length=t,e}function pf(e,t){return df(Ee(e),No(t,0,e.length))}function Rf(e,t){var r=zl(e);return df(r,No(t,0,r.length))}function gf(e){return df(Ee(e))}function mf(e){return df(zl(e))}var yf=Io((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}));function vf(e,t){var r;return cs(e,(function(e,n,o){return!(r=t(e,n,o))})),!!r}var Sf=Ut((function(e,t){if(null==e)return[];var r=t.length;return r>1&&Yt(e,t[0],t[1])?t=[]:r>2&&Yt(t[0],t[1],t[2])&&(t=[t[0]]),nc(e,cn(t,1),[])})),bf=4294967294,Cf=Math.floor,wf=Math.min;function Bf(e,t,r,n){var o=0,i=null==e?0:e.length;if(0===i)return 0;for(var a=(t=r(t))!=t,s=null===t,l=v(t),u=void 0===t;o<i;){var c=Cf((o+i)/2),f=r(e[c]),h=void 0!==f,d=null===f,p=f==f,R=v(f);if(a)var g=n||p;else g=u?p&&(n||h):s?p&&h&&(n||!d):l?p&&h&&!d&&(n||!R):!d&&!R&&(n?f<=t:f<t);g?o=c+1:i=c}return wf(i,bf)}var kf=2147483647;function Pf(e,t,r){var n=0,o=null==e?n:e.length;if("number"==typeof t&&t==t&&o<=kf){for(;n<o;){var i=n+o>>>1,a=e[i];null!==a&&!v(a)&&(r?a<=t:a<t)?n=i+1:o=i}return o}return Bf(e,t,V,r)}function Mf(e,t){for(var r=-1,n=e.length,o=0,i=[];++r<n;){var a=e[r],s=t?t(a):a;if(!r||!Wt(s,l)){var l=s;i[o++]=0===a?0:a}}return i}var xf=Math.max;var _f=Io((function(e,t,r){return e+(r?" ":"")+Jn(t)}));var If=x((function(e,t){return e-t}),0);function Ef(e,t){return e&&e.length?$u(e,ns(t)):0}var Ff=Object.prototype,Of=Ff.hasOwnProperty;function Lf(e,t,r,n){return void 0===e||Wt(e,Ff[r])&&!Of.call(n,r)?t:e}var $f={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function Af(e){return"\\"+$f[e]}var Hf=/<%=([\s\S]+?)%>/g,Tf={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Hf,variable:"",imports:{_:{escape:ol}}},Nf=/\b__p \+= '';/g,Df=/\b(__p \+=) '' \+/g,Wf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Gf=/[()=,{}\[\]\/\s]/,jf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zf=/($^)/,Vf=/['\n\r\u2028\u2029\\]/g,qf=Object.prototype.hasOwnProperty;function Uf(e,t){return t(e)}var Kf=4294967295,Jf=Math.min;function Zf(e,t){var r=e;return r instanceof Be&&(r=r.value()),Yn(t,(function(e,t){return t.func.apply(t.thisArg,sn([e],t.args))}),r)}function Yf(){return Zf(this.__wrapped__,this.__actions__)}var Xf=9007199254740991;function Qf(e,t){for(var r=e.length;r--&&Je(t,e[r],0)>-1;);return r}function eh(e,t){for(var r=-1,n=e.length;++r<n&&Je(t,e[r],0)>-1;);return r}var th=/^\s+/;var rh=/\w*$/;var nh=Xn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),oh=/&(?:amp|lt|gt|quot|#39);/g,ih=RegExp(oh.source);var ah=ii&&1/ma(new ii([,-0]))[1]==1/0?function(e){return new ii(e)}:ke,sh=200;function lh(e,t,r){var n=-1,o=Ze,i=e.length,a=!0,s=[],l=s;if(r)a=!1,o=As;else if(i>=sh){var u=t?null:ah(e);if(u)return ma(u);a=!1,o=ha,l=new ca}else l=t?[]:s;e:for(;++n<i;){var c=e[n],f=t?t(c):c;if(c=r||0!==c?c:0,a&&f==f){for(var h=l.length;h--;)if(l[h]===f)continue e;t&&l.push(f),s.push(c)}else o(l,f,r)||(l!==s&&l.push(f),s.push(c))}return s}var uh=Ut((function(e){return lh(cn(e,1,Ps,!0))})),ch=Ut((function(e){var t=Ds(e);return Ps(t)&&(t=void 0),lh(cn(e,1,Ps,!0),ns(t))})),fh=Ut((function(e){var t=Ds(e);return t="function"==typeof t?t:void 0,lh(cn(e,1,Ps,!0),void 0,t)}));var hh=0;var dh=Math.max;function ph(e){if(!e||!e.length)return[];var t=0;return e=Ko(e,(function(e){if(Ps(e))return t=dh(e.length,t),!0})),tr(t,(function(t){return C(e,ts(t))}))}function Rh(e,t){if(!e||!e.length)return[];var r=ph(e);return null==t?r:C(r,(function(e){return me(t,void 0,e)}))}function gh(e,t,r,n){return Qu(e,t,r(nn(e,t)),n)}var mh=Io((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}));var yh=Ut((function(e,t){return Ps(e)?Ts(e,t):[]}));var vh=hn((function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,o=function(t){return an(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Be&&ut(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:Uf,args:[o],thisArg:void 0}),new Ie(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(o)}));function Sh(e,t,r){var n=e.length;if(n<2)return n?lh(e[0]):[];for(var o=-1,i=Array(n);++o<n;)for(var a=e[o],s=-1;++s<n;)s!=o&&(i[o]=Ts(i[o]||a,e[s],t,r));return lh(cn(i,1),t,r)}var bh=Ut((function(e){return Sh(Ko(e,Ps))})),Ch=Ut((function(e){var t=Ds(e);return Ps(t)&&(t=void 0),Sh(Ko(e,Ps),ns(t))})),wh=Ut((function(e){var t=Ds(e);return t="function"==typeof t?t:void 0,Sh(Ko(e,Ps),void 0,t)})),Bh=Ut(ph);function kh(e,t,r){for(var n=-1,o=e.length,i=t.length,a={};++n<o;){var s=n<i?t[n]:void 0;r(a,e[n],s)}return a}var Ph=Ut((function(e){var t=e.length,r=t>1?e[t-1]:void 0;return r="function"==typeof r?(e.pop(),r):void 0,Rh(e,r)})),Mh={chunk:function(e,t,r){t=(r?Yt(e,t,r):void 0===t)?1:To(z(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var o=0,i=0,a=Array(Ho(n/t));o<n;)a[i++]=En(e,o,o+=t);return a},compact:function(e){for(var t=-1,r=null==e?0:e.length,n=0,o=[];++t<r;){var i=e[t];i&&(o[n++]=i)}return o},concat:function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return sn(w(r)?Ee(r):[r],cn(t,1))},difference:Ns,differenceBy:Ws,differenceWith:Gs,drop:function(e,t,r){var n=null==e?0:e.length;return n?En(e,(t=r||void 0===t?1:z(t))<0?0:t,n):[]},dropRight:function(e,t,r){var n=null==e?0:e.length;return n?En(e,0,(t=n-(t=r||void 0===t?1:z(t)))<0?0:t):[]},dropRightWhile:function(e,t){return e&&e.length?zs(e,ns(t),!0,!0):[]},dropWhile:function(e,t){return e&&e.length?zs(e,ns(t),!0):[]},fill:function(e,t,r,n){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&Yt(e,t,r)&&(r=0,n=o),function(e,t,r,n){var o=e.length;for((r=z(r))<0&&(r=-r>o?0:o+r),(n=void 0===n||n>o?o:z(n))<0&&(n+=o),n=r>n?0:cl(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},findIndex:pl,findLastIndex:vl,first:bl,flatten:fn,flattenDeep:function(e){return(null==e?0:e.length)?cn(e,kl):[]},flattenDepth:function(e,t){return(null==e?0:e.length)?cn(e,t=void 0===t?1:z(t)):[]},fromPairs:function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var o=e[t];n[o[0]]=o[1]}return n},head:bl,indexOf:function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=null==r?0:z(r);return o<0&&(o=ql(n+o,0)),Je(e,t,o)},initial:function(e){return(null==e?0:e.length)?En(e,0,-1):[]},intersection:Zl,intersectionBy:Yl,intersectionWith:Xl,join:function(e,t){return null==e?"":Bu.call(e,t)},last:Ds,lastIndexOf:function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=n;return void 0!==r&&(o=(o=z(r))<0?Mu(n+o,0):xu(o,n-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,o):Ue(e,Ke,o,!0)},nth:function(e,t){return e&&e.length?Ju(e,z(t)):void 0},pull:Gc,pullAll:Wc,pullAllBy:function(e,t,r){return e&&e.length&&t&&t.length?Dc(e,t,ns(r)):e},pullAllWith:function(e,t,r){return e&&e.length&&t&&t.length?Dc(e,t,void 0,r):e},pullAt:Vc,remove:function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,o=[],i=e.length;for(t=ns(t);++n<i;){var a=e[n];t(a,n,e)&&(r.push(a),o.push(n))}return zc(e,o),r},reverse:uf,slice:function(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&Yt(e,t,r)?(t=0,r=n):(t=null==t?0:z(t),r=void 0===r?n:z(r)),En(e,t,r)):[]},sortedIndex:function(e,t){return Pf(e,t)},sortedIndexBy:function(e,t,r){return Bf(e,t,ns(r))},sortedIndexOf:function(e,t){var r=null==e?0:e.length;if(r){var n=Pf(e,t);if(n<r&&Wt(e[n],t))return n}return-1},sortedLastIndex:function(e,t){return Pf(e,t,!0)},sortedLastIndexBy:function(e,t,r){return Bf(e,t,ns(r),!0)},sortedLastIndexOf:function(e,t){if(null==e?0:e.length){var r=Pf(e,t,!0)-1;if(Wt(e[r],t))return r}return-1},sortedUniq:function(e){return e&&e.length?Mf(e):[]},sortedUniqBy:function(e,t){return e&&e.length?Mf(e,ns(t)):[]},tail:function(e){var t=null==e?0:e.length;return t?En(e,1,t):[]},take:function(e,t,r){return e&&e.length?En(e,0,(t=r||void 0===t?1:z(t))<0?0:t):[]},takeRight:function(e,t,r){var n=null==e?0:e.length;return n?En(e,(t=n-(t=r||void 0===t?1:z(t)))<0?0:t,n):[]},takeRightWhile:function(e,t){return e&&e.length?zs(e,ns(t),!1,!0):[]},takeWhile:function(e,t){return e&&e.length?zs(e,ns(t)):[]},union:uh,unionBy:ch,unionWith:fh,uniq:function(e){return e&&e.length?lh(e):[]},uniqBy:function(e,t){return e&&e.length?lh(e,ns(t)):[]},uniqWith:function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?lh(e,void 0,t):[]},unzip:ph,unzipWith:Rh,without:yh,xor:bh,xorBy:Ch,xorWith:wh,zip:Bh,zipObject:function(e,t){return kh(e||[],t||[],jt)},zipObjectDeep:function(e,t){return kh(e||[],t||[],Qu)},zipWith:Ph},xh={countBy:ps,each:qs,eachRight:Ys,every:function(e,t,r){var n=w(e)?sl:ll;return r&&Yt(e,t,r)&&(t=void 0),n(e,ns(t))},filter:function(e,t){return(w(e)?Ko:fl)(e,ns(t))},find:Rl,findLast:Sl,flatMap:function(e,t){return cn(wl(e,t),1)},flatMapDeep:function(e,t){return cn(wl(e,t),Bl)},flatMapDepth:function(e,t,r){return r=void 0===r?1:z(r),cn(wl(e,t),r)},forEach:qs,forEachRight:Ys,groupBy:Fl,includes:function(e,t,r,n){e=Zt(e)?e:zl(e),r=r&&!n?z(r):0;var o=e.length;return r<0&&(r=Vl(o+r,0)),Gl(e)?r<=o&&e.indexOf(t,r)>-1:!!o&&Je(e,t,r)>-1},invokeMap:uu,keyBy:Pu,map:wl,orderBy:function(e,t,r,n){return null==e?[]:(w(t)||(t=null==t?[]:[t]),w(r=n?void 0:r)||(r=null==r?[]:[r]),nc(e,t,r))},partition:Ac,reduce:function(e,t,r){var n=w(e)?Yn:af,o=arguments.length<3;return n(e,ns(t),r,o,cs)},reduceRight:function(e,t,r){var n=w(e)?sf:af,o=arguments.length<3;return n(e,ns(t),r,o,Zs)},reject:function(e,t){return(w(e)?Ko:fl)(e,zu(ns(t)))},sample:function(e){return(w(e)?ff:hf)(e)},sampleSize:function(e,t,r){return t=(r?Yt(e,t,r):void 0===t)?1:z(t),(w(e)?pf:Rf)(e,t)},shuffle:function(e){return(w(e)?gf:mf)(e)},size:function(e){if(null==e)return 0;if(Zt(e))return Gl(e)?Mc(e):e.length;var t=mi(e);return"[object Map]"==t||"[object Set]"==t?e.size:kr(e).length},some:function(e,t,r){var n=w(e)?fa:vf;return r&&Yt(e,t,r)&&(t=void 0),n(e,ns(t))},sortBy:Sf},_h=ms,Ih={after:function(e,t){if("function"!=typeof t)throw new TypeError("Expected a function");return e=z(e),function(){if(--e<1)return t.apply(this,arguments)}},ary:Nt,before:Mn,bind:xn,bindKey:In,curry:Rs,curryRight:gs,debounce:bs,defer:Ls,delay:$s,flip:function(e){return Ht(e,512)},memoize:Jr,negate:zu,once:function(e){return Mn(2,e)},overArgs:lc,partial:Lc,partialRight:$c,rearg:of,rest:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return Ut(e,t=void 0===t?t:z(t))},spread:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=null==t?0:xf(z(t),0),Ut((function(r){var n=r[t],o=Fn(r,0,t);return n&&sn(o,n),me(e,this,o)}))},throttle:function(e,t,r){var n=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return L(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),bs(e,t,{leading:n,maxWait:t,trailing:o})},unary:function(e){return Nt(e,1)},wrap:function(e,t){return Lc(Vs(t),e)}},Eh={castArray:function(){if(!arguments.length)return[];var e=arguments[0];return w(e)?e:[e]},clone:aa,cloneDeep:ua,cloneDeepWith:function(e,t){return oa(e,5,t="function"==typeof t?t:void 0)},cloneWith:function(e,t){return oa(e,4,t="function"==typeof t?t:void 0)},conformsTo:function(e,t){return null==t||os(e,t,Pr(t))},eq:Wt,gt:$l,gte:Al,isArguments:ar,isArray:w,isArrayBuffer:fu,isArrayLike:Zt,isArrayLikeObject:Ps,isBoolean:function(e){return!0===e||!1===e||m(e)&&"[object Boolean]"==g(e)},isBuffer:fr,isDate:du,isElement:function(e){return m(e)&&1===e.nodeType&&!bn(e)},isEmpty:function(e){if(null==e)return!0;if(Zt(e)&&(w(e)||"string"==typeof e||"function"==typeof e.splice||fr(e)||vr(e)||ar(e)))return!e.length;var t=mi(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(er(e))return!kr(e).length;for(var r in e)if(pu.call(e,r))return!1;return!0},isEqual:Ru,isEqualWith:function(e,t,r){var n=(r="function"==typeof r?r:void 0)?r(e,t):void 0;return void 0===n?Wa(e,t,void 0,r):!!n},isError:Bn,isFinite:function(e){return"number"==typeof e&&gu(e)},isFunction:Z,isInteger:mu,isLength:Jt,isMap:Ui,isMatch:function(e,t){return e===t||za(e,t,qa(t))},isMatchWith:function(e,t,r){return r="function"==typeof r?r:void 0,za(e,t,qa(t),r)},isNaN:function(e){return vu(e)&&e!=+e},isNative:function(e){if(Su(e))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return le(e)},isNil:function(e){return null==e},isNull:function(e){return null===e},isNumber:vu,isObject:L,isObjectLike:m,isPlainObject:bn,isRegExp:Cu,isSafeInteger:function(e){return mu(e)&&e>=-9007199254740991&&e<=wu},isSet:Ji,isString:Gl,isSymbol:v,isTypedArray:vr,isUndefined:function(e){return void 0===e},isWeakMap:function(e){return m(e)&&"[object WeakMap]"==mi(e)},isWeakSet:function(e){return m(e)&&"[object WeakSet]"==g(e)},lt:Fu,lte:Ou,toArray:Ku,toFinite:j,toInteger:z,toLength:cl,toNumber:D,toPlainObject:xs,toSafeInteger:function(e){return e?No(z(e),-9007199254740991,Xf):0===e?e:0},toString:Qr},Fh={add:_,ceil:$o,divide:js,floor:Pl,max:function(e){return e&&e.length?Lu(e,V,Ol):void 0},maxBy:function(e,t){return e&&e.length?Lu(e,ns(t),Ol):void 0},mean:function(e){return Hu(e,V)},meanBy:function(e,t){return Hu(e,ns(t))},min:function(e){return e&&e.length?Lu(e,V,Eu):void 0},minBy:function(e,t){return e&&e.length?Lu(e,ns(t),Eu):void 0},multiply:Gu,round:cf,subtract:If,sum:function(e){return e&&e.length?$u(e,V):0},sumBy:Ef},Oh=Do,Lh=function(e,t,r){return t=j(t),void 0===r?(r=t,t=0):r=j(r),function(e,t,r){return e>=Dl(t,r)&&e<Nl(t,r)}(e=D(e),t,r)},$h=Xc,Ah={assign:xr,assignIn:Fr,assignInWith:Or,assignWith:Lr,at:dn,create:function(e,t){var r=pe(e);return null==t?r:Go(r,t)},defaults:Bs,defaultsDeep:Fs,entries:Qs,entriesIn:el,extend:Fr,extendWith:Or,findKey:function(e,t){return gl(e,ns(t),ls)},findLastKey:function(e,t){return gl(e,ns(t),Js)},forIn:function(e,t){return null==e?e:ss(e,Vs(t),Er)},forInRight:function(e,t){return null==e?e:Ks(e,Vs(t),Er)},forOwn:function(e,t){return e&&ls(e,Vs(t))},forOwnRight:function(e,t){return e&&Js(e,Vs(t))},functions:function(e){return null==e?[]:Il(e,Pr(e))},functionsIn:function(e){return null==e?[]:Il(e,Er(e))},get:on,has:function(e,t){return null!=e&&Za(e,t,Tl)},hasIn:Ya,invert:tu,invertBy:iu,invoke:lu,keys:Pr,keysIn:Er,mapKeys:function(e,t){var r={};return t=ns(t),ls(e,(function(e,n,o){Dt(r,t(e,n,o),e)})),r},mapValues:function(e,t){var r={};return t=ns(t),ls(e,(function(e,n,o){Dt(r,n,t(e,n,o))})),r},merge:Tu,mergeWith:Es,omit:Xu,omitBy:function(e,t){return tc(e,zu(ns(t)))},pick:Hc,pickBy:tc,result:function(e,t,r){var n=-1,o=(t=en(t,e)).length;for(o||(o=1,e=void 0);++n<o;){var i=null==e?void 0:e[rn(t[n])];void 0===i&&(n=o,i=r),e=Z(i)?i.call(e):i}return e},set:function(e,t,r){return null==e?e:Qu(e,t,r)},setWith:function(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:Qu(e,t,r,n)},toPairs:Qs,toPairsIn:el,transform:function(e,t,r){var n=w(e),o=n||fr(e)||vr(e);if(t=ns(t),null==r){var i=e&&e.constructor;r=o?n?new i:[]:L(e)&&Z(i)?pe(pn(e)):{}}return(o?qe:ls)(e,(function(e,n,o){return t(r,e,n,o)})),r},unset:function(e,t){return null==e||Zu(e,t)},update:function(e,t,r){return null==e?e:gh(e,t,Vs(r))},updateWith:function(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:gh(e,t,Vs(r),n)},values:zl,valuesIn:function(e){return null==e?[]:jl(e,Er(e))}},Hh={at:vh,chain:Ao,commit:function(){return new Ie(this.value(),this.__chain__)},lodash:Le,next:function(){void 0===this.__values__&&(this.__values__=Ku(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},plant:function(e){for(var t,r=this;r instanceof Ce;){var n=Fe(r);n.__index__=0,n.__values__=void 0,t?o.__wrapped__=n:t=n;var o=n;r=r.__wrapped__}return o.__wrapped__=e,t},reverse:function(){var e=this.__wrapped__;if(e instanceof Be){var t=e;return this.__actions__.length&&(t=new Be(this)),(t=t.reverse()).__actions__.push({func:Uf,args:[uf],thisArg:void 0}),new Ie(t,this.__chain__)}return this.thru(uf)},tap:function(e,t){return t(e),e},thru:Uf,toIterator:function(){return this},toJSON:Yf,value:Yf,valueOf:Yf,wrapperChain:function(){return Ao(this)}},Th={camelCase:Eo,capitalize:Zn,deburr:ro,endsWith:function(e,t,r){e=Qr(e),t=M(t);var n=e.length,o=r=void 0===r?n:No(z(r),0,n);return(r-=t.length)>=0&&e.slice(r,o)==t},escape:ol,escapeRegExp:function(e){return(e=Qr(e))&&al.test(e)?e.replace(il,"\\$&"):e},kebabCase:ku,lowerCase:_u,lowerFirst:Iu,pad:function(e,t,r){e=Qr(e);var n=(t=z(t))?Mc(e):0;if(!t||n>=t)return e;var o=(t-n)/2;return _c(Ec(o),r)+e+_c(Ic(o),r)},padEnd:function(e,t,r){e=Qr(e);var n=(t=z(t))?Mc(e):0;return t&&n<t?e+_c(t-n,r):e},padStart:function(e,t,r){e=Qr(e);var n=(t=z(t))?Mc(e):0;return t&&n<t?_c(t-n,r)+e:e},parseInt:function(e,t,r){return r||null==t?t=0:t&&(t=+t),Oc(Qr(e).replace(Fc,""),t||0)},repeat:function(e,t,r){return t=(r?Yt(e,t,r):void 0===t)?1:z(t),dc(Qr(e),t)},replace:function(){var e=arguments,t=Qr(e[0]);return e.length<3?t:t.replace(e[1],e[2])},snakeCase:yf,split:function(e,t,r){return r&&"number"!=typeof r&&Yt(e,t,r)&&(t=r=void 0),(r=void 0===r?4294967295:r>>>0)?(e=Qr(e))&&("string"==typeof t||null!=t&&!Cu(t))&&!(t=M(t))&&Ln(e)?Fn(Un(e),0,r):e.split(t,r):[]},startCase:_f,startsWith:function(e,t,r){return e=Qr(e),r=null==r?0:No(z(r),0,e.length),t=M(t),e.slice(r,r+t.length)==t},template:function(e,t,r){var n=Tf.imports._.templateSettings||Tf;r&&Yt(e,t,r)&&(t=void 0),e=Qr(e),t=Or({},t,n,Lf);var o,i,a=Or({},t.imports,n.imports,Lf),s=Pr(a),l=jl(a,s),u=0,c=t.interpolate||zf,f="__p += '",h=RegExp((t.escape||zf).source+"|"+c.source+"|"+(c===Hf?jf:zf).source+"|"+(t.evaluate||zf).source+"|$","g"),d=qf.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(h,(function(t,r,n,a,s,l){return n||(n=a),f+=e.slice(u,l).replace(Vf,Af),r&&(o=!0,f+="' +\n__e("+r+") +\n'"),s&&(i=!0,f+="';\n"+s+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),f+="';\n";var p=qf.call(t,"variable")&&t.variable;if(p){if(Gf.test(p))throw new Error("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(i?f.replace(Nf,""):f).replace(Df,"$1").replace(Wf,"$1;"),f="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var R=kn((function(){return Function(s,d+"return "+f).apply(void 0,l)}));if(R.source=f,Bn(R))throw R;return R},templateSettings:Tf,toLower:function(e){return Qr(e).toLowerCase()},toUpper:function(e){return Qr(e).toUpperCase()},trim:function(e,t,r){if((e=Qr(e))&&(r||void 0===t))return O(e);if(!e||!(t=M(t)))return e;var n=Un(e),o=Un(t);return Fn(n,eh(n,o),Qf(n,o)+1).join("")},trimEnd:function(e,t,r){if((e=Qr(e))&&(r||void 0===t))return e.slice(0,E(e)+1);if(!e||!(t=M(t)))return e;var n=Un(e);return Fn(n,0,Qf(n,Un(t))+1).join("")},trimStart:function(e,t,r){if((e=Qr(e))&&(r||void 0===t))return e.replace(th,"");if(!e||!(t=M(t)))return e;var n=Un(e);return Fn(n,eh(n,Un(t))).join("")},truncate:function(e,t){var r=30,n="...";if(L(t)){var o="separator"in t?t.separator:o;r="length"in t?z(t.length):r,n="omission"in t?M(t.omission):n}var i=(e=Qr(e)).length;if(Ln(e)){var a=Un(e);i=a.length}if(r>=i)return e;var s=r-Mc(n);if(s<1)return n;var l=a?Fn(a,0,s).join(""):e.slice(0,s);if(void 0===o)return l+n;if(a&&(s+=l.length-s),Cu(o)){if(e.slice(s).search(o)){var u,c=l;for(o.global||(o=RegExp(o.source,Qr(rh.exec(o))+"g")),o.lastIndex=0;u=o.exec(c);)var f=u.index;l=l.slice(0,void 0===f?s:f)}}else if(e.indexOf(M(o),s)!=s){var h=l.lastIndexOf(o);h>-1&&(l=l.slice(0,h))}return l+n},unescape:function(e){return(e=Qr(e))&&ih.test(e)?e.replace(oh,nh):e},upperCase:mh,upperFirst:Jn,words:xo},Nh={attempt:kn,bindAll:_n,cond:function(e){var t=null==e?0:e.length,r=ns;return e=t?C(e,(function(e){if("function"!=typeof e[1])throw new TypeError("Expected a function");return[r(e[0]),e[1]]})):[],Ut((function(r){for(var n=-1;++n<t;){var o=e[n];if(me(o[0],this,r))return me(o[1],this,r)}}))},conforms:function(e){return function(e){var t=Pr(e);return function(r){return os(r,e,t)}}(oa(e,1))},constant:Ge,defaultTo:function(e,t){return null==e||e!=e?t:e},flow:xl,flowRight:_l,identity:V,iteratee:function(e){return ns("function"==typeof e?e:oa(e,1))},matches:function(e){return Ka(oa(e,1))},matchesProperty:function(e,t){return es(e,oa(t,1))},method:Nu,methodOf:Du,mixin:Wu,noop:ke,nthArg:function(e){return e=z(e),Ut((function(t){return Ju(t,e)}))},over:ic,overEvery:uc,overSome:cc,property:rs,propertyOf:function(e){return function(t){return null==e?void 0:nn(e,t)}},range:rf,rangeRight:nf,stubArray:Jo,stubFalse:sr,stubObject:function(){return{}},stubString:function(){return""},stubTrue:function(){return!0},times:function(e,t){if((e=z(e))<1||e>9007199254740991)return[];var r=Kf,n=Jf(e,Kf);t=Vs(t),e-=Kf;for(var o=tr(n,t);++r<e;)t(r);return o},toPath:function(e){return w(e)?C(e,rn):v(e)?[e]:Ee(Xr(Qr(e)))},uniqueId:function(e){var t=++hh;return Qr(e)+t}};var Dh=Math.max,Wh=Math.min;var Gh=Math.min;
/**
     * @license
     * Lodash (Custom Build) <https://lodash.com/>
     * Build: `lodash modularize exports="es" -o ./`
     * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
     * Released under MIT license <https://lodash.com/license>
     * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
     * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
     */
var jh,zh=4294967295,Vh=Array.prototype,qh=Object.prototype.hasOwnProperty,Uh=s?s.iterator:void 0,Kh=Math.max,Jh=Math.min,Zh=function(e){return function(t,r,n){if(null==n){var o=L(r),i=o&&Pr(r),a=i&&i.length&&Il(r,i);(a?a.length:o)||(n=r,r=t,t=this)}return e(t,r,n)}}(Wu);Le.after=Ih.after,Le.ary=Ih.ary,Le.assign=Ah.assign,Le.assignIn=Ah.assignIn,Le.assignInWith=Ah.assignInWith,Le.assignWith=Ah.assignWith,Le.at=Ah.at,Le.before=Ih.before,Le.bind=Ih.bind,Le.bindAll=Nh.bindAll,Le.bindKey=Ih.bindKey,Le.castArray=Eh.castArray,Le.chain=Hh.chain,Le.chunk=Mh.chunk,Le.compact=Mh.compact,Le.concat=Mh.concat,Le.cond=Nh.cond,Le.conforms=Nh.conforms,Le.constant=Nh.constant,Le.countBy=xh.countBy,Le.create=Ah.create,Le.curry=Ih.curry,Le.curryRight=Ih.curryRight,Le.debounce=Ih.debounce,Le.defaults=Ah.defaults,Le.defaultsDeep=Ah.defaultsDeep,Le.defer=Ih.defer,Le.delay=Ih.delay,Le.difference=Mh.difference,Le.differenceBy=Mh.differenceBy,Le.differenceWith=Mh.differenceWith,Le.drop=Mh.drop,Le.dropRight=Mh.dropRight,Le.dropRightWhile=Mh.dropRightWhile,Le.dropWhile=Mh.dropWhile,Le.fill=Mh.fill,Le.filter=xh.filter,Le.flatMap=xh.flatMap,Le.flatMapDeep=xh.flatMapDeep,Le.flatMapDepth=xh.flatMapDepth,Le.flatten=Mh.flatten,Le.flattenDeep=Mh.flattenDeep,Le.flattenDepth=Mh.flattenDepth,Le.flip=Ih.flip,Le.flow=Nh.flow,Le.flowRight=Nh.flowRight,Le.fromPairs=Mh.fromPairs,Le.functions=Ah.functions,Le.functionsIn=Ah.functionsIn,Le.groupBy=xh.groupBy,Le.initial=Mh.initial,Le.intersection=Mh.intersection,Le.intersectionBy=Mh.intersectionBy,Le.intersectionWith=Mh.intersectionWith,Le.invert=Ah.invert,Le.invertBy=Ah.invertBy,Le.invokeMap=xh.invokeMap,Le.iteratee=Nh.iteratee,Le.keyBy=xh.keyBy,Le.keys=Pr,Le.keysIn=Ah.keysIn,Le.map=xh.map,Le.mapKeys=Ah.mapKeys,Le.mapValues=Ah.mapValues,Le.matches=Nh.matches,Le.matchesProperty=Nh.matchesProperty,Le.memoize=Ih.memoize,Le.merge=Ah.merge,Le.mergeWith=Ah.mergeWith,Le.method=Nh.method,Le.methodOf=Nh.methodOf,Le.mixin=Zh,Le.negate=zu,Le.nthArg=Nh.nthArg,Le.omit=Ah.omit,Le.omitBy=Ah.omitBy,Le.once=Ih.once,Le.orderBy=xh.orderBy,Le.over=Nh.over,Le.overArgs=Ih.overArgs,Le.overEvery=Nh.overEvery,Le.overSome=Nh.overSome,Le.partial=Ih.partial,Le.partialRight=Ih.partialRight,Le.partition=xh.partition,Le.pick=Ah.pick,Le.pickBy=Ah.pickBy,Le.property=Nh.property,Le.propertyOf=Nh.propertyOf,Le.pull=Mh.pull,Le.pullAll=Mh.pullAll,Le.pullAllBy=Mh.pullAllBy,Le.pullAllWith=Mh.pullAllWith,Le.pullAt=Mh.pullAt,Le.range=Nh.range,Le.rangeRight=Nh.rangeRight,Le.rearg=Ih.rearg,Le.reject=xh.reject,Le.remove=Mh.remove,Le.rest=Ih.rest,Le.reverse=Mh.reverse,Le.sampleSize=xh.sampleSize,Le.set=Ah.set,Le.setWith=Ah.setWith,Le.shuffle=xh.shuffle,Le.slice=Mh.slice,Le.sortBy=xh.sortBy,Le.sortedUniq=Mh.sortedUniq,Le.sortedUniqBy=Mh.sortedUniqBy,Le.split=Th.split,Le.spread=Ih.spread,Le.tail=Mh.tail,Le.take=Mh.take,Le.takeRight=Mh.takeRight,Le.takeRightWhile=Mh.takeRightWhile,Le.takeWhile=Mh.takeWhile,Le.tap=Hh.tap,Le.throttle=Ih.throttle,Le.thru=Uf,Le.toArray=Eh.toArray,Le.toPairs=Ah.toPairs,Le.toPairsIn=Ah.toPairsIn,Le.toPath=Nh.toPath,Le.toPlainObject=Eh.toPlainObject,Le.transform=Ah.transform,Le.unary=Ih.unary,Le.union=Mh.union,Le.unionBy=Mh.unionBy,Le.unionWith=Mh.unionWith,Le.uniq=Mh.uniq,Le.uniqBy=Mh.uniqBy,Le.uniqWith=Mh.uniqWith,Le.unset=Ah.unset,Le.unzip=Mh.unzip,Le.unzipWith=Mh.unzipWith,Le.update=Ah.update,Le.updateWith=Ah.updateWith,Le.values=Ah.values,Le.valuesIn=Ah.valuesIn,Le.without=Mh.without,Le.words=Th.words,Le.wrap=Ih.wrap,Le.xor=Mh.xor,Le.xorBy=Mh.xorBy,Le.xorWith=Mh.xorWith,Le.zip=Mh.zip,Le.zipObject=Mh.zipObject,Le.zipObjectDeep=Mh.zipObjectDeep,Le.zipWith=Mh.zipWith,Le.entries=Ah.toPairs,Le.entriesIn=Ah.toPairsIn,Le.extend=Ah.assignIn,Le.extendWith=Ah.assignInWith,Zh(Le,Le),Le.add=Fh.add,Le.attempt=Nh.attempt,Le.camelCase=Th.camelCase,Le.capitalize=Th.capitalize,Le.ceil=Fh.ceil,Le.clamp=Oh,Le.clone=Eh.clone,Le.cloneDeep=Eh.cloneDeep,Le.cloneDeepWith=Eh.cloneDeepWith,Le.cloneWith=Eh.cloneWith,Le.conformsTo=Eh.conformsTo,Le.deburr=Th.deburr,Le.defaultTo=Nh.defaultTo,Le.divide=Fh.divide,Le.endsWith=Th.endsWith,Le.eq=Eh.eq,Le.escape=Th.escape,Le.escapeRegExp=Th.escapeRegExp,Le.every=xh.every,Le.find=xh.find,Le.findIndex=Mh.findIndex,Le.findKey=Ah.findKey,Le.findLast=xh.findLast,Le.findLastIndex=Mh.findLastIndex,Le.findLastKey=Ah.findLastKey,Le.floor=Fh.floor,Le.forEach=xh.forEach,Le.forEachRight=xh.forEachRight,Le.forIn=Ah.forIn,Le.forInRight=Ah.forInRight,Le.forOwn=Ah.forOwn,Le.forOwnRight=Ah.forOwnRight,Le.get=Ah.get,Le.gt=Eh.gt,Le.gte=Eh.gte,Le.has=Ah.has,Le.hasIn=Ah.hasIn,Le.head=Mh.head,Le.identity=V,Le.includes=xh.includes,Le.indexOf=Mh.indexOf,Le.inRange=Lh,Le.invoke=Ah.invoke,Le.isArguments=Eh.isArguments,Le.isArray=w,Le.isArrayBuffer=Eh.isArrayBuffer,Le.isArrayLike=Eh.isArrayLike,Le.isArrayLikeObject=Eh.isArrayLikeObject,Le.isBoolean=Eh.isBoolean,Le.isBuffer=Eh.isBuffer,Le.isDate=Eh.isDate,Le.isElement=Eh.isElement,Le.isEmpty=Eh.isEmpty,Le.isEqual=Eh.isEqual,Le.isEqualWith=Eh.isEqualWith,Le.isError=Eh.isError,Le.isFinite=Eh.isFinite,Le.isFunction=Eh.isFunction,Le.isInteger=Eh.isInteger,Le.isLength=Eh.isLength,Le.isMap=Eh.isMap,Le.isMatch=Eh.isMatch,Le.isMatchWith=Eh.isMatchWith,Le.isNaN=Eh.isNaN,Le.isNative=Eh.isNative,Le.isNil=Eh.isNil,Le.isNull=Eh.isNull,Le.isNumber=Eh.isNumber,Le.isObject=L,Le.isObjectLike=Eh.isObjectLike,Le.isPlainObject=Eh.isPlainObject,Le.isRegExp=Eh.isRegExp,Le.isSafeInteger=Eh.isSafeInteger,Le.isSet=Eh.isSet,Le.isString=Eh.isString,Le.isSymbol=Eh.isSymbol,Le.isTypedArray=Eh.isTypedArray,Le.isUndefined=Eh.isUndefined,Le.isWeakMap=Eh.isWeakMap,Le.isWeakSet=Eh.isWeakSet,Le.join=Mh.join,Le.kebabCase=Th.kebabCase,Le.last=Ds,Le.lastIndexOf=Mh.lastIndexOf,Le.lowerCase=Th.lowerCase,Le.lowerFirst=Th.lowerFirst,Le.lt=Eh.lt,Le.lte=Eh.lte,Le.max=Fh.max,Le.maxBy=Fh.maxBy,Le.mean=Fh.mean,Le.meanBy=Fh.meanBy,Le.min=Fh.min,Le.minBy=Fh.minBy,Le.stubArray=Nh.stubArray,Le.stubFalse=Nh.stubFalse,Le.stubObject=Nh.stubObject,Le.stubString=Nh.stubString,Le.stubTrue=Nh.stubTrue,Le.multiply=Fh.multiply,Le.nth=Mh.nth,Le.noop=Nh.noop,Le.now=_h,Le.pad=Th.pad,Le.padEnd=Th.padEnd,Le.padStart=Th.padStart,Le.parseInt=Th.parseInt,Le.random=$h,Le.reduce=xh.reduce,Le.reduceRight=xh.reduceRight,Le.repeat=Th.repeat,Le.replace=Th.replace,Le.result=Ah.result,Le.round=Fh.round,Le.sample=xh.sample,Le.size=xh.size,Le.snakeCase=Th.snakeCase,Le.some=xh.some,Le.sortedIndex=Mh.sortedIndex,Le.sortedIndexBy=Mh.sortedIndexBy,Le.sortedIndexOf=Mh.sortedIndexOf,Le.sortedLastIndex=Mh.sortedLastIndex,Le.sortedLastIndexBy=Mh.sortedLastIndexBy,Le.sortedLastIndexOf=Mh.sortedLastIndexOf,Le.startCase=Th.startCase,Le.startsWith=Th.startsWith,Le.subtract=Fh.subtract,Le.sum=Fh.sum,Le.sumBy=Fh.sumBy,Le.template=Th.template,Le.times=Nh.times,Le.toFinite=Eh.toFinite,Le.toInteger=z,Le.toLength=Eh.toLength,Le.toLower=Th.toLower,Le.toNumber=Eh.toNumber,Le.toSafeInteger=Eh.toSafeInteger,Le.toString=Eh.toString,Le.toUpper=Th.toUpper,Le.trim=Th.trim,Le.trimEnd=Th.trimEnd,Le.trimStart=Th.trimStart,Le.truncate=Th.truncate,Le.unescape=Th.unescape,Le.uniqueId=Nh.uniqueId,Le.upperCase=Th.upperCase,Le.upperFirst=Th.upperFirst,Le.each=xh.forEach,Le.eachRight=xh.forEachRight,Le.first=Mh.head,Zh(Le,(jh={},ls(Le,(function(e,t){qh.call(Le.prototype,t)||(jh[t]=e)})),jh),{chain:!1}),Le.VERSION="4.17.21",(Le.templateSettings=Th.templateSettings).imports._=Le,qe(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Le[e].placeholder=Le})),qe(["drop","take"],(function(e,t){Be.prototype[e]=function(r){r=void 0===r?1:Kh(z(r),0);var n=this.__filtered__&&!t?new Be(this):this.clone();return n.__filtered__?n.__takeCount__=Jh(r,n.__takeCount__):n.__views__.push({size:Jh(r,zh),type:e+(n.__dir__<0?"Right":"")}),n},Be.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),qe(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;Be.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ns(e),type:r}),t.__filtered__=t.__filtered__||n,t}})),qe(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Be.prototype[e]=function(){return this[r](1).value()[0]}})),qe(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Be.prototype[e]=function(){return this.__filtered__?new Be(this):this[r](1)}})),Be.prototype.compact=function(){return this.filter(V)},Be.prototype.find=function(e){return this.filter(e).head()},Be.prototype.findLast=function(e){return this.reverse().find(e)},Be.prototype.invokeMap=Ut((function(e,t){return"function"==typeof e?new Be(this):this.map((function(r){return su(r,e,t)}))})),Be.prototype.reject=function(e){return this.filter(zu(ns(e)))},Be.prototype.slice=function(e,t){e=z(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Be(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),void 0!==t&&(r=(t=z(t))<0?r.dropRight(-t):r.take(t-e)),r)},Be.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Be.prototype.toArray=function(){return this.take(zh)},ls(Be.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),o=Le[n?"take"+("last"==t?"Right":""):t],i=n||/^find/.test(t);o&&(Le.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,s=t instanceof Be,l=a[0],u=s||w(t),c=function(e){var t=o.apply(Le,sn([e],a));return n&&f?t[0]:t};u&&r&&"function"==typeof l&&1!=l.length&&(s=u=!1);var f=this.__chain__,h=!!this.__actions__.length,d=i&&!f,p=s&&!h;if(!i&&u){t=p?t:new Be(this);var R=e.apply(t,a);return R.__actions__.push({func:Uf,args:[c],thisArg:void 0}),new Ie(R,f)}return d&&p?e.apply(this,a):(R=this.thru(c),d?n?R.value()[0]:R.value():R)})})),qe(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Vh[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Le.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var o=this.value();return t.apply(w(o)?o:[],e)}return this[r]((function(r){return t.apply(w(r)?r:[],e)}))}})),ls(Be.prototype,(function(e,t){var r=Le[t];if(r){var n=r.name+"";qh.call(Me,n)||(Me[n]=[]),Me[n].push({name:t,func:r})}})),Me[vt(void 0,2).name]=[{name:"wrapper",func:void 0}],Be.prototype.clone=function(){var e=new Be(this.__wrapped__);return e.__actions__=Ee(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ee(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ee(this.__views__),e},Be.prototype.reverse=function(){if(this.__filtered__){var e=new Be(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Be.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=w(e),n=t<0,o=r?e.length:0,i=function(e,t,r){for(var n=-1,o=r.length;++n<o;){var i=r[n],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Wh(t,e+a);break;case"takeRight":e=Dh(e,t-a)}}return{start:e,end:t}}(0,o,this.__views__),a=i.start,s=i.end,l=s-a,u=n?s:a-1,c=this.__iteratees__,f=c.length,h=0,d=Gh(l,this.__takeCount__);if(!r||!n&&o==l&&d==l)return Zf(e,this.__actions__);var p=[];e:for(;l--&&h<d;){for(var R=-1,g=e[u+=t];++R<f;){var m=c[R],y=m.iteratee,v=m.type,S=y(g);if(2==v)g=S;else if(!S){if(1==v)continue e;break e}}p[h++]=g}return p},Le.prototype.at=Hh.at,Le.prototype.chain=Hh.wrapperChain,Le.prototype.commit=Hh.commit,Le.prototype.next=Hh.next,Le.prototype.plant=Hh.plant,Le.prototype.reverse=Hh.reverse,Le.prototype.toJSON=Le.prototype.valueOf=Le.prototype.value=Hh.value,Le.prototype.first=Le.prototype.head,Uh&&(Le.prototype[Uh]=Hh.toIterator)
/**
     * @license
     * Lodash (Custom Build) <https://lodash.com/>
     * Build: `lodash modularize exports="es" -o ./`
     * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
     * Released under MIT license <https://lodash.com/license>
     * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
     * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
     */;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Yh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Xh={};!function(e){!function(){const t="1.1.0";function r(e){alert("Mod ERROR:\n"+e);const t=new Error(e);throw console.error(t),t}const n=new TextEncoder;function o(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function i(e){const t=new Set;return e.filter((e=>!t.has(e)&&t.add(e)))}const a=new Map,s=new Set;function l(e){s.has(e)||(s.add(e),console.warn(e))}function u(e){const t=[],r=new Map,n=new Set;for(const o of d.values()){const i=o.patching.get(e.name);if(i){t.push(...i.hooks);for(const[t,a]of i.patches.entries())r.has(t)&&r.get(t)!==a&&l(`ModSDK: Mod '${o.name}' is patching function ${e.name} with same pattern that is already applied by different mod, but with different pattern:\nPattern:\n${t}\nPatch1:\n${r.get(t)||""}\nPatch2:\n${a}`),r.set(t,a),n.add(o.name)}}t.sort(((e,t)=>t.priority-e.priority));const o=function(e,t){if(0===t.size)return e;let r=e.toString().replaceAll("\r\n","\n");for(const[n,o]of t.entries())r.includes(n)||l(`ModSDK: Patching ${e.name}: Patch ${n} not applied`),r=r.replaceAll(n,o);return(0,eval)(`(${r})`)}(e.original,r);let i=function(t){var r,i;const a=null===(i=(r=m.errorReporterHooks).hookChainExit)||void 0===i?void 0:i.call(r,e.name,n),s=o.apply(this,t);return null==a||a(),s};for(let r=t.length-1;r>=0;r--){const n=t[r],o=i;i=function(t){var r,i;const a=null===(i=(r=m.errorReporterHooks).hookEnter)||void 0===i?void 0:i.call(r,e.name,n.mod),s=n.hook.apply(this,[t,e=>{if(1!==arguments.length||!Array.isArray(t))throw new Error(`Mod ${n.mod} failed to call next hook: Expected args to be array, got ${typeof e}`);return o.call(this,e)}]);return null==a||a(),s}}return{hooks:t,patches:r,patchesSources:n,enter:i,final:o}}function c(e,t=!1){let r=a.get(e);if(r)t&&(r.precomputed=u(r));else{let t=window;const i=e.split(".");for(let r=0;r<i.length-1;r++)if(t=t[i[r]],!o(t))throw new Error(`ModSDK: Function ${e} to be patched not found; ${i.slice(0,r+1).join(".")} is not object`);const s=t[i[i.length-1]];if("function"!=typeof s)throw new Error(`ModSDK: Function ${e} to be patched not found`);const l=function(e){let t=-1;for(const r of n.encode(e)){let e=255&(t^r);for(let t=0;t<8;t++)e=1&e?-306674912^e>>>1:e>>>1;t=t>>>8^e}return(~t>>>0).toString(16).padStart(8,"0").toUpperCase()}(s.toString().replaceAll("\r\n","\n")),c={name:e,original:s,originalHash:l};r=Object.assign(Object.assign({},c),{precomputed:u(c),router:()=>{},context:t,contextProperty:i[i.length-1]}),r.router=function(e){return function(...t){return e.precomputed.enter.apply(this,[t])}}(r),a.set(e,r),t[r.contextProperty]=r.router}return r}function f(){const e=new Set;for(const t of d.values())for(const r of t.patching.keys())e.add(r);for(const t of a.keys())e.add(t);for(const t of e)c(t,!0)}function h(){const e=new Map;for(const[t,r]of a)e.set(t,{name:t,original:r.original,originalHash:r.originalHash,sdkEntrypoint:r.router,currentEntrypoint:r.context[r.contextProperty],hookedByMods:i(r.precomputed.hooks.map((e=>e.mod))),patchedByMods:Array.from(r.precomputed.patchesSources)});return e}const d=new Map;function p(e){d.get(e.name)!==e&&r(`Failed to unload mod '${e.name}': Not registered`),d.delete(e.name),e.loaded=!1,f()}function R(e,t,n){"string"==typeof e&&"string"==typeof t&&(alert(`Mod SDK warning: Mod '${e}' is registering in a deprecated way.\nIt will work for now, but please inform author to update.`),e={name:e,fullName:e,version:t},t={allowReplace:!0===n}),e&&"object"==typeof e||r("Failed to register mod: Expected info object, got "+typeof e),"string"==typeof e.name&&e.name||r("Failed to register mod: Expected name to be non-empty string, got "+typeof e.name);let i=`'${e.name}'`;"string"==typeof e.fullName&&e.fullName||r(`Failed to register mod ${i}: Expected fullName to be non-empty string, got ${typeof e.fullName}`),i=`'${e.fullName} (${e.name})'`,"string"!=typeof e.version&&r(`Failed to register mod ${i}: Expected version to be string, got ${typeof e.version}`),e.repository||(e.repository=void 0),void 0!==e.repository&&"string"!=typeof e.repository&&r(`Failed to register mod ${i}: Expected repository to be undefined or string, got ${typeof e.version}`),null==t&&(t={}),t&&"object"==typeof t||r(`Failed to register mod ${i}: Expected options to be undefined or object, got ${typeof t}`);const a=!0===t.allowReplace,s=d.get(e.name);s&&(s.allowReplace&&a||r(`Refusing to load mod ${i}: it is already loaded and doesn't allow being replaced.\nWas the mod loaded multiple times?`),p(s));const l=e=>{"string"==typeof e&&e||r(`Mod ${i} failed to patch a function: Expected function name string, got ${typeof e}`);let t=h.patching.get(e);return t||(t={hooks:[],patches:new Map},h.patching.set(e,t)),t},u={unload:()=>p(h),hookFunction:(e,t,n)=>{h.loaded||r(`Mod ${i} attempted to call SDK function after being unloaded`);const o=l(e);"number"!=typeof t&&r(`Mod ${i} failed to hook function '${e}': Expected priority number, got ${typeof t}`),"function"!=typeof n&&r(`Mod ${i} failed to hook function '${e}': Expected hook function, got ${typeof n}`);const a={mod:h.name,priority:t,hook:n};return o.hooks.push(a),f(),()=>{const e=o.hooks.indexOf(a);e>=0&&(o.hooks.splice(e,1),f())}},patchFunction:(e,t)=>{h.loaded||r(`Mod ${i} attempted to call SDK function after being unloaded`);const n=l(e);o(t)||r(`Mod ${i} failed to patch function '${e}': Expected patches object, got ${typeof t}`);for(const[o,a]of Object.entries(t))"string"==typeof a?n.patches.set(o,a):null===a?n.patches.delete(o):r(`Mod ${i} failed to patch function '${e}': Invalid format of patch '${o}'`);f()},removePatches:e=>{h.loaded||r(`Mod ${i} attempted to call SDK function after being unloaded`),l(e).patches.clear(),f()},callOriginal:(e,t,n)=>(h.loaded||r(`Mod ${i} attempted to call SDK function after being unloaded`),"string"==typeof e&&e||r(`Mod ${i} failed to call a function: Expected function name string, got ${typeof e}`),Array.isArray(t)||r(`Mod ${i} failed to call a function: Expected args array, got ${typeof t}`),function(e,t,r=window){return c(e).original.apply(r,t)}(e,t,n)),getOriginalHash:e=>("string"==typeof e&&e||r(`Mod ${i} failed to get hash: Expected function name string, got ${typeof e}`),c(e).originalHash)},h={name:e.name,fullName:e.fullName,version:e.version,repository:e.repository,allowReplace:a,api:u,loaded:!0,patching:new Map};return d.set(e.name,h),Object.freeze(u)}function g(){const e=[];for(const t of d.values())e.push({name:t.name,fullName:t.fullName,version:t.version,repository:t.repository});return e}let m;const y=function(){if(void 0===window.bcModSdk)return window.bcModSdk=function(){const e={version:t,apiVersion:1,registerMod:R,getModsInfo:g,getPatchingInfo:h,errorReporterHooks:Object.seal({hookEnter:null,hookChainExit:null})};return m=e,Object.freeze(e)}();if(o(window.bcModSdk)||r("Failed to init Mod SDK: Name already in use"),1!==window.bcModSdk.apiVersion&&r(`Failed to init Mod SDK: Different version already loaded ('1.1.0' vs '${window.bcModSdk.version}')`),window.bcModSdk.version!==t&&(alert(`Mod SDK warning: Loading different but compatible versions ('1.1.0' vs '${window.bcModSdk.version}')\nOne of mods you are using is using an old version of SDK. It will work for now but please inform author to update`),window.bcModSdk.version.startsWith("1.0.")&&void 0===window.bcModSdk._shim10register)){const e=window.bcModSdk,t=Object.freeze(Object.assign(Object.assign({},e),{registerMod:(t,r,n)=>t&&"object"==typeof t&&"string"==typeof t.name&&"string"==typeof t.version?e.registerMod(t.name,t.version,"object"==typeof r&&!!r&&!0===r.allowReplace):e.registerMod(t,r,n),_shim10register:!0}));window.bcModSdk=t}return window.bcModSdk}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=y}()}(Xh);var Qh,ed,td,rd,nd,od,id=Yh(Xh);const ad=Object.freeze(["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]),sd=/^(v?)([0-9]+)\.([0-9]+)\.([0-9]+)(\.\S+)?$/;Qh=new WeakSet,ed=function(e,t){const r=new Date(Date.now());console[e]("MBS:",...t),this.push({date:r,level:e,args:t})};const ld=new class extends Array{constructor(){super(...arguments),Qh.add(this)}debug(...e){r(this,Qh,"m",ed).call(this,"debug",e)}log(...e){r(this,Qh,"m",ed).call(this,"log",e)}warn(...e){r(this,Qh,"m",ed).call(this,"warn",e)}error(...e){r(this,Qh,"m",ed).call(this,"error",e)}toJSON(){return this.map((e=>({date:e.date.toUTCString(),level:e.level,args:e.args.map((e=>e instanceof Map||e instanceof Set?Array.from(e):e))})))}};function ud(e,t,r=-1/0,n=1/0){if(!(Number.isInteger(e)&&e>=r&&e<=n))throw"number"!=typeof e?new TypeError(`Invalid "${t}" type: ${typeof e}`):Number.isInteger(e)?new RangeError(`"${t}" must fall in the [${r}, ${n}] interval: ${e}`):new Error(`"${t}" must be an integer: ${e}`)}function cd(e,t,r){if(ud(t,"n",0),!Array.isArray(e))throw new TypeError('Invalid "list" type: '+typeof e);const n=t-e.length;return n>0&&e.push(...Array(n).fill(r)),e}function fd(e,t){if(ud(t,"n",0),!Array.isArray(e))throw new TypeError('Invalid "list" type: '+typeof e);const r=e.length-t;return r>0&&e.splice(t,r),e}function hd(e){if(!Cd(e))throw new TypeError('Invalid "list" type: '+typeof e);if(0===e.length)throw new Error('Passed "list" must contain at least 1 item');return e[Xc(0,e.length-1,!1)]}function dd(e){return ud(e,"n",0,8),rf(0,e).map((e=>hd(ad))).join("")}async function pd(e,t=100){for(;!e();)await new Promise((e=>setTimeout(e,t)));return!0}const Rd=id.registerMod({name:"MBS",fullName:"Maid's Bondage Scripts",repository:"https://github.com/bananarama92/MBS",version:t});td=new WeakMap;const gd=new class{constructor(){td.set(this,null)}get modName(){return"MBS"}getRuleState(e){return null===r(this,td,"f")&&"undefined"!=typeof bcx&&n(this,td,bcx.getModApi("MBS"),"f"),r(this,td,"f")?.getRuleState(e)??null}};function md(e,t){let r=`${e}(`;return r+=Object.values(t).map((e=>String(e))).join(", "),r+=")",r}class yd{get index(){return r(this,nd,"f")}set index(e){this.setPosition(e)}get value(){return r(this,rd,"f")[r(this,nd,"f")]}get list(){return r(this,rd,"f")}constructor(e,t=0){if(rd.set(this,void 0),nd.set(this,void 0),!Sd(e))throw new TypeError('Invalid "iterable" type: '+typeof e);const r=Object.freeze([...e]);if(0===r.length)throw new Error('Passed "iterable" must contain at least one element');ud(t,"index",0,r.length-1),n(this,rd,r,"f"),n(this,nd,t,"f")}*[(rd=new WeakMap,nd=new WeakMap,Symbol.iterator)](){for(;;)yield this.next()}next(e=!0){const t=(r(this,nd,"f")+1)%r(this,rd,"f").length;return e&&n(this,nd,t,"f"),r(this,rd,"f")[t]}previous(e=!0){const t=(r(this,nd,"f")+r(this,rd,"f").length-1)%r(this,rd,"f").length;return e&&n(this,nd,t,"f"),r(this,rd,"f")[t]}setPosition(e){ud(e,"index",0,r(this,rd,"f").length-1),n(this,nd,e,"f")}toString(){return md(typeof this,this.toJSON())}toJSON(){return{list:this.list,index:this.index}}}function vd(e,t){if(ud(e,"start",0,65535),!Cd(t))throw new TypeError('Invalid "indices" type: '+typeof t);const r=e+Math.max(0,...t)+1;ud(r,"stop",e+1,65535);const n=rf(e,r);return t.map((e=>String.fromCharCode(n[e])))}function Sd(e){return Symbol.iterator in Object(e)}class bd{constructor(e=0,t=0,r=0,o=!1){if(od.set(this,void 0),ud(e,"major",0,65535),ud(t,"minor",0,65535),ud(r,"micro",0,65535),"boolean"!=typeof o)throw new TypeError('Invalid "beta" type: '+typeof o);this.major=e,this.minor=t,this.micro=r,this.beta=o,n(this,od,[e,t,r].map((e=>String.fromCharCode(e)))+String.fromCharCode(o?0:1),"f"),Object.freeze(this)}equal(e){return e instanceof bd&&this.valueOf()===e.valueOf()}greater(e){return e instanceof bd&&this.valueOf()>e.valueOf()}lesser(e){return e instanceof bd&&this.valueOf()<e.valueOf()}greaterOrEqual(e){return e instanceof bd&&this.valueOf()>=e.valueOf()}lesserOrEqual(e){return e instanceof bd&&this.valueOf()<=e.valueOf()}static fromVersion(e){const t=sd.exec(e);if(null===t)throw new Error(`Invalid "version": ${e}`);return new bd(Number(t[2]),Number(t[3]),Number(t[4]),void 0!==t[5])}static fromBCVersion(e){const t=GameVersionFormat.exec(e);if(null===t)throw new Error(`Invalid BC version: "${e}"`);return new bd(Number(t[1]),0,0,void 0!==t[2])}toString(){return md(typeof this,this.toJSON())}valueOf(){return r(this,od,"f")}toJSON(){return{major:this.major,minor:this.minor,micro:this.micro,beta:this.beta}}}function Cd(e){return Array.isArray(e)}function wd(e){return Object.entries(e)}function Bd(e){return Object.fromEntries(e)}function kd(e,t){return e.includes(t)}function Pd(e){return Number.isInteger(e)}od=new WeakMap;const Md=Object.freeze(new Map([["CraftingSaveServer",["025B434F"]],["CraftingClick",["FF1A7B21"]],["CraftingRun",["5BE6E125"]],["MainHallRun",["735A1207"]],["MainHallClick",["7A6D741A"]],["ServerPlayerIsInChatRoom",["E3771112"]],["WheelFortuneLoad",["204D57D4"]],["WheelFortuneClick",["21CCD6B4"]],["WheelFortuneRun",["A59DA22A"]],["WheelFortuneMouseUp",["1465BDFA"]],["WheelFortuneMouseDown",["306C80B6"]],["WheelFortuneCustomizeLoad",["97F0A81E"]]].map((e=>{const[t,r]=e,n=new Set(r.filter((e=>null!=e)));return[t,Object.freeze(n)]}))));function xd(e,t,r){if(Ig(t),null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);ExtendedItemSetOptionByRecord(t,e,r,{refresh:!1,push:!1})}function _d(e,t,r){const n={Asset:e};return ExtendedItemInit(t,n,!1,!1),r&&xd(n,t,r),n.Property??{}}const Id=Object.freeze({NONE:0,CLOTHES:1,UNDERWEAR:2,COSPLAY:3,ALL:4});let Ed;function Fd(e,t){switch(e){case Id.NONE:return()=>!1;case Id.CLOTHES:return e=>e.Group.AllowNone&&!e.BodyCosplay&&!e.Group.Underwear;case Id.UNDERWEAR:return e=>e.Group.AllowNone&&!e.BodyCosplay;case Id.COSPLAY:return e=>!Eg(t)?e.Group.AllowNone&&!e.BodyCosplay:e.Group.AllowNone;case Id.ALL:return e=>!!Eg(t)||e.Group.AllowNone&&!e.BodyCosplay;default:throw new Error(`Invalid "stripLevel" value: ${e}`)}}function Od(e,t){if(void 0===t)return[-1,!1];if(void 0!==t.priority&&void 0!==t.blocksSubSet)return[t.priority,t.blocksSubSet];if(0===t.block.size)return t.priority=0,t.blocksSubSet=!1,[t.priority,t.blocksSubSet];{const r=[];for(const n of t.block)r.push(Od(e,e.get(n)));return t.priority=1+Math.max(0,...r.map((e=>e[0]))),t.blocksSubSet=t.superSet&&r.some((e=>e[1])),[t.priority,t.blocksSubSet]}}function Ld(e,t,r=[]){if(!Cd(e))throw new TypeError('Invalid "itemList" type: '+typeof e);const n=new Map;[e,r].forEach(((e,r)=>{for(const{Group:o,Name:i,TypeRecord:a}of e){if(n.has(o))continue;const e=AssetGet(t.AssetFamily,o,i);if(null==e)throw new Error(`Unknown asset: ${o}${i}`);if("Item"!==e.Group.Category)continue;const s=_d(e,t,a),l={superSet:1===r,block:new Set(...e.Block??[],...s.Block??[])};(e.Effect?.includes("Enclose")||s.Effect?.includes("Enclose"))&&(l.priority=AssetGroup.length,l.blocksSubSet=l.superSet),n.set(o,l)}}));for(const[e,t]of n)Od(n,t);return n}pd(Og).then((()=>Ed=CharacterLoadSimple("MBSDummy")));const $d=new Map;function Ad(e,t){const r=InventoryGetLock(e);if(!InventoryItemHasEffect(e,"Lock"))return!0;if("Decoy"===e.Craft?.Property){if(null==r)return!1;return!["OwnerOnly","LoverOnly","FamilyOnly"].some((t=>r.Asset[t]||e.Asset[t]))}const n=gd.getRuleState("block_keyuse_self"),o=t.IsPlayer()&&n?.inEffect&&n?.isEnforced;switch(r?.Asset?.Name){case"SafewordPadlock":return!0;case"MetalPadlock":case"MistressPadlock":case"MistressTimerPadlock":case"PandoraPadlock":{if(o||LogQuery("KeyDeposit","Cell"))return!1;let e=$d.get(`${t.ID}:${r.Asset.Name}`);return void 0===e&&(e=t.Inventory.some((e=>e.Asset.Name===`${r.Asset.Name}Key`)),$d.set(`${t.ID}:${r.Asset.Name}`,e)),e}case"TimerPasswordPadlock":case"PasswordPadlock":case"CombinationPadlock":return Number(e.Property?.LockMemberNumber)===t.MemberNumber;case"HighSecurityPadlock":{const r=(e?.Property?.MemberNumberListKeys??"").split(",").map(Number);return!o&&kd(r,t.MemberNumber)}default:return!1}}function Hd(e,t,r,n=null,o=null,i=Player){if(!Cd(t))throw new TypeError('Invalid "itemList" type: '+typeof t);if(function(e){const t=e.Appearance.find((e=>InventoryItemHasEffect(e,"Enclose")));return null!=t&&!Ad(t,e)}(i))return void ld.log(`Failed to equip all "${e}" wheel of fortune items: cannot unlock enclosing item`);!function(e,t){Ig(t);const r=Fd(e,t),n=t.Appearance;for(let e=n.length-1;e>=0;e--){const t=n[e].Asset;t.Group.AllowNone&&"Appearance"===t.Group.Category&&r(t)&&n.splice(e,1)}}(r,i),"function"==typeof o&&(t=o(t,i));const a=function(e,t,r){const n=Ld(e,r,t);return t.filter((e=>n.get(e.Group)?.blocksSubSet))}(t,i.Appearance.map((e=>({Group:e.Asset.Group.Name,Name:e.Asset.Name,TypeRecord:e.Property?.TypeRecord,NoEquip:!0}))),i);$d.clear();const s={},l=new Set,u=i.IsPlayer()&&LogQuery("ClubSlave","Management");for(const{Name:e,Group:r,Equip:n,NoEquip:o}of[...a,...t]){const t=AssetGet(i.AssetFamily,r,e),a=InventoryGet(i,r),c="function"!=typeof n||n(i);if(null!=t)if(c){const e={InventoryGroupIsBlockedForCharacter:InventoryGroupIsBlockedForCharacter(i,r,!1),InventoryGroupIsBlockedByOwnerRule:InventoryGroupIsBlockedByOwnerRule(i,r),"Locked item equipped":null!=a&&!Ad(a,i)};o||(e.InventoryBlockedOrLimited=InventoryBlockedOrLimited(i,{Asset:t}),e.InventoryChatRoomAllow=!InventoryChatRoomAllow(t.Category??[]),e["Blocked via Club Slave Collar"]=u&&"Appearance"===t.Group.Category);const n=wd(e).filter((e=>e[1]));0!==n.length?s[t.Description]=n.map((e=>e[0])):null!=a&&InventoryRemove(i,r,!1)}else l.add(r);else s[e]=["Unknown asset"]}for(const{Name:e,Group:r,Craft:o,ItemCallback:a,Color:u,TypeRecord:c,Property:f}of t){const t=AssetGet(i.AssetFamily,r,e),h=s[t?.Description??e];if(null==t||void 0!==h||l.has(r))continue;if(!InventoryAllow(i,t,t.Prerequisite,!1)){s[t.Description]=["InventoryAllow"];continue}const d=[...u??t.DefaultColor],p=CharacterAppearanceSetItem(i,r,t,d,SkillGetWithRatio(i,"Bondage"),i.MemberNumber,!1);null!=p&&(c&&xd(p,i,c),void 0!==o&&(p.Craft=ua(o),InventoryCraft(i,i,r,p.Craft,!1,!1)),p.Property=Object.assign(p.Property??{},ua(f)),"function"==typeof a&&a(p,i),"function"==typeof n&&n(p,i))}if(CharacterRefresh(i,!1,!1),i.IsPlayer()){ChatRoomCharacterUpdate(i);const t=Object.values(s).length;0!==t&&ld.log(`Failed to equip ${t} "${e}" wheel of fortune items`,s)}}function Td(e,t,r){if("string"!=typeof t||!DynamicDrawTextRegex.test(t))return!1;const n=`${r.Group.Name}${r.Name}`,[o,i]=wd(TextItemDataLookup).find((([e])=>e.includes(n)))??["",null];return null!==i&&t.length<=(i.maxLength[e]??-1)}const Nd=Object.freeze({OverridePriority:(e,t)=>{if(Pd(e))return!0;if(CommonIsObject(e)){const r=t.Layer.map((e=>e.Name));return wd(e).every((([e,t])=>r.includes(e)&&Pd(t)))}return!1},Opacity:(e,t)=>"number"==typeof e&&e<=t.MaxOpacity&&e>=t.MinOpacity,Text:(e,t)=>Td("Text",e,t),Text2:(e,t)=>Td("Text2",e,t),Text3:(e,t)=>Td("Text3",e,t),ShowText:(e,t)=>"boolean"==typeof e,TriggerValues:(e,t)=>"string"==typeof e&&e.split(",").length===ItemVulvaFuturisticVibratorTriggers.length,AccessMode:(e,t)=>"string"==typeof e&&ItemVulvaFuturisticVibratorAccessModes.includes(e),PunishOrgasm:(e,t)=>"boolean"==typeof e,PunishStandup:(e,t)=>"boolean"==typeof e,Texts:(e,t)=>!!Array.isArray(e)&&(!(e.length<ItemDevicesLuckyWheelMinTexts||e.length>ItemDevicesLuckyWheelMaxTexts)&&e.every((e=>"string"==typeof e&&e.length<=ItemDevicesLuckyWheelMaxTextLength))),TargetAngle:(e,t)=>"number"==typeof e&&e>=0&&e<=360,OverrideHeight:function(e,t){const r=VariableHeightDataLookup[`${t.Group.Name}${t.Name}`];if(void 0===r)return!1;const n=e;return null!==n&&"object"==typeof n&&Number.isInteger(n.Priority)&&"number"==typeof n.Height&&n.Height<=r.maxHeight&&n.Height>=r.minHeight&&(null==n.HeightRatioProportion||"number"==typeof n.HeightRatioProportion&&n.HeightRatioProportion>=0&&n.HeightRatioProportion<=1)},PunishStruggle:(e,t)=>"boolean"==typeof e,PunishStruggleOther:(e,t)=>"boolean"==typeof e,PunishRequiredSpeechWord:(e,t)=>"string"==typeof e&&e.length<=70,PunishProhibitedSpeechWords:(e,t)=>"string"==typeof e&&e.length<=70,PunishSpeech:(e,t)=>Pd(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PunishRequiredSpeech:(e,t)=>Pd(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PunishProhibitedSpeech:(e,t)=>Pd(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PublicModeCurrent:(e,t)=>Pd(e)&&e>=0&&e<FuturisticTrainingBeltModes.length,PublicModePermission:(e,t)=>Pd(e)&&e>=0&&e<FuturisticTrainingBeltPermissions.length,ShockLevel:(e,t)=>Pd(e)&&e>=0&&e<=2,PortalLinkCode:(e,t)=>"string"==typeof e&&PortalLinkCodeRegex.test(e)});function Dd(e,t){if(null===t||"object"!=typeof t)return{};const r=new Set(["OverridePriority"]);if(e.Archetype){const n=ExtendedItemGatherOptions({Asset:e,Property:t});for(const e of n){"VariableHeightOption"===e.OptionType&&r.add("OverrideHeight");for(const t of CommonKeys(e.ParentData.baselineProperty??{}))CraftingPropertyExclude.has(t)||r.add(t)}}const n={};for(const[o,i]of wd(t)){const t=Nd[o];null!=i&&r.has(o)&&void 0!==t&&(t(i,e)&&(n[o]=i))}return n}const Wd=Object.freeze(new Map([["Unknown asset",e=>null==e],["Unsupported owner-only asset",e=>e?.OwnerOnly],["Unsupported lovers-only asset",e=>e?.LoverOnly],["Unsupported D/S family-only asset",e=>e?.FamilyOnly],["Unsupported disabled asset",e=>!e?.Enable],["Unsupported script-asset",e=>"Script"===e?.Group?.Category]]));function Gd(e,t,r=!0){for(const[r,n]of Wd)if(n(e))throw new Error(`${r}: ${t.Group}${t.Name}`);let n,o;"string"==typeof t.Color?n=[t.Color]:Array.isArray(t.Color)&&t.Color.every((e=>"string"==typeof e))&&(n=[...t.Color]),null!==t.Craft&&"object"==typeof t.Craft&&(o=Object.assign(ua(t.Craft),{TypeRecord:void 0,OverridePriority:null,Lock:""}),CraftingValidate(o,e,!1));const i=t.Property??{};let a;return CommonIsObject(i.TypeRecord)?a=Object.freeze({...i.TypeRecord}):"string"==typeof i.Type||null===i.Type?a=ExtendedItemTypeToRecord(e,i.Type):"string"==typeof i.Mode&&(a=ExtendedItemTypeToRecord(e,i.Mode)),Object.freeze({Name:t.Name,Group:t.Group,Custom:r,Property:Object.freeze(Dd(e,t.Property)),TypeRecord:a,Color:n,Craft:Object.freeze(o),ItemCallback:void 0,Equip:void 0})}function jd(e,t){if(!Cd(e))throw new TypeError('Invalid "items" type: '+typeof e);return e.map((e=>function(e,t){const{Group:r,Name:n,Color:o,Craft:i,TypeRecord:a,Property:s}=e,l=AssetGet(t.AssetFamily,r,n);if(null==l)throw new Error(`Unknown asset: ${r}${n}`);return{Group:r,Name:n,Color:aa(o),Craft:aa(i),Property:Object.assign(_d(l,t,a),ua(s))}}(e,t)))}var zd;class Vd{constructor(e){this.screen="",this.parent=e,this.children=new Map}load(){const e=CurrentScreen;CurrentScreenFunctions?.Unload?.(),ControllerIsActive()&&ControllerClearAreas(),CurrentScreen=this.screen,CurrentScreenFunctions=this.getFunctions(),CurrentDarkFactor=1,CommonGetFont.clearCache(),CommonGetFontName.clearCache(),CurrentScreenFunctions?.Resize?.(!0),"ChatSearch"!=e&&"ChatCreate"!=e||ChatRoomStimulationMessage("Walk")}exitScreens(e){if(!e)return void this.parent?.load();let t=this.parent;for(;null!==t&&!(t instanceof qd);)t.exit(),t=t.parent;t?.load()}getFunctions(){return{Run:this.run.bind(this),Click:this.click.bind(this),Load:this.load.bind(this),Unload:this.unload?.bind(this),Resize:this.resize?.bind(this),KeyDown:this.keyDown?.bind(this),Exit:this.exit.bind(this)}}}Vd.background="Sheet",Vd.screen="";class qd extends Vd{constructor(e,t,r,n){super(e),this.module=t,this.background=r,this.screenFunctions=Object.freeze({...n})}run(e){return this.screenFunctions.Run(e)}click(e){return this.screenFunctions.Click(e)}load(){return this.screenFunctions.Load?.()}unload(){return this.screenFunctions.Unload?.()}resize(e){return this.screenFunctions.Resize?.(e)}keyDown(e){return this.screenFunctions.KeyDown?.(e)??!1}exit(){return this.screenFunctions.Exit?.()}}const Ud=Object.freeze({NONE:0,SAVE:1,DELETE:2});class Kd extends Vd{get index(){return r(this,zd,"f")}set index(e){ud(e,"index",0,this.mbsList.length-1),n(this,zd,e,"f")}get mbsObject(){return this.mbsList[r(this,zd,"f")]}hasStorageSpace(){return null!==this.mbsList[this.index]||this.dataSize.value<=this.dataSize.max*this.dataSize.marigin}constructor(e,t,r,n){super(e),zd.set(this,0),this.character=n,this.mbsList=t,this.index=r,this.dataSize=Object.seal({value:0,valueRecord:{},max:Op,marigin:.9})}load(){const e=Lp(this.character.OnlineSharedSettings);this.dataSize.value=Ef(Object.values(e),(e=>Number.isNaN(e)?0:e)),this.dataSize.valueRecord=e,super.load()}click(){const e=this.character.IsPlayer();for(const{coords:t,next:r,requiresPlayer:n}of this.clickList){const o=!!e||!n;MouseIn(...t)&&o&&r()}}exit(e=!0,t=Ud.NONE){if(this.unload(),!this.character.IsPlayer())return this.exitScreens(e);switch(t){case Ud.NONE:break;case Ud.SAVE:this.settings.isValid(this.index)&&this.hasStorageSpace()&&(this.mbsList[this.index]=this.settings.writeSettings(),this.mbsList[this.index]?.register());break;case Ud.DELETE:{const e=this.mbsList[this.index];this.mbsList[this.index]=null,e?.unregister();break}default:throw new Error(`Unsupported action: ${t}`)}this.exitScreens(e)}}var Jd,Zd;zd=new WeakMap;const Yd=Object.freeze({[Id.NONE]:"None",[Id.CLOTHES]:"Clothes",[Id.UNDERWEAR]:"Clothes and underwear",[Id.COSPLAY]:"Clothes, underwear and cosplay items",[Id.ALL]:"Clothes, underwear, cosplay items and body"}),Xd=new RegExp("(([0-9]?[0-9])d)?(([0-9]?[0-9])h)?(([0-9]?[0-9])m)?(([0-9]?[0-9])s)?");function Qd(e,t,r){const n=ElementCreateInput(`MBSFlag${t}`,"text",function(e){e=Do(e,60,14400);const t={d:0,h:0,m:0,s:0};t.d=Math.min(7,Math.floor(e/86400)),e-=86400*t.d,t.h=Math.floor(e/3600),e-=3600*t.h,t.m=Math.floor(e/60),e-=60*t.m,t.s=e;let r=t.d?`${t.d}d`:"";return r+=`${t.h.toString().padStart(2,"0")}h${t.m.toString().padStart(2,"0")}m${t.s.toString().padStart(2,"0")}s`,r}(e.time),11);null!=n&&(n.pattern=Xd.source,r&&n.setAttribute("disabled",!0),n.onchange=function(){const{value:t}=this,r=function(e){const t=e.match(Xd);if(null===t)return null;const[r,n,o,i]=[t[2],t[4],t[6],t[8]];let a=0;return a+=void 0===r?0:86400*Number.parseInt(r,10),a+=void 0===n?0:3600*Number.parseInt(n,10),a+=void 0===o?0:60*Number.parseInt(o,10),a+=void 0===i?0:Number.parseInt(i,10),a}(t);null!==r&&(e.time=Do(r??60,60,14400))})}class ep extends Kd{constructor(e,t,n,o){super(e,t,n,o),Jd.add(this),this.screen=ep.screen,this.settings=new Tg(t),this.preview=CharacterLoadSimple(`MBSFortuneWheelPreview-${Player.MemberNumber}`),this.clickList=[{coords:[75,60,90,90],next:()=>this.exit(!1,Ud.DELETE),requiresPlayer:!0},{coords:[1830,60,90,90],next:()=>this.exit(!0,Ud.NONE),requiresPlayer:!1},{coords:[1720,60,90,90],next:()=>this.exit(!1,Ud.NONE),requiresPlayer:!1},{coords:[1610,60,90,90],next:()=>{this.settings.isValid(this.index)&&this.hasStorageSpace()&&this.exit(!1,Ud.SAVE)},requiresPlayer:!0},{coords:[1500,375,225,64],next:()=>{this.settings.loadFromBase64()&&r(this,Jd,"m",Zd).call(this)},requiresPlayer:!0},{coords:[750,550,175,64],next:()=>{this.settings.stripIter.previous(),r(this,Jd,"m",Zd).call(this)},requiresPlayer:!0},{coords:[925,550,175,64],next:()=>{this.settings.stripIter.next(),r(this,Jd,"m",Zd).call(this)},requiresPlayer:!0},{coords:[750,700,175,64],next:()=>{this.settings.equipIter.previous(),r(this,Jd,"m",Zd).call(this)},requiresPlayer:!0},{coords:[925,700,175,64],next:()=>{this.settings.equipIter.next(),r(this,Jd,"m",Zd).call(this)},requiresPlayer:!0},...this.settings.flags.map(((e,t)=>({coords:[t<4?1200:1550,550+t%4*100,64,64],next:()=>{e.enabled=!e.enabled},requiresPlayer:!0})))]}load(){super.load();const e=!this.character.IsPlayer(),t=zg("name",this.settings,"Name",[1100,300,700,64],"",70),n=zg("outfitCache",this.settings,"Outfit code",[1150,450,700,64]),o=Vg("weight",this.settings,[750,850,64,64],1,1,9);e&&(t.setAttribute("disabled",!0),n.setAttribute("disabled",!0),o.setAttribute("disabled",!0));const i=this.mbsObject;null!==i?(t.value=i.name,o.value=i.weight.toString(),this.settings.readSettings(i),this.settings.outfitCache=n.value=LZString.compressToBase64(JSON.stringify(jd(i.itemList,this.preview)))):this.settings.reset();for(const[t,r]of this.settings.flags.entries())if("TimerPasswordPadlock"===r.type)Qd(r,t,e);r(this,Jd,"m",Zd).call(this)}run(){const e=this.character.IsPlayer();let t="Customize wheel of fortune item set";if(!e){t=`View ${this.character.Nickname??this.character.Name}'s wheel of fortune item set customization`}DrawText(t,1e3,105,"Black"),DrawButton(75,60,90,90,"",e?"White":"Gray","Icons/Trash.png","Delete",!e),DrawButton(1830,60,90,90,"","White","Icons/Exit.png","Exit"),DrawButton(1720,60,90,90,"","White","Icons/Cancel.png","Cancel");let r=!1,n="White",o="Accept";e?null===this.settings.itemList?(r=!0,n="Gray",o+=": Missing outfit"):this.settings.isValid(this.index)?this.hasStorageSpace()||(r=!0,n="Gray",o=`Max allowed OnlineSharedSettings storage size exceeded (${$p(this.dataSize.value)} / ${$p(this.dataSize.max)} KB)`):(r=!0,n="Gray",null===this.settings.name?o+=": Missing name":this.settings.flags.every((e=>!e.enabled))?o+=": Must enable at least one lock flag":o+=": Duplicate name"):(r=!0,n="Gray"),DrawButton(1610,60,90,90,"",n,"Icons/Accept.png",o,r),DrawCharacter(this.preview,300,175,.78,!1);const i=null===this.settings.outfitCache||!e,a=i?"Gray":"White",s=null===this.settings.outfitCache?"Missing outfit code":"Parse the outfit code";DrawButton(1500,375,225,64,"Parse",a,void 0,s,i),ElementPosition("MBSname",1100,300,700,64),ElementPosition("MBSoutfitCache",1100,400,700,64),DrawBackNextButton(750,550,350,64,Yd[this.settings.stripLevel],"White","",(()=>Yd[this.settings.stripIter.previous(!1)]),(()=>Yd[this.settings.stripIter.next(!1)]),!e),DrawBackNextButton(750,700,350,64,Yd[this.settings.equipLevel],"White","",(()=>Yd[this.settings.equipIter.previous(!1)]),(()=>Yd[this.settings.equipIter.next(!1)]),!e),MainCanvas.textAlign="left",DrawText("Supported lock types:",1200,516,"Black"),DrawText("Clothing strip level:",750,516,"Black"),DrawText("Clothing equip level:",750,666,"Black"),DrawText("Wheel option weight:",750,816,"Black"),ElementPosition("MBSweight",790,870,80);for(const[t,r]of this.settings.flags.entries()){const n=550+t%4*100,o=t<4?1200:1550;switch(r.type){case"ExclusivePadlock":DrawText("Exclusive",o+75,n+32,"Black");break;case"HighSecurityPadlock":DrawText("High Security",o+75,n+32,"Black");break;case"TimerPasswordPadlock":ElementPosition(`MBSFlag${t}`,o+200,n+29,250,60);break;case null:DrawText("No Lock",o+75,n+32,"Black")}DrawCheckbox(o,n,64,64,"",r.enabled,!e)}MainCanvas.textAlign="center"}unload(){ElementRemove("MBSname"),ElementRemove("MBSoutfitCache"),ElementRemove("MBSweight");for(const[e,t]of this.settings.flags.entries())if("TimerPasswordPadlock"===t.type)ElementRemove(`MBSFlag${e}`)}}Jd=new WeakSet,Zd=function(){if(this.preview.Appearance=[...Player.Appearance],this.preview.OnlineSharedSettings=Player.OnlineSharedSettings,CharacterReleaseTotal(this.preview),null===this.settings.itemList)return;const e=Fd(this.settings.equipLevel,this.preview),t=this.preview.AssetFamily;Hd("MBSPreview",this.settings.itemList.filter((({Name:r,Group:n})=>{const o=AssetGet(t,n,r);return null!=o&&("Appearance"!==o.Group.Category||e(o))})),this.settings.stripLevel,null,null,this.preview)},ep.screen="MBS_FWItemSetScreen",ep.background="Sheet";class tp extends Kd{constructor(e,t,r,n){super(e,t,r,n),this.screen=tp.screen,this.settings=new Ng(t),this.clickList=Object.freeze([{coords:[75,60,90,90],next:()=>this.exit(!1,Ud.DELETE),requiresPlayer:!0},{coords:[1830,60,90,90],next:()=>this.exit(!0,Ud.NONE),requiresPlayer:!1},{coords:[1720,60,90,90],next:()=>this.exit(!1,Ud.NONE),requiresPlayer:!1},{coords:[1610,60,90,90],next:()=>{this.settings.isValid(this.index)&&this.hasStorageSpace()&&this.exit(!1,Ud.SAVE)},requiresPlayer:!0}])}load(){super.load();const e=Vg("weight",this.settings,[750,850,64,64],1,1,9),t=zg("name",this.settings,"Role play command",[900,500,900,64],"",210);this.character.IsPlayer()||(t.setAttribute("disabled",!0),e.setAttribute("disabled",!0)),null!==this.mbsObject?(t.value=this.mbsObject.name,e.value=this.mbsObject.weight.toString(),this.settings.readSettings(this.mbsObject)):this.settings.reset()}run(){const e=this.character.IsPlayer();let t="Customize wheel of fortune command";if(!e){t=`View ${this.character.Nickname??this.character.Name}'s wheel of fortune command customization`}DrawText(t,1e3,105,"Black"),DrawButton(75,60,90,90,"",e?"White":"Gray","Icons/Trash.png","Delete",!e),DrawButton(1830,60,90,90,"","White","Icons/Exit.png","Exit"),DrawButton(1720,60,90,90,"","White","Icons/Cancel.png","Cancel");let r=!1,n="White",o="Accept";e?this.settings.isValid(this.index)?this.hasStorageSpace()||(r=!0,n="Gray",o=`Max allowed OnlineSharedSettings storage size exceeded (${$p(this.dataSize.value)} / ${$p(this.dataSize.max)} KB)`):(r=!0,n="Gray",o+=null===this.settings.name?": Missing name":": Duplicate name"):(r=!0,n="Gray"),DrawButton(1610,60,90,90,"",n,"Icons/Accept.png",o,r),ElementPosition("MBSname",900,500,900,64),DrawText("Wheel option weight:",620,576,"Black"),ElementPosition("MBSweight",490,630,80)}unload(){ElementRemove("MBSname"),ElementRemove("MBSweight")}}tp.screen="MBS_FWCommandScreen",tp.background="Sheet";var rp,np;function op(e,t,r){const n=Dp(e.OnlineSharedSettings?.MBS,"OnlineSharedSettings",!1);let o,i=void 0===n?void 0:n[t];if(Array.isArray(i)||(void 0!==i&&ld.warn(`Failed to load "${e.AccountName}" wheel of fortune ${r}`),i=Array(Mg).fill(null)),e.IsPlayer())o=Player.MBSSettings[t];else{const e=[];o=Tp("FortuneWheelItemSets"===t?Gg.fromObject:jg.fromObject,i,e),e.forEach((e=>console.warn(e)))}return o.forEach((e=>e?.register(!1))),o}class ip extends Vd{get wheelList(){return[...this.wheelStruct.FortuneWheelItemSets,...this.wheelStruct.FortuneWheelCommands]}constructor(e,t,n){super(e),rp.add(this),this.screen=ip.screen,this.wheelStruct=t,this.character=n,this.dataSize=Object.seal({value:0,valueRecord:{},max:Op,marigin:.9});const o=`\n            <button class="MBS_Button" id="${ap.button}{i}" style="height: min(7vh, 3.5vw);">Lorem Ipsum</button>\n        `,i=ElementCreateDiv(ap.root);i.style.display="none",i.innerHTML=`\n            <style id="${ap.styles}">.MBS_Button {\n\tbackground-color: white;\n\tbackground-origin: content-box;\n\tbackground-position: center;\n\tbackground-repeat: no-repeat;\n\tbackground-size: cover;\n\tborder: min(0.3vh, 0.15vw) solid black;\n\tcolor: black;\n\tfont-size: min(3.5vh, 1.75vw);\n\theight: 100%;\n\toverflow: clip;\n\tpadding-left: min(2vh, 1vw);\n\tpadding-right: min(2vh, 1vw);\n\ttext-align: center;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n\twidth: 100%;\n}\n\n.MBS_Button:hover {\n\tbackground-color: cyan;\n}\n\n.MBS_Button:disabled {\n\tbackground-color: lightgray;\n}\n\n#MBS_FWSelectScreen {\n\tdisplay: grid;\n\ttext-align: center;\n\tuser-select: none;\n\tgrid-row-gap: min(2vh, 1vw);\n\tgrid-template-areas:\n\t  ". buttonOuterGrid exit"\n\t  "storage buttonOuterGrid ."\n\t  "storageFooter buttonOuterGrid .";\n\tgrid-template-columns: 2fr 7fr 1fr;\n\tgrid-template-rows: 1fr 7.4fr 1.7fr;\n}\n\n#MBS_FWSelectScreen_Exit {\n\tgrid-area: exit;\n\theight: min(9vh, 4.5vw);\n\tjustify-self: end;\n\twidth: min(9vh, 4.5vw);\n}\n\n#MBS_FWSelectScreen_Storage {\n\tbackground-image: linear-gradient(180deg, #d80000, #d80000 10%, #00d800 60%, #00d800);\n\tborder: min(0.3vh, 0.15vw) solid black;\n\tdisplay: grid;\n\tgrid-area: storage;\n\theight: 100%;\n\tjustify-self: center;\n\twidth: 35%;\n}\n\n#MBS_FWSelectScreen_Storage #MBS_FWSelectScreen_StorageTooltip {\n\tbackground-color: white;\n\tborder: min(0.3vh, 0.15vw) solid black;\n\tcolor: black;\n\tfont-size: min(3.5vh, 1.75vw);\n\tleft: 15%;\n\tline-height: 1.4;\n\tmin-height: min(9vh, 4.5vw);\n\tpadding-left: min(2vh, 1vw);\n\tpadding-right: min(2vh, 1vw);\n\tposition: absolute;\n\ttext-align: left;\n\tvisibility: hidden;\n\twidth: fit-content;\n}\n\n#MBS_FWSelectScreen_Storage:hover #MBS_FWSelectScreen_StorageTooltip {\n\tvisibility: visible;\n}\n\n#MBS_FWSelectScreen_StorageInner {\n\twidth: 100%;\n}\n\n#MBS_FWSelectScreen_StorageFooter {\n\tfont-size: min(3.5vh, 1.75vw);\n\tgrid-area: storageFooter;\n\theight: min(7vh, 3.5vw);\n\tpadding-top: min(1vh, 0.5vw);\n}\n\n#MBS_FWSelectScreen_ButtonOuterGrid {\n\tdisplay: grid;\n\tfont-size: min(5vh, 2.5vw);\n\tgrid-area: buttonOuterGrid;\n\tgrid-template-rows: min(9vh, 4.5vw) auto min(9vh, 4.5vw) auto;\n\theight: 94%;\n\toverflow-y: scroll;\n\tpadding-left: min(2vh, 1vw);\n\tpadding-right: min(2vh, 1vw);\n}\n\n#MBS_FWSelectScreen_ButtonInnerGrid0, #MBS_FWSelectScreen_ButtonInnerGrid1 {\n\tdisplay: grid;\n\tgrid-template-columns: minmax(0, 4fr) minmax(0, 4fr);\n\tgrid-gap: min(2vh, 1vw);\n\tpadding-bottom: min(2vh, 1vw);\n\tpadding-top: min(2vh, 1vw);\n}\n\n#MBS_FWSelectScreen_ItemSets, #MBS_FWSelectScreen_CommandSets {\n\talign-items: center;\n\tbackground: white;\n\tdisplay: flex;\n\theight: 100%;\n\tjustify-content: center;\n\tposition: sticky;\n\ttop: 0%;\n}\n</style>\n            <div id="${ap.buttonOuterGrid}">\n                <div id=${ap.itemSets}>Lorem Ipsum</div>\n                    <div id="${ap.buttonInnerGrid}0">\n                        ${this.wheelStruct.FortuneWheelItemSets.map(((e,t)=>o.replaceAll("{i}",t.toString()))).join("\n")}\n                    </div>\n                <div id=${ap.commandSets}>Lorem Ipsum</div>\n                <div id="${ap.buttonInnerGrid}1">\n                    ${this.wheelStruct.FortuneWheelCommands.map(((e,t)=>o.replaceAll("{i}",(Mg+t).toString()))).join("\n")}\n                </div>\n            </div>\n            <button class="MBS_Button" id="${ap.exit}" title="Exit" style="background-image:url('../Icons/Exit.png');"></button>\n            <div id="${ap.storage}">\n                <div id="${ap.storage}Inner"></div>\n                <span id="${ap.storage}Tooltip">Lorem Ipsum</span>\n            </div>\n            <div id="${ap.storageFooter}">Lorem Ipsum</div>\n        `.replaceAll("\t",""),r(this,rp,"m",np).call(this,!0)}resize(){const e=document.getElementById(ap.root);if(e){const t=MainCanvas.canvas.clientWidth<=2*MainCanvas.canvas.clientHeight?MainCanvas.canvas.clientWidth/50:MainCanvas.canvas.clientHeight/25;ElementPositionFix(ap.root,t,80,60,1840,880),e.style.display="grid"}}load(){const e=Lp(this.character.OnlineSharedSettings);this.dataSize.value=Ef(Object.values(e),(e=>Number.isNaN(e)?0:e)),this.dataSize.valueRecord=e,r(this,rp,"m",np).call(this),super.load()}run(){}click(){}unload(){const e=document.getElementById(ap.root);e&&(e.style.display="none")}exit(){ElementRemove(ap.root),this.exitScreens(!1)}}rp=new WeakSet,np=function(e=!1){const t=this.character.IsPlayer();for(const[r,n]of this.wheelList.entries()){const o=document.getElementById(`${ap.button}${r}`);o.innerText=`${r%Mg}: ${n?.name??"Empty"}`,o.disabled=null===n&&!t,e&&o.addEventListener("click",(()=>{let e;e=r<Mg?new ep(this,this.wheelStruct.FortuneWheelItemSets,r,this.character):new tp(this,this.wheelStruct.FortuneWheelCommands,r-Mg,this.character),this.children.set(e.screen,e),e.load()}))}const r=document.getElementById(`${ap.storage}`),n=document.getElementById(`${ap.storage}Inner`),o=document.getElementById(`${ap.storage}Tooltip`),i=document.getElementById(ap.storageFooter);if(t){const e=Do($p(this.dataSize.value),0,9999),t=100*e/(Op/1e3);i.innerText=`${e} / ${Op/1e3} KB`,n.style.height=100-t+"%",n.style.backgroundColor="white",n.style.borderBottom="min(0.3vh, 0.15vw) solid black",t>=90&&(r.style.boxShadow="0 0 min(2vh, 1vw) red");const a=/\W/g;let s=Object.entries(this.dataSize.valueRecord).map((([e,t])=>`${e.replaceAll(a,"")} ${Number.isNaN(t)?"Unknown":`${$p(t)} KB`}`));s.length>=11&&(s=s.slice(0,10),s.push("...")),o.innerHTML=`<strong>OnlineSharedSettings Data Usage</strong><br />${s.join("<br />")}`}else i.innerText=`- / ${Op/1e3} KB`,n.style.height="100%",n.style.backgroundColor="gray",o.style.display="none";if(e){document.getElementById(ap.itemSets).innerText=t?"Fortune wheel item sets":`${this.character.Nickname??this.character.Name}'s fortune wheel item sets`;document.getElementById(ap.commandSets).innerText=t?"Fortune wheel commands":`${this.character.Nickname??this.character.Name}'s fortune wheel commands`;document.getElementById(ap.exit).addEventListener("click",(()=>this.exit()))}},ip.screen="MBS_FWSelectScreen",ip.background="Sheet";const ap=Object.freeze({root:ip.screen,styles:`${ip.screen}_Styles`,exit:`${ip.screen}_Exit`,storage:`${ip.screen}_Storage`,storageFooter:`${ip.screen}_StorageFooter`,buttonOuterGrid:`${ip.screen}_ButtonOuterGrid`,buttonInnerGrid:`${ip.screen}_ButtonInnerGrid`,button:`${ip.screen}_Button`,itemSets:`${ip.screen}_ItemSets`,commandSets:`${ip.screen}_CommandSets`}),sp=Object.freeze(["Exclusive","5 Minutes","15 Minutes","1 Hour","4 Hours","High Security"]),lp=Object.freeze([Object.freeze({type:"ExclusivePadlock",enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",time:300,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",time:900,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",time:3600,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",time:14400,enabled:!1}),Object.freeze({type:"HighSecurityPadlock",enabled:!1}),Object.freeze({type:null,enabled:!1})]);function up(e,t,r){ud(t,"seconds",60,14400),fp(e,"TimerPasswordPadlock",r)&&(null==e.Property&&(e.Property={}),e.Property.RemoveTimer=CurrentTime+1e3*t,e.Property.RemoveItem=!0,e.Property.LockSet=!0,e.Property.Password=dd(8))}function cp(e,t){fp(e,"HighSecurityPadlock",t),null==e.Property&&(e.Property={}),e.Property.MemberNumberListKeys=""}function fp(e,t,r){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);if("string"!=typeof t)throw new TypeError('Invalid "lockName" type: '+typeof t);Ig(r);const n=AssetGet(r.AssetFamily,"ItemMisc",t);if(null==n)throw new Error(`Invalid "lockName" value: ${t}`);return!(null!=InventoryGetLock(e)||!InventoryDoesItemAllowLock(e)||InventoryBlockedOrLimited(r,{Asset:n}))&&(InventoryLock(r,e,{Asset:n},null,!1),!0)}function hp(e,t){return e.forEach(((e,r)=>{e.enabled=t.includes(r)})),e}function dp(e){switch(e.type){case"ExclusivePadlock":return"Exclusive";case"HighSecurityPadlock":return"High Security";case"TimerPasswordPadlock":return`${Math.floor(e.time/60)} Minutes`;case null:return"No Lock";default:throw new Error(`Invalid flag type: ${e.type}`)}}var pp,Rp,gp,mp,yp,vp;const Sp=76;let bp,Cp,wp,Bp,kp,Pp;pd(Og).then((()=>{bp=new TextCache("Screens/MiniGame/WheelFortune/Text_WheelFortune.csv","MISSING VALUE FOR TAG: ")}));class Mp extends Vd{get presetUnsaved(){return null===this.presets[r(this,gp,"f")]}get index(){return r(this,gp,"f")}set index(e){ud(e,"index",0,this.presets.length-1);const t=this.presets[e];n(this,gp,e,"f"),this.activePreset=null!==t?{name:t.name,ids:new Set(t.ids)}:{name:`Preset ${e}`,ids:new Set(Player.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault)};const r=document.getElementById(`${Rp.name}_Name`);r&&(r.value=this.activePreset.name)}constructor(e,t){super(e),pp.add(this),this.screen=Rp.screen,this.activePreset={name:"<PLACEHOLDER>",ids:new Set},gp.set(this,0),this.presets=t,this.elements={Header:{coords:[1e3,80,0,0],run:(e,t)=>{let r="Wheel of Fortune Presets";this.presetUnsaved&&(r+=" (unsaved)"),MainCanvas.font='48px "Arial", sans-serif',DrawText(r,e,t,"Black"),MainCanvas.font='36px "Arial", sans-serif'}},HeaderName:{coords:[266,228,0,0],run:(e,t)=>DrawText("Preset Name",e,t,"Black")},HeaderBuiltinBC:{coords:[684,228,0,0],run:(e,t)=>DrawText("Builtin BC Options",e,t,"Black")},HeaderBuiltinMBS:{coords:[1026,228,0,0],run:(e,t)=>DrawText("Builtin MBS Options",e,t,"Black")},HeaderMBS:{coords:[1520,228,0,0],run:(e,t)=>DrawText("Custom MBS Options",e,t,"Black")},Exit:{coords:[1830,60,90,90],click:()=>this.exit(!1),run:(...e)=>DrawButton(...e,"","White","Icons/Exit.png","Exit")},Save:{coords:[1720,60,90,90],click:()=>this.savePreset(),run:(...e)=>DrawButton(...e,"","White","Icons/Save.png","Save the current preset")},Equip:{coords:[1610,60,90,90],click:()=>{this.presetUnsaved&&this.equipPreset()},run:(...e)=>{this.presetUnsaved?DrawButton(...e,"","Gray","Icons/Accept.png","Equip the current preset: Must first save the wheel preset",!0):DrawButton(...e,"","White","Icons/Accept.png","Equip the current preset")}},Delete:{coords:[Sp,60,90,90],click:()=>this.deletePreset(),run:(...e)=>DrawButton(...e,"","White","Icons/Trash.png","Delete the current preset")},Name:{coords:[114,300,304,64],load:()=>{const e=ElementCreateInput(`${Rp.name}_Name`,"text",this.activePreset.name,20);e.placeholder=`Preset ${this.index}`,e.addEventListener("input",CommonLimitFunction((e=>{const t=e.target?.value||null;null!==t&&t.length>0&&t.length<=20&&(this.activePreset.name=t)})))},unload:()=>ElementRemove(`${Rp.name}_Name`),run:(...e)=>ElementPositionFixed(`${Rp.name}_Name`,...e)},DropDown:{coords:[114,400,304,64],load:()=>{ElementCreateDropdown(`${Rp.name}_DropDown`,this.presets.map(((e,t)=>`Preset ${t}`)),(e=>{const t=e.target?.selectedIndex??-1;Number.isInteger(t)&&t>=0&&t<=this.presets.length&&(this.index=t)})),r(this,pp,"m",mp).call(this)},run:(...e)=>{DrawEmptyRect(...e,"Black"),ElementPositionFixed(`${Rp.name}_DropDown`,...e)},unload:()=>ElementRemove(`${Rp.name}_DropDown`)},...r(this,pp,"m",yp).call(this,{xOffset:532,yOffset:300,xDelta:Sp,yDelta:Sp}),...r(this,pp,"m",vp).call(this,{xOffset:988,yOffset:300,xDelta:Sp,yDelta:Sp},!0),...r(this,pp,"m",vp).call(this,{xOffset:1216,yOffset:300,xDelta:Sp,yDelta:Sp},!1)},this.index=0,this.queueServer=new Set}savePreset(){const e=this.presets[this.index],t={name:this.activePreset.name,ids:Fg(Array.from(this.activePreset.ids).sort().join(""))};t.name===e?.name&&t.ids===e?.ids||(this.presets[this.index]=t,this.queueServer.add(Ap.SETTINGS),r(this,pp,"m",mp).call(this))}equipPreset(){const e=Fg(Array.from(this.activePreset.ids).sort().join(""));Player.OnlineSharedSettings&&Player.OnlineSharedSettings.WheelFortune!==e&&(Player.OnlineSharedSettings.WheelFortune=e,this.queueServer.add(Ap.SHARED))}deletePreset(){if(null===this.presets[this.index])return;this.presets[this.index]=null,this.activePreset={name:`Preset ${this.index}`,ids:new Set(Player.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault)},this.queueServer.add(Ap.SETTINGS),r(this,pp,"m",mp).call(this);const e=document.getElementById(`${Rp.name}_Name`);e&&(e.value=this.activePreset.name)}load(){super.load(),Object.values(this.elements).forEach((e=>e.load?.()))}click(e){return Object.values(this.elements).some((t=>!(!t.click||!MouseIn(...t.coords))&&(t.click(e),!0)))}run(){MainCanvas.textBaseline="top",Object.values(this.elements).forEach((e=>e.run(...e.coords))),MainCanvas.textBaseline="middle"}unload(){Object.values(this.elements).forEach((e=>e.unload?.()))}exit(e=!0){this.queueServer.size&&Gp(Array.from(this.queueServer),!0),this.unload(),Object.values(this.elements).forEach((e=>e.exit?.())),this.exitScreens(e)}}function xp(e,t,r){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);if(!Cd(r))throw new TypeError('Invalid "indices" type: '+typeof r);if(null===t||"object"!=typeof t)throw new TypeError('Invalid "character" type: '+typeof t);if(!t.IsSimple()&&!t.IsPlayer())throw new Error("Expected a simple or player character");const n=t.Appearance.find((e=>"HairFront"===e.Asset.Group.Name));if(void 0===n)return;const o=Math.max(0,...r);let i;"string"==typeof e.Color?e.Color=i=cd([e.Color],o,"Default"):Array.isArray(e.Color)&&0!==e.Color.length?i=e.Color:e.Color=i=Array(o).fill("Default"),"string"==typeof n.Color?r.forEach((e=>i[e]=n.Color)):Array.isArray(n.Color)&&n.Color.length>=1&&r.forEach((e=>i[e]=n.Color[0]))}function _p(e,t){if(null===t||"object"!=typeof t)throw new TypeError('Invalid "character" type: '+typeof t);if(!t.IsSimple()&&!t.IsPlayer())throw new Error("Expected a simple or player character");if(Eg(t)){!function(e,t,r){if(!Cd(e))throw new TypeError('Invalid "groupNames" type: '+typeof e);if("string"!=typeof r)throw new TypeError('Invalid "color" type: '+typeof e);for(const n of e){const e=InventoryGet(t,n);null!=e&&(e.Color=Array(e.Asset.ColorableLayerCount).fill(r))}}(["HairAccessory1","HairAccessory2","HairAccessory3","HairBack","HairFront","BodyUpper","BodyLower","Wings","TailStraps","Nipples","Blush","Mouth"],t,"#484747")}return e}Rp=Mp,gp=new WeakMap,pp=new WeakSet,mp=function(){const e=document.getElementById(`${Rp.name}_DropDown`);if(e){for(let t=0;t<e.children[0].children.length;t++){e.children[0].children[t].innerHTML=this.presets[t]?.name??`Preset ${t}`}e.children[1].innerHTML=this.presets[this.index]?.name??`Preset ${this.index}`;for(let t=0;t<e.children[2].children.length;t++){e.children[2].children[t].innerHTML=this.presets[t]?.name??`Preset ${t}`}}},yp=function(e){const t=/^([a-zA-Z0-9_\s]+) for ([0-9]+) (minutes|hours)$/,r=WheelFortuneOption.filter((e=>void 0===e.Custom)).slice(0,64),n={};for(const e of r){const r=bp.get(`Option${e.ID}`),o=t.exec(r);if(!o){n[r]={ids:[e.ID],prefix:r,suffix:[]};continue}const[i,a]=[o[1],o[3]];let s=Number.parseInt(o[2]);"hours"===a&&(s*=60);const l=n[i];l?(l.suffix.push(`• ${s} Minutes`),l.ids.push(e.ID)):n[i]={ids:[e.ID],prefix:r,suffix:[`• ${s} Minutes`]}}return Bd(Object.values(n).map((({ids:t,prefix:r,suffix:n},o)=>[`BuiltinBCOption${o}`,{coords:[e.xOffset+Math.floor(o/8)*e.xDelta,e.yOffset+o%8*e.yDelta,64,64],run:(e,o,i,a)=>{DrawEmptyRect(e,o,i,a,"Black"),DrawRect(e+3,o+3,i-6,a-6,t.some((e=>this.activePreset.ids.has(e)))?"Green":"Red"),MouseIn(e,o,i,a)&&!CommonIsMobile&&DrawHoverElements.push((()=>{const s=[r,...n.filter(((e,r)=>this.activePreset.ids.has(t[r])))];DrawRect(e+3,o+3,i-6,a-6,"rgba(0,0,0,0.5)"),qg(e-532,o-Sp,520,Sp,s,{x0:430})}))}}])))},vp=function(e,t){return Bd((t?wp:[...Player.MBSSettings.FortuneWheelItemSets,...Player.MBSSettings.FortuneWheelCommands]).map(((r,n)=>{const o=e.xOffset+Math.floor(n/8)*e.xDelta,i=e.yOffset+n%8*e.yDelta;return[`${t?"Builtin":""}MBSOption${n}`,{coords:[o,i,64,64],run:(e,t,o,i)=>{let a;if(a=null===r?"Gray":r.children?.some((e=>this.activePreset.ids.has(e.ID)))?"Green":"Red",DrawEmptyRect(e,t,o,i,"Black"),DrawRect(e+3,t+3,o-6,i-6,a),MouseIn(e,t,o,i)&&!CommonIsMobile){let a=[];r instanceof Gg&&r.children&&(a=r.children.filter((e=>this.activePreset.ids.has(e.ID))).map((e=>`• ${dp(e.Flag)}`)));const s=[`${n<Mg?"Item Set":"Command"}: ${r?.name??`<Empty ${n%Mg}>`}`,...a];DrawRect(e+3,t+3,o-6,i-6,"rgba(0,0,0,0.5)"),qg(e-532,t-Sp,520,Sp,s)}}}]})))},Mp.background="Sheet",Mp.screen=`MBS_${Rp.name}`;class Ip extends qd{constructor(){super(null,"WheelFortune","MiniGame",{Run:WheelFortuneRun,Click:WheelFortuneClick,Exit:WheelFortuneExit,Load:()=>{CommonSetScreen("MiniGame","WheelFortune"),WheelFortuneLoad()}}),this.screen=Ip.screen,this.character=Player,this.FortuneWheelItemSets=Array(Mg).fill(null),this.FortuneWheelCommands=Array(Mg).fill(null),this.weightedIDs=this.character.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault}initialize(){if(null==WheelFortuneCharacter)throw new Error("Cannot load the fortune wheel UI while `WheelFortuneCharacter == null`");WheelFortuneOption=[...Bp],WheelFortuneDefault=kp,this.character=WheelFortuneCharacter,this.FortuneWheelItemSets=op(WheelFortuneCharacter,"FortuneWheelItemSets","item sets"),this.FortuneWheelCommands=op(WheelFortuneCharacter,"FortuneWheelCommands","commands"),this.weightedIDs=function(e){const t=Array.from(e).flatMap((e=>{const t=WheelFortuneOption.find((t=>t.ID===e));return void 0===t?[]:Array(t.Weight??1).fill(e)}));if(0===t.length)return Array.from(e.length>0?e:WheelFortuneDefault).sort(Math.random).join();const r=[];for(;r.length<50;)r.push(...Sf(t,Math.random));return r.join("")}(this.character.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault)}}Ip.screen="WheelFortune",pd(Og).then((()=>{const e={exit:[1830,60,90,90],roll:[1720,60,90,90],select:[1610,60,90,90],preset:[1500,60,90,90]};if(ld.log("Initializing wheel of fortune hooks"),!function(){const e=String.fromCharCode(256),t=WheelFortuneOption.find((t=>void 0===t.Custom&&t.ID>=e));return void 0===t||(ld.warn("Aborting wheel of fortune hook initialization: Found one or more builtin wheel of fortune option-IDs outside of the extended ASCII range",t),!1)}())return;const t={'DrawTextWrap(TextGet((WheelFortuneVelocity == 0) ? (WheelFortuneForced ? "Forced" : "Title") : "Wait"), 1375, 200, 550, 200, "White");':";"};"E9E5F3D6"===Rd.getOriginalHash("WheelFortuneRun")?(t['DrawButton(1770, 25, 90, 90, "", BackColor, "Icons/Random.png", TextGet("Random"));']=";",t["DrawButton(1885, 25, 90, 90"]=`DrawButton(${e.exit.join(", ")}`):t['DrawButton(1720, 60, 90, 90, "", BackColor, "Icons/Random.png", TextGet("Random"));']=";";const r={};"16991349"===Rd.getOriginalHash("WheelFortuneClick")&&(r["MouseIn(1885, 25, 90, 90)"]=`MouseIn(${e.exit.join(", ")})`,r["MouseIn(1770, 25, 90, 90)"]=`MouseIn(${e.roll.join(", ")})`),Rd.patchFunction("WheelFortuneRun",t),Rd.patchFunction("WheelFortuneClick",r),Rd.hookFunction("WheelFortuneLoad",11,((e,t)=>{if(Pp.initialize(),null!=TextScreenCache)for(const{Description:e,Custom:t,ID:r}of WheelFortuneOption)void 0!==e&&(TextScreenCache.cache[`Option${r}`]=t?`*${e}`:e);return t(e)})),Rd.hookFunction("WheelFortuneCustomizeLoad",0,((e,t)=>{if(null!=TextScreenCache)for(const{Description:e,Custom:t,ID:r}of WheelFortuneOption)void 0!==e&&(TextScreenCache.cache[`Option${r}`]=t?`*${e}`:e);return t(e)})),Rd.hookFunction("WheelFortuneRun",0,((t,r)=>{const n=Player.MBSSettings.RollWhenRestrained||!Player.IsRestrained();n||(WheelFortuneForced=!1),r(t);const o=0===WheelFortuneVelocity,i=o?"White":"Silver",a=WheelFortuneCharacter?.Nickname??WheelFortuneCharacter?.Name,s=WheelFortuneCharacter?.IsPlayer()?"MBS: Configure custom options":`MBS: View ${a}'s option config`;DrawButton(...e.select,"",i,"Icons/Crafting.png",s,!o);const l=!(0!==WheelFortuneVelocity||!WheelFortuneCharacter?.IsPlayer()),u=l?"White":"Silver",c=WheelFortuneCharacter?.Nickname??WheelFortuneCharacter?.Name,f=WheelFortuneCharacter?.IsPlayer()?"MBS: Configure option presets":`MBS: View ${c}'s option presets`;DrawButton(...e.preset,"",u,"Icons/Crafting.png",f,!l);const h=0==WheelFortuneVelocity&&n?"White":"Silver";DrawButton(...e.roll,"",h,"Icons/Random.png",n?TextGet("Random"):"MBS: Cannot spin while restrained",!n);let d="";d=0!==WheelFortuneVelocity?TextGet("Wait"):n?WheelFortuneForced?TextGet("Forced"):TextGet("Title"):"MBS: Cannot spin the wheel of fortune while restrained",DrawTextWrap(d,1375,200,550,200,"White")})),Rd.hookFunction("WheelFortuneClick",0,((t,r)=>{if(Player.MBSSettings.RollWhenRestrained||!Player.IsRestrained()||(WheelFortuneForced=!1,!MouseIn(...e.roll))){if(0===WheelFortuneVelocity&&MouseIn(...e.select)){const e={FortuneWheelItemSets:Pp.FortuneWheelItemSets,FortuneWheelCommands:Pp.FortuneWheelCommands},t=new ip(Pp,e,Pp.character);Pp.children.set(t.screen,t),t.load()}else if(0===WheelFortuneVelocity&&MouseIn(...e.preset)&&WheelFortuneCharacter?.IsPlayer()){const e=new Mp(Pp,WheelFortuneCharacter.MBSSettings.FortuneWheelPresets);Pp.children.set(e.screen,e),e.load()}return r(t)}})),Rd.hookFunction("WheelFortuneMouseUp",11,((e,t)=>{!Player.MBSSettings.RollWhenRestrained&&Player.IsRestrained()||t(e)})),Rd.hookFunction("WheelFortuneMouseDown",11,((e,t)=>{!Player.MBSSettings.RollWhenRestrained&&Player.IsRestrained()||t(e)})),Rd.hookFunction("WheelFortuneDraw",11,((e,t)=>(e[0]=Pp.weightedIDs,t(e)))),Pp=new Ip,pd($g).then((()=>{ld.log("Initializing wheel of fortune module"),Cp=function(){const e=Bd(wd({leash_candy:[{Name:"ReverseBunnySuit",Group:"Suit",ItemCallback:(e,t)=>xp(e,t,[0,1])},{Name:"Catsuit",Group:"SuitLower",ItemCallback:(e,t)=>xp(e,t,[0,1])},{Name:"FaceVeil",Group:"Mask",Color:["#000","Default"],ItemCallback:(e,t)=>xp(e,t,[1])},{Name:"FuturisticMittens",Group:"ItemHands",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Mittens"},ItemCallback:(e,t)=>xp(e,t,[0,1])},{Name:"InteractiveVRHeadset",Group:"ItemHead",TypeRecord:{b:3,f:3,g:1},Craft:{Property:"Secure",Name:"Permanent PSO Headset"},ItemCallback:(e,t)=>xp(e,t,[0])},{Name:"LargeDildo",Group:"ItemMouth",Craft:{Property:"Secure",Name:"Permanent PSO Dildo",Description:"Specially made to fill a PSOs mouth and throat"}},{Name:"LatexBallMuzzleGag",Group:"ItemMouth2",Craft:{Property:"Secure",Name:"Permanent PSO Muzzle",Description:"Forcing the dildo in and keeping it secure"}},{Name:"FuturisticMuzzle",Group:"ItemMouth3",TypeRecord:{n:1,h:0,s:3},Craft:{Property:"Secure",Name:"Permanent PSO Muzzle",Description:"Keeping your cries muffled"},ItemCallback:(e,t)=>xp(e,t,[3])},{Name:"FuturisticVibrator",Group:"ItemVulva",TypeRecord:{vibrating:9},Craft:{Property:"Secure",Name:"Permanent PSO Vibe",Description:"Specially made to fill a PSO"}},{Name:"SciFiPleasurePanties",Group:"ItemPelvis",TypeRecord:{c:3,i:4,o:1,s:2},Craft:{Property:"Secure",Name:"Permanent PSO Panties",Description:"No escape and no Orgasms"},ItemCallback:(e,t)=>xp(e,t,[0,2,4,5])},{Name:"BonedNeckCorset",Group:"ItemNeck",Color:["#222222","#888888","#AA2121","#AA2121","#888888"],TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Permanent PSO Collar"},ItemCallback:(e,t)=>xp(e,t,[2,3])},{Name:"CollarChainShort",Group:"ItemNeckRestraints",Craft:{Property:"Secure",Name:"Permanent PSO Chain",Description:"To keep a PSO on their knees"},Property:{OverridePriority:7},ItemCallback:(e,t)=>xp(e,t,[0])},{Name:"StrictLeatherPetCrawler",Group:"ItemArms",Craft:{Property:"Secure",Name:"Permanent PSO Suit",Description:"Extra tight and unremovable"}},{Name:"HeavyLatexCorset",Group:"ItemTorso",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Corset",Description:"Extra tight and specially molded"}},{Name:"FuturisticHarness",Group:"ItemTorso2",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Harness",Description:"Special harness that constantly shrinks...."},Property:{OverridePriority:23},ItemCallback:(e,t)=>xp(e,t,[0,1,2])},{Name:"FuturisticEarphones",Group:"ItemEars",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Earphones"},Color:["#0F0F0F","Default","Default"],ItemCallback:(e,t)=>xp(e,t,[1])},{Name:"CeilingChain",Group:"ItemAddon",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Chain",Description:"Never to escape"},ItemCallback:(e,t)=>xp(e,t,[0])},{Name:"RoundPiercing",Group:"ItemNipplesPiercings",TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Permanent PSO Piercings"},Color:["#000000","Default","Default"],ItemCallback:(e,t)=>xp(e,t,[1,2])},{Name:"CollarAutoShockUnit",Group:"ItemNeckAccessories",TypeRecord:{s:2,y:0},Craft:{Property:"Secure",Name:"Permanent PSO Shock Unit"}},{Name:"FrogtieStraps",Group:"ItemLegs",Craft:{Property:"Secure",Name:"Permanent PSO Straps",Description:"To keep a PSO on their knees"},ItemCallback:(e,t)=>xp(e,t,[2])},{Name:"DroneMask",Group:"ItemHood",TypeRecord:{m:0,e:0,p:1,g:0,s:1,h:2,j:0},Craft:{Property:"Thin",Name:"Permanent PSO Mask"},ItemCallback:(e,t)=>xp(e,t,[2])}],mummy:[{Name:"DuctTape",Group:"ItemFeet",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{xp(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));0!==n.length&&xd(e,t,hd(n))}},{Name:"DuctTape",Group:"ItemLegs",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{xp(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));0!==n.length&&xd(e,t,hd(n))}},{Name:"DuctTape",Group:"ItemHands",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>xp(e,t,[0])},{Name:"DuctTape",Group:"ItemArms",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{xp(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));0!==n.length&&xd(e,t,hd(n))}},{Name:"LargeDildo",Group:"ItemMouth",Craft:{Property:"Large",Name:"Rubber Mouth Sealant",Description:"A rubber mass molded to shape of your mouth"}},{Name:"DuctTape",Group:"ItemMouth2",TypeRecord:{typed:0},Craft:{Property:"Large",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{xp(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));n.length<2||xd(e,t,hd(n.slice(1)))}},{Name:"DuctTape",Group:"ItemMouth3",TypeRecord:{typed:0},Craft:{Property:"Large",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},Equip:()=>Math.random()>.5,ItemCallback:(e,t)=>{xp(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));0!==n.length&&xd(e,t,hd(n))}}],maid:[{Name:"LaceBands",Group:"Bracelet",Color:["#aaaaaa","#151515"]},{Name:"MaidOutfit2",Group:"Cloth",Color:["#0C0C0C","#919194","#9C9C9F"]},{Name:"CatsuitCollar",Group:"ClothAccessory",Color:["#0E0E0E"]},{Name:"MaidHairband1",Group:"Hat",Color:["#979797"]},{Name:"Socks6",Group:"Socks",Color:["#0D0D0D","#919194"]},{Name:"HeartTop",Group:"Bra",Color:["#0E0E0E"]},{Name:"FuturisticHeels2",Group:"Shoes",Color:["#101010","Default","#F1FAFF","#898989","#898989"],TypeRecord:{typed:1}},{Name:"MaidCollar",Group:"ItemNeck",Color:["#DCDCDC","#1B1B1B","Default"],Craft:{Property:"Secure",Name:"Maid Collar",Description:"A tight fitting yet comfortable collar"}},{Name:"FuturisticMittens",Group:"ItemHands",Color:["#FFFFFF","#FFFFFF","#2E2E2E","#050505"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Maid Mittens",Description:"For keeping a maid out of trouble"}},{Name:"FuturisticHeels2",Group:"ItemBoots",Color:["#101010","#101010","Default","#F1FAFF","#898989","#898989","#898989"],TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Maid Heels",Description:"For keeping a maid on their toes"}},{Name:"WiredEgg",Group:"ItemVulva",Color:["Default","#141414"],TypeRecord:{vibrating:1},Craft:{Property:"Arousing",Name:"Maid Teaser",Description:"A little reminder to keep a maid on edge"},Property:{OverridePriority:21}},{Name:"StraitLeotard",Group:"ItemArms",Color:["#FFFFFF","#1A1A1A","#FFFFFF"],TypeRecord:{cl:1,co:1,np:0,vp:0},Craft:{Property:"Secure",Name:"Maid Jacket",Description:"For keeping a maid out of trouble"}},{Name:"LeatherAnkleCuffs",Group:"ItemFeet",Color:["#969696","#191919","#969696"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Maid Cuffs",Description:"For keeping a maid out of trouble"}},{Name:"BallGag",Group:"ItemMouth",TypeRecord:{typed:2},Craft:{Property:"Large",Name:"Maid Silencer",Description:"Silence is golden"}}],statue:[{Name:"ReverseBunnySuit",Group:"SuitLower",Color:["#1B1B1B"],Equip:e=>Eg(e)},{Name:"SeamlessCatsuit",Group:"SuitLower",Color:["#484747"],Equip:e=>!Eg(e)},{Name:"SeamlessCatsuit",Group:"Suit",Color:["#484747"],Equip:e=>!Eg(e)},{Name:"ReverseBunnySuit",Group:"Cloth",Color:["#1B1B1B","#1B1B1B"]},{Name:"BondageSkirt",Group:"ClothLower",Color:["#484747","#333333","#333333"]},{Name:"CatsuitCollar",Group:"ClothAccessory",Color:["#484747"]},{Name:"HighCollar",Group:"ItemNeck",Color:["#363636","#717171"],Craft:{Property:"Secure",Name:"Statue Neck"}},{Name:"LargeDildo",Group:"ItemMouth",Color:["#333333"],Craft:{Property:"Large",Name:"Mouth Sealant"},Property:{OverridePriority:27}},{Name:"LatexPostureCollar",Group:"ItemMouth2",Color:["Default"],Craft:{Property:"Large",Name:"Mouth Sealant"},Property:{OverridePriority:28}},{Name:"LatexBallMuzzleGag",Group:"ItemMouth3",Color:["#A1A1A1"],Craft:{Property:"Large",Name:"Mouth Sealant"}},{Name:"KirugumiMask",Group:"ItemHood",Color:["#484747","#484747","#484747","#484747"],TypeRecord:{e:0,m:3,b:0,br:0,op:0,ms:0},Craft:{Property:"Secure",Name:"Statue's Visage"}},{Name:"MonoHeel",Group:"ItemBoots",Color:["#737070","#737070","#101010"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Statue Base"}},{Name:"FuturisticMittens",Group:"ItemHands",Color:["#767676","#5F5F5F","#3C3C3C","#4F4F4F"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Statue Hands"}},{Name:"SmoothLeatherArmbinder1",Group:"ItemArms",Color:["#191919","#3D3D3D","#191919","#191919","#191919"],Craft:{Property:"Secure",Name:"Statue Arms"}}]}).map((([e,t])=>{const r=Object.freeze(t.map((t=>{let r;if(null!==t.Craft&&"object"==typeof t.Craft){const n=AssetGet(Player.AssetFamily,t.Group,t.Name);if(null==n)throw new Error(`Invalid ${e} item: ${t.Group}${t.Name}`);r={...t.Craft,Item:t.Name,Private:!0,Lock:"",TypeRecord:void 0,Name:t.Craft.Name||n.Description,MemberNumber:void 0,MemberName:""},CraftingValidate(r,n,!1)}return Object.freeze({...t,Custom:!1,Property:Object.freeze(t.Property??{}),TypeRecord:t.TypeRecord,Craft:Object.freeze(r),Color:t.Color,ItemCallback:t.ItemCallback,Equip:t.Equip})})));return[e,r]})));return Object.freeze(e)}(),wp=Object.freeze([new Gg("PSO Bondage",Cp.leash_candy,Player.MBSSettings.FortuneWheelItemSets,Id.UNDERWEAR,Id.UNDERWEAR,hp(lp.map(aa),[0,1,2,3,4,5]),!1),new Gg("Mummification",Cp.mummy,Player.MBSSettings.FortuneWheelItemSets,Id.CLOTHES,Id.UNDERWEAR,hp(lp.map(aa),[3]),!1),new Gg("Bondage Maid",Cp.maid,Player.MBSSettings.FortuneWheelItemSets,Id.UNDERWEAR,Id.UNDERWEAR,hp(lp.map(aa),[0,1,2,3]),!1),new Gg("Petrification",Cp.statue,Player.MBSSettings.FortuneWheelItemSets,Id.UNDERWEAR,Id.UNDERWEAR,hp(lp.map(aa),[0,1,2,3]),!1,_p)]),wp.forEach((e=>e.register(!1))),Bp=Object.freeze(WheelFortuneOption.filter((e=>!e.Custom))),kp=WheelFortuneDefault,Gp([Ap.SHARED])}))}));const Ep=80,Fp=160;pd(Og).then((()=>{ld.log("Initializing crafting hooks"),Rd.patchFunction("CraftingClick",{"if (CraftingOffset < 0) CraftingOffset = 80 - 20;":"if (CraftingOffset < 0) CraftingOffset = 160 - 20;","if (CraftingOffset >= 80) CraftingOffset = 0;":"if (CraftingOffset >= 160) CraftingOffset = 0;"}),Rd.patchFunction("CraftingRun",{"/ ${80 / 20}.":"/ 8."}),pd($g).then((()=>{ld.log("Initializing crafting cache"),Rd.hookFunction("CraftingSaveServer",0,((e,t)=>{const r=Player.Crafting;Player.Crafting=r?.slice(0,Ep),t(e),Player.Crafting=r;const n=null==(o=Player.Crafting?Player.Crafting.slice(Ep):null)?"":o.map((e=>e?.Item?CraftingSerialize(e):"")).join(CraftingSerializeItemSep);var o;n!=Player.MBSSettings.CraftingCache&&(Player.MBSSettings.CraftingCache=n,Gp([Ap.SETTINGS]))})),function(e,t){if(e.Crafting??=[],cd(e.Crafting,Ep,null),!t)return;const r=LZString.compressToUTF16(t),n=CraftingDecompressServerData(r),o=new Set(e.Crafting.map((e=>JSON.stringify(e))));let i=!1;for(const[e,t]of CommonEnumerate(n))if(null!=t)e:switch(CraftingValidate(t)){case CraftingStatusType.OK:{const r=JSON.stringify(t);o.has(r)&&(ld.warn(`Filtering duplicate crafting item ${Ep+e}: "${t.Name} (${t.Item})"`),n[e]=null);break e}case CraftingStatusType.ERROR:{const r=JSON.stringify(t);o.has(r)?(ld.warn(`Filtering duplicate crafting item ${Ep+e}:"${t.Name} (${t.Item})"`),n[e]=null):i=!0;break e}case CraftingStatusType.CRITICAL_ERROR:ld.error(`Removing corrupt crafting item ${Ep+e}: "${t?.Name} (${t?.Item})"`),n[e]=null}for(const t of n)if(e.Crafting.length>=Fp){if(null==t)continue;if(e.Crafting.includes(null,Ep))ld.warn("Found more than 160 crafting items, trimming down [80, 160)-interval null entries"),e.Crafting=e.Crafting.filter(((e,t)=>t<Ep||null!=e));else{if(!e.Crafting.includes(null)){const t=e.Crafting.length-Fp;ld.error(`Found more than 160 crafting items, the last ${t} will be deleted`);break}ld.warn("Found more than 160 crafting items, trimming down [0, 80)-interval null entries"),e.Crafting=e.Crafting.filter((e=>null!=e))}}else e.Crafting.push(t);i&&e.IsPlayer()&&CraftingSaveServer()}(Player,Player.MBSSettings.CraftingCache)}))}));const Op=18e4;function Lp(e){const t=[],r=CommonIsObject(e)?e:{};for(const[e,n]of Object.entries(r))try{const r=JSON.stringify(n??"");t.push([e,(new TextEncoder).encode(r).byteLength])}catch{t.push([e,NaN])}return Object.fromEntries(t.sort((([e,t],[r,n])=>{t=Math.round(t/100),n=Math.round(n/100);const o=Number.isNaN(t),i=Number.isNaN(n);return t===n||o&&i?e.localeCompare(r):o||i?i?-1:1:n-t})))}function $p(e){return Math.round(e/100)/10}const Ap=Object.freeze({SETTINGS:0,SHARED:1});function Hp(){const e=function(){const e=bd.fromVersion(t),r=`#v${e.major}${e.minor}${e.micro}`;return e.beta?["blob/devel",""]:["blob/main",r]}();return`https://github.com/bananarama92/MBS/${e[0]}/CHANGELOG.md${e[1]}`}function Tp(e,t,r){Array.isArray(t)?t.length>Mg&&(fd(t,Mg),r.push([`Trimming too long wheel of fortune item list: ${t.length}/${Mg}`])):(t=[],r.push(["Re-initializing invalid wheel of fortune item list: "+typeof t]));const n=Object.seal(Array(Mg).fill(null));return t.forEach(((t,o)=>{if(null!==t)try{(n[o]=e(n,t)).register(!1)}catch(e){r.push([`Failed to load corrupted custom wheel of fortune item ${o}`,e])}})),n}function Np(e,t){Array.isArray(e)?e.length>xg&&(fd(e,xg),t.push([`Trimming too long wheel of fortune preset list: ${e.length}/${xg}`])):(e=[],t.push(["Re-initializing invalid wheel of fortune preset list: "+typeof e]));const r=Object.seal(Array(xg).fill(null));return e.forEach(((e,n)=>{if(null===e)return;if(Array.isArray(e)||"object"!=typeof e||"string"!=typeof e.ids)return void t.push([`Failed to load corrupted custom wheel of fortune preset ${n}`]);const{name:o,ids:i}=e;r[n]={name:"string"==typeof o&&o.length>0&&o.length<=20?o:`Preset ${n}`,ids:i}})),r}function Dp(e,t,r=!0){let n=null;try{if(e&&"string"==typeof e){let t=LZString.decompressFromUTF16(e);t||(t=LZString.decompressFromBase64(e)),n=JSON.parse(t||"null")}}catch(e){r&&ld.warn(`failed to load corrupted MBS ${t}`,e)}return null!==n&&"object"==typeof n?n:{}}function Wp(e=null,r=!0){if(void 0===Player.OnlineSharedSettings)throw new Error('"Player.OnlineSharedSettings" still uninitialized');e??={...Dp(Player.OnlineSettings?.MBS,"OnlineSettings"),...Dp(Player.ExtensionSettings.MBS,"ExtensionSettings"),...Dp(Player.OnlineSharedSettings.MBS,"OnlineSharedSettings")},void 0!==e.Version&&function(e){if(void 0===e)return ld.log("Detecting first-time MBS initialization"),!1;const r=bd.fromVersion(t);let n;try{n=bd.fromVersion(e)}catch(t){return ld.warn(`Failed to parse previous MBS version: ${e}`),!1}return r.greater(n)?(ld.log(`Upgrading MBS from ${e} to ${t}`),!0):!!r.lesser(n)&&(ld.warn(`Downgrading MBS from ${e} to ${t}`),!1)}(Player.OnlineSharedSettings.MBSVersion??Player.OnlineSettings?.MBSVersion)&&function(){const e=`New MBS version detected: ${t}\n\nSee below for the updated changelog:\n${Hp()}`;"number"==typeof Player.MemberNumber&&ServerAccountBeep({MemberNumber:Player.MemberNumber,MemberName:"MBS",ChatRoomName:"MBS Changelog",Private:!0,Message:e,ChatRoomSpace:"",BeepType:""})}();let n=!1;void 0!==Player.OnlineSettings?.MBSVersion&&(delete Player.OnlineSettings.MBSVersion,n=!0),Player.OnlineSettings?.MBS&&(delete Player.OnlineSettings.MBS,n=!0),n&&ServerAccountUpdate.QueueData({OnlineSettings:Player.OnlineSettings});const o=function(e){const r={Version:[],CraftingCache:[],FortuneWheelItemSets:[],FortuneWheelCommands:[],FortuneWheelPresets:[],LockedWhenRestrained:[],RollWhenRestrained:[]},n={CraftingCache:"",LockedWhenRestrained:!1,RollWhenRestrained:!0};for(const[t,o]of wd(n))void 0!==e[t]&&(typeof e[t]!=typeof o?r[t]=[[`Invalid type, expected a ${typeof o}: ${typeof r[t]}`]]:n[t]=e[t]);return{settings:{Version:t,CraftingCache:n.CraftingCache,FortuneWheelItemSets:Tp(Gg.fromObject,e.FortuneWheelSets??e.FortuneWheelItemSets??[],r.FortuneWheelItemSets),FortuneWheelCommands:Tp(jg.fromObject,e.FortuneWheelCommands??[],r.FortuneWheelCommands),FortuneWheelPresets:Np(e.FortuneWheelPresets??[],r.FortuneWheelPresets),LockedWhenRestrained:n.LockedWhenRestrained,RollWhenRestrained:n.RollWhenRestrained},ok:0===Ef(Object.values(r).map((e=>e.length))),err:Bd(wd(r).filter((([e,t])=>t.length>0)))}}(e);return(o.ok||r)&&(Player.MBSSettings=o.settings),o.ok||(ld.warn("Encountered and fixed one or more errors while parsing MBS settings",o.err),r&&function(e){const t=Bd(wd(e).map((([e,t])=>[e,t.map((e=>e.join(", ")))]))),r=`Encountered one or more errors while parsing MBS settings:\n\n${JSON.stringify(t,void 0,4)}`;"number"==typeof Player.MemberNumber&&ServerAccountBeep({MemberNumber:Player.MemberNumber,MemberName:"MBS",ChatRoomName:"MBS Settings Error",Private:!0,Message:r,ChatRoomSpace:"",BeepType:""})}(o.err)),Player.OnlineSharedSettings.WheelFortune??=WheelFortuneDefault,o}function Gp(e,r=!0){if(void 0===Player.OnlineSharedSettings)throw new Error("Player.OnlineSharedSettings is still uninitialized");const n={};if(e.includes(Ap.SETTINGS)){const e=Xu(Player.MBSSettings,"FortuneWheelItemSets","FortuneWheelCommands");Player.ExtensionSettings.MBS=LZString.compressToUTF16(JSON.stringify(e)),r&&(n["ExtensionSettings.MBS"]=Player.ExtensionSettings.MBS)}if(e.includes(Ap.SHARED)){const e=Object.freeze({FortuneWheelItemSets:Player.MBSSettings.FortuneWheelItemSets,FortuneWheelCommands:Player.MBSSettings.FortuneWheelCommands});Player.OnlineSharedSettings.MBS=LZString.compressToUTF16(JSON.stringify(e)),Player.OnlineSharedSettings.MBSVersion=t,r&&(Player.OnlineSharedSettings.WheelFortune=Fg(Player.OnlineSharedSettings.WheelFortune),n.OnlineSharedSettings=Player.OnlineSharedSettings)}r&&ServerAccountUpdate.QueueData(n)}function jp(){const e=["ExtensionSettings","OnlineSharedSettings"];for(const t of e){const e=Lp(Player[t]),r=Object.fromEntries(Object.entries(e).map((([e,t])=>[e,$p(t)]))),n=$p(Ef(Object.values(e),(e=>Number.isNaN(e)?0:e)));n>=.9*Op/1e3?ld.warn(`Total ${t} data usage at ${n} / ${Op/1e3} KB`,r):ld.log(`Total ${t} data usage at ${n} / ${Op/1e3} KB`,r)}}const zp=Object.freeze({OK:0,ERROR:1,EMPTY_SETTINGS:2,WARN:3});pd(Lg).then((()=>{Wp(),Gp([Ap.SETTINGS,Ap.SHARED],!1),ld.log("Initializing settings module"),jp()}));var Vp={Blush:"R98"},qp={Large:"R98",Normal:"R98",Small:"R98",XLarge:"R98"},Up={WombTattoos:"R101"},Kp={FlatMedium:"R98",FlatSmall:"R98",Large:"R98",Normal:"R98",Small:"R98",XLarge:"R98"},Jp={Bandeau1:"R98",Bikini1:"R98",BondageBra1:"R98",Bra1:"R98",Bra10:"R98",Bra2:"R98",Bra7:"R98",Bra8:"R98",Bra9:"R98",BunnySuit:"R98",Bustier1:"R98",Camisole:"R98",ChineseBra1:"R98",ClamShell:"R98",CoconutBra:"R98",CorsetBikini1:"R98",CowPrintedBra:"R98",CuteBikini1:"R98",DominatrixLeotard:"R98",FishnetBikini1:"R98",FlowerBra:"R98",FrameBra1:"R98",FrameBra2:"R98",FullLatexBra:"R98",FullLatexBra2:"R98",HaremBra:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeartTop:"R98",KittyBra1:"R98",LatexBra1:"R98",LatexBunnySuit:"R98",LeatherBreastBinder:"R98",LeatherStrapBra1:"R98",MaidBra1:"R98",OuvertPerl1:"R98",Ribbons:"R98",Sarashi1:"R98",SexyBeachBra1:"R98",SexyBikini1:"R98",SexyBikini2:"R98",SexyBikini3:"R98",SexyBikiniBra1:"R98",SleevelessSlimLatexLeotard:"R98",StarHarnessBra:"R98",StrapBra:"R98",StuddedHarness:"R98",Swimsuit1:"R98",Swimsuit2:"R98",Swimsuit3:"R98"},Zp={Band1:"R98",BowBand:"R98",KinkBracelet:"R98",LaceBands:"R98",LesBand:"R98",SpikeBands:"R98",Wristband:"R98"},Yp={AdmiralTop:"R98",AdultBabyDress1:"R98",AdultBabyDress2:"R98",AdultBabyDress3:"R98",AdultBabyDress4:"R98",BabydollDress1:"R98",Blouse1:"R98",Bodice1:"R98",BodyTowel1:"R98",BondageBustier1:"R98",BondageBustier2:"R98",BondageDress1:"R98",BondageDress2:"R98",BridesmaidDress1:"R98",BusinessSuit:"R101",ButtonShirt:"R98",CheerleaderTop:"R98",ChineseDress1:"R98",ChineseDress2:"R98",CollegeOutfit1:"R98",ComfyTop:"R98",CorsetDress:"R101",CorsetShirt:"R98",CropTop:"R98",Dress2:"R98",Dress3:"R98",DressFur:"R98",EveningGown:"R102",FishnetTop:"R98",FlowerDress:"R98",FrilledShirt:"R98",FurCoat:"R98",FuzzyDress:"R98",Gown1:"R98",Gown2Top:"R98",Gown3:"R98",GrandMage:"R98",HeavyLeatherDress:"R102",Hoodie:"R98",Jacket:"R98",LaceBabydoll:"R98",LatexLacedSuit:"R98",LatexTankTop:"R98",LatexTop:"R98",Laurel:"R98",LeatherBolero:"R98",LeatherCorsetTop1:"R98",LeatherCropTop:"R98",MaidApron1:"R98",MaidApron2:"R98",MaidLatex:"R101",MaidOutfit1:"R98",MaidOutfit2:"R98",MaleTankTop1:"R98",MistressTop:"R98",NurseUniform:"R98",RetroGirdle:"R98",ReverseBunnySuit:"R98",Robe1:"R98",SeethroughTop:"R98",ShoulderlessTop:"R98",SlaveRags:"R98",SleevelessTop:"R98",SteampunkCorsetTop1:"R98",StudentOutfit1:"R98",StudentOutfit2:"R98",StudentOutfit3:"R98",SummerDress:"R98",SuspenderTop1:"R98",Sweater1:"R98",TShirt1:"R98",TShirt2:"R98",TeacherOutfit1:"R98",TennisShirt1:"R98",VirginKiller1:"R98",WeddingDress1:"R98",WeddingDress2:"R98",Yukata1:"R98"},Xp={Bib:"R98",Bouquet:"R98",BugLegs:"R98",BunnyCollarCuffs:"R98",Camera1:"R98",Cape:"R98",CatsuitCollar:"R98",FacePaint:"R98",FrillyApron:"R98",FurBolero:"R98",Glitter:"R98",JewelrySet:"R98",Kissmark:"R98",KissmarkDummy:"R98",LargeBelt:"R98",LatexApron:"R101",LeatherStraps:"R98",Poncho:"R98",Scarf:"R98",StudentOutfit3Bow1:"R98",StudentOutfit3Bow2:"R98",StudentOutfit3Bow3:"R98",StudentOutfit3Scarf:"R98",WombTattoos:"R101",ZipperBelt:"R99"},Qp={AdmiralSkirt:"R98",AsymmetricSkirt:"R98",BondageSkirt:"R98",BusinessSkirt:"R98",BusinessTrousers:"R101",CheerleaderSkirt:"R98",ChineseSkirt1:"R98",ClothSkirt1:"R98",CollegeSkirt:"R98",CrossSkirt:"R98",CrossSkirtLight:"R98",ElegantSkirt:"R98",Gown2Skirt:"R98",HaremPants:"R98",HaremPants2:"R98",HulaSkirt:"R98",JeanSkirt:"R98",Jeans1:"R98",Jeans2:"R98",JeansShorts:"R98",LatexPants1:"R98",LatexSkirt1:"R98",LatexSkirt2:"R98",Leggings1:"R98",Leggings2:"R98",LongLeatherSkirt:"R98",LongPleatedSkirt:"R98",LongSkirt1:"R98",MageSkirt:"R98",MistressBottom:"R98",Pajama1:"R98",PantBoots:"R98",PencilSkirt:"R98",PleatedSkirt:"R98",RuffledSkirt:"R98",ShortPencilSkirt:"R98",ShortPlaidSkirt:"R98",Shorts1:"R98",Skirt1:"R98",Skirt2:"R98",Skirt3:"R98",TennisSkirt1:"R98",TulleSkirt:"R98",Tutu:"R98",Waspie1:"R98",Waspie2:"R98",Waspie3:"R98"},eR={ClassicLatexCorset:"R98",Corset1:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",Corset6:"R98",CorsetDress:"R101",LatexCorset1:"R98",LeatherCorsetTop1:"R98",SteampunkCorsetTop1:"R98",Underbust:"R98"},tR={Emoticon:"R98"},rR={Eyebrows1:"R98",Eyebrows2:"R98",Eyebrows7:"R98",Eyebrows8:"R98"},nR={Eyes1:"R98",Eyes10:"R98",Eyes11:"R98",Eyes12:"R98",Eyes13:"R98",Eyes14:"R99",Eyes2:"R98",Eyes3:"R98",Eyes4:"R98",Eyes5:"R98",Eyes6:"R98",Eyes7:"R98",Eyes8:"R98",Eyes9:"R98"},oR={Eyes1:"R98",Eyes10:"R98",Eyes11:"R98",Eyes12:"R98",Eyes13:"R98",Eyes14:"R99",Eyes2:"R98",Eyes3:"R98",Eyes4:"R98",Eyes5:"R98",Eyes6:"R98",Eyes7:"R98",Eyes8:"R98",Eyes9:"R98"},iR={CatEye:"R98",CatEye2:"R98",LargeBlurred:"R98",LargeSolid:"R98",SmallBlurred:"R98",SmallSolid:"R98",SuperstarBlurred:"R98",SuperstarSolid:"R98",Tanuki:"R98",UndershadowedBlurred:"R98",UndershadowedSolid:"R98",Wings:"R98"},aR={BigBeard:"R98",ChinstrapBeard:"R98",Goatee:"R98",MediumBeard:"R98",Moustache:"R98",MoustacheBeard:"R98"},sR={Fluids:"R98"},lR={DropBag:"R98",GarterBelt:"R98",GarterBelt2:"R98",GarterBelt3:"R98",Tentacles:"R98"},uR={CatGlasses:"R98",EyePatch1:"R98",Glasses1:"R98",Glasses2:"R98",Glasses3:"R98",Glasses4:"R98",Glasses5:"R98",Glasses6:"R98",Goggles:"R98",GradientSunglasses:"R98",JokeGlasses:"R98",StreetEyewear:"R100",SunGlasses1:"R98",SunGlasses2:"R98",SunGlassesClear:"R98",VGlasses:"R98"},cR={BikerGloves:"R98",Catsuit:"R98",CheerleaderPomPoms:"R98",CowPrintedGloves:"R98",FingerlessGloves:"R98",FishnetGloves:"R98",Gloves1:"R98",Gloves2:"R98",Gloves3:"R98",GlovesFur:"R98",HaremGlove:"R98",LatexElbowGloves:"R98",LatexShortGloves:"R98",MistressGloves:"R98",SeethroughSuit:"R98"},fR={Antennae:"R98",BatWings:"R98",BigLynxEars:"R98",BunnyEars1:"R98",BunnyEars2:"R98",CowHorns:"R98",DildocornHorn:"R98",Ears1:"R98",Ears2:"R98",ElfEars:"R98",FoxEars1:"R98",FoxEars2:"R98",FoxEars3:"R98",GiantBow1:"R98",HairFeathers1:"R98",HairFlower1:"R98",Halo:"R98",Headset1:"R101",Horns:"R98",Horns2:"R98",Horns3:"R98",KittenEars1:"R98",KittenEars2:"R98",MouseEars1:"R98",MouseEars2:"R98",PonyEars1:"R98",PuppyEars1:"R98",PuppyEars2:"R98",RaccoonEars1:"R98",Ribbons1:"R98",Ribbons2:"R98",Ribbons3:"R98",Ribbons4:"R98",SuccubusHorns:"R98",UnicornHorn:"R98",WeddingVeil1:"R98",WolfEars1:"R98",WolfEars2:"R98"},hR={Antennae:"R98",BatWings:"R98",BunnyEars1:"R98",BunnyEars2:"R98",CowHorns:"R98",DildocornHorn:"R98",Ears1:"R98",Ears2:"R98",ElfEars:"R98",FoxEars1:"R98",FoxEars2:"R98",FoxEars3:"R98",Horns:"R98",Horns2:"R98",Horns3:"R98",KittenEars1:"R98",KittenEars2:"R98",MouseEars1:"R98",MouseEars2:"R98",PonyEars1:"R98",PuppyEars1:"R98",PuppyEars2:"R98",RaccoonEars1:"R98",SuccubusHorns:"R98",UnicornHorn:"R98",WolfEars1:"R98",WolfEars2:"R98"},dR={GiantBow1:"R98",HairFeathers1:"R98",HairFlower1:"R98",Halo:"R98",Headset1:"R101",Ribbons1:"R98",Ribbons2:"R98",Ribbons3:"R98",Ribbons4:"R98",WeddingVeil1:"R98"},pR={HairBack1:"R98",HairBack10:"R98",HairBack10b:"R98",HairBack11:"R98",HairBack12:"R98",HairBack12b:"R98",HairBack13:"R98",HairBack13b:"R98",HairBack14:"R98",HairBack15:"R98",HairBack15b:"R98",HairBack16:"R98",HairBack17:"R98",HairBack18:"R98",HairBack18b:"R98",HairBack19:"R98",HairBack19b:"R98",HairBack1b:"R98",HairBack2:"R98",HairBack20:"R98",HairBack20b:"R98",HairBack21:"R98",HairBack22:"R98",HairBack23:"R98",HairBack24:"R98",HairBack25:"R98",HairBack26:"R98",HairBack27:"R98",HairBack28:"R98",HairBack29:"R98",HairBack2b:"R98",HairBack30:"R98",HairBack31:"R98",HairBack32:"R98",HairBack33:"R98",HairBack34:"R98",HairBack35:"R98",HairBack36:"R98",HairBack37:"R98",HairBack38:"R98",HairBack39:"R98",HairBack4:"R98",HairBack40:"R98",HairBack41:"R98",HairBack42:"R98",HairBack43:"R98",HairBack44:"R98",HairBack45:"R98",HairBack46:"R98",HairBack47:"R98",HairBack48:"R98",HairBack49:"R98",HairBack4b:"R98",HairBack5:"R98",HairBack50:"R98",HairBack51:"R98",HairBack52:"R98",HairBack53:"R98",HairBack54:"R98",HairBack54b:"R98",HairBack55:"R98",HairBack55b:"R98",HairBack56:"R98",HairBack56b:"R98",HairBack57:"R98",HairBack57b:"R98",HairBack57c:"R98",HairBack57d:"R102",HairBack5b:"R98",HairBack6:"R98",HairBack6b:"R98",HairBack7:"R98",HairBack7b:"R98",HairBack7c:"R98",HairBack8:"R98",HairBack9:"R98",HairBack9b:"R98",HairNone:"R98"},RR={HairFront1:"R98",HairFront10:"R98",HairFront10b:"R98",HairFront11:"R98",HairFront11b:"R98",HairFront12:"R98",HairFront12b:"R98",HairFront13:"R98",HairFront13b:"R98",HairFront14:"R98",HairFront14b:"R98",HairFront15:"R98",HairFront16:"R98",HairFront17:"R98",HairFront17b:"R98",HairFront18:"R98",HairFront19:"R98",HairFront1b:"R98",HairFront2:"R98",HairFront20:"R98",HairFront21:"R98",HairFront22:"R98",HairFront22b:"R98",HairFront23:"R98",HairFront23b:"R98",HairFront24:"R98",HairFront25:"R98",HairFront26:"R98",HairFront27:"R98",HairFront28:"R98",HairFront28b:"R98",HairFront29:"R98",HairFront29b:"R98",HairFront2b:"R98",HairFront3:"R98",HairFront30:"R98",HairFront31:"R98",HairFront32:"R98",HairFront33:"R98",HairFront33b:"R98",HairFront34:"R98",HairFront35:"R98",HairFront36:"R98",HairFront37:"R98",HairFront37b:"R98",HairFront38:"R98",HairFront38b:"R98",HairFront39:"R98",HairFront39b:"R98",HairFront3b:"R98",HairFront4:"R98",HairFront40:"R98",HairFront40b:"R98",HairFront41:"R98",HairFront41b:"R98",HairFront42:"R98",HairFront42b:"R98",HairFront43:"R98",HairFront43b:"R98",HairFront44:"R98",HairFront44b:"R98",HairFront45:"R98",HairFront45b:"R98",HairFront46:"R98",HairFront46b:"R98",HairFront47:"R98",HairFront47b:"R98",HairFront48:"R98",HairFront48b:"R98",HairFront49:"R98",HairFront4b:"R98",HairFront5:"R98",HairFront50:"R98",HairFront51:"R98",HairFront51b:"R98",HairFront52:"R98",HairFront52b:"R98",HairFront53:"R98",HairFront5b:"R98",HairFront6:"R98",HairFront6b:"R98",HairFront7:"R98",HairFront7b:"R98",HairFront8:"R98",HairFront8b:"R98",HairFront9:"R98",HairFront9b:"R98"},gR={Default:"R98"},mR={BakerBoyHat:"R98",BallCapBack:"R98",BallCapFront:"R98",Band1:"R98",Band2:"R98",Bandana:"R98",Beanie:"R98",Beret1:"R98",Bonnet1:"R98",Bonnet2:"R98",BunnySuccubus2:"R98",CaptainHat1:"R98",CollegeDunce:"R98",CowboyHat:"R98",Crown1:"R98",Crown2:"R98",Crown3:"R98",Crown4:"R98",Crown5:"R98",FacePaint:"R98",FlowerCrown:"R98",FurHeadband:"R98",HeadTowel1:"R98",LatexHabit:"R98",MaidHairband1:"R98",MaidLatexHairband:"R101",NunHabit:"R98",NurseCap:"R98",PirateBandana1:"R98",PirateHat:"R98",PoliceWomanHat:"R98",PoppyCrown:"R98",ReindeerBand:"R98",RoseCrown:"R98",Santa1:"R98",SmallHat1:"R98",SwimCap:"R98",Tiara1:"R98",Veil1:"R98",Veil2:"R98",WitchHat1:"R98"},yR={Default:"R98",NoEars:"R98",SmallEars:"R98"},vR={H0900:"R98",H0910:"R98",H0920:"R98",H0930:"R98",H0940:"R98",H0950:"R98",H0960:"R98",H0970:"R98",H0980:"R98",H0990:"R98",H1000:"R98"},SR={BedChains:"R98",BedRopes:"R98",BedStraps:"R98",BedTape:"R98",CeilingChain:"R98",CeilingRope:"R98",Covers:"R98"},bR={ArmbinderJacket:"R98",BitchSuit:"R98",Bolero:"R98",BondageBouquet:"R98",BondageBra:"R98",BoxTieArmbinder:"R98",CanvasStraitjacket1:"R98",CeilingShackles:"R98",Chains:"R98",CollarCuffs:"R98",DuctTape:"R98",FourLimbsShackles:"R98",FullBodyLeatherHarness:"R98",FullBodyShackles:"R98",FullLatexSuit:"R98",FurStraitJacket:"R98",FuturisticArmbinder:"R98",FuturisticCuffs:"R98",FuturisticStraitjacket:"R98",HeavyYoke:"R98",HempRope:"R98",HighSecurityStraitJacket:"R98",HighStyleSteelCuffs:"R98",InflatableStraightLeotard:"R98",LatexArmbinder:"R98",LatexBoxtieLeotard:"R98",LatexButterflyLeotard:"R98",LatexSleevelessLeotard:"R98",LeatherArmSplints:"R98",LeatherArmbinder:"R98",LeatherCuffs:"R98",LeatherDeluxeCuffs:"R98",LeatherStraitJacket:"R98",Manacles:"R98",MedicalBedRestraints:"R98",MermaidSuit:"R98",MetalCuffs:"R98",NylonRope:"R98",OrnateCuffs:"R98",PantyhoseBody:"R98",PantyhoseBodyOpen:"R98",PetCrawler:"R98",Pillory:"R98",PlasticWrap:"R98",PrisonLockdownSuit:"R98",PrisonSJ:"R98",Ribbons:"R98",SeamlessLatexArmbinder:"R98",SeamlessStraitDress:"R98",SeamlessStraitDressOpen:"R98",ShinyArmbinder:"R98",ShinyPetSuit:"R98",ShinyStraitjacket:"R98",SleepSac:"R98",Slime:"R98",SmoothLeatherArmbinder1:"R98",SteelCuffs:"R98",StraitDress:"R98",StraitDressOpen:"R98",StraitJacket:"R98",StraitLeotard:"R98",StrictLeatherPetCrawler:"R98",SturdyLeatherBelts:"R98",Tentacles:"R98",ThinLeatherStraps:"R98",TightJacket:"R98",TightJacketCrotch:"R98",TransportJacket:"R98",UnderBedBondageCuffs:"R98",Web:"R98",WoodenCuffs:"R98",WrappedBlanket:"R98",WristShackles:"R98",Yoke:"R98",Zipties:"R98"},CR={BalletHeels:"R98",BalletHeels1:"R98",BalletWedges:"R98",FuturisticHeels:"R98",FuturisticHeels2:"R98",HighThighBoots:"R98",LeatherFootMitts1:"R98",LeatherToeCuffs:"R98",LockingBoots1:"R98",LockingHeels:"R98",LockingHeels2:"R98",LockingShoes1:"R98",LockingShoes2:"R98",MetalBallet:"R100",MonoHeel:"R98",PonyBoots:"R98",ShortPonyBoots:"R98",Slime:"R98",ThighHighLatexHeels:"R98",ToeCuffs:"R98",ToeTape:"R98",ToeTie:"R98",Zipties:"R98"},wR={ForbiddenChastityBra:"R98",FuturisticBra:"R98",FuturisticBra2:"R98",LeatherBreastBinder:"R98",MetalChastityBra:"R98",OrnateChastityBra:"R98",PolishedChastityBra:"R98",Ribbons:"R98",TickleBra:"R98"},BR={AnalBeads:"R98",AnalBeads2:"R98",AnalHook:"R98",BlackButtPlug:"R98",BunnyTailPlug1:"R98",BunnyTailPlug2:"R98",BunnyTailVibePlug:"R98",ButtPlugLock:"R98",ButtPump:"R98",Cowtail:"R98",DemonPlug:"R98",EggVibePlugXXL:"R98",FoxTail1:"R98",FoxTail2:"R98",FoxTails:"R98",HollowButtPlug:"R98",HorsetailPlug:"R98",HorsetailPlug1:"R98",InflVibeButtPlug:"R98",KittenTail1:"R98",KittenTail2:"R98",LockingVibePlug:"R98",MouseTail1:"R98",MouseTail2:"R98",PenisPlug:"R98",PuppyTailPlug:"R98",PuppyTailPlug1:"R98",RaccoonButtPlug:"R98",RaccoonTailPlug:"R98",ShockPlug:"R98",Stitches:"R98",SuccubusButtPlug:"R98",SuccubusHeartButtPlug:"R98",TailButtPlug:"R98",Tentacles:"R98",VibratingButtplug:"R98",VibratingDildoPlug:"R98",WolfTail1:"R98",WolfTail2:"R98",WolfTail3:"R98"},kR={BBQ:"R98",Bed:"R98",BondageBench:"R98",BurlapSack:"R98",Cage:"R98",ChangingTable:"R98",Coffin:"R98",ConcealingCloak:"R98",Crib:"R98",CryoCapsule:"R98",Cushion:"R98",DisplayCase:"R98",DollBox:"R98",Familiar:"R98",FoldingScreen:"R98",FuckMachine:"R98",FurBlanketWrap:"R98",FuturisticCrate:"R98",InflatableBodyBag:"R98",KabeshiriWall:"R98",Kennel:"R98",LittleMonster:"R98",Locker:"R98",LowCage:"R98",LuckyWheel:"R98",MedicalBed:"R98",MilkCan:"R98",Net:"R98",OneBarPrison:"R98",PersonalCage:"R98",PetBed:"R98",PetBowl:"R98",Pole:"R98",SaddleStand:"R98",SmallDisplayCase:"R98",SmallLocker:"R98",SmallWoodenBox:"R98",SmallWoodenBoxOpenHead:"R98",Snowman:"R98",StrapOnSmooth:"R98",StrapOnStuds:"R98",Sybian:"R98",TheDisplayFrame:"R98",TheHangingFrame:"R101",TransportWoodenBox:"R98",Trolley:"R99",VacBedDeluxe:"R98",VacCube:"R98",Vacbed:"R98",VacbedClear:"R98",WaterCell:"R98",WetFloor:"R98",WheelFortune:"R98",WoodenBox:"R98",WoodenBoxOpenHead:"R98",WoodenHorse:"R98",WoodenRack:"R98",WoodenStocks:"R98","X-Cross":"R98"},PR={BluetoothEarbuds:"R98",FuturisticEarphones:"R98",HeadphoneEarPlugs:"R98",Headphones:"R98",HeavyDutyEarPlugs:"R98",LightDutyEarPlugs:"R98"},MR={AnkleShackles:"R98",BallChain:"R98",Chains:"R98",DuctTape:"R98",EscortAnkleCuffs:"R98",FloorShackles:"R98",FuturisticAnkleCuffs:"R98",HeavyAnkleCuffs:"R98",HeavySpreaderMetal:"R98",HempRope:"R98",HighStyleSteelAnkleCuffs:"R98",Irish8Cuffs:"R98",LeatherAnkleCuffs:"R98",LeatherBelt:"R98",LeatherDeluxeAnkleCuffs:"R98",MedicalBedRestraints:"R98",NylonRope:"R98",OrnateAnkleCuffs:"R98",PlasticWrap:"R98",Slime:"R98",SpreaderDildoBar:"R98",SpreaderMetal:"R98",SpreaderVibratingDildoBar:"R98",SteelAnkleCuffs:"R98",SturdyLeatherBelts:"R98",SuspensionCuffs:"R98",Tentacles:"R98",WoodenCuffs:"R98",Zipties:"R98"},xR={Baguette:"R98",Ballgag:"R98",Belt:"R98",Broom:"R98",BunPlush:"R98",CandleWax:"R98",Cane:"R98",CattleProd:"R98",Crop:"R98",ElectricToothbrush:"R98",Feather:"R98",FeatherDuster:"R98",Flogger:"R98",ForSaleSign:"R98",FoxPlush:"R98",Gavel:"R98",GlassEmpty:"R98",GlassFilled:"R98",Hairbrush:"R98",HeartCrop:"R98",IceCube:"R98",Karl:"R98",KeyProp:"R98",LargeDildo:"R98",LongDuster:"R98",LongSock:"R98",Lotion:"R98",MedicalInjector:"R98",Mug:"R98",Paddle:"R98",Panties:"R98",PetPotato:"R98",PetToy:"R98",Phone1:"R98",Phone2:"R98",PlasticWrap:"R98",Popcorn:"R99",PortalTablet:"R98",PotionBottle:"R98",RainbowWand:"R98",RopeCoilLong:"R98",RopeCoilShort:"R98",Ruler:"R98",Scissors:"R98",Shark:"R98",ShockRemote:"R98",ShockWand:"R98",SmallDildo:"R98",SmallVibratingWand:"R98",Smartphone:"R99",Spatula:"R98",Sword:"R98",TapeRoll:"R98",TennisRacket:"R98",Toothbrush:"R98",Towel:"R98",VibeRemote:"R98",VibratingWand:"R98",Vibrator:"R98",WartenbergWheel:"R98",Whip:"R98",WhipPaddle:"R98"},_R={CheerleaderPomPoms:"R98",DuctTape:"R98",FuturisticMittens:"R98",HoofMittens:"R98",LeatherMittens:"R98",PaddedLeatherMittens:"R98",PaddedMittens:"R98",PawMittens:"R98",PolishedMittens:"R98",PonyMittensBinder:"R100",SmoothLeatherMittens1:"R98"},IR={AnimeLenses:"R98",BigMouthHood:"R101",BlackoutLenses:"R98",ClothBlindfold:"R98",DroneMask:"R98",DuctTape:"R98",FrilledSleepMask:"R98",FullBlindfold:"R98",FurScarf:"R98",FuturisticMask:"R98",InteractiveVRHeadset:"R98",InteractiveVisor:"R98",KittyBlindfold:"R98",LatexBlindfold:"R98",LeatherBlindfold:"R98",LeatherSlimMask:"R98",LeatherSlimMaskOpenEyes:"R98",LeatherSlimMaskOpenMouth:"R98",LewdBlindfold:"R98",MedicalPatch:"R98",PaddedBlindfold:"R98",Pantyhose:"R98",PrisonLockdownBlindfold:"R98",Ribbons:"R98",RopeBlindfold:"R98",ScarfBlindfold:"R98",SleepMask:"R98",Slime:"R98",SmallBlindfold:"R98",Snorkel:"R98",Stitches:"R98",StuddedBlindfold:"R98",Tentacles:"R98",WebBlindfold:"R98"},ER={AccentHood:"R98",BigMouthHood:"R101",BlanketHood:"R98",CanvasHood:"R98",CollarHood:"R98",CorsetHood:"R98",CowHood:"R98",CustomLatexHood:"R98",DobermanMask:"R98",DogHood:"R98",DroneMask:"R98",FestivalFoxMask:"R98",FoxHood:"R98",FoxyMask:"R98",FuturisticHelmet:"R98",GGTSHelmet:"R98",GP9GasMask:"R98",GasMask:"R98",GwenHood:"R98",HarnessCatMask:"R98",HeadboxSeethrough:"R98",InflatableGagMask:"R98",InflatedBallHood:"R98",KirugumiMask:"R98",KittyHood:"R98",LampHeadHood:"R98",LatexBunny:"R98",LatexDogHood:"R98",LatexDogMask:"R98",LatexHabit:"R98",LatexHoodOpenHair:"R98",LeatherHood:"R98",LeatherHoodOpenEyes:"R98",LeatherHoodOpenMouth:"R98",LeatherHoodSealed:"R98",LeatherHoodSensDep:"R98",OldGasMask:"R98",OpenFaceHood:"R98",OpenMouthPlugHood:"R98",PantyHood:"R98",Pantyhose:"R98",PolishedSteelHood:"R98",PonyHood:"R98",PumpkinHead:"R98",SackHood:"R98",SensoryDeprivationHood:"R98",Slime:"R98",SpaceMask:"R100",TechnoHelmet1:"R98",VacHood:"R98",ZipperHood:"R98"},FR={Chains:"R98",DuctTape:"R98",FrogtieStraps:"R98",FuturisticLegCuffs:"R98",HempRope:"R98",HobbleSkirt:"R98",LeatherBelt:"R98",LeatherDeluxeLegCuffs:"R98",LeatherLegCuffs:"R98",LegBinder:"R98",MedicalBedRestraints:"R98",MermaidTail:"R98",NylonRope:"R98",OrnateLegCuffs:"R98",PlasticWrap:"R98",Ribbons:"R98",SeamlessHobbleSkirt:"R98",SeamlessLegBinder:"R98",ShinyLegBinder:"R98",Slime:"R98",SturdyLeatherBelts:"R98",Tentacles:"R98",Zipties:"R98"},OR={BountySuitcase:"R98",BountySuitcaseEmpty:"R98",BunPlush:"R98",CombinationPadlock:"R98",ExclusivePadlock:"R98",FamilyPadlock:"R98",FamilyPadlockKey:"R98",FoxPlush:"R98",HighSecurityPadlock:"R98",IntricatePadlock:"R98",Karl:"R98",Lockpicks:"R98",LoversPadlock:"R98",LoversPadlockKey:"R98",LoversTimerPadlock:"R98",MetalCuffsKey:"R98",MetalPadlock:"R98",MetalPadlockKey:"R98",MistressPadlock:"R98",MistressPadlockKey:"R98",MistressTimerPadlock:"R98",OwnerPadlock:"R98",OwnerPadlockKey:"R98",OwnerTimerPadlock:"R98",PandoraPadlock:"R98",PandoraPadlockKey:"R98",PasswordPadlock:"R98",PetPost:"R98",PetPotato:"R98",PortalLinkPadlock:"R98",SafewordPadlock:"R98",ServingTray:"R98",TeddyBear:"R98",TimerPadlock:"R98",TimerPasswordPadlock:"R98",WoodenMaidTray:"R98",WoodenMaidTrayFull:"R98",WoodenPaddle:"R98",WoodenSign:"R98"},LR={Ball:"R98",BallGag:"R98",BallGagMask:"R98",BambooGag:"R98",BigMouth:"R98",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CaneGag:"R98",CarrotGag:"R98",ChloroformCloth:"R98",ChopstickGag:"R98",ClothGag:"R98",ClothStuffing:"R98",CropGag:"R98",CupholderGag:"R98",DeepthroatGag:"R98",DentalGag:"R98",DildoGag:"R98",DildoPlugGag:"R98",DogMuzzleExposed:"R98",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FunnelGag:"R98",FurScarf:"R98",FuturisticHarnessBallGag:"R98",FuturisticHarnessPanelGag:"R98",FuturisticMuzzle:"R98",FuturisticPanelGag:"R98",GasMaskGag:"R98",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",HookGagMask:"R98",Kissmark:"R102",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LargeDildo:"R98",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R102",LatexSheathGag:"R98",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",MilkBottle:"R98",ModularGag:"R99",MouthFeatureGag:"R102",MuzzleGag:"R98",OTNPlugGag:"R98",PaciGag:"R98",PacifierGag:"R98",PaddedFaceMask:"R102",PantiesMask:"R98",PantyStuffing:"R98",PlasticWrap:"R98",PlugGag:"R98",PonyGag:"R98",PrisonLockdownGag:"R98",PumpGag:"R98",PumpkinGag:"R98",RegressedMilk:"R98",RegularSleepingPill:"R98",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SockStuffing:"R98",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R102",TechnoGag:"R98",Tentacles:"R98",TonguePiercingGag:"R100",TongueStrapGag:"R98",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98"},$R={BallGag:"R98",BallGagMask:"R98",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CarrotGag:"R98",ChloroformCloth:"R98",ClothGag:"R98",CupholderGag:"R98",DildoGag:"R98",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FurScarf:"R98",FuturisticHarnessBallGag:"R101",FuturisticHarnessPanelGag:"R101",FuturisticMuzzle:"R98",FuturisticPanelGag:"R101",GasMaskGag:"R98",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",Kissmark:"R102",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R102",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",ModularGag:"R99",MouthFeatureGag:"R98",MuzzleGag:"R98",PaciGag:"R98",PaddedFaceMask:"R102",PantiesMask:"R98",PlasticWrap:"R98",PonyGag:"R98",PrisonLockdownGag:"R98",PumpkinGag:"R98",RegressedMilk:"R98",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R102",Tentacles:"R98",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98"},AR={BallGag:"R98",BallGagMask:"R98",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CarrotGag:"R98",ChloroformCloth:"R98",ClothGag:"R98",CupholderGag:"R98",DildoGag:"R98",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FurScarf:"R98",FuturisticHarnessBallGag:"R101",FuturisticHarnessPanelGag:"R101",FuturisticMuzzle:"R98",FuturisticPanelGag:"R101",GasMaskGag:"R98",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",Kissmark:"R98",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R98",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",ModularGag:"R99",MouthFeatureGag:"R102",MuzzleGag:"R98",PaciGag:"R98",PaddedFaceMask:"R98",PantiesMask:"R98",PlasticWrap:"R98",PonyGag:"R98",PrisonLockdownGag:"R98",PumpkinGag:"R98",RegressedMilk:"R98",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R98",Tentacles:"R98",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98"},HR={AutoShockCollar:"R98",BatCollar:"R98",BonedNeckCorset:"R98",BordelleCollar:"R98",ClubSlaveCollar:"R98",ComboHarness:"R98",DogCollar:"R98",ExtendablePostureCollar:"R99",FuturisticCollar:"R98",GothicCollar:"R98",HeartCollar:"R98",HeartLinkChoker:"R98",HighCollar:"R98",HighSecurityCollar:"R98",HighStyleSteelCollar:"R98",LatexCollar1:"R98",LatexCollar2:"R98",LatexPostureCollar:"R98",LatexRingCollar:"R99",LeatherChoker:"R98",LeatherCollar:"R98",LeatherCollarBell:"R98",LeatherCollarBow:"R98",LeatherCorsetCollar:"R98",LeatherDeluxeCollar:"R98",LoveLeatherCollar:"R98",MaidCollar:"R98",NeckRope:"R98",NobleCorsetCollar:"R98",NylonCollar:"R98",OrnateCollar:"R98",PaddedBeltCollar:"R99",PetCollar:"R98",PetSuitShockCollar:"R98",PostureCollar:"R98",ShinySteelCollar:"R98",ShockCollar:"R98",SlaveCollar:"R98",SlenderSteelCollar:"R98",SpikeCollar:"R98",SpikedChoker:"R99",SteelPostureCollar:"R98",StrictPostureCollar:"R98",TechnoCollar:"R98"},TR={CollarAutoShockUnit:"R98",CollarBell:"R98",CollarBow:"R98",CollarButterfly:"R98",CollarCowBell:"R98",CollarFlower:"R98",CollarLapis:"R98",CollarMoon:"R98",CollarNameTag:"R98",CollarNameTagLivestock:"R98",CollarNameTagLover:"R98",CollarNameTagOval:"R98",CollarNameTagPet:"R98",CollarPentagram:"R98",CollarPupBone:"R98",CollarRose:"R98",CollarShockUnit:"R98",CollarSun:"R98",CustomCollarTag:"R98",ElectronicTag:"R98",Key:"R98"},NR={ChainLeash:"R98",CollarChainLong:"R98",CollarChainMedium:"R98",CollarChainShort:"R98",CollarLeash:"R98",CollarRopeLong:"R98",CollarRopeMedium:"R98",CollarRopeShort:"R98",PetPost:"R98",Post:"R98"},DR={BellClamps:"R98",ChainClamp:"R98",ChainTassles:"R98",ChopStickNippleClamps:"R98",Clothespins:"R98",HeartPasties:"R98",KittyPasties:"R98",LactationPump:"R98",NippleClamp:"R98",NippleClamps2:"R98",NippleSuctionCups:"R98",NippleTape:"R98",NippleVibe:"R98",NippleWeightClamps:"R98",PlateClamps:"R98",ScrewClamps:"R98",ShockClamps:"R98",StretchClovers:"R98",TapedVibeEggs:"R98",VibeNippleClamp:"R98",VibratorRemote:"R98"},WR={BarbellPiercing:"R98",BellPiercing:"R98",CrossedStraightPiercing:"R98",NecklacePiercingChain:"R98",NippleAccessory1:"R98",NippleAccessory2:"R98",NippleAccessory3:"R98",NippleChastityPiercing1:"R98",NippleChastityPiercing2:"R98",RoundPiercing:"R98",StraightPiercing:"R98",VibeHeartPiercings:"R98"},GR={BarbelPiercing:"R98",ClownNose:"R99",DuctTape:"R98",NoseHook:"R98",NosePlugs:"R98",NoseRing:"R98",PigNose:"R98",PigNoseHook:"R98"},jR={BulkyDiaper:"R98",DiaperHarness:"R98",ForbiddenChastityBelt:"R98",FuturisticChastityBelt:"R98",FuturisticTrainingBelt:"R98",HarnessPanties1:"R98",HarnessPanties2:"R98",HeavyDutyBelt:"R98",HempRope:"R98",HybridChastityBelt:"R98",LeatherChastityBelt:"R98",LeatherStrapPanties1:"R98",LoveChastityBelt:"R98",MetalChastityBelt:"R98",ModularChastityBelt:"R99",ObedienceBelt:"R98",OrnateChastityBelt:"R98",PelvisChainLeash:"R98",PolishedChastityBelt:"R98",PoofyDiaper:"R98",PortalPanties:"R98",Ribbons:"R98",SciFiPleasurePanties:"R98",SleekLeatherChastityBelt:"R98",SteelChastityPanties:"R98",StraponPanties:"R98",StuddedChastityBelt:"R98"},zR={Script:"R98"},VR={AdultBabyHarness:"R98",ClassicLatexCorset:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",CrotchChain:"R98",FuturisticHarness:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeavyLatexCorset:"R98",HempRopeHarness:"R98",HighSecurityHarness:"R98",LatexCorset1:"R98",LeatherBreastBinder:"R98",LeatherChestHarness1:"R98",LeatherHarness:"R98",LeatherStrapBra1:"R98",LeatherStrapHarness:"R98",LockingSwimsuit:"R98",LockingSwimsuit2:"R98",NavelBar1:"R98",NylonRopeHarness:"R98",Ribbons:"R98",StuddedHarness:"R98",ThinLeatherStraps:"R98",Underbust:"R98"},qR={AdultBabyHarness:"R98",ClassicLatexCorset:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",CrotchChain:"R98",FuturisticHarness:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeavyLatexCorset:"R98",HempRopeHarness:"R98",HighSecurityHarness:"R98",LatexCorset1:"R98",LeatherBreastBinder:"R98",LeatherChestHarness1:"R98",LeatherHarness:"R98",LeatherStrapBra1:"R98",LeatherStrapHarness:"R98",LockingSwimsuit:"R98",LockingSwimsuit2:"R98",NavelBar1:"R98",NylonRopeHarness:"R98",Ribbons:"R98",StuddedHarness:"R98",ThinLeatherStraps:"R98",Underbust:"R98"},UR={BasicCockring:"R98",BenWaBalls:"R98",ChastityPouch:"R98",ClitAndDildoVibratorbelt:"R98",ClitSuctionCup:"R98",ClitoralStimulator:"R98",DoubleEndDildo:"R98",FlatChastityCage:"R98",FullLatexSuitWand:"R98",FuturisticVibrator:"R98",HeavyWeightClamp:"R98",HempRopeBelt:"R98",InflatableVibeDildo:"R98",InflatableVibratingPanties:"R98",LoversVibrator:"R98",LoversVibratorRemote:"R98",PenisDildo:"R98",PlasticChastityCage1:"R98",PlasticChastityCage2:"R98",ShockDildo:"R98",Stitches:"R98",TapeStrips:"R98",TechnoChastityCage:"R98",VibeEggPenisBase:"R98",VibratingDildo:"R98",VibratingEgg:"R98",VibratingLatexPanties:"R98",VibratorRemote:"R98",WandBelt:"R98",WiredEgg:"R98"},KR={AdornedClitPiercing:"R98",BarbellClitPiercing:"R98",ChastityClitPiercing:"R98",ChastityClitShield:"R98",ClitRing:"R98",HighSecurityVulvaShield:"R98",JewelClitPiercing:"R98",RoundClitPiercing:"R98",StraightClitPiercing:"R98",TapedClitEgg:"R98",VibeEggGlans:"R98",VibeHeartClitPiercing:"R98"},JR={JewelrySet:"R98"},ZR={BandAnklet:"R98",Ribbon:"R98",Ribbon1:"R98"},YR={CatsuitGloves:"R100",Claws:"R99",Fingernails:"R99",Rings:"R98"},XR={AnimeLenses:"R99",BunnyMask1:"R98",BunnyMask2:"R98",BunnyMask3:"R98",ButterflyMask:"R98",DominoMask:"R98",DroneMask:"R98",FacePaint:"R98",FaceVeil:"R98",FestivalFoxMask:"R98",FoxMask:"R98",FuturisticVisor:"R98",Glitter:"R98",HeadHarness:"R98",Kissmark:"R98",KittyMask1:"R98",KittyMask2:"R98",KittyMask3:"R98",LaceMask1:"R98",LaceMask2:"R98",LatexMuzzleMask:"R99",MedicalMask:"R98",OpenFaceHood:"R98",PetNose:"R98",ShinobiMask:"R98",SwimCap:"R98",VenetianMask:"R98"},QR={Discreet:"R98",Full:"R98",Regular:"R98"},eg={Bandana:"R98",BlackHeart:"R98",BodyChainNecklace:"R98",CatsuitCollar:"R98",ChokerTattoo:"R98",ElegantHeartNecklace:"R98",FlowerGarland:"R98",FurScarf:"R98",IDCard:"R98",Necklace1:"R98",Necklace2:"R98",Necklace3:"R98",Necklace4:"R98",NecklaceBallGag:"R98",NecklaceButterfly:"R98",NecklaceKey:"R98",NecklaceLock:"R98",NecklaceRope:"R98"},tg={Nipples1:"R98",Nipples2:"R98",Nipples3:"R98"},rg={Bikini1:"R98",BoxerShorts:"R98",Briefs:"R98",BulkyDiaper:"R98",CatsuitPanties:"R98",ChinesePanties1:"R98",CockSock:"R98",CowPrintedPanties:"R98",CrotchPanties1:"R98",Diapers1:"R98",Diapers2:"R98",Diapers3:"R98",Diapers4:"R98",FloralPanties2:"R98",FlowerPanties:"R98",HarnessPanties1:"R98",HarnessPanties2:"R98",Jockstrap:"R98",KittyPanties1:"R98",LatexCrotchlessPanties:"R98",LatexPanties1:"R98",LatexPanties2:"R98",LeatherStrapPanties1:"R98",MaidPanties1:"R98",MaidPanties2:"R98",MaleCatsuitPanties:"R98",MicroThong:"R98",Panties1:"R98",Panties11:"R98",Panties12:"R98",Panties13:"R98",Panties14:"R98",Panties15:"R98",Panties16:"R98",Panties7:"R98",Panties8:"R98",PearlPanties1:"R98",PilotPanties:"R98",PoofyDiaper:"R98",RedBowPanties:"R98",SexyBeachPanties1:"R98",StringPanties1:"R98",StringPasty1:"R98",StringThong:"R98",SunstripePanties1:"R98",Thong:"R98",WrapPanties1:"R98",ZipPanties1:"R98"},ng={HeHim:"R98",SheHer:"R98"},og={Penis:"R98",Pussy1:"R98",Pussy2:"R98",Pussy3:"R98"},ig={BandAnklet:"R98",Ribbon:"R98",Ribbon1:"R98"},ag={CatsuitGloves:"R100",Claws:"R99",Fingernails:"R99",Rings:"R98"},sg={AnkleBoots1:"R98",AnkleStrapShoes:"R98",BalletHeels1:"R98",BarefootSandals1:"R98",Boots1:"R98",Clogs:"R99",DeluxeBoots:"R98",DutyShoes:"R98",Flippers:"R98",FuturisticHeels2:"R98",FuzzyBoots:"R98",Geta:"R98",Heels1:"R98",Heels2:"R98",Heels3:"R98",LatexAnkleShoes:"R98",LatexHeels:"R98",MaryShoes:"R102",MistressBoots:"R98",PawBoots:"R98",PonyBoots:"R98",Sandals:"R98",SandalsRS:"R98",Shoes1:"R98",Shoes2:"R98",Shoes4:"R98",Shoes5:"R98",Sneakers1:"R98",Sneakers2:"R98",SneakersSport:"R98",SocialHeels:"R98",StilettoHeels:"R98",StreetBoots:"R98",TallerBoots:"R100",ThighBoots:"R98",ThighHighLatexHeels:"R98",WesternBoots:"R98",WoollyBootsTall:"R98"},lg={CowPrintedSocks:"R98",FootlessSocks1:"R98",GradientPantyhose:"R98",HaremStockings:"R98",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",Pantyhose1:"R98",Pantyhose2:"R98",ReverseBunnySuit:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98"},ug={CowPrintedSocks:"R98",FootlessSocks1:"R98",HaremStockings:"R98",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",LooseSocks:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98"},cg={CowPrintedSocks:"R98",FootlessSocks1:"R98",HaremStockings:"R98",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",LooseSocks:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98"},fg={Blouse1:"R98",Catsuit:"R98",FishnetTop:"R98",LatexCatsuit:"R98",MaleSeamlessCatsuit:"R98",PilotSuit:"R98",ReverseBunnySuit:"R98",SeamlessCatsuit:"R98",SeethroughSuit:"R98",SeethroughSuitZip:"R98",SleevelessCatsuit:"R98",SleevelessSlimLatexLeotard:"R98"},hg={Catsuit:"R98",CatsuitPanties:"R98",LatexCatsuit:"R98",MaleCatsuitPanties:"R98",MaleSeamlessCatsuit:"R98",Pantyhose1:"R98",Pantyhose2:"R98",PilotPanties:"R98",PilotSuit:"R98",ReverseBunnySuit:"R98",SeamlessCatsuit:"R98",SeethroughSuit:"R98",SeethroughSuitZip:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98"},dg={BunnyTailStrap:"R98",CowtailStrap:"R98",DemonPlug:"R98",DragonTailStrap1:"R98",FoxTailStrap1:"R98",FoxTailStrap2:"R98",FoxTailsStrap:"R98",HorseTailStrap:"R98",HorseTailStrap1:"R98",KittenTailStrap1:"R98",KittenTailStrap2:"R98",LionTailStrap:"R98",MouseTailStrap1:"R98",MouseTailStrap2:"R98",PuppyTailStrap:"R98",PuppyTailStrap1:"R98",RaccoonStrap:"R98",RaccoonTailStrap:"R98",SuccubusHeartTailStrap:"R98",SuccubusTailStrap:"R98",TailStrap:"R98",Tentacles:"R98",WolfTailStrap1:"R98",WolfTailStrap2:"R98",WolfTailStrap3:"R98"},pg={AngelFeather:"R98",AngelWings:"R98",BatWings:"R98",BeeWings:"R98",CyberWings:"R98",DevilWings:"R98",FairyWings:"R98",FallenAngelWings:"R98",PixieWings:"R98",SteampunkWings:"R98",SuccubusFeather:"R98",SuccubusWings:"R98"},Rg={Blush:Vp,BodyLower:qp,BodyMarkings:Up,BodyUpper:Kp,Bra:Jp,Bracelet:Zp,Cloth:Yp,ClothAccessory:Xp,ClothLower:Qp,Corset:eR,Emoticon:tR,Eyebrows:rR,Eyes:nR,Eyes2:oR,EyeShadow:iR,FacialHair:aR,Fluids:sR,Garters:lR,Glasses:uR,Gloves:cR,HairAccessory1:fR,HairAccessory2:hR,HairAccessory3:dR,HairBack:pR,HairFront:RR,Hands:gR,Hat:mR,Head:yR,Height:vR,ItemAddon:SR,ItemArms:bR,ItemBoots:CR,ItemBreast:wR,ItemButt:BR,ItemDevices:kR,ItemEars:PR,ItemFeet:MR,ItemHandheld:xR,ItemHands:_R,ItemHead:IR,ItemHood:ER,ItemLegs:FR,ItemMisc:OR,ItemMouth:LR,ItemMouth2:$R,ItemMouth3:AR,ItemNeck:HR,ItemNeckAccessories:TR,ItemNeckRestraints:NR,ItemNipples:DR,ItemNipplesPiercings:WR,ItemNose:GR,ItemPelvis:jR,ItemScript:zR,ItemTorso:VR,ItemTorso2:qR,ItemVulva:UR,ItemVulvaPiercings:KR,Jewelry:JR,LeftAnklet:ZR,LeftHand:YR,Mask:XR,Mouth:QR,Necklace:eg,Nipples:tg,Panties:rg,Pronouns:ng,Pussy:og,RightAnklet:ig,RightHand:ag,Shoes:sg,Socks:lg,SocksLeft:ug,SocksRight:cg,Suit:fg,SuitLower:hg,TailStraps:dg,Wings:pg},gg=Object.freeze({__proto__:null,Blush:Vp,BodyLower:qp,BodyMarkings:Up,BodyUpper:Kp,Bra:Jp,Bracelet:Zp,Cloth:Yp,ClothAccessory:Xp,ClothLower:Qp,Corset:eR,Emoticon:tR,EyeShadow:iR,Eyebrows:rR,Eyes:nR,Eyes2:oR,FacialHair:aR,Fluids:sR,Garters:lR,Glasses:uR,Gloves:cR,HairAccessory1:fR,HairAccessory2:hR,HairAccessory3:dR,HairBack:pR,HairFront:RR,Hands:gR,Hat:mR,Head:yR,Height:vR,ItemAddon:SR,ItemArms:bR,ItemBoots:CR,ItemBreast:wR,ItemButt:BR,ItemDevices:kR,ItemEars:PR,ItemFeet:MR,ItemHandheld:xR,ItemHands:_R,ItemHead:IR,ItemHood:ER,ItemLegs:FR,ItemMisc:OR,ItemMouth:LR,ItemMouth2:$R,ItemMouth3:AR,ItemNeck:HR,ItemNeckAccessories:TR,ItemNeckRestraints:NR,ItemNipples:DR,ItemNipplesPiercings:WR,ItemNose:GR,ItemPelvis:jR,ItemScript:zR,ItemTorso:VR,ItemTorso2:qR,ItemVulva:UR,ItemVulvaPiercings:KR,Jewelry:JR,LeftAnklet:ZR,LeftHand:YR,Mask:XR,Mouth:QR,Necklace:eg,Nipples:tg,Panties:rg,Pronouns:ng,Pussy:og,RightAnklet:ig,RightHand:ag,Shoes:sg,Socks:lg,SocksLeft:ug,SocksRight:cg,Suit:fg,SuitLower:hg,TailStraps:dg,Wings:pg,default:Rg});let mg;const yg={};var vg;pd(Og).then((()=>{ld.log("Initializing new item screen hooks");const e=GameVersionFormat.exec(GameVersion);if(null==e)return void ld.error(`Invalid BC version: "${GameVersion}"`);mg=Number.parseInt(e[1]);for(const[e,t]of wd(gg))for(const[r,n]of wd(t))if(n===`R${mg}`){const t=AssetGet("Female3DCG",e,r);if(null==t)continue;t.Group.Name===t.DynamicGroupName&&(yg[`${t.Group.Name}${t.Name}`]=t)}Rd.patchFunction("MainHallRun",{'DrawText(TextGet("OnlinePlayers") + " " + CurrentOnlinePlayers.toString(), 1740, 950, "White", "Black");':'DrawText(TextGet("OnlinePlayers") + " " + CurrentOnlinePlayers.toString(), 1630, 950, "White", "Black");'}),Rd.hookFunction("MainHallRun",0,((e,t)=>{t(e),null==MainHallStartEventTimer&&null==MainHallNextEventTimer&&DrawButton(1665,900,90,90,"","White","Icons/Changelog.png",`MBS: Show new R${mg} items`)}));const t=Shop2Vars;Object.defineProperty(Shop2Vars,"MBS_ShowAllVersions",{get:()=>!("MBS_VersionFilter"in Shop2Vars.Filters)}),Shop2.Elements.MBS_VersionHeader={Coords:[345,315,0,0],Mode:new Set(["Preview","Buy","Sell"]),Run:(e,t,r)=>DrawText("Filter by BC version",t,r,Shop2Vars.DisplayDropdown?"Gray":"White")},Shop2.Elements.MBS_ShowCurrentVersion={Coords:[135,Shop2Consts.Grid.y+160,200,90],Mode:new Set(["Preview","Buy","Sell"]),Run:(e,...r)=>{Shop2Vars.DisplayDropdown?DrawButton(...r,`Version R${mg}`,"Gray",void 0,void 0,!0):t.MBS_ShowAllVersions?DrawButton(...r,`Version R${mg}`,"White"):DrawButton(...r,`Version R${mg}`,"Cyan")},Click:()=>{t.MBS_ShowAllVersions&&(Shop2Vars.Filters.MBS_VersionFilter=e=>yg[`${e.Asset.Group.Name}${e.Asset.Name}`]?["Buy","Sell","Preview"]:[],Shop2.ApplyItemFilters())}},Shop2.Elements.MBS_ShowAllVersions={Coords:[355,Shop2Consts.Grid.y+160,200,90],Mode:new Set(["Preview","Buy","Sell"]),Run:(e,...r)=>{Shop2Vars.DisplayDropdown?DrawButton(...r,"All versions","Gray",void 0,void 0,!0):t.MBS_ShowAllVersions?DrawButton(...r,"All versions","Cyan"):DrawButton(...r,"All versions","White")},Click:()=>{t.MBS_ShowAllVersions||(delete Shop2Vars.Filters.MBS_VersionFilter,Shop2.ApplyItemFilters())}},Rd.hookFunction("Shop2Load",0,((e,t)=>{0===Shop2InitVars.Items.length&&(Shop2InitVars.Items=Shop2.ParseAssets(Asset.filter((e=>e.Group.Name===e.DynamicGroupName&&(yg[`${e.Group.Name}${e.Name}`]||(Shop2Consts.BuyGroups[e.BuyGroup]?.Value??e.Value)>0)&&!ShopHideGenderedAsset(e))).sort(((e,t)=>e.Group.Description.localeCompare(t.Group.Description)||e.Description.localeCompare(t.Description))))),t(e)})),Rd.hookFunction("MainHallClick",0,((e,t)=>{if(null==MainHallStartEventTimer&&null==MainHallNextEventTimer&&MouseIn(1665,900,90,90))return Shop2Vars.Mode="Preview",Shop2Vars.Filters.MBS_VersionFilter=e=>yg[`${e.Asset.Group.Name}${e.Asset.Name}`]?["Buy","Sell","Preview"]:[],Shop2.Init(void 0,["Room","MainHall"]),void(ServerBeep={Message:'The MBS "Show new items" button will be removed in R103; use the Club Shop or /shop chat command instead',Timer:CommonTime()+1e4});t(e)}))}));class Sg extends Vd{get time(){return CurrentTime-r(this,vg,"f")}constructor(e){super(e),this.screen=Sg.screen,vg.set(this,void 0),n(this,vg,CurrentTime,"f"),this.buttons=[{name:"Confirm",coords:[300,720,200,80],draw:(...e)=>{this.time<1e4?DrawButton(...e,`Confirm (${10-Math.floor(this.time/1e3)})`,"#ddd",void 0,void 0,!0):DrawButton(...e,"Confirm","White")},click:()=>!(this.time<1e4)&&(delete Player.ExtensionSettings.MBS,void 0!==Player.OnlineSharedSettings&&(delete Player.OnlineSharedSettings.MBSVersion,delete Player.OnlineSharedSettings.MBS,Player.OnlineSharedSettings.WheelFortune=kp),WheelFortuneOption=WheelFortuneOption.filter((e=>!0!==e.Custom)),WheelFortuneDefault=kp,Player.Crafting=Player.Crafting?.slice(0,Ep),Player.MBSSettings=Object.seal({Version:t,CraftingCache:"",FortuneWheelItemSets:Object.seal(Array(Mg).fill(null)),FortuneWheelCommands:Object.seal(Array(Mg).fill(null)),LockedWhenRestrained:!1,RollWhenRestrained:!0,FortuneWheelPresets:Object.seal(Array(xg).fill(null))}),ServerAccountUpdate.QueueData({ExtensionSettings:Player.ExtensionSettings,OnlineSharedSettings:Player.OnlineSharedSettings},!0),ld.log("Settings successfully reset"),jp(),this.exit(),!0)},{name:"Exit",coords:[1520,720,200,80],draw:(...e)=>DrawButton(...e,"Cancel","White"),click:()=>(this.exit(),!0)}]}run(){DrawText("- Permanent reset of ALL MBS data (settings, wheel outfits, extra crafting items, etc) -",1e3,125,"Black"),DrawText("- Warning -",1e3,225,"Black","Black"),DrawText("If you confirm, all MBS data (including settings, overrides, and current states) will be permanently reset!",1e3,325,"Black"),DrawText("You will be able to continue using MBS, but all of your configuration will be reset to default!",1e3,550,"Gray"),DrawText("This action cannot be undone!",1e3,625,"Red","Black"),this.buttons.forEach((({coords:e,draw:t})=>t(...e)))}click(e){this.buttons.some((({coords:t,click:r})=>!!MouseIn(...t)&&r(e)))}exit(){this.exitScreens(!1)}}vg=new WeakMap,Sg.background="Sheet",Sg.screen="MBS_ResetScreen";class bg extends qd{constructor(){super(null,"Character","Preference",{Run:PreferenceRun,Click:PreferenceClick,Exit:PreferenceExit,Load:()=>CommonSetScreen("Character","Preference")}),this.screen=bg.screen,this.character=Player}}bg.screen="Preference";class Cg extends Vd{constructor(e){super(e),this.screen=Cg.screen,this.character=Player;const r=125;this.elements={header:{coords:[500,125,0,0],run:(e,r)=>DrawText(`- Maid's Bondage Scripts ${t} -`,e,r,"Black")},previewCharacter:{coords:[50,50,0,0],run:(e,t)=>DrawCharacter(this.character,e,t,.9)},exit:{coords:[1815,75,90,90],run:(...e)=>DrawButton(...e,"","White","Icons/Exit.png","Exit"),click:()=>this.exit()},reset:{coords:[1500,520,400,80],run:(e,t,r,n)=>{DrawButton(e,t,r,n,"","#ffc9c9","","Clear all MBS data"),DrawImageResize("Icons/ServiceBell.png",e+10,t+10,n-20,n-20),DrawTextFit("Reset MBS",e+n,t+n/2,r-n,"Black")},click:()=>{const e=new Sg(this);this.children.set(e.screen,e),e.load()}},import:{coords:[1500,620,190,80],run:(e,t,r,n)=>{MainCanvas.textAlign="center",DrawButton(e,t,r,n,"Import","White","","Import MBS settings"),MainCanvas.textAlign="left"},click:()=>{const e=prompt("Please paste MBS settings.\nImporting settings will overwrite existing settings. Are you sure?");if(!e)return;const t=function(e){ld.log("Importing new MBS settings");let t=null,r=null;try{t=JSON.parse(LZString.decompressFromBase64(e.trim())||"{}")}catch(e){r=e}if(r||null===t||"object"!=typeof t||Cd(t))return ld.error("Aborting, failed to parse corrupted MBS settings",r),{status:zp.ERROR,ok:!1};if(0===Object.keys(t).length)return ld.error("Aborting, detected empty or corrupted MBS settings"),{status:zp.EMPTY_SETTINGS,ok:!1};const n=Wp(t,!1);return n.ok?(Gp([Ap.SETTINGS,Ap.SHARED],!0),jp(),{status:zp.OK,...n}):{status:zp.WARN,...n}}(e);switch(t.status){case zp.OK:return ld.log("Settings successfully updated"),alert("Settings successfully updated!");case zp.ERROR:return alert("ERROR: Detected corrupted MBS settings.\nNo changes were made.");case zp.EMPTY_SETTINGS:return alert("ERROR: Detected empty or corrupted MBS settings.\nNo changes were made.");case zp.WARN:confirm("WARNING: MBS successfully parsed the settings but found one or more invalid fields; please check the browser console for more details.\nAre you sure you want to continue?")&&(Player.MBSSettings=t.settings,Gp([Ap.SETTINGS,Ap.SHARED],!0),jp(),ld.log("Settings successfully updated"),alert("Settings successfully updated!"))}}},export:{coords:[1710,620,190,80],run:(e,t,r,n)=>{MainCanvas.textAlign="center",DrawButton(e,t,r,n,"Export","White","","Export MBS settings"),MainCanvas.textAlign="left"},click:()=>{const e=LZString.compressToBase64(JSON.stringify(Player.MBSSettings));navigator.clipboard.writeText(e),alert("MBS settings copied to clipboard.")}},changelog:{coords:[1500,720,400,80],run:(e,t,r,n)=>{DrawButton(e,t,r,n,"","White","","Open the MBS changelog"),DrawImageResize("Icons/Changelog.png",e+10,t+10,n-20,n-20),DrawTextFit("Latest Changes",e+n,t+n/2,r-n,"Black")},click:()=>{open(Hp(),"_blank")}},newAssets:{coords:[500,172,90,90],run:(e,t,n,o)=>{DrawButton(e,t,n,o,"","White","Icons/Changelog.png"),DrawText(`MBS: Show new R${mg} items`,e+r,t+o/2,"Black")},click:()=>{const e=ServerPlayerIsInChatRoom()?ChatRoomData?.Background:void 0,t=ServerPlayerIsInChatRoom()?["Online","ChatRoom"]:["Character","Preference"];this.exitScreens(!0),PreferenceExit(),Shop2Vars.Mode="Preview",Shop2Vars.Filters.MBS_VersionFilter=e=>yg[`${e.Asset.Group.Name}${e.Asset.Name}`]?["Buy","Sell","Preview"]:[],Shop2.Init(e,t),ServerBeep={Message:'The MBS "Show new items" button will be removed in R103; use the Club Shop or /shop chat command instead',Timer:CommonTime()+1e4}}},wheelConfig:{coords:[500,282,90,90],run:(e,t,n,o)=>{DrawButton(e,t,n,o,"","White","Icons/Crafting.png","Configure Wheel of Fortune"),DrawText("Configure the Wheel of Fortune",e+r,t+o/2,"Black")},click:()=>{const e={FortuneWheelItemSets:op(this.character,"FortuneWheelItemSets","item sets"),FortuneWheelCommands:op(this.character,"FortuneWheelCommands","commands")},t=new ip(this,e,this.character);this.children.set(t.screen,t),t.load()}},rollWhenRestrained:{coords:[500,394,64,64],run:(e,t,n,o)=>{const i=this.character.MBSSettings.LockedWhenRestrained&&this.character.IsRestrained();DrawCheckbox(e,t,n,o,"",this.character.MBSSettings.RollWhenRestrained,i),DrawText("Allow wheel spinning while restrainted",e+r,t+o/2,"Black")},click:()=>{this.character.MBSSettings.LockedWhenRestrained&&this.character.IsRestrained()||(this.character.MBSSettings.RollWhenRestrained=!this.character.MBSSettings.RollWhenRestrained,Gp([Ap.SETTINGS]))}},lockedWhenRestrained:{coords:[500,470,64,64],run:(e,t,n,o)=>{const i=this.character.MBSSettings.LockedWhenRestrained&&this.character.IsRestrained();DrawCheckbox(e,t,n,o,"",this.character.MBSSettings.LockedWhenRestrained,i),DrawText("Lock MBS settings while restrained",e+r,t+o/2,"Black")},click:()=>{this.character.MBSSettings.LockedWhenRestrained&&this.character.IsRestrained()||(this.character.MBSSettings.LockedWhenRestrained=!this.character.MBSSettings.LockedWhenRestrained,Gp([Ap.SETTINGS]))}}}}click(e){return Object.values(this.elements).some((t=>!(!t.click||!MouseIn(...t.coords))&&(t.click(e),!0)))}run(){MainCanvas.textAlign="left",Object.values(this.elements).forEach((e=>e.run(...e.coords))),MainCanvas.textAlign="center"}exit(){this.exitScreens(!1)}}let wg;var Bg,kg,Pg;Cg.screen="MBSPreferenceScreen",pd(Og).then((()=>{Rd.hookFunction("PreferenceLoad",0,((e,t)=>{t(e),null!=TextScreenCache&&(TextScreenCache.cache[`Homepage${Cg.screen}`]="MBS Settings");const r=new Image;r.addEventListener("error",(function(){DrawGetImageOnError(r,!1)})),r.src="Icons/Maid.png",DrawCacheImage.set(`Icons/${Cg.screen}.png`,r)})),Rd.hookFunction("ServerPlayerIsInChatRoom",0,((e,t)=>CurrentScreen==Cg.screen&&"ChatRoom"==InformationSheetPreviousScreen||t(e))),Rd.hookFunction("PreferenceClick",0,((e,t)=>{const r=PreferenceSubscreen;if(t(e),!r&&PreferenceSubscreen===Cg.screen){PreferenceExit();const e=new Cg(wg);return wg.children.set(e.screen,e),e.load()}})),PreferenceSubscreenList.push(Cg.screen),wg=new bg}));const Mg=32,xg=8,_g=Object.freeze(["Blue","Gold","Gray","Green","Orange","Purple","Red","Yellow"]);function Ig(e){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "character" type: '+typeof e);if(!e.IsSimple()&&!e.IsPlayer())throw new Error("Expected a simple or player character")}function Eg(e){if(!(e.OnlineSharedSettings?.BlockBodyCosplay??!0))return!0;const t=gd.getRuleState("alt_allow_changing_appearance");return!(null===t||!e.IsPlayer())&&(t.inEffect&&t.isEnforced&&t.customData.minimumRole>3)}function Fg(e){if("string"!=typeof e)throw new TypeError('Invalid "IDs" type: '+typeof e);let t="";for(const r of WheelFortuneOption)e.includes(r.ID)&&(t+=r.ID);return t}function Og(e=!0){return"object"==typeof MainCanvas&&(!e||GameVersionFormat.test(GameVersion))}function Lg(){return Og()&&void 0!==Player.OnlineSharedSettings}function $g(){return Lg()&&void 0!==Player.MBSSettings}const Ag=Object.freeze({"PSO Bondage":0,Mummification:1,"Bondage Maid":2,Petrification:3});class Hg{constructor(e,t){this.name=null,this.mbsList=e,this.weight=Number.isInteger(t)?CommonClamp(t,1,9):1}reset(){this.name=null,this.weight=1}isValid(e=null){return null!==this.name&&this.mbsList.every(((t,r)=>r===e||t?.name!==this.name))}toString(){return md(typeof this,this.toJSON())}}class Tg extends Hg{get stripLevel(){return this.stripIter.value}set stripLevel(e){const t=this.stripIter.list.indexOf(e);this.stripIter.setPosition(t)}get equipLevel(){return this.equipIter.value}set equipLevel(e){const t=this.equipIter.list.indexOf(e);this.equipIter.setPosition(t)}constructor(e,t){super(e,t),this.itemList=null,this.flags=Object.freeze(lp.map((e=>Object.seal({...e})))),this.outfitCache=null,this.stripIter=new yd([Id.NONE,Id.CLOTHES,Id.UNDERWEAR,Id.COSPLAY],Id.UNDERWEAR),this.equipIter=new yd([Id.NONE,Id.CLOTHES,Id.UNDERWEAR,Id.COSPLAY],Id.UNDERWEAR)}reset(){super.reset(),this.itemList=null,this.outfitCache=null,this.stripLevel=Id.UNDERWEAR,this.equipLevel=Id.UNDERWEAR,lp.forEach(((e,t)=>Object.assign(this.flags[t],e)))}readSettings(e){if(!(e instanceof Gg))throw new TypeError('Invalid "ItemSet" type: '+typeof e);this.name=e.name,this.itemList=e.itemList,this.stripLevel=e.stripLevel,this.equipLevel=e.equipLevel,this.outfitCache=null,this.weight=e.weight,e.flags.forEach(((e,t)=>Object.assign(this.flags[t],e)))}writeSettings(e=null){if(null===this.name||null===this.itemList)throw new Error('Cannot create an ItemSet while "name" or "itemList" is null');return new Gg(this.name,this.itemList,this.mbsList,this.stripLevel,this.equipLevel,this.flags,!0,e,this.weight)}loadFromBase64(){if(null===this.outfitCache)return!1;let e,t;try{e=JSON.parse(LZString.decompressFromBase64(this.outfitCache.trim())),t=function(e){if(!Cd(e)){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "items" type: '+typeof e);e=[e]}const t=[],r=new Map,n=new Set;return e.forEach(((e,o)=>{let i=null;try{i=AssetGet("Female3DCG",e.Group,e.Name);const r=Gd(i,e);!n.has(e.Group)&&null!=i&&(i.Group.IsItem()||i.Group.IsAppearance()&&i.Group.AllowNone)&&(n.add(e.Group),t.push(r))}catch(e){let t=`${i?.Group?.Name}${i?.Name}`;t.includes("undefined")&&(t=`Item ${o}`),r.set(t,e)}})),0!==r.size&&ld.log(`Failed to parse ${r.size} of the provided items`,r),t}(e)}catch(e){return ld.warn("Failed to parse outfit code:",e),!1}return 0!==t.length&&(this.itemList=Object.freeze(function(e,t=Ed){const r=Ld(e,t);return Sf(e,(e=>r.get(e.Group)?.priority??1/0))}(t)),!0)}isValid(e=null){return super.isValid(e)&&null!==this.itemList&&this.flags.some((e=>e.enabled))}toJSON(){return{name:this.name,itemList:this.itemList,stripLevel:this.stripLevel,equipLevel:this.equipLevel,flags:this.flags,outfitCache:this.outfitCache}}}class Ng extends Hg{readSettings(e){if(!(e instanceof jg))throw new TypeError('Invalid "command" type: '+typeof e);this.name=e.name,this.weight=e.weight}writeSettings(){if(null===this.name)throw new Error('Cannot create a Command while "name" is null');return new jg(this.name,this.mbsList,this.weight)}toJSON(){return{name:this.name}}}class Dg{get children(){return r(this,Bg,"f")}get index(){return this.mbsList.findIndex((e=>e===this))}constructor(e,t,r,n){Bg.set(this,null),this.name=e,this.custom=t,this.mbsList=r,this.weight=n}static validate(e){throw new Error("Trying to call an abstract method")}static fromObject(...e){throw new Error("Trying to call an abstract method")}register(){n(this,Bg,this.toOptions(),"f")}unregister(){n(this,Bg,null,"f")}toString(){return md(typeof this,this.toJSON())}}Bg=new WeakMap;class Wg extends Dg{constructor(){super(...arguments),kg.add(this)}register(e=!0){super.register();let t=r(this,kg,"m",Pg).call(this);for(const e of this.children){const r=WheelFortuneOption.findIndex((t=>t.ID===e.ID));-1!==r?(WheelFortuneOption[r]=e,e.Default&&!WheelFortuneDefault.includes(e.ID)&&(WheelFortuneDefault+=e.ID)):(WheelFortuneOption.splice(t,0,e),e.Default&&(WheelFortuneDefault+=e.ID)),t+=1}e&&Gp([Ap.SHARED])}unregister(e=!0){const t=this.children?.map((e=>e.ID))??[];super.unregister(),WheelFortuneOption=WheelFortuneOption.filter((e=>!t.includes(e.ID))),WheelFortuneDefault=Array.from(WheelFortuneDefault).filter((e=>!t.includes(e))).join(""),e&&Gp([Ap.SHARED])}}kg=new WeakSet,Pg=function(){if(this.children?.length){const e=this.children[0].ID,t=WheelFortuneOption.findIndex((t=>t.ID>=e));return-1===t?WheelFortuneOption.length:t}return WheelFortuneOption.length};class Gg extends Wg{constructor(e,t,r,n,o,i,a,s,l){const u=Gg.validate({name:e,itemList:t,mbsList:r,stripLevel:n,equipLevel:o,flags:i,custom:a,preRunCallback:s,weight:l});super(u.name,u.custom,u.mbsList,u.weight),this.itemList=u.itemList,this.stripLevel=u.stripLevel,this.equipLevel=u.equipLevel,this.flags=u.flags,this.preRunCallback=u.preRunCallback}static validate(e){if("string"!=typeof e.name)throw new TypeError('Invalid "name" type: '+typeof e.name);if(!Cd(e.itemList))throw new TypeError('Invalid "itemList" type: '+typeof e.itemList);{const t=[],r=[];for(let n of e.itemList){const e=AssetGet("Female3DCG",n.Group,n.Name);null!=e?(e.Group.IsItem()||e.Group.IsAppearance()&&e.Group.AllowNone)&&(n.TypeRecord||void 0===n.Type||(n=Object.freeze({...Xu(n,"Type"),TypeRecord:ExtendedItemTypeToRecord(e,n.Type)})),t.push(n)):r.push(`${n.Group}:${n.Name}`)}e.itemList=Object.freeze(t),0!==r.length&&ld.warn(`Found ${r.length} items in wheel of fortune item set "${this.name}": ${r}`)}if(!Cd(e.mbsList))throw new TypeError('Invalid "mbsList" type: '+typeof e.mbsList);if(kd(Object.values(Id),e.stripLevel)||(e.stripLevel=Id.UNDERWEAR),kd(Object.values(Id),e.equipLevel)||(e.stripLevel=Id.UNDERWEAR),Cd(e.flags)){let t;if(e.flags.every((e=>"string"==typeof e))){t=function(e){return lp.map(((t,r)=>{const n={...t};return n.enabled=e.includes(sp[r]),n}))}(e.flags)}else t=function(e){return lp.map(((t,r)=>{const n=e[r];if(null===n||"object"!=typeof n||n.type!==t.type)return{...t};const o="boolean"==typeof n.enabled?n.enabled:t.enabled;switch(n.type){case"TimerPasswordPadlock":return Number.isInteger(n.time)&&n.time>=1&&n.time<=86400?{type:n.type,time:n.time,enabled:o}:{...t};case"ExclusivePadlock":case"HighSecurityPadlock":case null:return{type:n.type,enabled:o};default:return{...t}}}))}(e.flags);t.every((e=>!e.enabled))&&(t[0].enabled=!0),e.flags=Object.freeze(t.map((e=>Object.freeze(e))))}else e.flags=lp;return"boolean"!=typeof e.custom&&(e.custom=!0),null!==e.preRunCallback&&"function"!=typeof e.preRunCallback&&(e.preRunCallback=null),Number.isInteger(e.weight)?e.weight=CommonClamp(e.weight,1,9):e.weight=1,e}static fromObject(e,t){const r=[t.name,t.itemList,e,t.stripLevel,t.equipLevel,t.flags,t.custom,t.preRunCallback,t.weight];return new Gg(...r)}scriptFactory(e=null){const t=this.itemList.map((({Name:e,Group:t})=>AssetGet(Player.AssetFamily,t,e)));return r=>{r=r??Player;const n=Fd(this.equipLevel,r),o=this.itemList.filter(((e,r)=>{const o=t[r];return null!=o&&("Appearance"!==o.Group.Category||n(o))}));Hd(this.name,o,this.stripLevel,e,this.preRunCallback,r??Player)}}getIDs(){const e=[];for(const[t,r]of this.flags.entries())r.enabled&&e.push(t);let t;if(this.custom){if(t=256*(2+Math.floor(this.index/16))+16*this.index,t<0)throw new Error(`Item set "${this.name}" absent from currently selected fortune wheel sets`)}else if(t=256+16*Ag[this.name],Number.isNaN(t))throw new Error(`Unknown default item set "${this.name}"`);return vd(t,e)}toOptions(e=_g){const t=this.flags.filter((e=>e.enabled)),r=this.getIDs();return t.map(((t,n)=>{const o=null===t.type?this.name:`${this.name}: ${dp(t)}`;let i=!0;switch(t.type){case"HighSecurityPadlock":case null:i=!1;break;case"TimerPasswordPadlock":i=4!==n}return{ID:r[n],Color:hd(e),Script:this.scriptFactory(((...e)=>function(e,t,r){const n=e.type;switch(n){case"TimerPasswordPadlock":up(t,e.time,r);break;case"ExclusivePadlock":fp(t,"ExclusivePadlock",r);break;case"HighSecurityPadlock":InventoryDoesItemAllowLock(t)&&t.Craft&&(t.Craft.Property="Puzzling"),cp(t,r);break;case null:break;default:throw new Error(`Unknown flag type: ${n}`,e)}}(t,...e))),Description:o,Default:i,Custom:this.custom,Parent:this,Flag:t,Weight:this.weight}}))}toJSON(){return{name:this.name,itemList:this.itemList,stripLevel:this.stripLevel,equipLevel:this.equipLevel,flags:this.flags,custom:this.custom,preRunCallback:this.preRunCallback,weight:this.weight}}}class jg extends Wg{constructor(e,t,r){const n=jg.validate({name:e,mbsList:t,weight:r});super(n.name,!0,n.mbsList,n.weight)}static validate(e){if("string"!=typeof e.name)throw new TypeError('Invalid "name" type: '+typeof e.name);if(!Array.isArray(e.mbsList))throw new TypeError('Invalid "mbsList" type: '+typeof e.mbsList);return Number.isInteger(e.weight)?e.weight=CommonClamp(e.weight,1,9):e.weight=1,e}static fromObject(e,t){const r=[t.name,e,t.weight];return new jg(...r)}toOptions(e=_g){const[t]=this.getIDs();return[{ID:t,Color:hd(e),Description:this.name,Default:!0,Custom:this.custom,Parent:this,Script:void 0,Flag:void 0,Weight:this.weight}]}getIDs(){const e=256*(3+Math.floor(this.index/16))+this.index;return[String.fromCharCode(e)]}toJSON(){return{name:this.name,weight:this.weight}}}function zg(e,t,r,n,o="",i){let a=ElementCreateInput(`MBS${e}`,"text",o,i);return a?(a.setAttribute("placeholder",r),a.addEventListener("input",CommonLimitFunction((r=>{const n=r.target?.value||null;null==i&&(i=1/0),(null===n||n.length<=i)&&(t[e]=n)})))):a=document.getElementById(`MBS${e}`),ElementPosition(`MBS${e}`,...n),a}function Vg(e,t,r,n,o=-1/0,i=1/0){let a=ElementCreateInput(`MBS${e}`,"number",n.toString());return a?(a.setAttribute("max",i.toString()),a.setAttribute("min",o.toString()),a.addEventListener("input",CommonLimitFunction((r=>{const n=Number.parseInt(r.target?.value,10);!Number.isNaN(n)&&n>=o&&n<=i&&(t[e]=n)})))):a=document.getElementById(`MBS${e}`),ElementPosition(`MBS${e}`,...r),a}function qg(e,t,r,n,o,i=null){const a={x0:i?.x0??0,y0:i?.y0??0,x1:i?.x1??2e3,y1:i?.y1??1e3};MainCanvas.save();try{const[i,...s]=o,l=n+48*s.length+(s.length>0?16:0);e=Do(e,a.x0,a.x1-r),t=Do(t,a.y0,a.y1-l),DrawRect(e,t,r,l,"White"),DrawEmptyRect(e,t,r,l,"Black",2),MainCanvas.beginPath(),MainCanvas.moveTo(e,t+n),MainCanvas.lineTo(e+r,t+n),MainCanvas.stroke(),MainCanvas.textBaseline="middle",DrawTextFit(i,e+r/2,t+n/2,r-32,"black"),MainCanvas.textAlign="left",MainCanvas.font='30px "Arial", sans-serif',s.forEach(((r,o)=>DrawText(r,e+16,t+n+8+24+48*o,"black")))}finally{MainCanvas.restore()}}let Ug=null;function Kg(){return null===Ug&&(Ug=CharacterLoadSimple("MBSAPI")),Ug}var Jg=Object.freeze({__proto__:null,getAll:function(){if(!$g())return ld.error("MBS not fully loaded yet"),{};const e=Player.MBSSettings.FortuneWheelItemSets,t={};for(const[r,n]of CommonEnumerate(e))null!==n&&(t[n.name]={name:n.name,index:r,items:jd(n.itemList,Kg())});return t},getByIndex:function(e){if("number"!=typeof e)throw new TypeError('Invalid "index" type: '+typeof e);if(!$g())return void ld.error("MBS not fully loaded yet");const t=Player.MBSSettings.FortuneWheelItemSets[e];return null==t?void 0:{name:t.name,index:e,items:jd(t.itemList,Kg())}},getByName:function(e){if("string"!=typeof e)throw new TypeError('Invalid "name" type: '+typeof e);if(!$g())return void ld.error("MBS not fully loaded yet");let t=-1;const r=Player.MBSSettings.FortuneWheelItemSets.find(((r,n)=>{const o=r?.name===e;return o&&(t=n),o}));return null==r?void 0:{name:e,index:t,items:jd(r.itemList,Kg())}},getIndices:function(){return $g()?Player.MBSSettings.FortuneWheelItemSets.filter((e=>null!==e)).map(((e,t)=>t)):(ld.error("MBS not fully loaded yet"),[])},getNames:function(){return $g()?Player.MBSSettings.FortuneWheelItemSets.filter((e=>null!==e)).map((e=>e.name)):(ld.error("MBS not fully loaded yet"),[])}});const Zg=Object.freeze({major:1,minor:2}),Yg=function(){return $g()?JSON.stringify({log:ld,settings:Player.MBSSettings},void 0,4):JSON.stringify({log:ld,settings:"ERROR: MBS not fully loaded yet"},void 0,4)};pd(Og).then((()=>{"undefined"!=typeof FUSAM&&"function"==typeof FUSAM.registerDebugMethod&&FUSAM.registerDebugMethod("mbs",Yg)}));const Xg="raises",Qg="passes";function em(e,t,r){if(!t)throw void 0===r?new Error(`${e}`):new Error(`${e}: ${r}`)}function tm(e,t,r){try{t()}catch(t){const n=t;if(n?.message!==r)throw new Error(`${e}: Invalid error message\nExpected error: "${r}"\nObserved error: "${n?.message}"`);return}throw new Error(`${e}: Failed to raise an error`)}function rm(e,t){try{return t()}catch(t){throw new Error(`${e}: Unexpected error message: ${t}`,{cause:t})}}function nm(e,t,r,n){if(n=n??lm,!Ru(t,r))throw new Error(`${e}: Passed objects not equal:\nObserved: ${n(t)}\nExpected: ${n(r)}`)}function om(e,t,r){if(!t.includes(r))throw new Error(`${e}: Passed array ${t} does not contain element ${r?.toString()??r}`)}function im(e,t,r){if(typeof t!==r)throw new Error(`${e}: Invalid object type "${typeof t}", expected "${r}"`)}function am(e,t,r){if(t.length!==r)throw new Error(`${e}: Invalid object length ${t.length}, expected ${r}`)}function sm(e,t){switch(typeof t){case"undefined":return"__UNDEFINED__";case"function":return"__FUNCTION__";case"symbol":return"__SYMBOL__";default:return t}}function lm(e){return JSON.stringify(e,sm,1)}var um=Object.freeze({__proto__:null,test_LoopIterator:function(){const e="test_LoopIterator";[{args:[void 0],excMessage:'Invalid "iterable" type: undefined'},{args:[[]],excMessage:'Passed "iterable" must contain at least one element'},{args:[[1],.5],excMessage:'"index" must be an integer: 0.5'},{args:[[0,1],3],excMessage:'"index" must fall in the [0, 1] interval: 3'}].forEach((({args:t,excMessage:r},n)=>{tm(`${e}:constructor:${Xg}:${n}`,(()=>new yd(...t)),r)}));const t=new yd([0,1,2,3],0);let r;nm(`${e}:list:${Qg}:0`,t.list,[0,1,2,3]),nm(`${e}:index:${Qg}:0`,t.index,0),nm(`${e}:value:${Qg}:0`,t.index,0),im(`${e}:[Symbol.iterator]:${Qg}:0`,t[Symbol.iterator],"function"),r=rm(`${e}:next:${Qg}:0`,(()=>t.next(!1))),nm(`${e}:next:${Qg}:0`,r,1),nm(`${e}:next:${Qg}:0`,t.index,0),r=rm(`${e}:next:${Qg}:0`,(()=>t.next())),nm(`${e}:next:${Qg}:0`,r,1),nm(`${e}:next:${Qg}:0`,t.index,1),tm(`${e}:setPosition:${Xg}:0`,(()=>t.setPosition(10)),'"index" must fall in the [0, 3] interval: 10'),rm(`${e}:setPosition:${Qg}:0`,(()=>t.setPosition(0))),nm(`${e}:setPosition:${Qg}:0`,t.index,0),r=rm(`${e}:previous:${Qg}:0`,(()=>t.previous(!1))),nm(`${e}:previous:${Qg}:0`,r,3),nm(`${e}:previous:${Qg}:0`,t.index,0),r=rm(`${e}:previous:${Qg}:0`,(()=>t.previous())),nm(`${e}:previous:${Qg}:0`,r,3),nm(`${e}:previous:${Qg}:0`,t.index,3),r=rm(`${e}:toString:${Qg}:0`,(()=>t.toString())),im(`${e}:toString:${Qg}:0`,r,"string"),r=rm(`${e}:toJSON:${Qg}:0`,(()=>t.toJSON())),nm(`${e}:toJSON:${Qg}:0`,t.toJSON(),{list:[0,1,2,3],index:3})},test_MBS_VERSION:function(){im(`test_MBS_VERSION:${Qg}:0`,t,"string")},test_Version:function(){const e="test_Version";[{args:["bob",0,0,!1],excMessage:'Invalid "major" type: string'},{args:[0,"bob",0,!1],excMessage:'Invalid "minor" type: string'},{args:[0,0,"bob",!1],excMessage:'Invalid "micro" type: string'},{args:[0,0,0,"bob"],excMessage:'Invalid "beta" type: string'}].forEach((({args:t,excMessage:r},n)=>{tm(`${e}:constructor:${Xg}:${n}`,(()=>new bd(...t)),r)}));const t=new bd(1,0,5),r=new bd(2,3,1),n=new bd(0,99,5,!0);nm(`${e}:major:${Qg}:0`,t.major,1),nm(`${e}:minor:${Qg}:0`,t.minor,0),nm(`${e}:micro:${Qg}:0`,t.micro,5),nm(`${e}:beta:${Qg}:0`,t.beta,!1),em(`${e}:equal:${Qg}:0`,!t.equal(null)),em(`${e}:equal:${Qg}:1`,t.equal(t)),em(`${e}:equal:${Qg}:2`,!t.equal(r)),em(`${e}:equal:${Qg}:3`,!t.equal(n)),em(`${e}:greater:${Qg}:0`,!t.greater(null)),em(`${e}:greater:${Qg}:1`,!t.greater(t)),em(`${e}:greater:${Qg}:2`,!t.greater(r)),em(`${e}:greater:${Qg}:3`,t.greater(n)),em(`${e}:lesser:${Qg}:0`,!t.lesser(null)),em(`${e}:lesser:${Qg}:1`,!t.lesser(t)),em(`${e}:lesser:${Qg}:2`,t.lesser(r)),em(`${e}:lesser:${Qg}:3`,!t.lesser(n)),em(`${e}:greaterOrEqual:${Qg}:0`,!t.greaterOrEqual(null)),em(`${e}:greaterOrEqual:${Qg}:1`,t.greaterOrEqual(t)),em(`${e}:greaterOrEqual:${Qg}:2`,!t.greaterOrEqual(r)),em(`${e}:greaterOrEqual:${Qg}:3`,t.greaterOrEqual(n)),em(`${e}:lesserOrEqual:${Qg}:0`,!t.lesserOrEqual(null)),em(`${e}:lesserOrEqual:${Qg}:1`,t.lesserOrEqual(t)),em(`${e}:lesserOrEqual:${Qg}:2`,t.lesserOrEqual(r)),em(`${e}:lesserOrEqual:${Qg}:3`,!t.lesserOrEqual(n));let o=rm(`${e}:fromVersion:${Qg}:0`,(()=>bd.fromVersion("1.0.5")));nm(`${e}:fromVersion:${Qg}:0`,o,t),tm(`${e}:fromVersion:${Xg}:0`,(()=>bd.fromVersion(void 0)),'Invalid "version": undefined'),o=rm(`${e}:fromVersion:${Qg}:0`,(()=>bd.fromBCVersion("R109Beta3"))),nm(`${e}:fromVersion:${Qg}:0`,o,new bd(109,0,0,!0)),tm(`${e}:fromVersion:${Xg}:0`,(()=>bd.fromVersion(void 0)),'Invalid "version": undefined'),o=rm(`${e}:toString:${Qg}:0`,(()=>t.toString())),im(`${e}:toString:${Qg}:0`,o,"string"),o=rm(`${e}:toJSON:${Qg}:0`,(()=>t.toJSON())),nm(`${e}:toJSON:${Qg}:0`,o,{major:1,minor:0,micro:5,beta:!1})},test_generateIDs:function(){const e="test_generateIDs";[{args:[0,void 0],excMessage:'Invalid "indices" type: undefined'},{args:[65535,[5]],excMessage:'"stop" must fall in the [65536, 65535] interval: 65541'}].forEach((({args:t,excMessage:r},n)=>{tm(`${e}:${Xg}:${n}`,(()=>vd(...t)),r)})),[{args:[80,[0,4,6]],output:["P","T","V"]},{args:[1024,[0,4,1]],output:["Ѐ","Є","Ё"]},{args:[0,[]],output:[]}].forEach((({args:t,output:r},n)=>{const o=rm(`${e}:${Qg}:${n}`,(()=>vd(...t)));nm(`${e}:${Qg}:${n}`,o,r)}))},test_getRandomPassword:function(){const e="test_getRandomPassword";[{args:[void 0],excMessage:'Invalid "n" type: undefined'}].forEach((({args:t,excMessage:r},n)=>{tm(`${e}:${Xg}:${n}`,(()=>dd(...t)),r)})),rf(0,9).forEach((t=>{const r=rm(`${e}:${Qg}:${t}`,(()=>dd(t)));im(`${e}:${Qg}:${t}`,r,"string"),am(`${e}:${Qg}:${t}`,r,t)}))},test_isIterable:function(){const e="test_isIterable";[{args:[null],output:!1},{args:[1],output:!1},{args:[[1]],output:!0},{args:[new Set],output:!0}].forEach((({args:t,output:r},n)=>{const o=rm(`${e}:${Qg}:${n}`,(()=>Sd(...t)));nm(`${e}:${Qg}:${n}`,o,r)}))},test_padArray:function(){const e="test_padArray";[{args:[[],.5,null],excMessage:'"n" must be an integer: 0.5'},{args:[void 0,5,null],excMessage:'Invalid "list" type: undefined'}].forEach((({args:t,excMessage:r},n)=>{tm(`${e}:${Xg}:${n}`,(()=>cd(...t)),r)})),[{args:[["a","b","c"],5,"test"],output:["a","b","c","test","test"]},{args:[["a","b","c"],2,"test"],output:["a","b","c"]}].forEach((({args:t,output:r},n)=>{const o=rm(`${e}:${Qg}:${n}`,(()=>cd(...t)));nm(`${e}:${Qg}:${n}`,o,r)}))},test_randomElement:function(){const e="test_randomElement";[{args:[void 0],excMessage:'Invalid "list" type: undefined'},{args:[[]],excMessage:'Passed "list" must contain at least 1 item'}].forEach((({args:t,excMessage:r},n)=>{tm(`${e}:${Xg}:${n}`,(()=>hd(...t)),r)}));const{args:t}={args:[["a","b","c"]],output:void 0};rf(0,100).forEach((r=>{const n=rm(`${e}:${Qg}:${r}`,(()=>hd(...t)));om(`${e}:${Qg}:${r}`,t[0],n)}))},test_trimArray:function(){const e="test_trimArray";[{args:[[],.5],excMessage:'"n" must be an integer: 0.5'},{args:[void 0,5],excMessage:'Invalid "list" type: undefined'}].forEach((({args:t,excMessage:r},n)=>{tm(`${e}:${Xg}:${n}`,(()=>fd(...t)),r)})),[{args:[["a","b","c"],1],output:["a"]},{args:[["a","b","c"],4],output:["a","b","c"]}].forEach((({args:t,output:r},n)=>{const o=rm(`${e}:${Qg}:${n}`,(()=>fd(...t)));nm(`${e}:${Qg}:${n}`,o,r)}))},test_validateInt:function(){const e="test_validateInt";[{args:[.5,"test"],excMessage:'"test" must be an integer: 0.5'},{args:["test","test"],excMessage:'Invalid "test" type: string'},{args:[5,"test",10],excMessage:'"test" must fall in the [10, Infinity] interval: 5'},{args:[5,"test",0,3],excMessage:'"test" must fall in the [0, 3] interval: 5'}].forEach((({args:t,excMessage:r},n)=>{tm(`${e}:${Xg}:${n}`,(()=>ud(...t)),r)})),rm(`${e}:${Qg}:0`,(()=>ud(0,"test")))}});var cm=Object.freeze({__proto__:null,test_FORTUNE_WHEEL_COLORS:function(){const e="test_FORTUNE_WHEEL_COLORS";em(`${e}:${Qg}:0`,Array.isArray(_g)),em(`${e}:${Qg}:0`,_g.every((e=>"string"==typeof e)))},test_FORTUNE_WHEEL_MAX_SETS:function(){const e="test_FORTUNE_WHEEL_MAX_SETS";im(`${e}:${Qg}:0`,Mg,"number"),em(`${e}:${Qg}:0`,Number.isInteger(Mg)),em(`${e}:${Qg}:0`,Mg>=0)},test_canChangeCosplay:function(){const e="test_canChangeCosplay",t=rf(0,3).map((t=>`${e}${t}`)),r=t.map((e=>{const t=CharacterLoadSimple(e);return t.OnlineSharedSettings=t.OnlineSharedSettings??{},t}));try{r[1].OnlineSharedSettings={...r[1].OnlineSharedSettings??{},BlockBodyCosplay:!1},r[2].OnlineSharedSettings={...r[1].OnlineSharedSettings??{},BlockBodyCosplay:!0};[{args:[r[0]],output:!1},{args:[r[1]],output:!0},{args:[r[2]],output:!1}].forEach((({args:t,output:r},n)=>{const o=rm(`${e}:${Qg}:${n}`,(()=>Eg(...t)));nm(`${e}:${Qg}:${n}`,o,r)}))}finally{"R101"===GameVersion?t.forEach(CharacterDelete):r.forEach(CharacterDelete)}},test_equipHighSecLock:function(){const e="test_equipHighSecLock",t=CharacterLoadSimple(e);try{const r=AssetGet(t.AssetFamily,"ItemArms","LatexArmbinder");if(null==r)throw new Error;const n={Asset:r};rm(`${e}:${Qg}:0`,(()=>cp(n,t))),nm(`${e}:${Qg}:0`,n.Property?.MemberNumberListKeys,"")}finally{"R101"===GameVersion?CharacterDelete(e):CharacterDelete(t)}},test_equipLock:function(){const e="test_equipLock",t=rf(0,5).map((t=>`${e}-${t}`)),r=t.map(CharacterLoadSimple);try{r[4].BlockItems.push({Name:"ExclusivePadlock",Group:"ItemMisc"}),InventoryWear(r[2],"LatexArmbinder","ItemArms"),InventoryLock(r[2],r[2].Appearance.at(-1),"ExclusivePadlock");const t=AssetGet(r[0].AssetFamily,"ItemArms","LatexArmbinder"),n=AssetGet(r[0].AssetFamily,"ItemArms","NylonRope");if(null==t||null==n)throw new Error;const o={Asset:t};[{args:["bob","ExclusivePadlock",r[0]],excMessage:'Invalid "item" type: string'},{args:[o,0,r[0]],excMessage:'Invalid "lockName" type: number'},{args:[o,"bob",r[0]],excMessage:'Invalid "lockName" value: bob'},{args:[o,"ExclusivePadlock",1],excMessage:'Invalid "character" type: number'}].forEach((({args:t,excMessage:r},n)=>{tm(`${e}:${Xg}:${n}`,(()=>fp(...t)),r)}));[{args:[o,"ExclusivePadlock",r[1]],output:!0},{args:[o,"ExclusivePadlock",r[2]],output:!1},{args:[{Asset:n},"ExclusivePadlock",r[3]],output:!1},{args:[o,"ExclusivePadlock",r[4]],output:!1}].forEach((({args:t,output:r},n)=>{const o=rm(`${e}:${Qg}:${n}`,(()=>fp(...t)));nm(`${e}:${Qg}:0`,o,r)}))}finally{"R101"===GameVersion?t.forEach(CharacterDelete):r.forEach(CharacterDelete)}},test_equipTimerLock:function(){const e="test_equipTimerLock",t=CharacterLoadSimple(e);try{const r=AssetGet(t.AssetFamily,"ItemArms","LatexArmbinder");if(null==r)throw new Error;const n={Asset:r};tm(`${e}:${Xg}:0`,(()=>up(n,void 0,t)),'Invalid "seconds" type: undefined'),rm(`${e}:${Qg}:0`,(()=>up(n,99,t))),em(`${e}:${Qg}:0`,(n.Property?.RemoveTimer??1/0)<=CurrentTime+198e4),nm(`${e}:${Qg}:0`,n.Property?.RemoveItem,!0),nm(`${e}:${Qg}:0`,n.Property?.LockSet,!0),im(`${e}:${Qg}:0`,n.Property?.Password,"string")}finally{"R101"===GameVersion?CharacterDelete(e):CharacterDelete(t)}},test_sanitizeWheelFortuneIDs:function(){const e="test_sanitizeWheelFortuneIDs";tm(`${e}:${Xg}:0`,(()=>Fg(void 0)),'Invalid "IDs" type: undefined'),[{args:["ABC"],output:"ABC"},{args:["A䀁"],output:"A"}].forEach((({args:t,output:r},n)=>{const o=rm(`${e}:${Qg}:${n}`,(()=>Fg(...t)));nm(`${e}:${Qg}:${n}`,o,r)}))},test_settingsLoaded:function(){const e="test_settingsLoaded",t=rm(`${e}:${Qg}:0`,Lg);nm(`${e}:${Qg}:0`,t,!0)},test_settingsMBSLoaded:function(){const e="test_settingsMBSLoaded",t=rm(`${e}:${Qg}:0`,$g);nm(`${e}:${Qg}:0`,t,!0)}});const fm=Object.freeze({Mummification:e=>({...e,TypeRecord:void 0})});var hm=Object.freeze({__proto__:null,test_builtinMBSWheel:function(){const e="test_builtinMBSWheel",t=fn(Object.values(wp).map((e=>e.children??[]))),r=t.map((e=>e.Description)),n=r.map((e=>CharacterLoadSimple(e)));try{t.forEach((t=>{if(!(t.Parent instanceof Gg))return;const r=CharacterLoadSimple(t.Description);t.Script(r);for(let n of t.Parent.itemList){const o=InventoryGet(r,n.Group);if(void 0!==n.Equip)continue;em(`${e}:${t.Description}:${n.Group}:${n.Name}:${Qg}`,null!=o);const i=(fm[t.Parent.name]??(e=>e))(Gd(o.Asset,{...o,Group:o.Asset.Group.Name,Name:o.Asset.Name,Color:void 0===n.Color?void 0:o.Color},!1),r);null!==i&&(n={...n,ItemCallback:void 0,Property:{...i.Property,...n.Property},Equip:void 0,Craft:void 0!==n.Craft&&"HighSecurityPadlock"===t.Flag.type&&InventoryDoesItemAllowLock(o)?{...n.Craft,Property:"Puzzling"}:n.Craft},nm(`${e}:${t.Description}:${n.Group}:${n.Name}:${Qg}`,i,n))}}))}finally{"R101"===GameVersion?r.forEach(CharacterDelete):n.forEach(CharacterDelete)}}});const dm=function(){if(!$g())return ld.warn("MBS not fully loaded yet"),!1;const e={...um,...cm,...hm},t={};for(const[r,n]of wd(e))try{n()}catch(e){t[r]=e}return 0===Object.values(t).length||(ld.warn(t),!1)};pd(Og).then((()=>{const e={[`${ep.screen}Background`]:ep.background,[`${tp.screen}Background`]:tp.background,[`${ip.screen}Background`]:ip.background,[`${Cg.screen}Background`]:Cg.background,[`${Sg.screen}Background`]:Sg.background,[`${Mp.screen}Background`]:Mp.background},t=globalThis;Object.assign(t,e)}));const pm=new Set;pd(Og).then((()=>{if("R102"===GameVersion)if("undefined"==typeof CraftingAssetsPopulate){pm.add(4900);const e=Object.freeze(function(){const e={},t={};for(const r of Asset)r.Group.IsItem()&&!r.IsLock&&r.Wear&&r.Enable&&(r.CraftGroup?(t[r.CraftGroup]??=[],t[r.CraftGroup].push(r)):(e[r.Name]??=[],e[r.Name].push(r)));for(const r of Object.values(t)){const t=new Set(r.map((e=>e.Name)));for(const n of t)e[n]??=[],e[n].push(...r)}return e}()),t=Bd(Asset.filter((e=>e.IsLock)).map((e=>[e.Name,e])));Rd.hookFunction("CraftingAppliesToItem",10,(t=>{const[r,n]=t;if(r&&n){return(e[r.Item]??[]).includes(n)}return!1})),Rd.hookFunction("DialogCanUseCraftedItem",10,(r=>{const[n,o]=r;if(!n||!o)return!1;return(e[o.Item]??[]).some((e=>{if(e.OwnerOnly&&!n.IsOwnedByPlayer())return!1;if(e.LoverOnly&&!n.IsOwnedByPlayer()&&!n.IsLoverOfPlayer())return!1;if(e.FamilyOnly&&!(n.IsOwnedByPlayer()||n.IsLoverOfPlayer()||n.IsFamilyOfPlayer()))return!1;const r=t[o.Lock];if(null!=r){if(r.OwnerOnly&&!DialogCanUseOwnerLockOn(n))return!1;if(r.LoverOnly&&!DialogCanUseLoverLockOn(n))return!1;if(r.FamilyOnly&&!DialogCanUseFamilyLockOn(n))return!1}return!0}))}))}pm.size?ld.log("Initializing R103 bug fix backports",Sf(Array.from(pm))):ld.log("No R103 bug fix backports")}));const Rm=Rd.getOriginalHash,gm=t;return ld.log(`Initializing MBS version ${t}`),pd((()=>Og(!1))).then((()=>function(e){const t=bd.fromBCVersion(e),r=bd.fromBCVersion("R102");if(t.lesser(r))throw new Error(`BC ${GameVersion} detected; MBS requires version R102 or later`);ld.log(`Detected BC ${GameVersion}`)}(GameVersion))),pd(Og).then((function(){const e={};for(const[t,r]of Md){const n=Rd.getOriginalHash(t);r.has(n)||(e[t]=n)}const t=Object.values(e).length;0!==t&&ld.warn(`Found ${t} patched functions with an unknown hash`,e)})),e.API_VERSION=Zg,e.MBS_VERSION=gm,e._getFunctionHash=Rm,e._toItemBundles=jd,e._unpackSettings=Dp,e.getDebug=Yg,e.runTests=dm,e.wheelOutfits=Jg,e}({});
//# sourceMappingURL=mbs.js.map
