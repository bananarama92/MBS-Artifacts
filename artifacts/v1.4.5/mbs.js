/*!
 * MBS: Maid's Bondage Scripts
 *
 * Copyright (C) 2023-2024 Bananarama92
 *
 * This program is free software: you can redistribute it and/or modify it under the terms of
 * the GNU General Public License as published by the Free Software Foundation,
 * either version 3 of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program.
 * If not, see https://www.gnu.org/licenses/.
 */
var mbs=function(e){"use strict";const t="1.4.5";var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i={},o={};Object.defineProperty(o,"__esModule",{value:!0});o.setAttributes=void 0;function a(e,t){for(const r of Object.keys(e))r in t&&(t[r]=e[r])}o.setAttributes=function(e,t){for(const r of Object.keys(t)){if("__source"===r||"__self"===r)continue;const n=t[r];if(r.startsWith("on")){const t=r.replace(/Capture$/,""),i=r!==t,o=t.toLowerCase().substring(2);e.addEventListener(o,n,i)}else"style"===r&&"string"!=typeof n?a(n,e.style):"dangerouslySetInnerHTML"===r?e.innerHTML=n:!0===n?e.setAttribute(r,r):(n||0===n)&&e.setAttribute(r,n.toString())}};var s={};Object.defineProperty(s,"__esModule",{value:!0});s.createDomElement=s.applyChildren=void 0;function l(e,t){t instanceof Element?e.appendChild(t):"string"==typeof t||"number"==typeof t?e.appendChild(document.createTextNode(t.toString())):console.warn("Unknown type to append: ",t)}s.applyChildren=function e(t,r){for(const n of r)(n||0===n)&&(Array.isArray(n)?e(t,n):l(t,n))};s.createDomElement=function(e,t){const r=(null==t?void 0:t.is)?{is:t.is}:void 0;return(null==t?void 0:t.xmlns)?document.createElementNS(t.xmlns,e,r):document.createElement(e,r)},Object.defineProperty(i,"__esModule",{value:!0});i.jsxDEV=h=i.jsxs=f=i.jsx=void 0;const u=o,c=s;function d(e,t){if("function"==typeof e)return e(t);const{children:r,...n}=t,i=(0,c.createDomElement)(e,n);return n&&(0,u.setAttributes)(i,n),(0,c.applyChildren)(i,[r]),i}var f=i.jsx=d,h=i.jsxs=d;i.jsxDEV=d;var p={},m={};Object.defineProperty(m,"__esModule",{value:!0});m.h=m.createElement=void 0;const g=o,R=s;function v(e,t,...r){if("function"==typeof e)return e({...t,children:r});const n=(0,R.createDomElement)(e,t);return t&&(0,g.setAttributes)(n,t),(0,R.applyChildren)(n,r),n}m.createElement=v;m.h=v;var y={};Object.defineProperty(y,"__esModule",{value:!0}),function(e){var t=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=r&&r.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),n(m,e),n(i,e),n(y,e)}(p);Object.create;Object.create;function b(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function S(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}"function"==typeof SuppressedError&&SuppressedError;var w="object"==typeof global&&global&&global.Object===Object&&global,C="object"==typeof self&&self&&self.Object===Object&&self,k=w||C||Function("return this")(),B=k.Symbol,P=Object.prototype,M=P.hasOwnProperty,x=P.toString,I=B?B.toStringTag:void 0;var E=Object.prototype.toString;var _="[object Null]",O="[object Undefined]",F=B?B.toStringTag:void 0;function $(e){return null==e?void 0===e?O:_:F&&F in Object(e)?function(e){var t=M.call(e,I),r=e[I];try{e[I]=void 0;var n=!0}catch(e){}var i=x.call(e);return n&&(t?e[I]=r:delete e[I]),i}(e):function(e){return E.call(e)}(e)}function L(e){return null!=e&&"object"==typeof e}var H="[object Symbol]";function T(e){return"symbol"==typeof e||L(e)&&$(e)==H}var A=NaN;function D(e){return"number"==typeof e?e:T(e)?A:+e}function N(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var W=Array.isArray,j=1/0,G=B?B.prototype:void 0,z=G?G.toString:void 0;function V(e){if("string"==typeof e)return e;if(W(e))return N(e,V)+"";if(T(e))return z?z.call(e):"";var t=e+"";return"0"==t&&1/e==-j?"-0":t}function q(e,t){return function(r,n){var i;if(void 0===r&&void 0===n)return t;if(void 0!==r&&(i=r),void 0!==n){if(void 0===i)return n;"string"==typeof r||"string"==typeof n?(r=V(r),n=V(n)):(r=D(r),n=D(n)),i=e(r,n)}return i}}var U=q((function(e,t){return e+t}),0),K=/\s/;function J(e){for(var t=e.length;t--&&K.test(e.charAt(t)););return t}var Z=/^\s+/;function Y(e){return e?e.slice(0,J(e)+1).replace(Z,""):e}function X(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Q=NaN,ee=/^[-+]0x[0-9a-f]+$/i,te=/^0b[01]+$/i,re=/^0o[0-7]+$/i,ne=parseInt;function ie(e){if("number"==typeof e)return e;if(T(e))return Q;if(X(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=X(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Y(e);var r=te.test(e);return r||re.test(e)?ne(e.slice(2),r?2:8):ee.test(e)?Q:+e}var oe=1/0,ae=17976931348623157e292;function se(e){return e?(e=ie(e))===oe||e===-oe?(e<0?-1:1)*ae:e==e?e:0:0===e?e:0}function le(e){var t=se(e),r=t%1;return t==t?r?t-r:t:0}function ue(e){return e}var ce="[object AsyncFunction]",de="[object Function]",fe="[object GeneratorFunction]",he="[object Proxy]";function pe(e){if(!X(e))return!1;var t=$(e);return t==de||t==fe||t==ce||t==he}var me,ge=k["__core-js_shared__"],Re=(me=/[^.]+$/.exec(ge&&ge.keys&&ge.keys.IE_PROTO||""))?"Symbol(src)_1."+me:"";var ve=Function.prototype.toString;function ye(e){if(null!=e){try{return ve.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var be=/^\[object .+?Constructor\]$/,Se=Function.prototype,we=Object.prototype,Ce=Se.toString,ke=we.hasOwnProperty,Be=RegExp("^"+Ce.call(ke).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Pe(e){return!(!X(e)||function(e){return!!Re&&Re in e}(e))&&(pe(e)?Be:be).test(ye(e))}function Me(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Pe(r)?r:void 0}var xe=Me(k,"WeakMap"),Ie=xe&&new xe,Ee=Ie?function(e,t){return Ie.set(e,t),e}:ue,_e=Object.create,Oe=function(){function e(){}return function(t){if(!X(t))return{};if(_e)return _e(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Fe(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Oe(e.prototype),n=e.apply(r,t);return X(n)?n:r}}var $e=1;function Le(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var He=Math.max;function Te(e,t,r,n){for(var i=-1,o=e.length,a=r.length,s=-1,l=t.length,u=He(o-a,0),c=Array(l+u),d=!n;++s<l;)c[s]=t[s];for(;++i<a;)(d||i<o)&&(c[r[i]]=e[i]);for(;u--;)c[s++]=e[i++];return c}var Ae=Math.max;function De(e,t,r,n){for(var i=-1,o=e.length,a=-1,s=r.length,l=-1,u=t.length,c=Ae(o-s,0),d=Array(c+u),f=!n;++i<c;)d[i]=e[i];for(var h=i;++l<u;)d[h+l]=t[l];for(;++a<s;)(f||i<o)&&(d[h+r[a]]=e[i++]);return d}function Ne(){}var We=4294967295;function je(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=We,this.__views__=[]}function Ge(){}je.prototype=Oe(Ne.prototype),je.prototype.constructor=je;var ze=Ie?function(e){return Ie.get(e)}:Ge,Ve={},qe=Object.prototype.hasOwnProperty;function Ue(e){for(var t=e.name+"",r=Ve[t],n=qe.call(Ve,t)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t}function Ke(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Je(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function Ze(e){if(e instanceof je)return e.clone();var t=new Ke(e.__wrapped__,e.__chain__);return t.__actions__=Je(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}Ke.prototype=Oe(Ne.prototype),Ke.prototype.constructor=Ke;var Ye=Object.prototype.hasOwnProperty;function Xe(e){if(L(e)&&!W(e)&&!(e instanceof je)){if(e instanceof Ke)return e;if(Ye.call(e,"__wrapped__"))return Ze(e)}return new Ke(e)}function Qe(e){var t=Ue(e),r=Xe[t];if("function"!=typeof r||!(t in je.prototype))return!1;if(e===r)return!0;var n=ze(r);return!!n&&e===n[0]}Xe.prototype=Ne.prototype,Xe.prototype.constructor=Xe;var et=Date.now;function tt(e){var t=0,r=0;return function(){var n=et(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var rt=tt(Ee),nt=/\{\n\/\* \[wrapped with (.+)\] \*/,it=/,? & /;var ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function at(e){return function(){return e}}var st=function(){try{var e=Me(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),lt=st?function(e,t){return st(e,"toString",{configurable:!0,enumerable:!1,value:at(t),writable:!0})}:ue,ut=tt(lt);function ct(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function dt(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function ft(e){return e!=e}function ht(e,t,r){return t==t?function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):dt(e,ft,r)}function pt(e,t){return!!(null==e?0:e.length)&&ht(e,t,0)>-1}var mt=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function gt(e,t,r){var n=t+"";return ut(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(ot,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return ct(mt,(function(r){var n="_."+r[0];t&r[1]&&!pt(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(nt);return t?t[1].split(it):[]}(n),r)))}var Rt=1,vt=2,yt=4,bt=8,St=32,wt=64;function Ct(e,t,r,n,i,o,a,s,l,u){var c=t&bt;t|=c?St:wt,(t&=~(c?wt:St))&yt||(t&=~(Rt|vt));var d=[e,t,i,c?o:void 0,c?a:void 0,c?void 0:o,c?void 0:a,s,l,u],f=r.apply(void 0,d);return Qe(e)&&rt(f,d),f.placeholder=n,gt(f,e,t)}function kt(e){return e.placeholder}var Bt=9007199254740991,Pt=/^(?:0|[1-9]\d*)$/;function Mt(e,t){var r=typeof e;return!!(t=null==t?Bt:t)&&("number"==r||"symbol"!=r&&Pt.test(e))&&e>-1&&e%1==0&&e<t}var xt=Math.min;var It="__lodash_placeholder__";function Et(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var a=e[r];a!==t&&a!==It||(e[r]=It,o[i++]=r)}return o}var _t=1,Ot=2,Ft=8,$t=16,Lt=128,Ht=512;function Tt(e,t,r,n,i,o,a,s,l,u){var c=t&Lt,d=t&_t,f=t&Ot,h=t&(Ft|$t),p=t&Ht,m=f?void 0:Fe(e);return function g(){for(var R=arguments.length,v=Array(R),y=R;y--;)v[y]=arguments[y];if(h)var b=kt(g),S=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(v,b);if(n&&(v=Te(v,n,i,h)),o&&(v=De(v,o,a,h)),R-=S,h&&R<u){var w=Et(v,b);return Ct(e,t,Tt,g.placeholder,r,v,w,s,l,u-R)}var C=d?r:this,B=f?C[e]:e;return R=v.length,s?v=function(e,t){for(var r=e.length,n=xt(t.length,r),i=Je(e);n--;){var o=t[n];e[n]=Mt(o,r)?i[o]:void 0}return e}(v,s):p&&R>1&&v.reverse(),c&&l<R&&(v.length=l),this&&this!==k&&this instanceof g&&(B=m||Fe(B)),B.apply(C,v)}}var At=1;var Dt="__lodash_placeholder__",Nt=1,Wt=2,jt=4,Gt=8,zt=128,Vt=256,qt=Math.min;var Ut="Expected a function",Kt=1,Jt=2,Zt=8,Yt=16,Xt=32,Qt=64,er=Math.max;function tr(e,t,r,n,i,o,a,s){var l=t&Jt;if(!l&&"function"!=typeof e)throw new TypeError(Ut);var u=n?n.length:0;if(u||(t&=~(Xt|Qt),n=i=void 0),a=void 0===a?a:er(le(a),0),s=void 0===s?s:le(s),u-=i?i.length:0,t&Qt){var c=n,d=i;n=i=void 0}var f=l?void 0:ze(e),h=[e,t,r,n,i,c,d,o,a,s];if(f&&function(e,t){var r=e[1],n=t[1],i=r|n,o=i<(Nt|Wt|zt),a=n==zt&&r==Gt||n==zt&&r==Vt&&e[7].length<=t[8]||n==(zt|Vt)&&t[7].length<=t[8]&&r==Gt;if(!o&&!a)return e;n&Nt&&(e[2]=t[2],i|=r&Nt?0:jt);var s=t[3];if(s){var l=e[3];e[3]=l?Te(l,s,t[4]):s,e[4]=l?Et(e[3],Dt):t[4]}(s=t[5])&&(l=e[5],e[5]=l?De(l,s,t[6]):s,e[6]=l?Et(e[5],Dt):t[6]),(s=t[7])&&(e[7]=s),n&zt&&(e[8]=null==e[8]?t[8]:qt(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(h,f),e=h[0],t=h[1],r=h[2],n=h[3],i=h[4],!(s=h[9]=void 0===h[9]?l?0:e.length:er(h[9]-u,0))&&t&(Zt|Yt)&&(t&=~(Zt|Yt)),t&&t!=Kt)p=t==Zt||t==Yt?function(e,t,r){var n=Fe(e);return function i(){for(var o=arguments.length,a=Array(o),s=o,l=kt(i);s--;)a[s]=arguments[s];var u=o<3&&a[0]!==l&&a[o-1]!==l?[]:Et(a,l);return(o-=u.length)<r?Ct(e,t,Tt,i.placeholder,void 0,a,u,void 0,void 0,r-o):Le(this&&this!==k&&this instanceof i?n:e,this,a)}}(e,t,s):t!=Xt&&t!=(Kt|Xt)||i.length?Tt.apply(void 0,h):function(e,t,r,n){var i=t&At,o=Fe(e);return function t(){for(var a=-1,s=arguments.length,l=-1,u=n.length,c=Array(u+s),d=this&&this!==k&&this instanceof t?o:e;++l<u;)c[l]=n[l];for(;s--;)c[l++]=arguments[++a];return Le(d,i?r:this,c)}}(e,t,r,n);else var p=function(e,t,r){var n=t&$e,i=Fe(e);return function t(){return(this&&this!==k&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,r);return gt((f?Ee:rt)(p,h),e,t)}var rr=128;function nr(e,t,r){return t=r?void 0:t,t=e&&null==t?e.length:t,tr(e,rr,void 0,void 0,void 0,void 0,t)}function ir(e,t,r){"__proto__"==t&&st?st(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function or(e,t){return e===t||e!=e&&t!=t}var ar=Object.prototype.hasOwnProperty;function sr(e,t,r){var n=e[t];ar.call(e,t)&&or(n,r)&&(void 0!==r||t in e)||ir(e,t,r)}function lr(e,t,r,n){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=n?n(r[s],e[s],s,r,e):void 0;void 0===l&&(l=e[s]),i?ir(r,s,l):sr(r,s,l)}return r}var ur=Math.max;function cr(e,t,r){return t=ur(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=ur(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),Le(e,this,s)}}function dr(e,t){return ut(cr(e,t,ue),e+"")}var fr=9007199254740991;function hr(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=fr}function pr(e){return null!=e&&hr(e.length)&&!pe(e)}function mr(e,t,r){if(!X(r))return!1;var n=typeof t;return!!("number"==n?pr(r)&&Mt(t,r.length):"string"==n&&t in r)&&or(r[t],e)}function gr(e){return dr((function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&mr(r[0],r[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,o)}return t}))}var Rr=Object.prototype;function vr(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Rr)}function yr(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function br(e){return L(e)&&"[object Arguments]"==$(e)}var Sr=Object.prototype,wr=Sr.hasOwnProperty,Cr=Sr.propertyIsEnumerable,kr=br(function(){return arguments}())?br:function(e){return L(e)&&wr.call(e,"callee")&&!Cr.call(e,"callee")};function Br(){return!1}var Pr="object"==typeof e&&e&&!e.nodeType&&e,Mr=Pr&&"object"==typeof module&&module&&!module.nodeType&&module,xr=Mr&&Mr.exports===Pr?k.Buffer:void 0,Ir=(xr?xr.isBuffer:void 0)||Br,Er={};function _r(e){return function(t){return e(t)}}Er["[object Float32Array]"]=Er["[object Float64Array]"]=Er["[object Int8Array]"]=Er["[object Int16Array]"]=Er["[object Int32Array]"]=Er["[object Uint8Array]"]=Er["[object Uint8ClampedArray]"]=Er["[object Uint16Array]"]=Er["[object Uint32Array]"]=!0,Er["[object Arguments]"]=Er["[object Array]"]=Er["[object ArrayBuffer]"]=Er["[object Boolean]"]=Er["[object DataView]"]=Er["[object Date]"]=Er["[object Error]"]=Er["[object Function]"]=Er["[object Map]"]=Er["[object Number]"]=Er["[object Object]"]=Er["[object RegExp]"]=Er["[object Set]"]=Er["[object String]"]=Er["[object WeakMap]"]=!1;var Or="object"==typeof e&&e&&!e.nodeType&&e,Fr=Or&&"object"==typeof module&&module&&!module.nodeType&&module,$r=Fr&&Fr.exports===Or&&w.process,Lr=function(){try{var e=Fr&&Fr.require&&Fr.require("util").types;return e||$r&&$r.binding&&$r.binding("util")}catch(e){}}(),Hr=Lr&&Lr.isTypedArray,Tr=Hr?_r(Hr):function(e){return L(e)&&hr(e.length)&&!!Er[$(e)]},Ar=Object.prototype.hasOwnProperty;function Dr(e,t){var r=W(e),n=!r&&kr(e),i=!r&&!n&&Ir(e),o=!r&&!n&&!i&&Tr(e),a=r||n||i||o,s=a?yr(e.length,String):[],l=s.length;for(var u in e)!t&&!Ar.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Mt(u,l))||s.push(u);return s}function Nr(e,t){return function(r){return e(t(r))}}var Wr=Nr(Object.keys,Object),jr=Object.prototype.hasOwnProperty;function Gr(e){if(!vr(e))return Wr(e);var t=[];for(var r in Object(e))jr.call(e,r)&&"constructor"!=r&&t.push(r);return t}function zr(e){return pr(e)?Dr(e):Gr(e)}var Vr=Object.prototype.hasOwnProperty,qr=gr((function(e,t){if(vr(t)||pr(t))lr(t,zr(t),e);else for(var r in t)Vr.call(t,r)&&sr(e,r,t[r])}));var Ur=Object.prototype.hasOwnProperty;function Kr(e){if(!X(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=vr(e),r=[];for(var n in e)("constructor"!=n||!t&&Ur.call(e,n))&&r.push(n);return r}function Jr(e){return pr(e)?Dr(e,!0):Kr(e)}var Zr=gr((function(e,t){lr(t,Jr(t),e)})),Yr=gr((function(e,t,r,n){lr(t,Jr(t),e,n)})),Xr=gr((function(e,t,r,n){lr(t,zr(t),e,n)})),Qr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,en=/^\w*$/;function tn(e,t){if(W(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!T(e))||(en.test(e)||!Qr.test(e)||null!=t&&e in Object(t))}var rn=Me(Object,"create");var nn=Object.prototype.hasOwnProperty;var on=Object.prototype.hasOwnProperty;function an(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function sn(e,t){for(var r=e.length;r--;)if(or(e[r][0],t))return r;return-1}an.prototype.clear=function(){this.__data__=rn?rn(null):{},this.size=0},an.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},an.prototype.get=function(e){var t=this.__data__;if(rn){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return nn.call(t,e)?t[e]:void 0},an.prototype.has=function(e){var t=this.__data__;return rn?void 0!==t[e]:on.call(t,e)},an.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=rn&&void 0===t?"__lodash_hash_undefined__":t,this};var ln=Array.prototype.splice;function un(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}un.prototype.clear=function(){this.__data__=[],this.size=0},un.prototype.delete=function(e){var t=this.__data__,r=sn(t,e);return!(r<0)&&(r==t.length-1?t.pop():ln.call(t,r,1),--this.size,!0)},un.prototype.get=function(e){var t=this.__data__,r=sn(t,e);return r<0?void 0:t[r][1]},un.prototype.has=function(e){return sn(this.__data__,e)>-1},un.prototype.set=function(e,t){var r=this.__data__,n=sn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var cn=Me(k,"Map");function dn(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function fn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}fn.prototype.clear=function(){this.size=0,this.__data__={hash:new an,map:new(cn||un),string:new an}},fn.prototype.delete=function(e){var t=dn(this,e).delete(e);return this.size-=t?1:0,t},fn.prototype.get=function(e){return dn(this,e).get(e)},fn.prototype.has=function(e){return dn(this,e).has(e)},fn.prototype.set=function(e,t){var r=dn(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var hn="Expected a function";function pn(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(hn);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(pn.Cache||fn),r}pn.Cache=fn;var mn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gn=/\\(\\)?/g,Rn=function(e){var t=pn(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(mn,(function(e,r,n,i){t.push(n?i.replace(gn,"$1"):r||e)})),t}));function vn(e){return null==e?"":V(e)}function yn(e,t){return W(e)?e:tn(e,t)?[e]:Rn(vn(e))}var bn=1/0;function Sn(e){if("string"==typeof e||T(e))return e;var t=e+"";return"0"==t&&1/e==-bn?"-0":t}function wn(e,t){for(var r=0,n=(t=yn(t,e)).length;null!=e&&r<n;)e=e[Sn(t[r++])];return r&&r==n?e:void 0}function Cn(e,t,r){var n=null==e?void 0:wn(e,t);return void 0===n?r:n}function kn(e,t){for(var r=-1,n=t.length,i=Array(n),o=null==e;++r<n;)i[r]=o?void 0:Cn(e,t[r]);return i}function Bn(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var Pn=B?B.isConcatSpreadable:void 0;function Mn(e){return W(e)||kr(e)||!!(Pn&&e&&e[Pn])}function xn(e,t,r,n,i){var o=-1,a=e.length;for(r||(r=Mn),i||(i=[]);++o<a;){var s=e[o];t>0&&r(s)?t>1?xn(s,t-1,r,n,i):Bn(i,s):n||(i[i.length]=s)}return i}function In(e){return(null==e?0:e.length)?xn(e,1):[]}function En(e){return ut(cr(e,void 0,In),e+"")}var _n=En(kn),On=Nr(Object.getPrototypeOf,Object),Fn="[object Object]",$n=Function.prototype,Ln=Object.prototype,Hn=$n.toString,Tn=Ln.hasOwnProperty,An=Hn.call(Object);function Dn(e){if(!L(e)||$(e)!=Fn)return!1;var t=On(e);if(null===t)return!0;var r=Tn.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Hn.call(r)==An}var Nn="[object DOMException]",Wn="[object Error]";function jn(e){if(!L(e))return!1;var t=$(e);return t==Wn||t==Nn||"string"==typeof e.message&&"string"==typeof e.name&&!Dn(e)}var Gn=dr((function(e,t){try{return Le(e,void 0,t)}catch(e){return jn(e)?e:new Error(e)}})),zn="Expected a function";function Vn(e,t){var r;if("function"!=typeof t)throw new TypeError(zn);return e=le(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}}var qn=dr((function(e,t,r){var n=1;if(r.length){var i=Et(r,kt(qn));n|=32}return tr(e,n,t,r,i)}));qn.placeholder={};var Un=En((function(e,t){return ct(t,(function(t){t=Sn(t),ir(e,t,qn(e[t],e))})),e})),Kn=dr((function(e,t,r){var n=3;if(r.length){var i=Et(r,kt(Kn));n|=32}return tr(t,n,e,r,i)}));function Jn(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}function Zn(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:Jn(e,t,r)}Kn.placeholder={};var Yn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Xn(e){return Yn.test(e)}var Qn="\\ud800-\\udfff",ei="["+Qn+"]",ti="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ri="\\ud83c[\\udffb-\\udfff]",ni="[^"+Qn+"]",ii="(?:\\ud83c[\\udde6-\\uddff]){2}",oi="[\\ud800-\\udbff][\\udc00-\\udfff]",ai="(?:"+ti+"|"+ri+")"+"?",si="[\\ufe0e\\ufe0f]?",li=si+ai+("(?:\\u200d(?:"+[ni,ii,oi].join("|")+")"+si+ai+")*"),ui="(?:"+[ni+ti+"?",ti,ii,oi,ei].join("|")+")",ci=RegExp(ri+"(?="+ri+")|"+ui+li,"g");function di(e){return Xn(e)?function(e){return e.match(ci)||[]}(e):function(e){return e.split("")}(e)}function fi(e){return function(t){var r=Xn(t=vn(t))?di(t):void 0,n=r?r[0]:t.charAt(0),i=r?Zn(r,1).join(""):t.slice(1);return n[e]()+i}}var hi=fi("toUpperCase");function pi(e){return hi(vn(e).toLowerCase())}function mi(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function gi(e){return function(t){return null==e?void 0:e[t]}}var Ri=gi({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),vi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yi=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");function bi(e){return(e=vn(e))&&e.replace(vi,Ri).replace(yi,"")}var Si=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var wi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Ci="\\ud800-\\udfff",ki="\\u2700-\\u27bf",Bi="a-z\\xdf-\\xf6\\xf8-\\xff",Pi="A-Z\\xc0-\\xd6\\xd8-\\xde",Mi="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xi="["+Mi+"]",Ii="\\d+",Ei="["+ki+"]",_i="["+Bi+"]",Oi="[^"+Ci+Mi+Ii+ki+Bi+Pi+"]",Fi="(?:\\ud83c[\\udde6-\\uddff]){2}",$i="[\\ud800-\\udbff][\\udc00-\\udfff]",Li="["+Pi+"]",Hi="(?:"+_i+"|"+Oi+")",Ti="(?:"+Li+"|"+Oi+")",Ai="(?:['’](?:d|ll|m|re|s|t|ve))?",Di="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ni="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Wi="[\\ufe0e\\ufe0f]?",ji=Wi+Ni+("(?:\\u200d(?:"+["[^"+Ci+"]",Fi,$i].join("|")+")"+Wi+Ni+")*"),Gi="(?:"+[Ei,Fi,$i].join("|")+")"+ji,zi=RegExp([Li+"?"+_i+"+"+Ai+"(?="+[xi,Li,"$"].join("|")+")",Ti+"+"+Di+"(?="+[xi,Li+Hi,"$"].join("|")+")",Li+"?"+Hi+"+"+Ai,Li+"+"+Di,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ii,Gi].join("|"),"g");function Vi(e,t,r){return e=vn(e),void 0===(t=r?void 0:t)?function(e){return wi.test(e)}(e)?function(e){return e.match(zi)||[]}(e):function(e){return e.match(Si)||[]}(e):e.match(t)||[]}var qi=RegExp("['’]","g");function Ui(e){return function(t){return mi(Vi(bi(t).replace(qi,"")),e,"")}}var Ki=Ui((function(e,t,r){return t=t.toLowerCase(),e+(r?pi(t):t)}));var Ji=k.isFinite,Zi=Math.min;function Yi(e){var t=Math[e];return function(e,r){if(e=ie(e),(r=null==r?0:Zi(le(r),292))&&Ji(e)){var n=(vn(e)+"e").split("e");return+((n=(vn(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Xi=Yi("ceil");function Qi(e){var t=Xe(e);return t.__chain__=!0,t}var eo=Math.ceil,to=Math.max;function ro(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}function no(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=ie(r))==r?r:0),void 0!==t&&(t=(t=ie(t))==t?t:0),ro(ie(e),t,r)}function io(e){var t=this.__data__=new un(e);this.size=t.size}function oo(e,t){return e&&lr(t,zr(t),e)}io.prototype.clear=function(){this.__data__=new un,this.size=0},io.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},io.prototype.get=function(e){return this.__data__.get(e)},io.prototype.has=function(e){return this.__data__.has(e)},io.prototype.set=function(e,t){var r=this.__data__;if(r instanceof un){var n=r.__data__;if(!cn||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new fn(n)}return r.set(e,t),this.size=r.size,this};var ao="object"==typeof e&&e&&!e.nodeType&&e,so=ao&&"object"==typeof module&&module&&!module.nodeType&&module,lo=so&&so.exports===ao?k.Buffer:void 0,uo=lo?lo.allocUnsafe:void 0;function co(e,t){if(t)return e.slice();var r=e.length,n=uo?uo(r):new e.constructor(r);return e.copy(n),n}function fo(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}function ho(){return[]}var po=Object.prototype.propertyIsEnumerable,mo=Object.getOwnPropertySymbols,go=mo?function(e){return null==e?[]:(e=Object(e),fo(mo(e),(function(t){return po.call(e,t)})))}:ho;var Ro=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Bn(t,go(e)),e=On(e);return t}:ho;function vo(e,t,r){var n=t(e);return W(e)?n:Bn(n,r(e))}function yo(e){return vo(e,zr,go)}function bo(e){return vo(e,Jr,Ro)}var So=Me(k,"DataView"),wo=Me(k,"Promise"),Co=Me(k,"Set"),ko="[object Map]",Bo="[object Promise]",Po="[object Set]",Mo="[object WeakMap]",xo="[object DataView]",Io=ye(So),Eo=ye(cn),_o=ye(wo),Oo=ye(Co),Fo=ye(xe),$o=$;(So&&$o(new So(new ArrayBuffer(1)))!=xo||cn&&$o(new cn)!=ko||wo&&$o(wo.resolve())!=Bo||Co&&$o(new Co)!=Po||xe&&$o(new xe)!=Mo)&&($o=function(e){var t=$(e),r="[object Object]"==t?e.constructor:void 0,n=r?ye(r):"";if(n)switch(n){case Io:return xo;case Eo:return ko;case _o:return Bo;case Oo:return Po;case Fo:return Mo}return t});var Lo=$o,Ho=Object.prototype.hasOwnProperty;var To=k.Uint8Array;function Ao(e){var t=new e.constructor(e.byteLength);return new To(t).set(new To(e)),t}var Do=/\w*$/;var No=B?B.prototype:void 0,Wo=No?No.valueOf:void 0;function jo(e,t){var r=t?Ao(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Go="[object Boolean]",zo="[object Date]",Vo="[object Map]",qo="[object Number]",Uo="[object RegExp]",Ko="[object Set]",Jo="[object String]",Zo="[object Symbol]",Yo="[object ArrayBuffer]",Xo="[object DataView]",Qo="[object Float32Array]",ea="[object Float64Array]",ta="[object Int8Array]",ra="[object Int16Array]",na="[object Int32Array]",ia="[object Uint8Array]",oa="[object Uint8ClampedArray]",aa="[object Uint16Array]",sa="[object Uint32Array]";function la(e,t,r){var n,i=e.constructor;switch(t){case Yo:return Ao(e);case Go:case zo:return new i(+e);case Xo:return function(e,t){var r=t?Ao(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case Qo:case ea:case ta:case ra:case na:case ia:case oa:case aa:case sa:return jo(e,r);case Vo:return new i;case qo:case Jo:return new i(e);case Uo:return function(e){var t=new e.constructor(e.source,Do.exec(e));return t.lastIndex=e.lastIndex,t}(e);case Ko:return new i;case Zo:return n=e,Wo?Object(Wo.call(n)):{}}}function ua(e){return"function"!=typeof e.constructor||vr(e)?{}:Oe(On(e))}var ca=Lr&&Lr.isMap,da=ca?_r(ca):function(e){return L(e)&&"[object Map]"==Lo(e)};var fa=Lr&&Lr.isSet,ha=fa?_r(fa):function(e){return L(e)&&"[object Set]"==Lo(e)},pa=1,ma=2,ga=4,Ra="[object Arguments]",va="[object Function]",ya="[object GeneratorFunction]",ba="[object Object]",Sa={};function wa(e,t,r,n,i,o){var a,s=t&pa,l=t&ma,u=t&ga;if(r&&(a=i?r(e,n,i,o):r(e)),void 0!==a)return a;if(!X(e))return e;var c=W(e);if(c){if(a=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Ho.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!s)return Je(e,a)}else{var d=Lo(e),f=d==va||d==ya;if(Ir(e))return co(e,s);if(d==ba||d==Ra||f&&!i){if(a=l||f?{}:ua(e),!s)return l?function(e,t){return lr(e,Ro(e),t)}(e,function(e,t){return e&&lr(t,Jr(t),e)}(a,e)):function(e,t){return lr(e,go(e),t)}(e,oo(a,e))}else{if(!Sa[d])return i?e:{};a=la(e,d,s)}}o||(o=new io);var h=o.get(e);if(h)return h;o.set(e,a),ha(e)?e.forEach((function(n){a.add(wa(n,t,r,n,e,o))})):da(e)&&e.forEach((function(n,i){a.set(i,wa(n,t,r,i,e,o))}));var p=c?void 0:(u?l?bo:yo:l?Jr:zr)(e);return ct(p||e,(function(n,i){p&&(n=e[i=n]),sr(a,i,wa(n,t,r,i,e,o))})),a}Sa[Ra]=Sa["[object Array]"]=Sa["[object ArrayBuffer]"]=Sa["[object DataView]"]=Sa["[object Boolean]"]=Sa["[object Date]"]=Sa["[object Float32Array]"]=Sa["[object Float64Array]"]=Sa["[object Int8Array]"]=Sa["[object Int16Array]"]=Sa["[object Int32Array]"]=Sa["[object Map]"]=Sa["[object Number]"]=Sa[ba]=Sa["[object RegExp]"]=Sa["[object Set]"]=Sa["[object String]"]=Sa["[object Symbol]"]=Sa["[object Uint8Array]"]=Sa["[object Uint8ClampedArray]"]=Sa["[object Uint16Array]"]=Sa["[object Uint32Array]"]=!0,Sa["[object Error]"]=Sa[va]=Sa["[object WeakMap]"]=!1;var Ca=4;function ka(e){return wa(e,Ca)}var Ba=1,Pa=4;function Ma(e){return wa(e,Ba|Pa)}function xa(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new fn;++t<r;)this.add(e[t])}function Ia(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function Ea(e,t){return e.has(t)}xa.prototype.add=xa.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},xa.prototype.has=function(e){return this.__data__.has(e)};var _a=1,Oa=2;function Fa(e,t,r,n,i,o){var a=r&_a,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(e),c=o.get(t);if(u&&c)return u==t&&c==e;var d=-1,f=!0,h=r&Oa?new xa:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var p=e[d],m=t[d];if(n)var g=a?n(m,p,d,t,e,o):n(p,m,d,e,t,o);if(void 0!==g){if(g)continue;f=!1;break}if(h){if(!Ia(t,(function(e,t){if(!Ea(h,t)&&(p===e||i(p,e,r,n,o)))return h.push(t)}))){f=!1;break}}else if(p!==m&&!i(p,m,r,n,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function $a(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function La(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var Ha=1,Ta=2,Aa="[object Boolean]",Da="[object Date]",Na="[object Error]",Wa="[object Map]",ja="[object Number]",Ga="[object RegExp]",za="[object Set]",Va="[object String]",qa="[object Symbol]",Ua="[object ArrayBuffer]",Ka="[object DataView]",Ja=B?B.prototype:void 0,Za=Ja?Ja.valueOf:void 0;var Ya=1,Xa=Object.prototype.hasOwnProperty;var Qa=1,es="[object Arguments]",ts="[object Array]",rs="[object Object]",ns=Object.prototype.hasOwnProperty;function is(e,t,r,n,i,o){var a=W(e),s=W(t),l=a?ts:Lo(e),u=s?ts:Lo(t),c=(l=l==es?rs:l)==rs,d=(u=u==es?rs:u)==rs,f=l==u;if(f&&Ir(e)){if(!Ir(t))return!1;a=!0,c=!1}if(f&&!c)return o||(o=new io),a||Tr(e)?Fa(e,t,r,n,i,o):function(e,t,r,n,i,o,a){switch(r){case Ka:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ua:return!(e.byteLength!=t.byteLength||!o(new To(e),new To(t)));case Aa:case Da:case ja:return or(+e,+t);case Na:return e.name==t.name&&e.message==t.message;case Ga:case Va:return e==t+"";case Wa:var s=$a;case za:var l=n&Ha;if(s||(s=La),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;n|=Ta,a.set(e,t);var c=Fa(s(e),s(t),n,i,o,a);return a.delete(e),c;case qa:if(Za)return Za.call(e)==Za.call(t)}return!1}(e,t,l,r,n,i,o);if(!(r&Qa)){var h=c&&ns.call(e,"__wrapped__"),p=d&&ns.call(t,"__wrapped__");if(h||p){var m=h?e.value():e,g=p?t.value():t;return o||(o=new io),i(m,g,r,n,o)}}return!!f&&(o||(o=new io),function(e,t,r,n,i,o){var a=r&Ya,s=yo(e),l=s.length;if(l!=yo(t).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in t:Xa.call(t,c)))return!1}var d=o.get(e),f=o.get(t);if(d&&f)return d==t&&f==e;var h=!0;o.set(e,t),o.set(t,e);for(var p=a;++u<l;){var m=e[c=s[u]],g=t[c];if(n)var R=a?n(g,m,c,t,e,o):n(m,g,c,e,t,o);if(!(void 0===R?m===g||i(m,g,r,n,o):R)){h=!1;break}p||(p="constructor"==c)}if(h&&!p){var v=e.constructor,y=t.constructor;v==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(h=!1)}return o.delete(e),o.delete(t),h}(e,t,r,n,i,o))}function os(e,t,r,n,i){return e===t||(null==e||null==t||!L(e)&&!L(t)?e!=e&&t!=t:is(e,t,r,n,os,i))}var as=1,ss=2;function ls(e,t,r,n){var i=r.length,o=i,a=!n;if(null==e)return!o;for(e=Object(e);i--;){var s=r[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var l=(s=r[i])[0],u=e[l],c=s[1];if(a&&s[2]){if(void 0===u&&!(l in e))return!1}else{var d=new io;if(n)var f=n(u,c,l,e,t,d);if(!(void 0===f?os(c,u,as|ss,n,d):f))return!1}}return!0}function us(e){return e==e&&!X(e)}function cs(e){for(var t=zr(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,us(i)]}return t}function ds(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}function fs(e){var t=cs(e);return 1==t.length&&t[0][2]?ds(t[0][0],t[0][1]):function(r){return r===e||ls(r,e,t)}}function hs(e,t){return null!=e&&t in Object(e)}function ps(e,t,r){for(var n=-1,i=(t=yn(t,e)).length,o=!1;++n<i;){var a=Sn(t[n]);if(!(o=null!=e&&r(e,a)))break;e=e[a]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&hr(i)&&Mt(a,i)&&(W(e)||kr(e))}function ms(e,t){return null!=e&&ps(e,t,hs)}var gs=1,Rs=2;function vs(e,t){return tn(e)&&us(t)?ds(Sn(e),t):function(r){var n=Cn(r,e);return void 0===n&&n===t?ms(r,e):os(t,n,gs|Rs)}}function ys(e){return function(t){return null==t?void 0:t[e]}}function bs(e){return tn(e)?ys(Sn(e)):function(e){return function(t){return wn(t,e)}}(e)}function Ss(e){return"function"==typeof e?e:null==e?ue:"object"==typeof e?W(e)?vs(e[0],e[1]):fs(e):bs(e)}function ws(e,t,r){var n=r.length;if(null==e)return!n;for(e=Object(e);n--;){var i=r[n],o=t[i],a=e[i];if(void 0===a&&!(i in e)||!o(a))return!1}return!0}function Cs(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(n,a,r(a),e)}return n}function ks(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===r(o[l],l,o))break}return t}}var Bs=ks();function Ps(e,t){return e&&Bs(e,t,zr)}function Ms(e,t){return function(r,n){if(null==r)return r;if(!pr(r))return e(r,n);for(var i=r.length,o=t?i:-1,a=Object(r);(t?o--:++o<i)&&!1!==n(a[o],o,a););return r}}var xs=Ms(Ps);function Is(e,t,r,n){return xs(e,(function(e,i,o){t(n,e,r(e),o)})),n}function Es(e,t){return function(r,n){var i=W(r)?Cs:Is,o=t?t():{};return i(r,e,Ss(n),o)}}var _s=Object.prototype.hasOwnProperty,Os=Es((function(e,t,r){_s.call(e,r)?++e[r]:ir(e,r,1)}));function Fs(e,t,r){var n=tr(e,8,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=Fs.placeholder,n}Fs.placeholder={};function $s(e,t,r){var n=tr(e,16,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=$s.placeholder,n}$s.placeholder={};var Ls=function(){return k.Date.now()},Hs="Expected a function",Ts=Math.max,As=Math.min;function Ds(e,t,r){var n,i,o,a,s,l,u=0,c=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError(Hs);function h(t){var r=n,o=i;return n=i=void 0,u=t,a=e.apply(o,r)}function p(e){var r=e-l;return void 0===l||r>=t||r<0||d&&e-u>=o}function m(){var e=Ls();if(p(e))return g(e);s=setTimeout(m,function(e){var r=t-(e-l);return d?As(r,o-(e-u)):r}(e))}function g(e){return s=void 0,f&&n?h(e):(n=i=void 0,a)}function R(){var e=Ls(),r=p(e);if(n=arguments,i=this,l=e,r){if(void 0===s)return function(e){return u=e,s=setTimeout(m,t),c?h(e):a}(l);if(d)return clearTimeout(s),s=setTimeout(m,t),h(l)}return void 0===s&&(s=setTimeout(m,t)),a}return t=ie(t)||0,X(r)&&(c=!!r.leading,o=(d="maxWait"in r)?Ts(ie(r.maxWait)||0,t):o,f="trailing"in r?!!r.trailing:f),R.cancel=function(){void 0!==s&&clearTimeout(s),u=0,n=l=i=s=void 0},R.flush=function(){return void 0===s?a:g(Ls())},R}var Ns=Object.prototype,Ws=Ns.hasOwnProperty,js=dr((function(e,t){e=Object(e);var r=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&mr(t[0],t[1],i)&&(n=1);++r<n;)for(var o=t[r],a=Jr(o),s=-1,l=a.length;++s<l;){var u=a[s],c=e[u];(void 0===c||or(c,Ns[u])&&!Ws.call(e,u))&&(e[u]=o[u])}return e}));function Gs(e,t,r){(void 0!==r&&!or(e[t],r)||void 0===r&&!(t in e))&&ir(e,t,r)}function zs(e){return L(e)&&pr(e)}function Vs(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function qs(e){return lr(e,Jr(e))}function Us(e,t,r,n,i){e!==t&&Bs(t,(function(o,a){if(i||(i=new io),X(o))!function(e,t,r,n,i,o,a){var s=Vs(e,r),l=Vs(t,r),u=a.get(l);if(u)Gs(e,r,u);else{var c=o?o(s,l,r+"",e,t,a):void 0,d=void 0===c;if(d){var f=W(l),h=!f&&Ir(l),p=!f&&!h&&Tr(l);c=l,f||h||p?W(s)?c=s:zs(s)?c=Je(s):h?(d=!1,c=co(l,!0)):p?(d=!1,c=jo(l,!0)):c=[]:Dn(l)||kr(l)?(c=s,kr(s)?c=qs(s):X(s)&&!pe(s)||(c=ua(l))):d=!1}d&&(a.set(l,c),i(c,l,n,o,a),a.delete(l)),Gs(e,r,c)}}(e,t,a,r,Us,n,i);else{var s=n?n(Vs(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),Gs(e,a,s)}}),Jr)}function Ks(e,t,r,n,i,o){return X(e)&&X(t)&&(o.set(t,e),Us(e,t,void 0,Ks,o),o.delete(t)),e}var Js=gr((function(e,t,r,n){Us(e,t,r,n)})),Zs=dr((function(e){return e.push(void 0,Ks),Le(Js,void 0,e)}));function Ys(e,t,r){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,r)}),t)}var Xs=dr((function(e,t){return Ys(e,1,t)})),Qs=dr((function(e,t,r){return Ys(e,ie(t)||0,r)}));function el(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var tl=200;function rl(e,t,r,n){var i=-1,o=pt,a=!0,s=e.length,l=[],u=t.length;if(!s)return l;r&&(t=N(t,_r(r))),n?(o=el,a=!1):t.length>=tl&&(o=Ea,a=!1,t=new xa(t));e:for(;++i<s;){var c=e[i],d=null==r?c:r(c);if(c=n||0!==c?c:0,a&&d==d){for(var f=u;f--;)if(t[f]===d)continue e;l.push(c)}else o(t,d,n)||l.push(c)}return l}var nl=dr((function(e,t){return zs(e)?rl(e,xn(t,1,zs,!0)):[]}));function il(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var ol=dr((function(e,t){var r=il(t);return zs(r)&&(r=void 0),zs(e)?rl(e,xn(t,1,zs,!0),Ss(r)):[]})),al=dr((function(e,t){var r=il(t);return zs(r)&&(r=void 0),zs(e)?rl(e,xn(t,1,zs,!0),void 0,r):[]})),sl=q((function(e,t){return e/t}),1);function ll(e,t,r,n){for(var i=e.length,o=n?i:-1;(n?o--:++o<i)&&t(e[o],o,e););return r?Jn(e,n?0:o,n?o+1:i):Jn(e,n?o+1:0,n?i:o)}function ul(e){return"function"==typeof e?e:ue}function cl(e,t){return(W(e)?ct:xs)(e,ul(t))}function dl(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}var fl=ks(!0);function hl(e,t){return e&&fl(e,t,zr)}var pl=Ms(hl,!0);function ml(e,t){return(W(e)?dl:pl)(e,ul(t))}function gl(e){return function(t){var r=Lo(t);return"[object Map]"==r?$a(t):"[object Set]"==r?function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}(t):function(e,t){return N(t,(function(t){return[t,e[t]]}))}(t,e(t))}}var Rl=gl(zr),vl=gl(Jr),yl=gi({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),bl=/[&<>"']/g,Sl=RegExp(bl.source);function wl(e){return(e=vn(e))&&Sl.test(e)?e.replace(bl,yl):e}var Cl=/[\\^$.*+?()[\]{}|]/g,kl=RegExp(Cl.source);function Bl(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Pl(e,t){var r=!0;return xs(e,(function(e,n,i){return r=!!t(e,n,i)})),r}var Ml=4294967295;function xl(e){return e?ro(le(e),0,Ml):0}function Il(e,t){var r=[];return xs(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function El(e){return function(t,r,n){var i=Object(t);if(!pr(t)){var o=Ss(r);t=zr(t),r=function(e){return o(i[e],e,i)}}var a=e(t,r,n);return a>-1?i[o?t[a]:a]:void 0}}var _l=Math.max;function Ol(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:le(r);return i<0&&(i=_l(n+i,0)),dt(e,Ss(t),i)}var Fl=El(Ol);function $l(e,t,r){var n;return r(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}var Ll=Math.max,Hl=Math.min;function Tl(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n-1;return void 0!==r&&(i=le(r),i=r<0?Ll(n+i,0):Hl(i,n-1)),dt(e,Ss(t),i,!0)}var Al=El(Tl);function Dl(e){return e&&e.length?e[0]:void 0}function Nl(e,t){var r=-1,n=pr(e)?Array(e.length):[];return xs(e,(function(e,i,o){n[++r]=t(e,i,o)})),n}function Wl(e,t){return(W(e)?N:Nl)(e,Ss(t))}var jl=1/0;var Gl=1/0;var zl=Yi("floor");function Vl(e){return En((function(t){var r=t.length,n=r,i=Ke.prototype.thru;for(e&&t.reverse();n--;){var o=t[n];if("function"!=typeof o)throw new TypeError("Expected a function");if(i&&!a&&"wrapper"==Ue(o))var a=new Ke([],!0)}for(n=a?n:r;++n<r;){var s=Ue(o=t[n]),l="wrapper"==s?ze(o):void 0;a=l&&Qe(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?a[Ue(l[0])].apply(a,l[3]):1==o.length&&Qe(o)?a[s]():a.thru(o)}return function(){var e=arguments,n=e[0];if(a&&1==e.length&&W(n))return a.plant(n).value();for(var i=0,o=r?t[i].apply(this,e):n;++i<r;)o=t[i].call(this,o);return o}}))}var ql=Vl(),Ul=Vl(!0);function Kl(e,t){return fo(t,(function(t){return pe(e[t])}))}var Jl=Object.prototype.hasOwnProperty,Zl=Es((function(e,t,r){Jl.call(e,r)?e[r].push(t):ir(e,r,[t])}));function Yl(e,t){return e>t}function Xl(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=ie(t),r=ie(r)),e(t,r)}}var Ql=Xl(Yl),eu=Xl((function(e,t){return e>=t})),tu=Object.prototype.hasOwnProperty;function ru(e,t){return null!=e&&tu.call(e,t)}var nu=Math.max,iu=Math.min;var ou="[object String]";function au(e){return"string"==typeof e||!W(e)&&L(e)&&$(e)==ou}function su(e,t){return N(t,(function(t){return e[t]}))}function lu(e){return null==e?[]:su(e,zr(e))}var uu=Math.max;var cu=Math.max;var du=Math.min;function fu(e,t,r){for(var n=r?el:pt,i=e[0].length,o=e.length,a=o,s=Array(o),l=1/0,u=[];a--;){var c=e[a];a&&t&&(c=N(c,_r(t))),l=du(c.length,l),s[a]=!r&&(t||i>=120&&c.length>=120)?new xa(a&&c):void 0}c=e[0];var d=-1,f=s[0];e:for(;++d<i&&u.length<l;){var h=c[d],p=t?t(h):h;if(h=r||0!==h?h:0,!(f?Ea(f,p):n(u,p,r))){for(a=o;--a;){var m=s[a];if(!(m?Ea(m,p):n(e[a],p,r)))continue e}f&&f.push(p),u.push(h)}}return u}function hu(e){return zs(e)?e:[]}var pu=dr((function(e){var t=N(e,hu);return t.length&&t[0]===e[0]?fu(t):[]})),mu=dr((function(e){var t=il(e),r=N(e,hu);return t===il(r)?t=void 0:r.pop(),r.length&&r[0]===e[0]?fu(r,Ss(t)):[]})),gu=dr((function(e){var t=il(e),r=N(e,hu);return(t="function"==typeof t?t:void 0)&&r.pop(),r.length&&r[0]===e[0]?fu(r,void 0,t):[]}));function Ru(e,t){return function(r,n){return function(e,t,r,n){return Ps(e,(function(e,i,o){t(n,r(e),i,o)})),n}(r,e,t(n),{})}}var vu=Object.prototype.toString,yu=Ru((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=vu.call(t)),e[t]=r}),at(ue)),bu=Object.prototype,Su=bu.hasOwnProperty,wu=bu.toString,Cu=Ru((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=wu.call(t)),Su.call(e,t)?e[t].push(r):e[t]=[r]}),Ss);function ku(e,t){return t.length<2?e:wn(e,Jn(t,0,-1))}function Bu(e,t,r){var n=null==(e=ku(e,t=yn(t,e)))?e:e[Sn(il(t))];return null==n?void 0:Le(n,e,r)}var Pu=dr(Bu),Mu=dr((function(e,t,r){var n=-1,i="function"==typeof t,o=pr(e)?Array(e.length):[];return xs(e,(function(e){o[++n]=i?Le(t,e,r):Bu(e,t,r)})),o}));var xu=Lr&&Lr.isArrayBuffer,Iu=xu?_r(xu):function(e){return L(e)&&"[object ArrayBuffer]"==$(e)};var Eu=Lr&&Lr.isDate,_u=Eu?_r(Eu):function(e){return L(e)&&"[object Date]"==$(e)};var Ou=Object.prototype.hasOwnProperty;function Fu(e,t){return os(e,t)}var $u=k.isFinite;function Lu(e){return"number"==typeof e&&e==le(e)}var Hu="[object Number]";function Tu(e){return"number"==typeof e||L(e)&&$(e)==Hu}var Au=ge?pe:Br;var Du=Lr&&Lr.isRegExp,Nu=Du?_r(Du):function(e){return L(e)&&"[object RegExp]"==$(e)},Wu=9007199254740991;var ju=Array.prototype.join;var Gu=Ui((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),zu=Es((function(e,t,r){ir(e,r,t)}));var Vu=Math.max,qu=Math.min;var Uu=Ui((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Ku=fi("toLowerCase");function Ju(e,t){return e<t}var Zu=Xl(Ju),Yu=Xl((function(e,t){return e<=t}));function Xu(e,t,r){for(var n=-1,i=e.length;++n<i;){var o=e[n],a=t(o);if(null!=a&&(void 0===s?a==a&&!T(a):r(a,s)))var s=a,l=o}return l}function Qu(e,t){for(var r,n=-1,i=e.length;++n<i;){var o=t(e[n]);void 0!==o&&(r=void 0===r?o:r+o)}return r}var ec=NaN;function tc(e,t){var r=null==e?0:e.length;return r?Qu(e,t)/r:ec}var rc=gr((function(e,t,r){Us(e,t,r)})),nc=dr((function(e,t){return function(r){return Bu(r,e,t)}})),ic=dr((function(e,t){return function(r){return Bu(e,r,t)}}));function oc(e,t,r){var n=zr(t),i=Kl(t,n),o=!(X(r)&&"chain"in r&&!r.chain),a=pe(e);return ct(i,(function(r){var n=t[r];e[r]=n,a&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__);return(r.__actions__=Je(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Bn([this.value()],arguments))})})),e}var ac=q((function(e,t){return e*t}),1),sc="Expected a function";function lc(e){if("function"!=typeof e)throw new TypeError(sc);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var uc="[object Map]",cc="[object Set]",dc=B?B.iterator:void 0;function fc(e){if(!e)return[];if(pr(e))return au(e)?di(e):Je(e);if(dc&&e[dc])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[dc]());var t=Lo(e);return(t==uc?$a:t==cc?La:lu)(e)}function hc(e,t){var r=e.length;if(r)return Mt(t+=t<0?r:0,r)?e[t]:void 0}function pc(e,t){return null==(e=ku(e,t=yn(t,e)))||delete e[Sn(il(t))]}function mc(e){return Dn(e)?void 0:e}var gc=En((function(e,t){var r={};if(null==e)return r;var n=!1;t=N(t,(function(t){return t=yn(t,e),n||(n=t.length>1),t})),lr(e,bo(e),r),n&&(r=wa(r,7,mc));for(var i=t.length;i--;)pc(r,t[i]);return r}));function Rc(e,t,r,n){if(!X(e))return e;for(var i=-1,o=(t=yn(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var l=Sn(t[i]),u=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=a){var c=s[l];void 0===(u=n?n(c,l,s):void 0)&&(u=X(c)?c:Mt(t[i+1])?[]:{})}sr(s,l,u),s=s[l]}return e}function vc(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var a=t[n],s=wn(e,a);r(s,a)&&Rc(o,yn(a,e),s)}return o}function yc(e,t){if(null==e)return{};var r=N(bo(e),(function(e){return[e]}));return t=Ss(t),vc(e,r,(function(e,r){return t(e,r[0])}))}function bc(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=e==e,o=T(e),a=void 0!==t,s=null===t,l=t==t,u=T(t);if(!s&&!u&&!o&&e>t||o&&a&&l&&!s&&!u||n&&a&&l||!r&&l||!i)return 1;if(!n&&!o&&!u&&e<t||u&&r&&i&&!n&&!o||s&&r&&i||!a&&i||!l)return-1}return 0}function Sc(e,t,r){t=t.length?N(t,(function(e){return W(e)?function(t){return wn(t,1===e.length?e[0]:e)}:e})):[ue];var n=-1;t=N(t,_r(Ss));var i=Nl(e,(function(e,r,i){var o=N(t,(function(t){return t(e)}));return{criteria:o,index:++n,value:e}}));return function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(i,(function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,a=i.length,s=r.length;++n<a;){var l=bc(i[n],o[n]);if(l)return n>=s?l:l*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}))}function wc(e){return En((function(t){return t=N(t,_r(Ss)),dr((function(r){var n=this;return e(t,(function(e){return Le(e,n,r)}))}))}))}var Cc=wc(N),kc=dr,Bc=Math.min,Pc=kc((function(e,t){var r=(t=1==t.length&&W(t[0])?N(t[0],_r(Ss)):N(xn(t,1),_r(Ss))).length;return dr((function(n){for(var i=-1,o=Bc(n.length,r);++i<o;)n[i]=t[i].call(this,n[i]);return Le(e,this,n)}))})),Mc=wc(Bl),xc=wc(Ia),Ic=9007199254740991,Ec=Math.floor;function _c(e,t){var r="";if(!e||t<1||t>Ic)return r;do{t%2&&(r+=e),(t=Ec(t/2))&&(e+=e)}while(t);return r}var Oc=ys("length"),Fc="\\ud800-\\udfff",$c="["+Fc+"]",Lc="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Hc="\\ud83c[\\udffb-\\udfff]",Tc="[^"+Fc+"]",Ac="(?:\\ud83c[\\udde6-\\uddff]){2}",Dc="[\\ud800-\\udbff][\\udc00-\\udfff]",Nc="(?:"+Lc+"|"+Hc+")"+"?",Wc="[\\ufe0e\\ufe0f]?",jc=Wc+Nc+("(?:\\u200d(?:"+[Tc,Ac,Dc].join("|")+")"+Wc+Nc+")*"),Gc="(?:"+[Tc+Lc+"?",Lc,Ac,Dc,$c].join("|")+")",zc=RegExp(Hc+"(?="+Hc+")|"+Gc+jc,"g");function Vc(e){return Xn(e)?function(e){for(var t=zc.lastIndex=0;zc.test(e);)++t;return t}(e):Oc(e)}var qc=Math.ceil;function Uc(e,t){var r=(t=void 0===t?" ":V(t)).length;if(r<2)return r?_c(t,e):t;var n=_c(t,qc(e/Vc(t)));return Xn(t)?Zn(di(n),0,e).join(""):n.slice(0,e)}var Kc=Math.ceil,Jc=Math.floor;var Zc=/^\s+/,Yc=k.parseInt;var Xc=dr((function(e,t){return tr(e,32,void 0,t,Et(t,kt(Xc)))}));Xc.placeholder={};var Qc=dr((function(e,t){return tr(e,64,void 0,t,Et(t,kt(Qc)))}));Qc.placeholder={};var ed=Es((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]}));var td=En((function(e,t){return null==e?{}:function(e,t){return vc(e,t,(function(t,r){return ms(e,r)}))}(e,t)}));function rd(e,t,r,n){for(var i=r-1,o=e.length;++i<o;)if(n(e[i],t))return i;return-1}var nd=Array.prototype.splice;function id(e,t,r,n){var i=n?rd:ht,o=-1,a=t.length,s=e;for(e===t&&(t=Je(t)),r&&(s=N(e,_r(r)));++o<a;)for(var l=0,u=t[o],c=r?r(u):u;(l=i(s,c,l,n))>-1;)s!==e&&nd.call(s,l,1),nd.call(e,l,1);return e}function od(e,t){return e&&e.length&&t&&t.length?id(e,t):e}var ad=dr(od);var sd=Array.prototype.splice;function ld(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==o){var o=i;Mt(i)?sd.call(e,i,1):pc(e,i)}}return e}var ud=En((function(e,t){var r=null==e?0:e.length,n=kn(e,t);return ld(e,N(t,(function(e){return Mt(e,r)?+e:e})).sort(bc)),n})),cd=Math.floor,dd=Math.random;function fd(e,t){return e+cd(dd()*(t-e+1))}var hd=parseFloat,pd=Math.min,md=Math.random;function gd(e,t,r){if(r&&"boolean"!=typeof r&&mr(e,t,r)&&(t=r=void 0),void 0===r&&("boolean"==typeof t?(r=t,t=void 0):"boolean"==typeof e&&(r=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=se(e),void 0===t?(t=e,e=0):t=se(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var i=md();return pd(e+i*(t-e+hd("1e-"+((i+"").length-1))),t)}return fd(e,t)}var Rd=Math.ceil,vd=Math.max;function yd(e){return function(t,r,n){return n&&"number"!=typeof n&&mr(t,r,n)&&(r=n=void 0),t=se(t),void 0===r?(r=t,t=0):r=se(r),function(e,t,r,n){for(var i=-1,o=vd(Rd((t-e)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=e,e+=r;return a}(t,r,n=void 0===n?t<r?1:-1:se(n),e)}}var bd=yd(),Sd=yd(!0),wd=En((function(e,t){return tr(e,256,void 0,void 0,void 0,t)}));function Cd(e,t,r,n,i){return i(e,(function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)})),r}function kd(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}var Bd=Array.prototype.reverse;function Pd(e){return null==e?e:Bd.call(e)}var Md=Yi("round");function xd(e){var t=e.length;return t?e[fd(0,t-1)]:void 0}function Id(e){return xd(lu(e))}function Ed(e,t){var r=-1,n=e.length,i=n-1;for(t=void 0===t?n:t;++r<t;){var o=fd(r,i),a=e[o];e[o]=e[r],e[r]=a}return e.length=t,e}function _d(e,t){return Ed(Je(e),ro(t,0,e.length))}function Od(e,t){var r=lu(e);return Ed(r,ro(t,0,r.length))}function Fd(e){return Ed(Je(e))}function $d(e){return Ed(lu(e))}var Ld=Ui((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}));function Hd(e,t){var r;return xs(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}var Td=dr((function(e,t){if(null==e)return[];var r=t.length;return r>1&&mr(e,t[0],t[1])?t=[]:r>2&&mr(t[0],t[1],t[2])&&(t=[t[0]]),Sc(e,xn(t,1),[])})),Ad=4294967294,Dd=Math.floor,Nd=Math.min;function Wd(e,t,r,n){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=r(t))!=t,s=null===t,l=T(t),u=void 0===t;i<o;){var c=Dd((i+o)/2),d=r(e[c]),f=void 0!==d,h=null===d,p=d==d,m=T(d);if(a)var g=n||p;else g=u?p&&(n||f):s?p&&f&&(n||!h):l?p&&f&&!h&&(n||!m):!h&&!m&&(n?d<=t:d<t);g?i=c+1:o=c}return Nd(o,Ad)}var jd=2147483647;function Gd(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=jd){for(;n<i;){var o=n+i>>>1,a=e[o];null!==a&&!T(a)&&(r?a<=t:a<t)?n=o+1:i=o}return i}return Wd(e,t,ue,r)}function zd(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var a=e[r],s=t?t(a):a;if(!r||!or(s,l)){var l=s;o[i++]=0===a?0:a}}return o}var Vd=Math.max;var qd=Ui((function(e,t,r){return e+(r?" ":"")+hi(t)}));var Ud=q((function(e,t){return e-t}),0);function Kd(e,t){return e&&e.length?Qu(e,Ss(t)):0}var Jd=Object.prototype,Zd=Jd.hasOwnProperty;function Yd(e,t,r,n){return void 0===e||or(e,Jd[r])&&!Zd.call(n,r)?t:e}var Xd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function Qd(e){return"\\"+Xd[e]}var ef=/<%=([\s\S]+?)%>/g,tf={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:ef,variable:"",imports:{_:{escape:wl}}},rf=/\b__p \+= '';/g,nf=/\b(__p \+=) '' \+/g,of=/(__e\(.*?\)|\b__t\)) \+\n'';/g,af=/[()=,{}\[\]\/\s]/,sf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,lf=/($^)/,uf=/['\n\r\u2028\u2029\\]/g,cf=Object.prototype.hasOwnProperty;function df(e,t){return t(e)}var ff=4294967295,hf=Math.min;function pf(e,t){var r=e;return r instanceof je&&(r=r.value()),mi(t,(function(e,t){return t.func.apply(t.thisArg,Bn([e],t.args))}),r)}function mf(){return pf(this.__wrapped__,this.__actions__)}var gf=9007199254740991;function Rf(e,t){for(var r=e.length;r--&&ht(t,e[r],0)>-1;);return r}function vf(e,t){for(var r=-1,n=e.length;++r<n&&ht(t,e[r],0)>-1;);return r}var yf=/^\s+/;var bf=/\w*$/;var Sf=gi({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),wf=/&(?:amp|lt|gt|quot|#39);/g,Cf=RegExp(wf.source);var kf=Co&&1/La(new Co([,-0]))[1]==1/0?function(e){return new Co(e)}:Ge,Bf=200;function Pf(e,t,r){var n=-1,i=pt,o=e.length,a=!0,s=[],l=s;if(r)a=!1,i=el;else if(o>=Bf){var u=t?null:kf(e);if(u)return La(u);a=!1,i=Ea,l=new xa}else l=t?[]:s;e:for(;++n<o;){var c=e[n],d=t?t(c):c;if(c=r||0!==c?c:0,a&&d==d){for(var f=l.length;f--;)if(l[f]===d)continue e;t&&l.push(d),s.push(c)}else i(l,d,r)||(l!==s&&l.push(d),s.push(c))}return s}var Mf=dr((function(e){return Pf(xn(e,1,zs,!0))})),xf=dr((function(e){var t=il(e);return zs(t)&&(t=void 0),Pf(xn(e,1,zs,!0),Ss(t))})),If=dr((function(e){var t=il(e);return t="function"==typeof t?t:void 0,Pf(xn(e,1,zs,!0),void 0,t)}));var Ef=0;var _f=Math.max;function Of(e){if(!e||!e.length)return[];var t=0;return e=fo(e,(function(e){if(zs(e))return t=_f(e.length,t),!0})),yr(t,(function(t){return N(e,ys(t))}))}function Ff(e,t){if(!e||!e.length)return[];var r=Of(e);return null==t?r:N(r,(function(e){return Le(t,void 0,e)}))}function $f(e,t,r,n){return Rc(e,t,r(wn(e,t)),n)}var Lf=Ui((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}));var Hf=dr((function(e,t){return zs(e)?rl(e,t):[]}));var Tf=En((function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,i=function(t){return kn(t,e)};return!(t>1||this.__actions__.length)&&n instanceof je&&Mt(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:df,args:[i],thisArg:void 0}),new Ke(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));function Af(e,t,r){var n=e.length;if(n<2)return n?Pf(e[0]):[];for(var i=-1,o=Array(n);++i<n;)for(var a=e[i],s=-1;++s<n;)s!=i&&(o[i]=rl(o[i]||a,e[s],t,r));return Pf(xn(o,1),t,r)}var Df=dr((function(e){return Af(fo(e,zs))})),Nf=dr((function(e){var t=il(e);return zs(t)&&(t=void 0),Af(fo(e,zs),Ss(t))})),Wf=dr((function(e){var t=il(e);return t="function"==typeof t?t:void 0,Af(fo(e,zs),void 0,t)})),jf=dr(Of);function Gf(e,t,r){for(var n=-1,i=e.length,o=t.length,a={};++n<i;){var s=n<o?t[n]:void 0;r(a,e[n],s)}return a}var zf=dr((function(e){var t=e.length,r=t>1?e[t-1]:void 0;return r="function"==typeof r?(e.pop(),r):void 0,Ff(e,r)})),Vf={chunk:function(e,t,r){t=(r?mr(e,t,r):void 0===t)?1:to(le(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var i=0,o=0,a=Array(eo(n/t));i<n;)a[o++]=Jn(e,i,i+=t);return a},compact:function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var o=e[t];o&&(i[n++]=o)}return i},concat:function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Bn(W(r)?Je(r):[r],xn(t,1))},difference:nl,differenceBy:ol,differenceWith:al,drop:function(e,t,r){var n=null==e?0:e.length;return n?Jn(e,(t=r||void 0===t?1:le(t))<0?0:t,n):[]},dropRight:function(e,t,r){var n=null==e?0:e.length;return n?Jn(e,0,(t=n-(t=r||void 0===t?1:le(t)))<0?0:t):[]},dropRightWhile:function(e,t){return e&&e.length?ll(e,Ss(t),!0,!0):[]},dropWhile:function(e,t){return e&&e.length?ll(e,Ss(t),!0):[]},fill:function(e,t,r,n){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&mr(e,t,r)&&(r=0,n=i),function(e,t,r,n){var i=e.length;for((r=le(r))<0&&(r=-r>i?0:i+r),(n=void 0===n||n>i?i:le(n))<0&&(n+=i),n=r>n?0:xl(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},findIndex:Ol,findLastIndex:Tl,first:Dl,flatten:In,flattenDeep:function(e){return(null==e?0:e.length)?xn(e,Gl):[]},flattenDepth:function(e,t){return(null==e?0:e.length)?xn(e,t=void 0===t?1:le(t)):[]},fromPairs:function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},head:Dl,indexOf:function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:le(r);return i<0&&(i=cu(n+i,0)),ht(e,t,i)},initial:function(e){return(null==e?0:e.length)?Jn(e,0,-1):[]},intersection:pu,intersectionBy:mu,intersectionWith:gu,join:function(e,t){return null==e?"":ju.call(e,t)},last:il,lastIndexOf:function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n;return void 0!==r&&(i=(i=le(r))<0?Vu(n+i,0):qu(i,n-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,i):dt(e,ft,i,!0)},nth:function(e,t){return e&&e.length?hc(e,le(t)):void 0},pull:ad,pullAll:od,pullAllBy:function(e,t,r){return e&&e.length&&t&&t.length?id(e,t,Ss(r)):e},pullAllWith:function(e,t,r){return e&&e.length&&t&&t.length?id(e,t,void 0,r):e},pullAt:ud,remove:function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],o=e.length;for(t=Ss(t);++n<o;){var a=e[n];t(a,n,e)&&(r.push(a),i.push(n))}return ld(e,i),r},reverse:Pd,slice:function(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&mr(e,t,r)?(t=0,r=n):(t=null==t?0:le(t),r=void 0===r?n:le(r)),Jn(e,t,r)):[]},sortedIndex:function(e,t){return Gd(e,t)},sortedIndexBy:function(e,t,r){return Wd(e,t,Ss(r))},sortedIndexOf:function(e,t){var r=null==e?0:e.length;if(r){var n=Gd(e,t);if(n<r&&or(e[n],t))return n}return-1},sortedLastIndex:function(e,t){return Gd(e,t,!0)},sortedLastIndexBy:function(e,t,r){return Wd(e,t,Ss(r),!0)},sortedLastIndexOf:function(e,t){if(null==e?0:e.length){var r=Gd(e,t,!0)-1;if(or(e[r],t))return r}return-1},sortedUniq:function(e){return e&&e.length?zd(e):[]},sortedUniqBy:function(e,t){return e&&e.length?zd(e,Ss(t)):[]},tail:function(e){var t=null==e?0:e.length;return t?Jn(e,1,t):[]},take:function(e,t,r){return e&&e.length?Jn(e,0,(t=r||void 0===t?1:le(t))<0?0:t):[]},takeRight:function(e,t,r){var n=null==e?0:e.length;return n?Jn(e,(t=n-(t=r||void 0===t?1:le(t)))<0?0:t,n):[]},takeRightWhile:function(e,t){return e&&e.length?ll(e,Ss(t),!1,!0):[]},takeWhile:function(e,t){return e&&e.length?ll(e,Ss(t)):[]},union:Mf,unionBy:xf,unionWith:If,uniq:function(e){return e&&e.length?Pf(e):[]},uniqBy:function(e,t){return e&&e.length?Pf(e,Ss(t)):[]},uniqWith:function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Pf(e,void 0,t):[]},unzip:Of,unzipWith:Ff,without:Hf,xor:Df,xorBy:Nf,xorWith:Wf,zip:jf,zipObject:function(e,t){return Gf(e||[],t||[],sr)},zipObjectDeep:function(e,t){return Gf(e||[],t||[],Rc)},zipWith:zf},qf={countBy:Os,each:cl,eachRight:ml,every:function(e,t,r){var n=W(e)?Bl:Pl;return r&&mr(e,t,r)&&(t=void 0),n(e,Ss(t))},filter:function(e,t){return(W(e)?fo:Il)(e,Ss(t))},find:Fl,findLast:Al,flatMap:function(e,t){return xn(Wl(e,t),1)},flatMapDeep:function(e,t){return xn(Wl(e,t),jl)},flatMapDepth:function(e,t,r){return r=void 0===r?1:le(r),xn(Wl(e,t),r)},forEach:cl,forEachRight:ml,groupBy:Zl,includes:function(e,t,r,n){e=pr(e)?e:lu(e),r=r&&!n?le(r):0;var i=e.length;return r<0&&(r=uu(i+r,0)),au(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&ht(e,t,r)>-1},invokeMap:Mu,keyBy:zu,map:Wl,orderBy:function(e,t,r,n){return null==e?[]:(W(t)||(t=null==t?[]:[t]),W(r=n?void 0:r)||(r=null==r?[]:[r]),Sc(e,t,r))},partition:ed,reduce:function(e,t,r){var n=W(e)?mi:Cd,i=arguments.length<3;return n(e,Ss(t),r,i,xs)},reduceRight:function(e,t,r){var n=W(e)?kd:Cd,i=arguments.length<3;return n(e,Ss(t),r,i,pl)},reject:function(e,t){return(W(e)?fo:Il)(e,lc(Ss(t)))},sample:function(e){return(W(e)?xd:Id)(e)},sampleSize:function(e,t,r){return t=(r?mr(e,t,r):void 0===t)?1:le(t),(W(e)?_d:Od)(e,t)},shuffle:function(e){return(W(e)?Fd:$d)(e)},size:function(e){if(null==e)return 0;if(pr(e))return au(e)?Vc(e):e.length;var t=Lo(e);return"[object Map]"==t||"[object Set]"==t?e.size:Gr(e).length},some:function(e,t,r){var n=W(e)?Ia:Hd;return r&&mr(e,t,r)&&(t=void 0),n(e,Ss(t))},sortBy:Td},Uf=Ls,Kf={after:function(e,t){if("function"!=typeof t)throw new TypeError("Expected a function");return e=le(e),function(){if(--e<1)return t.apply(this,arguments)}},ary:nr,before:Vn,bind:qn,bindKey:Kn,curry:Fs,curryRight:$s,debounce:Ds,defer:Xs,delay:Qs,flip:function(e){return tr(e,512)},memoize:pn,negate:lc,once:function(e){return Vn(2,e)},overArgs:Pc,partial:Xc,partialRight:Qc,rearg:wd,rest:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return dr(e,t=void 0===t?t:le(t))},spread:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=null==t?0:Vd(le(t),0),dr((function(r){var n=r[t],i=Zn(r,0,t);return n&&Bn(i,n),Le(e,this,i)}))},throttle:function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return X(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Ds(e,t,{leading:n,maxWait:t,trailing:i})},unary:function(e){return nr(e,1)},wrap:function(e,t){return Xc(ul(t),e)}},Jf={castArray:function(){if(!arguments.length)return[];var e=arguments[0];return W(e)?e:[e]},clone:ka,cloneDeep:Ma,cloneDeepWith:function(e,t){return wa(e,5,t="function"==typeof t?t:void 0)},cloneWith:function(e,t){return wa(e,4,t="function"==typeof t?t:void 0)},conformsTo:function(e,t){return null==t||ws(e,t,zr(t))},eq:or,gt:Ql,gte:eu,isArguments:kr,isArray:W,isArrayBuffer:Iu,isArrayLike:pr,isArrayLikeObject:zs,isBoolean:function(e){return!0===e||!1===e||L(e)&&"[object Boolean]"==$(e)},isBuffer:Ir,isDate:_u,isElement:function(e){return L(e)&&1===e.nodeType&&!Dn(e)},isEmpty:function(e){if(null==e)return!0;if(pr(e)&&(W(e)||"string"==typeof e||"function"==typeof e.splice||Ir(e)||Tr(e)||kr(e)))return!e.length;var t=Lo(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(vr(e))return!Gr(e).length;for(var r in e)if(Ou.call(e,r))return!1;return!0},isEqual:Fu,isEqualWith:function(e,t,r){var n=(r="function"==typeof r?r:void 0)?r(e,t):void 0;return void 0===n?os(e,t,void 0,r):!!n},isError:jn,isFinite:function(e){return"number"==typeof e&&$u(e)},isFunction:pe,isInteger:Lu,isLength:hr,isMap:da,isMatch:function(e,t){return e===t||ls(e,t,cs(t))},isMatchWith:function(e,t,r){return r="function"==typeof r?r:void 0,ls(e,t,cs(t),r)},isNaN:function(e){return Tu(e)&&e!=+e},isNative:function(e){if(Au(e))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pe(e)},isNil:function(e){return null==e},isNull:function(e){return null===e},isNumber:Tu,isObject:X,isObjectLike:L,isPlainObject:Dn,isRegExp:Nu,isSafeInteger:function(e){return Lu(e)&&e>=-9007199254740991&&e<=Wu},isSet:ha,isString:au,isSymbol:T,isTypedArray:Tr,isUndefined:function(e){return void 0===e},isWeakMap:function(e){return L(e)&&"[object WeakMap]"==Lo(e)},isWeakSet:function(e){return L(e)&&"[object WeakSet]"==$(e)},lt:Zu,lte:Yu,toArray:fc,toFinite:se,toInteger:le,toLength:xl,toNumber:ie,toPlainObject:qs,toSafeInteger:function(e){return e?ro(le(e),-9007199254740991,gf):0===e?e:0},toString:vn},Zf={add:U,ceil:Xi,divide:sl,floor:zl,max:function(e){return e&&e.length?Xu(e,ue,Yl):void 0},maxBy:function(e,t){return e&&e.length?Xu(e,Ss(t),Yl):void 0},mean:function(e){return tc(e,ue)},meanBy:function(e,t){return tc(e,Ss(t))},min:function(e){return e&&e.length?Xu(e,ue,Ju):void 0},minBy:function(e,t){return e&&e.length?Xu(e,Ss(t),Ju):void 0},multiply:ac,round:Md,subtract:Ud,sum:function(e){return e&&e.length?Qu(e,ue):0},sumBy:Kd},Yf=no,Xf=function(e,t,r){return t=se(t),void 0===r?(r=t,t=0):r=se(r),function(e,t,r){return e>=iu(t,r)&&e<nu(t,r)}(e=ie(e),t,r)},Qf=gd,eh={assign:qr,assignIn:Zr,assignInWith:Yr,assignWith:Xr,at:_n,create:function(e,t){var r=Oe(e);return null==t?r:oo(r,t)},defaults:js,defaultsDeep:Zs,entries:Rl,entriesIn:vl,extend:Zr,extendWith:Yr,findKey:function(e,t){return $l(e,Ss(t),Ps)},findLastKey:function(e,t){return $l(e,Ss(t),hl)},forIn:function(e,t){return null==e?e:Bs(e,ul(t),Jr)},forInRight:function(e,t){return null==e?e:fl(e,ul(t),Jr)},forOwn:function(e,t){return e&&Ps(e,ul(t))},forOwnRight:function(e,t){return e&&hl(e,ul(t))},functions:function(e){return null==e?[]:Kl(e,zr(e))},functionsIn:function(e){return null==e?[]:Kl(e,Jr(e))},get:Cn,has:function(e,t){return null!=e&&ps(e,t,ru)},hasIn:ms,invert:yu,invertBy:Cu,invoke:Pu,keys:zr,keysIn:Jr,mapKeys:function(e,t){var r={};return t=Ss(t),Ps(e,(function(e,n,i){ir(r,t(e,n,i),e)})),r},mapValues:function(e,t){var r={};return t=Ss(t),Ps(e,(function(e,n,i){ir(r,n,t(e,n,i))})),r},merge:rc,mergeWith:Js,omit:gc,omitBy:function(e,t){return yc(e,lc(Ss(t)))},pick:td,pickBy:yc,result:function(e,t,r){var n=-1,i=(t=yn(t,e)).length;for(i||(i=1,e=void 0);++n<i;){var o=null==e?void 0:e[Sn(t[n])];void 0===o&&(n=i,o=r),e=pe(o)?o.call(e):o}return e},set:function(e,t,r){return null==e?e:Rc(e,t,r)},setWith:function(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:Rc(e,t,r,n)},toPairs:Rl,toPairsIn:vl,transform:function(e,t,r){var n=W(e),i=n||Ir(e)||Tr(e);if(t=Ss(t),null==r){var o=e&&e.constructor;r=i?n?new o:[]:X(e)&&pe(o)?Oe(On(e)):{}}return(i?ct:Ps)(e,(function(e,n,i){return t(r,e,n,i)})),r},unset:function(e,t){return null==e||pc(e,t)},update:function(e,t,r){return null==e?e:$f(e,t,ul(r))},updateWith:function(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:$f(e,t,ul(r),n)},values:lu,valuesIn:function(e){return null==e?[]:su(e,Jr(e))}},th={at:Tf,chain:Qi,commit:function(){return new Ke(this.value(),this.__chain__)},lodash:Xe,next:function(){void 0===this.__values__&&(this.__values__=fc(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},plant:function(e){for(var t,r=this;r instanceof Ne;){var n=Ze(r);n.__index__=0,n.__values__=void 0,t?i.__wrapped__=n:t=n;var i=n;r=r.__wrapped__}return i.__wrapped__=e,t},reverse:function(){var e=this.__wrapped__;if(e instanceof je){var t=e;return this.__actions__.length&&(t=new je(this)),(t=t.reverse()).__actions__.push({func:df,args:[Pd],thisArg:void 0}),new Ke(t,this.__chain__)}return this.thru(Pd)},tap:function(e,t){return t(e),e},thru:df,toIterator:function(){return this},toJSON:mf,value:mf,valueOf:mf,wrapperChain:function(){return Qi(this)}},rh={camelCase:Ki,capitalize:pi,deburr:bi,endsWith:function(e,t,r){e=vn(e),t=V(t);var n=e.length,i=r=void 0===r?n:ro(le(r),0,n);return(r-=t.length)>=0&&e.slice(r,i)==t},escape:wl,escapeRegExp:function(e){return(e=vn(e))&&kl.test(e)?e.replace(Cl,"\\$&"):e},kebabCase:Gu,lowerCase:Uu,lowerFirst:Ku,pad:function(e,t,r){e=vn(e);var n=(t=le(t))?Vc(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return Uc(Jc(i),r)+e+Uc(Kc(i),r)},padEnd:function(e,t,r){e=vn(e);var n=(t=le(t))?Vc(e):0;return t&&n<t?e+Uc(t-n,r):e},padStart:function(e,t,r){e=vn(e);var n=(t=le(t))?Vc(e):0;return t&&n<t?Uc(t-n,r)+e:e},parseInt:function(e,t,r){return r||null==t?t=0:t&&(t=+t),Yc(vn(e).replace(Zc,""),t||0)},repeat:function(e,t,r){return t=(r?mr(e,t,r):void 0===t)?1:le(t),_c(vn(e),t)},replace:function(){var e=arguments,t=vn(e[0]);return e.length<3?t:t.replace(e[1],e[2])},snakeCase:Ld,split:function(e,t,r){return r&&"number"!=typeof r&&mr(e,t,r)&&(t=r=void 0),(r=void 0===r?4294967295:r>>>0)?(e=vn(e))&&("string"==typeof t||null!=t&&!Nu(t))&&!(t=V(t))&&Xn(e)?Zn(di(e),0,r):e.split(t,r):[]},startCase:qd,startsWith:function(e,t,r){return e=vn(e),r=null==r?0:ro(le(r),0,e.length),t=V(t),e.slice(r,r+t.length)==t},template:function(e,t,r){var n=tf.imports._.templateSettings||tf;r&&mr(e,t,r)&&(t=void 0),e=vn(e),t=Yr({},t,n,Yd);var i,o,a=Yr({},t.imports,n.imports,Yd),s=zr(a),l=su(a,s),u=0,c=t.interpolate||lf,d="__p += '",f=RegExp((t.escape||lf).source+"|"+c.source+"|"+(c===ef?sf:lf).source+"|"+(t.evaluate||lf).source+"|$","g"),h=cf.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(f,(function(t,r,n,a,s,l){return n||(n=a),d+=e.slice(u,l).replace(uf,Qd),r&&(i=!0,d+="' +\n__e("+r+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),d+="';\n";var p=cf.call(t,"variable")&&t.variable;if(p){if(af.test(p))throw new Error("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(rf,""):d).replace(nf,"$1").replace(of,"$1;"),d="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Gn((function(){return Function(s,h+"return "+d).apply(void 0,l)}));if(m.source=d,jn(m))throw m;return m},templateSettings:tf,toLower:function(e){return vn(e).toLowerCase()},toUpper:function(e){return vn(e).toUpperCase()},trim:function(e,t,r){if((e=vn(e))&&(r||void 0===t))return Y(e);if(!e||!(t=V(t)))return e;var n=di(e),i=di(t);return Zn(n,vf(n,i),Rf(n,i)+1).join("")},trimEnd:function(e,t,r){if((e=vn(e))&&(r||void 0===t))return e.slice(0,J(e)+1);if(!e||!(t=V(t)))return e;var n=di(e);return Zn(n,0,Rf(n,di(t))+1).join("")},trimStart:function(e,t,r){if((e=vn(e))&&(r||void 0===t))return e.replace(yf,"");if(!e||!(t=V(t)))return e;var n=di(e);return Zn(n,vf(n,di(t))).join("")},truncate:function(e,t){var r=30,n="...";if(X(t)){var i="separator"in t?t.separator:i;r="length"in t?le(t.length):r,n="omission"in t?V(t.omission):n}var o=(e=vn(e)).length;if(Xn(e)){var a=di(e);o=a.length}if(r>=o)return e;var s=r-Vc(n);if(s<1)return n;var l=a?Zn(a,0,s).join(""):e.slice(0,s);if(void 0===i)return l+n;if(a&&(s+=l.length-s),Nu(i)){if(e.slice(s).search(i)){var u,c=l;for(i.global||(i=RegExp(i.source,vn(bf.exec(i))+"g")),i.lastIndex=0;u=i.exec(c);)var d=u.index;l=l.slice(0,void 0===d?s:d)}}else if(e.indexOf(V(i),s)!=s){var f=l.lastIndexOf(i);f>-1&&(l=l.slice(0,f))}return l+n},unescape:function(e){return(e=vn(e))&&Cf.test(e)?e.replace(wf,Sf):e},upperCase:Lf,upperFirst:hi,words:Vi},nh={attempt:Gn,bindAll:Un,cond:function(e){var t=null==e?0:e.length,r=Ss;return e=t?N(e,(function(e){if("function"!=typeof e[1])throw new TypeError("Expected a function");return[r(e[0]),e[1]]})):[],dr((function(r){for(var n=-1;++n<t;){var i=e[n];if(Le(i[0],this,r))return Le(i[1],this,r)}}))},conforms:function(e){return function(e){var t=zr(e);return function(r){return ws(r,e,t)}}(wa(e,1))},constant:at,defaultTo:function(e,t){return null==e||e!=e?t:e},flow:ql,flowRight:Ul,identity:ue,iteratee:function(e){return Ss("function"==typeof e?e:wa(e,1))},matches:function(e){return fs(wa(e,1))},matchesProperty:function(e,t){return vs(e,wa(t,1))},method:nc,methodOf:ic,mixin:oc,noop:Ge,nthArg:function(e){return e=le(e),dr((function(t){return hc(t,e)}))},over:Cc,overEvery:Mc,overSome:xc,property:bs,propertyOf:function(e){return function(t){return null==e?void 0:wn(e,t)}},range:bd,rangeRight:Sd,stubArray:ho,stubFalse:Br,stubObject:function(){return{}},stubString:function(){return""},stubTrue:function(){return!0},times:function(e,t){if((e=le(e))<1||e>9007199254740991)return[];var r=ff,n=hf(e,ff);t=ul(t),e-=ff;for(var i=yr(n,t);++r<e;)t(r);return i},toPath:function(e){return W(e)?N(e,Sn):T(e)?[e]:Je(Rn(vn(e)))},uniqueId:function(e){var t=++Ef;return vn(e)+t}};var ih=Math.max,oh=Math.min;var ah=Math.min;
/**
	 * @license
	 * Lodash (Custom Build) <https://lodash.com/>
	 * Build: `lodash modularize exports="es" -o ./`
	 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	 * Released under MIT license <https://lodash.com/license>
	 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 */
var sh,lh=4294967295,uh=Array.prototype,ch=Object.prototype.hasOwnProperty,dh=B?B.iterator:void 0,fh=Math.max,hh=Math.min,ph=function(e){return function(t,r,n){if(null==n){var i=X(r),o=i&&zr(r),a=o&&o.length&&Kl(r,o);(a?a.length:i)||(n=r,r=t,t=this)}return e(t,r,n)}}(oc);Xe.after=Kf.after,Xe.ary=Kf.ary,Xe.assign=eh.assign,Xe.assignIn=eh.assignIn,Xe.assignInWith=eh.assignInWith,Xe.assignWith=eh.assignWith,Xe.at=eh.at,Xe.before=Kf.before,Xe.bind=Kf.bind,Xe.bindAll=nh.bindAll,Xe.bindKey=Kf.bindKey,Xe.castArray=Jf.castArray,Xe.chain=th.chain,Xe.chunk=Vf.chunk,Xe.compact=Vf.compact,Xe.concat=Vf.concat,Xe.cond=nh.cond,Xe.conforms=nh.conforms,Xe.constant=nh.constant,Xe.countBy=qf.countBy,Xe.create=eh.create,Xe.curry=Kf.curry,Xe.curryRight=Kf.curryRight,Xe.debounce=Kf.debounce,Xe.defaults=eh.defaults,Xe.defaultsDeep=eh.defaultsDeep,Xe.defer=Kf.defer,Xe.delay=Kf.delay,Xe.difference=Vf.difference,Xe.differenceBy=Vf.differenceBy,Xe.differenceWith=Vf.differenceWith,Xe.drop=Vf.drop,Xe.dropRight=Vf.dropRight,Xe.dropRightWhile=Vf.dropRightWhile,Xe.dropWhile=Vf.dropWhile,Xe.fill=Vf.fill,Xe.filter=qf.filter,Xe.flatMap=qf.flatMap,Xe.flatMapDeep=qf.flatMapDeep,Xe.flatMapDepth=qf.flatMapDepth,Xe.flatten=Vf.flatten,Xe.flattenDeep=Vf.flattenDeep,Xe.flattenDepth=Vf.flattenDepth,Xe.flip=Kf.flip,Xe.flow=nh.flow,Xe.flowRight=nh.flowRight,Xe.fromPairs=Vf.fromPairs,Xe.functions=eh.functions,Xe.functionsIn=eh.functionsIn,Xe.groupBy=qf.groupBy,Xe.initial=Vf.initial,Xe.intersection=Vf.intersection,Xe.intersectionBy=Vf.intersectionBy,Xe.intersectionWith=Vf.intersectionWith,Xe.invert=eh.invert,Xe.invertBy=eh.invertBy,Xe.invokeMap=qf.invokeMap,Xe.iteratee=nh.iteratee,Xe.keyBy=qf.keyBy,Xe.keys=zr,Xe.keysIn=eh.keysIn,Xe.map=qf.map,Xe.mapKeys=eh.mapKeys,Xe.mapValues=eh.mapValues,Xe.matches=nh.matches,Xe.matchesProperty=nh.matchesProperty,Xe.memoize=Kf.memoize,Xe.merge=eh.merge,Xe.mergeWith=eh.mergeWith,Xe.method=nh.method,Xe.methodOf=nh.methodOf,Xe.mixin=ph,Xe.negate=lc,Xe.nthArg=nh.nthArg,Xe.omit=eh.omit,Xe.omitBy=eh.omitBy,Xe.once=Kf.once,Xe.orderBy=qf.orderBy,Xe.over=nh.over,Xe.overArgs=Kf.overArgs,Xe.overEvery=nh.overEvery,Xe.overSome=nh.overSome,Xe.partial=Kf.partial,Xe.partialRight=Kf.partialRight,Xe.partition=qf.partition,Xe.pick=eh.pick,Xe.pickBy=eh.pickBy,Xe.property=nh.property,Xe.propertyOf=nh.propertyOf,Xe.pull=Vf.pull,Xe.pullAll=Vf.pullAll,Xe.pullAllBy=Vf.pullAllBy,Xe.pullAllWith=Vf.pullAllWith,Xe.pullAt=Vf.pullAt,Xe.range=nh.range,Xe.rangeRight=nh.rangeRight,Xe.rearg=Kf.rearg,Xe.reject=qf.reject,Xe.remove=Vf.remove,Xe.rest=Kf.rest,Xe.reverse=Vf.reverse,Xe.sampleSize=qf.sampleSize,Xe.set=eh.set,Xe.setWith=eh.setWith,Xe.shuffle=qf.shuffle,Xe.slice=Vf.slice,Xe.sortBy=qf.sortBy,Xe.sortedUniq=Vf.sortedUniq,Xe.sortedUniqBy=Vf.sortedUniqBy,Xe.split=rh.split,Xe.spread=Kf.spread,Xe.tail=Vf.tail,Xe.take=Vf.take,Xe.takeRight=Vf.takeRight,Xe.takeRightWhile=Vf.takeRightWhile,Xe.takeWhile=Vf.takeWhile,Xe.tap=th.tap,Xe.throttle=Kf.throttle,Xe.thru=df,Xe.toArray=Jf.toArray,Xe.toPairs=eh.toPairs,Xe.toPairsIn=eh.toPairsIn,Xe.toPath=nh.toPath,Xe.toPlainObject=Jf.toPlainObject,Xe.transform=eh.transform,Xe.unary=Kf.unary,Xe.union=Vf.union,Xe.unionBy=Vf.unionBy,Xe.unionWith=Vf.unionWith,Xe.uniq=Vf.uniq,Xe.uniqBy=Vf.uniqBy,Xe.uniqWith=Vf.uniqWith,Xe.unset=eh.unset,Xe.unzip=Vf.unzip,Xe.unzipWith=Vf.unzipWith,Xe.update=eh.update,Xe.updateWith=eh.updateWith,Xe.values=eh.values,Xe.valuesIn=eh.valuesIn,Xe.without=Vf.without,Xe.words=rh.words,Xe.wrap=Kf.wrap,Xe.xor=Vf.xor,Xe.xorBy=Vf.xorBy,Xe.xorWith=Vf.xorWith,Xe.zip=Vf.zip,Xe.zipObject=Vf.zipObject,Xe.zipObjectDeep=Vf.zipObjectDeep,Xe.zipWith=Vf.zipWith,Xe.entries=eh.toPairs,Xe.entriesIn=eh.toPairsIn,Xe.extend=eh.assignIn,Xe.extendWith=eh.assignInWith,ph(Xe,Xe),Xe.add=Zf.add,Xe.attempt=nh.attempt,Xe.camelCase=rh.camelCase,Xe.capitalize=rh.capitalize,Xe.ceil=Zf.ceil,Xe.clamp=Yf,Xe.clone=Jf.clone,Xe.cloneDeep=Jf.cloneDeep,Xe.cloneDeepWith=Jf.cloneDeepWith,Xe.cloneWith=Jf.cloneWith,Xe.conformsTo=Jf.conformsTo,Xe.deburr=rh.deburr,Xe.defaultTo=nh.defaultTo,Xe.divide=Zf.divide,Xe.endsWith=rh.endsWith,Xe.eq=Jf.eq,Xe.escape=rh.escape,Xe.escapeRegExp=rh.escapeRegExp,Xe.every=qf.every,Xe.find=qf.find,Xe.findIndex=Vf.findIndex,Xe.findKey=eh.findKey,Xe.findLast=qf.findLast,Xe.findLastIndex=Vf.findLastIndex,Xe.findLastKey=eh.findLastKey,Xe.floor=Zf.floor,Xe.forEach=qf.forEach,Xe.forEachRight=qf.forEachRight,Xe.forIn=eh.forIn,Xe.forInRight=eh.forInRight,Xe.forOwn=eh.forOwn,Xe.forOwnRight=eh.forOwnRight,Xe.get=eh.get,Xe.gt=Jf.gt,Xe.gte=Jf.gte,Xe.has=eh.has,Xe.hasIn=eh.hasIn,Xe.head=Vf.head,Xe.identity=ue,Xe.includes=qf.includes,Xe.indexOf=Vf.indexOf,Xe.inRange=Xf,Xe.invoke=eh.invoke,Xe.isArguments=Jf.isArguments,Xe.isArray=W,Xe.isArrayBuffer=Jf.isArrayBuffer,Xe.isArrayLike=Jf.isArrayLike,Xe.isArrayLikeObject=Jf.isArrayLikeObject,Xe.isBoolean=Jf.isBoolean,Xe.isBuffer=Jf.isBuffer,Xe.isDate=Jf.isDate,Xe.isElement=Jf.isElement,Xe.isEmpty=Jf.isEmpty,Xe.isEqual=Jf.isEqual,Xe.isEqualWith=Jf.isEqualWith,Xe.isError=Jf.isError,Xe.isFinite=Jf.isFinite,Xe.isFunction=Jf.isFunction,Xe.isInteger=Jf.isInteger,Xe.isLength=Jf.isLength,Xe.isMap=Jf.isMap,Xe.isMatch=Jf.isMatch,Xe.isMatchWith=Jf.isMatchWith,Xe.isNaN=Jf.isNaN,Xe.isNative=Jf.isNative,Xe.isNil=Jf.isNil,Xe.isNull=Jf.isNull,Xe.isNumber=Jf.isNumber,Xe.isObject=X,Xe.isObjectLike=Jf.isObjectLike,Xe.isPlainObject=Jf.isPlainObject,Xe.isRegExp=Jf.isRegExp,Xe.isSafeInteger=Jf.isSafeInteger,Xe.isSet=Jf.isSet,Xe.isString=Jf.isString,Xe.isSymbol=Jf.isSymbol,Xe.isTypedArray=Jf.isTypedArray,Xe.isUndefined=Jf.isUndefined,Xe.isWeakMap=Jf.isWeakMap,Xe.isWeakSet=Jf.isWeakSet,Xe.join=Vf.join,Xe.kebabCase=rh.kebabCase,Xe.last=il,Xe.lastIndexOf=Vf.lastIndexOf,Xe.lowerCase=rh.lowerCase,Xe.lowerFirst=rh.lowerFirst,Xe.lt=Jf.lt,Xe.lte=Jf.lte,Xe.max=Zf.max,Xe.maxBy=Zf.maxBy,Xe.mean=Zf.mean,Xe.meanBy=Zf.meanBy,Xe.min=Zf.min,Xe.minBy=Zf.minBy,Xe.stubArray=nh.stubArray,Xe.stubFalse=nh.stubFalse,Xe.stubObject=nh.stubObject,Xe.stubString=nh.stubString,Xe.stubTrue=nh.stubTrue,Xe.multiply=Zf.multiply,Xe.nth=Vf.nth,Xe.noop=nh.noop,Xe.now=Uf,Xe.pad=rh.pad,Xe.padEnd=rh.padEnd,Xe.padStart=rh.padStart,Xe.parseInt=rh.parseInt,Xe.random=Qf,Xe.reduce=qf.reduce,Xe.reduceRight=qf.reduceRight,Xe.repeat=rh.repeat,Xe.replace=rh.replace,Xe.result=eh.result,Xe.round=Zf.round,Xe.sample=qf.sample,Xe.size=qf.size,Xe.snakeCase=rh.snakeCase,Xe.some=qf.some,Xe.sortedIndex=Vf.sortedIndex,Xe.sortedIndexBy=Vf.sortedIndexBy,Xe.sortedIndexOf=Vf.sortedIndexOf,Xe.sortedLastIndex=Vf.sortedLastIndex,Xe.sortedLastIndexBy=Vf.sortedLastIndexBy,Xe.sortedLastIndexOf=Vf.sortedLastIndexOf,Xe.startCase=rh.startCase,Xe.startsWith=rh.startsWith,Xe.subtract=Zf.subtract,Xe.sum=Zf.sum,Xe.sumBy=Zf.sumBy,Xe.template=rh.template,Xe.times=nh.times,Xe.toFinite=Jf.toFinite,Xe.toInteger=le,Xe.toLength=Jf.toLength,Xe.toLower=rh.toLower,Xe.toNumber=Jf.toNumber,Xe.toSafeInteger=Jf.toSafeInteger,Xe.toString=Jf.toString,Xe.toUpper=rh.toUpper,Xe.trim=rh.trim,Xe.trimEnd=rh.trimEnd,Xe.trimStart=rh.trimStart,Xe.truncate=rh.truncate,Xe.unescape=rh.unescape,Xe.uniqueId=nh.uniqueId,Xe.upperCase=rh.upperCase,Xe.upperFirst=rh.upperFirst,Xe.each=qf.forEach,Xe.eachRight=qf.forEachRight,Xe.first=Vf.head,ph(Xe,(sh={},Ps(Xe,(function(e,t){ch.call(Xe.prototype,t)||(sh[t]=e)})),sh),{chain:!1}),Xe.VERSION="4.17.21",(Xe.templateSettings=rh.templateSettings).imports._=Xe,ct(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Xe[e].placeholder=Xe})),ct(["drop","take"],(function(e,t){je.prototype[e]=function(r){r=void 0===r?1:fh(le(r),0);var n=this.__filtered__&&!t?new je(this):this.clone();return n.__filtered__?n.__takeCount__=hh(r,n.__takeCount__):n.__views__.push({size:hh(r,lh),type:e+(n.__dir__<0?"Right":"")}),n},je.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),ct(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;je.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ss(e),type:r}),t.__filtered__=t.__filtered__||n,t}})),ct(["head","last"],(function(e,t){var r="take"+(t?"Right":"");je.prototype[e]=function(){return this[r](1).value()[0]}})),ct(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");je.prototype[e]=function(){return this.__filtered__?new je(this):this[r](1)}})),je.prototype.compact=function(){return this.filter(ue)},je.prototype.find=function(e){return this.filter(e).head()},je.prototype.findLast=function(e){return this.reverse().find(e)},je.prototype.invokeMap=dr((function(e,t){return"function"==typeof e?new je(this):this.map((function(r){return Bu(r,e,t)}))})),je.prototype.reject=function(e){return this.filter(lc(Ss(e)))},je.prototype.slice=function(e,t){e=le(e);var r=this;return r.__filtered__&&(e>0||t<0)?new je(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),void 0!==t&&(r=(t=le(t))<0?r.dropRight(-t):r.take(t-e)),r)},je.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},je.prototype.toArray=function(){return this.take(lh)},Ps(je.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),i=Xe[n?"take"+("last"==t?"Right":""):t],o=n||/^find/.test(t);i&&(Xe.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,s=t instanceof je,l=a[0],u=s||W(t),c=function(e){var t=i.apply(Xe,Bn([e],a));return n&&d?t[0]:t};u&&r&&"function"==typeof l&&1!=l.length&&(s=u=!1);var d=this.__chain__,f=!!this.__actions__.length,h=o&&!d,p=s&&!f;if(!o&&u){t=p?t:new je(this);var m=e.apply(t,a);return m.__actions__.push({func:df,args:[c],thisArg:void 0}),new Ke(m,d)}return h&&p?e.apply(this,a):(m=this.thru(c),h?n?m.value()[0]:m.value():m)})})),ct(["pop","push","shift","sort","splice","unshift"],(function(e){var t=uh[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Xe.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(W(i)?i:[],e)}return this[r]((function(r){return t.apply(W(r)?r:[],e)}))}})),Ps(je.prototype,(function(e,t){var r=Xe[t];if(r){var n=r.name+"";ch.call(Ve,n)||(Ve[n]=[]),Ve[n].push({name:t,func:r})}})),Ve[Tt(void 0,2).name]=[{name:"wrapper",func:void 0}],je.prototype.clone=function(){var e=new je(this.__wrapped__);return e.__actions__=Je(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Je(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Je(this.__views__),e},je.prototype.reverse=function(){if(this.__filtered__){var e=new je(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},je.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=W(e),n=t<0,i=r?e.length:0,o=function(e,t,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=oh(t,e+a);break;case"takeRight":e=ih(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=n?s:a-1,c=this.__iteratees__,d=c.length,f=0,h=ah(l,this.__takeCount__);if(!r||!n&&i==l&&h==l)return pf(e,this.__actions__);var p=[];e:for(;l--&&f<h;){for(var m=-1,g=e[u+=t];++m<d;){var R=c[m],v=R.iteratee,y=R.type,b=v(g);if(2==y)g=b;else if(!b){if(1==y)continue e;break e}}p[f++]=g}return p},Xe.prototype.at=th.at,Xe.prototype.chain=th.wrapperChain,Xe.prototype.commit=th.commit,Xe.prototype.next=th.next,Xe.prototype.plant=th.plant,Xe.prototype.reverse=th.reverse,Xe.prototype.toJSON=Xe.prototype.valueOf=Xe.prototype.value=th.value,Xe.prototype.first=Xe.prototype.head,dh&&(Xe.prototype[dh]=th.toIterator)
/**
	 * @license
	 * Lodash (Custom Build) <https://lodash.com/>
	 * Build: `lodash modularize exports="es" -o ./`
	 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	 * Released under MIT license <https://lodash.com/license>
	 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 */;var mh={};!function(e){!function(){const t="1.1.0";function r(e){alert("Mod ERROR:\n"+e);const t=new Error(e);throw console.error(t),t}const n=new TextEncoder;function i(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function o(e){const t=new Set;return e.filter((e=>!t.has(e)&&t.add(e)))}const a=new Map,s=new Set;function l(e){s.has(e)||(s.add(e),console.warn(e))}function u(e){const t=[],r=new Map,n=new Set;for(const i of h.values()){const o=i.patching.get(e.name);if(o){t.push(...o.hooks);for(const[t,a]of o.patches.entries())r.has(t)&&r.get(t)!==a&&l(`ModSDK: Mod '${i.name}' is patching function ${e.name} with same pattern that is already applied by different mod, but with different pattern:\nPattern:\n${t}\nPatch1:\n${r.get(t)||""}\nPatch2:\n${a}`),r.set(t,a),n.add(i.name)}}t.sort(((e,t)=>t.priority-e.priority));const i=function(e,t){if(0===t.size)return e;let r=e.toString().replaceAll("\r\n","\n");for(const[n,i]of t.entries())r.includes(n)||l(`ModSDK: Patching ${e.name}: Patch ${n} not applied`),r=r.replaceAll(n,i);return(0,eval)(`(${r})`)}(e.original,r);let o=function(t){var r,o;const a=null===(o=(r=R.errorReporterHooks).hookChainExit)||void 0===o?void 0:o.call(r,e.name,n),s=i.apply(this,t);return null==a||a(),s};for(let r=t.length-1;r>=0;r--){const n=t[r],i=o;o=function(t){var r,o;const a=null===(o=(r=R.errorReporterHooks).hookEnter)||void 0===o?void 0:o.call(r,e.name,n.mod),s=n.hook.apply(this,[t,e=>{if(1!==arguments.length||!Array.isArray(t))throw new Error(`Mod ${n.mod} failed to call next hook: Expected args to be array, got ${typeof e}`);return i.call(this,e)}]);return null==a||a(),s}}return{hooks:t,patches:r,patchesSources:n,enter:o,final:i}}function c(e,t=!1){let r=a.get(e);if(r)t&&(r.precomputed=u(r));else{let t=window;const o=e.split(".");for(let r=0;r<o.length-1;r++)if(t=t[o[r]],!i(t))throw new Error(`ModSDK: Function ${e} to be patched not found; ${o.slice(0,r+1).join(".")} is not object`);const s=t[o[o.length-1]];if("function"!=typeof s)throw new Error(`ModSDK: Function ${e} to be patched not found`);const l=function(e){let t=-1;for(const r of n.encode(e)){let e=255&(t^r);for(let t=0;t<8;t++)e=1&e?-306674912^e>>>1:e>>>1;t=t>>>8^e}return(~t>>>0).toString(16).padStart(8,"0").toUpperCase()}(s.toString().replaceAll("\r\n","\n")),c={name:e,original:s,originalHash:l};r=Object.assign(Object.assign({},c),{precomputed:u(c),router:()=>{},context:t,contextProperty:o[o.length-1]}),r.router=function(e){return function(...t){return e.precomputed.enter.apply(this,[t])}}(r),a.set(e,r),t[r.contextProperty]=r.router}return r}function d(){const e=new Set;for(const t of h.values())for(const r of t.patching.keys())e.add(r);for(const t of a.keys())e.add(t);for(const t of e)c(t,!0)}function f(){const e=new Map;for(const[t,r]of a)e.set(t,{name:t,original:r.original,originalHash:r.originalHash,sdkEntrypoint:r.router,currentEntrypoint:r.context[r.contextProperty],hookedByMods:o(r.precomputed.hooks.map((e=>e.mod))),patchedByMods:Array.from(r.precomputed.patchesSources)});return e}const h=new Map;function p(e){h.get(e.name)!==e&&r(`Failed to unload mod '${e.name}': Not registered`),h.delete(e.name),e.loaded=!1,d()}function m(e,t,n){"string"==typeof e&&"string"==typeof t&&(alert(`Mod SDK warning: Mod '${e}' is registering in a deprecated way.\nIt will work for now, but please inform author to update.`),e={name:e,fullName:e,version:t},t={allowReplace:!0===n}),e&&"object"==typeof e||r("Failed to register mod: Expected info object, got "+typeof e),"string"==typeof e.name&&e.name||r("Failed to register mod: Expected name to be non-empty string, got "+typeof e.name);let o=`'${e.name}'`;"string"==typeof e.fullName&&e.fullName||r(`Failed to register mod ${o}: Expected fullName to be non-empty string, got ${typeof e.fullName}`),o=`'${e.fullName} (${e.name})'`,"string"!=typeof e.version&&r(`Failed to register mod ${o}: Expected version to be string, got ${typeof e.version}`),e.repository||(e.repository=void 0),void 0!==e.repository&&"string"!=typeof e.repository&&r(`Failed to register mod ${o}: Expected repository to be undefined or string, got ${typeof e.version}`),null==t&&(t={}),t&&"object"==typeof t||r(`Failed to register mod ${o}: Expected options to be undefined or object, got ${typeof t}`);const a=!0===t.allowReplace,s=h.get(e.name);s&&(s.allowReplace&&a||r(`Refusing to load mod ${o}: it is already loaded and doesn't allow being replaced.\nWas the mod loaded multiple times?`),p(s));const l=e=>{"string"==typeof e&&e||r(`Mod ${o} failed to patch a function: Expected function name string, got ${typeof e}`);let t=f.patching.get(e);return t||(t={hooks:[],patches:new Map},f.patching.set(e,t)),t},u={unload:()=>p(f),hookFunction:(e,t,n)=>{f.loaded||r(`Mod ${o} attempted to call SDK function after being unloaded`);const i=l(e);"number"!=typeof t&&r(`Mod ${o} failed to hook function '${e}': Expected priority number, got ${typeof t}`),"function"!=typeof n&&r(`Mod ${o} failed to hook function '${e}': Expected hook function, got ${typeof n}`);const a={mod:f.name,priority:t,hook:n};return i.hooks.push(a),d(),()=>{const e=i.hooks.indexOf(a);e>=0&&(i.hooks.splice(e,1),d())}},patchFunction:(e,t)=>{f.loaded||r(`Mod ${o} attempted to call SDK function after being unloaded`);const n=l(e);i(t)||r(`Mod ${o} failed to patch function '${e}': Expected patches object, got ${typeof t}`);for(const[i,a]of Object.entries(t))"string"==typeof a?n.patches.set(i,a):null===a?n.patches.delete(i):r(`Mod ${o} failed to patch function '${e}': Invalid format of patch '${i}'`);d()},removePatches:e=>{f.loaded||r(`Mod ${o} attempted to call SDK function after being unloaded`),l(e).patches.clear(),d()},callOriginal:(e,t,n)=>(f.loaded||r(`Mod ${o} attempted to call SDK function after being unloaded`),"string"==typeof e&&e||r(`Mod ${o} failed to call a function: Expected function name string, got ${typeof e}`),Array.isArray(t)||r(`Mod ${o} failed to call a function: Expected args array, got ${typeof t}`),function(e,t,r=window){return c(e).original.apply(r,t)}(e,t,n)),getOriginalHash:e=>("string"==typeof e&&e||r(`Mod ${o} failed to get hash: Expected function name string, got ${typeof e}`),c(e).originalHash)},f={name:e.name,fullName:e.fullName,version:e.version,repository:e.repository,allowReplace:a,api:u,loaded:!0,patching:new Map};return h.set(e.name,f),Object.freeze(u)}function g(){const e=[];for(const t of h.values())e.push({name:t.name,fullName:t.fullName,version:t.version,repository:t.repository});return e}let R;const v=function(){if(void 0===window.bcModSdk)return window.bcModSdk=function(){const e={version:t,apiVersion:1,registerMod:m,getModsInfo:g,getPatchingInfo:f,errorReporterHooks:Object.seal({hookEnter:null,hookChainExit:null})};return R=e,Object.freeze(e)}();if(i(window.bcModSdk)||r("Failed to init Mod SDK: Name already in use"),1!==window.bcModSdk.apiVersion&&r(`Failed to init Mod SDK: Different version already loaded ('1.1.0' vs '${window.bcModSdk.version}')`),window.bcModSdk.version!==t&&(alert(`Mod SDK warning: Loading different but compatible versions ('1.1.0' vs '${window.bcModSdk.version}')\nOne of mods you are using is using an old version of SDK. It will work for now but please inform author to update`),window.bcModSdk.version.startsWith("1.0.")&&void 0===window.bcModSdk._shim10register)){const e=window.bcModSdk,t=Object.freeze(Object.assign(Object.assign({},e),{registerMod:(t,r,n)=>t&&"object"==typeof t&&"string"==typeof t.name&&"string"==typeof t.version?e.registerMod(t.name,t.version,"object"==typeof r&&!!r&&!0===r.allowReplace):e.registerMod(t,r,n),_shim10register:!0}));window.bcModSdk=t}return window.bcModSdk}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=v}()}(mh);var gh,Rh,vh,yh,bh,Sh,wh=n(mh);const Ch=Object.freeze(["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]),kh=/^(v?)([0-9]+)\.([0-9]+)\.([0-9]+)(\.\S+)?$/;gh=new WeakSet,Rh=function(e,t){const r=new Date(Date.now());console[e]("MBS:",...t),this.push({date:r,level:e,args:t})};const Bh=new class extends Array{constructor(){super(...arguments),gh.add(this)}debug(...e){b(this,gh,"m",Rh).call(this,"debug",e)}log(...e){b(this,gh,"m",Rh).call(this,"log",e)}warn(...e){b(this,gh,"m",Rh).call(this,"warn",e)}error(...e){b(this,gh,"m",Rh).call(this,"error",e)}toJSON(){return this.map((e=>({date:e.date.toUTCString(),level:e.level,args:e.args.map((e=>e instanceof Map||e instanceof Set?Array.from(e):e))})))}};function Ph(e,t,r=-1/0,n=1/0){if(!(Number.isInteger(e)&&e>=r&&e<=n))throw"number"!=typeof e?new TypeError(`Invalid "${t}" type: ${typeof e}`):Number.isInteger(e)?new RangeError(`"${t}" must fall in the [${r}, ${n}] interval: ${e}`):new Error(`"${t}" must be an integer: ${e}`)}function Mh(e,t,r){if(Ph(t,"n",0),!Array.isArray(e))throw new TypeError('Invalid "list" type: '+typeof e);const n=t-e.length;return n>0&&e.push(...Array(n).fill(r)),e}function xh(e,t){if(Ph(t,"n",0),!Array.isArray(e))throw new TypeError('Invalid "list" type: '+typeof e);const r=e.length-t;return r>0&&e.splice(t,r),e}function Ih(e){if(!Dh(e))throw new TypeError('Invalid "list" type: '+typeof e);if(0===e.length)throw new Error('Passed "list" must contain at least 1 item');return e[gd(0,e.length-1,!1)]}function Eh(e){return Ph(e,"n",0,8),bd(0,e).map((e=>Ih(Ch))).join("")}async function _h(e,t=100){for(;!e();)await new Promise((e=>setTimeout(e,t)));return!0}const Oh=wh.registerMod({name:"MBS",fullName:"Maid's Bondage Scripts",repository:"https://github.com/bananarama92/MBS",version:t});vh=new WeakMap;const Fh=new class{constructor(){vh.set(this,null)}get modName(){return"MBS"}getRuleState(e){return null===b(this,vh,"f")&&"undefined"!=typeof bcx&&S(this,vh,bcx.getModApi("MBS"),"f"),b(this,vh,"f")?.getRuleState(e)??null}};function $h(e,t){let r=`${e}(`;return r+=Object.values(t).map((e=>String(e))).join(", "),r+=")",r}class Lh{get index(){return b(this,bh,"f")}set index(e){this.setPosition(e)}get value(){return b(this,yh,"f")[b(this,bh,"f")]}get list(){return b(this,yh,"f")}constructor(e,t=0){if(yh.set(this,void 0),bh.set(this,void 0),!Th(e))throw new TypeError('Invalid "iterable" type: '+typeof e);const r=Object.freeze([...e]);if(0===r.length)throw new Error('Passed "iterable" must contain at least one element');Ph(t,"index",0,r.length-1),S(this,yh,r,"f"),S(this,bh,t,"f")}*[(yh=new WeakMap,bh=new WeakMap,Symbol.iterator)](){for(;;)yield this.next()}next(e=!0){const t=(b(this,bh,"f")+1)%b(this,yh,"f").length;return e&&S(this,bh,t,"f"),b(this,yh,"f")[t]}previous(e=!0){const t=(b(this,bh,"f")+b(this,yh,"f").length-1)%b(this,yh,"f").length;return e&&S(this,bh,t,"f"),b(this,yh,"f")[t]}setPosition(e){Ph(e,"index",0,b(this,yh,"f").length-1),S(this,bh,e,"f")}toString(){return $h(typeof this,this.toJSON())}toJSON(){return{list:this.list,index:this.index}}}function Hh(e,t){if(Ph(e,"start",0,65535),!Dh(t))throw new TypeError('Invalid "indices" type: '+typeof t);const r=e+Math.max(0,...t)+1;Ph(r,"stop",e+1,65535);const n=bd(e,r);return t.map((e=>String.fromCharCode(n[e])))}function Th(e){return Symbol.iterator in Object(e)}class Ah{constructor(e=0,t=0,r=0,n=!1){if(Sh.set(this,void 0),Ph(e,"major",0,65535),Ph(t,"minor",0,65535),Ph(r,"micro",0,65535),"boolean"!=typeof n)throw new TypeError('Invalid "beta" type: '+typeof n);this.major=e,this.minor=t,this.micro=r,this.beta=n,S(this,Sh,[e,t,r].map((e=>String.fromCharCode(e)))+String.fromCharCode(n?0:1),"f"),Object.freeze(this)}equal(e){return e instanceof Ah&&this.valueOf()===e.valueOf()}greater(e){return e instanceof Ah&&this.valueOf()>e.valueOf()}lesser(e){return e instanceof Ah&&this.valueOf()<e.valueOf()}greaterOrEqual(e){return e instanceof Ah&&this.valueOf()>=e.valueOf()}lesserOrEqual(e){return e instanceof Ah&&this.valueOf()<=e.valueOf()}static fromVersion(e){const t=kh.exec(e);if(null===t)throw new Error(`Invalid "version": ${e}`);return new Ah(Number(t[2]),Number(t[3]),Number(t[4]),void 0!==t[5])}static fromBCVersion(e){const t=GameVersionFormat.exec(e);if(null===t)throw new Error(`Invalid BC version: "${e}"`);return new Ah(Number(t[1]),0,0,void 0!==t[2])}toString(){return $h(typeof this,this.toJSON())}valueOf(){return b(this,Sh,"f")}toJSON(){return{major:this.major,minor:this.minor,micro:this.micro,beta:this.beta}}}function Dh(e){return Array.isArray(e)}function Nh(e){return Object.entries(e)}function Wh(e){return Object.fromEntries(e)}function jh(e,t){return e.includes(t)}function Gh(e){return Number.isInteger(e)}Sh=new WeakMap;const zh=Object.freeze(Object.fromEntries([["CraftingSaveServer",["025B434F"]],["CraftingClick",["FF1A7B21"]],["CraftingRun",["5BE6E125"]],["MainHallRun",["735A1207","D587AD40"]],["MainHallClick",["7A6D741A"]],["ServerPlayerIsInChatRoom",["E3771112"]],["WheelFortuneLoad",["204D57D4"]],["WheelFortuneClick",["21CCD6B4"]],["WheelFortuneRun",["A59DA22A","150059B6"]],["WheelFortuneMouseUp",["1465BDFA"]],["WheelFortuneMouseDown",["306C80B6"]],["WheelFortuneCustomizeLoad",["97F0A81E"]]].map((e=>{const[t,r]=e,n=new Set(r.filter((e=>null!=e)));return[t,Object.freeze(n)]}))));function Vh(e,t,r){if(lR(t),null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);ExtendedItemSetOptionByRecord(t,e,r,{refresh:!1,push:!1})}function qh(e,t,r){const n={Asset:e};return ExtendedItemInit(t,n,!1,!1),r&&Vh(n,t,r),n.Property??{}}const Uh=Object.freeze({NONE:0,CLOTHES:1,UNDERWEAR:2,COSPLAY:3,ALL:4});let Kh;function Jh(e,t){switch(e){case Uh.NONE:return()=>!1;case Uh.CLOTHES:return e=>e.Group.AllowNone&&!e.BodyCosplay&&!e.Group.Underwear;case Uh.UNDERWEAR:return e=>e.Group.AllowNone&&!e.BodyCosplay;case Uh.COSPLAY:return e=>!uR(t)?e.Group.AllowNone&&!e.BodyCosplay:e.Group.AllowNone;case Uh.ALL:return e=>!!uR(t)||e.Group.AllowNone&&!e.BodyCosplay;default:throw new Error(`Invalid "stripLevel" value: ${e}`)}}function Zh(e,t){if(void 0===t)return[-1,!1];if(void 0!==t.priority&&void 0!==t.blocksSubSet)return[t.priority,t.blocksSubSet];if(0===t.block.size)return t.priority=0,t.blocksSubSet=!1,[t.priority,t.blocksSubSet];{const r=[];for(const n of t.block)r.push(Zh(e,e.get(n)));return t.priority=1+Math.max(0,...r.map((e=>e[0]))),t.blocksSubSet=t.superSet&&r.some((e=>e[1])),[t.priority,t.blocksSubSet]}}function Yh(e,t,r=[]){if(!Dh(e))throw new TypeError('Invalid "itemList" type: '+typeof e);const n=new Map;[e,r].forEach(((e,r)=>{for(const{Group:i,Name:o,TypeRecord:a}of e){if(n.has(i))continue;const e=AssetGet(t.AssetFamily,i,o);if(null==e)throw new Error(`Unknown asset: ${i}${o}`);if("Item"!==e.Group.Category)continue;const s=qh(e,t,a),l={superSet:1===r,block:new Set(...e.Block??[],...s.Block??[])};(e.Effect?.includes("Enclose")||s.Effect?.includes("Enclose"))&&(l.priority=AssetGroup.length,l.blocksSubSet=l.superSet),n.set(i,l)}}));for(const[e,t]of n)Zh(n,t);return n}_h(dR).then((()=>Kh=CharacterLoadSimple("MBSDummy")));const Xh=new Map;function Qh(e,t){const r=InventoryGetLock(e);if(!InventoryItemHasEffect(e,"Lock"))return!0;if("Decoy"===e.Craft?.Property){if(null==r)return!1;return!["OwnerOnly","LoverOnly","FamilyOnly"].some((t=>r.Asset[t]||e.Asset[t]))}const n=Fh.getRuleState("block_keyuse_self"),i=t.IsPlayer()&&n?.inEffect&&n?.isEnforced;switch(r?.Asset?.Name){case"SafewordPadlock":return!0;case"MetalPadlock":case"MistressPadlock":case"MistressTimerPadlock":case"PandoraPadlock":{if(i||LogQuery("KeyDeposit","Cell"))return!1;let e=Xh.get(`${t.ID}:${r.Asset.Name}`);return void 0===e&&(e=t.Inventory.some((e=>e.Asset.Name===`${r.Asset.Name}Key`)),Xh.set(`${t.ID}:${r.Asset.Name}`,e)),e}case"TimerPasswordPadlock":case"PasswordPadlock":case"CombinationPadlock":return Number(e.Property?.LockMemberNumber)===t.MemberNumber;case"HighSecurityPadlock":{const r=(e?.Property?.MemberNumberListKeys??"").split(",").map(Number);return!i&&jh(r,t.MemberNumber)}default:return!1}}function ep(e,t,r,n=null,i=null,o=Player){if(!Dh(t))throw new TypeError('Invalid "itemList" type: '+typeof t);if(function(e){const t=e.Appearance.find((e=>InventoryItemHasEffect(e,"Enclose")));return null!=t&&!Qh(t,e)}(o))return void Bh.log(`Failed to equip all "${e}" wheel of fortune items: cannot unlock enclosing item`);!function(e,t){lR(t);const r=Jh(e,t),n=t.Appearance;for(let e=n.length-1;e>=0;e--){const t=n[e].Asset;t.Group.AllowNone&&"Appearance"===t.Group.Category&&r(t)&&n.splice(e,1)}}(r,o),"function"==typeof i&&(t=i(t,o));const a=function(e,t,r){const n=Yh(e,r,t);return t.filter((e=>n.get(e.Group)?.blocksSubSet))}(t,o.Appearance.map((e=>({Group:e.Asset.Group.Name,Name:e.Asset.Name,TypeRecord:e.Property?.TypeRecord,NoEquip:!0}))),o);Xh.clear();const s={},l=new Set,u=o.IsPlayer()&&LogQuery("ClubSlave","Management");for(const{Name:e,Group:r,Equip:n,NoEquip:i}of[...a,...t]){const t=AssetGet(o.AssetFamily,r,e),a=InventoryGet(o,r),c="function"!=typeof n||n(o);if(null!=t)if(c){const e={InventoryGroupIsBlockedForCharacter:InventoryGroupIsBlockedForCharacter(o,r,!1),InventoryGroupIsBlockedByOwnerRule:InventoryGroupIsBlockedByOwnerRule(o,r),"Locked item equipped":null!=a&&!Qh(a,o)};i||(e.InventoryBlockedOrLimited=InventoryBlockedOrLimited(o,{Asset:t}),e.InventoryChatRoomAllow=!InventoryChatRoomAllow(t.Category??[]),e["Blocked via Club Slave Collar"]=u&&"Appearance"===t.Group.Category);const n=Nh(e).filter((e=>e[1]));0!==n.length?s[t.Description]=n.map((e=>e[0])):null!=a&&InventoryRemove(o,r,!1)}else l.add(r);else s[e]=["Unknown asset"]}for(const{Name:e,Group:r,Craft:i,ItemCallback:a,Color:u,TypeRecord:c,Property:d}of t){const t=AssetGet(o.AssetFamily,r,e),f=s[t?.Description??e];if(null==t||void 0!==f||l.has(r))continue;if(!InventoryAllow(o,t,t.Prerequisite,!1)){s[t.Description]=["InventoryAllow"];continue}const h=[...u??t.DefaultColor],p=CharacterAppearanceSetItem(o,r,t,h,SkillGetWithRatio(o,"Bondage"),o.MemberNumber,!1);null!=p&&(c&&Vh(p,o,c),void 0!==i&&(p.Craft=Ma(i),InventoryCraft(o,o,r,p.Craft,!1,!1)),p.Property=Object.assign(p.Property??{},Ma(d)),"function"==typeof a&&a(p,o),"function"==typeof n&&n(p,o))}if(CharacterRefresh(o,!1,!1),o.IsPlayer()){ChatRoomCharacterUpdate(o);const t=Object.values(s).length;0!==t&&Bh.log(`Failed to equip ${t} "${e}" wheel of fortune items`,s)}}function tp(e,t,r){if("string"!=typeof t||!DynamicDrawTextRegex.test(t))return!1;const n=`${r.Group.Name}${r.Name}`,[i,o]=Nh(TextItemDataLookup).find((([e])=>e.includes(n)))??["",null];return null!==o&&t.length<=(o.maxLength[e]??-1)}const rp=Object.freeze({OverridePriority:(e,t)=>{if(Gh(e))return!0;if(CommonIsObject(e)){const r=t.Layer.map((e=>e.Name));return Nh(e).every((([e,t])=>r.includes(e)&&Gh(t)))}return!1},Opacity:(e,t)=>"number"==typeof e&&e<=t.MaxOpacity&&e>=t.MinOpacity,Text:(e,t)=>tp("Text",e,t),Text2:(e,t)=>tp("Text2",e,t),Text3:(e,t)=>tp("Text3",e,t),ShowText:(e,t)=>"boolean"==typeof e,TriggerValues:(e,t)=>"string"==typeof e&&e.split(",").length===ItemVulvaFuturisticVibratorTriggers.length,AccessMode:(e,t)=>"string"==typeof e&&ItemVulvaFuturisticVibratorAccessModes.includes(e),PunishOrgasm:(e,t)=>"boolean"==typeof e,PunishStandup:(e,t)=>"boolean"==typeof e,Texts:(e,t)=>!!Array.isArray(e)&&(!(e.length<ItemDevicesLuckyWheelMinTexts||e.length>ItemDevicesLuckyWheelMaxTexts)&&e.every((e=>"string"==typeof e&&e.length<=ItemDevicesLuckyWheelMaxTextLength))),TargetAngle:(e,t)=>"number"==typeof e&&e>=0&&e<=360,OverrideHeight:function(e,t){const r=VariableHeightDataLookup[`${t.Group.Name}${t.Name}`];if(void 0===r)return!1;const n=e;return null!==n&&"object"==typeof n&&Number.isInteger(n.Priority)&&"number"==typeof n.Height&&n.Height<=r.maxHeight&&n.Height>=r.minHeight&&(null==n.HeightRatioProportion||"number"==typeof n.HeightRatioProportion&&n.HeightRatioProportion>=0&&n.HeightRatioProportion<=1)},PunishStruggle:(e,t)=>"boolean"==typeof e,PunishStruggleOther:(e,t)=>"boolean"==typeof e,PunishRequiredSpeechWord:(e,t)=>"string"==typeof e&&e.length<=70,PunishProhibitedSpeechWords:(e,t)=>"string"==typeof e&&e.length<=70,PunishSpeech:(e,t)=>Gh(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PunishRequiredSpeech:(e,t)=>Gh(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PunishProhibitedSpeech:(e,t)=>Gh(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PublicModeCurrent:(e,t)=>Gh(e)&&e>=0&&e<FuturisticTrainingBeltModes.length,PublicModePermission:(e,t)=>Gh(e)&&e>=0&&e<FuturisticTrainingBeltPermissions.length,ShockLevel:(e,t)=>Gh(e)&&e>=0&&e<=2,PortalLinkCode:(e,t)=>"string"==typeof e&&PortalLinkCodeRegex.test(e)});function np(e,t){if(null===t||"object"!=typeof t)return{};const r=new Set(["OverridePriority"]);if(e.Archetype){const n=ExtendedItemGatherOptions({Asset:e,Property:t});for(const e of n){"VariableHeightOption"===e.OptionType&&r.add("OverrideHeight");for(const t of CommonKeys(e.ParentData.baselineProperty??{}))CraftingPropertyExclude.has(t)||r.add(t)}}const n={};for(const[i,o]of Nh(t)){const t=rp[i];null!=o&&r.has(i)&&void 0!==t&&(t(o,e)&&(n[i]=o))}return n}const ip=Object.freeze(new Map([["Unknown asset",e=>null==e],["Unsupported owner-only asset",e=>e?.OwnerOnly],["Unsupported lovers-only asset",e=>e?.LoverOnly],["Unsupported D/S family-only asset",e=>e?.FamilyOnly],["Unsupported disabled asset",e=>!e?.Enable],["Unsupported script-asset",e=>"Script"===e?.Group?.Category]]));function op(e,t,r=!0){for(const[r,n]of ip)if(n(e))throw new Error(`${r}: ${t.Group}${t.Name}`);let n,i;"string"==typeof t.Color?n=[t.Color]:Array.isArray(t.Color)&&t.Color.every((e=>"string"==typeof e))&&(n=[...t.Color]),null!==t.Craft&&"object"==typeof t.Craft&&(i=Object.assign(Ma(t.Craft),{TypeRecord:void 0,OverridePriority:null,Lock:""}),CraftingValidate(i,e,!1));const o=t.Property??{};let a;return CommonIsObject(o.TypeRecord)?a=Object.freeze({...o.TypeRecord}):"string"==typeof o.Type||null===o.Type?a=ExtendedItemTypeToRecord(e,o.Type):"string"==typeof o.Mode&&(a=ExtendedItemTypeToRecord(e,o.Mode)),Object.freeze({Name:t.Name,Group:t.Group,Custom:r,Property:Object.freeze(np(e,t.Property)),TypeRecord:a,Color:n,Craft:Object.freeze(i),ItemCallback:void 0,Equip:void 0})}function ap(e,t){if(!Dh(e))throw new TypeError('Invalid "items" type: '+typeof e);return e.map((e=>function(e,t){const{Group:r,Name:n,Color:i,Craft:o,TypeRecord:a,Property:s}=e,l=AssetGet(t.AssetFamily,r,n);if(null==l)throw new Error(`Unknown asset: ${r}${n}`);return{Group:r,Name:n,Color:ka(i),Craft:ka(o),Property:Object.assign(qh(l,t,a),Ma(s))}}(e,t)))}var sp;class lp{constructor(e){this.screen="",this.parent=e,this.children=new Map}load(){const e=CurrentScreen;CurrentScreenFunctions?.Unload?.(),ControllerIsActive()&&ControllerClearAreas(),CurrentScreen=this.screen,CurrentScreenFunctions=this.getFunctions(),CurrentDarkFactor=1,CommonGetFont.clearCache(),CommonGetFontName.clearCache(),CurrentScreenFunctions?.Resize?.(!0),"ChatSearch"!=e&&"ChatCreate"!=e||ChatRoomStimulationMessage("Walk")}exitScreens(e){if(!e)return void this.parent?.load();let t=this.parent;for(;null!==t&&!(t instanceof up);)t.exit(),t=t.parent;t?.load()}getFunctions(){return{Run:this.run.bind(this),Click:this.click.bind(this),Load:this.load.bind(this),Unload:this.unload?.bind(this),Resize:this.resize?.bind(this),KeyDown:this.keyDown?.bind(this),Exit:this.exit.bind(this)}}}lp.background="Sheet",lp.screen="";class up extends lp{constructor(e,t,r,n){super(e),this.module=t,this.background=r,this.screenFunctions=Object.freeze({...n})}run(e){return this.screenFunctions.Run(e)}click(e){return this.screenFunctions.Click(e)}load(){return this.screenFunctions.Load?.()}unload(){return this.screenFunctions.Unload?.()}resize(e){return this.screenFunctions.Resize?.(e)}keyDown(e){return this.screenFunctions.KeyDown?.(e)??!1}exit(){return this.screenFunctions.Exit?.()}}const cp=Object.freeze({NONE:0,SAVE:1,DELETE:2});class dp extends lp{get index(){return b(this,sp,"f")}set index(e){Ph(e,"index",0,this.mbsList.length-1),S(this,sp,e,"f")}get mbsObject(){return this.mbsList[b(this,sp,"f")]}hasStorageSpace(){return null!==this.mbsList[this.index]||this.dataSize.value<=this.dataSize.max*this.dataSize.marigin}constructor(e,t,r,n){super(e),sp.set(this,0),this.character=n,this.mbsList=t,this.index=r,this.dataSize=Object.seal({value:0,valueRecord:{},max:dm,marigin:.9})}load(){const e=fm(this.character.OnlineSharedSettings);this.dataSize.value=Kd(Object.values(e),(e=>Number.isNaN(e)?0:e)),this.dataSize.valueRecord=e,super.load()}exit(e=!0,t=cp.NONE){if(!this.character.IsPlayer())return this.exitScreens(e);switch(t){case cp.NONE:break;case cp.SAVE:this.settings.isValid(this.index)&&this.hasStorageSpace()&&(this.mbsList[this.index]=this.settings.writeSettings(),this.mbsList[this.index]?.register());break;case cp.DELETE:{const e=this.mbsList[this.index];this.mbsList[this.index]=null,e?.unregister();break}default:throw new Error(`Unsupported action: ${t}`)}this.exitScreens(e)}}sp=new WeakMap;var fp,hp,pp,mp,gp;const Rp=Object.freeze({[Uh.NONE]:"None",[Uh.CLOTHES]:"Clothes",[Uh.UNDERWEAR]:"Clothes and underwear",[Uh.COSPLAY]:"Clothes, underwear and cosplay items",[Uh.ALL]:"Clothes, underwear, cosplay items and body"});function vp(e){e=no(e,60,14400);const t={h:0,m:0,s:0};return t.h=Math.floor(e/3600),e-=3600*t.h,t.m=Math.floor(e/60),e-=60*t.m,t.s=e,`${t.h.toString().padStart(2,"0")}:${t.m.toString().padStart(2,"0")}:${t.s.toString().padStart(2,"0")}`}function yp(e,t,r){return h("div",{id:e.inputID,class:"mbs-dropdown",onWheel:r=>{const n=document.getElementById(e.buttonID);if(n.disabled)return;let i;if(r.deltaY<0)i=no(t[e.level]-1,Uh.NONE,Uh.COSPLAY);else{if(!(r.deltaY>0))return;i=no(t[e.level]+1,Uh.NONE,Uh.COSPLAY)}t[e.level]=i,n.innerText=Rp[t[e.level]]},children:[f("button",{class:"mbs-button",disabled:r,id:e.buttonID,children:Rp[Uh.UNDERWEAR]}),h("div",{class:"mbs-dropdown-content",id:e.dropdownID,children:[" ",Object.values(Rp).slice(0,4).map(((n,i)=>f("button",{class:"mbs-button mbs-dropdown-button",disabled:r,"data-level":i,id:e.optionID+i.toString(),style:{border:"unset",paddingTop:"min(1vh, 0.5vw)",paddingBottom:"min(1vh, 0.5vw)"},onClick:r=>{const n=r.target;t[e.level]=no(Number.parseInt(n.dataset.level),Uh.NONE,Uh.COSPLAY);document.getElementById(e.buttonID).innerText=Rp[t[e.level]]},children:n})))," "]})]})}class bp extends dp{constructor(e,t,r,n){const i=!n.IsPlayer();super(e,t,r,n),fp.add(this),this.screen=bp.screen,this.settings=new gR(t),this.preview=CharacterLoadSimple("MBSFortuneWheelPreview"),document.body.appendChild(h("div",{id:wp.root,class:"HideOnPopup",children:[f("style",{id:wp.styles,children:'#mbs-fwitemset {\n  display: none;\n  text-align: center;\n  user-select: none;\n  grid-gap: min(2vh, 1vw);\n  grid-template: "delete header accept cancel exit" min(9vh, 4.5vw) "midDiv midDiv midDiv midDiv midDiv" min(18vh, 9vw) "botDiv botDiv botDiv botDiv botDiv" auto/min(9vh, 4.5vw) auto min(9vh, 4.5vw) min(9vh, 4.5vw) min(9vh, 4.5vw);\n}\n\n#mbs-fwitemset-delete {\n  grid-area: delete;\n}\n\n#mbs-fwitemset-header {\n  align-self: center;\n  font-size: min(5vh, 2.5vw);\n  grid-area: header;\n  margin-left: min(20vh, 10vw);\n}\n\n#mbs-fwitemset-accept {\n  grid-area: accept;\n}\n\n#mbs-fwitemset-cancel {\n  grid-area: cancel;\n}\n\n#mbs-fwitemset-exit {\n  grid-area: exit;\n}\n\n#mbs-fwitemset-mid-grid {\n  display: grid;\n  grid-area: midDiv;\n  grid-template-areas: "name ." "outfitCode outfitCodeButton";\n  grid-template-columns: min(78vh, 39vw) min(10vh, 5vw);\n  margin-left: 35%;\n  grid-gap: min(2vh, 1vw) min(6vh, 3vw);\n  margin-bottom: 2.5%;\n  margin-top: 2.5%;\n}\n\n#mbs-fwitemset-outfit-name {\n  font-size: min(3.5vh, 1.75vw);\n  grid-area: name;\n  height: min(7vh, 3.5vw);\n}\n\n#mbs-fwitemset-outfit-input {\n  font-size: min(3.5vh, 1.75vw);\n  grid-area: outfitCode;\n  height: min(7vh, 3.5vw);\n}\n\n#mbs-fwitemset-outfit-div {\n  grid-template-rows: min(7vh, 3.5vw) auto;\n  grid-template-columns: min(27vh, 13.5vw);\n  grid-area: outfitCodeButton;\n}\n\n#mbs-fwitemset-bot-grid {\n  display: grid;\n  grid-area: botDiv;\n  margin-left: 35%;\n  grid-gap: min(2vh, 1vw) min(8vh, 4vw);\n  align-items: end;\n  font-size: min(3.5vh, 1.75vw);\n  overflow: hidden;\n  grid-template: "headerStrip headerLock" auto "configStrip gridLock" min(7vh, 3.5vw) "headerEquip gridLock" min(7vh, 3.5vw) "configEquip gridLock" min(7vh, 3.5vw) "headerWeight gridLock" min(7vh, 3.5vw) "configWeight gridLock" min(7vh, 3.5vw)/min(40vh, 20vw) auto;\n  text-align: left;\n}\n\n#mbs-fwitemset-strip-header {\n  grid-area: headerStrip;\n}\n\n#mbs-fwitemset-strip-input {\n  align-self: start;\n  grid-area: configStrip;\n}\n\n#mbs-fwitemset-equip-header {\n  grid-area: headerEquip;\n}\n\n#mbs-fwitemset-equip-input {\n  align-self: start;\n  grid-area: configEquip;\n}\n\n#mbs-fwitemset-weight-header {\n  grid-area: headerWeight;\n}\n\n#mbs-fwitemset-weight-input {\n  align-self: start;\n  font-size: min(3.5vh, 1.75vw);\n  grid-area: configWeight;\n  width: min(7vh, 3.5vw);\n}\n\n#mbs-fwitemset-lock-header {\n  grid-area: headerLock;\n}\n\n#mbs-fwitemset-lock-grid {\n  align-self: start;\n  display: grid;\n  grid-area: gridLock;\n  grid-template-columns: 5fr 5fr;\n  overflow-y: scroll;\n  grid-gap: min(2vh, 1vw);\n}\n\n.mbs-fwitemset-lock-container {\n  align-items: center;\n  display: grid;\n  font-size: min(3.5vh, 1.75vw);\n  word-wrap: break-word;\n  grid-template-columns: 1.5fr 8.5fr;\n  grid-gap: min(2vh, 1vw);\n}\n\n.mbs-timer {\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: min(3.5vh, 1.75vw);\n  height: min(5vh, 2.5vw);\n  text-align: center;\n  width: min(21vh, 10.5vw);\n}\n\n#mbs-fwitemset-strip-dropdown-button, #mbs-fwitemset-equip-dropdown-button {\n  height: min(7vh, 3.5vw);\n}\n\n#mbs-fwitemset-strip-dropdown-content, #mbs-fwitemset-equip-dropdown-content {\n  width: min(80vh, 40vw);\n}\n\n.mbs-fwitemset-lock-checkbox {\n  height: min(7vh, 3.5vw) !important;\n  width: min(7vh, 3.5vw) !important;\n  border: min(0.3vh, 0.15vw) solid var(--mbs-border-color) !important;\n}'.toString()}),f("div",{id:wp.header,children:"Customize wheel of fortune item set"}),h("div",{id:wp.delete,class:"mbs-button-div",children:[f("button",{class:"mbs-button",id:wp.deleteButton,style:{backgroundImage:"url('./Icons/Trash.png')"},onClick:()=>this.exit(!1,cp.DELETE),disabled:i}),f("div",{class:"mbs-button-tooltip",id:wp.deleteTooltip,style:{justifySelf:"left"},children:"Delete item set"})]}),h("div",{id:wp.accept,class:"mbs-button-div",children:[f("button",{class:"mbs-button",id:wp.acceptButton,style:{backgroundImage:"url('./Icons/Accept.png')"},onClick:()=>this.exit(!1,cp.SAVE),disabled:!0}),f("div",{class:"mbs-button-tooltip",id:wp.acceptTooltip,style:{justifySelf:"right"},children:"Save item set:\\nMissing outfit"})]}),h("div",{id:wp.cancel,class:"mbs-button-div",children:[f("button",{class:"mbs-button",id:wp.cancelButton,style:{backgroundImage:"url('./Icons/Cancel.png')"},onClick:()=>this.exit(!1,cp.NONE)}),f("div",{class:"mbs-button-tooltip",id:wp.cancelTooltip,style:{justifySelf:"right"},children:"Cancel"})]}),h("div",{id:wp.exit,class:"mbs-button-div",children:[f("button",{class:"mbs-button",id:wp.exitButton,style:{backgroundImage:"url('./Icons/Exit.png')"},onClick:()=>this.exit(!0,cp.NONE)}),f("div",{class:"mbs-button-tooltip",id:wp.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),h("div",{id:wp.midDiv,children:[f("input",{type:"text",id:wp.outfitName,placeholder:"Name",disabled:i,maxLength:70,onInput:e=>{this.settings.name=e.target.value,b(this,fp,"m",pp).call(this,wp.acceptButton)},onFocus:e=>e.target.select()}),f("input",{type:"text",id:wp.outfitInput,placeholder:"Outfit code",disabled:i,onInput:e=>{this.settings.outfitCache=e.target.value,b(this,fp,"m",pp).call(this,wp.outfitButton)},onFocus:e=>e.target.select()}),h("div",{id:wp.outfitDiv,class:"mbs-button-div",children:[f("button",{class:"mbs-button",disabled:!0,id:wp.outfitButton,onClick:()=>b(this,fp,"m",pp).call(this,wp.acceptButton,!0),children:"Parse"}),f("div",{class:"mbs-button-tooltip",id:wp.outfitTooltip,children:"Parse the outfit code"})]})]}),h("div",{id:wp.botDiv,children:[f("div",{id:wp.stripHeader,children:"Clothing strip level:"}),f("div",{id:wp.equipHeader,children:"Clothing equip level:"}),f("div",{id:wp.weightHeader,children:"Wheel option weight:"}),f("div",{id:wp.lockHeader,children:"Enabled lock types:"}),f("input",{type:"number",id:wp.weightInput,min:1,max:9,value:1,disabled:i,onInput:e=>{const t=e.target;this.settings.weight=no(Number.parseInt(t.value,10),1,9)},onWheel:e=>{const t=e.target;if(e.deltaY<0)t.stepUp(1);else{if(!(e.deltaY>0))return;t.stepDown(1)}this.settings.weight=no(Number.parseInt(t.value,10),1,9)},onFocus:e=>e.target.select()}),yp({inputID:wp.stripInput,buttonID:wp.stripButton,optionID:wp.stripOption,dropdownID:wp.stripDropdown,level:"stripLevel"},this.settings,i),yp({inputID:wp.equipInput,buttonID:wp.equipButton,optionID:wp.equipOption,dropdownID:wp.equipDropdown,level:"equipLevel"},this.settings,i),h("div",{id:wp.lockGrid,children:[" ",this.settings.flags.map(((e,t)=>{let r;if("TimerPasswordPadlock"===e.type)r=function(e,t,r){return f("input",{type:"time",class:"mbs-timer",id:wp.lockTimer+t.toString(),disabled:r,min:"00:01:00",max:"04:00:00",step:1,value:vp(e.time),onInput:t=>{const r=t.target,[n,i,o]=r.value.split(":").map((e=>Number.parseInt(e,10)));e.time=no(3600*n+60*i+o,60,14400)},onWheel:t=>{const r=t.target;if(r.disabled)return;if(t.deltaY<0)r.stepUp(120);else{if(!(t.deltaY>0))return;r.stepDown(120)}const[n,i,o]=r.value.split(":").map((e=>Number.parseInt(e,10)));e.time=no(3600*n+60*i+o,60,14400)}})}(e,t,i);else r=e.description;return h("div",{class:wp.lockContainer,id:wp.lockContainer+t.toString(),children:[f("input",{type:"checkbox",class:wp.lockCheckbox,id:wp.lockCheckbox+t.toString(),disabled:i,checked:e.enabled,onClick:()=>{e.enabled=!e.enabled,b(this,fp,"m",pp).call(this,wp.acceptButton)}}),r]})}))," "]})]})]}))}load(){super.load();const e=this.mbsObject;if(null!==e){this.settings.readSettings(e),this.settings.outfitCache=LZString.compressToBase64(JSON.stringify(ap(e.itemList,this.preview))),ElementValue(wp.outfitName,e.name),ElementValue(wp.weightInput,e.weight.toString()),ElementValue(wp.outfitInput,this.settings.outfitCache);for(const[e,t]of this.settings.flags.entries()){if(document.getElementById(`${wp.lockCheckbox}${e}`).checked=t.enabled,"TimerPasswordPadlock"===t.type)ElementValue(`${wp.lockTimer}${e}`,vp(t.time))}const t=document.getElementById(wp.equipButton),r=document.getElementById(wp.stripButton);t.innerText=Rp[this.settings.equipLevel],r.innerText=Rp[this.settings.stripLevel],b(this,fp,"m",pp).call(this,wp.acceptButton,!0),b(this,fp,"m",pp).call(this,wp.outfitButton)}else this.settings.reset();b(this,fp,"m",gp).call(this)}resize(){const e=document.getElementById(wp.root),t=MainCanvas.canvas.clientWidth<=2*MainCanvas.canvas.clientHeight?MainCanvas.canvas.clientWidth/50:MainCanvas.canvas.clientHeight/25;ElementPositionFix(wp.root,t,80,60,1840,880),e.style.display="grid"}run(){DrawCharacter(this.preview,300,175,.78,!1)}click(){}unload(){const e=document.getElementById(wp.root);e&&(e.style.display="none")}exit(e,t){CharacterDelete(this.preview),ElementRemove(wp.root),super.exit(e,t)}}fp=new WeakSet,hp=function(){return this.settings.isValid(this.index)&&this.hasStorageSpace()},pp=function(e,t=!1){const r=document.getElementById(e),n=!this.character.IsPlayer();switch(e){case wp.acceptButton:if(t){const e=this.settings.loadFromBase64();r.disabled=n||!(e&&b(this,fp,"m",hp).call(this)),!n&&e&&b(this,fp,"m",gp).call(this)}else r.disabled=n||!(null!==this.settings.itemList&&b(this,fp,"m",hp).call(this));b(this,fp,"m",mp).call(this,wp.acceptTooltip);break;case wp.outfitButton:r.disabled=n||!this.settings.outfitCache,b(this,fp,"m",mp).call(this,wp.outfitTooltip);break;default:throw new Error(`Unsupported tooltip type: ${e}`)}},mp=function(e){const t=document.getElementById(e);switch(e){case wp.acceptTooltip:{const e="Save item set";this.settings.loadFromBase64()?b(this,fp,"m",hp).call(this)?t.innerText=e:this.settings.name?this.settings.flags.every((e=>!e.enabled))?t.innerText=`${e}:\nMust enable at least one lock type`:this.hasStorageSpace()?t.innerText=`${e}:\nMax allowed OnlineSharedSettings storage size exceeded (${hm(this.dataSize.value)} / ${hm(this.dataSize.max)}`:t.innerText=`${e}:\nDuplicate name`:t.innerText=`${e}:\nMissing name`:t.innerText=`${e}:\nMissing outfit`;break}case wp.outfitTooltip:{const e="Parse outfit code";this.settings.outfitCache?t.innerText=e:t.innerText=`${e}:\nMissing code`;break}default:throw new Error(`Unsupported tooltip type: ${e}`)}},gp=function(){if(this.preview.Appearance=[...this.character.Appearance],this.preview.OnlineSharedSettings=this.character.OnlineSharedSettings,CharacterReleaseTotal(this.preview),null===this.settings.itemList)return;const e=Jh(this.settings.equipLevel,this.preview),t=this.preview.AssetFamily;ep("MBSPreview",this.settings.itemList.filter((({Name:r,Group:n})=>{const i=AssetGet(t,n,r);return null!=i&&("Appearance"!==i.Group.Category||e(i))})),this.settings.stripLevel,null,null,this.preview)},bp.screen="MBS_FWItemSetScreen",bp.background="Sheet";const Sp="mbs-fwitemset",wp=Object.freeze({root:Sp,styles:`${Sp}-style`,delete:`${Sp}-delete`,deleteButton:`${Sp}-delete-button`,deleteTooltip:`${Sp}-delete-tooltip`,accept:`${Sp}-accept`,acceptButton:`${Sp}-accept-button`,acceptTooltip:`${Sp}-accept-tooltip`,cancel:`${Sp}-cancel`,cancelButton:`${Sp}-cancel-button`,cancelTooltip:`${Sp}-cancel-tooltip`,exit:`${Sp}-exit`,exitButton:`${Sp}-exit-button`,exitTooltip:`${Sp}-exit-tooltip`,header:`${Sp}-header`,midDiv:`${Sp}-mid-grid`,botDiv:`${Sp}-bot-grid`,outfitName:`${Sp}-outfit-name`,outfitInput:`${Sp}-outfit-input`,outfitDiv:`${Sp}-outfit-div`,outfitButton:`${Sp}-outfit-button`,outfitTooltip:`${Sp}-outfit-tooltip`,stripHeader:`${Sp}-strip-header`,stripInput:`${Sp}-strip-dropdown`,stripButton:`${Sp}-strip-dropdown-button`,stripDropdown:`${Sp}-strip-dropdown-content`,stripOption:`${Sp}-strip-dropdown-option`,equipHeader:`${Sp}-equip-header`,equipInput:`${Sp}-equip-dropdown`,equipButton:`${Sp}-equip-dropdown-button`,equipDropdown:`${Sp}-equip-dropdown-content`,equipOption:`${Sp}-equip-dropdown-option`,weightHeader:`${Sp}-weight-header`,weightInput:`${Sp}-weight-input`,lockHeader:`${Sp}-lock-header`,lockGrid:`${Sp}-lock-grid`,lockContainer:`${Sp}-lock-container`,lockCheckbox:`${Sp}-lock-checkbox`,lockTimer:`${Sp}-lock-timer`});class Cp extends dp{constructor(e,t,r,n){super(e,t,r,n),this.screen=Cp.screen,this.settings=new RR(t),this.clickList=Object.freeze([{coords:[75,60,90,90],next:()=>this.exit(!1,cp.DELETE),requiresPlayer:!0},{coords:[1830,60,90,90],next:()=>this.exit(!0,cp.NONE),requiresPlayer:!1},{coords:[1720,60,90,90],next:()=>this.exit(!1,cp.NONE),requiresPlayer:!1},{coords:[1610,60,90,90],next:()=>{this.settings.isValid(this.index)&&this.hasStorageSpace()&&this.exit(!1,cp.SAVE)},requiresPlayer:!0}])}load(){super.load();const e=function(e,t,r,n,i=-1/0,o=1/0){let a=ElementCreateInput(`MBS${e}`,"number",n.toString());a?(a.setAttribute("max",o.toString()),a.setAttribute("min",i.toString()),a.addEventListener("input",CommonLimitFunction((r=>{const n=Number.parseInt(r.target?.value,10);!Number.isNaN(n)&&n>=i&&n<=o&&(t[e]=n)})))):a=document.getElementById(`MBS${e}`);return ElementPosition(`MBS${e}`,...r),a}("weight",this.settings,[750,850,64,64],1,1,9),t=function(e,t,r,n,i="",o){let a=ElementCreateInput(`MBS${e}`,"text",i,o);a?(a.setAttribute("placeholder",r),a.addEventListener("input",CommonLimitFunction((r=>{const n=r.target?.value||null;null==o&&(o=1/0),(null===n||n.length<=o)&&(t[e]=n)})))):a=document.getElementById(`MBS${e}`);return ElementPosition(`MBS${e}`,...n),a}("name",this.settings,"Role play command",[900,500,900,64],"",210);this.character.IsPlayer()||(t.setAttribute("disabled",!0),e.setAttribute("disabled",!0)),null!==this.mbsObject?(t.value=this.mbsObject.name,e.value=this.mbsObject.weight.toString(),this.settings.readSettings(this.mbsObject)):this.settings.reset()}click(){const e=this.character.IsPlayer();for(const{coords:t,next:r,requiresPlayer:n}of this.clickList){const i=!!e||!n;MouseIn(...t)&&i&&r()}}run(){const e=this.character.IsPlayer();let t="Customize wheel of fortune command";if(!e){t=`View ${this.character.Nickname??this.character.Name}'s wheel of fortune command customization`}DrawText(t,1e3,105,"Black"),DrawButton(75,60,90,90,"",e?"White":"Gray","Icons/Trash.png","Delete",!e),DrawButton(1830,60,90,90,"","White","Icons/Exit.png","Exit"),DrawButton(1720,60,90,90,"","White","Icons/Cancel.png","Cancel");let r=!1,n="White",i="Accept";e?this.settings.isValid(this.index)?this.hasStorageSpace()||(r=!0,n="Gray",i=`Max allowed OnlineSharedSettings storage size exceeded (${hm(this.dataSize.value)} / ${hm(this.dataSize.max)} KB)`):(r=!0,n="Gray",i+=null===this.settings.name?": Missing name":": Duplicate name"):(r=!0,n="Gray"),DrawButton(1610,60,90,90,"",n,"Icons/Accept.png",i,r),ElementPosition("MBSname",900,500,900,64),DrawText("Wheel option weight:",620,576,"Black"),ElementPosition("MBSweight",490,630,80)}exit(e,t){ElementRemove("MBSname"),ElementRemove("MBSweight"),super.exit(e,t)}}Cp.screen="MBS_FWCommandScreen",Cp.background="Sheet";var kp,Bp;function Pp(e,t,r){const n=vm(e.OnlineSharedSettings?.MBS,"OnlineSharedSettings",!1);let i,o=void 0===n?void 0:n[t];if(Array.isArray(o)||(void 0!==o&&Bh.warn(`Failed to load "${e.AccountName}" wheel of fortune ${r}`),o=Array(oR).fill(null)),e.IsPlayer())i=Player.MBSSettings[t];else{const e=[];i=gm("FortuneWheelItemSets"===t?bR.fromObject:SR.fromObject,o,e),e.forEach((e=>console.warn(e)))}return i.forEach((e=>e?.register(!1))),i}function Mp(e,t){return f("button",{class:"mbs-button",id:Ep.button+t.toString(),style:{height:"min(7vh, 3.5vw)"},onClick:()=>{let r;r=t<oR?new bp(e,e.wheelStruct.FortuneWheelItemSets,t,e.character):new Cp(e,e.wheelStruct.FortuneWheelCommands,t-oR,e.character),e.children.set(r.screen,r),r.load()},children:"Lorem Ipsum"})}class xp extends lp{get wheelList(){return[...this.wheelStruct.FortuneWheelItemSets,...this.wheelStruct.FortuneWheelCommands]}constructor(e,t,r){super(e),kp.add(this),this.screen=xp.screen,this.wheelStruct=t,this.character=r,this.dataSize=Object.seal({value:0,valueRecord:{},max:dm,marigin:.9});const n=this.character.IsPlayer();document.body.appendChild(h("div",{id:Ep.root,class:"HideOnPopup",children:[f("style",{id:Ep.styles,children:'#mbs-fwselect {\n  display: none;\n  text-align: center;\n  user-select: none;\n  grid-row-gap: min(2vh, 1vw);\n  grid-template: ". buttonOuterGrid exit" min(9vh, 4.5vw) "storage buttonOuterGrid ." 7.4fr "storageFooter buttonOuterGrid ." 1.7fr/2fr 7fr 1fr;\n}\n\n#mbs-fwselect-exit {\n  grid-area: exit;\n  height: min(9vh, 4.5vw);\n  justify-self: end;\n  width: min(9vh, 4.5vw);\n}\n\n#mbs-fwselect-storage {\n  background-image: linear-gradient(180deg, #d80000, #d80000 10%, #00d800 60%, #00d800);\n  border: min(0.3vh, 0.15vw) solid var(--mbs-border-color);\n  display: grid;\n  grid-area: storage;\n  height: 100%;\n  justify-self: center;\n  width: 35%;\n}\n#mbs-fwselect-storage #mbs-fwselect-storage-tooltip {\n  background-color: var(--mbs-background-color);\n  border: inherit;\n  color: var(--mbs-text-color);\n  font-size: min(3.5vh, 1.75vw);\n  left: 15%;\n  line-height: 1.4;\n  min-height: min(9vh, 4.5vw);\n  padding-left: min(2vh, 1vw);\n  padding-right: min(2vh, 1vw);\n  position: absolute;\n  text-align: left;\n  visibility: hidden;\n  width: fit-content;\n}\n#mbs-fwselect-storage:hover #mbs-fwselect-storage-tooltip {\n  visibility: visible;\n}\n\n#mbs-fwselect-storage-cover {\n  width: 100%;\n}\n\n#mbs-fwselect-storage-footer {\n  font-size: min(3.5vh, 1.75vw);\n  grid-area: storageFooter;\n  height: min(7vh, 3.5vw);\n  padding-top: min(1vh, 0.5vw);\n}\n\n#mbs-fwselect-button-grid-outer {\n  display: grid;\n  font-size: min(5vh, 2.5vw);\n  grid-area: buttonOuterGrid;\n  grid-template-rows: min(9vh, 4.5vw) auto min(9vh, 4.5vw) auto;\n  height: 94%;\n  overflow-y: scroll;\n  padding-left: min(2vh, 1vw);\n  padding-right: min(2vh, 1vw);\n}\n\n#mbs-fwselect-button-grid-inner0, #mbs-fwselect-button-grid-inner1 {\n  display: grid;\n  grid-template-columns: minmax(0, 4fr) minmax(0, 4fr);\n  grid-gap: min(2vh, 1vw);\n  padding-bottom: min(2vh, 1vw);\n  padding-top: min(2vh, 1vw);\n}\n\n#mbs-fwselect-header0, #mbs-fwselect-header1 {\n  align-items: center;\n  background: var(--mbs-background-color);\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  position: sticky;\n  top: 0%;\n}'.toString()}),h("div",{id:Ep.buttonOuterGrid,children:[f("div",{id:Ep.itemSets,children:n?"Fortune wheel item sets":`${this.character.Nickname??this.character.Name}'s fortune wheel item sets`}),f("div",{id:Ep.buttonInnerGrid0,children:bd(0,oR).map((e=>Mp(this,e)))}),f("div",{id:Ep.commandSets,children:n?"Fortune wheel commands":`${this.character.Nickname??this.character.Name}'s fortune wheel commands`}),f("div",{id:Ep.buttonInnerGrid1,children:bd(oR,2*oR).map((e=>Mp(this,e)))})]}),h("div",{id:Ep.exit,class:"mbs-button-div",children:[f("button",{class:"mbs-button",id:Ep.exitButton,onClick:this.exit.bind(this),style:{backgroundImage:"url('./Icons/Exit.png')"}}),f("span",{class:"mbs-button-tooltip",id:Ep.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),h("div",{id:Ep.storage,children:[f("div",{id:Ep.storageInner}),f("span",{id:Ep.storageTooltip,children:"Lorem Ipsum"})]}),f("div",{id:Ep.storageFooter,children:"Lorem Ipsum"})]}))}resize(){const e=document.getElementById(Ep.root);if(e){const t=MainCanvas.canvas.clientWidth<=2*MainCanvas.canvas.clientHeight?MainCanvas.canvas.clientWidth/50:MainCanvas.canvas.clientHeight/25;ElementPositionFix(Ep.root,t,80,60,1840,880),e.style.display="grid"}}load(){const e=fm(this.character.OnlineSharedSettings);this.dataSize.value=Kd(Object.values(e),(e=>Number.isNaN(e)?0:e)),this.dataSize.valueRecord=e,b(this,kp,"m",Bp).call(this),super.load()}run(){}click(){}unload(){const e=document.getElementById(Ep.root);e&&(e.style.display="none")}exit(){ElementRemove(Ep.root),this.exitScreens(!1)}}kp=new WeakSet,Bp=function(){const e=this.character.IsPlayer();for(const[t,r]of this.wheelList.entries()){const n=document.getElementById(`${Ep.button}${t}`);n.innerText=`${(t%oR).toString().padStart(2)}: ${r?.name??"<Empty>"}`,n.disabled=null===r&&!e}const t=document.getElementById(Ep.storage),r=document.getElementById(Ep.storageInner),n=document.getElementById(Ep.storageTooltip),i=document.getElementById(Ep.storageFooter);if(e){const e=no(hm(this.dataSize.value),0,9999),o=100*e/(dm/1e3);i.innerText=`${e} / ${dm/1e3} KB`,r.style.height=100-o+"%",r.style.backgroundColor="white",r.style.borderBottom="min(0.3vh, 0.15vw) solid black",o>=90&&(t.style.boxShadow="0 0 min(2vh, 1vw) red");const a=/\W/g;let s=Object.entries(this.dataSize.valueRecord).map((([e,t])=>`${e.replaceAll(a,"")} ${Number.isNaN(t)?"Unknown":`${hm(t)} KB`}`));s.length>=11&&(s=s.slice(0,10),s.push("...")),n.innerHTML=`<strong>OnlineSharedSettings Data Usage</strong><br />${s.join("<br />")}`}else i.innerText=`- / ${dm/1e3} KB`,r.style.height="100%",r.style.backgroundColor="gray",n.style.display="none"},xp.screen="MBS_FWSelectScreen",xp.background="Sheet";const Ip="mbs-fwselect",Ep=Object.freeze({root:Ip,styles:`${Ip}-style`,exit:`${Ip}-exit`,exitButton:`${Ip}-exit-button`,exitTooltip:`${Ip}-exit-tooltip`,storage:`${Ip}-storage`,storageInner:`${Ip}-storage-cover`,storageTooltip:`${Ip}-storage-tooltip`,storageFooter:`${Ip}-storage-footer`,buttonOuterGrid:`${Ip}-button-grid-outer`,buttonInnerGrid0:`${Ip}-button-grid-inner0`,buttonInnerGrid1:`${Ip}-button-grid-inner1`,button:`${Ip}-button`,itemSets:`${Ip}-header0`,commandSets:`${Ip}-header1`}),_p=Object.freeze(["Exclusive","5 Minutes","15 Minutes","1 Hour","4 Hours","High Security"]),Op=Object.freeze([Object.freeze({type:"ExclusivePadlock",description:"Exclusive",enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:300,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:900,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:3600,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:14400,enabled:!1}),Object.freeze({type:"HighSecurityPadlock",description:"High security",enabled:!1}),Object.freeze({type:null,description:"No lock",enabled:!1})]);function Fp(e,t,r){Ph(t,"seconds",60,14400),Lp(e,"TimerPasswordPadlock",r)&&(null==e.Property&&(e.Property={}),e.Property.RemoveTimer=CurrentTime+1e3*t,e.Property.RemoveItem=!0,e.Property.LockSet=!0,e.Property.Password=Eh(8))}function $p(e,t){Lp(e,"HighSecurityPadlock",t),null==e.Property&&(e.Property={}),e.Property.MemberNumberListKeys=""}function Lp(e,t,r){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);if("string"!=typeof t)throw new TypeError('Invalid "lockName" type: '+typeof t);lR(r);const n=AssetGet(r.AssetFamily,"ItemMisc",t);if(null==n)throw new Error(`Invalid "lockName" value: ${t}`);return!(null!=InventoryGetLock(e)||!InventoryDoesItemAllowLock(e)||InventoryBlockedOrLimited(r,{Asset:n}))&&(InventoryLock(r,e,{Asset:n},null,!1),!0)}function Hp(e,t){return e.forEach(((e,r)=>{e.enabled=t.includes(r)})),e}function Tp(e){switch(e.type){case"ExclusivePadlock":return"Exclusive";case"HighSecurityPadlock":return"High Security";case"TimerPasswordPadlock":return`${Math.floor(e.time/60)} Minutes`;case null:return"No Lock";default:throw new Error(`Invalid flag type: ${e.type}`)}}var Ap,Dp,Np,Wp,jp,Gp,zp,Vp;let qp;const Up=Object.freeze({builtinBC:0,builtinMBS:1,customMBS:2});let Kp,Jp,Zp,Yp;_h(dR).then((()=>{qp=new TextCache("Screens/MiniGame/WheelFortune/Text_WheelFortune.csv","MISSING VALUE FOR TAG: ")}));class Xp extends lp{get index(){return b(this,Dp,"f")}set index(e){Ph(e,"index",0,this.presets.length-1),b(this,Dp,"f")!==e&&(S(this,Dp,e,"f"),b(this,Ap,"m",Vp).call(this))}constructor(e,t){!function(){if(void 0!==Kp)return;const e=/^([a-zA-Z0-9_\s]+) for ([0-9]+) (minutes|hours)$/,t=WheelFortuneOption.filter((e=>void 0===e.Custom)),r=new Set,n={};for(const i of t){const t=qp.get(`Option${i.ID}`),o=e.exec(t);if(!o){n[i.ID]={header:t,type:Up.builtinBC},r.add(t);continue}const[a,s]=[o[1],o[3]];let l=Number.parseInt(o[2]);"hours"===s&&(l*=60),r.add(a),n[i.ID]={header:a,description:`${l} Minutes`,type:Up.builtinBC}}Kp=Array.from(r),Jp=Object.fromEntries(Object.entries(n).map((([e,t])=>[e,{...t,index:Kp.indexOf(t.header)}])));const i=256;Zp=Object.fromEntries(im.flatMap(((e,t)=>e.flags.map(((r,n)=>[String.fromCharCode(i+16*t+n),{header:e.name,description:Tp(r),index:t,type:Up.builtinMBS}]))))),Yp=Object.fromEntries(bd(512,1536).map(((e,t)=>{const r=String.fromCharCode(e),n=Math.floor(t/i);let o;switch(n){case 0:case 2:o=(0===n?0:16)+Math.floor(t%i/16);break;case 1:case 3:o=(1===n?0:16)+Math.floor(t%i/16)+32;break;default:throw new RangeError(`Index ${t} lies out of the [0, 2**10) range`)}return[r,{header:"<Empty>",type:Up.customMBS,index:o}]})))}(),super(e),Ap.add(this),this.screen=Xp.screen,this.activePreset={name:"<PLACEHOLDER>",ids:new Set},Dp.set(this,0),this.presets=t,this.queueServer=new Set,this.idMapping={...Ma(Jp),...Ma(Zp),...Ma(Yp)},document.body.appendChild(h("div",{id:em.root,class:"HideOnPopup",children:[f("style",{id:em.styles,children:'#mbs-fwpreset {\n  display: none;\n  text-align: center;\n  user-select: none;\n  grid-gap: min(2vh, 1vw);\n  grid-template: "delete header accept save exit" min(9vh, 4.5vw) "mid mid mid mid mid" auto/min(9vh, 4.5vw) auto min(9vh, 4.5vw) min(9vh, 4.5vw) min(9vh, 4.5vw);\n}\n\n#mbs-fwpreset-delete {\n  grid-area: delete;\n}\n\n#mbs-fwpreset-header {\n  align-self: center;\n  font-size: min(5vh, 2.5vw);\n  grid-area: header;\n  margin-left: min(20vh, 10vw);\n}\n\n#mbs-fwpreset-accept {\n  grid-area: accept;\n}\n\n#mbs-fwpreset-save {\n  grid-area: save;\n}\n\n#mbs-fwpreset-exit {\n  grid-area: exit;\n}\n\n#mbs-fwpreset-mid-div {\n  display: grid;\n  text-align: center;\n  user-select: none;\n  grid-area: mid;\n  grid-gap: min(2vh, 1vw);\n  justify-items: center;\n  justify-self: center;\n  font-size: min(3.5vh, 1.75vw);\n  grid-template: "name-header builtin-bc-header builtin-mbs-header custom-mbs-header" min(9vh, 4.5vw) "name builtin-bc builtin-mbs custom-mbs" auto/min(40vh, 15vw) min(40vh, 20vw) min(30vh, 15vw) min(70vh, 35vw);\n}\n\n#mbs-fwpreset-name-header {\n  grid-area: name-header;\n  align-self: center;\n}\n\n#mbs-fwpreset-builtin-bc-header {\n  grid-area: builtin-bc-header;\n  align-self: center;\n}\n\n#mbs-fwpreset-builtin-mbs-header {\n  grid-area: builtin-mbs-header;\n  align-self: center;\n}\n\n#mbs-fwpreset-custom-mbs-header {\n  grid-area: custom-mbs-header;\n  align-self: center;\n}\n\n.mbs-fwpreset-grid {\n  display: grid;\n  grid-gap: min(1.2vh, 0.6vw);\n  grid-template-rows: repeat(8, min(7vh, 3.5vw));\n  grid-auto-flow: column;\n}\n\n#mbs-fwpreset-name-div {\n  grid-area: name;\n}\n\n#mbs-fwpreset-name-input {\n  font-size: min(3.5vh, 1.75vw);\n  width: min(35vh, 17.5vw);\n  height: min(7vh, 3.5vw);\n}\n\n#mbs-fwpreset-name-dropdown-div {\n  width: min(36vh, 18vw);\n  height: min(7vh, 3.5vw);\n  position: relative;\n  top: 5%;\n}\n\n#mbs-fwpreset-builtin-bc-div {\n  grid-template-columns: repeat(4, min(7vh, 3.5vw));\n  grid-area: builtin-bc;\n}\n\n#mbs-fwpreset-builtin-mbs-div {\n  grid-template-columns: min(7vh, 3.5vw);\n  grid-area: builtin-mbs;\n}\n\n#mbs-fwpreset-custom-mbs-div {\n  grid-template-columns: repeat(8, min(7vh, 3.5vw));\n  grid-area: custom-mbs;\n}\n\n.mbs-fwpreset-color {\n  height: 90%;\n  width: 90%;\n  position: relative;\n  left: 5%;\n  top: 5%;\n}\n.mbs-fwpreset-color[data-color=red] {\n  background-color: red;\n}\n.mbs-fwpreset-color[data-color=green] {\n  background-color: green;\n}\n.mbs-fwpreset-color:focus {\n  filter: brightness(60%);\n}\n.mbs-fwpreset-color:focus + .mbs-button-tooltip {\n  visibility: visible;\n}\n\n.mbs-fwpreset {\n  background-color: var(--mbs-background-color);\n  border: min(0.3vh, 0.15vw) solid var(--mbs-border-color);\n  height: min(7vh, 3.5vw);\n  width: min(7vh, 3.5vw);\n  display: grid;\n  grid-template-rows: min(7vh, 3.5vw) auto;\n  grid-template-columns: min(7vh, 3.5vw);\n}\n.mbs-fwpreset h6 {\n  font-size: min(3.5vh, 1.75vw);\n  margin: 0;\n}\n.mbs-fwpreset ul {\n  font-size: min(3vh, 1.5vw);\n  margin: 0;\n  text-align: left;\n}\n.mbs-fwpreset:hover .mbs-fwpreset-color {\n  filter: brightness(60%);\n}\n.mbs-fwpreset:hover .mbs-button-tooltip {\n  visibility: visible;\n}'.toString()}),f("div",{id:em.header,children:"Wheel of Fortune Presets"}),h("div",{id:em.delete,class:"mbs-button-div",children:[f("button",{class:"mbs-button",id:em.deleteButton,style:{backgroundImage:"url('./Icons/Trash.png')"},onClick:this.deletePreset.bind(this),disabled:!0}),f("div",{class:"mbs-button-tooltip",id:em.deleteTooltip,style:{justifySelf:"left"},children:"Delete the current preset"})]}),h("div",{id:em.accept,class:"mbs-button-div",children:[f("button",{class:"mbs-button",id:em.acceptButton,style:{backgroundImage:"url('./Icons/Accept.png')"},onClick:this.equipPreset.bind(this),disabled:!0}),f("div",{class:"mbs-button-tooltip",id:em.acceptTooltip,style:{justifySelf:"right"},children:"Equip the current preset"})]}),h("div",{id:em.save,class:"mbs-button-div",children:[f("button",{class:"mbs-button",id:em.saveButton,style:{backgroundImage:"url('./Icons/Save.png')"},onClick:this.savePreset.bind(this)}),f("div",{class:"mbs-button-tooltip",id:em.saveTooltip,style:{justifySelf:"right"},children:"Save the current preset"})]}),h("div",{id:em.exit,class:"mbs-button-div",children:[f("button",{class:"mbs-button",id:em.exitButton,style:{backgroundImage:"url('./Icons/Exit.png')"},onClick:()=>this.exit(!1)}),f("div",{class:"mbs-button-tooltip",id:em.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),h("div",{id:em.midDiv,children:[f("div",{id:em.nameHeader,children:"Preset Name"}),f("div",{id:em.builtinBCHeader,children:"Builtin BC Options"}),f("div",{id:em.builtinMBSHeader,children:"Builtin MBS Options"}),f("div",{id:em.customMBSHeader,children:"Custom MBS Options"}),h("div",{id:em.nameDiv,children:[f("input",{type:"text",id:em.nameInput,maxLength:20,onFocus:e=>e.target.select(),onInput:e=>this.activePreset.name=e.target.value}),h("div",{id:em.nameDropdownDiv,class:"mbs-dropdown",onWheel:e=>this.index=no(this.index+Math.sign(e.deltaY),0,this.presets.length-1),children:[f("button",{class:"mbs-button",id:em.nameDropdown}),h("div",{class:"mbs-dropdown-content",id:em.nameDropdownContent,children:[" ",Object.values(this.presets).map(((e,t)=>f("button",{class:"mbs-button mbs-dropdown-button",id:em.nameDropdown+t.toString(),onClick:()=>this.index=t,children:`${t}: ${e?.name??"<Empty>"}`})))," "]})]})]}),f("div",{id:em.builtinBCDiv,class:"mbs-fwpreset-grid",children:b(this,Ap,"m",jp).call(this,Up.builtinBC)}),f("div",{id:em.builtinMBSDiv,class:"mbs-fwpreset-grid",children:b(this,Ap,"m",jp).call(this,Up.builtinMBS)}),f("div",{id:em.customMBSDiv,class:"mbs-fwpreset-grid",children:b(this,Ap,"m",jp).call(this,Up.customMBS)})]})]}))}savePreset(){const e=this.presets[this.index],t={name:this.activePreset.name,ids:cR(Array.from(this.activePreset.ids).sort().join(""))};t.name===e?.name&&t.ids===e?.ids||(this.presets[this.index]=t,this.queueServer.add(pm.SETTINGS),b(this,Ap,"m",zp).call(this))}equipPreset(){const e=cR(Array.from(this.activePreset.ids).sort().join(""));Player.OnlineSharedSettings&&Player.OnlineSharedSettings.WheelFortune!==e&&(Player.OnlineSharedSettings.WheelFortune=e,this.queueServer.add(pm.SHARED))}deletePreset(){null!==this.presets[this.index]&&(this.queueServer.add(pm.SETTINGS),this.presets[this.index]=null,b(this,Ap,"m",Vp).call(this))}load(){super.load(),b(this,Ap,"m",Np).call(this),b(this,Ap,"m",Vp).call(this)}resize(){const e=document.getElementById(em.root),t=MainCanvas.canvas,r=t.clientWidth<=2*t.clientHeight?t.clientWidth/50:t.clientHeight/25;ElementPositionFix(em.root,r,80,60,1840,880),e.style.display="grid"}run(){}click(){}unload(){const e=document.getElementById(em.root);e&&(e.style.display="none")}exit(e=!0){this.queueServer.size&&bm(Array.from(this.queueServer),!0),ElementRemove(em.root),this.exitScreens(e)}}Dp=new WeakMap,Ap=new WeakSet,Np=function(){const e=[...Player.MBSSettings.FortuneWheelItemSets,...Player.MBSSettings.FortuneWheelCommands];for(const[t,r]of e.entries()){let e=512;if(e+=t<32?t>=16?16*(16+t):16*t:t>=48?16*t:16*(16+t),r instanceof bR)for(const[t,n]of r.flags.entries()){const i=String.fromCharCode(e+t);this.idMapping[i].description=Tp(n),this.idMapping[i].header=r.name}else if(r instanceof SR){const t=String.fromCharCode(e);this.idMapping[t].header=r.name,delete this.idMapping[t].description}else for(const t of bd(16)){const r=String.fromCharCode(e+t);this.idMapping[r].header="<Empty>",delete this.idMapping[r].description}}},Wp=function(e,t,r,n){const i=e.toString();return h("div",{id:n.root+i,class:"mbs-fwpreset",children:[f("button",{id:n.color+i,class:"mbs-fwpreset-color","data-color":"red",onClick:e=>e.target.focus()}),h("div",{id:n.tooltip+i,class:"mbs-button-tooltip",style:{justifySelf:r},children:[f("h6",{id:n.tooltipHeader+i,"data-prefix":t??""}),f("ul",{id:n.tooltipList+i})]})]})},jp=function(e){let t,r,n;const i=b(this,Ap,"m",Gp).call(this,e);switch(e){case Up.builtinBC:t=Kp,r="left";break;case Up.builtinMBS:t=im,r="center";break;case Up.customMBS:t=[...Player.MBSSettings.FortuneWheelItemSets,...Player.MBSSettings.FortuneWheelCommands],r="right",n=(e,t)=>t>=oR?`Command Set ${t-32}: `:`Item Set ${t}: `;break;default:throw new Error(`Unknown type: ${e}`)}return t.map(((e,t)=>b(this,Ap,"m",Wp).call(this,t,n?.(e,t),r,i)))},Gp=function(e){switch(e){case Up.builtinBC:return{root:em.builtinBC,color:em.builtinBCColor,tooltip:em.builtinBCTooltip,tooltipHeader:em.builtinBCTooltipHeader,tooltipList:em.builtinBCTooltipList};case Up.builtinMBS:return{root:em.builtinMBS,color:em.builtinMBSColor,tooltip:em.builtinMBSTooltip,tooltipHeader:em.builtinMBSTooltipHeader,tooltipList:em.builtinMBSTooltipList};case Up.customMBS:return{root:em.customMBS,color:em.customMBSColor,tooltip:em.customMBSTooltip,tooltipHeader:em.customMBSTooltipHeader,tooltipList:em.customMBSTooltipList};default:throw new Error(`Unknown type: ${e}`)}},zp=function(){const e=this.presets[b(this,Dp,"f")],t=document.getElementById(em.nameInput),r=document.getElementById(em.nameDropdown),n=document.getElementById(`${em.nameDropdown}${this.index}`);t.placeholder=`Preset ${this.index}`,n.innerText=r.innerText=`${b(this,Dp,"f")}: ${this.activePreset.name}`;const i=document.getElementById(em.deleteButton),o=document.getElementById(em.deleteTooltip),a=document.getElementById(em.acceptButton),s=document.getElementById(em.acceptTooltip),l=document.getElementById(em.header);null===e?(t.value="",i.disabled=!0,a.disabled=!0,o.innerText="Delete the current preset:\nunsaved preset",s.innerText="Equip the current preset:\nunsaved preset",l.innerText="Wheel of Fortune Presets (unsaved)"):(t.value=e.name,i.disabled=!1,a.disabled=!1,o.innerText="Delete the current preset",s.innerText="Equip the current preset",l.innerText="Wheel of Fortune Presets")},Vp=function(){const e=this.presets[b(this,Dp,"f")];this.activePreset=null!==e?{name:e.name,ids:new Set(e.ids)}:{name:"<Empty>",ids:new Set(Player.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault)},b(this,Ap,"m",zp).call(this);const t={[Up.builtinBC]:{},[Up.builtinMBS]:{},[Up.customMBS]:{}};for(const[e,{type:r,index:n,description:i,header:o}]of Object.entries(this.idMapping)){const a=this.activePreset.ids.has(e),s=t[r][n]??={header:o,enabled:a,description:[]};s.enabled||=a,i&&a&&s.description.push(i)}for(const e of Object.values(Up)){const r=b(this,Ap,"m",Gp).call(this,e);for(const[n,i]of Object.entries(t[e])){document.getElementById(`${r.color}${n}`).dataset.color=i.enabled?"green":"red";const e=document.getElementById(`${r.tooltipHeader}${n}`);e.innerText=(e.dataset.prefix??"")+i.header;const t=document.getElementById(`${r.tooltipList}${n}`);t.innerHTML="";for(const e of i.description)t.appendChild(f("li",{children:e}))}}},Xp.background="Sheet",Xp.screen=`MBS_${Xp.name}`;const Qp="mbs-fwpreset",em=Object.freeze({root:Qp,styles:`${Qp}-style`,delete:`${Qp}-delete`,deleteButton:`${Qp}-delete-button`,deleteTooltip:`${Qp}-delete-tooltip`,accept:`${Qp}-accept`,acceptButton:`${Qp}-accept-button`,acceptTooltip:`${Qp}-accept-tooltip`,save:`${Qp}-save`,saveButton:`${Qp}-save-button`,saveTooltip:`${Qp}-save-tooltip`,exit:`${Qp}-exit`,exitButton:`${Qp}-exit-button`,exitTooltip:`${Qp}-exit-tooltip`,header:`${Qp}-header`,midDiv:`${Qp}-mid-div`,nameDiv:`${Qp}-name-div`,nameHeader:`${Qp}-name-header`,nameInput:`${Qp}-name-input`,nameDropdown:`${Qp}-name-dropdown`,nameDropdownDiv:`${Qp}-name-dropdown-div`,nameDropdownContent:`${Qp}-name-dropdown-content`,builtinBC:`${Qp}-builtin-bc`,builtinBCColor:`${Qp}-builtin-bc-color`,builtinBCTooltip:`${Qp}-builtin-bc-tooltip`,builtinBCTooltipHeader:`${Qp}-builtin-bc-tooltip-header`,builtinBCTooltipList:`${Qp}-builtin-bc-tooltip-list`,builtinBCDiv:`${Qp}-builtin-bc-div`,builtinBCHeader:`${Qp}-builtin-bc-header`,builtinMBS:`${Qp}-builtin-mbs`,builtinMBSColor:`${Qp}-builtin-mbs-color`,builtinMBSTooltip:`${Qp}-builtin-mbs-button-tooltip`,builtinMBSTooltipHeader:`${Qp}-builtin-mbs-button-tooltip-header`,builtinMBSTooltipList:`${Qp}-builtin-mbs-button-tooltip-list`,builtinMBSDiv:`${Qp}-builtin-mbs-div`,builtinMBSHeader:`${Qp}-builtin-mbs-header`,customMBS:`${Qp}-custom-mbs`,customMBSColor:`${Qp}-custom-mbs-color`,customMBSTooltip:`${Qp}-custom-mbs-button-tooltip`,customMBSTooltipHeader:`${Qp}-custom-mbs-button-tooltip-header`,customMBSTooltipList:`${Qp}-custom-mbs-button-tooltip-list`,customMBSDiv:`${Qp}-custom-mbs-div`,customMBSHeader:`${Qp}-custom-mbs-header`});function tm(e,t,r){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);if(!Dh(r))throw new TypeError('Invalid "indices" type: '+typeof r);if(null===t||"object"!=typeof t)throw new TypeError('Invalid "character" type: '+typeof t);if(!t.IsSimple()&&!t.IsPlayer())throw new Error("Expected a simple or player character");const n=t.Appearance.find((e=>"HairFront"===e.Asset.Group.Name));if(void 0===n)return;const i=Math.max(0,...r);let o;"string"==typeof e.Color?e.Color=o=Mh([e.Color],i,"Default"):Array.isArray(e.Color)&&0!==e.Color.length?o=e.Color:e.Color=o=Array(i).fill("Default"),"string"==typeof n.Color?r.forEach((e=>o[e]=n.Color)):Array.isArray(n.Color)&&n.Color.length>=1&&r.forEach((e=>o[e]=n.Color[0]))}function rm(e,t){if(null===t||"object"!=typeof t)throw new TypeError('Invalid "character" type: '+typeof t);if(!t.IsSimple()&&!t.IsPlayer())throw new Error("Expected a simple or player character");if(uR(t)){!function(e,t,r){if(!Dh(e))throw new TypeError('Invalid "groupNames" type: '+typeof e);if("string"!=typeof r)throw new TypeError('Invalid "color" type: '+typeof e);for(const n of e){const e=InventoryGet(t,n);null!=e&&(e.Color=Array(e.Asset.ColorableLayerCount).fill(r))}}(["HairAccessory1","HairAccessory2","HairAccessory3","HairBack","HairFront","BodyUpper","BodyLower","Wings","TailStraps","Nipples","Blush","Mouth"],t,"#484747")}return e}let nm,im,om,am,sm;class lm extends up{constructor(){super(null,"WheelFortune","MiniGame",{Run:WheelFortuneRun,Click:WheelFortuneClick,Exit:WheelFortuneExit,Load:()=>{CommonSetScreen("MiniGame","WheelFortune"),WheelFortuneLoad()}}),this.screen=lm.screen,this.character=Player,this.FortuneWheelItemSets=Array(oR).fill(null),this.FortuneWheelCommands=Array(oR).fill(null),this.weightedIDs=this.character.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault}initialize(){if(null==WheelFortuneCharacter)throw new Error("Cannot load the fortune wheel UI while `WheelFortuneCharacter == null`");WheelFortuneOption=[...om],WheelFortuneDefault=am,this.character=WheelFortuneCharacter,this.FortuneWheelItemSets=Pp(WheelFortuneCharacter,"FortuneWheelItemSets","item sets"),this.FortuneWheelCommands=Pp(WheelFortuneCharacter,"FortuneWheelCommands","commands"),this.weightedIDs=function(e){const t=Array.from(e).flatMap((e=>{const t=WheelFortuneOption.find((t=>t.ID===e));return void 0===t?[]:Array(t.Weight??1).fill(e)}));if(0===t.length)return Array.from(e.length>0?e:WheelFortuneDefault).sort(Math.random).join();const r=[];for(;r.length<50;)r.push(...Td(t,Math.random));return r.join("")}(this.character.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault)}}lm.screen="WheelFortune",_h(dR).then((()=>{const e={exit:[1830,60,90,90],roll:[1720,60,90,90],select:[1610,60,90,90],preset:[1500,60,90,90]};if(Bh.log("Initializing wheel of fortune hooks"),!function(){const e=String.fromCharCode(256),t=WheelFortuneOption.find((t=>void 0===t.Custom&&t.ID>=e));return void 0===t||(Bh.warn("Aborting wheel of fortune hook initialization: Found one or more builtin wheel of fortune option-IDs outside of the extended ASCII range",t),!1)}())return;const t={'DrawTextWrap(TextGet((WheelFortuneVelocity == 0) ? (WheelFortuneForced ? "Forced" : "Title") : "Wait"), 1375, 200, 550, 200, "White");':";"};"E9E5F3D6"===Oh.getOriginalHash("WheelFortuneRun")?(t['DrawButton(1770, 25, 90, 90, "", BackColor, "Icons/Random.png", TextGet("Random"));']=";",t["DrawButton(1885, 25, 90, 90"]=`DrawButton(${e.exit.join(", ")}`):t['DrawButton(1720, 60, 90, 90, "", BackColor, "Icons/Random.png", TextGet("Random"));']=";";const r={};"16991349"===Oh.getOriginalHash("WheelFortuneClick")&&(r["MouseIn(1885, 25, 90, 90)"]=`MouseIn(${e.exit.join(", ")})`,r["MouseIn(1770, 25, 90, 90)"]=`MouseIn(${e.roll.join(", ")})`),Oh.patchFunction("WheelFortuneRun",t),Oh.patchFunction("WheelFortuneClick",r),Oh.hookFunction("WheelFortuneLoad",11,((e,t)=>{if(sm.initialize(),null!=TextScreenCache)for(const{Description:e,Custom:t,ID:r}of WheelFortuneOption)void 0!==e&&(TextScreenCache.cache[`Option${r}`]=t?`*${e}`:e);return t(e)})),Oh.hookFunction("WheelFortuneCustomizeLoad",0,((e,t)=>{if(null!=TextScreenCache)for(const{Description:e,Custom:t,ID:r}of WheelFortuneOption)void 0!==e&&(TextScreenCache.cache[`Option${r}`]=t?`*${e}`:e);return t(e)})),Oh.hookFunction("WheelFortuneRun",0,((t,r)=>{const n=Player.MBSSettings.RollWhenRestrained||!Player.IsRestrained();n||(WheelFortuneForced=!1),r(t);const i=0===WheelFortuneVelocity,o=i?"White":"Silver",a=WheelFortuneCharacter?.Nickname??WheelFortuneCharacter?.Name,s=WheelFortuneCharacter?.IsPlayer()?"MBS: Configure custom options":`MBS: View ${a}'s option config`;DrawButton(...e.select,"",o,"Icons/Crafting.png",s,!i);const l=!(0!==WheelFortuneVelocity||!WheelFortuneCharacter?.IsPlayer()),u=l?"White":"Silver",c=WheelFortuneCharacter?.Nickname??WheelFortuneCharacter?.Name,d=WheelFortuneCharacter?.IsPlayer()?"MBS: Configure option presets":`MBS: View ${c}'s option presets`;DrawButton(...e.preset,"",u,"Icons/Crafting.png",d,!l);const f=0==WheelFortuneVelocity&&n?"White":"Silver";DrawButton(...e.roll,"",f,"Icons/Random.png",n?TextGet("Random"):"MBS: Cannot spin while restrained",!n);let h="";h=0!==WheelFortuneVelocity?TextGet("Wait"):n?WheelFortuneForced?TextGet("Forced"):TextGet("Title"):"MBS: Cannot spin the wheel of fortune while restrained",DrawTextWrap(h,1375,200,550,200,"White")})),Oh.hookFunction("WheelFortuneClick",0,((t,r)=>{if(Player.MBSSettings.RollWhenRestrained||!Player.IsRestrained()||(WheelFortuneForced=!1,!MouseIn(...e.roll))){if(0===WheelFortuneVelocity&&MouseIn(...e.select)){const e={FortuneWheelItemSets:sm.FortuneWheelItemSets,FortuneWheelCommands:sm.FortuneWheelCommands},t=new xp(sm,e,sm.character);sm.children.set(t.screen,t),t.load()}else if(0===WheelFortuneVelocity&&MouseIn(...e.preset)&&WheelFortuneCharacter?.IsPlayer()){const e=new Xp(sm,WheelFortuneCharacter.MBSSettings.FortuneWheelPresets);sm.children.set(e.screen,e),e.load()}return r(t)}})),Oh.hookFunction("WheelFortuneMouseUp",11,((e,t)=>{!Player.MBSSettings.RollWhenRestrained&&Player.IsRestrained()||t(e)})),Oh.hookFunction("WheelFortuneMouseDown",11,((e,t)=>{!Player.MBSSettings.RollWhenRestrained&&Player.IsRestrained()||t(e)}));const n="undefined"!=typeof WheelFortuneDrawWheel?"WheelFortuneDrawWheel":"WheelFortuneDraw";Oh.hookFunction(n,11,((e,t)=>(e[0]=sm.weightedIDs,t(e)))),sm=new lm,_h(hR).then((()=>{Bh.log("Initializing wheel of fortune module"),nm=function(){const e=Wh(Nh({leash_candy:[{Name:"ReverseBunnySuit",Group:"Suit",ItemCallback:(e,t)=>tm(e,t,[0,1])},{Name:"Catsuit",Group:"SuitLower",ItemCallback:(e,t)=>tm(e,t,[0,1])},{Name:"FaceVeil",Group:"Mask",Color:["#000","Default"],ItemCallback:(e,t)=>tm(e,t,[1])},{Name:"FuturisticMittens",Group:"ItemHands",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Mittens"},ItemCallback:(e,t)=>tm(e,t,[0,1])},{Name:"InteractiveVRHeadset",Group:"ItemHead",TypeRecord:{b:3,f:3,g:1},Craft:{Property:"Secure",Name:"Permanent PSO Headset"},ItemCallback:(e,t)=>tm(e,t,[0])},{Name:"LargeDildo",Group:"ItemMouth",Craft:{Property:"Secure",Name:"Permanent PSO Dildo",Description:"Specially made to fill a PSOs mouth and throat"}},{Name:"LatexBallMuzzleGag",Group:"ItemMouth2",Craft:{Property:"Secure",Name:"Permanent PSO Muzzle",Description:"Forcing the dildo in and keeping it secure"}},{Name:"FuturisticMuzzle",Group:"ItemMouth3",TypeRecord:{n:1,h:0,s:3},Craft:{Property:"Secure",Name:"Permanent PSO Muzzle",Description:"Keeping your cries muffled"},ItemCallback:(e,t)=>tm(e,t,[3])},{Name:"FuturisticVibrator",Group:"ItemVulva",TypeRecord:{vibrating:9},Craft:{Property:"Secure",Name:"Permanent PSO Vibe",Description:"Specially made to fill a PSO"}},{Name:"SciFiPleasurePanties",Group:"ItemPelvis",TypeRecord:{c:3,i:4,o:1,s:2},Craft:{Property:"Secure",Name:"Permanent PSO Panties",Description:"No escape and no Orgasms"},ItemCallback:(e,t)=>tm(e,t,[0,2,4,5])},{Name:"BonedNeckCorset",Group:"ItemNeck",Color:["#222222","#888888","#AA2121","#AA2121","#888888"],TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Permanent PSO Collar"},ItemCallback:(e,t)=>tm(e,t,[2,3])},{Name:"CollarChainShort",Group:"ItemNeckRestraints",Craft:{Property:"Secure",Name:"Permanent PSO Chain",Description:"To keep a PSO on their knees"},Property:{OverridePriority:7},ItemCallback:(e,t)=>tm(e,t,[0])},{Name:"StrictLeatherPetCrawler",Group:"ItemArms",Craft:{Property:"Secure",Name:"Permanent PSO Suit",Description:"Extra tight and unremovable"}},{Name:"HeavyLatexCorset",Group:"ItemTorso",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Corset",Description:"Extra tight and specially molded"}},{Name:"FuturisticHarness",Group:"ItemTorso2",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Harness",Description:"Special harness that constantly shrinks...."},Property:{OverridePriority:23},ItemCallback:(e,t)=>tm(e,t,[0,1,2])},{Name:"FuturisticEarphones",Group:"ItemEars",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Earphones"},Color:["#0F0F0F","Default","Default"],ItemCallback:(e,t)=>tm(e,t,[1])},{Name:"CeilingChain",Group:"ItemAddon",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Chain",Description:"Never to escape"},ItemCallback:(e,t)=>tm(e,t,[0])},{Name:"RoundPiercing",Group:"ItemNipplesPiercings",TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Permanent PSO Piercings"},Color:["#000000","Default","Default"],ItemCallback:(e,t)=>tm(e,t,[1,2])},{Name:"CollarAutoShockUnit",Group:"ItemNeckAccessories",TypeRecord:{s:2,y:0},Craft:{Property:"Secure",Name:"Permanent PSO Shock Unit"}},{Name:"FrogtieStraps",Group:"ItemLegs",Craft:{Property:"Secure",Name:"Permanent PSO Straps",Description:"To keep a PSO on their knees"},ItemCallback:(e,t)=>tm(e,t,[2])},{Name:"DroneMask",Group:"ItemHood",TypeRecord:{m:0,e:0,p:1,g:0,s:1,h:2,j:0},Craft:{Property:"Thin",Name:"Permanent PSO Mask"},ItemCallback:(e,t)=>tm(e,t,[2])}],mummy:[{Name:"DuctTape",Group:"ItemFeet",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{tm(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));0!==n.length&&Vh(e,t,Ih(n))}},{Name:"DuctTape",Group:"ItemLegs",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{tm(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));0!==n.length&&Vh(e,t,Ih(n))}},{Name:"DuctTape",Group:"ItemHands",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>tm(e,t,[0])},{Name:"DuctTape",Group:"ItemArms",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{tm(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));0!==n.length&&Vh(e,t,Ih(n))}},{Name:"LargeDildo",Group:"ItemMouth",Craft:{Property:"Large",Name:"Rubber Mouth Sealant",Description:"A rubber mass molded to shape of your mouth"}},{Name:"DuctTape",Group:"ItemMouth2",TypeRecord:{typed:0},Craft:{Property:"Large",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{tm(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));n.length<2||Vh(e,t,Ih(n.slice(1)))}},{Name:"DuctTape",Group:"ItemMouth3",TypeRecord:{typed:0},Craft:{Property:"Large",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},Equip:()=>Math.random()>.5,ItemCallback:(e,t)=>{tm(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));0!==n.length&&Vh(e,t,Ih(n))}}],maid:[{Name:"LaceBands",Group:"Bracelet",Color:["#aaaaaa","#151515"]},{Name:"MaidOutfit2",Group:"Cloth",Color:["#0C0C0C","#919194","#9C9C9F"]},{Name:"CatsuitCollar",Group:"ClothAccessory",Color:["#0E0E0E"]},{Name:"MaidHairband1",Group:"Hat",Color:["#979797"]},{Name:"Socks6",Group:"Socks",Color:["#0D0D0D","#919194"]},{Name:"HeartTop",Group:"Bra",Color:["#0E0E0E"]},{Name:"FuturisticHeels2",Group:"Shoes",Color:["#101010","Default","#F1FAFF","#898989","#898989"],TypeRecord:{typed:1}},{Name:"MaidCollar",Group:"ItemNeck",Color:["#DCDCDC","#1B1B1B","Default"],Craft:{Property:"Secure",Name:"Maid Collar",Description:"A tight fitting yet comfortable collar"}},{Name:"FuturisticMittens",Group:"ItemHands",Color:["#FFFFFF","#FFFFFF","#2E2E2E","#050505"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Maid Mittens",Description:"For keeping a maid out of trouble"}},{Name:"FuturisticHeels2",Group:"ItemBoots",Color:["#101010","#101010","Default","#F1FAFF","#898989","#898989","#898989"],TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Maid Heels",Description:"For keeping a maid on their toes"}},{Name:"WiredEgg",Group:"ItemVulva",Color:["Default","#141414"],TypeRecord:{vibrating:1},Craft:{Property:"Arousing",Name:"Maid Teaser",Description:"A little reminder to keep a maid on edge"},Property:{OverridePriority:21}},{Name:"StraitLeotard",Group:"ItemArms",Color:["#FFFFFF","#1A1A1A","#FFFFFF"],TypeRecord:{cl:1,co:1,np:0,vp:0},Craft:{Property:"Secure",Name:"Maid Jacket",Description:"For keeping a maid out of trouble"}},{Name:"LeatherAnkleCuffs",Group:"ItemFeet",Color:["#969696","#191919","#969696"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Maid Cuffs",Description:"For keeping a maid out of trouble"}},{Name:"BallGag",Group:"ItemMouth",TypeRecord:{typed:2},Craft:{Property:"Large",Name:"Maid Silencer",Description:"Silence is golden"}}],statue:[{Name:"ReverseBunnySuit",Group:"SuitLower",Color:["#1B1B1B"],Equip:e=>uR(e)},{Name:"SeamlessCatsuit",Group:"SuitLower",Color:["#484747"],Equip:e=>!uR(e)},{Name:"SeamlessCatsuit",Group:"Suit",Color:["#484747"],Equip:e=>!uR(e)},{Name:"ReverseBunnySuit",Group:"Cloth",Color:["#1B1B1B","#1B1B1B"]},{Name:"BondageSkirt",Group:"ClothLower",Color:["#484747","#333333","#333333"]},{Name:"CatsuitCollar",Group:"ClothAccessory",Color:["#484747"]},{Name:"HighCollar",Group:"ItemNeck",Color:["#363636","#717171"],Craft:{Property:"Secure",Name:"Statue Neck"}},{Name:"LargeDildo",Group:"ItemMouth",Color:["#333333"],Craft:{Property:"Large",Name:"Mouth Sealant"},Property:{OverridePriority:27}},{Name:"LatexPostureCollar",Group:"ItemMouth2",Color:["Default"],Craft:{Property:"Large",Name:"Mouth Sealant"},Property:{OverridePriority:28}},{Name:"LatexBallMuzzleGag",Group:"ItemMouth3",Color:["#A1A1A1"],Craft:{Property:"Large",Name:"Mouth Sealant"}},{Name:"KirugumiMask",Group:"ItemHood",Color:["#484747","#484747","#484747","#484747"],TypeRecord:{e:0,m:3,b:0,br:0,op:0,ms:0},Craft:{Property:"Secure",Name:"Statue's Visage"}},{Name:"MonoHeel",Group:"ItemBoots",Color:["#737070","#737070","#101010"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Statue Base"}},{Name:"FuturisticMittens",Group:"ItemHands",Color:["#767676","#5F5F5F","#3C3C3C","#4F4F4F"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Statue Hands"}},{Name:"SmoothLeatherArmbinder1",Group:"ItemArms",Color:["#191919","#3D3D3D","#191919","#191919","#191919"],Craft:{Property:"Secure",Name:"Statue Arms"}}]}).map((([e,t])=>{const r=Object.freeze(t.map((t=>{let r;if(null!==t.Craft&&"object"==typeof t.Craft){const n=AssetGet(Player.AssetFamily,t.Group,t.Name);if(null==n)throw new Error(`Invalid ${e} item: ${t.Group}${t.Name}`);r={...t.Craft,Item:t.Name,Private:!0,Lock:"",TypeRecord:void 0,Name:t.Craft.Name||n.Description,MemberNumber:void 0,MemberName:""},CraftingValidate(r,n,!1)}return Object.freeze({...t,Custom:!1,Property:Object.freeze(t.Property??{}),TypeRecord:t.TypeRecord,Craft:Object.freeze(r),Color:t.Color,ItemCallback:t.ItemCallback,Equip:t.Equip})})));return[e,r]})));return Object.freeze(e)}(),im=Object.freeze([new bR("PSO Bondage",nm.leash_candy,Player.MBSSettings.FortuneWheelItemSets,Uh.UNDERWEAR,Uh.UNDERWEAR,Hp(Op.map(ka),[0,1,2,3,4,5]),!1),new bR("Mummification",nm.mummy,Player.MBSSettings.FortuneWheelItemSets,Uh.CLOTHES,Uh.UNDERWEAR,Hp(Op.map(ka),[3]),!1),new bR("Bondage Maid",nm.maid,Player.MBSSettings.FortuneWheelItemSets,Uh.UNDERWEAR,Uh.UNDERWEAR,Hp(Op.map(ka),[0,1,2,3]),!1),new bR("Petrification",nm.statue,Player.MBSSettings.FortuneWheelItemSets,Uh.UNDERWEAR,Uh.UNDERWEAR,Hp(Op.map(ka),[0,1,2,3]),!1,rm)]),im.forEach((e=>e.register(!1))),om=Object.freeze(WheelFortuneOption.filter((e=>!e.Custom))),am=WheelFortuneDefault,bm([pm.SHARED])}))}));const um=80,cm=160;_h(dR).then((()=>{Bh.log("Initializing crafting hooks"),Oh.patchFunction("CraftingClick",{"if (CraftingOffset < 0) CraftingOffset = 80 - 20;":"if (CraftingOffset < 0) CraftingOffset = 160 - 20;","if (CraftingOffset >= 80) CraftingOffset = 0;":"if (CraftingOffset >= 160) CraftingOffset = 0;"}),Oh.patchFunction("CraftingRun",{"/ ${80 / 20}.":"/ 8."}),_h(hR).then((()=>{Bh.log("Initializing crafting cache"),Oh.hookFunction("CraftingSaveServer",0,((e,t)=>{const r=Player.Crafting;Player.Crafting=r?.slice(0,um),t(e),Player.Crafting=r;const n=null==(i=Player.Crafting?Player.Crafting.slice(um):null)?"":i.map((e=>e?.Item?CraftingSerialize(e):"")).join(CraftingSerializeItemSep);var i;n!=Player.MBSSettings.CraftingCache&&(Player.MBSSettings.CraftingCache=n,bm([pm.SETTINGS]))})),function(e,t){if(e.Crafting??=[],Mh(e.Crafting,um,null),!t)return;const r=LZString.compressToUTF16(t),n=CraftingDecompressServerData(r),i=new Set(e.Crafting.map((e=>JSON.stringify(e))));let o=!1;for(const[e,t]of CommonEnumerate(n))if(null!=t)e:switch(CraftingValidate(t)){case CraftingStatusType.OK:{const r=JSON.stringify(t);i.has(r)&&(Bh.warn(`Filtering duplicate crafting item ${um+e}: "${t.Name} (${t.Item})"`),n[e]=null);break e}case CraftingStatusType.ERROR:{const r=JSON.stringify(t);i.has(r)?(Bh.warn(`Filtering duplicate crafting item ${um+e}:"${t.Name} (${t.Item})"`),n[e]=null):o=!0;break e}case CraftingStatusType.CRITICAL_ERROR:Bh.error(`Removing corrupt crafting item ${um+e}: "${t?.Name} (${t?.Item})"`),n[e]=null}for(const t of n)if(e.Crafting.length>=cm){if(null==t)continue;if(e.Crafting.includes(null,um))Bh.warn("Found more than 160 crafting items, trimming down [80, 160)-interval null entries"),e.Crafting=e.Crafting.filter(((e,t)=>t<um||null!=e));else{if(!e.Crafting.includes(null)){const t=e.Crafting.length-cm;Bh.error(`Found more than 160 crafting items, the last ${t} will be deleted`);break}Bh.warn("Found more than 160 crafting items, trimming down [0, 80)-interval null entries"),e.Crafting=e.Crafting.filter((e=>null!=e))}}else e.Crafting.push(t);o&&e.IsPlayer()&&CraftingSaveServer()}(Player,Player.MBSSettings.CraftingCache)}))}));const dm=18e4;function fm(e){const t=[],r=CommonIsObject(e)?e:{};for(const[e,n]of Object.entries(r))try{const r=JSON.stringify(n??"");t.push([e,(new TextEncoder).encode(r).byteLength])}catch{t.push([e,NaN])}return Object.fromEntries(t.sort((([e,t],[r,n])=>{t=Math.round(t/100),n=Math.round(n/100);const i=Number.isNaN(t),o=Number.isNaN(n);return t===n||i&&o?e.localeCompare(r):i||o?o?-1:1:n-t})))}function hm(e){return Math.round(e/100)/10}const pm=Object.freeze({SETTINGS:0,SHARED:1});function mm(){const e=function(){const e=Ah.fromVersion(t),r=`#v${e.major}${e.minor}${e.micro}`;return e.beta?["blob/devel",""]:["blob/main",r]}();return`https://github.com/bananarama92/MBS/${e[0]}/CHANGELOG.md${e[1]}`}function gm(e,t,r){Array.isArray(t)?t.length>oR&&(xh(t,oR),r.push([`Trimming too long wheel of fortune item list: ${t.length}/${oR}`])):(t=[],r.push(["Re-initializing invalid wheel of fortune item list: "+typeof t]));const n=Object.seal(Array(oR).fill(null));return t.forEach(((t,i)=>{if(null!==t)try{(n[i]=e(n,t)).register(!1)}catch(e){r.push([`Failed to load corrupted custom wheel of fortune item ${i}`,e])}})),n}function Rm(e,t){Array.isArray(e)?e.length>aR&&(xh(e,aR),t.push([`Trimming too long wheel of fortune preset list: ${e.length}/${aR}`])):(e=[],t.push(["Re-initializing invalid wheel of fortune preset list: "+typeof e]));const r=Object.seal(Array(aR).fill(null));return e.forEach(((e,n)=>{if(null===e)return;if(Array.isArray(e)||"object"!=typeof e||"string"!=typeof e.ids)return void t.push([`Failed to load corrupted custom wheel of fortune preset ${n}`]);const{name:i,ids:o}=e;r[n]={name:"string"==typeof i&&i.length>0&&i.length<=20?i:`Preset ${n}`,ids:o}})),r}function vm(e,t,r=!0){let n=null;try{if(e&&"string"==typeof e){let t=LZString.decompressFromUTF16(e);t||(t=LZString.decompressFromBase64(e)),n=JSON.parse(t||"null")}}catch(e){r&&Bh.warn(`failed to load corrupted MBS ${t}`,e)}return null!==n&&"object"==typeof n?n:{}}function ym(e=null,r=!0){if(void 0===Player.OnlineSharedSettings)throw new Error('"Player.OnlineSharedSettings" still uninitialized');e??={...vm(Player.OnlineSettings?.MBS,"OnlineSettings"),...vm(Player.ExtensionSettings.MBS,"ExtensionSettings"),...vm(Player.OnlineSharedSettings.MBS,"OnlineSharedSettings")},void 0!==e.Version&&function(e){if(void 0===e)return Bh.log("Detecting first-time MBS initialization"),!1;const r=Ah.fromVersion(t);let n;try{n=Ah.fromVersion(e)}catch(t){return Bh.warn(`Failed to parse previous MBS version: ${e}`),!1}return r.greater(n)?(Bh.log(`Upgrading MBS from ${e} to ${t}`),!0):!!r.lesser(n)&&(Bh.warn(`Downgrading MBS from ${e} to ${t}`),!1)}(Player.OnlineSharedSettings.MBSVersion??Player.OnlineSettings?.MBSVersion)&&function(){const e=`New MBS version detected: ${t}\n\nSee below for the updated changelog:\n${mm()}`;"number"==typeof Player.MemberNumber&&ServerAccountBeep({MemberNumber:Player.MemberNumber,MemberName:"MBS",ChatRoomName:"MBS Changelog",Private:!0,Message:e,ChatRoomSpace:"",BeepType:""})}();let n=!1;void 0!==Player.OnlineSettings?.MBSVersion&&(delete Player.OnlineSettings.MBSVersion,n=!0),Player.OnlineSettings?.MBS&&(delete Player.OnlineSettings.MBS,n=!0),n&&ServerAccountUpdate.QueueData({OnlineSettings:Player.OnlineSettings});const i=function(e){const r={Version:[],CraftingCache:[],FortuneWheelItemSets:[],FortuneWheelCommands:[],FortuneWheelPresets:[],LockedWhenRestrained:[],RollWhenRestrained:[]},n={CraftingCache:"",LockedWhenRestrained:!1,RollWhenRestrained:!0};for(const[t,i]of Nh(n))void 0!==e[t]&&(typeof e[t]!=typeof i?r[t]=[[`Invalid type, expected a ${typeof i}: ${typeof r[t]}`]]:n[t]=e[t]);return{settings:{Version:t,CraftingCache:n.CraftingCache,FortuneWheelItemSets:gm(bR.fromObject,e.FortuneWheelSets??e.FortuneWheelItemSets??[],r.FortuneWheelItemSets),FortuneWheelCommands:gm(SR.fromObject,e.FortuneWheelCommands??[],r.FortuneWheelCommands),FortuneWheelPresets:Rm(e.FortuneWheelPresets??[],r.FortuneWheelPresets),LockedWhenRestrained:n.LockedWhenRestrained,RollWhenRestrained:n.RollWhenRestrained},ok:0===Kd(Object.values(r).map((e=>e.length))),err:Wh(Nh(r).filter((([e,t])=>t.length>0)))}}(e);return(i.ok||r)&&(Player.MBSSettings=i.settings),i.ok||(Bh.warn("Encountered and fixed one or more errors while parsing MBS settings",i.err),r&&function(e){const t=Wh(Nh(e).map((([e,t])=>[e,t.map((e=>e.join(", ")))]))),r=`Encountered one or more errors while parsing MBS settings:\n\n${JSON.stringify(t,void 0,4)}`;"number"==typeof Player.MemberNumber&&ServerAccountBeep({MemberNumber:Player.MemberNumber,MemberName:"MBS",ChatRoomName:"MBS Settings Error",Private:!0,Message:r,ChatRoomSpace:"",BeepType:""})}(i.err)),Player.OnlineSharedSettings.WheelFortune??=WheelFortuneDefault,i}function bm(e,r=!0){if(void 0===Player.OnlineSharedSettings)throw new Error("Player.OnlineSharedSettings is still uninitialized");const n={};if(e.includes(pm.SETTINGS)){const e=gc(Player.MBSSettings,"FortuneWheelItemSets","FortuneWheelCommands");Player.ExtensionSettings.MBS=LZString.compressToUTF16(JSON.stringify(e)),r&&(n["ExtensionSettings.MBS"]=Player.ExtensionSettings.MBS)}if(e.includes(pm.SHARED)){const e=Object.freeze({FortuneWheelItemSets:Player.MBSSettings.FortuneWheelItemSets,FortuneWheelCommands:Player.MBSSettings.FortuneWheelCommands});Player.OnlineSharedSettings.MBS=LZString.compressToUTF16(JSON.stringify(e)),Player.OnlineSharedSettings.MBSVersion=t,r&&(Player.OnlineSharedSettings.WheelFortune=cR(Player.OnlineSharedSettings.WheelFortune),n.OnlineSharedSettings=Player.OnlineSharedSettings)}r&&ServerAccountUpdate.QueueData(n)}function Sm(){const e=["ExtensionSettings","OnlineSharedSettings"];for(const t of e){const e=fm(Player[t]),r=Object.fromEntries(Object.entries(e).map((([e,t])=>[e,hm(t)]))),n=hm(Kd(Object.values(e),(e=>Number.isNaN(e)?0:e)));n>=.9*dm/1e3?Bh.warn(`Total ${t} data usage at ${n} / ${dm/1e3} KB`,r):Bh.log(`Total ${t} data usage at ${n} / ${dm/1e3} KB`,r)}}const wm=Object.freeze({OK:0,ERROR:1,EMPTY_SETTINGS:2,WARN:3});_h(fR).then((()=>{ym(),bm([pm.SETTINGS,pm.SHARED],!1),Bh.log("Initializing settings module"),Sm()}));var Cm={Blush:"R98"},km={Large:"R98",Normal:"R98",Small:"R98",XLarge:"R98"},Bm={WombTattoos:"R101"},Pm={FlatMedium:"R98",FlatSmall:"R98",Large:"R98",Normal:"R98",Small:"R98",XLarge:"R98"},Mm={Bandeau1:"R98",Bikini1:"R98",BondageBra1:"R98",Bra1:"R98",Bra10:"R98",Bra2:"R98",Bra7:"R98",Bra8:"R98",Bra9:"R98",BunnySuit:"R98",Bustier1:"R98",Camisole:"R98",ChineseBra1:"R98",ClamShell:"R98",CoconutBra:"R98",CorsetBikini1:"R98",CowPrintedBra:"R98",CuteBikini1:"R98",DominatrixLeotard:"R98",FishnetBikini1:"R98",FlowerBra:"R98",FrameBra1:"R98",FrameBra2:"R98",FullLatexBra:"R98",FullLatexBra2:"R98",HaremBra:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeartTop:"R98",KittyBra1:"R98",LatexBra1:"R98",LatexBunnySuit:"R98",LeatherBreastBinder:"R98",LeatherStrapBra1:"R98",MaidBra1:"R98",OuvertPerl1:"R98",Ribbons:"R98",Sarashi1:"R98",SexyBeachBra1:"R98",SexyBikini1:"R98",SexyBikini2:"R98",SexyBikini3:"R98",SexyBikiniBra1:"R98",SleevelessSlimLatexLeotard:"R98",StarHarnessBra:"R98",StrapBra:"R98",StuddedHarness:"R98",Swimsuit1:"R98",Swimsuit2:"R98",Swimsuit3:"R98"},xm={Band1:"R98",BowBand:"R98",KinkBracelet:"R98",LaceBands:"R98",LesBand:"R98",SpikeBands:"R98",Wristband:"R98"},Im={AdmiralTop:"R98",AdultBabyDress1:"R98",AdultBabyDress2:"R98",AdultBabyDress3:"R98",AdultBabyDress4:"R98",BabydollDress1:"R98",Blouse1:"R98",Bodice1:"R98",BodyTowel1:"R98",BondageBustier1:"R98",BondageBustier2:"R98",BondageDress1:"R98",BondageDress2:"R98",BridesmaidDress1:"R98",BusinessSuit:"R101",ButtonShirt:"R98",CheerleaderTop:"R98",ChineseDress1:"R98",ChineseDress2:"R98",CollegeOutfit1:"R98",ComfyTop:"R98",CorsetDress:"R101",CorsetShirt:"R98",CropTop:"R98",Dress2:"R98",Dress3:"R98",DressFur:"R98",EveningGown:"R102",FishnetTop:"R98",FlowerDress:"R98",FrilledShirt:"R98",FurCoat:"R98",FuzzyDress:"R98",Gown1:"R98",Gown2Top:"R98",Gown3:"R98",GrandMage:"R98",HeavyLeatherDress:"R102",Hoodie:"R98",Jacket:"R98",LaceBabydoll:"R98",LatexLacedSuit:"R98",LatexTankTop:"R98",LatexTop:"R98",Laurel:"R98",LeatherBolero:"R98",LeatherCorsetTop1:"R98",LeatherCropTop:"R98",MaidApron1:"R98",MaidApron2:"R98",MaidLatex:"R101",MaidOutfit1:"R98",MaidOutfit2:"R98",MaleTankTop1:"R98",MistressTop:"R98",NurseUniform:"R98",RetroGirdle:"R98",ReverseBunnySuit:"R98",Robe1:"R98",SeethroughTop:"R98",ShoulderlessTop:"R98",SlaveRags:"R98",SleevelessTop:"R98",SteampunkCorsetTop1:"R98",StudentOutfit1:"R98",StudentOutfit2:"R98",StudentOutfit3:"R98",SummerDress:"R98",SuspenderTop1:"R98",Sweater1:"R98",TShirt1:"R98",TShirt2:"R98",TeacherOutfit1:"R98",TennisShirt1:"R98",VirginKiller1:"R98",WeddingDress1:"R98",WeddingDress2:"R98",Yukata1:"R98"},Em={Bib:"R98",Bouquet:"R98",BugLegs:"R98",BunnyCollarCuffs:"R98",Camera1:"R98",Cape:"R98",CatsuitCollar:"R98",FacePaint:"R98",FrillyApron:"R98",FurBolero:"R98",Glitter:"R98",JewelrySet:"R98",Kissmark:"R98",KissmarkDummy:"R98",LargeBelt:"R98",LatexApron:"R101",LeatherStraps:"R98",Poncho:"R98",Scarf:"R98",StudentOutfit3Bow1:"R98",StudentOutfit3Bow2:"R98",StudentOutfit3Bow3:"R98",StudentOutfit3Scarf:"R98",WombTattoos:"R101",ZipperBelt:"R99"},_m={AdmiralSkirt:"R98",AsymmetricSkirt:"R98",BondageSkirt:"R98",BusinessSkirt:"R98",BusinessTrousers:"R101",CheerleaderSkirt:"R98",ChineseSkirt1:"R98",ClothSkirt1:"R98",CollegeSkirt:"R98",CrossSkirt:"R98",CrossSkirtLight:"R98",ElegantSkirt:"R98",Gown2Skirt:"R98",HaremPants:"R98",HaremPants2:"R98",HulaSkirt:"R98",JeanSkirt:"R98",Jeans1:"R98",Jeans2:"R98",JeansShorts:"R98",LatexPants1:"R98",LatexSkirt1:"R98",LatexSkirt2:"R98",Leggings1:"R98",Leggings2:"R98",LongLeatherSkirt:"R98",LongPleatedSkirt:"R98",LongSkirt1:"R98",MageSkirt:"R98",MistressBottom:"R98",Pajama1:"R98",PantBoots:"R98",PencilSkirt:"R98",PleatedSkirt:"R98",RuffledSkirt:"R98",ShortPencilSkirt:"R98",ShortPlaidSkirt:"R98",Shorts1:"R98",Skirt1:"R98",Skirt2:"R98",Skirt3:"R98",TennisSkirt1:"R98",TulleSkirt:"R98",Tutu:"R98",Waspie1:"R98",Waspie2:"R98",Waspie3:"R98"},Om={ClassicLatexCorset:"R98",Corset1:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",Corset6:"R98",CorsetDress:"R101",LatexCorset1:"R98",LeatherCorsetTop1:"R98",SteampunkCorsetTop1:"R98",Underbust:"R98"},Fm={Emoticon:"R98"},$m={Eyebrows1:"R98",Eyebrows2:"R98",Eyebrows7:"R98",Eyebrows8:"R98"},Lm={Eyes1:"R98",Eyes10:"R98",Eyes11:"R98",Eyes12:"R98",Eyes13:"R98",Eyes14:"R99",Eyes2:"R98",Eyes3:"R98",Eyes4:"R98",Eyes5:"R98",Eyes6:"R98",Eyes7:"R98",Eyes8:"R98",Eyes9:"R98"},Hm={Eyes1:"R98",Eyes10:"R98",Eyes11:"R98",Eyes12:"R98",Eyes13:"R98",Eyes14:"R99",Eyes2:"R98",Eyes3:"R98",Eyes4:"R98",Eyes5:"R98",Eyes6:"R98",Eyes7:"R98",Eyes8:"R98",Eyes9:"R98"},Tm={CatEye:"R98",CatEye2:"R98",LargeBlurred:"R98",LargeSolid:"R98",SmallBlurred:"R98",SmallSolid:"R98",SuperstarBlurred:"R98",SuperstarSolid:"R98",Tanuki:"R98",UndershadowedBlurred:"R98",UndershadowedSolid:"R98",Wings:"R98"},Am={BigBeard:"R98",ChinstrapBeard:"R98",Goatee:"R98",MediumBeard:"R98",Moustache:"R98",MoustacheBeard:"R98"},Dm={Fluids:"R98"},Nm={DropBag:"R98",GarterBelt:"R98",GarterBelt2:"R98",GarterBelt3:"R98",Tentacles:"R98"},Wm={CatGlasses:"R98",EyePatch1:"R98",Glasses1:"R98",Glasses2:"R98",Glasses3:"R98",Glasses4:"R98",Glasses5:"R98",Glasses6:"R98",Goggles:"R98",GradientSunglasses:"R98",JokeGlasses:"R98",StreetEyewear:"R100",SunGlasses1:"R98",SunGlasses2:"R98",SunGlassesClear:"R98",VGlasses:"R98"},jm={BikerGloves:"R98",Catsuit:"R98",CheerleaderPomPoms:"R98",CowPrintedGloves:"R98",FingerlessGloves:"R98",FishnetGloves:"R98",Gloves1:"R98",Gloves2:"R98",Gloves3:"R98",GlovesFur:"R98",HaremGlove:"R98",LatexElbowGloves:"R98",LatexShortGloves:"R98",MistressGloves:"R98",SeethroughSuit:"R98"},Gm={Antennae:"R98",BatWings:"R98",BigLynxEars:"R98",BunnyEars1:"R98",BunnyEars2:"R98",CowHorns:"R98",DildocornHorn:"R98",Ears1:"R98",Ears2:"R98",ElfEars:"R98",FoxEars1:"R98",FoxEars2:"R98",FoxEars3:"R98",GiantBow1:"R98",HairFeathers1:"R98",HairFlower1:"R98",Halo:"R98",Headset1:"R101",Horns:"R98",Horns2:"R98",Horns3:"R98",KittenEars1:"R98",KittenEars2:"R98",MouseEars1:"R98",MouseEars2:"R98",PonyEars1:"R98",PuppyEars1:"R98",PuppyEars2:"R98",RaccoonEars1:"R98",Ribbons1:"R98",Ribbons2:"R98",Ribbons3:"R98",Ribbons4:"R98",SuccubusHorns:"R98",UnicornHorn:"R98",WeddingVeil1:"R98",WolfEars1:"R98",WolfEars2:"R98"},zm={Antennae:"R98",BatWings:"R98",BunnyEars1:"R98",BunnyEars2:"R98",CowHorns:"R98",DildocornHorn:"R98",Ears1:"R98",Ears2:"R98",ElfEars:"R98",FoxEars1:"R98",FoxEars2:"R98",FoxEars3:"R98",Horns:"R98",Horns2:"R98",Horns3:"R98",KittenEars1:"R98",KittenEars2:"R98",MouseEars1:"R98",MouseEars2:"R98",PonyEars1:"R98",PuppyEars1:"R98",PuppyEars2:"R98",RaccoonEars1:"R98",SuccubusHorns:"R98",UnicornHorn:"R98",WolfEars1:"R98",WolfEars2:"R98"},Vm={GiantBow1:"R98",HairFeathers1:"R98",HairFlower1:"R98",Halo:"R98",Headset1:"R101",Ribbons1:"R98",Ribbons2:"R98",Ribbons3:"R98",Ribbons4:"R98",WeddingVeil1:"R98"},qm={HairBack1:"R98",HairBack10:"R98",HairBack10b:"R98",HairBack11:"R98",HairBack12:"R98",HairBack12b:"R98",HairBack13:"R98",HairBack13b:"R98",HairBack14:"R98",HairBack15:"R98",HairBack15b:"R98",HairBack16:"R98",HairBack17:"R98",HairBack18:"R98",HairBack18b:"R98",HairBack19:"R98",HairBack19b:"R98",HairBack1b:"R98",HairBack2:"R98",HairBack20:"R98",HairBack20b:"R98",HairBack21:"R98",HairBack22:"R98",HairBack23:"R98",HairBack24:"R98",HairBack25:"R98",HairBack26:"R98",HairBack27:"R98",HairBack28:"R98",HairBack29:"R98",HairBack2b:"R98",HairBack30:"R98",HairBack31:"R98",HairBack32:"R98",HairBack33:"R98",HairBack34:"R98",HairBack35:"R98",HairBack36:"R98",HairBack37:"R98",HairBack38:"R98",HairBack39:"R98",HairBack4:"R98",HairBack40:"R98",HairBack41:"R98",HairBack42:"R98",HairBack43:"R98",HairBack44:"R98",HairBack45:"R98",HairBack46:"R98",HairBack47:"R98",HairBack48:"R98",HairBack49:"R98",HairBack4b:"R98",HairBack5:"R98",HairBack50:"R98",HairBack51:"R98",HairBack52:"R98",HairBack53:"R98",HairBack54:"R98",HairBack54b:"R98",HairBack55:"R98",HairBack55b:"R98",HairBack56:"R98",HairBack56b:"R98",HairBack57:"R98",HairBack57b:"R98",HairBack57c:"R98",HairBack57d:"R102",HairBack5b:"R98",HairBack6:"R98",HairBack6b:"R98",HairBack7:"R98",HairBack7b:"R98",HairBack7c:"R98",HairBack8:"R98",HairBack9:"R98",HairBack9b:"R98",HairNone:"R98"},Um={HairFront1:"R98",HairFront10:"R98",HairFront10b:"R98",HairFront11:"R98",HairFront11b:"R98",HairFront12:"R98",HairFront12b:"R98",HairFront13:"R98",HairFront13b:"R98",HairFront14:"R98",HairFront14b:"R98",HairFront15:"R98",HairFront16:"R98",HairFront17:"R98",HairFront17b:"R98",HairFront18:"R98",HairFront19:"R98",HairFront1b:"R98",HairFront2:"R98",HairFront20:"R98",HairFront21:"R98",HairFront22:"R98",HairFront22b:"R98",HairFront23:"R98",HairFront23b:"R98",HairFront24:"R98",HairFront25:"R98",HairFront26:"R98",HairFront27:"R98",HairFront28:"R98",HairFront28b:"R98",HairFront29:"R98",HairFront29b:"R98",HairFront2b:"R98",HairFront3:"R98",HairFront30:"R98",HairFront31:"R98",HairFront32:"R98",HairFront33:"R98",HairFront33b:"R98",HairFront34:"R98",HairFront35:"R98",HairFront36:"R98",HairFront37:"R98",HairFront37b:"R98",HairFront38:"R98",HairFront38b:"R98",HairFront39:"R98",HairFront39b:"R98",HairFront3b:"R98",HairFront4:"R98",HairFront40:"R98",HairFront40b:"R98",HairFront41:"R98",HairFront41b:"R98",HairFront42:"R98",HairFront42b:"R98",HairFront43:"R98",HairFront43b:"R98",HairFront44:"R98",HairFront44b:"R98",HairFront45:"R98",HairFront45b:"R98",HairFront46:"R98",HairFront46b:"R98",HairFront47:"R98",HairFront47b:"R98",HairFront48:"R98",HairFront48b:"R98",HairFront49:"R98",HairFront4b:"R98",HairFront5:"R98",HairFront50:"R98",HairFront51:"R98",HairFront51b:"R98",HairFront52:"R98",HairFront52b:"R98",HairFront53:"R98",HairFront5b:"R98",HairFront6:"R98",HairFront6b:"R98",HairFront7:"R98",HairFront7b:"R98",HairFront8:"R98",HairFront8b:"R98",HairFront9:"R98",HairFront9b:"R98"},Km={Default:"R98"},Jm={BakerBoyHat:"R98",BallCapBack:"R98",BallCapFront:"R98",Band1:"R98",Band2:"R98",Bandana:"R98",Beanie:"R98",Beret1:"R98",Bonnet1:"R98",Bonnet2:"R98",BunnySuccubus2:"R98",CaptainHat1:"R98",CollegeDunce:"R98",CowboyHat:"R98",Crown1:"R98",Crown2:"R98",Crown3:"R98",Crown4:"R98",Crown5:"R98",FacePaint:"R98",FlowerCrown:"R98",FurHeadband:"R98",HeadTowel1:"R98",LatexHabit:"R98",MaidHairband1:"R98",MaidLatexHairband:"R101",NunHabit:"R98",NurseCap:"R98",PirateBandana1:"R98",PirateHat:"R98",PoliceWomanHat:"R98",PoppyCrown:"R98",ReindeerBand:"R98",RoseCrown:"R98",Santa1:"R98",SmallHat1:"R98",SwimCap:"R98",Tiara1:"R98",Veil1:"R98",Veil2:"R98",WitchHat1:"R98"},Zm={Default:"R98",NoEars:"R98",SmallEars:"R98"},Ym={H0900:"R98",H0910:"R98",H0920:"R98",H0930:"R98",H0940:"R98",H0950:"R98",H0960:"R98",H0970:"R98",H0980:"R98",H0990:"R98",H1000:"R98"},Xm={BedChains:"R98",BedRopes:"R98",BedStraps:"R98",BedTape:"R98",CeilingChain:"R98",CeilingRope:"R98",Covers:"R98"},Qm={ArmbinderJacket:"R98",BitchSuit:"R98",Bolero:"R98",BondageBouquet:"R98",BondageBra:"R98",BoxTieArmbinder:"R98",CanvasStraitjacket1:"R98",CeilingShackles:"R98",Chains:"R98",CollarCuffs:"R98",DuctTape:"R98",FourLimbsShackles:"R98",FullBodyLeatherHarness:"R98",FullBodyShackles:"R98",FullLatexSuit:"R98",FurStraitJacket:"R98",FuturisticArmbinder:"R98",FuturisticCuffs:"R98",FuturisticStraitjacket:"R98",HeavyYoke:"R98",HempRope:"R98",HighSecurityStraitJacket:"R98",HighStyleSteelCuffs:"R98",InflatableStraightLeotard:"R98",LatexArmbinder:"R98",LatexBoxtieLeotard:"R98",LatexButterflyLeotard:"R98",LatexSleevelessLeotard:"R98",LeatherArmSplints:"R98",LeatherArmbinder:"R98",LeatherCuffs:"R98",LeatherDeluxeCuffs:"R98",LeatherStraitJacket:"R98",Manacles:"R98",MedicalBedRestraints:"R98",MermaidSuit:"R98",MetalCuffs:"R98",NylonRope:"R98",OrnateCuffs:"R98",PantyhoseBody:"R98",PantyhoseBodyOpen:"R98",PetCrawler:"R98",Pillory:"R98",PlasticWrap:"R98",PrisonLockdownSuit:"R98",PrisonSJ:"R98",Ribbons:"R98",SeamlessLatexArmbinder:"R98",SeamlessStraitDress:"R98",SeamlessStraitDressOpen:"R98",ShinyArmbinder:"R98",ShinyPetSuit:"R98",ShinyStraitjacket:"R98",SleepSac:"R98",Slime:"R98",SmoothLeatherArmbinder1:"R98",SteelCuffs:"R98",StraitDress:"R98",StraitDressOpen:"R98",StraitJacket:"R98",StraitLeotard:"R98",StrictLeatherPetCrawler:"R98",SturdyLeatherBelts:"R98",Tentacles:"R98",ThinLeatherStraps:"R98",TightJacket:"R98",TightJacketCrotch:"R98",TransportJacket:"R98",UnderBedBondageCuffs:"R98",Web:"R98",WoodenCuffs:"R98",WrappedBlanket:"R98",WristShackles:"R98",Yoke:"R98",Zipties:"R98"},eg={BalletHeels:"R98",BalletHeels1:"R98",BalletWedges:"R98",FuturisticHeels:"R98",FuturisticHeels2:"R98",HighThighBoots:"R98",LeatherFootMitts1:"R98",LeatherToeCuffs:"R98",LockingBoots1:"R98",LockingHeels:"R98",LockingHeels2:"R98",LockingShoes1:"R98",LockingShoes2:"R98",MetalBallet:"R100",MonoHeel:"R98",PonyBoots:"R98",ShortPonyBoots:"R98",Slime:"R98",ThighHighLatexHeels:"R98",ToeCuffs:"R98",ToeTape:"R98",ToeTie:"R98",Zipties:"R98"},tg={ForbiddenChastityBra:"R98",FuturisticBra:"R98",FuturisticBra2:"R98",LeatherBreastBinder:"R98",MetalChastityBra:"R98",OrnateChastityBra:"R98",PolishedChastityBra:"R98",Ribbons:"R98",TickleBra:"R98"},rg={AnalBeads:"R98",AnalBeads2:"R98",AnalHook:"R98",BlackButtPlug:"R98",BunnyTailPlug1:"R98",BunnyTailPlug2:"R98",BunnyTailVibePlug:"R98",ButtPlugLock:"R98",ButtPump:"R98",Cowtail:"R98",DemonPlug:"R98",EggVibePlugXXL:"R98",FoxTail1:"R98",FoxTail2:"R98",FoxTails:"R98",HollowButtPlug:"R98",HorsetailPlug:"R98",HorsetailPlug1:"R98",InflVibeButtPlug:"R98",KittenTail1:"R98",KittenTail2:"R98",LockingVibePlug:"R98",MouseTail1:"R98",MouseTail2:"R98",PenisPlug:"R98",PuppyTailPlug:"R98",PuppyTailPlug1:"R98",RaccoonButtPlug:"R98",RaccoonTailPlug:"R98",ShockPlug:"R98",Stitches:"R98",SuccubusButtPlug:"R98",SuccubusHeartButtPlug:"R98",TailButtPlug:"R98",Tentacles:"R98",VibratingButtplug:"R98",VibratingDildoPlug:"R98",WolfTail1:"R98",WolfTail2:"R98",WolfTail3:"R98"},ng={BBQ:"R98",Bed:"R98",BondageBench:"R98",BurlapSack:"R98",Cage:"R98",ChangingTable:"R98",Coffin:"R98",ConcealingCloak:"R98",Crib:"R98",CryoCapsule:"R98",Cushion:"R98",DisplayCase:"R98",DollBox:"R98",Familiar:"R98",FoldingScreen:"R98",FuckMachine:"R98",FurBlanketWrap:"R98",FuturisticCrate:"R98",InflatableBodyBag:"R98",KabeshiriWall:"R98",Kennel:"R98",LittleMonster:"R98",Locker:"R98",LowCage:"R98",LuckyWheel:"R98",MedicalBed:"R98",MilkCan:"R98",Net:"R98",OneBarPrison:"R98",PersonalCage:"R98",PetBed:"R98",PetBowl:"R98",Pole:"R98",SaddleStand:"R98",SmallDisplayCase:"R98",SmallLocker:"R98",SmallWoodenBox:"R98",SmallWoodenBoxOpenHead:"R98",Snowman:"R98",StrapOnSmooth:"R98",StrapOnStuds:"R98",Sybian:"R98",TheDisplayFrame:"R98",TheHangingFrame:"R101",TransportWoodenBox:"R98",Trolley:"R99",VacBedDeluxe:"R98",VacCube:"R98",Vacbed:"R98",VacbedClear:"R98",WaterCell:"R98",WetFloor:"R98",WheelFortune:"R98",WoodenBox:"R98",WoodenBoxOpenHead:"R98",WoodenHorse:"R98",WoodenRack:"R98",WoodenStocks:"R98","X-Cross":"R98"},ig={BluetoothEarbuds:"R98",FuturisticEarphones:"R98",HeadphoneEarPlugs:"R98",Headphones:"R98",HeavyDutyEarPlugs:"R98",LightDutyEarPlugs:"R98"},og={AnkleShackles:"R98",BallChain:"R98",Chains:"R98",DuctTape:"R98",EscortAnkleCuffs:"R98",FloorShackles:"R98",FuturisticAnkleCuffs:"R98",HeavyAnkleCuffs:"R98",HeavySpreaderMetal:"R98",HempRope:"R98",HighStyleSteelAnkleCuffs:"R98",Irish8Cuffs:"R98",LeatherAnkleCuffs:"R98",LeatherBelt:"R98",LeatherDeluxeAnkleCuffs:"R98",MedicalBedRestraints:"R98",NylonRope:"R98",OrnateAnkleCuffs:"R98",PlasticWrap:"R98",Slime:"R98",SpreaderDildoBar:"R98",SpreaderMetal:"R98",SpreaderVibratingDildoBar:"R98",SteelAnkleCuffs:"R98",SturdyLeatherBelts:"R98",SuspensionCuffs:"R98",Tentacles:"R98",WoodenCuffs:"R98",Zipties:"R98"},ag={Baguette:"R98",Ballgag:"R98",Belt:"R98",Broom:"R98",BunPlush:"R98",CandleWax:"R98",Cane:"R98",CattleProd:"R98",Crop:"R98",ElectricToothbrush:"R98",Feather:"R98",FeatherDuster:"R98",Flogger:"R98",ForSaleSign:"R98",FoxPlush:"R98",Gavel:"R98",GlassEmpty:"R98",GlassFilled:"R98",Hairbrush:"R98",HeartCrop:"R98",IceCube:"R98",Karl:"R98",KeyProp:"R98",LargeDildo:"R98",LongDuster:"R98",LongSock:"R98",Lotion:"R98",MedicalInjector:"R98",Mug:"R98",Paddle:"R98",Panties:"R98",PetPotato:"R98",PetToy:"R98",Phone1:"R98",Phone2:"R98",PlasticWrap:"R98",Popcorn:"R99",PortalTablet:"R98",PotionBottle:"R98",RainbowWand:"R98",RopeCoilLong:"R98",RopeCoilShort:"R98",Ruler:"R98",Scissors:"R98",Shark:"R98",ShockRemote:"R98",ShockWand:"R98",SmallDildo:"R98",SmallVibratingWand:"R98",Smartphone:"R99",Spatula:"R98",Sword:"R98",TapeRoll:"R98",TennisRacket:"R98",Toothbrush:"R98",Towel:"R98",VibeRemote:"R98",VibratingWand:"R98",Vibrator:"R98",WartenbergWheel:"R98",Whip:"R98",WhipPaddle:"R98"},sg={CheerleaderPomPoms:"R98",DuctTape:"R98",FuturisticMittens:"R98",HoofMittens:"R98",LeatherMittens:"R98",PaddedLeatherMittens:"R98",PaddedMittens:"R98",PawMittens:"R98",PolishedMittens:"R98",PonyMittensBinder:"R100",SmoothLeatherMittens1:"R98"},lg={AnimeLenses:"R98",BigMouthHood:"R101",BlackoutLenses:"R98",ClothBlindfold:"R98",DroneMask:"R98",DuctTape:"R98",FrilledSleepMask:"R98",FullBlindfold:"R98",FurScarf:"R98",FuturisticMask:"R98",InteractiveVRHeadset:"R98",InteractiveVisor:"R98",KittyBlindfold:"R98",LatexBlindfold:"R98",LeatherBlindfold:"R98",LeatherSlimMask:"R98",LeatherSlimMaskOpenEyes:"R98",LeatherSlimMaskOpenMouth:"R98",LewdBlindfold:"R98",MedicalPatch:"R98",PaddedBlindfold:"R98",Pantyhose:"R98",PrisonLockdownBlindfold:"R98",Ribbons:"R98",RopeBlindfold:"R98",ScarfBlindfold:"R98",SleepMask:"R98",Slime:"R98",SmallBlindfold:"R98",Snorkel:"R98",Stitches:"R98",StuddedBlindfold:"R98",Tentacles:"R98",WebBlindfold:"R98"},ug={AccentHood:"R98",BigMouthHood:"R101",BlanketHood:"R98",CanvasHood:"R98",CollarHood:"R98",CorsetHood:"R98",CowHood:"R98",CustomLatexHood:"R98",DobermanMask:"R98",DogHood:"R98",DroneMask:"R98",FestivalFoxMask:"R98",FoxHood:"R98",FoxyMask:"R98",FuturisticHelmet:"R98",GGTSHelmet:"R98",GP9GasMask:"R98",GasMask:"R98",GwenHood:"R98",HarnessCatMask:"R98",HeadboxSeethrough:"R98",InflatableGagMask:"R98",InflatedBallHood:"R98",KirugumiMask:"R98",KittyHood:"R98",LampHeadHood:"R98",LatexBunny:"R98",LatexDogHood:"R98",LatexDogMask:"R98",LatexHabit:"R98",LatexHoodOpenHair:"R98",LeatherHood:"R98",LeatherHoodOpenEyes:"R98",LeatherHoodOpenMouth:"R98",LeatherHoodSealed:"R98",LeatherHoodSensDep:"R98",OldGasMask:"R98",OpenFaceHood:"R98",OpenMouthPlugHood:"R98",PantyHood:"R98",Pantyhose:"R98",PolishedSteelHood:"R98",PonyHood:"R98",PumpkinHead:"R98",SackHood:"R98",SensoryDeprivationHood:"R98",Slime:"R98",SpaceMask:"R100",TechnoHelmet1:"R98",VacHood:"R98",ZipperHood:"R98"},cg={Chains:"R98",DuctTape:"R98",FrogtieStraps:"R98",FuturisticLegCuffs:"R98",HempRope:"R98",HobbleSkirt:"R98",LeatherBelt:"R98",LeatherDeluxeLegCuffs:"R98",LeatherLegCuffs:"R98",LegBinder:"R98",MedicalBedRestraints:"R98",MermaidTail:"R98",NylonRope:"R98",OrnateLegCuffs:"R98",PlasticWrap:"R98",Ribbons:"R98",SeamlessHobbleSkirt:"R98",SeamlessLegBinder:"R98",ShinyLegBinder:"R98",Slime:"R98",SturdyLeatherBelts:"R98",Tentacles:"R98",Zipties:"R98"},dg={BountySuitcase:"R98",BountySuitcaseEmpty:"R98",BunPlush:"R98",CombinationPadlock:"R98",ExclusivePadlock:"R98",FamilyPadlock:"R98",FamilyPadlockKey:"R98",FoxPlush:"R98",HighSecurityPadlock:"R98",IntricatePadlock:"R98",Karl:"R98",Lockpicks:"R98",LoversPadlock:"R98",LoversPadlockKey:"R98",LoversTimerPadlock:"R98",MetalCuffsKey:"R98",MetalPadlock:"R98",MetalPadlockKey:"R98",MistressPadlock:"R98",MistressPadlockKey:"R98",MistressTimerPadlock:"R98",OwnerPadlock:"R98",OwnerPadlockKey:"R98",OwnerTimerPadlock:"R98",PandoraPadlock:"R98",PandoraPadlockKey:"R98",PasswordPadlock:"R98",PetPost:"R98",PetPotato:"R98",PortalLinkPadlock:"R98",SafewordPadlock:"R98",ServingTray:"R98",TeddyBear:"R98",TimerPadlock:"R98",TimerPasswordPadlock:"R98",WoodenMaidTray:"R98",WoodenMaidTrayFull:"R98",WoodenPaddle:"R98",WoodenSign:"R98"},fg={Ball:"R98",BallGag:"R98",BallGagMask:"R98",BambooGag:"R98",BigMouth:"R98",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CaneGag:"R98",CarrotGag:"R98",ChloroformCloth:"R98",ChopstickGag:"R98",ClothGag:"R98",ClothStuffing:"R98",CropGag:"R98",CupholderGag:"R98",DeepthroatGag:"R98",DentalGag:"R98",DildoGag:"R98",DildoPlugGag:"R98",DogMuzzleExposed:"R98",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FunnelGag:"R98",FurScarf:"R98",FuturisticHarnessBallGag:"R98",FuturisticHarnessPanelGag:"R98",FuturisticMuzzle:"R98",FuturisticPanelGag:"R98",GasMaskGag:"R98",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",HookGagMask:"R98",Kissmark:"R102",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LargeDildo:"R98",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R102",LatexSheathGag:"R98",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",MilkBottle:"R98",ModularGag:"R99",MouthFeatureGag:"R102",MuzzleGag:"R98",OTNPlugGag:"R98",PaciGag:"R98",PacifierGag:"R98",PaddedFaceMask:"R102",PantiesMask:"R98",PantyStuffing:"R98",PlasticWrap:"R98",PlugGag:"R98",PonyGag:"R98",PrisonLockdownGag:"R98",PumpGag:"R98",PumpkinGag:"R98",RegressedMilk:"R98",RegularSleepingPill:"R98",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SockStuffing:"R98",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R102",TechnoGag:"R98",Tentacles:"R98",TonguePiercingGag:"R100",TongueStrapGag:"R98",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98"},hg={BallGag:"R98",BallGagMask:"R98",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CarrotGag:"R98",ChloroformCloth:"R98",ClothGag:"R98",CupholderGag:"R98",DildoGag:"R98",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FurScarf:"R98",FuturisticHarnessBallGag:"R101",FuturisticHarnessPanelGag:"R101",FuturisticMuzzle:"R98",FuturisticPanelGag:"R101",GasMaskGag:"R98",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",Kissmark:"R102",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R102",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",ModularGag:"R99",MouthFeatureGag:"R98",MuzzleGag:"R98",PaciGag:"R98",PaddedFaceMask:"R102",PantiesMask:"R98",PlasticWrap:"R98",PonyGag:"R98",PrisonLockdownGag:"R98",PumpkinGag:"R98",RegressedMilk:"R98",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R102",Tentacles:"R98",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98"},pg={BallGag:"R98",BallGagMask:"R98",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CarrotGag:"R98",ChloroformCloth:"R98",ClothGag:"R98",CupholderGag:"R98",DildoGag:"R98",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FurScarf:"R98",FuturisticHarnessBallGag:"R101",FuturisticHarnessPanelGag:"R101",FuturisticMuzzle:"R98",FuturisticPanelGag:"R101",GasMaskGag:"R98",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",Kissmark:"R98",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R98",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",ModularGag:"R99",MouthFeatureGag:"R102",MuzzleGag:"R98",PaciGag:"R98",PaddedFaceMask:"R98",PantiesMask:"R98",PlasticWrap:"R98",PonyGag:"R98",PrisonLockdownGag:"R98",PumpkinGag:"R98",RegressedMilk:"R98",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R98",Tentacles:"R98",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98"},mg={AutoShockCollar:"R98",BatCollar:"R98",BonedNeckCorset:"R98",BordelleCollar:"R98",ClubSlaveCollar:"R98",ComboHarness:"R98",DogCollar:"R98",ExtendablePostureCollar:"R99",FuturisticCollar:"R98",GothicCollar:"R98",HeartCollar:"R98",HeartLinkChoker:"R98",HighCollar:"R98",HighSecurityCollar:"R98",HighStyleSteelCollar:"R98",LatexCollar1:"R98",LatexCollar2:"R98",LatexPostureCollar:"R98",LatexRingCollar:"R99",LeatherChoker:"R98",LeatherCollar:"R98",LeatherCollarBell:"R98",LeatherCollarBow:"R98",LeatherCorsetCollar:"R98",LeatherDeluxeCollar:"R98",LoveLeatherCollar:"R98",MaidCollar:"R98",NeckRope:"R98",NobleCorsetCollar:"R98",NylonCollar:"R98",OrnateCollar:"R98",PaddedBeltCollar:"R99",PetCollar:"R98",PetSuitShockCollar:"R98",PostureCollar:"R98",ShinySteelCollar:"R98",ShockCollar:"R98",SlaveCollar:"R98",SlenderSteelCollar:"R98",SpikeCollar:"R98",SpikedChoker:"R99",SteelPostureCollar:"R98",StrictPostureCollar:"R98",TechnoCollar:"R98"},gg={CollarAutoShockUnit:"R98",CollarBell:"R98",CollarBow:"R98",CollarButterfly:"R98",CollarCowBell:"R98",CollarFlower:"R98",CollarLapis:"R98",CollarMoon:"R98",CollarNameTag:"R98",CollarNameTagLivestock:"R98",CollarNameTagLover:"R98",CollarNameTagOval:"R98",CollarNameTagPet:"R98",CollarPentagram:"R98",CollarPupBone:"R98",CollarRose:"R98",CollarShockUnit:"R98",CollarSun:"R98",CustomCollarTag:"R98",ElectronicTag:"R98",Key:"R98"},Rg={ChainLeash:"R98",CollarChainLong:"R98",CollarChainMedium:"R98",CollarChainShort:"R98",CollarLeash:"R98",CollarRopeLong:"R98",CollarRopeMedium:"R98",CollarRopeShort:"R98",PetPost:"R98",Post:"R98"},vg={BellClamps:"R98",ChainClamp:"R98",ChainTassles:"R98",ChopStickNippleClamps:"R98",Clothespins:"R98",HeartPasties:"R98",KittyPasties:"R98",LactationPump:"R98",NippleClamp:"R98",NippleClamps2:"R98",NippleSuctionCups:"R98",NippleTape:"R98",NippleVibe:"R98",NippleWeightClamps:"R98",PlateClamps:"R98",ScrewClamps:"R98",ShockClamps:"R98",StretchClovers:"R98",TapedVibeEggs:"R98",VibeNippleClamp:"R98",VibratorRemote:"R98"},yg={BarbellPiercing:"R98",BellPiercing:"R98",CrossedStraightPiercing:"R98",NecklacePiercingChain:"R98",NippleAccessory1:"R98",NippleAccessory2:"R98",NippleAccessory3:"R98",NippleChastityPiercing1:"R98",NippleChastityPiercing2:"R98",RoundPiercing:"R98",StraightPiercing:"R98",VibeHeartPiercings:"R98"},bg={BarbelPiercing:"R98",ClownNose:"R99",DuctTape:"R98",NoseHook:"R98",NosePlugs:"R98",NoseRing:"R98",PigNose:"R98",PigNoseHook:"R98"},Sg={BulkyDiaper:"R98",DiaperHarness:"R98",ForbiddenChastityBelt:"R98",FuturisticChastityBelt:"R98",FuturisticTrainingBelt:"R98",HarnessPanties1:"R98",HarnessPanties2:"R98",HeavyDutyBelt:"R98",HempRope:"R98",HybridChastityBelt:"R98",LeatherChastityBelt:"R98",LeatherStrapPanties1:"R98",LoveChastityBelt:"R98",MetalChastityBelt:"R98",ModularChastityBelt:"R99",ObedienceBelt:"R98",OrnateChastityBelt:"R98",PelvisChainLeash:"R98",PolishedChastityBelt:"R98",PoofyDiaper:"R98",PortalPanties:"R98",Ribbons:"R98",SciFiPleasurePanties:"R98",SleekLeatherChastityBelt:"R98",SteelChastityPanties:"R98",StraponPanties:"R98",StuddedChastityBelt:"R98"},wg={Script:"R98"},Cg={AdultBabyHarness:"R98",ClassicLatexCorset:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",CrotchChain:"R98",FuturisticHarness:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeavyLatexCorset:"R98",HempRopeHarness:"R98",HighSecurityHarness:"R98",LatexCorset1:"R98",LeatherBreastBinder:"R98",LeatherChestHarness1:"R98",LeatherHarness:"R98",LeatherStrapBra1:"R98",LeatherStrapHarness:"R98",LockingSwimsuit:"R98",LockingSwimsuit2:"R98",NavelBar1:"R98",NylonRopeHarness:"R98",Ribbons:"R98",StuddedHarness:"R98",ThinLeatherStraps:"R98",Underbust:"R98"},kg={AdultBabyHarness:"R98",ClassicLatexCorset:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",CrotchChain:"R98",FuturisticHarness:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeavyLatexCorset:"R98",HempRopeHarness:"R98",HighSecurityHarness:"R98",LatexCorset1:"R98",LeatherBreastBinder:"R98",LeatherChestHarness1:"R98",LeatherHarness:"R98",LeatherStrapBra1:"R98",LeatherStrapHarness:"R98",LockingSwimsuit:"R98",LockingSwimsuit2:"R98",NavelBar1:"R98",NylonRopeHarness:"R98",Ribbons:"R98",StuddedHarness:"R98",ThinLeatherStraps:"R98",Underbust:"R98"},Bg={BasicCockring:"R98",BenWaBalls:"R98",ChastityPouch:"R98",ClitAndDildoVibratorbelt:"R98",ClitSuctionCup:"R98",ClitoralStimulator:"R98",DoubleEndDildo:"R98",FlatChastityCage:"R98",FullLatexSuitWand:"R98",FuturisticVibrator:"R98",HeavyWeightClamp:"R98",HempRopeBelt:"R98",InflatableVibeDildo:"R98",InflatableVibratingPanties:"R98",LoversVibrator:"R98",LoversVibratorRemote:"R98",PenisDildo:"R98",PlasticChastityCage1:"R98",PlasticChastityCage2:"R98",ShockDildo:"R98",Stitches:"R98",TapeStrips:"R98",TechnoChastityCage:"R98",VibeEggPenisBase:"R98",VibratingDildo:"R98",VibratingEgg:"R98",VibratingLatexPanties:"R98",VibratorRemote:"R98",WandBelt:"R98",WiredEgg:"R98"},Pg={AdornedClitPiercing:"R98",BarbellClitPiercing:"R98",ChastityClitPiercing:"R98",ChastityClitShield:"R98",ClitRing:"R98",HighSecurityVulvaShield:"R98",JewelClitPiercing:"R98",RoundClitPiercing:"R98",StraightClitPiercing:"R98",TapedClitEgg:"R98",VibeEggGlans:"R98",VibeHeartClitPiercing:"R98"},Mg={JewelrySet:"R98"},xg={BandAnklet:"R98",Ribbon:"R98",Ribbon1:"R98"},Ig={CatsuitGloves:"R100",Claws:"R99",Fingernails:"R99",Rings:"R98"},Eg={AnimeLenses:"R99",BunnyMask1:"R98",BunnyMask2:"R98",BunnyMask3:"R98",ButterflyMask:"R98",DominoMask:"R98",DroneMask:"R98",FacePaint:"R98",FaceVeil:"R98",FestivalFoxMask:"R98",FoxMask:"R98",FuturisticVisor:"R98",Glitter:"R98",HeadHarness:"R98",Kissmark:"R98",KittyMask1:"R98",KittyMask2:"R98",KittyMask3:"R98",LaceMask1:"R98",LaceMask2:"R98",LatexMuzzleMask:"R99",MedicalMask:"R98",OpenFaceHood:"R98",PetNose:"R98",ShinobiMask:"R98",SwimCap:"R98",VenetianMask:"R98"},_g={Discreet:"R98",Full:"R98",Regular:"R98"},Og={Bandana:"R98",BlackHeart:"R98",BodyChainNecklace:"R98",CatsuitCollar:"R98",ChokerTattoo:"R98",ElegantHeartNecklace:"R98",FlowerGarland:"R98",FurScarf:"R98",IDCard:"R98",Necklace1:"R98",Necklace2:"R98",Necklace3:"R98",Necklace4:"R98",NecklaceBallGag:"R98",NecklaceButterfly:"R98",NecklaceKey:"R98",NecklaceLock:"R98",NecklaceRope:"R98"},Fg={Nipples1:"R98",Nipples2:"R98",Nipples3:"R98"},$g={Bikini1:"R98",BoxerShorts:"R98",Briefs:"R98",BulkyDiaper:"R98",CatsuitPanties:"R98",ChinesePanties1:"R98",CockSock:"R98",CowPrintedPanties:"R98",CrotchPanties1:"R98",Diapers1:"R98",Diapers2:"R98",Diapers3:"R98",Diapers4:"R98",FloralPanties2:"R98",FlowerPanties:"R98",HarnessPanties1:"R98",HarnessPanties2:"R98",Jockstrap:"R98",KittyPanties1:"R98",LatexCrotchlessPanties:"R98",LatexPanties1:"R98",LatexPanties2:"R98",LeatherStrapPanties1:"R98",MaidPanties1:"R98",MaidPanties2:"R98",MaleCatsuitPanties:"R98",MicroThong:"R98",Panties1:"R98",Panties11:"R98",Panties12:"R98",Panties13:"R98",Panties14:"R98",Panties15:"R98",Panties16:"R98",Panties7:"R98",Panties8:"R98",PearlPanties1:"R98",PilotPanties:"R98",PoofyDiaper:"R98",RedBowPanties:"R98",SexyBeachPanties1:"R98",StringPanties1:"R98",StringPasty1:"R98",StringThong:"R98",SunstripePanties1:"R98",Thong:"R98",WrapPanties1:"R98",ZipPanties1:"R98"},Lg={HeHim:"R98",SheHer:"R98"},Hg={Penis:"R98",Pussy1:"R98",Pussy2:"R98",Pussy3:"R98"},Tg={BandAnklet:"R98",Ribbon:"R98",Ribbon1:"R98"},Ag={CatsuitGloves:"R100",Claws:"R99",Fingernails:"R99",Rings:"R98"},Dg={AnkleBoots1:"R98",AnkleStrapShoes:"R98",BalletHeels1:"R98",BarefootSandals1:"R98",Boots1:"R98",Clogs:"R99",DeluxeBoots:"R98",DutyShoes:"R98",Flippers:"R98",FuturisticHeels2:"R98",FuzzyBoots:"R98",Geta:"R98",Heels1:"R98",Heels2:"R98",Heels3:"R98",LatexAnkleShoes:"R98",LatexHeels:"R98",MaryShoes:"R102",MistressBoots:"R98",PawBoots:"R98",PonyBoots:"R98",Sandals:"R98",SandalsRS:"R98",Shoes1:"R98",Shoes2:"R98",Shoes4:"R98",Shoes5:"R98",Sneakers1:"R98",Sneakers2:"R98",SneakersSport:"R98",SocialHeels:"R98",StilettoHeels:"R98",StreetBoots:"R98",TallerBoots:"R100",ThighBoots:"R98",ThighHighLatexHeels:"R98",WesternBoots:"R98",WoollyBootsTall:"R98"},Ng={CowPrintedSocks:"R98",FootlessSocks1:"R98",GradientPantyhose:"R98",HaremStockings:"R98",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",Pantyhose1:"R98",Pantyhose2:"R98",ReverseBunnySuit:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98"},Wg={CowPrintedSocks:"R98",FootlessSocks1:"R98",HaremStockings:"R98",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",LooseSocks:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98"},jg={CowPrintedSocks:"R98",FootlessSocks1:"R98",HaremStockings:"R98",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",LooseSocks:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98"},Gg={Blouse1:"R98",Catsuit:"R98",FishnetTop:"R98",LatexCatsuit:"R98",MaleSeamlessCatsuit:"R98",PilotSuit:"R98",ReverseBunnySuit:"R98",SeamlessCatsuit:"R98",SeethroughSuit:"R98",SeethroughSuitZip:"R98",SleevelessCatsuit:"R98",SleevelessSlimLatexLeotard:"R98"},zg={Catsuit:"R98",CatsuitPanties:"R98",LatexCatsuit:"R98",MaleCatsuitPanties:"R98",MaleSeamlessCatsuit:"R98",Pantyhose1:"R98",Pantyhose2:"R98",PilotPanties:"R98",PilotSuit:"R98",ReverseBunnySuit:"R98",SeamlessCatsuit:"R98",SeethroughSuit:"R98",SeethroughSuitZip:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98"},Vg={BunnyTailStrap:"R98",CowtailStrap:"R98",DemonPlug:"R98",DragonTailStrap1:"R98",FoxTailStrap1:"R98",FoxTailStrap2:"R98",FoxTailsStrap:"R98",HorseTailStrap:"R98",HorseTailStrap1:"R98",KittenTailStrap1:"R98",KittenTailStrap2:"R98",LionTailStrap:"R98",MouseTailStrap1:"R98",MouseTailStrap2:"R98",PuppyTailStrap:"R98",PuppyTailStrap1:"R98",RaccoonStrap:"R98",RaccoonTailStrap:"R98",SuccubusHeartTailStrap:"R98",SuccubusTailStrap:"R98",TailStrap:"R98",Tentacles:"R98",WolfTailStrap1:"R98",WolfTailStrap2:"R98",WolfTailStrap3:"R98"},qg={AngelFeather:"R98",AngelWings:"R98",BatWings:"R98",BeeWings:"R98",CyberWings:"R98",DevilWings:"R98",FairyWings:"R98",FallenAngelWings:"R98",PixieWings:"R98",SteampunkWings:"R98",SuccubusFeather:"R98",SuccubusWings:"R98"},Ug={Blush:Cm,BodyLower:km,BodyMarkings:Bm,BodyUpper:Pm,Bra:Mm,Bracelet:xm,Cloth:Im,ClothAccessory:Em,ClothLower:_m,Corset:Om,Emoticon:Fm,Eyebrows:$m,Eyes:Lm,Eyes2:Hm,EyeShadow:Tm,FacialHair:Am,Fluids:Dm,Garters:Nm,Glasses:Wm,Gloves:jm,HairAccessory1:Gm,HairAccessory2:zm,HairAccessory3:Vm,HairBack:qm,HairFront:Um,Hands:Km,Hat:Jm,Head:Zm,Height:Ym,ItemAddon:Xm,ItemArms:Qm,ItemBoots:eg,ItemBreast:tg,ItemButt:rg,ItemDevices:ng,ItemEars:ig,ItemFeet:og,ItemHandheld:ag,ItemHands:sg,ItemHead:lg,ItemHood:ug,ItemLegs:cg,ItemMisc:dg,ItemMouth:fg,ItemMouth2:hg,ItemMouth3:pg,ItemNeck:mg,ItemNeckAccessories:gg,ItemNeckRestraints:Rg,ItemNipples:vg,ItemNipplesPiercings:yg,ItemNose:bg,ItemPelvis:Sg,ItemScript:wg,ItemTorso:Cg,ItemTorso2:kg,ItemVulva:Bg,ItemVulvaPiercings:Pg,Jewelry:Mg,LeftAnklet:xg,LeftHand:Ig,Mask:Eg,Mouth:_g,Necklace:Og,Nipples:Fg,Panties:$g,Pronouns:Lg,Pussy:Hg,RightAnklet:Tg,RightHand:Ag,Shoes:Dg,Socks:Ng,SocksLeft:Wg,SocksRight:jg,Suit:Gg,SuitLower:zg,TailStraps:Vg,Wings:qg},Kg=Object.freeze({__proto__:null,Blush:Cm,BodyLower:km,BodyMarkings:Bm,BodyUpper:Pm,Bra:Mm,Bracelet:xm,Cloth:Im,ClothAccessory:Em,ClothLower:_m,Corset:Om,Emoticon:Fm,EyeShadow:Tm,Eyebrows:$m,Eyes:Lm,Eyes2:Hm,FacialHair:Am,Fluids:Dm,Garters:Nm,Glasses:Wm,Gloves:jm,HairAccessory1:Gm,HairAccessory2:zm,HairAccessory3:Vm,HairBack:qm,HairFront:Um,Hands:Km,Hat:Jm,Head:Zm,Height:Ym,ItemAddon:Xm,ItemArms:Qm,ItemBoots:eg,ItemBreast:tg,ItemButt:rg,ItemDevices:ng,ItemEars:ig,ItemFeet:og,ItemHandheld:ag,ItemHands:sg,ItemHead:lg,ItemHood:ug,ItemLegs:cg,ItemMisc:dg,ItemMouth:fg,ItemMouth2:hg,ItemMouth3:pg,ItemNeck:mg,ItemNeckAccessories:gg,ItemNeckRestraints:Rg,ItemNipples:vg,ItemNipplesPiercings:yg,ItemNose:bg,ItemPelvis:Sg,ItemScript:wg,ItemTorso:Cg,ItemTorso2:kg,ItemVulva:Bg,ItemVulvaPiercings:Pg,Jewelry:Mg,LeftAnklet:xg,LeftHand:Ig,Mask:Eg,Mouth:_g,Necklace:Og,Nipples:Fg,Panties:$g,Pronouns:Lg,Pussy:Hg,RightAnklet:Tg,RightHand:Ag,Shoes:Dg,Socks:Ng,SocksLeft:Wg,SocksRight:jg,Suit:Gg,SuitLower:zg,TailStraps:Vg,Wings:qg,default:Ug});let Jg;const Zg={};var Yg;_h(dR).then((()=>{Bh.log("Initializing new item screen hooks");const e=GameVersionFormat.exec(GameVersion);if(null==e)return void Bh.error(`Invalid BC version: "${GameVersion}"`);Jg=Number.parseInt(e[1]);for(const[e,t]of Nh(Kg))for(const[r,n]of Nh(t))if(n===`R${Jg}`){const t=AssetGet("Female3DCG",e,r);if(null==t)continue;t.Group.Name===t.DynamicGroupName&&(Zg[`${t.Group.Name}${t.Name}`]=t)}"735A1207"===Oh.getOriginalHash("MainHallRun")&&"7A6D741A"===Oh.getOriginalHash("MainHallClick")&&(Oh.patchFunction("MainHallRun",{'DrawText(TextGet("OnlinePlayers") + " " + CurrentOnlinePlayers.toString(), 1740, 950, "White", "Black");':'DrawText(TextGet("OnlinePlayers") + " " + CurrentOnlinePlayers.toString(), 1630, 950, "White", "Black");'}),Oh.hookFunction("MainHallRun",0,((e,t)=>{t(e),null==MainHallStartEventTimer&&null==MainHallNextEventTimer&&DrawButton(1665,900,90,90,"","White","Icons/Changelog.png",`MBS: Show new R${Jg} items`)})),Oh.hookFunction("MainHallClick",0,((e,t)=>{if(null==MainHallStartEventTimer&&null==MainHallNextEventTimer&&MouseIn(1665,900,90,90))return Shop2Vars.Mode="Preview",Shop2Vars.Filters.MBS_VersionFilter=e=>Zg[`${e.Asset.Group.Name}${e.Asset.Name}`]?["Buy","Sell","Preview"]:[],Shop2.Init(void 0,["Room","MainHall"]),void(ServerBeep={Message:'The MBS "Show new items" button will be removed in R103; use the Club Shop or /shop chat command instead',Timer:CommonTime()+1e4});t(e)})));const t=Shop2Vars;Object.defineProperty(Shop2Vars,"MBS_ShowAllVersions",{get:()=>!("MBS_VersionFilter"in Shop2Vars.Filters)}),Shop2.Elements.MBS_VersionHeader={Coords:[345,315,0,0],Mode:new Set(["Preview","Buy","Sell"]),Run:(e,t,r)=>DrawText("Filter by BC version",t,r,Shop2Vars.DisplayDropdown?"Gray":"White")},Shop2.Elements.MBS_ShowCurrentVersion={Coords:[135,Shop2Consts.Grid.y+160,200,90],Mode:new Set(["Preview","Buy","Sell"]),Run:(e,...r)=>{Shop2Vars.DisplayDropdown?DrawButton(...r,`Version R${Jg}`,"Gray",void 0,void 0,!0):t.MBS_ShowAllVersions?DrawButton(...r,`Version R${Jg}`,"White"):DrawButton(...r,`Version R${Jg}`,"Cyan")},Click:()=>{t.MBS_ShowAllVersions&&(Shop2Vars.Filters.MBS_VersionFilter=e=>Zg[`${e.Asset.Group.Name}${e.Asset.Name}`]?["Buy","Sell","Preview"]:[],Shop2.ApplyItemFilters())}},Shop2.Elements.MBS_ShowAllVersions={Coords:[355,Shop2Consts.Grid.y+160,200,90],Mode:new Set(["Preview","Buy","Sell"]),Run:(e,...r)=>{Shop2Vars.DisplayDropdown?DrawButton(...r,"All versions","Gray",void 0,void 0,!0):t.MBS_ShowAllVersions?DrawButton(...r,"All versions","Cyan"):DrawButton(...r,"All versions","White")},Click:()=>{t.MBS_ShowAllVersions||(delete Shop2Vars.Filters.MBS_VersionFilter,Shop2.ApplyItemFilters())}},Oh.hookFunction("Shop2Load",0,((e,t)=>{0===Shop2InitVars.Items.length&&(Shop2InitVars.Items=Shop2.ParseAssets(Asset.filter((e=>e.Group.Name===e.DynamicGroupName&&(Zg[`${e.Group.Name}${e.Name}`]||(Shop2Consts.BuyGroups[e.BuyGroup]?.Value??e.Value)>0)&&!ShopHideGenderedAsset(e))).sort(((e,t)=>e.Group.Description.localeCompare(t.Group.Description)||e.Description.localeCompare(t.Description))))),t(e)}))}));class Xg extends lp{get time(){return CurrentTime-b(this,Yg,"f")}constructor(e){super(e),this.screen=Xg.screen,Yg.set(this,void 0),S(this,Yg,CurrentTime,"f"),this.buttons=[{name:"Confirm",coords:[300,720,200,80],draw:(...e)=>{this.time<1e4?DrawButton(...e,`Confirm (${10-Math.floor(this.time/1e3)})`,"#ddd",void 0,void 0,!0):DrawButton(...e,"Confirm","White")},click:()=>!(this.time<1e4)&&(delete Player.ExtensionSettings.MBS,void 0!==Player.OnlineSharedSettings&&(delete Player.OnlineSharedSettings.MBSVersion,delete Player.OnlineSharedSettings.MBS,Player.OnlineSharedSettings.WheelFortune=am),WheelFortuneOption=WheelFortuneOption.filter((e=>!0!==e.Custom)),WheelFortuneDefault=am,Player.Crafting=Player.Crafting?.slice(0,um),Player.MBSSettings=Object.seal({Version:t,CraftingCache:"",FortuneWheelItemSets:Object.seal(Array(oR).fill(null)),FortuneWheelCommands:Object.seal(Array(oR).fill(null)),LockedWhenRestrained:!1,RollWhenRestrained:!0,FortuneWheelPresets:Object.seal(Array(aR).fill(null))}),ServerAccountUpdate.QueueData({ExtensionSettings:Player.ExtensionSettings,OnlineSharedSettings:Player.OnlineSharedSettings},!0),Bh.log("Settings successfully reset"),Sm(),this.exit(),!0)},{name:"Exit",coords:[1520,720,200,80],draw:(...e)=>DrawButton(...e,"Cancel","White"),click:()=>(this.exit(),!0)}]}run(){DrawText("- Permanent reset of ALL MBS data (settings, wheel outfits, extra crafting items, etc) -",1e3,125,"Black"),DrawText("- Warning -",1e3,225,"Black","Black"),DrawText("If you confirm, all MBS data (including settings, overrides, and current states) will be permanently reset!",1e3,325,"Black"),DrawText("You will be able to continue using MBS, but all of your configuration will be reset to default!",1e3,550,"Gray"),DrawText("This action cannot be undone!",1e3,625,"Red","Black"),this.buttons.forEach((({coords:e,draw:t})=>t(...e)))}click(e){this.buttons.some((({coords:t,click:r})=>!!MouseIn(...t)&&r(e)))}exit(){this.exitScreens(!1)}}Yg=new WeakMap,Xg.background="Sheet",Xg.screen="MBS_ResetScreen";class Qg extends up{constructor(){super(null,"Character","Preference",{Run:PreferenceRun,Click:PreferenceClick,Exit:PreferenceExit,Load:()=>CommonSetScreen("Character","Preference")}),this.screen=Qg.screen,this.character=Player}}Qg.screen="Preference";class eR extends lp{constructor(e){super(e),this.screen=eR.screen,this.character=Player;const r=125;this.elements={header:{coords:[500,125,0,0],run:(e,r)=>DrawText(`- Maid's Bondage Scripts ${t} -`,e,r,"Black")},previewCharacter:{coords:[50,50,0,0],run:(e,t)=>DrawCharacter(this.character,e,t,.9)},exit:{coords:[1815,75,90,90],run:(...e)=>DrawButton(...e,"","White","Icons/Exit.png","Exit"),click:()=>this.exit()},reset:{coords:[1500,520,400,80],run:(e,t,r,n)=>{DrawButton(e,t,r,n,"","#ffc9c9","","Clear all MBS data"),DrawImageResize("Icons/ServiceBell.png",e+10,t+10,n-20,n-20),DrawTextFit("Reset MBS",e+n,t+n/2,r-n,"Black")},click:()=>{const e=new Xg(this);this.children.set(e.screen,e),e.load()}},import:{coords:[1500,620,190,80],run:(e,t,r,n)=>{MainCanvas.textAlign="center",DrawButton(e,t,r,n,"Import","White","","Import MBS settings"),MainCanvas.textAlign="left"},click:()=>{const e=prompt("Please paste MBS settings.\nImporting settings will overwrite existing settings. Are you sure?");if(!e)return;const t=function(e){Bh.log("Importing new MBS settings");let t=null,r=null;try{t=JSON.parse(LZString.decompressFromBase64(e.trim())||"{}")}catch(e){r=e}if(r||null===t||"object"!=typeof t||Dh(t))return Bh.error("Aborting, failed to parse corrupted MBS settings",r),{status:wm.ERROR,ok:!1};if(0===Object.keys(t).length)return Bh.error("Aborting, detected empty or corrupted MBS settings"),{status:wm.EMPTY_SETTINGS,ok:!1};const n=ym(t,!1);return n.ok?(bm([pm.SETTINGS,pm.SHARED],!0),Sm(),{status:wm.OK,...n}):{status:wm.WARN,...n}}(e);switch(t.status){case wm.OK:return Bh.log("Settings successfully updated"),alert("Settings successfully updated!");case wm.ERROR:return alert("ERROR: Detected corrupted MBS settings.\nNo changes were made.");case wm.EMPTY_SETTINGS:return alert("ERROR: Detected empty or corrupted MBS settings.\nNo changes were made.");case wm.WARN:confirm("WARNING: MBS successfully parsed the settings but found one or more invalid fields; please check the browser console for more details.\nAre you sure you want to continue?")&&(Player.MBSSettings=t.settings,bm([pm.SETTINGS,pm.SHARED],!0),Sm(),Bh.log("Settings successfully updated"),alert("Settings successfully updated!"))}}},export:{coords:[1710,620,190,80],run:(e,t,r,n)=>{MainCanvas.textAlign="center",DrawButton(e,t,r,n,"Export","White","","Export MBS settings"),MainCanvas.textAlign="left"},click:()=>{const e=LZString.compressToBase64(JSON.stringify(Player.MBSSettings));navigator.clipboard.writeText(e),alert("MBS settings copied to clipboard.")}},changelog:{coords:[1500,720,400,80],run:(e,t,r,n)=>{DrawButton(e,t,r,n,"","White","","Open the MBS changelog"),DrawImageResize("Icons/Changelog.png",e+10,t+10,n-20,n-20),DrawTextFit("Latest Changes",e+n,t+n/2,r-n,"Black")},click:()=>{open(mm(),"_blank")}},newAssets:{coords:[500,172,90,90],run:(e,t,n,i)=>{DrawButton(e,t,n,i,"","White","Icons/Changelog.png"),DrawText(`MBS: Show new R${Jg} items`,e+r,t+i/2,"Black")},click:()=>{const e=ServerPlayerIsInChatRoom()?ChatRoomData?.Background:void 0,t=ServerPlayerIsInChatRoom()?["Online","ChatRoom"]:["Character","Preference"];this.exitScreens(!0),PreferenceExit(),Shop2Vars.Mode="Preview",Shop2Vars.Filters.MBS_VersionFilter=e=>Zg[`${e.Asset.Group.Name}${e.Asset.Name}`]?["Buy","Sell","Preview"]:[],Shop2.Init(e,t),ServerBeep={Message:'The MBS "Show new items" button will be removed in R103; use the Club Shop or /shop chat command instead',Timer:CommonTime()+1e4}}},wheelConfig:{coords:[500,282,90,90],run:(e,t,n,i)=>{DrawButton(e,t,n,i,"","White","Icons/Crafting.png","Configure Wheel of Fortune"),DrawText("Configure the Wheel of Fortune",e+r,t+i/2,"Black")},click:()=>{const e={FortuneWheelItemSets:Pp(this.character,"FortuneWheelItemSets","item sets"),FortuneWheelCommands:Pp(this.character,"FortuneWheelCommands","commands")},t=new xp(this,e,this.character);this.children.set(t.screen,t),t.load()}},rollWhenRestrained:{coords:[500,394,64,64],run:(e,t,n,i)=>{const o=this.character.MBSSettings.LockedWhenRestrained&&this.character.IsRestrained();DrawCheckbox(e,t,n,i,"",this.character.MBSSettings.RollWhenRestrained,o),DrawText("Allow wheel spinning while restrainted",e+r,t+i/2,"Black")},click:()=>{this.character.MBSSettings.LockedWhenRestrained&&this.character.IsRestrained()||(this.character.MBSSettings.RollWhenRestrained=!this.character.MBSSettings.RollWhenRestrained,bm([pm.SETTINGS]))}},lockedWhenRestrained:{coords:[500,470,64,64],run:(e,t,n,i)=>{const o=this.character.MBSSettings.LockedWhenRestrained&&this.character.IsRestrained();DrawCheckbox(e,t,n,i,"",this.character.MBSSettings.LockedWhenRestrained,o),DrawText("Lock MBS settings while restrained",e+r,t+i/2,"Black")},click:()=>{this.character.MBSSettings.LockedWhenRestrained&&this.character.IsRestrained()||(this.character.MBSSettings.LockedWhenRestrained=!this.character.MBSSettings.LockedWhenRestrained,bm([pm.SETTINGS]))}}},"735A1207"===Oh.getOriginalHash("MainHallRun")&&"7A6D741A"===Oh.getOriginalHash("MainHallClick")||delete this.elements.newAssets}click(e){return Object.values(this.elements).some((t=>!(!t.click||!MouseIn(...t.coords))&&(t.click(e),!0)))}run(){MainCanvas.textAlign="left",Object.values(this.elements).forEach((e=>e.run(...e.coords))),MainCanvas.textAlign="center"}exit(){this.exitScreens(!1)}}let tR;var rR,nR,iR;eR.screen="MBSPreferenceScreen",_h(dR).then((()=>{Oh.hookFunction("PreferenceLoad",0,((e,t)=>{t(e),null!=TextScreenCache&&(TextScreenCache.cache[`Homepage${eR.screen}`]="MBS Settings");const r=new Image;r.addEventListener("error",(function(){DrawGetImageOnError(r,!1)})),r.src="Icons/Maid.png",DrawCacheImage.set(`Icons/${eR.screen}.png`,r)})),Oh.hookFunction("ServerPlayerIsInChatRoom",0,((e,t)=>CurrentScreen==eR.screen&&"ChatRoom"==InformationSheetPreviousScreen||t(e))),Oh.hookFunction("PreferenceClick",0,((e,t)=>{const r=PreferenceSubscreen;if(t(e),!r&&PreferenceSubscreen===eR.screen){PreferenceExit();const e=new eR(tR);return tR.children.set(e.screen,e),e.load()}})),PreferenceSubscreenList.push(eR.screen),tR=new Qg}));const oR=32,aR=8,sR=Object.freeze(["Blue","Gold","Gray","Green","Orange","Purple","Red","Yellow"]);function lR(e){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "character" type: '+typeof e);if(!e.IsSimple()&&!e.IsPlayer())throw new Error("Expected a simple or player character")}function uR(e){if(!(e.OnlineSharedSettings?.BlockBodyCosplay??!0))return!0;const t=Fh.getRuleState("alt_allow_changing_appearance");return!(null===t||!e.IsPlayer())&&(t.inEffect&&t.isEnforced&&t.customData.minimumRole>3)}function cR(e){if("string"!=typeof e)throw new TypeError('Invalid "IDs" type: '+typeof e);let t="";for(const r of WheelFortuneOption)e.includes(r.ID)&&(t+=r.ID);return t}function dR(e=!0){return"object"==typeof MainCanvas&&(!e||GameVersionFormat.test(GameVersion))}function fR(){return dR()&&void 0!==Player.OnlineSharedSettings}function hR(){return fR()&&void 0!==Player.MBSSettings}const pR=Object.freeze({"PSO Bondage":0,Mummification:1,"Bondage Maid":2,Petrification:3});class mR{constructor(e,t){this.name=null,this.mbsList=e,this.weight=Number.isInteger(t)?CommonClamp(t,1,9):1}reset(){this.name=null,this.weight=1}isValid(e=null){return!!this.name&&this.mbsList.every(((t,r)=>r===e||t?.name!==this.name))}toString(){return $h(typeof this,this.toJSON())}}class gR extends mR{get stripLevel(){return this.stripIter.value}set stripLevel(e){const t=this.stripIter.list.indexOf(e);this.stripIter.setPosition(t)}get equipLevel(){return this.equipIter.value}set equipLevel(e){const t=this.equipIter.list.indexOf(e);this.equipIter.setPosition(t)}constructor(e,t){super(e,t),this.itemList=null,this.flags=Object.freeze(Op.map((e=>Object.seal({...e})))),this.outfitCache=null,this.stripIter=new Lh([Uh.NONE,Uh.CLOTHES,Uh.UNDERWEAR,Uh.COSPLAY],Uh.UNDERWEAR),this.equipIter=new Lh([Uh.NONE,Uh.CLOTHES,Uh.UNDERWEAR,Uh.COSPLAY],Uh.UNDERWEAR)}reset(){super.reset(),this.itemList=null,this.outfitCache=null,this.stripLevel=Uh.UNDERWEAR,this.equipLevel=Uh.UNDERWEAR,Op.forEach(((e,t)=>Object.assign(this.flags[t],e)))}readSettings(e){if(!(e instanceof bR))throw new TypeError('Invalid "ItemSet" type: '+typeof e);this.name=e.name,this.itemList=e.itemList,this.stripLevel=e.stripLevel,this.equipLevel=e.equipLevel,this.outfitCache=null,this.weight=e.weight,e.flags.forEach(((e,t)=>Object.assign(this.flags[t],e)))}writeSettings(e=null){if(null===this.name||null===this.itemList)throw new Error('Cannot create an ItemSet while "name" or "itemList" is null');return new bR(this.name,this.itemList,this.mbsList,this.stripLevel,this.equipLevel,this.flags,!0,e,this.weight)}loadFromBase64(){if(null===this.outfitCache)return!1;let e,t;try{e=JSON.parse(LZString.decompressFromBase64(this.outfitCache.trim())),t=function(e){if(!Dh(e)){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "items" type: '+typeof e);e=[e]}const t=[],r=new Map,n=new Set;return e.forEach(((e,i)=>{let o=null;try{o=AssetGet("Female3DCG",e.Group,e.Name);const r=op(o,e);!n.has(e.Group)&&null!=o&&(o.Group.IsItem()||o.Group.IsAppearance()&&o.Group.AllowNone)&&(n.add(e.Group),t.push(r))}catch(e){let t=`${o?.Group?.Name}${o?.Name}`;t.includes("undefined")&&(t=`Item ${i}`),r.set(t,e)}})),0!==r.size&&Bh.log(`Failed to parse ${r.size} of the provided items`,r),t}(e)}catch(e){return Bh.warn("Failed to parse outfit code:",e),!1}return 0!==t.length&&(this.itemList=Object.freeze(function(e,t=Kh){const r=Yh(e,t);return Td(e,(e=>r.get(e.Group)?.priority??1/0))}(t)),!0)}isValid(e=null){return super.isValid(e)&&null!==this.itemList&&this.flags.some((e=>e.enabled))}toJSON(){return{name:this.name,itemList:this.itemList,stripLevel:this.stripLevel,equipLevel:this.equipLevel,flags:this.flags,outfitCache:this.outfitCache}}}class RR extends mR{readSettings(e){if(!(e instanceof SR))throw new TypeError('Invalid "command" type: '+typeof e);this.name=e.name,this.weight=e.weight}writeSettings(){if(null===this.name)throw new Error('Cannot create a Command while "name" is null');return new SR(this.name,this.mbsList,this.weight)}toJSON(){return{name:this.name}}}class vR{get children(){return b(this,rR,"f")}get index(){return this.mbsList.findIndex((e=>e===this))}constructor(e,t,r,n){rR.set(this,null),this.name=e,this.custom=t,this.mbsList=r,this.weight=n}static validate(e){throw new Error("Trying to call an abstract method")}static fromObject(...e){throw new Error("Trying to call an abstract method")}register(){S(this,rR,this.toOptions(),"f")}unregister(){S(this,rR,null,"f")}toString(){return $h(typeof this,this.toJSON())}}rR=new WeakMap;class yR extends vR{constructor(){super(...arguments),nR.add(this)}register(e=!0){super.register();let t=b(this,nR,"m",iR).call(this);for(const e of this.children){const r=WheelFortuneOption.findIndex((t=>t.ID===e.ID));-1!==r?(WheelFortuneOption[r]=e,e.Default&&!WheelFortuneDefault.includes(e.ID)&&(WheelFortuneDefault+=e.ID)):(WheelFortuneOption.splice(t,0,e),e.Default&&(WheelFortuneDefault+=e.ID)),t+=1}e&&bm([pm.SHARED])}unregister(e=!0){const t=this.children?.map((e=>e.ID))??[];super.unregister(),WheelFortuneOption=WheelFortuneOption.filter((e=>!t.includes(e.ID))),WheelFortuneDefault=Array.from(WheelFortuneDefault).filter((e=>!t.includes(e))).join(""),e&&bm([pm.SHARED])}}nR=new WeakSet,iR=function(){if(this.children?.length){const e=this.children[0].ID,t=WheelFortuneOption.findIndex((t=>t.ID>=e));return-1===t?WheelFortuneOption.length:t}return WheelFortuneOption.length};class bR extends yR{constructor(e,t,r,n,i,o,a,s,l){const u=bR.validate({name:e,itemList:t,mbsList:r,stripLevel:n,equipLevel:i,flags:o,custom:a,preRunCallback:s,weight:l});super(u.name,u.custom,u.mbsList,u.weight),this.itemList=u.itemList,this.stripLevel=u.stripLevel,this.equipLevel=u.equipLevel,this.flags=u.flags,this.preRunCallback=u.preRunCallback}static validate(e){if("string"!=typeof e.name)throw new TypeError('Invalid "name" type: '+typeof e.name);if(!Dh(e.itemList))throw new TypeError('Invalid "itemList" type: '+typeof e.itemList);{const t=[],r=[];for(let n of e.itemList){const e=AssetGet("Female3DCG",n.Group,n.Name);null!=e?(e.Group.IsItem()||e.Group.IsAppearance()&&e.Group.AllowNone)&&(n.TypeRecord||void 0===n.Type||(n=Object.freeze({...gc(n,"Type"),TypeRecord:ExtendedItemTypeToRecord(e,n.Type)})),t.push(n)):r.push(`${n.Group}:${n.Name}`)}e.itemList=Object.freeze(t),0!==r.length&&Bh.warn(`Found ${r.length} items in wheel of fortune item set "${this.name}": ${r}`)}if(!Dh(e.mbsList))throw new TypeError('Invalid "mbsList" type: '+typeof e.mbsList);if(jh(Object.values(Uh),e.stripLevel)||(e.stripLevel=Uh.UNDERWEAR),jh(Object.values(Uh),e.equipLevel)||(e.stripLevel=Uh.UNDERWEAR),Dh(e.flags)){let t;if(e.flags.every((e=>"string"==typeof e))){t=function(e){return Op.map(((t,r)=>{const n={...t};return n.enabled=e.includes(_p[r]),n}))}(e.flags)}else t=function(e){return Op.map(((t,r)=>{const n=e[r];if(null===n||"object"!=typeof n||n.type!==t.type)return{...t};const i="boolean"==typeof n.enabled?n.enabled:t.enabled;switch(n.type){case"TimerPasswordPadlock":return Number.isInteger(n.time)&&n.time>=1&&n.time<=86400?{type:n.type,description:t.description,time:n.time,enabled:i}:{...t};case"ExclusivePadlock":case"HighSecurityPadlock":case null:return{type:n.type,description:t.description,enabled:i};default:return{...t}}}))}(e.flags);t.every((e=>!e.enabled))&&(t[0].enabled=!0),e.flags=Object.freeze(t.map((e=>Object.freeze(e))))}else e.flags=Op;return"boolean"!=typeof e.custom&&(e.custom=!0),null!==e.preRunCallback&&"function"!=typeof e.preRunCallback&&(e.preRunCallback=null),Number.isInteger(e.weight)?e.weight=CommonClamp(e.weight,1,9):e.weight=1,e}static fromObject(e,t){const r=[t.name,t.itemList,e,t.stripLevel,t.equipLevel,t.flags,t.custom,t.preRunCallback,t.weight];return new bR(...r)}scriptFactory(e=null){const t=this.itemList.map((({Name:e,Group:t})=>AssetGet(Player.AssetFamily,t,e)));return r=>{r=r??Player;const n=Jh(this.equipLevel,r),i=this.itemList.filter(((e,r)=>{const i=t[r];return null!=i&&("Appearance"!==i.Group.Category||n(i))}));ep(this.name,i,this.stripLevel,e,this.preRunCallback,r??Player)}}getIDs(){const e=[];for(const[t,r]of this.flags.entries())r.enabled&&e.push(t);let t;if(this.custom){if(t=256*(2+Math.floor(this.index/16))+16*this.index,t<0)throw new Error(`Item set "${this.name}" absent from currently selected fortune wheel sets`)}else if(t=256+16*pR[this.name],Number.isNaN(t))throw new Error(`Unknown default item set "${this.name}"`);return Hh(t,e)}toOptions(e=sR){const t=this.flags.filter((e=>e.enabled)),r=this.getIDs();return t.map(((t,n)=>{const i=null===t.type?this.name:`${this.name}: ${Tp(t)}`;let o=!0;switch(t.type){case"HighSecurityPadlock":case null:o=!1;break;case"TimerPasswordPadlock":o=4!==n}return{ID:r[n],Color:Ih(e),Script:this.scriptFactory(((...e)=>function(e,t,r){const n=e.type;switch(n){case"TimerPasswordPadlock":Fp(t,e.time,r);break;case"ExclusivePadlock":Lp(t,"ExclusivePadlock",r);break;case"HighSecurityPadlock":InventoryDoesItemAllowLock(t)&&t.Craft&&(t.Craft.Property="Puzzling"),$p(t,r);break;case null:break;default:throw new Error(`Unknown flag type: ${n}`,e)}}(t,...e))),Description:i,Default:o,Custom:this.custom,Parent:this,Flag:t,Weight:this.weight}}))}toJSON(){return{name:this.name,itemList:this.itemList,stripLevel:this.stripLevel,equipLevel:this.equipLevel,flags:this.flags,custom:this.custom,preRunCallback:this.preRunCallback,weight:this.weight}}}class SR extends yR{constructor(e,t,r){const n=SR.validate({name:e,mbsList:t,weight:r});super(n.name,!0,n.mbsList,n.weight)}static validate(e){if("string"!=typeof e.name)throw new TypeError('Invalid "name" type: '+typeof e.name);if(!Array.isArray(e.mbsList))throw new TypeError('Invalid "mbsList" type: '+typeof e.mbsList);return Number.isInteger(e.weight)?e.weight=CommonClamp(e.weight,1,9):e.weight=1,e}static fromObject(e,t){const r=[t.name,e,t.weight];return new SR(...r)}toOptions(e=sR){const[t]=this.getIDs();return[{ID:t,Color:Ih(e),Description:this.name,Default:!0,Custom:this.custom,Parent:this,Script:void 0,Flag:void 0,Weight:this.weight}]}getIDs(){const e=256*(3+Math.floor(this.index/16))+this.index;return[String.fromCharCode(e)]}toJSON(){return{name:this.name,weight:this.weight}}}let wR=null;function CR(){return null===wR&&(wR=CharacterLoadSimple("MBSAPI")),wR}var kR=Object.freeze({__proto__:null,getAll:function(){if(!hR())return Bh.error("MBS not fully loaded yet"),{};const e=Player.MBSSettings.FortuneWheelItemSets,t={};for(const[r,n]of CommonEnumerate(e))null!==n&&(t[n.name]={name:n.name,index:r,items:ap(n.itemList,CR())});return t},getByIndex:function(e){if("number"!=typeof e)throw new TypeError('Invalid "index" type: '+typeof e);if(!hR())return void Bh.error("MBS not fully loaded yet");const t=Player.MBSSettings.FortuneWheelItemSets[e];return null==t?void 0:{name:t.name,index:e,items:ap(t.itemList,CR())}},getByName:function(e){if("string"!=typeof e)throw new TypeError('Invalid "name" type: '+typeof e);if(!hR())return void Bh.error("MBS not fully loaded yet");let t=-1;const r=Player.MBSSettings.FortuneWheelItemSets.find(((r,n)=>{const i=r?.name===e;return i&&(t=n),i}));return null==r?void 0:{name:e,index:t,items:ap(r.itemList,CR())}},getIndices:function(){return hR()?Player.MBSSettings.FortuneWheelItemSets.filter((e=>null!==e)).map(((e,t)=>t)):(Bh.error("MBS not fully loaded yet"),[])},getNames:function(){return hR()?Player.MBSSettings.FortuneWheelItemSets.filter((e=>null!==e)).map((e=>e.name)):(Bh.error("MBS not fully loaded yet"),[])}});const BR=Object.freeze({major:1,minor:2}),PR=function(){return hR()?JSON.stringify({log:Bh,settings:Player.MBSSettings},void 0,4):JSON.stringify({log:Bh,settings:"ERROR: MBS not fully loaded yet"},void 0,4)};_h(dR).then((()=>{"undefined"!=typeof FUSAM&&"function"==typeof FUSAM.registerDebugMethod&&FUSAM.registerDebugMethod("mbs",PR)}));const MR="raises",xR="passes";function IR(e,t,r){if(!t)throw void 0===r?new Error(`${e}`):new Error(`${e}: ${r}`)}function ER(e,t,r){try{t()}catch(t){const n=t;if(n?.message!==r)throw new Error(`${e}: Invalid error message\nExpected error: "${r}"\nObserved error: "${n?.message}"`);return}throw new Error(`${e}: Failed to raise an error`)}function _R(e,t){try{return t()}catch(t){throw new Error(`${e}: Unexpected error message: ${t}`,{cause:t})}}function OR(e,t,r,n){if(n=n??TR,!Fu(t,r))throw new Error(`${e}: Passed objects not equal:\nObserved: ${n(t)}\nExpected: ${n(r)}`)}function FR(e,t,r){if(!t.includes(r))throw new Error(`${e}: Passed array ${t} does not contain element ${r?.toString()??r}`)}function $R(e,t,r){if(typeof t!==r)throw new Error(`${e}: Invalid object type "${typeof t}", expected "${r}"`)}function LR(e,t,r){if(t.length!==r)throw new Error(`${e}: Invalid object length ${t.length}, expected ${r}`)}function HR(e,t){switch(typeof t){case"undefined":return"__UNDEFINED__";case"function":return"__FUNCTION__";case"symbol":return"__SYMBOL__";default:return t}}function TR(e){return JSON.stringify(e,HR,1)}var AR=Object.freeze({__proto__:null,test_LoopIterator:function(){const e="test_LoopIterator";[{args:[void 0],excMessage:'Invalid "iterable" type: undefined'},{args:[[]],excMessage:'Passed "iterable" must contain at least one element'},{args:[[1],.5],excMessage:'"index" must be an integer: 0.5'},{args:[[0,1],3],excMessage:'"index" must fall in the [0, 1] interval: 3'}].forEach((({args:t,excMessage:r},n)=>{ER(`${e}:constructor:${MR}:${n}`,(()=>new Lh(...t)),r)}));const t=new Lh([0,1,2,3],0);let r;OR(`${e}:list:${xR}:0`,t.list,[0,1,2,3]),OR(`${e}:index:${xR}:0`,t.index,0),OR(`${e}:value:${xR}:0`,t.index,0),$R(`${e}:[Symbol.iterator]:${xR}:0`,t[Symbol.iterator],"function"),r=_R(`${e}:next:${xR}:0`,(()=>t.next(!1))),OR(`${e}:next:${xR}:0`,r,1),OR(`${e}:next:${xR}:0`,t.index,0),r=_R(`${e}:next:${xR}:0`,(()=>t.next())),OR(`${e}:next:${xR}:0`,r,1),OR(`${e}:next:${xR}:0`,t.index,1),ER(`${e}:setPosition:${MR}:0`,(()=>t.setPosition(10)),'"index" must fall in the [0, 3] interval: 10'),_R(`${e}:setPosition:${xR}:0`,(()=>t.setPosition(0))),OR(`${e}:setPosition:${xR}:0`,t.index,0),r=_R(`${e}:previous:${xR}:0`,(()=>t.previous(!1))),OR(`${e}:previous:${xR}:0`,r,3),OR(`${e}:previous:${xR}:0`,t.index,0),r=_R(`${e}:previous:${xR}:0`,(()=>t.previous())),OR(`${e}:previous:${xR}:0`,r,3),OR(`${e}:previous:${xR}:0`,t.index,3),r=_R(`${e}:toString:${xR}:0`,(()=>t.toString())),$R(`${e}:toString:${xR}:0`,r,"string"),r=_R(`${e}:toJSON:${xR}:0`,(()=>t.toJSON())),OR(`${e}:toJSON:${xR}:0`,t.toJSON(),{list:[0,1,2,3],index:3})},test_MBS_VERSION:function(){$R(`test_MBS_VERSION:${xR}:0`,t,"string")},test_Version:function(){const e="test_Version";[{args:["bob",0,0,!1],excMessage:'Invalid "major" type: string'},{args:[0,"bob",0,!1],excMessage:'Invalid "minor" type: string'},{args:[0,0,"bob",!1],excMessage:'Invalid "micro" type: string'},{args:[0,0,0,"bob"],excMessage:'Invalid "beta" type: string'}].forEach((({args:t,excMessage:r},n)=>{ER(`${e}:constructor:${MR}:${n}`,(()=>new Ah(...t)),r)}));const t=new Ah(1,0,5),r=new Ah(2,3,1),n=new Ah(0,99,5,!0);OR(`${e}:major:${xR}:0`,t.major,1),OR(`${e}:minor:${xR}:0`,t.minor,0),OR(`${e}:micro:${xR}:0`,t.micro,5),OR(`${e}:beta:${xR}:0`,t.beta,!1),IR(`${e}:equal:${xR}:0`,!t.equal(null)),IR(`${e}:equal:${xR}:1`,t.equal(t)),IR(`${e}:equal:${xR}:2`,!t.equal(r)),IR(`${e}:equal:${xR}:3`,!t.equal(n)),IR(`${e}:greater:${xR}:0`,!t.greater(null)),IR(`${e}:greater:${xR}:1`,!t.greater(t)),IR(`${e}:greater:${xR}:2`,!t.greater(r)),IR(`${e}:greater:${xR}:3`,t.greater(n)),IR(`${e}:lesser:${xR}:0`,!t.lesser(null)),IR(`${e}:lesser:${xR}:1`,!t.lesser(t)),IR(`${e}:lesser:${xR}:2`,t.lesser(r)),IR(`${e}:lesser:${xR}:3`,!t.lesser(n)),IR(`${e}:greaterOrEqual:${xR}:0`,!t.greaterOrEqual(null)),IR(`${e}:greaterOrEqual:${xR}:1`,t.greaterOrEqual(t)),IR(`${e}:greaterOrEqual:${xR}:2`,!t.greaterOrEqual(r)),IR(`${e}:greaterOrEqual:${xR}:3`,t.greaterOrEqual(n)),IR(`${e}:lesserOrEqual:${xR}:0`,!t.lesserOrEqual(null)),IR(`${e}:lesserOrEqual:${xR}:1`,t.lesserOrEqual(t)),IR(`${e}:lesserOrEqual:${xR}:2`,t.lesserOrEqual(r)),IR(`${e}:lesserOrEqual:${xR}:3`,!t.lesserOrEqual(n));let i=_R(`${e}:fromVersion:${xR}:0`,(()=>Ah.fromVersion("1.0.5")));OR(`${e}:fromVersion:${xR}:0`,i,t),ER(`${e}:fromVersion:${MR}:0`,(()=>Ah.fromVersion(void 0)),'Invalid "version": undefined'),i=_R(`${e}:fromVersion:${xR}:0`,(()=>Ah.fromBCVersion("R109Beta3"))),OR(`${e}:fromVersion:${xR}:0`,i,new Ah(109,0,0,!0)),ER(`${e}:fromVersion:${MR}:0`,(()=>Ah.fromVersion(void 0)),'Invalid "version": undefined'),i=_R(`${e}:toString:${xR}:0`,(()=>t.toString())),$R(`${e}:toString:${xR}:0`,i,"string"),i=_R(`${e}:toJSON:${xR}:0`,(()=>t.toJSON())),OR(`${e}:toJSON:${xR}:0`,i,{major:1,minor:0,micro:5,beta:!1})},test_generateIDs:function(){const e="test_generateIDs";[{args:[0,void 0],excMessage:'Invalid "indices" type: undefined'},{args:[65535,[5]],excMessage:'"stop" must fall in the [65536, 65535] interval: 65541'}].forEach((({args:t,excMessage:r},n)=>{ER(`${e}:${MR}:${n}`,(()=>Hh(...t)),r)})),[{args:[80,[0,4,6]],output:["P","T","V"]},{args:[1024,[0,4,1]],output:["Ѐ","Є","Ё"]},{args:[0,[]],output:[]}].forEach((({args:t,output:r},n)=>{const i=_R(`${e}:${xR}:${n}`,(()=>Hh(...t)));OR(`${e}:${xR}:${n}`,i,r)}))},test_getRandomPassword:function(){const e="test_getRandomPassword";[{args:[void 0],excMessage:'Invalid "n" type: undefined'}].forEach((({args:t,excMessage:r},n)=>{ER(`${e}:${MR}:${n}`,(()=>Eh(...t)),r)})),bd(0,9).forEach((t=>{const r=_R(`${e}:${xR}:${t}`,(()=>Eh(t)));$R(`${e}:${xR}:${t}`,r,"string"),LR(`${e}:${xR}:${t}`,r,t)}))},test_isIterable:function(){const e="test_isIterable";[{args:[null],output:!1},{args:[1],output:!1},{args:[[1]],output:!0},{args:[new Set],output:!0}].forEach((({args:t,output:r},n)=>{const i=_R(`${e}:${xR}:${n}`,(()=>Th(...t)));OR(`${e}:${xR}:${n}`,i,r)}))},test_padArray:function(){const e="test_padArray";[{args:[[],.5,null],excMessage:'"n" must be an integer: 0.5'},{args:[void 0,5,null],excMessage:'Invalid "list" type: undefined'}].forEach((({args:t,excMessage:r},n)=>{ER(`${e}:${MR}:${n}`,(()=>Mh(...t)),r)})),[{args:[["a","b","c"],5,"test"],output:["a","b","c","test","test"]},{args:[["a","b","c"],2,"test"],output:["a","b","c"]}].forEach((({args:t,output:r},n)=>{const i=_R(`${e}:${xR}:${n}`,(()=>Mh(...t)));OR(`${e}:${xR}:${n}`,i,r)}))},test_randomElement:function(){const e="test_randomElement";[{args:[void 0],excMessage:'Invalid "list" type: undefined'},{args:[[]],excMessage:'Passed "list" must contain at least 1 item'}].forEach((({args:t,excMessage:r},n)=>{ER(`${e}:${MR}:${n}`,(()=>Ih(...t)),r)}));const{args:t}={args:[["a","b","c"]],output:void 0};bd(0,100).forEach((r=>{const n=_R(`${e}:${xR}:${r}`,(()=>Ih(...t)));FR(`${e}:${xR}:${r}`,t[0],n)}))},test_trimArray:function(){const e="test_trimArray";[{args:[[],.5],excMessage:'"n" must be an integer: 0.5'},{args:[void 0,5],excMessage:'Invalid "list" type: undefined'}].forEach((({args:t,excMessage:r},n)=>{ER(`${e}:${MR}:${n}`,(()=>xh(...t)),r)})),[{args:[["a","b","c"],1],output:["a"]},{args:[["a","b","c"],4],output:["a","b","c"]}].forEach((({args:t,output:r},n)=>{const i=_R(`${e}:${xR}:${n}`,(()=>xh(...t)));OR(`${e}:${xR}:${n}`,i,r)}))},test_validateInt:function(){const e="test_validateInt";[{args:[.5,"test"],excMessage:'"test" must be an integer: 0.5'},{args:["test","test"],excMessage:'Invalid "test" type: string'},{args:[5,"test",10],excMessage:'"test" must fall in the [10, Infinity] interval: 5'},{args:[5,"test",0,3],excMessage:'"test" must fall in the [0, 3] interval: 5'}].forEach((({args:t,excMessage:r},n)=>{ER(`${e}:${MR}:${n}`,(()=>Ph(...t)),r)})),_R(`${e}:${xR}:0`,(()=>Ph(0,"test")))}});var DR=Object.freeze({__proto__:null,test_FORTUNE_WHEEL_COLORS:function(){const e="test_FORTUNE_WHEEL_COLORS";IR(`${e}:${xR}:0`,Array.isArray(sR)),IR(`${e}:${xR}:0`,sR.every((e=>"string"==typeof e)))},test_FORTUNE_WHEEL_MAX_SETS:function(){const e="test_FORTUNE_WHEEL_MAX_SETS";$R(`${e}:${xR}:0`,oR,"number"),IR(`${e}:${xR}:0`,Number.isInteger(oR)),IR(`${e}:${xR}:0`,oR>=0)},test_canChangeCosplay:function(){const e="test_canChangeCosplay",t=bd(0,3).map((t=>`${e}${t}`)),r=t.map((e=>{const t=CharacterLoadSimple(e);return t.OnlineSharedSettings=t.OnlineSharedSettings??{},t}));try{r[1].OnlineSharedSettings={...r[1].OnlineSharedSettings??{},BlockBodyCosplay:!1},r[2].OnlineSharedSettings={...r[1].OnlineSharedSettings??{},BlockBodyCosplay:!0};[{args:[r[0]],output:!1},{args:[r[1]],output:!0},{args:[r[2]],output:!1}].forEach((({args:t,output:r},n)=>{const i=_R(`${e}:${xR}:${n}`,(()=>uR(...t)));OR(`${e}:${xR}:${n}`,i,r)}))}finally{"R101"===GameVersion?t.forEach(CharacterDelete):r.forEach(CharacterDelete)}},test_equipHighSecLock:function(){const e="test_equipHighSecLock",t=CharacterLoadSimple(e);try{const r=AssetGet(t.AssetFamily,"ItemArms","LatexArmbinder");if(null==r)throw new Error;const n={Asset:r};_R(`${e}:${xR}:0`,(()=>$p(n,t))),OR(`${e}:${xR}:0`,n.Property?.MemberNumberListKeys,"")}finally{"R101"===GameVersion?CharacterDelete(e):CharacterDelete(t)}},test_equipLock:function(){const e="test_equipLock",t=bd(0,5).map((t=>`${e}-${t}`)),r=t.map(CharacterLoadSimple);try{r[4].BlockItems.push({Name:"ExclusivePadlock",Group:"ItemMisc"}),InventoryWear(r[2],"LatexArmbinder","ItemArms"),InventoryLock(r[2],r[2].Appearance.at(-1),"ExclusivePadlock");const t=AssetGet(r[0].AssetFamily,"ItemArms","LatexArmbinder"),n=AssetGet(r[0].AssetFamily,"ItemArms","NylonRope");if(null==t||null==n)throw new Error;const i={Asset:t};[{args:["bob","ExclusivePadlock",r[0]],excMessage:'Invalid "item" type: string'},{args:[i,0,r[0]],excMessage:'Invalid "lockName" type: number'},{args:[i,"bob",r[0]],excMessage:'Invalid "lockName" value: bob'},{args:[i,"ExclusivePadlock",1],excMessage:'Invalid "character" type: number'}].forEach((({args:t,excMessage:r},n)=>{ER(`${e}:${MR}:${n}`,(()=>Lp(...t)),r)}));[{args:[i,"ExclusivePadlock",r[1]],output:!0},{args:[i,"ExclusivePadlock",r[2]],output:!1},{args:[{Asset:n},"ExclusivePadlock",r[3]],output:!1},{args:[i,"ExclusivePadlock",r[4]],output:!1}].forEach((({args:t,output:r},n)=>{const i=_R(`${e}:${xR}:${n}`,(()=>Lp(...t)));OR(`${e}:${xR}:0`,i,r)}))}finally{"R101"===GameVersion?t.forEach(CharacterDelete):r.forEach(CharacterDelete)}},test_equipTimerLock:function(){const e="test_equipTimerLock",t=CharacterLoadSimple(e);try{const r=AssetGet(t.AssetFamily,"ItemArms","LatexArmbinder");if(null==r)throw new Error;const n={Asset:r};ER(`${e}:${MR}:0`,(()=>Fp(n,void 0,t)),'Invalid "seconds" type: undefined'),_R(`${e}:${xR}:0`,(()=>Fp(n,99,t))),IR(`${e}:${xR}:0`,(n.Property?.RemoveTimer??1/0)<=CurrentTime+198e4),OR(`${e}:${xR}:0`,n.Property?.RemoveItem,!0),OR(`${e}:${xR}:0`,n.Property?.LockSet,!0),$R(`${e}:${xR}:0`,n.Property?.Password,"string")}finally{"R101"===GameVersion?CharacterDelete(e):CharacterDelete(t)}},test_sanitizeWheelFortuneIDs:function(){const e="test_sanitizeWheelFortuneIDs";ER(`${e}:${MR}:0`,(()=>cR(void 0)),'Invalid "IDs" type: undefined'),[{args:["ABC"],output:"ABC"},{args:["A䀁"],output:"A"}].forEach((({args:t,output:r},n)=>{const i=_R(`${e}:${xR}:${n}`,(()=>cR(...t)));OR(`${e}:${xR}:${n}`,i,r)}))},test_settingsLoaded:function(){const e="test_settingsLoaded",t=_R(`${e}:${xR}:0`,fR);OR(`${e}:${xR}:0`,t,!0)},test_settingsMBSLoaded:function(){const e="test_settingsMBSLoaded",t=_R(`${e}:${xR}:0`,hR);OR(`${e}:${xR}:0`,t,!0)}});const NR=Object.freeze({Mummification:e=>({...e,TypeRecord:void 0})});var WR=Object.freeze({__proto__:null,test_builtinMBSWheel:function(){const e="test_builtinMBSWheel",t=In(Object.values(im).map((e=>e.children??[]))),r=t.map((e=>e.Description)),n=r.map((e=>CharacterLoadSimple(e)));try{t.forEach((t=>{if(!(t.Parent instanceof bR))return;const r=CharacterLoadSimple(t.Description);t.Script(r);for(let n of t.Parent.itemList){const i=InventoryGet(r,n.Group);if(void 0!==n.Equip)continue;IR(`${e}:${t.Description}:${n.Group}:${n.Name}:${xR}`,null!=i);const o=(NR[t.Parent.name]??(e=>e))(op(i.Asset,{...i,Group:i.Asset.Group.Name,Name:i.Asset.Name,Color:void 0===n.Color?void 0:i.Color},!1),r);null!==o&&(n={...n,ItemCallback:void 0,Property:{...o.Property,...n.Property},Equip:void 0,Craft:void 0!==n.Craft&&"HighSecurityPadlock"===t.Flag.type&&InventoryDoesItemAllowLock(i)?{...n.Craft,Property:"Puzzling"}:n.Craft},OR(`${e}:${t.Description}:${n.Group}:${n.Name}:${xR}`,o,n))}}))}finally{"R101"===GameVersion?r.forEach(CharacterDelete):n.forEach(CharacterDelete)}}});const jR=function(){if(!hR())return Bh.warn("MBS not fully loaded yet"),!1;const e={...AR,...DR,...WR},t={};for(const[r,n]of Nh(e))try{n()}catch(e){t[r]=e}return 0===Object.values(t).length||(Bh.warn(t),!1)};_h(dR).then((()=>{const e={[`${bp.screen}Background`]:bp.background,[`${Cp.screen}Background`]:Cp.background,[`${xp.screen}Background`]:xp.background,[`${eR.screen}Background`]:eR.background,[`${Xg.screen}Background`]:Xg.background,[`${Xp.screen}Background`]:Xp.background},t=globalThis;Object.assign(t,e)}));const GR=new Set;_h(dR).then((()=>{if("R102"===GameVersion)if("undefined"==typeof CraftingAssetsPopulate){GR.add(4900);const e=Object.freeze(function(){const e={},t={};for(const r of Asset)r.Group.IsItem()&&!r.IsLock&&r.Wear&&r.Enable&&(r.CraftGroup?(t[r.CraftGroup]??=[],t[r.CraftGroup].push(r)):(e[r.Name]??=[],e[r.Name].push(r)));for(const r of Object.values(t)){const t=new Set(r.map((e=>e.Name)));for(const n of t)e[n]??=[],e[n].push(...r)}return e}()),t=Wh(Asset.filter((e=>e.IsLock)).map((e=>[e.Name,e])));Oh.hookFunction("CraftingAppliesToItem",10,(t=>{const[r,n]=t;if(r&&n){return(e[r.Item]??[]).includes(n)}return!1})),Oh.hookFunction("DialogCanUseCraftedItem",10,(r=>{const[n,i]=r;if(!n||!i)return!1;return(e[i.Item]??[]).some((e=>{if(e.OwnerOnly&&!n.IsOwnedByPlayer())return!1;if(e.LoverOnly&&!n.IsOwnedByPlayer()&&!n.IsLoverOfPlayer())return!1;if(e.FamilyOnly&&!(n.IsOwnedByPlayer()||n.IsLoverOfPlayer()||n.IsFamilyOfPlayer()))return!1;const r=t[i.Lock];if(null!=r){if(r.OwnerOnly&&!DialogCanUseOwnerLockOn(n))return!1;if(r.LoverOnly&&!DialogCanUseLoverLockOn(n))return!1;if(r.FamilyOnly&&!DialogCanUseFamilyLockOn(n))return!1}return!0}))}))}GR.size?Bh.log("Initializing R103 bug fix backports",Td(Array.from(GR))):Bh.log("No R103 bug fix backports")}));const zR=Oh.getOriginalHash,VR=t;return Bh.log(`Initializing MBS version ${t}`),_h((()=>dR(!1))).then((()=>{!function(e){const t=Ah.fromBCVersion(e),r=Ah.fromBCVersion("R102");if(t.lesser(r))throw new Error(`BC ${GameVersion} detected; MBS requires version R102 or later`);Bh.log(`Detected BC ${GameVersion}`)}(GameVersion),function(){const e={};for(const[t,r]of Object.entries(zh)){const n=Oh.getOriginalHash(t);r.has(n)||(e[t]=n)}const t=Object.values(e).length;0!==t&&Bh.warn(`Found ${t} patched functions with an unknown hash`,e)}(),document.body.appendChild(f("style",{id:"mbs-style",children:":root {\n  --mbs-background-color: white;\n  --mbs-hover-color: cyan;\n  --mbs-tooltip-color: lightyellow;\n  --mbs-border-color: black;\n  --mbs-text-color: black;\n}\n\ninput:invalid {\n  background-color: #fbb;\n  box-shadow: 0 0 3px 2px #c22;\n}\n\n.mbs-button {\n  background-color: var(--mbs-background-color);\n  background-origin: content-box;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  border: min(0.3vh, 0.15vw) solid var(--mbs-border-color);\n  color: var(--mbs-text-color);\n  font-size: min(3.5vh, 1.75vw);\n  height: 100%;\n  overflow: clip;\n  padding-left: min(2vh, 1vw);\n  padding-right: min(2vh, 1vw);\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 100%;\n}\n.mbs-button:hover {\n  background-color: var(--mbs-hover-color);\n}\n.mbs-button:disabled {\n  filter: brightness(60%);\n  background-color: var(--mbs-background-color);\n}\n\n.mbs-button-tooltip {\n  box-shadow: min(0.4vh, 0.2vw) min(0.4vh, 0.2vw) min(2vh, 1vw) 0 rgba(0, 0, 0, 0.5);\n  background-color: var(--mbs-tooltip-color);\n  border: min(0.3vh, 0.15vw) solid var(--mbs-border-color);\n  color: var(--mbs-text-color);\n  font-size: min(3.5vh, 1.75vw);\n  line-height: 1.4;\n  padding: min(1vh, 0.5vw) min(2vh, 1vw) min(1vh, 0.5vw) min(2vh, 1vw);\n  position: relative;\n  text-align: center;\n  visibility: hidden;\n  white-space: nowrap;\n  bottom: -10%;\n  width: fit-content;\n  z-index: 1;\n}\n\n.mbs-button-div {\n  display: grid;\n  grid-template-rows: min(9vh, 4.5vw) auto;\n  grid-template-columns: min(9vh, 4.5vw);\n}\n.mbs-button-div .mbs-button-tooltip {\n  justify-self: center;\n}\n.mbs-button-div .mbs-button {\n  width: inherit;\n  height: inherit;\n}\n.mbs-button-div .mbs-button:hover + .mbs-button-tooltip {\n  visibility: visible;\n}\n\n.mbs-timer {\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: min(3.5vh, 1.75vw);\n  height: min(6vh, 3vw);\n  text-align: center;\n  width: min(21vh, 10.5vw);\n}\n\n.mbs-dropdown-button {\n  border: unset !important;\n  padding-top: min(1vh, 0.5vw);\n  padding-bottom: min(1vh, 0.5vw);\n}\n.mbs-dropdown-button:nth-child(even) {\n  filter: brightness(85%);\n}\n\n.mbs-dropdown-content {\n  visibility: hidden;\n  position: absolute;\n  background-color: var(--mbs-background-color);\n  z-index: 1;\n  overflow-y: scroll;\n  border: min(0.3vh, 0.15vw) solid var(--mbs-border-color);\n}\n\n.mbs-dropdown:hover .mbs-dropdown-content {\n  visibility: visible;\n}".toString()}))})),e.API_VERSION=BR,e.MBS_VERSION=VR,e._getFunctionHash=zR,e._toItemBundles=ap,e._unpackSettings=vm,e.getDebug=PR,e.runTests=jR,e.wheelOutfits=kR,e}({});
//# sourceMappingURL=mbs.js.map
