/*!
 * MBS: Maid's Bondage Scripts
 *
 * Copyright (C) 2023-2024 Bananarama92
 *
 * This program is free software: you can redistribute it and/or modify it under the terms of
 * the GNU General Public License as published by the Free Software Foundation,
 * either version 3 of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program.
 * If not, see https://www.gnu.org/licenses/.
 *
 * An exception is made for the "mbs.css" API, which is licensed under the terms of GNU LGPL
 * version 3 (see https://www.gnu.org/licenses/lgpl-3.0.en.html).
 */
var mbs=function(e){"use strict";const t="1.7.7";var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i={},o={};Object.defineProperty(o,"__esModule",{value:!0});o.setAttributes=void 0;function a(e,t){for(const r of Object.keys(e))r in t&&(t[r]=e[r])}o.setAttributes=function(e,t){for(const r of Object.keys(t)){if("__source"===r||"__self"===r)continue;const n=t[r];if(r.startsWith("on")){const t=r.replace(/Capture$/,""),i=r!==t,o=t.toLowerCase().substring(2);e.addEventListener(o,n,i)}else"style"===r&&"string"!=typeof n?a(n,e.style):"dangerouslySetInnerHTML"===r?e.innerHTML=n:!0===n?e.setAttribute(r,r):(n||0===n)&&e.setAttribute(r,n.toString())}};var s={};Object.defineProperty(s,"__esModule",{value:!0});s.createDomElement=s.applyChildren=void 0;function l(e,t){t instanceof Element?e.appendChild(t):"string"==typeof t||"number"==typeof t?e.appendChild(document.createTextNode(t.toString())):console.warn("Unknown type to append: ",t)}s.applyChildren=function e(t,r){for(const n of r)(n||0===n)&&(Array.isArray(n)?e(t,n):l(t,n))};s.createDomElement=function(e,t){const r=(null==t?void 0:t.is)?{is:t.is}:void 0;return(null==t?void 0:t.xmlns)?document.createElementNS(t.xmlns,e,r):document.createElement(e,r)},Object.defineProperty(i,"__esModule",{value:!0});i.jsxDEV=h=i.jsxs=p=i.jsx=void 0;const u=o,c=s;function d(e,t){if("function"==typeof e)return e(t);const{children:r,...n}=t,i=(0,c.createDomElement)(e,n);return n&&(0,u.setAttributes)(i,n),(0,c.applyChildren)(i,[r]),i}var p=i.jsx=d,h=i.jsxs=d;i.jsxDEV=d;var f={},m={};Object.defineProperty(m,"__esModule",{value:!0});m.h=m.createElement=void 0;const g=o,R=s;function v(e,t,...r){if("function"==typeof e)return e({...t,children:r});const n=(0,R.createDomElement)(e,t);return t&&(0,g.setAttributes)(n,t),(0,R.applyChildren)(n,r),n}m.createElement=v;m.h=v;var b={};Object.defineProperty(b,"__esModule",{value:!0}),function(e){var t=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=r&&r.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),n(m,e),n(i,e),n(b,e)}(f);Object.create;Object.create;function y(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function S(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}"function"==typeof SuppressedError&&SuppressedError;var w="object"==typeof global&&global&&global.Object===Object&&global,C="object"==typeof self&&self&&self.Object===Object&&self,k=w||C||Function("return this")(),B=k.Symbol,P=Object.prototype,x=P.hasOwnProperty,M=P.toString,I=B?B.toStringTag:void 0;var E=Object.prototype.toString;var _="[object Null]",O="[object Undefined]",$=B?B.toStringTag:void 0;function F(e){return null==e?void 0===e?O:_:$&&$ in Object(e)?function(e){var t=x.call(e,I),r=e[I];try{e[I]=void 0;var n=!0}catch(e){}var i=M.call(e);return n&&(t?e[I]=r:delete e[I]),i}(e):function(e){return E.call(e)}(e)}function L(e){return null!=e&&"object"==typeof e}var T="[object Symbol]";function H(e){return"symbol"==typeof e||L(e)&&F(e)==T}var A=NaN;function N(e){return"number"==typeof e?e:H(e)?A:+e}function D(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var G=Array.isArray,j=1/0,W=B?B.prototype:void 0,z=W?W.toString:void 0;function V(e){if("string"==typeof e)return e;if(G(e))return D(e,V)+"";if(H(e))return z?z.call(e):"";var t=e+"";return"0"==t&&1/e==-j?"-0":t}function q(e,t){return function(r,n){var i;if(void 0===r&&void 0===n)return t;if(void 0!==r&&(i=r),void 0!==n){if(void 0===i)return n;"string"==typeof r||"string"==typeof n?(r=V(r),n=V(n)):(r=N(r),n=N(n)),i=e(r,n)}return i}}var U=q((function(e,t){return e+t}),0),K=/\s/;function J(e){for(var t=e.length;t--&&K.test(e.charAt(t)););return t}var Y=/^\s+/;function Z(e){return e?e.slice(0,J(e)+1).replace(Y,""):e}function X(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Q=NaN,ee=/^[-+]0x[0-9a-f]+$/i,te=/^0b[01]+$/i,re=/^0o[0-7]+$/i,ne=parseInt;function ie(e){if("number"==typeof e)return e;if(H(e))return Q;if(X(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=X(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Z(e);var r=te.test(e);return r||re.test(e)?ne(e.slice(2),r?2:8):ee.test(e)?Q:+e}var oe=1/0,ae=17976931348623157e292;function se(e){return e?(e=ie(e))===oe||e===-oe?(e<0?-1:1)*ae:e==e?e:0:0===e?e:0}function le(e){var t=se(e),r=t%1;return t==t?r?t-r:t:0}function ue(e){return e}var ce="[object AsyncFunction]",de="[object Function]",pe="[object GeneratorFunction]",he="[object Proxy]";function fe(e){if(!X(e))return!1;var t=F(e);return t==de||t==pe||t==ce||t==he}var me,ge=k["__core-js_shared__"],Re=(me=/[^.]+$/.exec(ge&&ge.keys&&ge.keys.IE_PROTO||""))?"Symbol(src)_1."+me:"";var ve=Function.prototype.toString;function be(e){if(null!=e){try{return ve.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var ye=/^\[object .+?Constructor\]$/,Se=Function.prototype,we=Object.prototype,Ce=Se.toString,ke=we.hasOwnProperty,Be=RegExp("^"+Ce.call(ke).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Pe(e){return!(!X(e)||function(e){return!!Re&&Re in e}(e))&&(fe(e)?Be:ye).test(be(e))}function xe(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Pe(r)?r:void 0}var Me=xe(k,"WeakMap"),Ie=Me&&new Me,Ee=Ie?function(e,t){return Ie.set(e,t),e}:ue,_e=Object.create,Oe=function(){function e(){}return function(t){if(!X(t))return{};if(_e)return _e(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function $e(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Oe(e.prototype),n=e.apply(r,t);return X(n)?n:r}}var Fe=1;function Le(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Te=Math.max;function He(e,t,r,n){for(var i=-1,o=e.length,a=r.length,s=-1,l=t.length,u=Te(o-a,0),c=Array(l+u),d=!n;++s<l;)c[s]=t[s];for(;++i<a;)(d||i<o)&&(c[r[i]]=e[i]);for(;u--;)c[s++]=e[i++];return c}var Ae=Math.max;function Ne(e,t,r,n){for(var i=-1,o=e.length,a=-1,s=r.length,l=-1,u=t.length,c=Ae(o-s,0),d=Array(c+u),p=!n;++i<c;)d[i]=e[i];for(var h=i;++l<u;)d[h+l]=t[l];for(;++a<s;)(p||i<o)&&(d[h+r[a]]=e[i++]);return d}function De(){}var Ge=4294967295;function je(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ge,this.__views__=[]}function We(){}je.prototype=Oe(De.prototype),je.prototype.constructor=je;var ze=Ie?function(e){return Ie.get(e)}:We,Ve={},qe=Object.prototype.hasOwnProperty;function Ue(e){for(var t=e.name+"",r=Ve[t],n=qe.call(Ve,t)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t}function Ke(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Je(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function Ye(e){if(e instanceof je)return e.clone();var t=new Ke(e.__wrapped__,e.__chain__);return t.__actions__=Je(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}Ke.prototype=Oe(De.prototype),Ke.prototype.constructor=Ke;var Ze=Object.prototype.hasOwnProperty;function Xe(e){if(L(e)&&!G(e)&&!(e instanceof je)){if(e instanceof Ke)return e;if(Ze.call(e,"__wrapped__"))return Ye(e)}return new Ke(e)}function Qe(e){var t=Ue(e),r=Xe[t];if("function"!=typeof r||!(t in je.prototype))return!1;if(e===r)return!0;var n=ze(r);return!!n&&e===n[0]}Xe.prototype=De.prototype,Xe.prototype.constructor=Xe;var et=Date.now;function tt(e){var t=0,r=0;return function(){var n=et(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var rt=tt(Ee),nt=/\{\n\/\* \[wrapped with (.+)\] \*/,it=/,? & /;var ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function at(e){return function(){return e}}var st=function(){try{var e=xe(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),lt=st?function(e,t){return st(e,"toString",{configurable:!0,enumerable:!1,value:at(t),writable:!0})}:ue,ut=tt(lt);function ct(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function dt(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function pt(e){return e!=e}function ht(e,t,r){return t==t?function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):dt(e,pt,r)}function ft(e,t){return!!(null==e?0:e.length)&&ht(e,t,0)>-1}var mt=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function gt(e,t,r){var n=t+"";return ut(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(ot,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return ct(mt,(function(r){var n="_."+r[0];t&r[1]&&!ft(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(nt);return t?t[1].split(it):[]}(n),r)))}var Rt=1,vt=2,bt=4,yt=8,St=32,wt=64;function Ct(e,t,r,n,i,o,a,s,l,u){var c=t&yt;t|=c?St:wt,(t&=~(c?wt:St))&bt||(t&=~(Rt|vt));var d=[e,t,i,c?o:void 0,c?a:void 0,c?void 0:o,c?void 0:a,s,l,u],p=r.apply(void 0,d);return Qe(e)&&rt(p,d),p.placeholder=n,gt(p,e,t)}function kt(e){return e.placeholder}var Bt=9007199254740991,Pt=/^(?:0|[1-9]\d*)$/;function xt(e,t){var r=typeof e;return!!(t=null==t?Bt:t)&&("number"==r||"symbol"!=r&&Pt.test(e))&&e>-1&&e%1==0&&e<t}var Mt=Math.min;var It="__lodash_placeholder__";function Et(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var a=e[r];a!==t&&a!==It||(e[r]=It,o[i++]=r)}return o}var _t=1,Ot=2,$t=8,Ft=16,Lt=128,Tt=512;function Ht(e,t,r,n,i,o,a,s,l,u){var c=t&Lt,d=t&_t,p=t&Ot,h=t&($t|Ft),f=t&Tt,m=p?void 0:$e(e);return function g(){for(var R=arguments.length,v=Array(R),b=R;b--;)v[b]=arguments[b];if(h)var y=kt(g),S=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(v,y);if(n&&(v=He(v,n,i,h)),o&&(v=Ne(v,o,a,h)),R-=S,h&&R<u){var w=Et(v,y);return Ct(e,t,Ht,g.placeholder,r,v,w,s,l,u-R)}var C=d?r:this,B=p?C[e]:e;return R=v.length,s?v=function(e,t){for(var r=e.length,n=Mt(t.length,r),i=Je(e);n--;){var o=t[n];e[n]=xt(o,r)?i[o]:void 0}return e}(v,s):f&&R>1&&v.reverse(),c&&l<R&&(v.length=l),this&&this!==k&&this instanceof g&&(B=m||$e(B)),B.apply(C,v)}}var At=1;var Nt="__lodash_placeholder__",Dt=1,Gt=2,jt=4,Wt=8,zt=128,Vt=256,qt=Math.min;var Ut="Expected a function",Kt=1,Jt=2,Yt=8,Zt=16,Xt=32,Qt=64,er=Math.max;function tr(e,t,r,n,i,o,a,s){var l=t&Jt;if(!l&&"function"!=typeof e)throw new TypeError(Ut);var u=n?n.length:0;if(u||(t&=~(Xt|Qt),n=i=void 0),a=void 0===a?a:er(le(a),0),s=void 0===s?s:le(s),u-=i?i.length:0,t&Qt){var c=n,d=i;n=i=void 0}var p=l?void 0:ze(e),h=[e,t,r,n,i,c,d,o,a,s];if(p&&function(e,t){var r=e[1],n=t[1],i=r|n,o=i<(Dt|Gt|zt),a=n==zt&&r==Wt||n==zt&&r==Vt&&e[7].length<=t[8]||n==(zt|Vt)&&t[7].length<=t[8]&&r==Wt;if(!o&&!a)return e;n&Dt&&(e[2]=t[2],i|=r&Dt?0:jt);var s=t[3];if(s){var l=e[3];e[3]=l?He(l,s,t[4]):s,e[4]=l?Et(e[3],Nt):t[4]}(s=t[5])&&(l=e[5],e[5]=l?Ne(l,s,t[6]):s,e[6]=l?Et(e[5],Nt):t[6]),(s=t[7])&&(e[7]=s),n&zt&&(e[8]=null==e[8]?t[8]:qt(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(h,p),e=h[0],t=h[1],r=h[2],n=h[3],i=h[4],!(s=h[9]=void 0===h[9]?l?0:e.length:er(h[9]-u,0))&&t&(Yt|Zt)&&(t&=~(Yt|Zt)),t&&t!=Kt)f=t==Yt||t==Zt?function(e,t,r){var n=$e(e);return function i(){for(var o=arguments.length,a=Array(o),s=o,l=kt(i);s--;)a[s]=arguments[s];var u=o<3&&a[0]!==l&&a[o-1]!==l?[]:Et(a,l);return(o-=u.length)<r?Ct(e,t,Ht,i.placeholder,void 0,a,u,void 0,void 0,r-o):Le(this&&this!==k&&this instanceof i?n:e,this,a)}}(e,t,s):t!=Xt&&t!=(Kt|Xt)||i.length?Ht.apply(void 0,h):function(e,t,r,n){var i=t&At,o=$e(e);return function t(){for(var a=-1,s=arguments.length,l=-1,u=n.length,c=Array(u+s),d=this&&this!==k&&this instanceof t?o:e;++l<u;)c[l]=n[l];for(;s--;)c[l++]=arguments[++a];return Le(d,i?r:this,c)}}(e,t,r,n);else var f=function(e,t,r){var n=t&Fe,i=$e(e);return function t(){return(this&&this!==k&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,r);return gt((p?Ee:rt)(f,h),e,t)}var rr=128;function nr(e,t,r){return t=r?void 0:t,t=e&&null==t?e.length:t,tr(e,rr,void 0,void 0,void 0,void 0,t)}function ir(e,t,r){"__proto__"==t&&st?st(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function or(e,t){return e===t||e!=e&&t!=t}var ar=Object.prototype.hasOwnProperty;function sr(e,t,r){var n=e[t];ar.call(e,t)&&or(n,r)&&(void 0!==r||t in e)||ir(e,t,r)}function lr(e,t,r,n){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=n?n(r[s],e[s],s,r,e):void 0;void 0===l&&(l=e[s]),i?ir(r,s,l):sr(r,s,l)}return r}var ur=Math.max;function cr(e,t,r){return t=ur(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=ur(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),Le(e,this,s)}}function dr(e,t){return ut(cr(e,t,ue),e+"")}var pr=9007199254740991;function hr(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=pr}function fr(e){return null!=e&&hr(e.length)&&!fe(e)}function mr(e,t,r){if(!X(r))return!1;var n=typeof t;return!!("number"==n?fr(r)&&xt(t,r.length):"string"==n&&t in r)&&or(r[t],e)}function gr(e){return dr((function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&mr(r[0],r[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,o)}return t}))}var Rr=Object.prototype;function vr(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Rr)}function br(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function yr(e){return L(e)&&"[object Arguments]"==F(e)}var Sr=Object.prototype,wr=Sr.hasOwnProperty,Cr=Sr.propertyIsEnumerable,kr=yr(function(){return arguments}())?yr:function(e){return L(e)&&wr.call(e,"callee")&&!Cr.call(e,"callee")};function Br(){return!1}var Pr="object"==typeof e&&e&&!e.nodeType&&e,xr=Pr&&"object"==typeof module&&module&&!module.nodeType&&module,Mr=xr&&xr.exports===Pr?k.Buffer:void 0,Ir=(Mr?Mr.isBuffer:void 0)||Br,Er={};function _r(e){return function(t){return e(t)}}Er["[object Float32Array]"]=Er["[object Float64Array]"]=Er["[object Int8Array]"]=Er["[object Int16Array]"]=Er["[object Int32Array]"]=Er["[object Uint8Array]"]=Er["[object Uint8ClampedArray]"]=Er["[object Uint16Array]"]=Er["[object Uint32Array]"]=!0,Er["[object Arguments]"]=Er["[object Array]"]=Er["[object ArrayBuffer]"]=Er["[object Boolean]"]=Er["[object DataView]"]=Er["[object Date]"]=Er["[object Error]"]=Er["[object Function]"]=Er["[object Map]"]=Er["[object Number]"]=Er["[object Object]"]=Er["[object RegExp]"]=Er["[object Set]"]=Er["[object String]"]=Er["[object WeakMap]"]=!1;var Or="object"==typeof e&&e&&!e.nodeType&&e,$r=Or&&"object"==typeof module&&module&&!module.nodeType&&module,Fr=$r&&$r.exports===Or&&w.process,Lr=function(){try{var e=$r&&$r.require&&$r.require("util").types;return e||Fr&&Fr.binding&&Fr.binding("util")}catch(e){}}(),Tr=Lr&&Lr.isTypedArray,Hr=Tr?_r(Tr):function(e){return L(e)&&hr(e.length)&&!!Er[F(e)]},Ar=Object.prototype.hasOwnProperty;function Nr(e,t){var r=G(e),n=!r&&kr(e),i=!r&&!n&&Ir(e),o=!r&&!n&&!i&&Hr(e),a=r||n||i||o,s=a?br(e.length,String):[],l=s.length;for(var u in e)!t&&!Ar.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||xt(u,l))||s.push(u);return s}function Dr(e,t){return function(r){return e(t(r))}}var Gr=Dr(Object.keys,Object),jr=Object.prototype.hasOwnProperty;function Wr(e){if(!vr(e))return Gr(e);var t=[];for(var r in Object(e))jr.call(e,r)&&"constructor"!=r&&t.push(r);return t}function zr(e){return fr(e)?Nr(e):Wr(e)}var Vr=Object.prototype.hasOwnProperty,qr=gr((function(e,t){if(vr(t)||fr(t))lr(t,zr(t),e);else for(var r in t)Vr.call(t,r)&&sr(e,r,t[r])}));var Ur=Object.prototype.hasOwnProperty;function Kr(e){if(!X(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=vr(e),r=[];for(var n in e)("constructor"!=n||!t&&Ur.call(e,n))&&r.push(n);return r}function Jr(e){return fr(e)?Nr(e,!0):Kr(e)}var Yr=gr((function(e,t){lr(t,Jr(t),e)})),Zr=gr((function(e,t,r,n){lr(t,Jr(t),e,n)})),Xr=gr((function(e,t,r,n){lr(t,zr(t),e,n)})),Qr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,en=/^\w*$/;function tn(e,t){if(G(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!H(e))||(en.test(e)||!Qr.test(e)||null!=t&&e in Object(t))}var rn=xe(Object,"create");var nn=Object.prototype.hasOwnProperty;var on=Object.prototype.hasOwnProperty;function an(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function sn(e,t){for(var r=e.length;r--;)if(or(e[r][0],t))return r;return-1}an.prototype.clear=function(){this.__data__=rn?rn(null):{},this.size=0},an.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},an.prototype.get=function(e){var t=this.__data__;if(rn){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return nn.call(t,e)?t[e]:void 0},an.prototype.has=function(e){var t=this.__data__;return rn?void 0!==t[e]:on.call(t,e)},an.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=rn&&void 0===t?"__lodash_hash_undefined__":t,this};var ln=Array.prototype.splice;function un(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}un.prototype.clear=function(){this.__data__=[],this.size=0},un.prototype.delete=function(e){var t=this.__data__,r=sn(t,e);return!(r<0)&&(r==t.length-1?t.pop():ln.call(t,r,1),--this.size,!0)},un.prototype.get=function(e){var t=this.__data__,r=sn(t,e);return r<0?void 0:t[r][1]},un.prototype.has=function(e){return sn(this.__data__,e)>-1},un.prototype.set=function(e,t){var r=this.__data__,n=sn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var cn=xe(k,"Map");function dn(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function pn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}pn.prototype.clear=function(){this.size=0,this.__data__={hash:new an,map:new(cn||un),string:new an}},pn.prototype.delete=function(e){var t=dn(this,e).delete(e);return this.size-=t?1:0,t},pn.prototype.get=function(e){return dn(this,e).get(e)},pn.prototype.has=function(e){return dn(this,e).has(e)},pn.prototype.set=function(e,t){var r=dn(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var hn="Expected a function";function fn(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(hn);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(fn.Cache||pn),r}fn.Cache=pn;var mn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gn=/\\(\\)?/g,Rn=function(e){var t=fn(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(mn,(function(e,r,n,i){t.push(n?i.replace(gn,"$1"):r||e)})),t}));function vn(e){return null==e?"":V(e)}function bn(e,t){return G(e)?e:tn(e,t)?[e]:Rn(vn(e))}var yn=1/0;function Sn(e){if("string"==typeof e||H(e))return e;var t=e+"";return"0"==t&&1/e==-yn?"-0":t}function wn(e,t){for(var r=0,n=(t=bn(t,e)).length;null!=e&&r<n;)e=e[Sn(t[r++])];return r&&r==n?e:void 0}function Cn(e,t,r){var n=null==e?void 0:wn(e,t);return void 0===n?r:n}function kn(e,t){for(var r=-1,n=t.length,i=Array(n),o=null==e;++r<n;)i[r]=o?void 0:Cn(e,t[r]);return i}function Bn(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var Pn=B?B.isConcatSpreadable:void 0;function xn(e){return G(e)||kr(e)||!!(Pn&&e&&e[Pn])}function Mn(e,t,r,n,i){var o=-1,a=e.length;for(r||(r=xn),i||(i=[]);++o<a;){var s=e[o];t>0&&r(s)?t>1?Mn(s,t-1,r,n,i):Bn(i,s):n||(i[i.length]=s)}return i}function In(e){return(null==e?0:e.length)?Mn(e,1):[]}function En(e){return ut(cr(e,void 0,In),e+"")}var _n=En(kn),On=Dr(Object.getPrototypeOf,Object),$n="[object Object]",Fn=Function.prototype,Ln=Object.prototype,Tn=Fn.toString,Hn=Ln.hasOwnProperty,An=Tn.call(Object);function Nn(e){if(!L(e)||F(e)!=$n)return!1;var t=On(e);if(null===t)return!0;var r=Hn.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Tn.call(r)==An}var Dn="[object DOMException]",Gn="[object Error]";function jn(e){if(!L(e))return!1;var t=F(e);return t==Gn||t==Dn||"string"==typeof e.message&&"string"==typeof e.name&&!Nn(e)}var Wn=dr((function(e,t){try{return Le(e,void 0,t)}catch(e){return jn(e)?e:new Error(e)}})),zn="Expected a function";function Vn(e,t){var r;if("function"!=typeof t)throw new TypeError(zn);return e=le(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}}var qn=dr((function(e,t,r){var n=1;if(r.length){var i=Et(r,kt(qn));n|=32}return tr(e,n,t,r,i)}));qn.placeholder={};var Un=En((function(e,t){return ct(t,(function(t){t=Sn(t),ir(e,t,qn(e[t],e))})),e})),Kn=dr((function(e,t,r){var n=3;if(r.length){var i=Et(r,kt(Kn));n|=32}return tr(t,n,e,r,i)}));function Jn(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}function Yn(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:Jn(e,t,r)}Kn.placeholder={};var Zn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Xn(e){return Zn.test(e)}var Qn="\\ud800-\\udfff",ei="["+Qn+"]",ti="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ri="\\ud83c[\\udffb-\\udfff]",ni="[^"+Qn+"]",ii="(?:\\ud83c[\\udde6-\\uddff]){2}",oi="[\\ud800-\\udbff][\\udc00-\\udfff]",ai="(?:"+ti+"|"+ri+")"+"?",si="[\\ufe0e\\ufe0f]?",li=si+ai+("(?:\\u200d(?:"+[ni,ii,oi].join("|")+")"+si+ai+")*"),ui="(?:"+[ni+ti+"?",ti,ii,oi,ei].join("|")+")",ci=RegExp(ri+"(?="+ri+")|"+ui+li,"g");function di(e){return Xn(e)?function(e){return e.match(ci)||[]}(e):function(e){return e.split("")}(e)}function pi(e){return function(t){var r=Xn(t=vn(t))?di(t):void 0,n=r?r[0]:t.charAt(0),i=r?Yn(r,1).join(""):t.slice(1);return n[e]()+i}}var hi=pi("toUpperCase");function fi(e){return hi(vn(e).toLowerCase())}function mi(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function gi(e){return function(t){return null==e?void 0:e[t]}}var Ri=gi({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),vi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bi=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");function yi(e){return(e=vn(e))&&e.replace(vi,Ri).replace(bi,"")}var Si=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var wi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Ci="\\ud800-\\udfff",ki="\\u2700-\\u27bf",Bi="a-z\\xdf-\\xf6\\xf8-\\xff",Pi="A-Z\\xc0-\\xd6\\xd8-\\xde",xi="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mi="["+xi+"]",Ii="\\d+",Ei="["+ki+"]",_i="["+Bi+"]",Oi="[^"+Ci+xi+Ii+ki+Bi+Pi+"]",$i="(?:\\ud83c[\\udde6-\\uddff]){2}",Fi="[\\ud800-\\udbff][\\udc00-\\udfff]",Li="["+Pi+"]",Ti="(?:"+_i+"|"+Oi+")",Hi="(?:"+Li+"|"+Oi+")",Ai="(?:['’](?:d|ll|m|re|s|t|ve))?",Ni="(?:['’](?:D|LL|M|RE|S|T|VE))?",Di="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Gi="[\\ufe0e\\ufe0f]?",ji=Gi+Di+("(?:\\u200d(?:"+["[^"+Ci+"]",$i,Fi].join("|")+")"+Gi+Di+")*"),Wi="(?:"+[Ei,$i,Fi].join("|")+")"+ji,zi=RegExp([Li+"?"+_i+"+"+Ai+"(?="+[Mi,Li,"$"].join("|")+")",Hi+"+"+Ni+"(?="+[Mi,Li+Ti,"$"].join("|")+")",Li+"?"+Ti+"+"+Ai,Li+"+"+Ni,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ii,Wi].join("|"),"g");function Vi(e,t,r){return e=vn(e),void 0===(t=r?void 0:t)?function(e){return wi.test(e)}(e)?function(e){return e.match(zi)||[]}(e):function(e){return e.match(Si)||[]}(e):e.match(t)||[]}var qi=RegExp("['’]","g");function Ui(e){return function(t){return mi(Vi(yi(t).replace(qi,"")),e,"")}}var Ki=Ui((function(e,t,r){return t=t.toLowerCase(),e+(r?fi(t):t)}));var Ji=k.isFinite,Yi=Math.min;function Zi(e){var t=Math[e];return function(e,r){if(e=ie(e),(r=null==r?0:Yi(le(r),292))&&Ji(e)){var n=(vn(e)+"e").split("e");return+((n=(vn(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Xi=Zi("ceil");function Qi(e){var t=Xe(e);return t.__chain__=!0,t}var eo=Math.ceil,to=Math.max;function ro(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}function no(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=ie(r))==r?r:0),void 0!==t&&(t=(t=ie(t))==t?t:0),ro(ie(e),t,r)}function io(e){var t=this.__data__=new un(e);this.size=t.size}function oo(e,t){return e&&lr(t,zr(t),e)}io.prototype.clear=function(){this.__data__=new un,this.size=0},io.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},io.prototype.get=function(e){return this.__data__.get(e)},io.prototype.has=function(e){return this.__data__.has(e)},io.prototype.set=function(e,t){var r=this.__data__;if(r instanceof un){var n=r.__data__;if(!cn||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new pn(n)}return r.set(e,t),this.size=r.size,this};var ao="object"==typeof e&&e&&!e.nodeType&&e,so=ao&&"object"==typeof module&&module&&!module.nodeType&&module,lo=so&&so.exports===ao?k.Buffer:void 0,uo=lo?lo.allocUnsafe:void 0;function co(e,t){if(t)return e.slice();var r=e.length,n=uo?uo(r):new e.constructor(r);return e.copy(n),n}function po(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}function ho(){return[]}var fo=Object.prototype.propertyIsEnumerable,mo=Object.getOwnPropertySymbols,go=mo?function(e){return null==e?[]:(e=Object(e),po(mo(e),(function(t){return fo.call(e,t)})))}:ho;var Ro=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Bn(t,go(e)),e=On(e);return t}:ho;function vo(e,t,r){var n=t(e);return G(e)?n:Bn(n,r(e))}function bo(e){return vo(e,zr,go)}function yo(e){return vo(e,Jr,Ro)}var So=xe(k,"DataView"),wo=xe(k,"Promise"),Co=xe(k,"Set"),ko="[object Map]",Bo="[object Promise]",Po="[object Set]",xo="[object WeakMap]",Mo="[object DataView]",Io=be(So),Eo=be(cn),_o=be(wo),Oo=be(Co),$o=be(Me),Fo=F;(So&&Fo(new So(new ArrayBuffer(1)))!=Mo||cn&&Fo(new cn)!=ko||wo&&Fo(wo.resolve())!=Bo||Co&&Fo(new Co)!=Po||Me&&Fo(new Me)!=xo)&&(Fo=function(e){var t=F(e),r="[object Object]"==t?e.constructor:void 0,n=r?be(r):"";if(n)switch(n){case Io:return Mo;case Eo:return ko;case _o:return Bo;case Oo:return Po;case $o:return xo}return t});var Lo=Fo,To=Object.prototype.hasOwnProperty;var Ho=k.Uint8Array;function Ao(e){var t=new e.constructor(e.byteLength);return new Ho(t).set(new Ho(e)),t}var No=/\w*$/;var Do=B?B.prototype:void 0,Go=Do?Do.valueOf:void 0;function jo(e,t){var r=t?Ao(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Wo="[object Boolean]",zo="[object Date]",Vo="[object Map]",qo="[object Number]",Uo="[object RegExp]",Ko="[object Set]",Jo="[object String]",Yo="[object Symbol]",Zo="[object ArrayBuffer]",Xo="[object DataView]",Qo="[object Float32Array]",ea="[object Float64Array]",ta="[object Int8Array]",ra="[object Int16Array]",na="[object Int32Array]",ia="[object Uint8Array]",oa="[object Uint8ClampedArray]",aa="[object Uint16Array]",sa="[object Uint32Array]";function la(e,t,r){var n,i=e.constructor;switch(t){case Zo:return Ao(e);case Wo:case zo:return new i(+e);case Xo:return function(e,t){var r=t?Ao(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case Qo:case ea:case ta:case ra:case na:case ia:case oa:case aa:case sa:return jo(e,r);case Vo:return new i;case qo:case Jo:return new i(e);case Uo:return function(e){var t=new e.constructor(e.source,No.exec(e));return t.lastIndex=e.lastIndex,t}(e);case Ko:return new i;case Yo:return n=e,Go?Object(Go.call(n)):{}}}function ua(e){return"function"!=typeof e.constructor||vr(e)?{}:Oe(On(e))}var ca=Lr&&Lr.isMap,da=ca?_r(ca):function(e){return L(e)&&"[object Map]"==Lo(e)};var pa=Lr&&Lr.isSet,ha=pa?_r(pa):function(e){return L(e)&&"[object Set]"==Lo(e)},fa=1,ma=2,ga=4,Ra="[object Arguments]",va="[object Function]",ba="[object GeneratorFunction]",ya="[object Object]",Sa={};function wa(e,t,r,n,i,o){var a,s=t&fa,l=t&ma,u=t&ga;if(r&&(a=i?r(e,n,i,o):r(e)),void 0!==a)return a;if(!X(e))return e;var c=G(e);if(c){if(a=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&To.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!s)return Je(e,a)}else{var d=Lo(e),p=d==va||d==ba;if(Ir(e))return co(e,s);if(d==ya||d==Ra||p&&!i){if(a=l||p?{}:ua(e),!s)return l?function(e,t){return lr(e,Ro(e),t)}(e,function(e,t){return e&&lr(t,Jr(t),e)}(a,e)):function(e,t){return lr(e,go(e),t)}(e,oo(a,e))}else{if(!Sa[d])return i?e:{};a=la(e,d,s)}}o||(o=new io);var h=o.get(e);if(h)return h;o.set(e,a),ha(e)?e.forEach((function(n){a.add(wa(n,t,r,n,e,o))})):da(e)&&e.forEach((function(n,i){a.set(i,wa(n,t,r,i,e,o))}));var f=c?void 0:(u?l?yo:bo:l?Jr:zr)(e);return ct(f||e,(function(n,i){f&&(n=e[i=n]),sr(a,i,wa(n,t,r,i,e,o))})),a}Sa[Ra]=Sa["[object Array]"]=Sa["[object ArrayBuffer]"]=Sa["[object DataView]"]=Sa["[object Boolean]"]=Sa["[object Date]"]=Sa["[object Float32Array]"]=Sa["[object Float64Array]"]=Sa["[object Int8Array]"]=Sa["[object Int16Array]"]=Sa["[object Int32Array]"]=Sa["[object Map]"]=Sa["[object Number]"]=Sa[ya]=Sa["[object RegExp]"]=Sa["[object Set]"]=Sa["[object String]"]=Sa["[object Symbol]"]=Sa["[object Uint8Array]"]=Sa["[object Uint8ClampedArray]"]=Sa["[object Uint16Array]"]=Sa["[object Uint32Array]"]=!0,Sa["[object Error]"]=Sa[va]=Sa["[object WeakMap]"]=!1;var Ca=4;function ka(e){return wa(e,Ca)}var Ba=1,Pa=4;function xa(e){return wa(e,Ba|Pa)}function Ma(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new pn;++t<r;)this.add(e[t])}function Ia(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function Ea(e,t){return e.has(t)}Ma.prototype.add=Ma.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ma.prototype.has=function(e){return this.__data__.has(e)};var _a=1,Oa=2;function $a(e,t,r,n,i,o){var a=r&_a,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(e),c=o.get(t);if(u&&c)return u==t&&c==e;var d=-1,p=!0,h=r&Oa?new Ma:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var f=e[d],m=t[d];if(n)var g=a?n(m,f,d,t,e,o):n(f,m,d,e,t,o);if(void 0!==g){if(g)continue;p=!1;break}if(h){if(!Ia(t,(function(e,t){if(!Ea(h,t)&&(f===e||i(f,e,r,n,o)))return h.push(t)}))){p=!1;break}}else if(f!==m&&!i(f,m,r,n,o)){p=!1;break}}return o.delete(e),o.delete(t),p}function Fa(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function La(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var Ta=1,Ha=2,Aa="[object Boolean]",Na="[object Date]",Da="[object Error]",Ga="[object Map]",ja="[object Number]",Wa="[object RegExp]",za="[object Set]",Va="[object String]",qa="[object Symbol]",Ua="[object ArrayBuffer]",Ka="[object DataView]",Ja=B?B.prototype:void 0,Ya=Ja?Ja.valueOf:void 0;var Za=1,Xa=Object.prototype.hasOwnProperty;var Qa=1,es="[object Arguments]",ts="[object Array]",rs="[object Object]",ns=Object.prototype.hasOwnProperty;function is(e,t,r,n,i,o){var a=G(e),s=G(t),l=a?ts:Lo(e),u=s?ts:Lo(t),c=(l=l==es?rs:l)==rs,d=(u=u==es?rs:u)==rs,p=l==u;if(p&&Ir(e)){if(!Ir(t))return!1;a=!0,c=!1}if(p&&!c)return o||(o=new io),a||Hr(e)?$a(e,t,r,n,i,o):function(e,t,r,n,i,o,a){switch(r){case Ka:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ua:return!(e.byteLength!=t.byteLength||!o(new Ho(e),new Ho(t)));case Aa:case Na:case ja:return or(+e,+t);case Da:return e.name==t.name&&e.message==t.message;case Wa:case Va:return e==t+"";case Ga:var s=Fa;case za:var l=n&Ta;if(s||(s=La),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;n|=Ha,a.set(e,t);var c=$a(s(e),s(t),n,i,o,a);return a.delete(e),c;case qa:if(Ya)return Ya.call(e)==Ya.call(t)}return!1}(e,t,l,r,n,i,o);if(!(r&Qa)){var h=c&&ns.call(e,"__wrapped__"),f=d&&ns.call(t,"__wrapped__");if(h||f){var m=h?e.value():e,g=f?t.value():t;return o||(o=new io),i(m,g,r,n,o)}}return!!p&&(o||(o=new io),function(e,t,r,n,i,o){var a=r&Za,s=bo(e),l=s.length;if(l!=bo(t).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in t:Xa.call(t,c)))return!1}var d=o.get(e),p=o.get(t);if(d&&p)return d==t&&p==e;var h=!0;o.set(e,t),o.set(t,e);for(var f=a;++u<l;){var m=e[c=s[u]],g=t[c];if(n)var R=a?n(g,m,c,t,e,o):n(m,g,c,e,t,o);if(!(void 0===R?m===g||i(m,g,r,n,o):R)){h=!1;break}f||(f="constructor"==c)}if(h&&!f){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(h=!1)}return o.delete(e),o.delete(t),h}(e,t,r,n,i,o))}function os(e,t,r,n,i){return e===t||(null==e||null==t||!L(e)&&!L(t)?e!=e&&t!=t:is(e,t,r,n,os,i))}var as=1,ss=2;function ls(e,t,r,n){var i=r.length,o=i,a=!n;if(null==e)return!o;for(e=Object(e);i--;){var s=r[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var l=(s=r[i])[0],u=e[l],c=s[1];if(a&&s[2]){if(void 0===u&&!(l in e))return!1}else{var d=new io;if(n)var p=n(u,c,l,e,t,d);if(!(void 0===p?os(c,u,as|ss,n,d):p))return!1}}return!0}function us(e){return e==e&&!X(e)}function cs(e){for(var t=zr(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,us(i)]}return t}function ds(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}function ps(e){var t=cs(e);return 1==t.length&&t[0][2]?ds(t[0][0],t[0][1]):function(r){return r===e||ls(r,e,t)}}function hs(e,t){return null!=e&&t in Object(e)}function fs(e,t,r){for(var n=-1,i=(t=bn(t,e)).length,o=!1;++n<i;){var a=Sn(t[n]);if(!(o=null!=e&&r(e,a)))break;e=e[a]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&hr(i)&&xt(a,i)&&(G(e)||kr(e))}function ms(e,t){return null!=e&&fs(e,t,hs)}var gs=1,Rs=2;function vs(e,t){return tn(e)&&us(t)?ds(Sn(e),t):function(r){var n=Cn(r,e);return void 0===n&&n===t?ms(r,e):os(t,n,gs|Rs)}}function bs(e){return function(t){return null==t?void 0:t[e]}}function ys(e){return tn(e)?bs(Sn(e)):function(e){return function(t){return wn(t,e)}}(e)}function Ss(e){return"function"==typeof e?e:null==e?ue:"object"==typeof e?G(e)?vs(e[0],e[1]):ps(e):ys(e)}function ws(e,t,r){var n=r.length;if(null==e)return!n;for(e=Object(e);n--;){var i=r[n],o=t[i],a=e[i];if(void 0===a&&!(i in e)||!o(a))return!1}return!0}function Cs(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(n,a,r(a),e)}return n}function ks(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===r(o[l],l,o))break}return t}}var Bs=ks();function Ps(e,t){return e&&Bs(e,t,zr)}function xs(e,t){return function(r,n){if(null==r)return r;if(!fr(r))return e(r,n);for(var i=r.length,o=t?i:-1,a=Object(r);(t?o--:++o<i)&&!1!==n(a[o],o,a););return r}}var Ms=xs(Ps);function Is(e,t,r,n){return Ms(e,(function(e,i,o){t(n,e,r(e),o)})),n}function Es(e,t){return function(r,n){var i=G(r)?Cs:Is,o=t?t():{};return i(r,e,Ss(n),o)}}var _s=Object.prototype.hasOwnProperty,Os=Es((function(e,t,r){_s.call(e,r)?++e[r]:ir(e,r,1)}));function $s(e,t,r){var n=tr(e,8,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=$s.placeholder,n}$s.placeholder={};function Fs(e,t,r){var n=tr(e,16,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=Fs.placeholder,n}Fs.placeholder={};var Ls=function(){return k.Date.now()},Ts="Expected a function",Hs=Math.max,As=Math.min;function Ns(e,t,r){var n,i,o,a,s,l,u=0,c=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError(Ts);function h(t){var r=n,o=i;return n=i=void 0,u=t,a=e.apply(o,r)}function f(e){var r=e-l;return void 0===l||r>=t||r<0||d&&e-u>=o}function m(){var e=Ls();if(f(e))return g(e);s=setTimeout(m,function(e){var r=t-(e-l);return d?As(r,o-(e-u)):r}(e))}function g(e){return s=void 0,p&&n?h(e):(n=i=void 0,a)}function R(){var e=Ls(),r=f(e);if(n=arguments,i=this,l=e,r){if(void 0===s)return function(e){return u=e,s=setTimeout(m,t),c?h(e):a}(l);if(d)return clearTimeout(s),s=setTimeout(m,t),h(l)}return void 0===s&&(s=setTimeout(m,t)),a}return t=ie(t)||0,X(r)&&(c=!!r.leading,o=(d="maxWait"in r)?Hs(ie(r.maxWait)||0,t):o,p="trailing"in r?!!r.trailing:p),R.cancel=function(){void 0!==s&&clearTimeout(s),u=0,n=l=i=s=void 0},R.flush=function(){return void 0===s?a:g(Ls())},R}var Ds=Object.prototype,Gs=Ds.hasOwnProperty,js=dr((function(e,t){e=Object(e);var r=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&mr(t[0],t[1],i)&&(n=1);++r<n;)for(var o=t[r],a=Jr(o),s=-1,l=a.length;++s<l;){var u=a[s],c=e[u];(void 0===c||or(c,Ds[u])&&!Gs.call(e,u))&&(e[u]=o[u])}return e}));function Ws(e,t,r){(void 0!==r&&!or(e[t],r)||void 0===r&&!(t in e))&&ir(e,t,r)}function zs(e){return L(e)&&fr(e)}function Vs(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function qs(e){return lr(e,Jr(e))}function Us(e,t,r,n,i){e!==t&&Bs(t,(function(o,a){if(i||(i=new io),X(o))!function(e,t,r,n,i,o,a){var s=Vs(e,r),l=Vs(t,r),u=a.get(l);if(u)Ws(e,r,u);else{var c=o?o(s,l,r+"",e,t,a):void 0,d=void 0===c;if(d){var p=G(l),h=!p&&Ir(l),f=!p&&!h&&Hr(l);c=l,p||h||f?G(s)?c=s:zs(s)?c=Je(s):h?(d=!1,c=co(l,!0)):f?(d=!1,c=jo(l,!0)):c=[]:Nn(l)||kr(l)?(c=s,kr(s)?c=qs(s):X(s)&&!fe(s)||(c=ua(l))):d=!1}d&&(a.set(l,c),i(c,l,n,o,a),a.delete(l)),Ws(e,r,c)}}(e,t,a,r,Us,n,i);else{var s=n?n(Vs(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),Ws(e,a,s)}}),Jr)}function Ks(e,t,r,n,i,o){return X(e)&&X(t)&&(o.set(t,e),Us(e,t,void 0,Ks,o),o.delete(t)),e}var Js=gr((function(e,t,r,n){Us(e,t,r,n)})),Ys=dr((function(e){return e.push(void 0,Ks),Le(Js,void 0,e)}));function Zs(e,t,r){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,r)}),t)}var Xs=dr((function(e,t){return Zs(e,1,t)})),Qs=dr((function(e,t,r){return Zs(e,ie(t)||0,r)}));function el(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var tl=200;function rl(e,t,r,n){var i=-1,o=ft,a=!0,s=e.length,l=[],u=t.length;if(!s)return l;r&&(t=D(t,_r(r))),n?(o=el,a=!1):t.length>=tl&&(o=Ea,a=!1,t=new Ma(t));e:for(;++i<s;){var c=e[i],d=null==r?c:r(c);if(c=n||0!==c?c:0,a&&d==d){for(var p=u;p--;)if(t[p]===d)continue e;l.push(c)}else o(t,d,n)||l.push(c)}return l}var nl=dr((function(e,t){return zs(e)?rl(e,Mn(t,1,zs,!0)):[]}));function il(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var ol=dr((function(e,t){var r=il(t);return zs(r)&&(r=void 0),zs(e)?rl(e,Mn(t,1,zs,!0),Ss(r)):[]})),al=dr((function(e,t){var r=il(t);return zs(r)&&(r=void 0),zs(e)?rl(e,Mn(t,1,zs,!0),void 0,r):[]})),sl=q((function(e,t){return e/t}),1);function ll(e,t,r,n){for(var i=e.length,o=n?i:-1;(n?o--:++o<i)&&t(e[o],o,e););return r?Jn(e,n?0:o,n?o+1:i):Jn(e,n?o+1:0,n?i:o)}function ul(e){return"function"==typeof e?e:ue}function cl(e,t){return(G(e)?ct:Ms)(e,ul(t))}function dl(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}var pl=ks(!0);function hl(e,t){return e&&pl(e,t,zr)}var fl=xs(hl,!0);function ml(e,t){return(G(e)?dl:fl)(e,ul(t))}function gl(e){return function(t){var r=Lo(t);return"[object Map]"==r?Fa(t):"[object Set]"==r?function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}(t):function(e,t){return D(t,(function(t){return[t,e[t]]}))}(t,e(t))}}var Rl=gl(zr),vl=gl(Jr),bl=gi({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),yl=/[&<>"']/g,Sl=RegExp(yl.source);function wl(e){return(e=vn(e))&&Sl.test(e)?e.replace(yl,bl):e}var Cl=/[\\^$.*+?()[\]{}|]/g,kl=RegExp(Cl.source);function Bl(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Pl(e,t){var r=!0;return Ms(e,(function(e,n,i){return r=!!t(e,n,i)})),r}var xl=4294967295;function Ml(e){return e?ro(le(e),0,xl):0}function Il(e,t){var r=[];return Ms(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function El(e){return function(t,r,n){var i=Object(t);if(!fr(t)){var o=Ss(r);t=zr(t),r=function(e){return o(i[e],e,i)}}var a=e(t,r,n);return a>-1?i[o?t[a]:a]:void 0}}var _l=Math.max;function Ol(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:le(r);return i<0&&(i=_l(n+i,0)),dt(e,Ss(t),i)}var $l=El(Ol);function Fl(e,t,r){var n;return r(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}var Ll=Math.max,Tl=Math.min;function Hl(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n-1;return void 0!==r&&(i=le(r),i=r<0?Ll(n+i,0):Tl(i,n-1)),dt(e,Ss(t),i,!0)}var Al=El(Hl);function Nl(e){return e&&e.length?e[0]:void 0}function Dl(e,t){var r=-1,n=fr(e)?Array(e.length):[];return Ms(e,(function(e,i,o){n[++r]=t(e,i,o)})),n}function Gl(e,t){return(G(e)?D:Dl)(e,Ss(t))}var jl=1/0;var Wl=1/0;var zl=Zi("floor");function Vl(e){return En((function(t){var r=t.length,n=r,i=Ke.prototype.thru;for(e&&t.reverse();n--;){var o=t[n];if("function"!=typeof o)throw new TypeError("Expected a function");if(i&&!a&&"wrapper"==Ue(o))var a=new Ke([],!0)}for(n=a?n:r;++n<r;){var s=Ue(o=t[n]),l="wrapper"==s?ze(o):void 0;a=l&&Qe(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?a[Ue(l[0])].apply(a,l[3]):1==o.length&&Qe(o)?a[s]():a.thru(o)}return function(){var e=arguments,n=e[0];if(a&&1==e.length&&G(n))return a.plant(n).value();for(var i=0,o=r?t[i].apply(this,e):n;++i<r;)o=t[i].call(this,o);return o}}))}var ql=Vl(),Ul=Vl(!0);function Kl(e,t){return po(t,(function(t){return fe(e[t])}))}var Jl=Object.prototype.hasOwnProperty,Yl=Es((function(e,t,r){Jl.call(e,r)?e[r].push(t):ir(e,r,[t])}));function Zl(e,t){return e>t}function Xl(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=ie(t),r=ie(r)),e(t,r)}}var Ql=Xl(Zl),eu=Xl((function(e,t){return e>=t})),tu=Object.prototype.hasOwnProperty;function ru(e,t){return null!=e&&tu.call(e,t)}var nu=Math.max,iu=Math.min;var ou="[object String]";function au(e){return"string"==typeof e||!G(e)&&L(e)&&F(e)==ou}function su(e,t){return D(t,(function(t){return e[t]}))}function lu(e){return null==e?[]:su(e,zr(e))}var uu=Math.max;var cu=Math.max;var du=Math.min;function pu(e,t,r){for(var n=r?el:ft,i=e[0].length,o=e.length,a=o,s=Array(o),l=1/0,u=[];a--;){var c=e[a];a&&t&&(c=D(c,_r(t))),l=du(c.length,l),s[a]=!r&&(t||i>=120&&c.length>=120)?new Ma(a&&c):void 0}c=e[0];var d=-1,p=s[0];e:for(;++d<i&&u.length<l;){var h=c[d],f=t?t(h):h;if(h=r||0!==h?h:0,!(p?Ea(p,f):n(u,f,r))){for(a=o;--a;){var m=s[a];if(!(m?Ea(m,f):n(e[a],f,r)))continue e}p&&p.push(f),u.push(h)}}return u}function hu(e){return zs(e)?e:[]}var fu=dr((function(e){var t=D(e,hu);return t.length&&t[0]===e[0]?pu(t):[]})),mu=dr((function(e){var t=il(e),r=D(e,hu);return t===il(r)?t=void 0:r.pop(),r.length&&r[0]===e[0]?pu(r,Ss(t)):[]})),gu=dr((function(e){var t=il(e),r=D(e,hu);return(t="function"==typeof t?t:void 0)&&r.pop(),r.length&&r[0]===e[0]?pu(r,void 0,t):[]}));function Ru(e,t){return function(r,n){return function(e,t,r,n){return Ps(e,(function(e,i,o){t(n,r(e),i,o)})),n}(r,e,t(n),{})}}var vu=Object.prototype.toString,bu=Ru((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=vu.call(t)),e[t]=r}),at(ue)),yu=Object.prototype,Su=yu.hasOwnProperty,wu=yu.toString,Cu=Ru((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=wu.call(t)),Su.call(e,t)?e[t].push(r):e[t]=[r]}),Ss);function ku(e,t){return t.length<2?e:wn(e,Jn(t,0,-1))}function Bu(e,t,r){var n=null==(e=ku(e,t=bn(t,e)))?e:e[Sn(il(t))];return null==n?void 0:Le(n,e,r)}var Pu=dr(Bu),xu=dr((function(e,t,r){var n=-1,i="function"==typeof t,o=fr(e)?Array(e.length):[];return Ms(e,(function(e){o[++n]=i?Le(t,e,r):Bu(e,t,r)})),o}));var Mu=Lr&&Lr.isArrayBuffer,Iu=Mu?_r(Mu):function(e){return L(e)&&"[object ArrayBuffer]"==F(e)};var Eu=Lr&&Lr.isDate,_u=Eu?_r(Eu):function(e){return L(e)&&"[object Date]"==F(e)};var Ou=Object.prototype.hasOwnProperty;function $u(e,t){return os(e,t)}var Fu=k.isFinite;function Lu(e){return"number"==typeof e&&e==le(e)}var Tu="[object Number]";function Hu(e){return"number"==typeof e||L(e)&&F(e)==Tu}var Au=ge?fe:Br;var Nu=Lr&&Lr.isRegExp,Du=Nu?_r(Nu):function(e){return L(e)&&"[object RegExp]"==F(e)},Gu=9007199254740991;var ju=Array.prototype.join;var Wu=Ui((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),zu=Es((function(e,t,r){ir(e,r,t)}));var Vu=Math.max,qu=Math.min;var Uu=Ui((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Ku=pi("toLowerCase");function Ju(e,t){return e<t}var Yu=Xl(Ju),Zu=Xl((function(e,t){return e<=t}));function Xu(e,t,r){for(var n=-1,i=e.length;++n<i;){var o=e[n],a=t(o);if(null!=a&&(void 0===s?a==a&&!H(a):r(a,s)))var s=a,l=o}return l}function Qu(e,t){for(var r,n=-1,i=e.length;++n<i;){var o=t(e[n]);void 0!==o&&(r=void 0===r?o:r+o)}return r}var ec=NaN;function tc(e,t){var r=null==e?0:e.length;return r?Qu(e,t)/r:ec}var rc=gr((function(e,t,r){Us(e,t,r)})),nc=dr((function(e,t){return function(r){return Bu(r,e,t)}})),ic=dr((function(e,t){return function(r){return Bu(e,r,t)}}));function oc(e,t,r){var n=zr(t),i=Kl(t,n),o=!(X(r)&&"chain"in r&&!r.chain),a=fe(e);return ct(i,(function(r){var n=t[r];e[r]=n,a&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__);return(r.__actions__=Je(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Bn([this.value()],arguments))})})),e}var ac=q((function(e,t){return e*t}),1),sc="Expected a function";function lc(e){if("function"!=typeof e)throw new TypeError(sc);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var uc="[object Map]",cc="[object Set]",dc=B?B.iterator:void 0;function pc(e){if(!e)return[];if(fr(e))return au(e)?di(e):Je(e);if(dc&&e[dc])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[dc]());var t=Lo(e);return(t==uc?Fa:t==cc?La:lu)(e)}function hc(e,t){var r=e.length;if(r)return xt(t+=t<0?r:0,r)?e[t]:void 0}function fc(e,t){return null==(e=ku(e,t=bn(t,e)))||delete e[Sn(il(t))]}function mc(e){return Nn(e)?void 0:e}var gc=En((function(e,t){var r={};if(null==e)return r;var n=!1;t=D(t,(function(t){return t=bn(t,e),n||(n=t.length>1),t})),lr(e,yo(e),r),n&&(r=wa(r,7,mc));for(var i=t.length;i--;)fc(r,t[i]);return r}));function Rc(e,t,r,n){if(!X(e))return e;for(var i=-1,o=(t=bn(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var l=Sn(t[i]),u=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=a){var c=s[l];void 0===(u=n?n(c,l,s):void 0)&&(u=X(c)?c:xt(t[i+1])?[]:{})}sr(s,l,u),s=s[l]}return e}function vc(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var a=t[n],s=wn(e,a);r(s,a)&&Rc(o,bn(a,e),s)}return o}function bc(e,t){if(null==e)return{};var r=D(yo(e),(function(e){return[e]}));return t=Ss(t),vc(e,r,(function(e,r){return t(e,r[0])}))}function yc(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=e==e,o=H(e),a=void 0!==t,s=null===t,l=t==t,u=H(t);if(!s&&!u&&!o&&e>t||o&&a&&l&&!s&&!u||n&&a&&l||!r&&l||!i)return 1;if(!n&&!o&&!u&&e<t||u&&r&&i&&!n&&!o||s&&r&&i||!a&&i||!l)return-1}return 0}function Sc(e,t,r){t=t.length?D(t,(function(e){return G(e)?function(t){return wn(t,1===e.length?e[0]:e)}:e})):[ue];var n=-1;t=D(t,_r(Ss));var i=Dl(e,(function(e,r,i){var o=D(t,(function(t){return t(e)}));return{criteria:o,index:++n,value:e}}));return function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(i,(function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,a=i.length,s=r.length;++n<a;){var l=yc(i[n],o[n]);if(l)return n>=s?l:l*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}))}function wc(e){return En((function(t){return t=D(t,_r(Ss)),dr((function(r){var n=this;return e(t,(function(e){return Le(e,n,r)}))}))}))}var Cc=wc(D),kc=dr,Bc=Math.min,Pc=kc((function(e,t){var r=(t=1==t.length&&G(t[0])?D(t[0],_r(Ss)):D(Mn(t,1),_r(Ss))).length;return dr((function(n){for(var i=-1,o=Bc(n.length,r);++i<o;)n[i]=t[i].call(this,n[i]);return Le(e,this,n)}))})),xc=wc(Bl),Mc=wc(Ia),Ic=9007199254740991,Ec=Math.floor;function _c(e,t){var r="";if(!e||t<1||t>Ic)return r;do{t%2&&(r+=e),(t=Ec(t/2))&&(e+=e)}while(t);return r}var Oc=bs("length"),$c="\\ud800-\\udfff",Fc="["+$c+"]",Lc="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Tc="\\ud83c[\\udffb-\\udfff]",Hc="[^"+$c+"]",Ac="(?:\\ud83c[\\udde6-\\uddff]){2}",Nc="[\\ud800-\\udbff][\\udc00-\\udfff]",Dc="(?:"+Lc+"|"+Tc+")"+"?",Gc="[\\ufe0e\\ufe0f]?",jc=Gc+Dc+("(?:\\u200d(?:"+[Hc,Ac,Nc].join("|")+")"+Gc+Dc+")*"),Wc="(?:"+[Hc+Lc+"?",Lc,Ac,Nc,Fc].join("|")+")",zc=RegExp(Tc+"(?="+Tc+")|"+Wc+jc,"g");function Vc(e){return Xn(e)?function(e){for(var t=zc.lastIndex=0;zc.test(e);)++t;return t}(e):Oc(e)}var qc=Math.ceil;function Uc(e,t){var r=(t=void 0===t?" ":V(t)).length;if(r<2)return r?_c(t,e):t;var n=_c(t,qc(e/Vc(t)));return Xn(t)?Yn(di(n),0,e).join(""):n.slice(0,e)}var Kc=Math.ceil,Jc=Math.floor;var Yc=/^\s+/,Zc=k.parseInt;var Xc=dr((function(e,t){return tr(e,32,void 0,t,Et(t,kt(Xc)))}));Xc.placeholder={};var Qc=dr((function(e,t){return tr(e,64,void 0,t,Et(t,kt(Qc)))}));Qc.placeholder={};var ed=Es((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]}));var td=En((function(e,t){return null==e?{}:function(e,t){return vc(e,t,(function(t,r){return ms(e,r)}))}(e,t)}));function rd(e,t,r,n){for(var i=r-1,o=e.length;++i<o;)if(n(e[i],t))return i;return-1}var nd=Array.prototype.splice;function id(e,t,r,n){var i=n?rd:ht,o=-1,a=t.length,s=e;for(e===t&&(t=Je(t)),r&&(s=D(e,_r(r)));++o<a;)for(var l=0,u=t[o],c=r?r(u):u;(l=i(s,c,l,n))>-1;)s!==e&&nd.call(s,l,1),nd.call(e,l,1);return e}function od(e,t){return e&&e.length&&t&&t.length?id(e,t):e}var ad=dr(od);var sd=Array.prototype.splice;function ld(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==o){var o=i;xt(i)?sd.call(e,i,1):fc(e,i)}}return e}var ud=En((function(e,t){var r=null==e?0:e.length,n=kn(e,t);return ld(e,D(t,(function(e){return xt(e,r)?+e:e})).sort(yc)),n})),cd=Math.floor,dd=Math.random;function pd(e,t){return e+cd(dd()*(t-e+1))}var hd=parseFloat,fd=Math.min,md=Math.random;var gd=Math.ceil,Rd=Math.max;function vd(e){return function(t,r,n){return n&&"number"!=typeof n&&mr(t,r,n)&&(r=n=void 0),t=se(t),void 0===r?(r=t,t=0):r=se(r),function(e,t,r,n){for(var i=-1,o=Rd(gd((t-e)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=e,e+=r;return a}(t,r,n=void 0===n?t<r?1:-1:se(n),e)}}var bd=vd(),yd=vd(!0),Sd=En((function(e,t){return tr(e,256,void 0,void 0,void 0,t)}));function wd(e,t,r,n,i){return i(e,(function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)})),r}function Cd(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}var kd=Array.prototype.reverse;function Bd(e){return null==e?e:kd.call(e)}var Pd=Zi("round");function xd(e){var t=e.length;return t?e[pd(0,t-1)]:void 0}function Md(e){return xd(lu(e))}function Id(e){return(G(e)?xd:Md)(e)}function Ed(e,t){var r=-1,n=e.length,i=n-1;for(t=void 0===t?n:t;++r<t;){var o=pd(r,i),a=e[o];e[o]=e[r],e[r]=a}return e.length=t,e}function _d(e,t){return Ed(Je(e),ro(t,0,e.length))}function Od(e,t){var r=lu(e);return Ed(r,ro(t,0,r.length))}function $d(e){return Ed(Je(e))}function Fd(e){return Ed(lu(e))}var Ld=Ui((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}));function Td(e,t){var r;return Ms(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}var Hd=dr((function(e,t){if(null==e)return[];var r=t.length;return r>1&&mr(e,t[0],t[1])?t=[]:r>2&&mr(t[0],t[1],t[2])&&(t=[t[0]]),Sc(e,Mn(t,1),[])})),Ad=4294967294,Nd=Math.floor,Dd=Math.min;function Gd(e,t,r,n){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=r(t))!=t,s=null===t,l=H(t),u=void 0===t;i<o;){var c=Nd((i+o)/2),d=r(e[c]),p=void 0!==d,h=null===d,f=d==d,m=H(d);if(a)var g=n||f;else g=u?f&&(n||p):s?f&&p&&(n||!h):l?f&&p&&!h&&(n||!m):!h&&!m&&(n?d<=t:d<t);g?i=c+1:o=c}return Dd(o,Ad)}var jd=2147483647;function Wd(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=jd){for(;n<i;){var o=n+i>>>1,a=e[o];null!==a&&!H(a)&&(r?a<=t:a<t)?n=o+1:i=o}return i}return Gd(e,t,ue,r)}function zd(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var a=e[r],s=t?t(a):a;if(!r||!or(s,l)){var l=s;o[i++]=0===a?0:a}}return o}var Vd=Math.max;var qd=Ui((function(e,t,r){return e+(r?" ":"")+hi(t)}));var Ud=q((function(e,t){return e-t}),0);function Kd(e,t){return e&&e.length?Qu(e,Ss(t)):0}var Jd=Object.prototype,Yd=Jd.hasOwnProperty;function Zd(e,t,r,n){return void 0===e||or(e,Jd[r])&&!Yd.call(n,r)?t:e}var Xd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function Qd(e){return"\\"+Xd[e]}var ep=/<%=([\s\S]+?)%>/g,tp={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:ep,variable:"",imports:{_:{escape:wl}}},rp=/\b__p \+= '';/g,np=/\b(__p \+=) '' \+/g,ip=/(__e\(.*?\)|\b__t\)) \+\n'';/g,op=/[()=,{}\[\]\/\s]/,ap=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sp=/($^)/,lp=/['\n\r\u2028\u2029\\]/g,up=Object.prototype.hasOwnProperty;function cp(e,t){return t(e)}var dp=4294967295,pp=Math.min;function hp(e,t){var r=e;return r instanceof je&&(r=r.value()),mi(t,(function(e,t){return t.func.apply(t.thisArg,Bn([e],t.args))}),r)}function fp(){return hp(this.__wrapped__,this.__actions__)}var mp=9007199254740991;function gp(e,t){for(var r=e.length;r--&&ht(t,e[r],0)>-1;);return r}function Rp(e,t){for(var r=-1,n=e.length;++r<n&&ht(t,e[r],0)>-1;);return r}var vp=/^\s+/;var bp=/\w*$/;var yp=gi({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Sp=/&(?:amp|lt|gt|quot|#39);/g,wp=RegExp(Sp.source);var Cp=Co&&1/La(new Co([,-0]))[1]==1/0?function(e){return new Co(e)}:We,kp=200;function Bp(e,t,r){var n=-1,i=ft,o=e.length,a=!0,s=[],l=s;if(r)a=!1,i=el;else if(o>=kp){var u=t?null:Cp(e);if(u)return La(u);a=!1,i=Ea,l=new Ma}else l=t?[]:s;e:for(;++n<o;){var c=e[n],d=t?t(c):c;if(c=r||0!==c?c:0,a&&d==d){for(var p=l.length;p--;)if(l[p]===d)continue e;t&&l.push(d),s.push(c)}else i(l,d,r)||(l!==s&&l.push(d),s.push(c))}return s}var Pp=dr((function(e){return Bp(Mn(e,1,zs,!0))})),xp=dr((function(e){var t=il(e);return zs(t)&&(t=void 0),Bp(Mn(e,1,zs,!0),Ss(t))})),Mp=dr((function(e){var t=il(e);return t="function"==typeof t?t:void 0,Bp(Mn(e,1,zs,!0),void 0,t)}));var Ip=0;var Ep=Math.max;function _p(e){if(!e||!e.length)return[];var t=0;return e=po(e,(function(e){if(zs(e))return t=Ep(e.length,t),!0})),br(t,(function(t){return D(e,bs(t))}))}function Op(e,t){if(!e||!e.length)return[];var r=_p(e);return null==t?r:D(r,(function(e){return Le(t,void 0,e)}))}function $p(e,t,r,n){return Rc(e,t,r(wn(e,t)),n)}var Fp=Ui((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}));var Lp=dr((function(e,t){return zs(e)?rl(e,t):[]}));var Tp=En((function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,i=function(t){return kn(t,e)};return!(t>1||this.__actions__.length)&&n instanceof je&&xt(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:cp,args:[i],thisArg:void 0}),new Ke(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));function Hp(e,t,r){var n=e.length;if(n<2)return n?Bp(e[0]):[];for(var i=-1,o=Array(n);++i<n;)for(var a=e[i],s=-1;++s<n;)s!=i&&(o[i]=rl(o[i]||a,e[s],t,r));return Bp(Mn(o,1),t,r)}var Ap=dr((function(e){return Hp(po(e,zs))})),Np=dr((function(e){var t=il(e);return zs(t)&&(t=void 0),Hp(po(e,zs),Ss(t))})),Dp=dr((function(e){var t=il(e);return t="function"==typeof t?t:void 0,Hp(po(e,zs),void 0,t)})),Gp=dr(_p);function jp(e,t,r){for(var n=-1,i=e.length,o=t.length,a={};++n<i;){var s=n<o?t[n]:void 0;r(a,e[n],s)}return a}var Wp=dr((function(e){var t=e.length,r=t>1?e[t-1]:void 0;return r="function"==typeof r?(e.pop(),r):void 0,Op(e,r)})),zp={chunk:function(e,t,r){t=(r?mr(e,t,r):void 0===t)?1:to(le(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var i=0,o=0,a=Array(eo(n/t));i<n;)a[o++]=Jn(e,i,i+=t);return a},compact:function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var o=e[t];o&&(i[n++]=o)}return i},concat:function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Bn(G(r)?Je(r):[r],Mn(t,1))},difference:nl,differenceBy:ol,differenceWith:al,drop:function(e,t,r){var n=null==e?0:e.length;return n?Jn(e,(t=r||void 0===t?1:le(t))<0?0:t,n):[]},dropRight:function(e,t,r){var n=null==e?0:e.length;return n?Jn(e,0,(t=n-(t=r||void 0===t?1:le(t)))<0?0:t):[]},dropRightWhile:function(e,t){return e&&e.length?ll(e,Ss(t),!0,!0):[]},dropWhile:function(e,t){return e&&e.length?ll(e,Ss(t),!0):[]},fill:function(e,t,r,n){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&mr(e,t,r)&&(r=0,n=i),function(e,t,r,n){var i=e.length;for((r=le(r))<0&&(r=-r>i?0:i+r),(n=void 0===n||n>i?i:le(n))<0&&(n+=i),n=r>n?0:Ml(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},findIndex:Ol,findLastIndex:Hl,first:Nl,flatten:In,flattenDeep:function(e){return(null==e?0:e.length)?Mn(e,Wl):[]},flattenDepth:function(e,t){return(null==e?0:e.length)?Mn(e,t=void 0===t?1:le(t)):[]},fromPairs:function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},head:Nl,indexOf:function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:le(r);return i<0&&(i=cu(n+i,0)),ht(e,t,i)},initial:function(e){return(null==e?0:e.length)?Jn(e,0,-1):[]},intersection:fu,intersectionBy:mu,intersectionWith:gu,join:function(e,t){return null==e?"":ju.call(e,t)},last:il,lastIndexOf:function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n;return void 0!==r&&(i=(i=le(r))<0?Vu(n+i,0):qu(i,n-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,i):dt(e,pt,i,!0)},nth:function(e,t){return e&&e.length?hc(e,le(t)):void 0},pull:ad,pullAll:od,pullAllBy:function(e,t,r){return e&&e.length&&t&&t.length?id(e,t,Ss(r)):e},pullAllWith:function(e,t,r){return e&&e.length&&t&&t.length?id(e,t,void 0,r):e},pullAt:ud,remove:function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],o=e.length;for(t=Ss(t);++n<o;){var a=e[n];t(a,n,e)&&(r.push(a),i.push(n))}return ld(e,i),r},reverse:Bd,slice:function(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&mr(e,t,r)?(t=0,r=n):(t=null==t?0:le(t),r=void 0===r?n:le(r)),Jn(e,t,r)):[]},sortedIndex:function(e,t){return Wd(e,t)},sortedIndexBy:function(e,t,r){return Gd(e,t,Ss(r))},sortedIndexOf:function(e,t){var r=null==e?0:e.length;if(r){var n=Wd(e,t);if(n<r&&or(e[n],t))return n}return-1},sortedLastIndex:function(e,t){return Wd(e,t,!0)},sortedLastIndexBy:function(e,t,r){return Gd(e,t,Ss(r),!0)},sortedLastIndexOf:function(e,t){if(null==e?0:e.length){var r=Wd(e,t,!0)-1;if(or(e[r],t))return r}return-1},sortedUniq:function(e){return e&&e.length?zd(e):[]},sortedUniqBy:function(e,t){return e&&e.length?zd(e,Ss(t)):[]},tail:function(e){var t=null==e?0:e.length;return t?Jn(e,1,t):[]},take:function(e,t,r){return e&&e.length?Jn(e,0,(t=r||void 0===t?1:le(t))<0?0:t):[]},takeRight:function(e,t,r){var n=null==e?0:e.length;return n?Jn(e,(t=n-(t=r||void 0===t?1:le(t)))<0?0:t,n):[]},takeRightWhile:function(e,t){return e&&e.length?ll(e,Ss(t),!1,!0):[]},takeWhile:function(e,t){return e&&e.length?ll(e,Ss(t)):[]},union:Pp,unionBy:xp,unionWith:Mp,uniq:function(e){return e&&e.length?Bp(e):[]},uniqBy:function(e,t){return e&&e.length?Bp(e,Ss(t)):[]},uniqWith:function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Bp(e,void 0,t):[]},unzip:_p,unzipWith:Op,without:Lp,xor:Ap,xorBy:Np,xorWith:Dp,zip:Gp,zipObject:function(e,t){return jp(e||[],t||[],sr)},zipObjectDeep:function(e,t){return jp(e||[],t||[],Rc)},zipWith:Wp},Vp={countBy:Os,each:cl,eachRight:ml,every:function(e,t,r){var n=G(e)?Bl:Pl;return r&&mr(e,t,r)&&(t=void 0),n(e,Ss(t))},filter:function(e,t){return(G(e)?po:Il)(e,Ss(t))},find:$l,findLast:Al,flatMap:function(e,t){return Mn(Gl(e,t),1)},flatMapDeep:function(e,t){return Mn(Gl(e,t),jl)},flatMapDepth:function(e,t,r){return r=void 0===r?1:le(r),Mn(Gl(e,t),r)},forEach:cl,forEachRight:ml,groupBy:Yl,includes:function(e,t,r,n){e=fr(e)?e:lu(e),r=r&&!n?le(r):0;var i=e.length;return r<0&&(r=uu(i+r,0)),au(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&ht(e,t,r)>-1},invokeMap:xu,keyBy:zu,map:Gl,orderBy:function(e,t,r,n){return null==e?[]:(G(t)||(t=null==t?[]:[t]),G(r=n?void 0:r)||(r=null==r?[]:[r]),Sc(e,t,r))},partition:ed,reduce:function(e,t,r){var n=G(e)?mi:wd,i=arguments.length<3;return n(e,Ss(t),r,i,Ms)},reduceRight:function(e,t,r){var n=G(e)?Cd:wd,i=arguments.length<3;return n(e,Ss(t),r,i,fl)},reject:function(e,t){return(G(e)?po:Il)(e,lc(Ss(t)))},sample:Id,sampleSize:function(e,t,r){return t=(r?mr(e,t,r):void 0===t)?1:le(t),(G(e)?_d:Od)(e,t)},shuffle:function(e){return(G(e)?$d:Fd)(e)},size:function(e){if(null==e)return 0;if(fr(e))return au(e)?Vc(e):e.length;var t=Lo(e);return"[object Map]"==t||"[object Set]"==t?e.size:Wr(e).length},some:function(e,t,r){var n=G(e)?Ia:Td;return r&&mr(e,t,r)&&(t=void 0),n(e,Ss(t))},sortBy:Hd},qp=Ls,Up={after:function(e,t){if("function"!=typeof t)throw new TypeError("Expected a function");return e=le(e),function(){if(--e<1)return t.apply(this,arguments)}},ary:nr,before:Vn,bind:qn,bindKey:Kn,curry:$s,curryRight:Fs,debounce:Ns,defer:Xs,delay:Qs,flip:function(e){return tr(e,512)},memoize:fn,negate:lc,once:function(e){return Vn(2,e)},overArgs:Pc,partial:Xc,partialRight:Qc,rearg:Sd,rest:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return dr(e,t=void 0===t?t:le(t))},spread:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=null==t?0:Vd(le(t),0),dr((function(r){var n=r[t],i=Yn(r,0,t);return n&&Bn(i,n),Le(e,this,i)}))},throttle:function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return X(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Ns(e,t,{leading:n,maxWait:t,trailing:i})},unary:function(e){return nr(e,1)},wrap:function(e,t){return Xc(ul(t),e)}},Kp={castArray:function(){if(!arguments.length)return[];var e=arguments[0];return G(e)?e:[e]},clone:ka,cloneDeep:xa,cloneDeepWith:function(e,t){return wa(e,5,t="function"==typeof t?t:void 0)},cloneWith:function(e,t){return wa(e,4,t="function"==typeof t?t:void 0)},conformsTo:function(e,t){return null==t||ws(e,t,zr(t))},eq:or,gt:Ql,gte:eu,isArguments:kr,isArray:G,isArrayBuffer:Iu,isArrayLike:fr,isArrayLikeObject:zs,isBoolean:function(e){return!0===e||!1===e||L(e)&&"[object Boolean]"==F(e)},isBuffer:Ir,isDate:_u,isElement:function(e){return L(e)&&1===e.nodeType&&!Nn(e)},isEmpty:function(e){if(null==e)return!0;if(fr(e)&&(G(e)||"string"==typeof e||"function"==typeof e.splice||Ir(e)||Hr(e)||kr(e)))return!e.length;var t=Lo(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(vr(e))return!Wr(e).length;for(var r in e)if(Ou.call(e,r))return!1;return!0},isEqual:$u,isEqualWith:function(e,t,r){var n=(r="function"==typeof r?r:void 0)?r(e,t):void 0;return void 0===n?os(e,t,void 0,r):!!n},isError:jn,isFinite:function(e){return"number"==typeof e&&Fu(e)},isFunction:fe,isInteger:Lu,isLength:hr,isMap:da,isMatch:function(e,t){return e===t||ls(e,t,cs(t))},isMatchWith:function(e,t,r){return r="function"==typeof r?r:void 0,ls(e,t,cs(t),r)},isNaN:function(e){return Hu(e)&&e!=+e},isNative:function(e){if(Au(e))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pe(e)},isNil:function(e){return null==e},isNull:function(e){return null===e},isNumber:Hu,isObject:X,isObjectLike:L,isPlainObject:Nn,isRegExp:Du,isSafeInteger:function(e){return Lu(e)&&e>=-9007199254740991&&e<=Gu},isSet:ha,isString:au,isSymbol:H,isTypedArray:Hr,isUndefined:function(e){return void 0===e},isWeakMap:function(e){return L(e)&&"[object WeakMap]"==Lo(e)},isWeakSet:function(e){return L(e)&&"[object WeakSet]"==F(e)},lt:Yu,lte:Zu,toArray:pc,toFinite:se,toInteger:le,toLength:Ml,toNumber:ie,toPlainObject:qs,toSafeInteger:function(e){return e?ro(le(e),-9007199254740991,mp):0===e?e:0},toString:vn},Jp={add:U,ceil:Xi,divide:sl,floor:zl,max:function(e){return e&&e.length?Xu(e,ue,Zl):void 0},maxBy:function(e,t){return e&&e.length?Xu(e,Ss(t),Zl):void 0},mean:function(e){return tc(e,ue)},meanBy:function(e,t){return tc(e,Ss(t))},min:function(e){return e&&e.length?Xu(e,ue,Ju):void 0},minBy:function(e,t){return e&&e.length?Xu(e,Ss(t),Ju):void 0},multiply:ac,round:Pd,subtract:Ud,sum:function(e){return e&&e.length?Qu(e,ue):0},sumBy:Kd},Yp=no,Zp=function(e,t,r){return t=se(t),void 0===r?(r=t,t=0):r=se(r),function(e,t,r){return e>=iu(t,r)&&e<nu(t,r)}(e=ie(e),t,r)},Xp=function(e,t,r){if(r&&"boolean"!=typeof r&&mr(e,t,r)&&(t=r=void 0),void 0===r&&("boolean"==typeof t?(r=t,t=void 0):"boolean"==typeof e&&(r=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=se(e),void 0===t?(t=e,e=0):t=se(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var i=md();return fd(e+i*(t-e+hd("1e-"+((i+"").length-1))),t)}return pd(e,t)},Qp={assign:qr,assignIn:Yr,assignInWith:Zr,assignWith:Xr,at:_n,create:function(e,t){var r=Oe(e);return null==t?r:oo(r,t)},defaults:js,defaultsDeep:Ys,entries:Rl,entriesIn:vl,extend:Yr,extendWith:Zr,findKey:function(e,t){return Fl(e,Ss(t),Ps)},findLastKey:function(e,t){return Fl(e,Ss(t),hl)},forIn:function(e,t){return null==e?e:Bs(e,ul(t),Jr)},forInRight:function(e,t){return null==e?e:pl(e,ul(t),Jr)},forOwn:function(e,t){return e&&Ps(e,ul(t))},forOwnRight:function(e,t){return e&&hl(e,ul(t))},functions:function(e){return null==e?[]:Kl(e,zr(e))},functionsIn:function(e){return null==e?[]:Kl(e,Jr(e))},get:Cn,has:function(e,t){return null!=e&&fs(e,t,ru)},hasIn:ms,invert:bu,invertBy:Cu,invoke:Pu,keys:zr,keysIn:Jr,mapKeys:function(e,t){var r={};return t=Ss(t),Ps(e,(function(e,n,i){ir(r,t(e,n,i),e)})),r},mapValues:function(e,t){var r={};return t=Ss(t),Ps(e,(function(e,n,i){ir(r,n,t(e,n,i))})),r},merge:rc,mergeWith:Js,omit:gc,omitBy:function(e,t){return bc(e,lc(Ss(t)))},pick:td,pickBy:bc,result:function(e,t,r){var n=-1,i=(t=bn(t,e)).length;for(i||(i=1,e=void 0);++n<i;){var o=null==e?void 0:e[Sn(t[n])];void 0===o&&(n=i,o=r),e=fe(o)?o.call(e):o}return e},set:function(e,t,r){return null==e?e:Rc(e,t,r)},setWith:function(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:Rc(e,t,r,n)},toPairs:Rl,toPairsIn:vl,transform:function(e,t,r){var n=G(e),i=n||Ir(e)||Hr(e);if(t=Ss(t),null==r){var o=e&&e.constructor;r=i?n?new o:[]:X(e)&&fe(o)?Oe(On(e)):{}}return(i?ct:Ps)(e,(function(e,n,i){return t(r,e,n,i)})),r},unset:function(e,t){return null==e||fc(e,t)},update:function(e,t,r){return null==e?e:$p(e,t,ul(r))},updateWith:function(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:$p(e,t,ul(r),n)},values:lu,valuesIn:function(e){return null==e?[]:su(e,Jr(e))}},eh={at:Tp,chain:Qi,commit:function(){return new Ke(this.value(),this.__chain__)},lodash:Xe,next:function(){void 0===this.__values__&&(this.__values__=pc(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},plant:function(e){for(var t,r=this;r instanceof De;){var n=Ye(r);n.__index__=0,n.__values__=void 0,t?i.__wrapped__=n:t=n;var i=n;r=r.__wrapped__}return i.__wrapped__=e,t},reverse:function(){var e=this.__wrapped__;if(e instanceof je){var t=e;return this.__actions__.length&&(t=new je(this)),(t=t.reverse()).__actions__.push({func:cp,args:[Bd],thisArg:void 0}),new Ke(t,this.__chain__)}return this.thru(Bd)},tap:function(e,t){return t(e),e},thru:cp,toIterator:function(){return this},toJSON:fp,value:fp,valueOf:fp,wrapperChain:function(){return Qi(this)}},th={camelCase:Ki,capitalize:fi,deburr:yi,endsWith:function(e,t,r){e=vn(e),t=V(t);var n=e.length,i=r=void 0===r?n:ro(le(r),0,n);return(r-=t.length)>=0&&e.slice(r,i)==t},escape:wl,escapeRegExp:function(e){return(e=vn(e))&&kl.test(e)?e.replace(Cl,"\\$&"):e},kebabCase:Wu,lowerCase:Uu,lowerFirst:Ku,pad:function(e,t,r){e=vn(e);var n=(t=le(t))?Vc(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return Uc(Jc(i),r)+e+Uc(Kc(i),r)},padEnd:function(e,t,r){e=vn(e);var n=(t=le(t))?Vc(e):0;return t&&n<t?e+Uc(t-n,r):e},padStart:function(e,t,r){e=vn(e);var n=(t=le(t))?Vc(e):0;return t&&n<t?Uc(t-n,r)+e:e},parseInt:function(e,t,r){return r||null==t?t=0:t&&(t=+t),Zc(vn(e).replace(Yc,""),t||0)},repeat:function(e,t,r){return t=(r?mr(e,t,r):void 0===t)?1:le(t),_c(vn(e),t)},replace:function(){var e=arguments,t=vn(e[0]);return e.length<3?t:t.replace(e[1],e[2])},snakeCase:Ld,split:function(e,t,r){return r&&"number"!=typeof r&&mr(e,t,r)&&(t=r=void 0),(r=void 0===r?4294967295:r>>>0)?(e=vn(e))&&("string"==typeof t||null!=t&&!Du(t))&&!(t=V(t))&&Xn(e)?Yn(di(e),0,r):e.split(t,r):[]},startCase:qd,startsWith:function(e,t,r){return e=vn(e),r=null==r?0:ro(le(r),0,e.length),t=V(t),e.slice(r,r+t.length)==t},template:function(e,t,r){var n=tp.imports._.templateSettings||tp;r&&mr(e,t,r)&&(t=void 0),e=vn(e),t=Zr({},t,n,Zd);var i,o,a=Zr({},t.imports,n.imports,Zd),s=zr(a),l=su(a,s),u=0,c=t.interpolate||sp,d="__p += '",p=RegExp((t.escape||sp).source+"|"+c.source+"|"+(c===ep?ap:sp).source+"|"+(t.evaluate||sp).source+"|$","g"),h=up.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(p,(function(t,r,n,a,s,l){return n||(n=a),d+=e.slice(u,l).replace(lp,Qd),r&&(i=!0,d+="' +\n__e("+r+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),d+="';\n";var f=up.call(t,"variable")&&t.variable;if(f){if(op.test(f))throw new Error("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(rp,""):d).replace(np,"$1").replace(ip,"$1;"),d="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Wn((function(){return Function(s,h+"return "+d).apply(void 0,l)}));if(m.source=d,jn(m))throw m;return m},templateSettings:tp,toLower:function(e){return vn(e).toLowerCase()},toUpper:function(e){return vn(e).toUpperCase()},trim:function(e,t,r){if((e=vn(e))&&(r||void 0===t))return Z(e);if(!e||!(t=V(t)))return e;var n=di(e),i=di(t);return Yn(n,Rp(n,i),gp(n,i)+1).join("")},trimEnd:function(e,t,r){if((e=vn(e))&&(r||void 0===t))return e.slice(0,J(e)+1);if(!e||!(t=V(t)))return e;var n=di(e);return Yn(n,0,gp(n,di(t))+1).join("")},trimStart:function(e,t,r){if((e=vn(e))&&(r||void 0===t))return e.replace(vp,"");if(!e||!(t=V(t)))return e;var n=di(e);return Yn(n,Rp(n,di(t))).join("")},truncate:function(e,t){var r=30,n="...";if(X(t)){var i="separator"in t?t.separator:i;r="length"in t?le(t.length):r,n="omission"in t?V(t.omission):n}var o=(e=vn(e)).length;if(Xn(e)){var a=di(e);o=a.length}if(r>=o)return e;var s=r-Vc(n);if(s<1)return n;var l=a?Yn(a,0,s).join(""):e.slice(0,s);if(void 0===i)return l+n;if(a&&(s+=l.length-s),Du(i)){if(e.slice(s).search(i)){var u,c=l;for(i.global||(i=RegExp(i.source,vn(bp.exec(i))+"g")),i.lastIndex=0;u=i.exec(c);)var d=u.index;l=l.slice(0,void 0===d?s:d)}}else if(e.indexOf(V(i),s)!=s){var p=l.lastIndexOf(i);p>-1&&(l=l.slice(0,p))}return l+n},unescape:function(e){return(e=vn(e))&&wp.test(e)?e.replace(Sp,yp):e},upperCase:Fp,upperFirst:hi,words:Vi},rh={attempt:Wn,bindAll:Un,cond:function(e){var t=null==e?0:e.length,r=Ss;return e=t?D(e,(function(e){if("function"!=typeof e[1])throw new TypeError("Expected a function");return[r(e[0]),e[1]]})):[],dr((function(r){for(var n=-1;++n<t;){var i=e[n];if(Le(i[0],this,r))return Le(i[1],this,r)}}))},conforms:function(e){return function(e){var t=zr(e);return function(r){return ws(r,e,t)}}(wa(e,1))},constant:at,defaultTo:function(e,t){return null==e||e!=e?t:e},flow:ql,flowRight:Ul,identity:ue,iteratee:function(e){return Ss("function"==typeof e?e:wa(e,1))},matches:function(e){return ps(wa(e,1))},matchesProperty:function(e,t){return vs(e,wa(t,1))},method:nc,methodOf:ic,mixin:oc,noop:We,nthArg:function(e){return e=le(e),dr((function(t){return hc(t,e)}))},over:Cc,overEvery:xc,overSome:Mc,property:ys,propertyOf:function(e){return function(t){return null==e?void 0:wn(e,t)}},range:bd,rangeRight:yd,stubArray:ho,stubFalse:Br,stubObject:function(){return{}},stubString:function(){return""},stubTrue:function(){return!0},times:function(e,t){if((e=le(e))<1||e>9007199254740991)return[];var r=dp,n=pp(e,dp);t=ul(t),e-=dp;for(var i=br(n,t);++r<e;)t(r);return i},toPath:function(e){return G(e)?D(e,Sn):H(e)?[e]:Je(Rn(vn(e)))},uniqueId:function(e){var t=++Ip;return vn(e)+t}};var nh=Math.max,ih=Math.min;var oh=Math.min;
/**
	 * @license
	 * Lodash (Custom Build) <https://lodash.com/>
	 * Build: `lodash modularize exports="es" -o ./`
	 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	 * Released under MIT license <https://lodash.com/license>
	 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 */
var ah,sh=4294967295,lh=Array.prototype,uh=Object.prototype.hasOwnProperty,ch=B?B.iterator:void 0,dh=Math.max,ph=Math.min,hh=function(e){return function(t,r,n){if(null==n){var i=X(r),o=i&&zr(r),a=o&&o.length&&Kl(r,o);(a?a.length:i)||(n=r,r=t,t=this)}return e(t,r,n)}}(oc);Xe.after=Up.after,Xe.ary=Up.ary,Xe.assign=Qp.assign,Xe.assignIn=Qp.assignIn,Xe.assignInWith=Qp.assignInWith,Xe.assignWith=Qp.assignWith,Xe.at=Qp.at,Xe.before=Up.before,Xe.bind=Up.bind,Xe.bindAll=rh.bindAll,Xe.bindKey=Up.bindKey,Xe.castArray=Kp.castArray,Xe.chain=eh.chain,Xe.chunk=zp.chunk,Xe.compact=zp.compact,Xe.concat=zp.concat,Xe.cond=rh.cond,Xe.conforms=rh.conforms,Xe.constant=rh.constant,Xe.countBy=Vp.countBy,Xe.create=Qp.create,Xe.curry=Up.curry,Xe.curryRight=Up.curryRight,Xe.debounce=Up.debounce,Xe.defaults=Qp.defaults,Xe.defaultsDeep=Qp.defaultsDeep,Xe.defer=Up.defer,Xe.delay=Up.delay,Xe.difference=zp.difference,Xe.differenceBy=zp.differenceBy,Xe.differenceWith=zp.differenceWith,Xe.drop=zp.drop,Xe.dropRight=zp.dropRight,Xe.dropRightWhile=zp.dropRightWhile,Xe.dropWhile=zp.dropWhile,Xe.fill=zp.fill,Xe.filter=Vp.filter,Xe.flatMap=Vp.flatMap,Xe.flatMapDeep=Vp.flatMapDeep,Xe.flatMapDepth=Vp.flatMapDepth,Xe.flatten=zp.flatten,Xe.flattenDeep=zp.flattenDeep,Xe.flattenDepth=zp.flattenDepth,Xe.flip=Up.flip,Xe.flow=rh.flow,Xe.flowRight=rh.flowRight,Xe.fromPairs=zp.fromPairs,Xe.functions=Qp.functions,Xe.functionsIn=Qp.functionsIn,Xe.groupBy=Vp.groupBy,Xe.initial=zp.initial,Xe.intersection=zp.intersection,Xe.intersectionBy=zp.intersectionBy,Xe.intersectionWith=zp.intersectionWith,Xe.invert=Qp.invert,Xe.invertBy=Qp.invertBy,Xe.invokeMap=Vp.invokeMap,Xe.iteratee=rh.iteratee,Xe.keyBy=Vp.keyBy,Xe.keys=zr,Xe.keysIn=Qp.keysIn,Xe.map=Vp.map,Xe.mapKeys=Qp.mapKeys,Xe.mapValues=Qp.mapValues,Xe.matches=rh.matches,Xe.matchesProperty=rh.matchesProperty,Xe.memoize=Up.memoize,Xe.merge=Qp.merge,Xe.mergeWith=Qp.mergeWith,Xe.method=rh.method,Xe.methodOf=rh.methodOf,Xe.mixin=hh,Xe.negate=lc,Xe.nthArg=rh.nthArg,Xe.omit=Qp.omit,Xe.omitBy=Qp.omitBy,Xe.once=Up.once,Xe.orderBy=Vp.orderBy,Xe.over=rh.over,Xe.overArgs=Up.overArgs,Xe.overEvery=rh.overEvery,Xe.overSome=rh.overSome,Xe.partial=Up.partial,Xe.partialRight=Up.partialRight,Xe.partition=Vp.partition,Xe.pick=Qp.pick,Xe.pickBy=Qp.pickBy,Xe.property=rh.property,Xe.propertyOf=rh.propertyOf,Xe.pull=zp.pull,Xe.pullAll=zp.pullAll,Xe.pullAllBy=zp.pullAllBy,Xe.pullAllWith=zp.pullAllWith,Xe.pullAt=zp.pullAt,Xe.range=rh.range,Xe.rangeRight=rh.rangeRight,Xe.rearg=Up.rearg,Xe.reject=Vp.reject,Xe.remove=zp.remove,Xe.rest=Up.rest,Xe.reverse=zp.reverse,Xe.sampleSize=Vp.sampleSize,Xe.set=Qp.set,Xe.setWith=Qp.setWith,Xe.shuffle=Vp.shuffle,Xe.slice=zp.slice,Xe.sortBy=Vp.sortBy,Xe.sortedUniq=zp.sortedUniq,Xe.sortedUniqBy=zp.sortedUniqBy,Xe.split=th.split,Xe.spread=Up.spread,Xe.tail=zp.tail,Xe.take=zp.take,Xe.takeRight=zp.takeRight,Xe.takeRightWhile=zp.takeRightWhile,Xe.takeWhile=zp.takeWhile,Xe.tap=eh.tap,Xe.throttle=Up.throttle,Xe.thru=cp,Xe.toArray=Kp.toArray,Xe.toPairs=Qp.toPairs,Xe.toPairsIn=Qp.toPairsIn,Xe.toPath=rh.toPath,Xe.toPlainObject=Kp.toPlainObject,Xe.transform=Qp.transform,Xe.unary=Up.unary,Xe.union=zp.union,Xe.unionBy=zp.unionBy,Xe.unionWith=zp.unionWith,Xe.uniq=zp.uniq,Xe.uniqBy=zp.uniqBy,Xe.uniqWith=zp.uniqWith,Xe.unset=Qp.unset,Xe.unzip=zp.unzip,Xe.unzipWith=zp.unzipWith,Xe.update=Qp.update,Xe.updateWith=Qp.updateWith,Xe.values=Qp.values,Xe.valuesIn=Qp.valuesIn,Xe.without=zp.without,Xe.words=th.words,Xe.wrap=Up.wrap,Xe.xor=zp.xor,Xe.xorBy=zp.xorBy,Xe.xorWith=zp.xorWith,Xe.zip=zp.zip,Xe.zipObject=zp.zipObject,Xe.zipObjectDeep=zp.zipObjectDeep,Xe.zipWith=zp.zipWith,Xe.entries=Qp.toPairs,Xe.entriesIn=Qp.toPairsIn,Xe.extend=Qp.assignIn,Xe.extendWith=Qp.assignInWith,hh(Xe,Xe),Xe.add=Jp.add,Xe.attempt=rh.attempt,Xe.camelCase=th.camelCase,Xe.capitalize=th.capitalize,Xe.ceil=Jp.ceil,Xe.clamp=Yp,Xe.clone=Kp.clone,Xe.cloneDeep=Kp.cloneDeep,Xe.cloneDeepWith=Kp.cloneDeepWith,Xe.cloneWith=Kp.cloneWith,Xe.conformsTo=Kp.conformsTo,Xe.deburr=th.deburr,Xe.defaultTo=rh.defaultTo,Xe.divide=Jp.divide,Xe.endsWith=th.endsWith,Xe.eq=Kp.eq,Xe.escape=th.escape,Xe.escapeRegExp=th.escapeRegExp,Xe.every=Vp.every,Xe.find=Vp.find,Xe.findIndex=zp.findIndex,Xe.findKey=Qp.findKey,Xe.findLast=Vp.findLast,Xe.findLastIndex=zp.findLastIndex,Xe.findLastKey=Qp.findLastKey,Xe.floor=Jp.floor,Xe.forEach=Vp.forEach,Xe.forEachRight=Vp.forEachRight,Xe.forIn=Qp.forIn,Xe.forInRight=Qp.forInRight,Xe.forOwn=Qp.forOwn,Xe.forOwnRight=Qp.forOwnRight,Xe.get=Qp.get,Xe.gt=Kp.gt,Xe.gte=Kp.gte,Xe.has=Qp.has,Xe.hasIn=Qp.hasIn,Xe.head=zp.head,Xe.identity=ue,Xe.includes=Vp.includes,Xe.indexOf=zp.indexOf,Xe.inRange=Zp,Xe.invoke=Qp.invoke,Xe.isArguments=Kp.isArguments,Xe.isArray=G,Xe.isArrayBuffer=Kp.isArrayBuffer,Xe.isArrayLike=Kp.isArrayLike,Xe.isArrayLikeObject=Kp.isArrayLikeObject,Xe.isBoolean=Kp.isBoolean,Xe.isBuffer=Kp.isBuffer,Xe.isDate=Kp.isDate,Xe.isElement=Kp.isElement,Xe.isEmpty=Kp.isEmpty,Xe.isEqual=Kp.isEqual,Xe.isEqualWith=Kp.isEqualWith,Xe.isError=Kp.isError,Xe.isFinite=Kp.isFinite,Xe.isFunction=Kp.isFunction,Xe.isInteger=Kp.isInteger,Xe.isLength=Kp.isLength,Xe.isMap=Kp.isMap,Xe.isMatch=Kp.isMatch,Xe.isMatchWith=Kp.isMatchWith,Xe.isNaN=Kp.isNaN,Xe.isNative=Kp.isNative,Xe.isNil=Kp.isNil,Xe.isNull=Kp.isNull,Xe.isNumber=Kp.isNumber,Xe.isObject=X,Xe.isObjectLike=Kp.isObjectLike,Xe.isPlainObject=Kp.isPlainObject,Xe.isRegExp=Kp.isRegExp,Xe.isSafeInteger=Kp.isSafeInteger,Xe.isSet=Kp.isSet,Xe.isString=Kp.isString,Xe.isSymbol=Kp.isSymbol,Xe.isTypedArray=Kp.isTypedArray,Xe.isUndefined=Kp.isUndefined,Xe.isWeakMap=Kp.isWeakMap,Xe.isWeakSet=Kp.isWeakSet,Xe.join=zp.join,Xe.kebabCase=th.kebabCase,Xe.last=il,Xe.lastIndexOf=zp.lastIndexOf,Xe.lowerCase=th.lowerCase,Xe.lowerFirst=th.lowerFirst,Xe.lt=Kp.lt,Xe.lte=Kp.lte,Xe.max=Jp.max,Xe.maxBy=Jp.maxBy,Xe.mean=Jp.mean,Xe.meanBy=Jp.meanBy,Xe.min=Jp.min,Xe.minBy=Jp.minBy,Xe.stubArray=rh.stubArray,Xe.stubFalse=rh.stubFalse,Xe.stubObject=rh.stubObject,Xe.stubString=rh.stubString,Xe.stubTrue=rh.stubTrue,Xe.multiply=Jp.multiply,Xe.nth=zp.nth,Xe.noop=rh.noop,Xe.now=qp,Xe.pad=th.pad,Xe.padEnd=th.padEnd,Xe.padStart=th.padStart,Xe.parseInt=th.parseInt,Xe.random=Xp,Xe.reduce=Vp.reduce,Xe.reduceRight=Vp.reduceRight,Xe.repeat=th.repeat,Xe.replace=th.replace,Xe.result=Qp.result,Xe.round=Jp.round,Xe.sample=Vp.sample,Xe.size=Vp.size,Xe.snakeCase=th.snakeCase,Xe.some=Vp.some,Xe.sortedIndex=zp.sortedIndex,Xe.sortedIndexBy=zp.sortedIndexBy,Xe.sortedIndexOf=zp.sortedIndexOf,Xe.sortedLastIndex=zp.sortedLastIndex,Xe.sortedLastIndexBy=zp.sortedLastIndexBy,Xe.sortedLastIndexOf=zp.sortedLastIndexOf,Xe.startCase=th.startCase,Xe.startsWith=th.startsWith,Xe.subtract=Jp.subtract,Xe.sum=Jp.sum,Xe.sumBy=Jp.sumBy,Xe.template=th.template,Xe.times=rh.times,Xe.toFinite=Kp.toFinite,Xe.toInteger=le,Xe.toLength=Kp.toLength,Xe.toLower=th.toLower,Xe.toNumber=Kp.toNumber,Xe.toSafeInteger=Kp.toSafeInteger,Xe.toString=Kp.toString,Xe.toUpper=th.toUpper,Xe.trim=th.trim,Xe.trimEnd=th.trimEnd,Xe.trimStart=th.trimStart,Xe.truncate=th.truncate,Xe.unescape=th.unescape,Xe.uniqueId=rh.uniqueId,Xe.upperCase=th.upperCase,Xe.upperFirst=th.upperFirst,Xe.each=Vp.forEach,Xe.eachRight=Vp.forEachRight,Xe.first=zp.head,hh(Xe,(ah={},Ps(Xe,(function(e,t){uh.call(Xe.prototype,t)||(ah[t]=e)})),ah),{chain:!1}),Xe.VERSION="4.17.21",(Xe.templateSettings=th.templateSettings).imports._=Xe,ct(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Xe[e].placeholder=Xe})),ct(["drop","take"],(function(e,t){je.prototype[e]=function(r){r=void 0===r?1:dh(le(r),0);var n=this.__filtered__&&!t?new je(this):this.clone();return n.__filtered__?n.__takeCount__=ph(r,n.__takeCount__):n.__views__.push({size:ph(r,sh),type:e+(n.__dir__<0?"Right":"")}),n},je.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),ct(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;je.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ss(e),type:r}),t.__filtered__=t.__filtered__||n,t}})),ct(["head","last"],(function(e,t){var r="take"+(t?"Right":"");je.prototype[e]=function(){return this[r](1).value()[0]}})),ct(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");je.prototype[e]=function(){return this.__filtered__?new je(this):this[r](1)}})),je.prototype.compact=function(){return this.filter(ue)},je.prototype.find=function(e){return this.filter(e).head()},je.prototype.findLast=function(e){return this.reverse().find(e)},je.prototype.invokeMap=dr((function(e,t){return"function"==typeof e?new je(this):this.map((function(r){return Bu(r,e,t)}))})),je.prototype.reject=function(e){return this.filter(lc(Ss(e)))},je.prototype.slice=function(e,t){e=le(e);var r=this;return r.__filtered__&&(e>0||t<0)?new je(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),void 0!==t&&(r=(t=le(t))<0?r.dropRight(-t):r.take(t-e)),r)},je.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},je.prototype.toArray=function(){return this.take(sh)},Ps(je.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),i=Xe[n?"take"+("last"==t?"Right":""):t],o=n||/^find/.test(t);i&&(Xe.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,s=t instanceof je,l=a[0],u=s||G(t),c=function(e){var t=i.apply(Xe,Bn([e],a));return n&&d?t[0]:t};u&&r&&"function"==typeof l&&1!=l.length&&(s=u=!1);var d=this.__chain__,p=!!this.__actions__.length,h=o&&!d,f=s&&!p;if(!o&&u){t=f?t:new je(this);var m=e.apply(t,a);return m.__actions__.push({func:cp,args:[c],thisArg:void 0}),new Ke(m,d)}return h&&f?e.apply(this,a):(m=this.thru(c),h?n?m.value()[0]:m.value():m)})})),ct(["pop","push","shift","sort","splice","unshift"],(function(e){var t=lh[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Xe.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(G(i)?i:[],e)}return this[r]((function(r){return t.apply(G(r)?r:[],e)}))}})),Ps(je.prototype,(function(e,t){var r=Xe[t];if(r){var n=r.name+"";uh.call(Ve,n)||(Ve[n]=[]),Ve[n].push({name:t,func:r})}})),Ve[Ht(void 0,2).name]=[{name:"wrapper",func:void 0}],je.prototype.clone=function(){var e=new je(this.__wrapped__);return e.__actions__=Je(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Je(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Je(this.__views__),e},je.prototype.reverse=function(){if(this.__filtered__){var e=new je(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},je.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=G(e),n=t<0,i=r?e.length:0,o=function(e,t,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=ih(t,e+a);break;case"takeRight":e=nh(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=n?s:a-1,c=this.__iteratees__,d=c.length,p=0,h=oh(l,this.__takeCount__);if(!r||!n&&i==l&&h==l)return hp(e,this.__actions__);var f=[];e:for(;l--&&p<h;){for(var m=-1,g=e[u+=t];++m<d;){var R=c[m],v=R.iteratee,b=R.type,y=v(g);if(2==b)g=y;else if(!y){if(1==b)continue e;break e}}f[p++]=g}return f},Xe.prototype.at=eh.at,Xe.prototype.chain=eh.wrapperChain,Xe.prototype.commit=eh.commit,Xe.prototype.next=eh.next,Xe.prototype.plant=eh.plant,Xe.prototype.reverse=eh.reverse,Xe.prototype.toJSON=Xe.prototype.valueOf=Xe.prototype.value=eh.value,Xe.prototype.first=Xe.prototype.head,ch&&(Xe.prototype[ch]=eh.toIterator)
/**
	 * @license
	 * Lodash (Custom Build) <https://lodash.com/>
	 * Build: `lodash modularize exports="es" -o ./`
	 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	 * Released under MIT license <https://lodash.com/license>
	 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 */;var fh={};!function(e){!function(){const t="1.2.0";function r(e){alert("Mod ERROR:\n"+e);const t=new Error(e);throw console.error(t),t}const n=new TextEncoder;function i(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function o(e){const t=new Set;return e.filter((e=>!t.has(e)&&t.add(e)))}const a=new Map,s=new Set;function l(e){s.has(e)||(s.add(e),console.warn(e))}function u(e){const t=[],r=new Map,n=new Set;for(const i of h.values()){const o=i.patching.get(e.name);if(o){t.push(...o.hooks);for(const[t,a]of o.patches.entries())r.has(t)&&r.get(t)!==a&&l(`ModSDK: Mod '${i.name}' is patching function ${e.name} with same pattern that is already applied by different mod, but with different pattern:\nPattern:\n${t}\nPatch1:\n${r.get(t)||""}\nPatch2:\n${a}`),r.set(t,a),n.add(i.name)}}t.sort(((e,t)=>t.priority-e.priority));const i=function(e,t){if(0===t.size)return e;let r=e.toString().replaceAll("\r\n","\n");for(const[n,i]of t.entries())r.includes(n)||l(`ModSDK: Patching ${e.name}: Patch ${n} not applied`),r=r.replaceAll(n,i);return(0,eval)(`(${r})`)}(e.original,r);let o=function(t){var r,o;const a=null===(o=(r=R.errorReporterHooks).hookChainExit)||void 0===o?void 0:o.call(r,e.name,n),s=i.apply(this,t);return null==a||a(),s};for(let r=t.length-1;r>=0;r--){const n=t[r],i=o;o=function(t){var r,o;const a=null===(o=(r=R.errorReporterHooks).hookEnter)||void 0===o?void 0:o.call(r,e.name,n.mod),s=n.hook.apply(this,[t,e=>{if(1!==arguments.length||!Array.isArray(t))throw new Error(`Mod ${n.mod} failed to call next hook: Expected args to be array, got ${typeof e}`);return i.call(this,e)}]);return null==a||a(),s}}return{hooks:t,patches:r,patchesSources:n,enter:o,final:i}}function c(e,t=!1){let r=a.get(e);if(r)t&&(r.precomputed=u(r));else{let t=window;const o=e.split(".");for(let r=0;r<o.length-1;r++)if(t=t[o[r]],!i(t))throw new Error(`ModSDK: Function ${e} to be patched not found; ${o.slice(0,r+1).join(".")} is not object`);const s=t[o[o.length-1]];if("function"!=typeof s)throw new Error(`ModSDK: Function ${e} to be patched not found`);const l=function(e){let t=-1;for(const r of n.encode(e)){let e=255&(t^r);for(let t=0;t<8;t++)e=1&e?-306674912^e>>>1:e>>>1;t=t>>>8^e}return(~t>>>0).toString(16).padStart(8,"0").toUpperCase()}(s.toString().replaceAll("\r\n","\n")),c={name:e,original:s,originalHash:l};r=Object.assign(Object.assign({},c),{precomputed:u(c),router:()=>{},context:t,contextProperty:o[o.length-1]}),r.router=function(e){return function(...t){return e.precomputed.enter.apply(this,[t])}}(r),a.set(e,r),t[r.contextProperty]=r.router}return r}function d(){for(const e of a.values())e.precomputed=u(e)}function p(){const e=new Map;for(const[t,r]of a)e.set(t,{name:t,original:r.original,originalHash:r.originalHash,sdkEntrypoint:r.router,currentEntrypoint:r.context[r.contextProperty],hookedByMods:o(r.precomputed.hooks.map((e=>e.mod))),patchedByMods:Array.from(r.precomputed.patchesSources)});return e}const h=new Map;function f(e){h.get(e.name)!==e&&r(`Failed to unload mod '${e.name}': Not registered`),h.delete(e.name),e.loaded=!1,d()}function m(e,t){e&&"object"==typeof e||r("Failed to register mod: Expected info object, got "+typeof e),"string"==typeof e.name&&e.name||r("Failed to register mod: Expected name to be non-empty string, got "+typeof e.name);let n=`'${e.name}'`;"string"==typeof e.fullName&&e.fullName||r(`Failed to register mod ${n}: Expected fullName to be non-empty string, got ${typeof e.fullName}`),n=`'${e.fullName} (${e.name})'`,"string"!=typeof e.version&&r(`Failed to register mod ${n}: Expected version to be string, got ${typeof e.version}`),e.repository||(e.repository=void 0),void 0!==e.repository&&"string"!=typeof e.repository&&r(`Failed to register mod ${n}: Expected repository to be undefined or string, got ${typeof e.version}`),null==t&&(t={}),t&&"object"==typeof t||r(`Failed to register mod ${n}: Expected options to be undefined or object, got ${typeof t}`);const o=!0===t.allowReplace,a=h.get(e.name);a&&(a.allowReplace&&o||r(`Refusing to load mod ${n}: it is already loaded and doesn't allow being replaced.\nWas the mod loaded multiple times?`),f(a));const s=e=>{let t=p.patching.get(e.name);return t||(t={hooks:[],patches:new Map},p.patching.set(e.name,t)),t},l=(e,t)=>(...i)=>{var o,a;const s=null===(a=(o=R.errorReporterHooks).apiEndpointEnter)||void 0===a?void 0:a.call(o,e,p.name);p.loaded||r(`Mod ${n} attempted to call SDK function after being unloaded`);const l=t(...i);return null==s||s(),l},u={unload:l("unload",(()=>f(p))),hookFunction:l("hookFunction",((e,t,i)=>{"string"==typeof e&&e||r(`Mod ${n} failed to patch a function: Expected function name string, got ${typeof e}`);const o=c(e),a=s(o);"number"!=typeof t&&r(`Mod ${n} failed to hook function '${e}': Expected priority number, got ${typeof t}`),"function"!=typeof i&&r(`Mod ${n} failed to hook function '${e}': Expected hook function, got ${typeof i}`);const l={mod:p.name,priority:t,hook:i};return a.hooks.push(l),d(),()=>{const e=a.hooks.indexOf(l);e>=0&&(a.hooks.splice(e,1),d())}})),patchFunction:l("patchFunction",((e,t)=>{"string"==typeof e&&e||r(`Mod ${n} failed to patch a function: Expected function name string, got ${typeof e}`);const o=c(e),a=s(o);i(t)||r(`Mod ${n} failed to patch function '${e}': Expected patches object, got ${typeof t}`);for(const[i,o]of Object.entries(t))"string"==typeof o?a.patches.set(i,o):null===o?a.patches.delete(i):r(`Mod ${n} failed to patch function '${e}': Invalid format of patch '${i}'`);d()})),removePatches:l("removePatches",(e=>{"string"==typeof e&&e||r(`Mod ${n} failed to patch a function: Expected function name string, got ${typeof e}`);const t=c(e);s(t).patches.clear(),d()})),callOriginal:l("callOriginal",((e,t,i)=>{"string"==typeof e&&e||r(`Mod ${n} failed to call a function: Expected function name string, got ${typeof e}`);const o=c(e);return Array.isArray(t)||r(`Mod ${n} failed to call a function: Expected args array, got ${typeof t}`),o.original.apply(null!=i?i:globalThis,t)})),getOriginalHash:l("getOriginalHash",(e=>("string"==typeof e&&e||r(`Mod ${n} failed to get hash: Expected function name string, got ${typeof e}`),c(e).originalHash)))},p={name:e.name,fullName:e.fullName,version:e.version,repository:e.repository,allowReplace:o,api:u,loaded:!0,patching:new Map};return h.set(e.name,p),Object.freeze(u)}function g(){const e=[];for(const t of h.values())e.push({name:t.name,fullName:t.fullName,version:t.version,repository:t.repository});return e}let R;const v=void 0===window.bcModSdk?window.bcModSdk=function(){const e={version:t,apiVersion:1,registerMod:m,getModsInfo:g,getPatchingInfo:p,errorReporterHooks:Object.seal({apiEndpointEnter:null,hookEnter:null,hookChainExit:null})};return R=e,Object.freeze(e)}():(i(window.bcModSdk)||r("Failed to init Mod SDK: Name already in use"),1!==window.bcModSdk.apiVersion&&r(`Failed to init Mod SDK: Different version already loaded ('1.2.0' vs '${window.bcModSdk.version}')`),window.bcModSdk.version!==t&&alert(`Mod SDK warning: Loading different but compatible versions ('1.2.0' vs '${window.bcModSdk.version}')\nOne of mods you are using is using an old version of SDK. It will work for now but please inform author to update`),window.bcModSdk);Object.defineProperty(e,"__esModule",{value:!0}),e.default=v}()}(fh);var mh,gh,Rh=n(fh);const vh=Array.isArray,bh=Object.keys,yh=Object.entries,Sh=Object.fromEntries;function wh(e,t){return e.includes(t)}const Ch=Number.isInteger;mh=new WeakSet,gh=function(e,t){const r=new Date(Date.now());console[e]("MBS:",...t),this.push({date:r,level:e,args:t})};const kh=new class extends Array{constructor(){super(...arguments),mh.add(this)}debug(...e){y(this,mh,"m",gh).call(this,"debug",e)}log(...e){y(this,mh,"m",gh).call(this,"log",e)}warn(...e){y(this,mh,"m",gh).call(this,"warn",e)}error(...e){y(this,mh,"m",gh).call(this,"error",e)}toJSON(){return this.map((e=>({date:e.date.toUTCString(),level:e.level,args:e.args.map((e=>e instanceof Map||e instanceof Set?Array.from(e):e))})))}};async function Bh(e,t=100){for(;!e();)await new Promise((e=>setTimeout(e,t)));return!0}var Ph,xh,Mh,Ih;const Eh=Object.freeze(["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]),_h=/^(v?)([0-9]+)\.([0-9]+)\.([0-9]+)(\.\S+)?$/;function Oh(e,t,r=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){if(!(Number.isInteger(e)&&e>=r&&e<=n))throw"number"!=typeof e?new TypeError(`Invalid "${t}" type: ${typeof e}`):Number.isInteger(e)?new RangeError(`"${t}" must fall in the [${r}, ${n}] interval: ${e}`):new Error(`"${t}" must be an integer: ${e}`)}function $h(e,t,r){if(Oh(t,"n",0),!Array.isArray(e))throw new TypeError('Invalid "list" type: '+typeof e);const n=t-e.length;return n>0&&e.push(...Array(n).fill(r)),e}function Fh(e,t){if(Oh(t,"n",0),!Array.isArray(e))throw new TypeError('Invalid "list" type: '+typeof e);const r=e.length-t;return r>0&&e.splice(t,r),e}function Lh(e){return Oh(e,"n",0,8),bd(0,e).map((e=>Id(Eh))).join("")}const Th=Rh.registerMod({name:"MBS",fullName:"Maid's Bondage Scripts",repository:"https://github.com/bananarama92/MBS",version:t});Ph=new WeakMap;const Hh=new class{constructor(){Ph.set(this,null)}get modName(){return"MBS"}getRuleState(e){return null===y(this,Ph,"f")&&"undefined"!=typeof bcx&&S(this,Ph,bcx.getModApi("MBS"),"f"),y(this,Ph,"f")?.getRuleState(e)??null}};function Ah(e,t){let r=`${e}(`;return r+=Object.values(t).map((e=>String(e))).join(", "),r+=")",r}class Nh{get index(){return y(this,Mh,"f")}set index(e){this.setPosition(e)}get value(){return y(this,xh,"f")[y(this,Mh,"f")]}get list(){return y(this,xh,"f")}constructor(e,t=0){if(xh.set(this,void 0),Mh.set(this,void 0),!Gh(e))throw new TypeError('Invalid "iterable" type: '+typeof e);const r=Object.freeze([...e]);if(0===r.length)throw new Error('Passed "iterable" must contain at least one element');Oh(t,"index",0,r.length-1),S(this,xh,r,"f"),S(this,Mh,t,"f")}*[(xh=new WeakMap,Mh=new WeakMap,Symbol.iterator)](){for(;;)yield this.next()}next(e=!0){const t=(y(this,Mh,"f")+1)%y(this,xh,"f").length;return e&&S(this,Mh,t,"f"),y(this,xh,"f")[t]}previous(e=!0){const t=(y(this,Mh,"f")+y(this,xh,"f").length-1)%y(this,xh,"f").length;return e&&S(this,Mh,t,"f"),y(this,xh,"f")[t]}setPosition(e){Oh(e,"index",0,y(this,xh,"f").length-1),S(this,Mh,e,"f")}toString(){return Ah(typeof this,this.toJSON())}toJSON(){return{list:this.list,index:this.index}}}function Dh(e,t){if(Oh(e,"start",0,65535),!vh(t))throw new TypeError('Invalid "indices" type: '+typeof t);const r=e+Math.max(0,...t)+1;Oh(r,"stop",e+1,65535);const n=bd(e,r);return t.map((e=>String.fromCharCode(n[e])))}function Gh(e){return Symbol.iterator in Object(e)}class jh{constructor(e=0,t=0,r=0,n=!1){if(Ih.set(this,void 0),Oh(e,"major",0,65535),Oh(t,"minor",0,65535),Oh(r,"micro",0,65535),"boolean"!=typeof n)throw new TypeError('Invalid "beta" type: '+typeof n);this.major=e,this.minor=t,this.micro=r,this.beta=n,S(this,Ih,[e,t,r].map((e=>String.fromCharCode(e)))+String.fromCharCode(n?0:1),"f"),Object.freeze(this)}equal(e){return e instanceof jh&&this.valueOf()===e.valueOf()}greater(e){return e instanceof jh&&this.valueOf()>e.valueOf()}lesser(e){return e instanceof jh&&this.valueOf()<e.valueOf()}greaterOrEqual(e){return e instanceof jh&&this.valueOf()>=e.valueOf()}lesserOrEqual(e){return e instanceof jh&&this.valueOf()<=e.valueOf()}static fromVersion(e){const t=_h.exec(e);if(null===t)throw new Error(`Invalid "version": ${e}`);return new jh(Number(t[2]),Number(t[3]),Number(t[4]),void 0!==t[5])}static fromBCVersion(e){const t=GameVersionFormat.exec(e);if(null===t)throw new Error(`Invalid BC version: "${e}"`);return new jh(Number(t[1]),0,0,void 0!==t[2])}toString(){return Ah(typeof this,this.toJSON())}valueOf(){return y(this,Ih,"f")}toJSON(){return{major:this.major,minor:this.minor,micro:this.micro,beta:this.beta}}}Ih=new WeakMap;const Wh=Object.freeze(Object.fromEntries([["CraftingSaveServer",["025B434F"]],["CraftingClick",["9169F897"]],["CraftingRun",["51577F65"]],["SpeechTransformProcess",["666DDA2F"]],["SpeechTransformGagGarble",["C056FE08"]],["PreferenceLoad",["8BAC28C8"]],["WheelFortuneLoad",["204D57D4"]],["WheelFortuneClick",["21CCD6B4"]],["WheelFortuneRun",["150059B6"]],["WheelFortuneMouseUp",["1465BDFA"]],["WheelFortuneMouseDown",["306C80B6"]],["WheelFortuneCustomizeLoad",["97F0A81E"]],["WheelFortuneDrawWheel",["A8BF62A5"]]].map((e=>{const[t,r]=e,n=new Set(r.filter((e=>null!=e)));return[t,Object.freeze(n)]}))));function zh(e,t,r){if(lg(t),null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);ExtendedItemSetOptionByRecord(t,e,r,{refresh:!1,push:!1})}function Vh(e,t,r){const n={Asset:e};return ExtendedItemInit(t,n,!1,!1),r&&zh(n,t,r),n.Property??{}}const qh=Object.freeze({NONE:0,CLOTHES:1,UNDERWEAR:2,COSPLAY:3,ALL:4});let Uh;function Kh(e,t){switch(e){case qh.NONE:return()=>!1;case qh.CLOTHES:return e=>e.Group.AllowNone&&!e.BodyCosplay&&!e.Group.Underwear;case qh.UNDERWEAR:return e=>e.Group.AllowNone&&!e.BodyCosplay;case qh.COSPLAY:return e=>!ug(t)?e.Group.AllowNone&&!e.BodyCosplay:e.Group.AllowNone;case qh.ALL:return e=>!!ug(t)||e.Group.AllowNone&&!e.BodyCosplay;default:throw new Error(`Invalid "stripLevel" value: ${e}`)}}function Jh(e,t){if(void 0===t)return[-1,!1];if(void 0!==t.priority&&void 0!==t.blocksSubSet)return[t.priority,t.blocksSubSet];if(0===t.block.size)return t.priority=0,t.blocksSubSet=!1,[t.priority,t.blocksSubSet];{const r=[];for(const n of t.block)r.push(Jh(e,e.get(n)));return t.priority=1+Math.max(0,...r.map((e=>e[0]))),t.blocksSubSet=t.superSet&&r.some((e=>e[1])),[t.priority,t.blocksSubSet]}}function Yh(e,t,r=[]){if(!vh(e))throw new TypeError('Invalid "itemList" type: '+typeof e);const n=new Map;[e,r].forEach(((e,r)=>{for(const{Group:i,Name:o,TypeRecord:a}of e){if(n.has(i))continue;const e=AssetGet(t.AssetFamily,i,o);if(null==e)throw new Error(`Unknown asset: ${i}${o}`);if("Item"!==e.Group.Category)continue;const s=Vh(e,t,a),l={superSet:1===r,block:new Set(...e.Block??[],...s.Block??[])};(e.Effect?.includes("Enclose")||s.Effect?.includes("Enclose"))&&(l.priority=AssetGroup.length,l.blocksSubSet=l.superSet),n.set(i,l)}}));for(const[e,t]of n)Jh(n,t);return n}Bh(dg).then((()=>Uh=CharacterLoadSimple("MBSDummy")));const Zh=new Map;function Xh(e,t){const r=InventoryGetLock(e);if(!InventoryItemHasEffect(e,"Lock"))return!0;if("Decoy"===e.Craft?.Property){if(null==r)return!1;return!["OwnerOnly","LoverOnly","FamilyOnly"].some((t=>r.Asset[t]||e.Asset[t]))}const n=Hh.getRuleState("block_keyuse_self"),i=t.IsPlayer()&&n?.inEffect&&n?.isEnforced;switch(r?.Asset?.Name){case"SafewordPadlock":return!0;case"MetalPadlock":case"MistressPadlock":case"MistressTimerPadlock":case"PandoraPadlock":{if(i||LogQuery("KeyDeposit","Cell"))return!1;let e=Zh.get(`${t.ID}:${r.Asset.Name}`);return void 0===e&&(e=t.Inventory.some((e=>e.Asset.Name===`${r.Asset.Name}Key`)),Zh.set(`${t.ID}:${r.Asset.Name}`,e)),e}case"TimerPasswordPadlock":case"PasswordPadlock":case"CombinationPadlock":return Number(e.Property?.LockMemberNumber)===t.MemberNumber;case"HighSecurityPadlock":{const r=(e?.Property?.MemberNumberListKeys??"").split(",").map(Number);return!i&&wh(r,t.MemberNumber)}default:return!1}}function Qh(e,t,r,n=null,i=null,o=Player){if(!vh(t))throw new TypeError('Invalid "itemList" type: '+typeof t);if(function(e){const t=e.Appearance.find((e=>InventoryItemHasEffect(e,"Enclose")));return null!=t&&!Xh(t,e)}(o))return void kh.log(`Failed to equip all "${e}" wheel of fortune items: cannot unlock enclosing item`);!function(e,t){lg(t);const r=Kh(e,t),n=t.Appearance;for(let e=n.length-1;e>=0;e--){const t=n[e].Asset;t.Group.AllowNone&&"Appearance"===t.Group.Category&&r(t)&&n.splice(e,1)}}(r,o),"function"==typeof i&&(t=i(t,o));const a=function(e,t,r){const n=Yh(e,r,t);return t.filter((e=>n.get(e.Group)?.blocksSubSet))}(t,o.Appearance.map((e=>({Group:e.Asset.Group.Name,Name:e.Asset.Name,TypeRecord:e.Property?.TypeRecord,NoEquip:!0}))),o);Zh.clear();const s={},l=new Set,u=o.IsPlayer()&&LogQuery("ClubSlave","Management");for(const{Name:e,Group:r,Equip:n,NoEquip:i}of[...a,...t]){const t=AssetGet(o.AssetFamily,r,e),a=InventoryGet(o,r),c="function"!=typeof n||n(o);if(null!=t)if(c){const e={InventoryGroupIsBlockedForCharacter:InventoryGroupIsBlockedForCharacter(o,r,!1),InventoryGroupIsBlockedByOwnerRule:InventoryGroupIsBlockedByOwnerRule(o,r),"Locked item equipped":null!=a&&!Xh(a,o)};i||(e.InventoryBlockedOrLimited=InventoryBlockedOrLimited(o,{Asset:t}),e.InventoryChatRoomAllow=!InventoryChatRoomAllow(t.Category??[]),e["Blocked via Club Slave Collar"]=u&&"Appearance"===t.Group.Category);const n=yh(e).filter((e=>e[1]));0!==n.length?s[t.Description]=n.map((e=>e[0])):null!=a&&InventoryRemove(o,r,!1)}else l.add(r);else s[e]=["Unknown asset"]}for(const{Name:e,Group:r,Craft:i,ItemCallback:a,Color:u,TypeRecord:c,Property:d}of t){const t=AssetGet(o.AssetFamily,r,e),p=s[t?.Description??e];if(null==t||void 0!==p||l.has(r))continue;if(!InventoryAllow(o,t,t.Prerequisite,!1)){s[t.Description]=["InventoryAllow"];continue}const h=[...u??t.DefaultColor],f=CharacterAppearanceSetItem(o,r,t,h,SkillGetWithRatio(o,"Bondage"),o.MemberNumber,!1);null!=f&&(c&&zh(f,o,c),void 0!==i&&(f.Craft=xa(i),InventoryCraft(o,o,r,f.Craft,!1,!1)),f.Property=Object.assign(f.Property??{},xa(d)),"function"==typeof a&&a(f,o),"function"==typeof n&&n(f,o))}if(CharacterRefresh(o,!1,!1),o.IsPlayer()){ChatRoomCharacterUpdate(o);const t=Object.values(s).length;0!==t&&kh.log(`Failed to equip ${t} "${e}" wheel of fortune items`,s)}}function ef(e,t,r){if("string"!=typeof t||!DynamicDrawTextRegex.test(t))return!1;const n=`${r.Group.Name}${r.Name}`,[i,o]=yh(TextItemDataLookup).find((([e])=>e.includes(n)))??["",null];return null!==o&&t.length<=(o.maxLength[e]??-1)}const tf=Object.freeze({OverridePriority:(e,t)=>{if(Ch(e))return!0;if(CommonIsObject(e)){const r=t.Layer.map((e=>e.Name));return yh(e).every((([e,t])=>r.includes(e)&&Ch(t)))}return!1},Opacity:(e,t)=>"number"==typeof e&&e<=t.MaxOpacity&&e>=t.MinOpacity,Text:(e,t)=>ef("Text",e,t),Text2:(e,t)=>ef("Text2",e,t),Text3:(e,t)=>ef("Text3",e,t),ShowText:(e,t)=>"boolean"==typeof e,TriggerValues:(e,t)=>"string"==typeof e&&e.split(",").length===ItemVulvaFuturisticVibratorTriggers.length,AccessMode:(e,t)=>"string"==typeof e&&ItemVulvaFuturisticVibratorAccessModes.includes(e),PunishOrgasm:(e,t)=>"boolean"==typeof e,PunishStandup:(e,t)=>"boolean"==typeof e,Texts:(e,t)=>!!Array.isArray(e)&&(!(e.length<ItemDevicesLuckyWheelMinTexts||e.length>ItemDevicesLuckyWheelMaxTexts)&&e.every((e=>"string"==typeof e&&e.length<=ItemDevicesLuckyWheelMaxTextLength))),TargetAngle:(e,t)=>"number"==typeof e&&e>=0&&e<=360,OverrideHeight:function(e,t){const r=VariableHeightDataLookup[`${t.Group.Name}${t.Name}`];if(void 0===r)return!1;const n=e;return null!==n&&"object"==typeof n&&Number.isInteger(n.Priority)&&"number"==typeof n.Height&&n.Height<=r.maxHeight&&n.Height>=r.minHeight&&(null==n.HeightRatioProportion||"number"==typeof n.HeightRatioProportion&&n.HeightRatioProportion>=0&&n.HeightRatioProportion<=1)},PunishStruggle:(e,t)=>"boolean"==typeof e,PunishStruggleOther:(e,t)=>"boolean"==typeof e,PunishRequiredSpeechWord:(e,t)=>"string"==typeof e&&e.length<=70,PunishProhibitedSpeechWords:(e,t)=>"string"==typeof e&&e.length<=70,PunishSpeech:(e,t)=>Ch(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PunishRequiredSpeech:(e,t)=>Ch(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PunishProhibitedSpeech:(e,t)=>Ch(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PublicModeCurrent:(e,t)=>Ch(e)&&e>=0&&e<FuturisticTrainingBeltModes.length,PublicModePermission:(e,t)=>Ch(e)&&e>=0&&e<FuturisticTrainingBeltPermissions.length,ShockLevel:(e,t)=>Ch(e)&&e>=0&&e<=2,PortalLinkCode:(e,t)=>"string"==typeof e&&PortalLinkCodeRegex.test(e)});function rf(e,t){if(null===t||"object"!=typeof t)return{};const r=new Set(["OverridePriority"]);if(e.Archetype){const n=ExtendedItemGatherOptions({Asset:e,Property:t});for(const e of n){"VariableHeightOption"===e.OptionType&&r.add("OverrideHeight");for(const t of bh(e.ParentData.baselineProperty??{}))CraftingPropertyExclude.has(t)||r.add(t)}}const n={};for(const[i,o]of yh(t)){const t=tf[i];null!=o&&r.has(i)&&void 0!==t&&(t(o,e)&&(n[i]=o))}return n}const nf=Object.freeze(new Map([["Unknown asset",e=>null==e],["Unsupported owner-only asset",e=>e?.OwnerOnly],["Unsupported lovers-only asset",e=>e?.LoverOnly],["Unsupported D/S family-only asset",e=>e?.FamilyOnly],["Unsupported disabled asset",e=>!e?.Enable],["Unsupported script-asset",e=>"Script"===e?.Group?.Category]]));function of(e,t,r=!0){for(const[r,n]of nf)if(n(e))throw new Error(`${r}: ${t.Group}${t.Name}`);let n,i;"string"==typeof t.Color?n=[t.Color]:Array.isArray(t.Color)&&t.Color.every((e=>"string"==typeof e))&&(n=[...t.Color]),null!==t.Craft&&"object"==typeof t.Craft&&(i=Object.assign(xa(t.Craft),{TypeRecord:void 0,OverridePriority:null,Lock:""}),CraftingValidate(i,e,!1));const o=t.Property??{};let a;return CommonIsObject(o.TypeRecord)?a=Object.freeze({...o.TypeRecord}):"string"==typeof o.Type||null===o.Type?a=ExtendedItemTypeToRecord(e,o.Type):"string"==typeof o.Mode&&(a=ExtendedItemTypeToRecord(e,o.Mode)),Object.freeze({Name:t.Name,Group:t.Group,Custom:r,Property:Object.freeze(rf(e,t.Property)),TypeRecord:a,Color:n,Craft:Object.freeze(i),ItemCallback:void 0,Equip:void 0})}function af(e,t){if(!vh(e))throw new TypeError('Invalid "items" type: '+typeof e);return e.map((e=>function(e,t){const{Group:r,Name:n,Color:i,Craft:o,TypeRecord:a,Property:s}=e,l=AssetGet(t.AssetFamily,r,n);if(null==l)throw new Error(`Unknown asset: ${r}${n}`);return{Group:r,Name:n,Color:ka(i),Craft:ka(o),Property:Object.assign(Vh(l,t,a),xa(s))}}(e,t)))}var sf;class lf{get screen(){return this.constructor.screen}get ids(){return this.constructor.ids}get rootParams(){return this.screenParams[this.constructor.ids.root]}constructor(e,t,r){this.parent=e,this.screenParams=rc(xa(t),r??{}),this.child=null}resize(e){const t=MainCanvas.canvas.clientHeight/1e3,r=MainCanvas.canvas.clientWidth/2e3;for(const[n,{shape:i,visibility:o}]of yh(this.screenParams)){const a={left:`${MainCanvas.canvas.offsetLeft+i[0]*r}px`,top:`${MainCanvas.canvas.offsetTop+i[1]*t}px`,width:`${i[2]*r}px`,height:`${i[3]*t}px`};e&&(a.fontFamily=CommonGetFontName(),a.visibility=o);const s=document.getElementById(n);Object.assign(s.style,a)}}unload(){for(const e of bh(this.screenParams)){const t=document.getElementById(e);null!==t&&(t.style.visibility="hidden")}}exit(){for(const e of bh(this.screenParams))ElementRemove(e)}load(){const e=CurrentScreen;CurrentScreenFunctions?.Unload?.(),ControllerIsActive()&&ControllerClearAreas(),CurrentScreen=this.screen,CurrentScreenFunctions=this.getFunctions(),CurrentDarkFactor=1,CommonGetFont.clearCache(),CommonGetFontName.clearCache(),CurrentScreenFunctions?.Resize?.(!0),"ChatSearch"!=e&&"ChatCreate"!=e||ChatRoomStimulationMessage("Walk")}loadChild(e,...t){return this.child&&this.child.exit(),this.child=new e(this,...t),this.child.load(),this.child}exitScreens(e){let t=this.parent,r=this.child;for(;null!=r?.child;)r=r.child;for(;r&&r!==this;)r.child=null,r.exit(),r=r.parent;if(e)for(;null!==t&&!(t instanceof uf);)t.child=null,t.exit(),t=t.parent;null!==t&&(t.load(),t.child=null)}getFunctions(){return{Run:this.run?.bind(this)??CommonNoop,Draw:this.draw?.bind(this),Click:this.click?.bind(this)??CommonNoop,Load:this.load.bind(this),Unload:this.unload?.bind(this),Resize:this.resize?.bind(this),Exit:this.exit.bind(this)}}}lf.background="Sheet",lf.screen="",lf.screenParamsDefault={};class uf extends lf{constructor(e,t,r,n){super(e,uf.screenParamsDefault,null),this.module=t,this.background=r,this.screenFunctions=Object.freeze({...n})}run(e){return this.screenFunctions.Run(e)}draw(){return this.screenFunctions.Draw?.()}click(e){return this.screenFunctions.Click(e)}load(){return this.screenFunctions.Load?.()}unload(){return this.screenFunctions.Unload?.()}resize(e){return this.screenFunctions.Resize?.(e)}keyDown(e){return this.screenFunctions.KeyDown?.(e)??!1}exit(){return this.screenFunctions.Exit?.()}}uf.screenParamsDefault={};const cf=Object.freeze({NONE:0,SAVE:1,DELETE:2});class df extends lf{get index(){return y(this,sf,"f")}set index(e){Oh(e,"index",0,this.mbsList.length-1),S(this,sf,e,"f")}get mbsObject(){return this.mbsList[y(this,sf,"f")]}hasStorageSpace(){return null!==this.mbsList[this.index]||this.dataSize.value<=this.dataSize.max*this.dataSize.marigin}constructor(e,t,r,n,i,o){super(e,i,o),sf.set(this,0),this.character=n,this.mbsList=t,this.index=r,this.dataSize=Object.seal({value:0,valueRecord:{},max:Im,marigin:.9})}load(){const e=Em(this.character.OnlineSharedSettings);this.dataSize.value=Kd(Object.values(e),(e=>Number.isNaN(e)?0:e)),this.dataSize.valueRecord=e,super.load()}exit(e=!0,t=cf.NONE){if(super.exit(),!this.character.IsPlayer())return this.exitScreens(e);switch(t){case cf.NONE:break;case cf.SAVE:this.settings.isValid(this.index)&&this.hasStorageSpace()&&(this.mbsList[this.index]=this.settings.writeSettings(),this.mbsList[this.index]?.register());break;case cf.DELETE:{const e=this.mbsList[this.index];this.mbsList[this.index]=null,e?.unregister();break}default:throw new Error(`Unsupported action: ${t}`)}this.exitScreens(e)}}sf=new WeakMap;var pf,hf,ff,mf,gf;const Rf=Object.freeze({[qh.NONE]:"None",[qh.CLOTHES]:"Clothes",[qh.UNDERWEAR]:"Clothes and underwear",[qh.COSPLAY]:"Clothes, underwear and cosplay items",[qh.ALL]:"Clothes, underwear, cosplay items and body"});function vf(e){e=Number.isNaN(e)?60:no(e,60,14400);const t={h:0,m:0,s:0};return t.h=Math.floor(e/3600),e-=3600*t.h,t.m=Math.floor(e/60),e-=60*t.m,t.s=e,`${t.h.toString().padStart(2,"0")}:${t.m.toString().padStart(2,"0")}:${t.s.toString().padStart(2,"0")}`}function bf(e,t,r){return h("div",{id:e.inputID,class:"mbs-dropdown",onWheel:r=>{const n=document.getElementById(e.buttonID);if(n.disabled)return;let i;if(r.deltaY<0)i=no(t[e.level]-1,qh.NONE,qh.COSPLAY);else{if(!(r.deltaY>0))return;i=no(t[e.level]+1,qh.NONE,qh.COSPLAY)}t[e.level]=i,n.innerText=Rf[t[e.level]]},children:[p("button",{class:"mbs-button",disabled:r,id:e.buttonID,children:Rf[qh.UNDERWEAR]}),h("div",{class:"mbs-dropdown-content",id:e.dropdownID,children:[" ",Object.values(Rf).slice(0,4).map(((n,i)=>p("button",{class:"mbs-button mbs-dropdown-button",disabled:r,"data-level":i,id:e.optionID+i.toString(),onClick:r=>{const n=r.target;t[e.level]=no(Number.parseInt(n.dataset.level),qh.NONE,qh.COSPLAY);document.getElementById(e.buttonID).innerText=Rf[t[e.level]]},children:n})))," "]})]})}const yf="mbs-fwitemset",Sf=Object.freeze({root:yf,styles:`${yf}-style`,delete:`${yf}-delete`,deleteButton:`${yf}-delete-button`,deleteTooltip:`${yf}-delete-tooltip`,accept:`${yf}-accept`,acceptButton:`${yf}-accept-button`,acceptTooltip:`${yf}-accept-tooltip`,cancel:`${yf}-cancel`,cancelButton:`${yf}-cancel-button`,cancelTooltip:`${yf}-cancel-tooltip`,exit:`${yf}-exit`,exitButton:`${yf}-exit-button`,exitTooltip:`${yf}-exit-tooltip`,header:`${yf}-header`,midDiv:`${yf}-mid-grid`,botDiv:`${yf}-bot-grid`,outfitName:`${yf}-outfit-name`,outfitInput:`${yf}-outfit-input`,outfitDiv:`${yf}-outfit-div`,outfitButton:`${yf}-outfit-button`,outfitTooltip:`${yf}-outfit-tooltip`,stripHeader:`${yf}-strip-header`,stripInput:`${yf}-strip-dropdown`,stripButton:`${yf}-strip-dropdown-button`,stripDropdown:`${yf}-strip-dropdown-content`,stripOption:`${yf}-strip-dropdown-option`,equipHeader:`${yf}-equip-header`,equipInput:`${yf}-equip-dropdown`,equipButton:`${yf}-equip-dropdown-button`,equipDropdown:`${yf}-equip-dropdown-content`,equipOption:`${yf}-equip-dropdown-option`,weightHeader:`${yf}-weight-header`,weightInput:`${yf}-weight-input`,lockHeader:`${yf}-lock-header`,lockGrid:`${yf}-lock-grid`,lockContainer:`${yf}-lock-container`,lockCheckbox:`${yf}-lock-checkbox`,lockTimer:`${yf}-lock-timer`});class wf extends df{constructor(e,t,r,n,i=null){const o=!n.IsPlayer();super(e,t,r,n,wf.screenParamsDefault,i),pf.add(this),this.settings=new gg(t),this.preview=CharacterLoadSimple("MBSFortuneWheelPreview"),document.body.appendChild(h("div",{id:Sf.root,class:"mbs-screen",children:[p("style",{id:Sf.styles,children:'#mbs-fwitemset {\n  grid-template: "delete header header header accept cancel exit" min(9dvh, 4.5dvw) ". . name-input name-input . . ." min(7dvh, 3.5dvw) ". . outfit-input outfit-input outfit-button outfit-button outfit-button" min(7dvh, 3.5dvw) ". . strip-header lock-header lock-header lock-header lock-header" min(7dvh, 3.5dvw) ". . strip-input lock-grid lock-grid lock-grid lock-grid" min(7dvh, 3.5dvw) ". . equip-header lock-grid lock-grid lock-grid lock-grid" min(7dvh, 3.5dvw) ". . equip-input lock-grid lock-grid lock-grid lock-grid" min(7dvh, 3.5dvw) ". . weight-header lock-grid lock-grid lock-grid lock-grid" min(7dvh, 3.5dvw) ". . weight-input lock-grid lock-grid lock-grid lock-grid" min(7dvh, 3.5dvw)/min(9dvh, 4.5dvw) min(40dvh, 20dvw) auto min(38dvh, 19dvw) min(16dvh, 8dvw) min(9dvh, 4.5dvw) min(9dvh, 4.5dvw);\n}\n#mbs-fwitemset span {\n  place-self: end start;\n}\n\n#mbs-fwitemset-delete {\n  grid-area: delete;\n}\n\n#mbs-fwitemset-header {\n  grid-area: header;\n  margin-left: min(20dvh, 10dvw);\n}\n\n#mbs-fwitemset-accept {\n  grid-area: accept;\n  justify-self: end;\n}\n\n#mbs-fwitemset-cancel {\n  grid-area: cancel;\n}\n\n#mbs-fwitemset-exit {\n  grid-area: exit;\n}\n\n#mbs-fwitemset-outfit-name {\n  grid-area: name-input;\n}\n\n#mbs-fwitemset-outfit-input {\n  grid-area: outfit-input;\n}\n\n#mbs-fwitemset-outfit-div {\n  grid-area: outfit-button;\n  grid-template-columns: auto;\n  grid-template-rows: min(7dvh, 3.5dvw) auto;\n}\n\n#mbs-fwitemset-strip-header {\n  grid-area: strip-header;\n}\n\n#mbs-fwitemset-strip-dropdown {\n  grid-area: strip-input;\n  width: min(40dvh, 20dvw);\n}\n\n#mbs-fwitemset-equip-header {\n  grid-area: equip-header;\n}\n\n#mbs-fwitemset-equip-dropdown {\n  grid-area: equip-input;\n  width: min(40dvh, 20dvw);\n}\n\n#mbs-fwitemset-weight-header {\n  grid-area: weight-header;\n}\n\n#mbs-fwitemset-weight-input {\n  align-self: start;\n  grid-area: weight-input;\n  height: 100%;\n  width: calc(min(7dvh, 3.5dvw) + 16px);\n}\n\n#mbs-fwitemset-lock-header {\n  grid-area: lock-header;\n}\n\n#mbs-fwitemset-lock-grid {\n  align-self: start;\n  display: grid;\n  gap: min(2dvh, 1dvw);\n  grid-area: lock-grid;\n  grid-template-columns: min(38dvh, 19dvw) min(38dvh, 19dvw);\n  overflow-y: scroll;\n}\n\n.mbs-fwitemset-lock-container {\n  align-items: center;\n  display: grid;\n  word-wrap: break-word;\n  gap: min(2dvh, 1dvw);\n  grid-template-columns: min(7dvh, 3.5dvw) auto;\n}\n\n.mbs-timer {\n  height: 100%;\n  text-align: center;\n  width: 100%;\n}\n\n#mbs-fwitemset-strip-dropdown-content, #mbs-fwitemset-equip-dropdown-content {\n  width: min-content;\n}'.toString()}),p("h1",{id:Sf.header,children:`Customize wheel of fortune item set ${this.index}`}),h("div",{id:Sf.delete,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:Sf.deleteButton,style:{backgroundImage:"url('./Icons/Trash.png')"},onClick:()=>this.exit(!1,cf.DELETE),disabled:o}),p("div",{class:"mbs-button-tooltip",id:Sf.deleteTooltip,style:{justifySelf:"left"},children:"Delete item set"})]}),h("div",{id:Sf.accept,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:Sf.acceptButton,style:{backgroundImage:"url('./Icons/Accept.png')"},onClick:()=>this.exit(!1,cf.SAVE),disabled:!0}),p("div",{class:"mbs-button-tooltip",id:Sf.acceptTooltip,style:{justifySelf:"right"},children:"Save item set:\\nMissing outfit"})]}),h("div",{id:Sf.cancel,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:Sf.cancelButton,style:{backgroundImage:"url('./Icons/Cancel.png')"},onClick:()=>this.exit(!1,cf.NONE)}),p("div",{class:"mbs-button-tooltip",id:Sf.cancelTooltip,style:{justifySelf:"right"},children:"Cancel"})]}),h("div",{id:Sf.exit,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:Sf.exitButton,style:{backgroundImage:"url('./Icons/Exit.png')"},onClick:()=>this.exit(!0,cf.NONE)}),p("div",{class:"mbs-button-tooltip",id:Sf.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),p("input",{type:"text",id:Sf.outfitName,placeholder:"Name",disabled:o,maxLength:70,onInput:e=>{this.settings.name=e.target.value,y(this,pf,"m",ff).call(this,Sf.acceptButton)},onFocus:e=>e.target.select()}),p("input",{type:"text",id:Sf.outfitInput,placeholder:"Outfit code",disabled:o,onInput:e=>{this.settings.outfitCache=e.target.value,y(this,pf,"m",ff).call(this,Sf.outfitButton)},onFocus:e=>e.target.select()}),h("div",{id:Sf.outfitDiv,class:"mbs-button-div",children:[p("button",{class:"mbs-button",disabled:!0,id:Sf.outfitButton,onClick:()=>y(this,pf,"m",ff).call(this,Sf.acceptButton,!0),children:"Parse"}),p("div",{class:"mbs-button-tooltip",id:Sf.outfitTooltip,children:"Parse the outfit code"})]}),p("span",{id:Sf.stripHeader,children:"Clothing strip level:"}),p("span",{id:Sf.equipHeader,children:"Clothing equip level:"}),p("span",{id:Sf.weightHeader,children:"Wheel option weight:"}),p("span",{id:Sf.lockHeader,children:"Enabled lock types:"}),p("input",{type:"number",id:Sf.weightInput,min:1,max:9,value:1,disabled:o,onInput:e=>{const t=e.target;this.settings.weight=no(Number.parseInt(t.value,10),1,9)},onWheel:e=>{const t=e.target;if(!t.disabled){if(e.deltaY<0)t.stepUp(1);else{if(!(e.deltaY>0))return;t.stepDown(1)}this.settings.weight=no(Number.parseInt(t.value,10),1,9)}},onFocus:e=>e.target.select()}),bf({inputID:Sf.stripInput,buttonID:Sf.stripButton,optionID:Sf.stripOption,dropdownID:Sf.stripDropdown,level:"stripLevel"},this.settings,o),bf({inputID:Sf.equipInput,buttonID:Sf.equipButton,optionID:Sf.equipOption,dropdownID:Sf.equipDropdown,level:"equipLevel"},this.settings,o),h("div",{id:Sf.lockGrid,children:[" ",this.settings.flags.map(((e,t)=>{let r;if("TimerPasswordPadlock"===e.type)r=function(e,t,r){return p("input",{type:"text",class:"mbs-timer",id:Sf.lockTimer+t.toString(),disabled:r,value:vf(e.time),pattern:/([0]?[0-4]:)?([0-6]?[0-9]:)?([0-6]?[0-9])?/.source,maxLength:8,onInput:t=>{const r=t.target,[n,i]=[r.selectionStart,r.selectionEnd],o=r.value;if(r.value=o.replace(/[^0-9:]/g,""),r.value!==o&&(null!==n||null!==i)){const e=/[^0-9:]/g,t=Array.from(o).map(((t,r)=>e.test(t)?r:-1)).filter((e=>-1!==e));null!==n&&(r.selectionStart=t.reduce(((e,t)=>e+(n>=t?-1:0)),n)),null!==i&&(r.selectionEnd=t.reduce(((e,t)=>e+(i>=t?-1:0)),i))}const[a,s,l]=r.value.split(":").slice(-3).map((e=>Number.parseInt(e,10)||0)),u=3600*a+60*s+l;e.time=no(u,60,14400)},onBlur:t=>{const r=t.target;if(r.disabled)return;const[n,i,o]=r.value.split(":").slice(-3).map((e=>Number.parseInt(e,10)||0)),a=3600*n+60*i+o;r.value=vf(a),e.time=no(a,60,14400)},onFocus:e=>{const t=e.target,r=t.selectionStart;null!==r&&(r<=2?(t.selectionStart=0,t.selectionEnd=2):r<=5?(t.selectionStart=3,t.selectionEnd=5):r<=8&&(t.selectionStart=6,t.selectionEnd=8))},onWheel:t=>{const r=t.target;if(r.disabled)return;const n=r.value.replace(/[^0-9:]/g,""),[i,o,a]=n.split(":").slice(-3).map((e=>Number.parseInt(e,10)||0));let s=3600*i+60*o+a;if(t.deltaY<0)s+=120;else{if(!(t.deltaY>0))return;s-=120}r.value=vf(s),e.time=no(s,60,14400)}})}(e,t,o);else r=e.description;return h("div",{class:Sf.lockContainer,id:Sf.lockContainer+t.toString(),children:[p("input",{type:"checkbox",class:Sf.lockCheckbox,id:Sf.lockCheckbox+t.toString(),disabled:o,checked:e.enabled,onClick:()=>{e.enabled=!e.enabled,y(this,pf,"m",ff).call(this,Sf.acceptButton)}}),r]})}))," "]})]}))}load(){super.load();const e=this.mbsObject;if(null!==e){this.settings.readSettings(e),this.settings.outfitCache=LZString.compressToBase64(JSON.stringify(af(e.itemList,this.preview))),ElementValue(Sf.outfitName,e.name),ElementValue(Sf.weightInput,e.weight.toString()),ElementValue(Sf.outfitInput,this.settings.outfitCache);for(const[e,t]of this.settings.flags.entries()){if(document.getElementById(`${Sf.lockCheckbox}${e}`).checked=t.enabled,"TimerPasswordPadlock"===t.type)ElementValue(`${Sf.lockTimer}${e}`,vf(t.time))}const t=document.getElementById(Sf.equipButton),r=document.getElementById(Sf.stripButton);t.innerText=Rf[this.settings.equipLevel],r.innerText=Rf[this.settings.stripLevel],y(this,pf,"m",ff).call(this,Sf.acceptButton,!0),y(this,pf,"m",ff).call(this,Sf.outfitButton)}else this.settings.reset(),y(this,pf,"m",ff).call(this,Sf.acceptButton),y(this,pf,"m",ff).call(this,Sf.outfitButton);y(this,pf,"m",gf).call(this)}draw(){DrawCharacter(this.preview,200,175,.78,!1)}exit(e,t){CharacterDelete(this.preview),super.exit(e,t)}}pf=new WeakSet,hf=function(){return this.settings.isValid(this.index)&&this.hasStorageSpace()},ff=function(e,t=!1){const r=document.getElementById(e),n=!this.character.IsPlayer();switch(e){case Sf.acceptButton:if(t){const e=this.settings.loadFromBase64();r.disabled=n||!(e&&y(this,pf,"m",hf).call(this)),!n&&e&&y(this,pf,"m",gf).call(this)}else r.disabled=n||!(null!==this.settings.itemList&&y(this,pf,"m",hf).call(this));y(this,pf,"m",mf).call(this,Sf.acceptTooltip);break;case Sf.outfitButton:r.disabled=n||!this.settings.outfitCache,y(this,pf,"m",mf).call(this,Sf.outfitTooltip);break;default:throw new Error(`Unsupported tooltip type: ${e}`)}},mf=function(e){const t=document.getElementById(e);switch(e){case Sf.acceptTooltip:{const e="Save item set";this.settings.loadFromBase64()?y(this,pf,"m",hf).call(this)?t.innerText=e:this.settings.name?this.settings.flags.every((e=>!e.enabled))?t.innerText=`${e}:\nMust enable at least one lock type`:this.hasStorageSpace()?t.innerText=`${e}:\nMax allowed OnlineSharedSettings storage size exceeded (${_m(this.dataSize.value)} / ${_m(this.dataSize.max)}`:t.innerText=`${e}:\nDuplicate name`:t.innerText=`${e}:\nMissing name`:t.innerText=`${e}:\nMissing outfit`;break}case Sf.outfitTooltip:{const e="Parse outfit code";this.settings.outfitCache?t.innerText=e:t.innerText=`${e}:\nMissing code`;break}default:throw new Error(`Unsupported tooltip type: ${e}`)}},gf=function(){if(this.preview.Appearance=[...this.character.Appearance],this.preview.OnlineSharedSettings=this.character.OnlineSharedSettings,CharacterReleaseTotal(this.preview),null===this.settings.itemList)return;const e=Kh(this.settings.equipLevel,this.preview),t=this.preview.AssetFamily;Qh("MBSPreview",this.settings.itemList.filter((({Name:r,Group:n})=>{const i=AssetGet(t,n,r);return null!=i&&("Appearance"!==i.Group.Category||e(i))})),this.settings.stripLevel,null,null,this.preview)},wf.ids=Sf,wf.screen="MBS_FWItemSetScreen",wf.background="Sheet",wf.screenParamsDefault={[yf]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};const Cf="mbs-fwcommand",kf=Object.freeze({root:Cf,styles:`${Cf}-style`,delete:`${Cf}-delete`,deleteButton:`${Cf}-delete-button`,deleteTooltip:`${Cf}-delete-tooltip`,accept:`${Cf}-accept`,acceptButton:`${Cf}-accept-button`,acceptTooltip:`${Cf}-accept-tooltip`,cancel:`${Cf}-cancel`,cancelButton:`${Cf}-cancel-button`,cancelTooltip:`${Cf}-cancel-tooltip`,exit:`${Cf}-exit`,exitButton:`${Cf}-exit-button`,exitTooltip:`${Cf}-exit-tooltip`,header:`${Cf}-header`,commandInput:`${Cf}-command-input`,weightHeader:`${Cf}-weight-header`,weightInput:`${Cf}-weight-input`});class Bf extends df{constructor(e,t,r,n,i=null){super(e,t,r,n,Bf.screenParamsDefault,i),this.settings=new Rg(t);const o=!n.IsPlayer();document.body.appendChild(h("div",{id:kf.root,class:"mbs-screen",children:[p("style",{id:kf.styles,children:'#mbs-fwcommand {\n  grid-template: "delete header accept cancel exit" min(9dvh, 4.5dvw) "commandInput commandInput commandInput commandInput commandInput" min(7dvh, 3.5dvw) "weightHeader weightHeader weightHeader weightHeader weightHeader" min(7dvh, 3.5dvw) "weightInput weightInput weightInput weightInput weightInput" min(7dvh, 3.5dvw)/min(9dvh, 4.5dvw) auto min(9dvh, 4.5dvw) min(9dvh, 4.5dvw) min(9dvh, 4.5dvw);\n}\n\n#mbs-fwcommand-delete {\n  grid-area: delete;\n}\n\n#mbs-fwcommand-header {\n  grid-area: header;\n  margin-left: min(20dvh, 10dvw);\n}\n\n#mbs-fwcommand-accept {\n  grid-area: accept;\n}\n\n#mbs-fwcommand-cancel {\n  grid-area: cancel;\n}\n\n#mbs-fwcommand-exit {\n  grid-area: exit;\n}\n\n#mbs-fwcommand-command-input {\n  grid-area: commandInput;\n  height: min(7dvh, 3.5dvw);\n  place-self: self-end center;\n  width: 50%;\n}\n\n#mbs-fwcommand-weight-header {\n  align-self: self-end;\n  grid-area: weightHeader;\n}\n\n#mbs-fwcommand-weight-input {\n  grid-area: weightInput;\n  height: 100%;\n  place-self: start center;\n  width: calc(min(7dvh, 3.5dvw) + 16px);\n}'.toString()}),p("h1",{id:kf.header,children:`Customize wheel of fortune command ${this.index}`}),h("div",{id:kf.delete,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:kf.deleteButton,style:{backgroundImage:"url('./Icons/Trash.png')"},onClick:()=>this.exit(!1,cf.DELETE),disabled:o}),p("div",{class:"mbs-button-tooltip",id:kf.deleteTooltip,style:{justifySelf:"left"},children:"Delete command"})]}),h("div",{id:kf.accept,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:kf.acceptButton,style:{backgroundImage:"url('./Icons/Accept.png')"},onClick:()=>this.exit(!1,cf.SAVE),disabled:!0}),p("div",{class:"mbs-button-tooltip",id:kf.acceptTooltip,style:{justifySelf:"right"},children:"Save command"})]}),h("div",{id:kf.cancel,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:kf.cancelButton,style:{backgroundImage:"url('./Icons/Cancel.png')"},onClick:()=>this.exit(!1,cf.NONE)}),p("div",{class:"mbs-button-tooltip",id:kf.cancelTooltip,style:{justifySelf:"right"},children:"Cancel"})]}),h("div",{id:kf.exit,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:kf.exitButton,style:{backgroundImage:"url('./Icons/Exit.png')"},onClick:()=>this.exit(!0,cf.NONE)}),p("div",{class:"mbs-button-tooltip",id:kf.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),p("input",{type:"text",id:kf.commandInput,placeholder:"Role play command",disabled:o,maxLength:70,onInput:e=>{this.settings.name=e.target.value;document.getElementById(kf.acceptButton).disabled=0===this.settings.name.length},onFocus:e=>e.target.select()}),p("div",{id:kf.weightHeader,children:"Wheel option weight:"}),p("input",{type:"number",id:kf.weightInput,min:1,max:9,value:1,disabled:o,onInput:e=>{const t=e.target;this.settings.weight=no(Number.parseInt(t.value,10),1,9)},onWheel:e=>{const t=e.target;if(!t.disabled){if(e.deltaY<0)t.stepUp(1);else{if(!(e.deltaY>0))return;t.stepDown(1)}this.settings.weight=no(Number.parseInt(t.value,10),1,9)}},onFocus:e=>e.target.select()})]}))}load(){if(super.load(),null!==this.mbsObject){this.settings.readSettings(this.mbsObject),ElementValue(kf.commandInput,this.mbsObject.name),ElementValue(kf.weightInput,this.mbsObject.weight.toString());document.getElementById(kf.acceptButton).disabled=this.character.IsPlayer()}else this.settings.reset()}}Bf.screen="MBS_FWCommandScreen",Bf.background="Sheet",Bf.screenParamsDefault={[Cf]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};var Pf,xf;function Mf(e,t,r){const n=Tm(e.OnlineSharedSettings?.MBS,"OnlineSharedSettings",!1);let i,o=void 0===n?void 0:n[t];if(Array.isArray(o)||(void 0!==o&&kh.warn(`Failed to load "${e.AccountName}" wheel of fortune ${r}`),o=Array(og).fill(null)),e.IsPlayer())i=Player.MBSSettings[t];else{const e=[];i=Fm("FortuneWheelItemSets"===t?yg.fromObject:Sg.fromObject,o,e),e.forEach((e=>console.warn(e)))}return i.forEach((e=>e?.register(!1))),i}function If(e,t){return p("button",{class:"mbs-button",id:_f.button+t.toString(),style:{height:"min(7vh, 3.5vw)"},onClick:()=>{const r={[wf.ids.root]:{shape:e.rootParams.shape}};return t<og?e.loadChild(wf,e.wheelStruct.FortuneWheelItemSets,t,e.character,r):e.loadChild(Bf,e.wheelStruct.FortuneWheelCommands,t-og,e.character,r)}})}const Ef="mbs-fwselect",_f=Object.freeze({root:Ef,styles:`${Ef}-style`,exit:`${Ef}-exit`,exitButton:`${Ef}-exit-button`,exitTooltip:`${Ef}-exit-tooltip`,storage:`${Ef}-storage`,storageInner:`${Ef}-storage-cover`,storageTooltip:`${Ef}-storage-tooltip`,storageFooter:`${Ef}-storage-footer`,buttonOuterGrid:`${Ef}-button-grid-outer`,buttonInnerGrid0:`${Ef}-button-grid-inner0`,buttonInnerGrid1:`${Ef}-button-grid-inner1`,button:`${Ef}-button`,itemSets:`${Ef}-header0`,commandSets:`${Ef}-header1`});class Of extends lf{get wheelList(){return[...this.wheelStruct.FortuneWheelItemSets,...this.wheelStruct.FortuneWheelCommands]}constructor(e,t,r,n=null){super(e,Of.screenParamsDefault,n),Pf.add(this),this.wheelStruct=t,this.character=r,this.dataSize=Object.seal({value:0,valueRecord:{},max:Im,marigin:.9});const i=this.character.IsPlayer();document.body.appendChild(h("div",{id:_f.root,class:"mbs-screen",children:[p("style",{id:_f.styles,children:'#mbs-fwselect {\n  grid-template: ". buttonOuterGrid exit" min(9dvh, 4.5dvw) "storage buttonOuterGrid ." auto "storageFooter buttonOuterGrid ." min(14dvh, 7dvw)/min(30dvh, 15dvw) auto min(20dvh, 10dvw);\n}\n\n#mbs-fwselect-exit {\n  grid-area: exit;\n  height: min(9dvh, 4.5dvw);\n  justify-self: end;\n  width: min(9dvh, 4.5dvw);\n}\n\n#mbs-fwselect-storage {\n  background-image: linear-gradient(180deg, #d80000, #d80000 10%, #00d800 60%, #00d800) !important;\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  display: grid;\n  grid-area: storage;\n  height: 100%;\n  justify-self: center;\n  width: 35%;\n}\n#mbs-fwselect-storage #mbs-fwselect-storage-tooltip {\n  bottom: unset;\n  left: 15%;\n  position: absolute;\n  visibility: hidden;\n}\n#mbs-fwselect-storage:hover #mbs-fwselect-storage-tooltip {\n  visibility: visible;\n}\n\n#mbs-fwselect-storage-cover {\n  width: 100%;\n}\n\n#mbs-fwselect-storage-footer {\n  grid-area: storageFooter;\n  height: min(7dvh, 3.5dvw);\n  padding-top: min(1dvh, 0.5dvw);\n}\n\n#mbs-fwselect-button-grid-outer {\n  display: grid;\n  grid-area: buttonOuterGrid;\n  grid-template-rows: min(9dvh, 4.5dvw) auto min(9dvh, 4.5dvw) auto;\n  height: 94%;\n  overflow-y: scroll;\n  padding-left: min(2dvh, 1dvw);\n  padding-right: min(2dvh, 1dvw);\n}\n\n#mbs-fwselect-button-grid-inner0, #mbs-fwselect-button-grid-inner1 {\n  display: grid;\n  grid-template-columns: minmax(0, 4fr) minmax(0, 4fr);\n  grid-gap: min(2dvh, 1dvw);\n  padding-bottom: min(2dvh, 1dvw);\n  padding-top: min(2dvh, 1dvw);\n}\n\n#mbs-fwselect-header0, #mbs-fwselect-header1 {\n  background-color: var(--mbs-background-color);\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  position: sticky;\n  top: 0%;\n}'.toString()}),h("div",{id:_f.buttonOuterGrid,children:[p("h1",{id:_f.itemSets,"z-index":1,children:i?"Fortune wheel item sets":`${this.character.Nickname??this.character.Name}'s fortune wheel item sets`}),p("div",{id:_f.buttonInnerGrid0,children:bd(0,og).map((e=>If(this,e)))}),p("h1",{id:_f.commandSets,"z-index":1,children:i?"Fortune wheel commands":`${this.character.Nickname??this.character.Name}'s fortune wheel commands`}),p("div",{id:_f.buttonInnerGrid1,children:bd(og,2*og).map((e=>If(this,e)))})]}),h("div",{id:_f.exit,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:_f.exitButton,onClick:this.exit.bind(this),style:{backgroundImage:"url('./Icons/Exit.png')"}}),p("span",{class:"mbs-button-tooltip",id:_f.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),h("div",{id:_f.storage,children:[p("div",{id:_f.storageInner}),h("div",{id:_f.storageTooltip,class:"mbs-button-tooltip",children:[p("h2",{id:_f.storageTooltip+"-header",children:"OnlineSharedSettings Data Usage"}),p("ul",{id:_f.storageTooltip+"-list"})]})]}),p("div",{id:_f.storageFooter})]}))}load(){const e=Em(this.character.OnlineSharedSettings);this.dataSize.value=Kd(Object.values(e),(e=>Number.isNaN(e)?0:e)),this.dataSize.valueRecord=e,y(this,Pf,"m",xf).call(this),super.load()}exit(){super.exit(),this.exitScreens(!1)}}Pf=new WeakSet,xf=function(){const e=this.character.IsPlayer();for(const[t,r]of this.wheelList.entries()){const n=document.getElementById(`${_f.button}${t}`);n.innerText=`${(t%og).toString().padStart(2)}: ${r?.name??"<Empty>"}`,n.disabled=null===r&&!e}const t=document.getElementById(_f.storage),r=document.getElementById(_f.storageInner),n=document.getElementById(_f.storageFooter);if(e){const e=no(_m(this.dataSize.value),0,9999),i=100*e/(Im/1e3);n.innerText=`${e} / ${Im/1e3} KB`,r.style.height=100-i+"%",r.style.backgroundColor="var(--mbs-background-color)",r.style.borderBottom="min(0.3vh, 0.15vw) solid var(--mbs-border-color)",i>=90&&(t.style.boxShadow="0 0 min(2vh, 1vw) red");const o=/\W/g;let a=Object.entries(this.dataSize.valueRecord).map((([e,t])=>[e.replaceAll(o,""),Number.isNaN(t)?"Unknown":`${_m(t)} KB`]));a.length>=11&&(a=a.slice(0,10),a.push(["...",""]));const s=document.getElementById(_f.storageTooltip+"-list");s.innerHTML="";for(const[e,t]of a)s.appendChild(h("li",{children:[p("span",{style:{float:"left"},children:e}),p("span",{style:{float:"right",paddingLeft:"min(7vh, 3.5vw)"},children:t})]}))}else{const e=document.getElementById(_f.storageTooltip);n.innerText=`- / ${Im/1e3} KB`,r.style.height="100%",r.style.backgroundColor="gray",e.style.display="none"}},Of.ids=_f,Of.screen="MBS_FWSelectScreen",Of.background="Sheet",Of.screenParamsDefault={[Ef]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};const $f=Object.freeze(["Exclusive","5 Minutes","15 Minutes","1 Hour","4 Hours","High Security"]),Ff=Object.freeze([Object.freeze({type:"ExclusivePadlock",description:"Exclusive",enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:300,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:900,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:3600,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:14400,enabled:!1}),Object.freeze({type:"HighSecurityPadlock",description:"High security",enabled:!1}),Object.freeze({type:null,description:"No lock",enabled:!1})]);function Lf(e,t,r){Oh(t,"seconds",60,14400),Hf(e,"TimerPasswordPadlock",r)&&(null==e.Property&&(e.Property={}),e.Property.RemoveTimer=CurrentTime+1e3*t,e.Property.RemoveItem=!0,e.Property.LockSet=!0,e.Property.Password=Lh(8))}function Tf(e,t){Hf(e,"HighSecurityPadlock",t),null==e.Property&&(e.Property={}),e.Property.MemberNumberListKeys=""}function Hf(e,t,r){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);if("string"!=typeof t)throw new TypeError('Invalid "lockName" type: '+typeof t);lg(r);const n=AssetGet(r.AssetFamily,"ItemMisc",t);if(null==n)throw new Error(`Invalid "lockName" value: ${t}`);return!(null!=InventoryGetLock(e)||!InventoryDoesItemAllowLock(e)||InventoryBlockedOrLimited(r,{Asset:n}))&&(InventoryLock(r,e,{Asset:n},null,!1),!0)}function Af(e,t){return e.forEach(((e,r)=>{e.enabled=t.includes(r)})),e}function Nf(e){switch(e.type){case"ExclusivePadlock":return"Exclusive";case"HighSecurityPadlock":return"High Security";case"TimerPasswordPadlock":return`${Math.floor(e.time/60)} Minutes`;case null:return"No Lock";default:throw new Error(`Invalid flag type: ${e.type}`)}}var Df,Gf,jf,Wf,zf,Vf,qf,Uf;let Kf;const Jf=Object.freeze({builtinBC:0,builtinMBS:1,customMBS:2});let Yf,Zf,Xf,Qf;Bh(dg).then((async()=>{Kf=await TextCache.buildAsync("Screens/MiniGame/WheelFortune/Text_WheelFortune.csv")}));const em="mbs-fwpreset",tm=Object.freeze({root:em,styles:`${em}-style`,delete:`${em}-delete`,deleteButton:`${em}-delete-button`,deleteTooltip:`${em}-delete-tooltip`,accept:`${em}-accept`,acceptButton:`${em}-accept-button`,acceptTooltip:`${em}-accept-tooltip`,save:`${em}-save`,saveButton:`${em}-save-button`,saveTooltip:`${em}-save-tooltip`,exit:`${em}-exit`,exitButton:`${em}-exit-button`,exitTooltip:`${em}-exit-tooltip`,header:`${em}-header`,midDiv:`${em}-mid-div`,nameDiv:`${em}-name-div`,nameHeader:`${em}-name-header`,nameInput:`${em}-name-input`,nameDropdown:`${em}-name-dropdown`,nameDropdownDiv:`${em}-name-dropdown-div`,nameDropdownContent:`${em}-name-dropdown-content`,builtinBC:`${em}-builtin-bc`,builtinBCColor:`${em}-builtin-bc-color`,builtinBCTooltip:`${em}-builtin-bc-tooltip`,builtinBCTooltipHeader:`${em}-builtin-bc-tooltip-header`,builtinBCTooltipList:`${em}-builtin-bc-tooltip-list`,builtinBCDiv:`${em}-builtin-bc-div`,builtinBCHeader:`${em}-builtin-bc-header`,builtinMBS:`${em}-builtin-mbs`,builtinMBSColor:`${em}-builtin-mbs-color`,builtinMBSTooltip:`${em}-builtin-mbs-button-tooltip`,builtinMBSTooltipHeader:`${em}-builtin-mbs-button-tooltip-header`,builtinMBSTooltipList:`${em}-builtin-mbs-button-tooltip-list`,builtinMBSDiv:`${em}-builtin-mbs-div`,builtinMBSHeader:`${em}-builtin-mbs-header`,customMBS:`${em}-custom-mbs`,customMBSColor:`${em}-custom-mbs-color`,customMBSTooltip:`${em}-custom-mbs-button-tooltip`,customMBSTooltipHeader:`${em}-custom-mbs-button-tooltip-header`,customMBSTooltipList:`${em}-custom-mbs-button-tooltip-list`,customMBSDiv:`${em}-custom-mbs-div`,customMBSHeader:`${em}-custom-mbs-header`});class rm extends lf{get index(){return y(this,Gf,"f")}set index(e){Oh(e,"index",0,this.presets.length-1),y(this,Gf,"f")!==e&&(S(this,Gf,e,"f"),y(this,Df,"m",Uf).call(this))}constructor(e,t,r=null){!function(){if(void 0!==Yf)return;const e=/^([a-zA-Z0-9_\s]+) for ([0-9]+) (minutes|hours)$/,t=WheelFortuneOption.filter((e=>void 0===e.Custom)),r=new Set,n={};for(const i of t){const t=Kf.get(`Option${i.ID}`),o=e.exec(t);if(!o){n[i.ID]={header:t,type:Jf.builtinBC},r.add(t);continue}const[a,s]=[o[1],o[3]];let l=Number.parseInt(o[2]);"hours"===s&&(l*=60),r.add(a),n[i.ID]={header:a,description:`${l} Minutes`,type:Jf.builtinBC}}Yf=Array.from(r),Zf=Object.fromEntries(Object.entries(n).map((([e,t])=>[e,{...t,index:Yf.indexOf(t.header)}])));const i=256;Xf=Object.fromEntries(am.flatMap(((e,t)=>e.flags.map(((r,n)=>[String.fromCharCode(i+16*t+n),{header:e.name,description:Nf(r),index:t,type:Jf.builtinMBS}]))))),Qf=Object.fromEntries(bd(512,1536).map(((e,t)=>{const r=String.fromCharCode(e),n=Math.floor(t/i);let o;switch(n){case 0:case 2:o=(0===n?0:16)+Math.floor(t%i/16);break;case 1:case 3:o=(1===n?0:16)+Math.floor(t%i/16)+32;break;default:throw new RangeError(`Index ${t} lies out of the [0, 2**10) range`)}return[r,{header:"<Empty>",type:Jf.customMBS,index:o}]})))}(),super(e,rm.screenParamsDefault,r),Df.add(this),this.activePreset={name:"<PLACEHOLDER>",ids:new Set},Gf.set(this,0),this.presets=t,this.queueServer=new Set,this.idMapping={...xa(Zf),...xa(Xf),...xa(Qf)},document.body.appendChild(h("div",{id:tm.root,class:"mbs-screen",children:[p("style",{id:tm.styles,children:'#mbs-fwpreset {\n  grid-template: "delete header accept save exit" min(9dvh, 4.5dvw) "mid mid mid mid mid" auto/min(9dvh, 4.5dvw) auto min(9dvh, 4.5dvw) min(9dvh, 4.5dvw) min(9dvh, 4.5dvw);\n}\n\n#mbs-fwpreset-delete {\n  grid-area: delete;\n}\n\n#mbs-fwpreset-header {\n  grid-area: header;\n  margin-left: min(20dvh, 10dvw);\n}\n\n#mbs-fwpreset-accept {\n  grid-area: accept;\n}\n\n#mbs-fwpreset-save {\n  grid-area: save;\n}\n\n#mbs-fwpreset-exit {\n  grid-area: exit;\n}\n\n#mbs-fwpreset-mid-div {\n  display: grid;\n  grid-area: mid;\n  text-align: center;\n  grid-gap: min(2dvh, 1dvw);\n  grid-template: "name-header builtin-bc-header builtin-mbs-header custom-mbs-header" min(9dvh, 4.5dvw) "name builtin-bc builtin-mbs custom-mbs" auto/auto min-content min-content min-content;\n  justify-items: center;\n  justify-self: center;\n  width: 100%;\n}\n#mbs-fwpreset-mid-div > p {\n  text-wrap: nowrap;\n}\n\n#mbs-fwpreset-name-header {\n  grid-area: name-header;\n}\n\n#mbs-fwpreset-builtin-bc-header {\n  grid-area: builtin-bc-header;\n}\n\n#mbs-fwpreset-builtin-mbs-header {\n  grid-area: builtin-mbs-header;\n}\n\n#mbs-fwpreset-custom-mbs-header {\n  grid-area: custom-mbs-header;\n}\n\n.mbs-fwpreset-grid {\n  display: grid;\n  grid-gap: min(1.2dvh, 0.6dvw);\n  grid-auto-flow: column;\n  grid-template-rows: repeat(8, min(7dvh, 3.5dvw));\n  width: fit-content;\n}\n\n#mbs-fwpreset-name-div {\n  grid-area: name;\n}\n\n#mbs-fwpreset-name-input {\n  height: min(7dvh, 3.5dvw);\n  width: min(35dvh, 17.5dvw);\n}\n\n#mbs-fwpreset-name-dropdown-div {\n  height: min(7dvh, 3.5dvw);\n  position: relative;\n  text-wrap: auto;\n  top: 5%;\n  width: min(36dvh, 18dvw);\n}\n\n#mbs-fwpreset-builtin-bc-div {\n  grid-area: builtin-bc;\n  grid-template-columns: repeat(4, min(7dvh, 3.5dvw));\n}\n\n#mbs-fwpreset-builtin-mbs-div {\n  grid-area: builtin-mbs;\n  grid-template-columns: min(7dvh, 3.5dvw);\n}\n\n#mbs-fwpreset-custom-mbs-div {\n  grid-area: custom-mbs;\n  grid-template-columns: repeat(8, min(7dvh, 3.5dvw));\n}\n\n.mbs-fwpreset-color {\n  border: unset !important;\n  height: 84%;\n  left: 4%;\n  position: relative;\n  top: 4%;\n  width: 84%;\n}\n.mbs-fwpreset-color[data-color=red] {\n  background-color: red;\n}\n.mbs-fwpreset-color[data-color=green] {\n  background-color: green;\n}\n.mbs-fwpreset-color:focus {\n  filter: brightness(60%);\n}\n.mbs-fwpreset-color + .mbs-button-tooltip {\n  z-index: 2;\n}\n.mbs-fwpreset-color:focus + .mbs-button-tooltip {\n  visibility: visible;\n  z-index: 1;\n}\n\n.mbs-fwpreset {\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  display: grid;\n  grid-template-columns: min(7dvh, 3.5dvw);\n  grid-template-rows: min(7dvh, 3.5dvw) auto;\n}\n.mbs-fwpreset:hover .mbs-fwpreset-color {\n  filter: brightness(60%);\n}\n.mbs-fwpreset:hover .mbs-button-tooltip {\n  visibility: visible;\n}'.toString()}),h("h1",{id:tm.header,children:["Wheel of Fortune preset ",this.index]}),h("div",{id:tm.delete,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:tm.deleteButton,style:{backgroundImage:"url('./Icons/Trash.png')"},onClick:this.deletePreset.bind(this),disabled:!0}),p("div",{class:"mbs-button-tooltip",id:tm.deleteTooltip,style:{justifySelf:"left"},children:"Delete the current preset"})]}),h("div",{id:tm.accept,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:tm.acceptButton,style:{backgroundImage:"url('./Icons/Accept.png')"},onClick:this.equipPreset.bind(this),disabled:!0}),p("div",{class:"mbs-button-tooltip",id:tm.acceptTooltip,style:{justifySelf:"right"},children:"Equip the current preset"})]}),h("div",{id:tm.save,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:tm.saveButton,style:{backgroundImage:"url('./Icons/Save.png')"},onClick:this.savePreset.bind(this)}),p("div",{class:"mbs-button-tooltip",id:tm.saveTooltip,style:{justifySelf:"right"},children:"Save the current preset"})]}),h("div",{id:tm.exit,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:tm.exitButton,style:{backgroundImage:"url('./Icons/Exit.png')"},onClick:()=>this.exit(!1)}),p("div",{class:"mbs-button-tooltip",id:tm.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),h("div",{id:tm.midDiv,children:[p("p",{id:tm.nameHeader,children:"Preset Name"}),p("p",{id:tm.builtinBCHeader,children:"Builtin BC Options"}),p("p",{id:tm.builtinMBSHeader,children:"Builtin MBS Options"}),p("p",{id:tm.customMBSHeader,children:"Custom MBS Options"}),h("div",{id:tm.nameDiv,children:[p("input",{type:"text",id:tm.nameInput,maxLength:20,onFocus:e=>e.target.select(),onInput:e=>this.activePreset.name=e.target.value}),h("div",{id:tm.nameDropdownDiv,class:"mbs-dropdown",onWheel:e=>this.index=no(this.index+Math.sign(e.deltaY),0,this.presets.length-1),children:[p("button",{class:"mbs-button",id:tm.nameDropdown}),h("div",{class:"mbs-dropdown-content",id:tm.nameDropdownContent,children:[" ",Object.values(this.presets).map(((e,t)=>p("button",{class:"mbs-button mbs-dropdown-button",id:tm.nameDropdown+t.toString(),onClick:()=>this.index=t,children:`${t}: ${e?.name??"<Empty>"}`})))," "]})]})]}),p("div",{id:tm.builtinBCDiv,class:"mbs-fwpreset-grid",children:y(this,Df,"m",zf).call(this,Jf.builtinBC)}),p("div",{id:tm.builtinMBSDiv,class:"mbs-fwpreset-grid",children:y(this,Df,"m",zf).call(this,Jf.builtinMBS)}),p("div",{id:tm.customMBSDiv,class:"mbs-fwpreset-grid",children:y(this,Df,"m",zf).call(this,Jf.customMBS)})]})]}))}savePreset(){const e=this.presets[this.index],t={name:this.activePreset.name,ids:cg(Array.from(this.activePreset.ids).sort().join(""))};t.name===e?.name&&t.ids===e?.ids||(this.presets[this.index]=t,this.queueServer.add(Om.SETTINGS),y(this,Df,"m",qf).call(this))}equipPreset(){const e=cg(Array.from(this.activePreset.ids).sort().join(""));Player.OnlineSharedSettings&&Player.OnlineSharedSettings.WheelFortune!==e&&(Player.OnlineSharedSettings.WheelFortune=e,this.queueServer.add(Om.SHARED))}deletePreset(){null!==this.presets[this.index]&&(this.queueServer.add(Om.SETTINGS),this.presets[this.index]=null,y(this,Df,"m",Uf).call(this))}load(){super.load(),y(this,Df,"m",jf).call(this),y(this,Df,"m",Uf).call(this)}exit(e=!0){super.exit(),this.queueServer.size&&Am(Array.from(this.queueServer),!0),this.exitScreens(e)}}function nm(e,t,r){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);if(!vh(r))throw new TypeError('Invalid "indices" type: '+typeof r);if(null===t||"object"!=typeof t)throw new TypeError('Invalid "character" type: '+typeof t);if(!t.IsSimple()&&!t.IsPlayer())throw new Error("Expected a simple or player character");const n=t.Appearance.find((e=>"HairFront"===e.Asset.Group.Name));if(void 0===n)return;const i=Math.max(0,...r);let o;"string"==typeof e.Color?e.Color=o=$h([e.Color],i,"Default"):Array.isArray(e.Color)&&0!==e.Color.length?o=e.Color:e.Color=o=Array(i).fill("Default"),"string"==typeof n.Color?r.forEach((e=>o[e]=n.Color)):Array.isArray(n.Color)&&n.Color.length>=1&&r.forEach((e=>o[e]=n.Color[0]))}function im(e,t){if(null===t||"object"!=typeof t)throw new TypeError('Invalid "character" type: '+typeof t);if(!t.IsSimple()&&!t.IsPlayer())throw new Error("Expected a simple or player character");if(ug(t)){!function(e,t,r){if(!vh(e))throw new TypeError('Invalid "groupNames" type: '+typeof e);if("string"!=typeof r)throw new TypeError('Invalid "color" type: '+typeof e);for(const n of e){const e=InventoryGet(t,n);null!=e&&(e.Color=Array(e.Asset.ColorableLayerCount).fill(r))}}(["HairAccessory1","HairAccessory2","HairAccessory3","HairBack","HairFront","BodyUpper","BodyLower","Wings","TailStraps","Nipples","Blush","Mouth"],t,"#484747")}return e}let om,am,sm,lm,um;Gf=new WeakMap,Df=new WeakSet,jf=function(){const e=[...Player.MBSSettings.FortuneWheelItemSets,...Player.MBSSettings.FortuneWheelCommands];for(const[t,r]of e.entries()){let e=512;if(e+=t<32?t>=16?16*(16+t):16*t:t>=48?16*t:16*(16+t),r instanceof yg)for(const[t,n]of r.flags.entries()){const i=String.fromCharCode(e+t);this.idMapping[i].description=Nf(n),this.idMapping[i].header=r.name}else if(r instanceof Sg){const t=String.fromCharCode(e);this.idMapping[t].header=r.name,delete this.idMapping[t].description}else for(const t of bd(16)){const r=String.fromCharCode(e+t);this.idMapping[r].header="<Empty>",delete this.idMapping[r].description}}},Wf=function(e,t,r,n){const i=e.toString();return h("div",{id:n.root+i,class:"mbs-fwpreset",children:[p("button",{id:n.color+i,class:"mbs-fwpreset-color","data-color":"red",onClick:e=>e.target.focus()}),h("div",{id:n.tooltip+i,class:"mbs-button-tooltip",style:{justifySelf:r},children:[p("h2",{id:n.tooltipHeader+i,"data-prefix":t??""}),p("ul",{id:n.tooltipList+i})]})]})},zf=function(e){let t,r,n;const i=y(this,Df,"m",Vf).call(this,e);switch(e){case Jf.builtinBC:t=Yf,r="left";break;case Jf.builtinMBS:t=am,r="center";break;case Jf.customMBS:t=[...Player.MBSSettings.FortuneWheelItemSets,...Player.MBSSettings.FortuneWheelCommands],r="right",n=(e,t)=>t>=og?`Command Set ${t-32}: `:`Item Set ${t}: `;break;default:throw new Error(`Unknown type: ${e}`)}return t.map(((e,t)=>y(this,Df,"m",Wf).call(this,t,n?.(e,t),r,i)))},Vf=function(e){switch(e){case Jf.builtinBC:return{root:tm.builtinBC,color:tm.builtinBCColor,tooltip:tm.builtinBCTooltip,tooltipHeader:tm.builtinBCTooltipHeader,tooltipList:tm.builtinBCTooltipList};case Jf.builtinMBS:return{root:tm.builtinMBS,color:tm.builtinMBSColor,tooltip:tm.builtinMBSTooltip,tooltipHeader:tm.builtinMBSTooltipHeader,tooltipList:tm.builtinMBSTooltipList};case Jf.customMBS:return{root:tm.customMBS,color:tm.customMBSColor,tooltip:tm.customMBSTooltip,tooltipHeader:tm.customMBSTooltipHeader,tooltipList:tm.customMBSTooltipList};default:throw new Error(`Unknown type: ${e}`)}},qf=function(){const e=this.presets[y(this,Gf,"f")],t=document.getElementById(tm.nameInput),r=document.getElementById(tm.nameDropdown),n=document.getElementById(`${tm.nameDropdown}${this.index}`);t.placeholder=`Preset ${this.index}`,n.innerText=r.innerText=`${y(this,Gf,"f")}: ${this.activePreset.name}`;const i=document.getElementById(tm.deleteButton),o=document.getElementById(tm.deleteTooltip),a=document.getElementById(tm.acceptButton),s=document.getElementById(tm.acceptTooltip),l=document.getElementById(tm.header);null===e?(t.value="",i.disabled=!0,a.disabled=!0,o.innerText="Delete the current preset:\nunsaved preset",s.innerText="Equip the current preset:\nunsaved preset",l.innerText=`Wheel of Fortune preset ${this.index} (unsaved)`):(t.value=e.name,i.disabled=!1,a.disabled=!1,o.innerText="Delete the current preset",s.innerText="Equip the current preset",l.innerText=`Wheel of Fortune preset ${this.index}`)},Uf=function(){const e=this.presets[y(this,Gf,"f")];this.activePreset=null!==e?{name:e.name,ids:new Set(e.ids)}:{name:"<Empty>",ids:new Set(Player.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault)},y(this,Df,"m",qf).call(this);const t={[Jf.builtinBC]:{},[Jf.builtinMBS]:{},[Jf.customMBS]:{}};for(const[e,{type:r,index:n,description:i,header:o}]of Object.entries(this.idMapping)){const a=this.activePreset.ids.has(e),s=t[r][n]??={header:o,enabled:a,description:[]};s.enabled||=a,i&&a&&s.description.push(i)}for(const e of Object.values(Jf)){const r=y(this,Df,"m",Vf).call(this,e);for(const[n,i]of Object.entries(t[e])){document.getElementById(`${r.color}${n}`).dataset.color=i.enabled?"green":"red";const e=document.getElementById(`${r.tooltipHeader}${n}`);e.innerText=(e.dataset.prefix??"")+i.header;const t=document.getElementById(`${r.tooltipList}${n}`);t.innerHTML="";for(const e of i.description)t.appendChild(p("li",{children:e}))}}},rm.background="Sheet",rm.screen=`MBS_${rm.name}`,rm.ids=tm,rm.screenParamsDefault={[em]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};class cm extends uf{constructor(){super(null,"WheelFortune","MiniGame",{Run:WheelFortuneRun,Click:WheelFortuneClick,Exit:WheelFortuneExit,Load:()=>{CommonSetScreen("MiniGame","WheelFortune"),WheelFortuneLoad()}}),this.character=Player,this.FortuneWheelItemSets=Array(og).fill(null),this.FortuneWheelCommands=Array(og).fill(null),this.weightedIDs=this.character.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault}initialize(){if(null==WheelFortuneCharacter)throw new Error("Cannot load the fortune wheel UI while `WheelFortuneCharacter == null`");WheelFortuneOption=[...sm],WheelFortuneDefault=lm,this.character=WheelFortuneCharacter,this.FortuneWheelItemSets=Mf(WheelFortuneCharacter,"FortuneWheelItemSets","item sets"),this.FortuneWheelCommands=Mf(WheelFortuneCharacter,"FortuneWheelCommands","commands"),this.weightedIDs=function(e){const t=Array.from(e).flatMap((e=>{const t=WheelFortuneOption.find((t=>t.ID===e));return void 0===t?[]:Array(t.Weight??1).fill(e)}));if(0===t.length)return Array.from(e.length>0?e:WheelFortuneDefault).sort(Math.random).join();const r=[];for(;r.length<50;)r.push(...Hd(t,Math.random));return r.join("")}(this.character.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault)}}function dm(){if(um.initialize(),null!=TextScreenCache)for(const{Description:e,Custom:t,ID:r}of WheelFortuneOption)void 0!==e&&(TextScreenCache.cache[`Option${r}`]=t?`*${e}`:e)}function pm(){if(null!=TextScreenCache)for(const{Description:e,Custom:t,ID:r}of WheelFortuneOption)void 0!==e&&(TextScreenCache.cache[`Option${r}`]=t?`*${e}`:e)}cm.screen="WheelFortune",Bh(dg).then((()=>{const e={exit:[1830,60,90,90],roll:[1720,60,90,90],select:[1610,60,90,90],preset:[1500,60,90,90]};if(kh.log("Initializing wheel of fortune hooks"),function(){const e=String.fromCharCode(256),t=WheelFortuneOption.find((t=>void 0===t.Custom&&t.ID>=e));return void 0===t||(kh.warn("Aborting wheel of fortune hook initialization: Found one or more builtin wheel of fortune option-IDs outside of the extended ASCII range",t),!1)}())switch(Th.patchFunction("WheelFortuneRun",{'DrawTextWrap(TextGet((WheelFortuneVelocity == 0) ? (WheelFortuneForced ? "Forced" : "Title") : "Wait"), 1375, 200, 550, 200, "White");':";",'DrawButton(1720, 60, 90, 90, "", BackColor, "Icons/Random.png", TextGet("Random"));':";"}),Th.hookFunction("WheelFortuneLoad",11,((e,t)=>(dm(),t(e)))),Th.hookFunction("WheelFortuneCustomizeLoad",0,((e,t)=>(pm(),t(e)))),Th.hookFunction("WheelFortuneRun",0,((t,r)=>{const n=Player.MBSSettings.RollWhenRestrained||!Player.IsRestrained();n||(WheelFortuneForced=!1),r(t);const i=0===WheelFortuneVelocity,o=i?"White":"Silver",a=WheelFortuneCharacter?.Nickname??WheelFortuneCharacter?.Name,s=WheelFortuneCharacter?.IsPlayer()?"MBS: Configure custom options":`MBS: View ${a}'s option config`;DrawButton(...e.select,"",o,"Icons/Crafting.png",s,!i);const l=!(0!==WheelFortuneVelocity||!WheelFortuneCharacter?.IsPlayer()),u=l?"White":"Silver",c=WheelFortuneCharacter?.Nickname??WheelFortuneCharacter?.Name,d=WheelFortuneCharacter?.IsPlayer()?"MBS: Configure option presets":`MBS: View ${c}'s option presets`;DrawButton(...e.preset,"",u,"Icons/Crafting.png",d,!l);const p=0==WheelFortuneVelocity&&n?"White":"Silver";DrawButton(...e.roll,"",p,"Icons/Random.png",n?TextGet("Random"):"MBS: Cannot spin while restrained",!n);let h="";h=0!==WheelFortuneVelocity?TextGet("Wait"):n?WheelFortuneForced?TextGet("Forced"):TextGet("Title"):"MBS: Cannot spin the wheel of fortune while restrained",DrawTextWrap(h,1375,200,550,200,"White")})),Th.hookFunction("WheelFortuneClick",0,((t,r)=>{if(Player.MBSSettings.RollWhenRestrained||!Player.IsRestrained()||(WheelFortuneForced=!1,!MouseIn(...e.roll))){if(0===WheelFortuneVelocity&&MouseIn(...e.select)){const e={FortuneWheelItemSets:um.FortuneWheelItemSets,FortuneWheelCommands:um.FortuneWheelCommands};um.loadChild(Of,e,um.character)}else 0===WheelFortuneVelocity&&MouseIn(...e.preset)&&WheelFortuneCharacter?.IsPlayer()&&um.loadChild(rm,WheelFortuneCharacter.MBSSettings.FortuneWheelPresets);return r(t)}})),Th.hookFunction("WheelFortuneMouseUp",11,((e,t)=>{!Player.MBSSettings.RollWhenRestrained&&Player.IsRestrained()||t(e)})),Th.hookFunction("WheelFortuneMouseDown",11,((e,t)=>{!Player.MBSSettings.RollWhenRestrained&&Player.IsRestrained()||t(e)})),Th.hookFunction("WheelFortuneDrawWheel",11,(([e,...t],r)=>r([um.weightedIDs,...t]))),um=new cm,Bh(hg).then((()=>{kh.log("Initializing wheel of fortune module"),om=function(){const e=Sh(yh({leash_candy:[{Name:"ReverseBunnySuit",Group:"Suit",ItemCallback:(e,t)=>nm(e,t,[0,1])},{Name:"Catsuit",Group:"SuitLower",ItemCallback:(e,t)=>nm(e,t,[0,1])},{Name:"FaceVeil",Group:"Mask",Color:["#000","Default"],ItemCallback:(e,t)=>nm(e,t,[1])},{Name:"FuturisticMittens",Group:"ItemHands",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Mittens"},ItemCallback:(e,t)=>nm(e,t,[0,1])},{Name:"InteractiveVRHeadset",Group:"ItemHead",TypeRecord:{b:3,f:3,g:1},Craft:{Property:"Secure",Name:"Permanent PSO Headset"},ItemCallback:(e,t)=>nm(e,t,[0])},{Name:"LargeDildo",Group:"ItemMouth",Craft:{Property:"Secure",Name:"Permanent PSO Dildo",Description:"Specially made to fill a PSOs mouth and throat"}},{Name:"LatexBallMuzzleGag",Group:"ItemMouth2",Craft:{Property:"Secure",Name:"Permanent PSO Muzzle",Description:"Forcing the dildo in and keeping it secure"}},{Name:"FuturisticMuzzle",Group:"ItemMouth3",TypeRecord:{n:1,h:0,s:3},Craft:{Property:"Secure",Name:"Permanent PSO Muzzle",Description:"Keeping your cries muffled"},ItemCallback:(e,t)=>nm(e,t,[3])},{Name:"FuturisticVibrator",Group:"ItemVulva",TypeRecord:{vibrating:9},Craft:{Property:"Secure",Name:"Permanent PSO Vibe",Description:"Specially made to fill a PSO"}},{Name:"SciFiPleasurePanties",Group:"ItemPelvis",TypeRecord:{c:3,i:4,o:1,s:2},Craft:{Property:"Secure",Name:"Permanent PSO Panties",Description:"No escape and no Orgasms"},ItemCallback:(e,t)=>nm(e,t,[0,2,4,5])},{Name:"BonedNeckCorset",Group:"ItemNeck",Color:["#222222","#888888","#AA2121","#AA2121","#888888"],TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Permanent PSO Collar"},ItemCallback:(e,t)=>nm(e,t,[2,3])},{Name:"CollarChainShort",Group:"ItemNeckRestraints",Craft:{Property:"Secure",Name:"Permanent PSO Chain",Description:"To keep a PSO on their knees"},Property:{OverridePriority:7},ItemCallback:(e,t)=>nm(e,t,[0])},{Name:"StrictLeatherPetCrawler",Group:"ItemArms",Craft:{Property:"Secure",Name:"Permanent PSO Suit",Description:"Extra tight and unremovable"}},{Name:"HeavyLatexCorset",Group:"ItemTorso",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Corset",Description:"Extra tight and specially molded"}},{Name:"FuturisticHarness",Group:"ItemTorso2",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Harness",Description:"Special harness that constantly shrinks...."},Property:{OverridePriority:23},ItemCallback:(e,t)=>nm(e,t,[0,1,2])},{Name:"FuturisticEarphones",Group:"ItemEars",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Earphones"},Color:["#0F0F0F","Default","Default"],ItemCallback:(e,t)=>nm(e,t,[1])},{Name:"CeilingChain",Group:"ItemAddon",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Chain",Description:"Never to escape"},ItemCallback:(e,t)=>nm(e,t,[0])},{Name:"RoundPiercing",Group:"ItemNipplesPiercings",TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Permanent PSO Piercings"},Color:["#000000","Default","Default"],ItemCallback:(e,t)=>nm(e,t,[1,2])},{Name:"CollarAutoShockUnit",Group:"ItemNeckAccessories",TypeRecord:{s:2,y:0},Craft:{Property:"Secure",Name:"Permanent PSO Shock Unit"}},{Name:"FrogtieStraps",Group:"ItemLegs",Craft:{Property:"Secure",Name:"Permanent PSO Straps",Description:"To keep a PSO on their knees"},ItemCallback:(e,t)=>nm(e,t,[2])},{Name:"DroneMask",Group:"ItemHood",TypeRecord:{m:0,e:0,p:1,g:0,s:1,h:2,j:0},Craft:{Property:"Thin",Name:"Permanent PSO Mask"},ItemCallback:(e,t)=>nm(e,t,[2])}],mummy:[{Name:"DuctTape",Group:"ItemFeet",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{nm(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));0!==n.length&&zh(e,t,Id(n)??{})}},{Name:"DuctTape",Group:"ItemLegs",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{nm(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));0!==n.length&&zh(e,t,Id(n)??{})}},{Name:"DuctTape",Group:"ItemHands",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>nm(e,t,[0])},{Name:"DuctTape",Group:"ItemArms",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{nm(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));0!==n.length&&zh(e,t,Id(n)??{})}},{Name:"LargeDildo",Group:"ItemMouth",Craft:{Property:"Large",Name:"Rubber Mouth Sealant",Description:"A rubber mass molded to shape of your mouth"}},{Name:"DuctTape",Group:"ItemMouth2",TypeRecord:{typed:0},Craft:{Property:"Large",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{nm(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));n.length<2||zh(e,t,Id(n.slice(1))??{})}},{Name:"DuctTape",Group:"ItemMouth3",TypeRecord:{typed:0},Craft:{Property:"Large",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},Equip:()=>Math.random()>.5,ItemCallback:(e,t)=>{nm(e,t,[0]);const r=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],n=(r?.options??[]).map((e=>e.Property.TypeRecord));0!==n.length&&zh(e,t,Id(n)??{})}}],maid:[{Name:"LaceBands",Group:"Bracelet",Color:["#aaaaaa","#151515"]},{Name:"MaidOutfit2",Group:"Cloth",Color:["#0C0C0C","#919194","#9C9C9F"]},{Name:"CatsuitCollar",Group:"ClothAccessory",Color:["#0E0E0E"]},{Name:"MaidHairband1",Group:"Hat",Color:["#979797"]},{Name:"Socks6",Group:"Socks",Color:["#0D0D0D","#919194"]},{Name:"HeartTop",Group:"Bra",Color:["#0E0E0E"]},{Name:"FuturisticHeels2",Group:"Shoes",Color:["#101010","Default","#F1FAFF","#898989","#898989"],TypeRecord:{typed:1}},{Name:"MaidCollar",Group:"ItemNeck",Color:["#DCDCDC","#1B1B1B","Default"],Craft:{Property:"Secure",Name:"Maid Collar",Description:"A tight fitting yet comfortable collar"}},{Name:"FuturisticMittens",Group:"ItemHands",Color:["#FFFFFF","#FFFFFF","#2E2E2E","#050505"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Maid Mittens",Description:"For keeping a maid out of trouble"}},{Name:"FuturisticHeels2",Group:"ItemBoots",Color:["#101010","#101010","Default","#F1FAFF","#898989","#898989","#898989"],TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Maid Heels",Description:"For keeping a maid on their toes"}},{Name:"WiredEgg",Group:"ItemVulva",Color:["Default","#141414"],TypeRecord:{vibrating:1},Craft:{Property:"Arousing",Name:"Maid Teaser",Description:"A little reminder to keep a maid on edge"},Property:{OverridePriority:21}},{Name:"StraitLeotard",Group:"ItemArms",Color:["#FFFFFF","#1A1A1A","#FFFFFF"],TypeRecord:{cl:1,co:1,np:0,vp:0},Craft:{Property:"Secure",Name:"Maid Jacket",Description:"For keeping a maid out of trouble"}},{Name:"LeatherAnkleCuffs",Group:"ItemFeet",Color:["#969696","#191919","#969696"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Maid Cuffs",Description:"For keeping a maid out of trouble"}},{Name:"BallGag",Group:"ItemMouth",TypeRecord:{typed:2},Craft:{Property:"Large",Name:"Maid Silencer",Description:"Silence is golden"}}],statue:[{Name:"ReverseBunnySuit",Group:"SuitLower",Color:["#1B1B1B"],Equip:e=>ug(e)},{Name:"SeamlessCatsuit",Group:"SuitLower",Color:["#484747"],Equip:e=>!ug(e)},{Name:"SeamlessCatsuit",Group:"Suit",Color:["#484747"],Equip:e=>!ug(e)},{Name:"ReverseBunnySuit",Group:"Cloth",Color:["#1B1B1B","#1B1B1B"]},{Name:"BondageSkirt",Group:"ClothLower",Color:["#484747","#333333","#333333"]},{Name:"CatsuitCollar",Group:"ClothAccessory",Color:["#484747"]},{Name:"HighCollar",Group:"ItemNeck",Color:["#363636","#717171"],Craft:{Property:"Secure",Name:"Statue Neck"}},{Name:"LargeDildo",Group:"ItemMouth",Color:["#333333"],Craft:{Property:"Large",Name:"Mouth Sealant"},Property:{OverridePriority:27}},{Name:"LatexPostureCollar",Group:"ItemMouth2",Color:["Default"],Craft:{Property:"Large",Name:"Mouth Sealant"},Property:{OverridePriority:28}},{Name:"LatexBallMuzzleGag",Group:"ItemMouth3",Color:["#A1A1A1"],Craft:{Property:"Large",Name:"Mouth Sealant"}},{Name:"KirugumiMask",Group:"ItemHood",Color:["#484747","#484747","#484747","#484747"],TypeRecord:{e:0,m:3,b:0,br:0,op:0,ms:0},Craft:{Property:"Secure",Name:"Statue's Visage"}},{Name:"MonoHeel",Group:"ItemBoots",Color:["#737070","#737070","#101010"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Statue Base"}},{Name:"FuturisticMittens",Group:"ItemHands",Color:["#767676","#5F5F5F","#3C3C3C","#4F4F4F"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Statue Hands"}},{Name:"SmoothLeatherArmbinder1",Group:"ItemArms",Color:["#191919","#3D3D3D","#191919","#191919","#191919"],Craft:{Property:"Secure",Name:"Statue Arms"}}]}).map((([e,t])=>{const r=Object.freeze(t.map((t=>{let r;if(null!==t.Craft&&"object"==typeof t.Craft){const n=AssetGet(Player.AssetFamily,t.Group,t.Name);if(null==n)throw new Error(`Invalid ${e} item: ${t.Group}${t.Name}`);r={...t.Craft,Item:t.Name,Private:!0,Lock:"",TypeRecord:void 0,Name:t.Craft.Name||n.Description,MemberNumber:void 0,MemberName:""},CraftingValidate(r,n,!1)}return Object.freeze({...t,Custom:!1,Property:Object.freeze(t.Property??{}),TypeRecord:t.TypeRecord,Craft:Object.freeze(r),Color:t.Color,ItemCallback:t.ItemCallback,Equip:t.Equip})})));return[e,r]})));return Object.freeze(e)}(),am=Object.freeze([new yg("PSO Bondage",om.leash_candy,Player.MBSSettings.FortuneWheelItemSets,qh.UNDERWEAR,qh.UNDERWEAR,Af(Ff.map(ka),[0,1,2,3,4,5]),!1),new yg("Mummification",om.mummy,Player.MBSSettings.FortuneWheelItemSets,qh.CLOTHES,qh.UNDERWEAR,Af(Ff.map(ka),[3]),!1),new yg("Bondage Maid",om.maid,Player.MBSSettings.FortuneWheelItemSets,qh.UNDERWEAR,qh.UNDERWEAR,Af(Ff.map(ka),[0,1,2,3]),!1),new yg("Petrification",om.statue,Player.MBSSettings.FortuneWheelItemSets,qh.UNDERWEAR,qh.UNDERWEAR,Af(Ff.map(ka),[0,1,2,3]),!1,im)]),am.forEach((e=>e.register(!1))),sm=Object.freeze(WheelFortuneOption.filter((e=>!e.Custom))),lm=WheelFortuneDefault,Am([Om.SHARED])})),CurrentScreen){case"WheelFortune":return dm();case"WheelFortuneCustomize":return pm()}}));const hm=80,fm=160;var mm,gm,Rm,vm,bm,ym;Bh(dg).then((()=>{kh.log("Initializing crafting hooks"),Th.patchFunction("CraftingClick",{"if (CraftingOffset < 0) CraftingOffset = 80 - 20;":"if (CraftingOffset < 0) CraftingOffset = 160 - 20;","if (CraftingOffset >= 80) CraftingOffset = 0;":"if (CraftingOffset >= 160) CraftingOffset = 0;"}),Th.patchFunction("CraftingRun",{"/ ${80 / 20}.":"/ 8."}),Bh(hg).then((()=>{kh.log("Initializing crafting cache"),Th.hookFunction("CraftingSaveServer",0,((e,t)=>{const r=Player.Crafting;Player.Crafting=r?.slice(0,hm),t(e),Player.Crafting=r;const n=null==(i=Player.Crafting?Player.Crafting.slice(hm):null)?"":i.map((e=>e?.Item?CraftingSerialize(e):"")).join(CraftingSerializeItemSep);var i;n!=Player.MBSSettings.CraftingCache&&(Player.MBSSettings.CraftingCache=n,Am([Om.SETTINGS]))})),function(e,t){if(e.Crafting??=[],$h(e.Crafting,hm,null),!t)return;const r=LZString.compressToUTF16(t),n=CraftingDecompressServerData(r),i=new Set(e.Crafting.map((e=>JSON.stringify(e))));let o=!1;for(const[e,t]of n.entries())if(null!=t)e:switch(CraftingValidate(t)){case CraftingStatusType.OK:{const r=JSON.stringify(t);i.has(r)&&(kh.warn(`Filtering duplicate crafting item ${hm+e}: "${t.Name} (${t.Item})"`),n[e]=null);break e}case CraftingStatusType.ERROR:{const r=JSON.stringify(t);i.has(r)?(kh.warn(`Filtering duplicate crafting item ${hm+e}:"${t.Name} (${t.Item})"`),n[e]=null):o=!0;break e}case CraftingStatusType.CRITICAL_ERROR:kh.error(`Removing corrupt crafting item ${hm+e}: "${t?.Name} (${t?.Item})"`),n[e]=null}for(const t of n)if(e.Crafting.length>=fm){if(null==t)continue;if(e.Crafting.includes(null,hm))kh.warn("Found more than 160 crafting items, trimming down [80, 160)-interval null entries"),e.Crafting=e.Crafting.filter(((e,t)=>t<hm||null!=e));else{if(!e.Crafting.includes(null)){const t=e.Crafting.length-fm;kh.error(`Found more than 160 crafting items, the last ${t} will be deleted`);break}kh.warn("Found more than 160 crafting items, trimming down [0, 80)-interval null entries"),e.Crafting=e.Crafting.filter((e=>null!=e))}}else e.Crafting.push(t);o&&e.IsPlayer()&&CraftingSaveServer()}(Player,Player.MBSSettings.CraftingCache)}))}));gm=new WeakMap,Rm=new WeakMap,vm=new WeakMap,bm=new WeakMap,mm=new WeakSet,ym=async function(e,t){const r=await fetch(t).then((t=>t.ok?(kh.debug(`Successfully fetched "${e}" json`,t),t.json()):(kh.debug(`Failed to fetch "${e}" json`,t),Promise.resolve(null)))).catch((e=>(kh.error(e),null)));if(null!==r)switch(e){case"phoneticDict":S(this,gm,Object.freeze(r),"f"),S(this,vm,!0,"f");break;case"gagData":S(this,Rm,Object.freeze(r),"f"),S(this,bm,!0,"f");break;default:throw new Error(`Invalid type: ${e}`)}};const Sm=new class{constructor(){mm.add(this),gm.set(this,Object.freeze({})),Rm.set(this,Object.freeze({})),vm.set(this,!1),bm.set(this,!1)}get gagData(){return y(this,bm,"f")||y(this,mm,"m",ym).call(this,"gagData","https://bananarama92.github.io/MBS/devel/vendor/gag_data.json"),y(this,Rm,"f")}get phoneticDict(){return y(this,vm,"f")||y(this,mm,"m",ym).call(this,"phoneticDict","https://bananarama92.github.io/MBS/devel/vendor/en_US.json"),y(this,gm,"f")}init(){this.gagData,this.phoneticDict}},wm=Object.freeze({LIGHT:3,MEDIUM:6,HEAVY:9,KILO_HEAVY:12,MEGA_HEAVY:15,GIGA_HEAVY:18,MAX:21}),Cm=Object.freeze(new Set(["aɪ","aʊ","b","d","dʒ","eɪ","f","h","i","j","k","m","n","oʊ","p","s","t","tʃ","u","v","w","z","æ","ð","ŋ","ɑ","ɔ","ɔɪ","ə","ɛ","ɝ","ɡ","ɪ","ɪə","ɫ","ɹ","ʃ","ʊ","ʒ","θ"])),km=/\p{L}/u;function Bm(e){const t=e.toLowerCase(),r=Sm.phoneticDict[t];if(void 0===r)return;const n=bd(0,r.length).map((e=>[]));for(const e of Gp(r,n)){const[t,r]=e;let n=0;for(;n<t.length;){const e=t[n],i=t.slice(n,n+2);Cm.has(i)?(r.push(i),n+=2):(r.push(e),n+=1)}}return n}function Pm(e,t){let r=e=>e;if(null!=e?.dropChars){const n={level:t,levelMin:e.dropChars.levelMin??wm.HEAVY,levelMax:e.dropChars.levelMax??wm.MAX,maxFrac:e.dropChars.maxFrac??.5};r=e=>function(e,t){const{level:r,levelMax:n,levelMin:i,maxFrac:o}=t;if(r<i)return e;const a=Array.from(e),s=Math.max(o,o*(r-i)/(n-i)),l=Math.floor(a.length*s);return e.slice(0,a.length-l).padEnd(a.length-Math.floor(l/2))}(e,n)}return{dropChars:r,character:e?.character??null,fallback:e?.fallback??(e=>Th.callOriginal("SpeechGarbleByGagLevel",[e[1],e[0],e[2]])),ignoreOOC:e?.ignoreOOC??!1,perSyllable:e?.perSyllable??!1}}function xm(e,t,r=null){if(e&&e.HasEffect("OpenMouth")&&!e.HasEffect("BlockMouth"))return Sm.gagData["Ring Gag"]??{};e:if(null!==r){const e=Math.floor(t/3);if(0===e)break e;t/3-e>r.syllable/r.syllableMax&&(t=3*(1+e))}return t<=wm.LIGHT?Sm.gagData["Cleave Gag"]??{}:t<=wm.MEDIUM?Sm.gagData["Ball Gag"]??{}:Sm.gagData["Dildo Gag"]??{}}function Mm(e,t,r=null){const{dropChars:n,fallback:i,character:o,ignoreOOC:a,perSyllable:s}=Pm(r,t);let l="";const u=function(e,t=!1){const r=SpeechGetOOCRanges(e).values();let n=r.next();if(n.done||t)return[{words:e,ooc:!1}];const i=[];let o=0;for(;!n.done;){const t=n.value.start,a=t+n.value.length;i.push({words:e.slice(o,t),ooc:!1}),i.push({words:e.slice(t,a),ooc:!0}),n=r.next(),o=a}return i.push({words:e.slice(o),ooc:!1}),i}(e,a);for(const e of u){if(e.ooc){l+=e.words;continue}let r="",a=[];const u=e.words.length-1;for(const[c,d]of Array.from(e.words).entries()){const e=km.test(d);if(e&&(r+=d,a.push(d.toUpperCase()===d),c<u))continue;const p=Bm(r);if(p){const e=n(p.flatMap(((e,r)=>{const n=s?{syllable:r+1,syllableMax:p.length}:null,i=xm(o,t,n);return e.map((e=>i[e]?.SOUND??""))})).join(""));a.every(Boolean)?l+=e.toUpperCase():a[0]&&e.length>0?l+=`${e[0].toUpperCase()}${e.slice(1)}`:l+=e}else l+=i([r,t]);r="",a=[],e||(l+=i([d,t]))}}return l}Bh(hg).then((()=>{kh.log("Initializing garbling module"),Th.patchFunction("SpeechTransformProcess",{"text = SpeechTransformGagGarble(text, intensity, ignoreOOC);":"text = SpeechTransformGagGarble(text, intensity, ignoreOOC, C);"}),Th.hookFunction("SpeechTransformGagGarble",0,(([e,t,r,...n],i)=>{const o=n[0];if(t&&e&&Player.MBSSettings.AlternativeGarbling){return Mm(e,t,{dropChars:Player.MBSSettings.DropTrailing?{}:void 0,perSyllable:Player.MBSSettings.GarblePerSyllable,fallback:i,ignoreOOC:r,character:o})}return i([e,t,r,...n])}))}));const Im=18e4;function Em(e){const t=[],r=CommonIsObject(e)?e:{};for(const[e,n]of Object.entries(r))try{const r=JSON.stringify(n??"");t.push([e,(new TextEncoder).encode(r).byteLength])}catch{t.push([e,NaN])}return Object.fromEntries(t.sort((([e,t],[r,n])=>{t=Math.round(t/100),n=Math.round(n/100);const i=Number.isNaN(t),o=Number.isNaN(n);return t===n||i&&o?e.localeCompare(r):i||o?o?-1:1:n-t})))}function _m(e){return Math.round(e/100)/10}const Om=Object.freeze({SETTINGS:0,SHARED:1});function $m(){const e=function(){const e=jh.fromVersion(t),r=`#v${e.major}${e.minor}${e.micro}`;return e.beta?["blob/devel",""]:["blob/main",r]}();return`https://github.com/bananarama92/MBS/${e[0]}/CHANGELOG.md${e[1]}`}function Fm(e,t,r){Array.isArray(t)?t.length>og&&(Fh(t,og),r.push([`Trimming too long wheel of fortune item list: ${t.length}/${og}`])):(t=[],r.push(["Re-initializing invalid wheel of fortune item list: "+typeof t]));const n=Object.seal(Array(og).fill(null));return t.forEach(((t,i)=>{if(null!==t)try{(n[i]=e(n,t)).register(!1)}catch(e){r.push([`Failed to load corrupted custom wheel of fortune item ${i}`,e])}})),n}function Lm(e,t){Array.isArray(e)?e.length>ag&&(Fh(e,ag),t.push([`Trimming too long wheel of fortune preset list: ${e.length}/${ag}`])):(e=[],t.push(["Re-initializing invalid wheel of fortune preset list: "+typeof e]));const r=Object.seal(Array(ag).fill(null));return e.forEach(((e,n)=>{if(null===e)return;if(Array.isArray(e)||"object"!=typeof e||"string"!=typeof e.ids)return void t.push([`Failed to load corrupted custom wheel of fortune preset ${n}`]);const{name:i,ids:o}=e;r[n]={name:"string"==typeof i&&i.length>0&&i.length<=20?i:`Preset ${n}`,ids:o}})),r}function Tm(e,t,r=!0){let n=null;try{if(e&&"string"==typeof e){let t=LZString.decompressFromUTF16(e);t||(t=LZString.decompressFromBase64(e)),n=JSON.parse(t||"null")}}catch(e){r&&kh.warn(`failed to load corrupted MBS ${t}`,e)}return null!==n&&"object"==typeof n?n:{}}function Hm(e=null,r=!0){if(void 0===Player.OnlineSharedSettings)throw new Error('"Player.OnlineSharedSettings" still uninitialized');e??={...Tm(Player.OnlineSettings?.MBS,"OnlineSettings"),...Tm(Player.ExtensionSettings.MBS,"ExtensionSettings"),...Tm(Player.OnlineSharedSettings.MBS,"OnlineSharedSettings")},void 0!==e.Version&&function(e){if(void 0===e)return kh.log("Detecting first-time MBS initialization"),!1;const r=jh.fromVersion(t);let n;try{n=jh.fromVersion(e)}catch(t){return kh.warn(`Failed to parse previous MBS version: ${e}`),!1}return r.greater(n)?(kh.log(`Upgrading MBS from ${e} to ${t}`),!0):!!r.lesser(n)&&(kh.warn(`Downgrading MBS from ${e} to ${t}`),!1)}(Player.OnlineSharedSettings.MBSVersion??Player.OnlineSettings?.MBSVersion)&&function(){const e=`New MBS version detected: ${t}\n\nSee below for the updated changelog:\n${$m()}`;"number"==typeof Player.MemberNumber&&ServerAccountBeep({MemberNumber:Player.MemberNumber,MemberName:"MBS",ChatRoomName:"MBS Changelog",Private:!0,Message:e,ChatRoomSpace:"",BeepType:""})}();let n=!1;void 0!==Player.OnlineSettings?.MBSVersion&&(delete Player.OnlineSettings.MBSVersion,n=!0),Player.OnlineSettings?.MBS&&(delete Player.OnlineSettings.MBS,n=!0),n&&ServerAccountUpdate.QueueData({OnlineSettings:Player.OnlineSettings});const i=function(e){const r={Version:[],CraftingCache:[],FortuneWheelItemSets:[],FortuneWheelCommands:[],FortuneWheelPresets:[],LockedWhenRestrained:[],RollWhenRestrained:[],AlternativeGarbling:[],DropTrailing:[],GarblePerSyllable:[]},n={CraftingCache:"",LockedWhenRestrained:!1,RollWhenRestrained:!0,AlternativeGarbling:!1,DropTrailing:!1,GarblePerSyllable:!1};for(const[t,i]of yh(n))void 0!==e[t]&&(typeof e[t]!=typeof i?r[t]=[[`Invalid type, expected a ${typeof i}: ${typeof r[t]}`]]:n[t]=e[t]);const i={Version:t,CraftingCache:n.CraftingCache,FortuneWheelItemSets:Fm(yg.fromObject,e.FortuneWheelSets??e.FortuneWheelItemSets??[],r.FortuneWheelItemSets),FortuneWheelCommands:Fm(Sg.fromObject,e.FortuneWheelCommands??[],r.FortuneWheelCommands),FortuneWheelPresets:Lm(e.FortuneWheelPresets??[],r.FortuneWheelPresets),LockedWhenRestrained:n.LockedWhenRestrained,RollWhenRestrained:n.RollWhenRestrained,AlternativeGarbling:n.AlternativeGarbling,DropTrailing:n.DropTrailing,GarblePerSyllable:n.GarblePerSyllable};return i.AlternativeGarbling&&Sm.init(),{settings:i,ok:0===Kd(Object.values(r).map((e=>e.length))),err:Sh(yh(r).filter((([e,t])=>t.length>0)))}}(e);return(i.ok||r)&&(Player.MBSSettings=i.settings),i.ok||(kh.warn("Encountered and fixed one or more errors while parsing MBS settings",i.err),r&&function(e){const t=Sh(yh(e).map((([e,t])=>[e,t.map((e=>e.join(", ")))]))),r=`Encountered one or more errors while parsing MBS settings:\n\n${JSON.stringify(t,void 0,4)}`;"number"==typeof Player.MemberNumber&&ServerAccountBeep({MemberNumber:Player.MemberNumber,MemberName:"MBS",ChatRoomName:"MBS Settings Error",Private:!0,Message:r,ChatRoomSpace:"",BeepType:""})}(i.err)),Player.OnlineSharedSettings.WheelFortune??=WheelFortuneDefault,i}function Am(e,r=!0){if(void 0===Player.OnlineSharedSettings)throw new Error("Player.OnlineSharedSettings is still uninitialized");const n={};if(e.includes(Om.SETTINGS)){const e=gc(Player.MBSSettings,"FortuneWheelItemSets","FortuneWheelCommands");Player.ExtensionSettings.MBS=LZString.compressToUTF16(JSON.stringify(e)),r&&(n["ExtensionSettings.MBS"]=Player.ExtensionSettings.MBS)}if(e.includes(Om.SHARED)){const e=Object.freeze({FortuneWheelItemSets:Player.MBSSettings.FortuneWheelItemSets,FortuneWheelCommands:Player.MBSSettings.FortuneWheelCommands});Player.OnlineSharedSettings.MBS=LZString.compressToUTF16(JSON.stringify(e)),Player.OnlineSharedSettings.MBSVersion=t,r&&(Player.OnlineSharedSettings.WheelFortune=cg(Player.OnlineSharedSettings.WheelFortune),n.OnlineSharedSettings=Player.OnlineSharedSettings)}r&&ServerAccountUpdate.QueueData(n)}function Nm(){const e=["ExtensionSettings","OnlineSharedSettings"];for(const t of e){const e=Em(Player[t]),r=Object.fromEntries(Object.entries(e).map((([e,t])=>[e,_m(t)]))),n=_m(Kd(Object.values(e),(e=>Number.isNaN(e)?0:e)));n>=.9*Im/1e3?kh.warn(`Total ${t} data usage at ${n} / ${Im/1e3} KB`,r):kh.log(`Total ${t} data usage at ${n} / ${Im/1e3} KB`,r)}}const Dm=Object.freeze({OK:0,ERROR:1,EMPTY_SETTINGS:2,WARN:3});Bh(pg).then((()=>{Hm(),Am([Om.SETTINGS,Om.SHARED],!1),kh.log("Initializing settings module"),Nm()}));var Gm,jm,Wm,zm,Vm,qm,Um,Km,Jm;function Ym(){null!=TextScreenCache&&(TextScreenCache.cache[`Homepage${eg.screen}`]="MBS Settings");const e=new Image;e.addEventListener("error",(()=>DrawGetImageOnError(e,!1))),e.src="Icons/Maid.png",DrawCacheImage.set(`Icons/${eg.screen}.png`,e)}class Zm extends uf{constructor(){super(null,"Character","Preference",{Run:PreferenceRun,Click:PreferenceClick,Exit:PreferenceExit,Load:()=>CommonSetScreen("Character","Preference")})}}Zm.screen="Preference";const Xm="mbs-preference",Qm=Object.freeze({root:Xm,styles:`${Xm}-style`,header:`${Xm}-header`,exit:`${Xm}-exit`,exitButton:`${Xm}-exit-button`,exitTooltip:`${Xm}-exit-tooltip`,settingsGrid:`${Xm}-settings`,settingsPair:`${Xm}-settings-pair`,itemsButton:`${Xm}-items-button`,itemsHeader:`${Xm}-items-header`,wheelButton:`${Xm}-wheel-button`,wheelHeader:`${Xm}-wheel-header`,rollCheckbox:`${Xm}-roll-checkbox`,rollHeader:`${Xm}-roll-header`,lockCheckbox:`${Xm}-lock-checkbox`,lockHeader:`${Xm}-lock-header`,gagCheckbox:`${Xm}-gag-checkbox`,gagHeader:`${Xm}-gag-header`,miscGrid:`${Xm}-misc`,reset:`${Xm}-reset`,resetButton:`${Xm}-reset-button`,resetTooltip:`${Xm}-reset-tooltip`,resetScreen:`${Xm}-reset-screen`,resetBackground:`${Xm}-reset-background`,resetGrid:`${Xm}-reset-grid`,resetAccept:`${Xm}-reset-accept`,resetCancel:`${Xm}-reset-cancel`,import:`${Xm}-import`,importButton:`${Xm}-import-button`,importTooltip:`${Xm}-import-tooltip`,export:`${Xm}-export`,exportButton:`${Xm}-export-button`,exportTooltip:`${Xm}-export-tooltip`,changelog:`${Xm}-changelog`,changelogButton:`${Xm}-changelog-button`,changelogTooltip:`${Xm}-changelog-tooltip`});class eg extends lf{constructor(e,r=null){super(e,eg.screenParamsDefault,r),Gm.add(this),document.body.appendChild(h("div",{id:Qm.root,class:"mbs-screen",children:[p("style",{id:Qm.styles,children:'#mbs-preference {\n  grid-template: "header header exit" min(9dvh, 4.5dvw) "settings misc misc" auto/auto min(29dvh, 14.5dvw) min(9dvh, 4.5dvw);\n}\n\n#mbs-preference-header {\n  grid-area: header;\n}\n\n#mbs-preference-exit {\n  grid-area: exit;\n}\n\n.mbs-preference-settings-pair {\n  grid-column-gap: min(3dvh, 1.5dvw);\n  align-items: center;\n  display: grid;\n  grid-template-columns: min(9dvh, 4.5dvw) auto;\n  padding-right: min(6dvh, 3dvw);\n  text-align: justify;\n}\n.mbs-preference-settings-pair button {\n  height: min(9dvh, 4.5dvw);\n  width: min(9dvh, 4.5dvw);\n}\n.mbs-preference-settings-pair > p {\n  margin: 0;\n}\n\n#mbs-preference-settings {\n  display: grid;\n  grid-area: settings;\n  height: 100%;\n  overflow: hidden scroll;\n  grid-gap: min(2dvh, 1dvw);\n}\n\n#mbs-preference-misc {\n  align-self: self-end;\n  display: grid;\n  grid-gap: min(2dvh, 1dvw);\n  grid-area: misc;\n  grid-template: "reset reset" min(9dvh, 4.5dvw) "import export" min(9dvh, 4.5dvw) "changelog changelog" min(9dvh, 4.5dvw)/auto auto;\n}\n#mbs-preference-misc button {\n  background-origin: padding-box;\n  background-position: left;\n  background-size: min(7dvh, 3.5dvw) min(7dvh, 3.5dvw);\n}\n\n#mbs-preference-reset {\n  grid-area: reset;\n  grid-template-columns: min(40dvh, 20dvw);\n}\n#mbs-preference-reset button:not(:hover) {\n  background-color: pink;\n}\n\n#mbs-preference-import {\n  grid-area: import;\n  grid-template-columns: min(19dvh, 9.5dvw);\n}\n\n#mbs-preference-export {\n  grid-area: export;\n  grid-template-columns: min(19dvh, 9.5dvw);\n}\n\n#mbs-preference-changelog {\n  grid-area: changelog;\n  grid-template-columns: min(40dvh, 20dvw);\n}\n\n#mbs-preference-reset-screen {\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 2;\n}\n\n#mbs-preference-reset-background {\n  background: url("https://bananarama92.github.io/MBS/main/images/SheetMBS.png") var(--mbs-background-color);\n  background-blend-mode: multiply;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: contain;\n  box-sizing: border-box;\n  height: 80%;\n  justify-self: center;\n  mask-image: url("https://bananarama92.github.io/MBS/main/images/SheetMBS.png");\n  mask-position: center;\n  mask-repeat: no-repeat;\n  mask-size: contain;\n  padding: min(6dvh, 3dvw);\n  padding-top: min(3dvh, 1.5dvw);\n  position: relative;\n  width: 80%;\n  word-break: break-word;\n}\n\n#mbs-preference-reset-grid {\n  display: grid;\n  grid-template-columns: auto auto;\n  justify-items: center;\n  padding-top: min(10dvh, 5dvw);\n}\n#mbs-preference-reset-grid .mbs-button {\n  height: min(9dvh, 4.5dvw);\n  width: min(27dvh, 13.5dvw);\n}'.toString()}),p("h1",{id:Qm.header,children:`Maid's Bondage Scripts ${t}`}),h("div",{id:Qm.exit,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:Qm.exitButton,onClick:this.exit.bind(this),style:{backgroundImage:"url('./Icons/Exit.png')"}}),p("span",{class:"mbs-button-tooltip",style:{justifySelf:"right"},children:"Exit"})]}),h("div",{id:Qm.settingsGrid,children:[p("h2",{children:"Wheel of fortune settings"}),h("div",{class:"mbs-preference-settings-pair",children:[p("button",{class:"mbs-button",style:{backgroundImage:"url('./Icons/Crafting.png')"},onClick:y(this,Gm,"m",Km).bind(this)}),"Configure the wheel of fortune"]}),h("div",{class:"mbs-preference-settings-pair",children:[p("input",{type:"checkbox","data-field":"RollWhenRestrained",onClick:y(this,Gm,"m",jm).bind(this)}),"Allow wheel rolling while restrained"]}),h("div",{class:"mbs-preference-settings-pair",children:[p("input",{type:"checkbox","data-field":"LockedWhenRestrained",onClick:y(this,Gm,"m",jm).bind(this)}),"Lock MBS settings while restrained"]}),p("h2",{children:"Garbling settings"}),h("div",{class:"mbs-preference-settings-pair",children:[p("input",{type:"checkbox","data-field":"AlternativeGarbling",onClick:y(this,Gm,"m",jm).bind(this)}),h("span",{children:[h("p",{children:[p("strong",{children:"Experimental"}),": whether gags will use an alternative form of, more phonetically acurate, speech garbling based on ",p("a",{href:"https://github.com/CordeliaMist/Dalamud-GagSpeak",target:"_blank",children:"Dalamud-GagSpeak"})]}),h("p",{children:["Incompatible-ish with ",p("a",{href:"https://sidiousious.gitlab.io/bce/",target:"_blank",children:"FBC"}),"'s garbling anti-cheat as of the moment"]})]})]}),h("div",{class:"mbs-preference-settings-pair",children:[p("input",{type:"checkbox","data-field":"DropTrailing",onClick:y(this,Gm,"m",jm).bind(this)}),"Whether to heaviest gags will drop up to half of all trailing characters when alternate garbling is enabled"]}),h("div",{class:"mbs-preference-settings-pair",children:[p("input",{type:"checkbox","data-field":"GarblePerSyllable",onClick:y(this,Gm,"m",jm).bind(this)}),"Interpolate between the three alternative garbling levels, allowing for a more gradual increase in garbling strength (on a syllable by syllable basis) as the gag level increases"]})]}),h("div",{id:Qm.miscGrid,children:[h("div",{id:Qm.reset,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:Qm.resetButton,style:{backgroundImage:"url('./Icons/ServiceBell.png')"},onClick:y(this,Gm,"m",Vm).bind(this),children:"Reset MBS"}),p("span",{class:"mbs-button-tooltip",children:"Clear all MBS data"})]}),h("div",{id:Qm.import,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:Qm.importButton,onClick:y(this,Gm,"m",Wm).bind(this),children:"Import"}),p("span",{class:"mbs-button-tooltip",children:"Import MBS settings"})]}),h("div",{id:Qm.export,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:Qm.exportButton,onClick:y(this,Gm,"m",zm).bind(this),children:"Export"}),p("span",{class:"mbs-button-tooltip",children:" Export MBS settings"})]}),h("div",{id:Qm.changelog,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:Qm.changelogButton,style:{backgroundImage:"url('./Icons/Changelog.png')"},onClick:()=>open($m(),"_blank"),children:"Latest Changes"}),p("span",{class:"mbs-button-tooltip",children:"Open the MBS changelog"})]})]})]})),document.body.appendChild(p("div",{id:Qm.resetScreen,class:"mbs-screen","screen-generated":eg.screen,children:h("div",{id:Qm.resetBackground,children:[p("h1",{children:"MBS data reset"}),p("p",{children:p("strong",{children:"- Warning -"})}),h("p",{children:["If you confirm, ",p("i",{children:"all"})," MBS data (including settings, overrides, and current states) will be permanently reset!"]}),p("p",{children:"You will be able to continue using MBS, but all of your configuration will be reset to default!"}),p("p",{children:p("strong",{children:"This action cannot be undone!"})}),h("div",{id:Qm.resetGrid,children:[p("button",{class:"mbs-button",onClick:y(this,Gm,"m",Um).bind(this),disabled:!0,id:Qm.resetAccept,children:"Confirm (10)"}),p("button",{class:"mbs-button",onClick:this.exit.bind(this),id:Qm.resetCancel,children:"Cancel"})]})]})}))}load(){y(this,Gm,"m",Jm).call(this),super.load()}draw(){DrawCharacter(Player,50,50,.9)}exit(){const e=document.getElementById(Qm.resetScreen);"visible"===e.style.visibility?e.style.visibility="hidden":(super.exit(),this.exitScreens(!1))}}let tg;var rg,ng,ig;Gm=new WeakSet,jm=function(e){const t=e.target.dataset.field;if(t in Player.MBSSettings)switch(Player.MBSSettings[t]=!Player.MBSSettings[t],Am([Om.SETTINGS]),t){case"AlternativeGarbling":Player.MBSSettings[t]&&Sm.init();break;case"LockedWhenRestrained":y(this,Gm,"m",Jm).call(this)}},Wm=function(){const e=prompt("Please paste MBS settings.\nImporting settings will overwrite existing settings. Are you sure?");if(!e)return;const t=function(e){kh.log("Importing new MBS settings");let t=null,r=null;try{t=JSON.parse(LZString.decompressFromBase64(e.trim())||"{}")}catch(e){r=e}if(r||null===t||"object"!=typeof t||vh(t))return kh.error("Aborting, failed to parse corrupted MBS settings",r),{status:Dm.ERROR,ok:!1};if(0===Object.keys(t).length)return kh.error("Aborting, detected empty or corrupted MBS settings"),{status:Dm.EMPTY_SETTINGS,ok:!1};const n=Hm(t,!1);return n.ok?(Am([Om.SETTINGS,Om.SHARED],!0),Nm(),{status:Dm.OK,...n}):{status:Dm.WARN,...n}}(e);switch(t.status){case Dm.OK:return kh.log("Settings successfully updated"),alert("Settings successfully updated!");case Dm.ERROR:return alert("ERROR: Detected corrupted MBS settings.\nNo changes were made.");case Dm.EMPTY_SETTINGS:return alert("ERROR: Detected empty or corrupted MBS settings.\nNo changes were made.");case Dm.WARN:return void(confirm("WARNING: MBS successfully parsed the settings but found one or more invalid fields; please check the browser console for more details.\nAre you sure you want to continue?")&&(Player.MBSSettings=t.settings,Am([Om.SETTINGS,Om.SHARED],!0),Nm(),kh.log("Settings successfully updated"),alert("Settings successfully updated!")));default:throw new Error(`Unknown status type: ${t.status}`)}},zm=function(){const e=LZString.compressToBase64(JSON.stringify(Player.MBSSettings));navigator.clipboard.writeText(e),alert("MBS settings copied to clipboard.")},Vm=function(){const e=document.getElementById(Qm.resetScreen),t=document.getElementById(Qm.resetAccept);e.style.visibility="visible",t.disabled=!0,y(this,Gm,"m",qm).call(this,t)},qm=async function(e){let t=9;for(;t>=0;)await new Promise((e=>setTimeout(e,1e3))),e.innerText=`Confirm (${t})`,t--;e.innerText="Confirm",e.disabled=!1},Um=function(){delete Player.ExtensionSettings.MBS,void 0!==Player.OnlineSharedSettings&&(delete Player.OnlineSharedSettings.MBSVersion,delete Player.OnlineSharedSettings.MBS,Player.OnlineSharedSettings.WheelFortune=lm),WheelFortuneOption=WheelFortuneOption.filter((e=>!0!==e.Custom)),WheelFortuneDefault=lm,Player.Crafting=Player.Crafting?.slice(0,hm),Player.MBSSettings=Object.seal({Version:t,CraftingCache:"",FortuneWheelItemSets:Object.seal(Array(og).fill(null)),FortuneWheelCommands:Object.seal(Array(og).fill(null)),LockedWhenRestrained:!1,RollWhenRestrained:!0,FortuneWheelPresets:Object.seal(Array(ag).fill(null)),AlternativeGarbling:!1,DropTrailing:!1,GarblePerSyllable:!1}),ServerAccountUpdate.QueueData({ExtensionSettings:Player.ExtensionSettings,OnlineSharedSettings:Player.OnlineSharedSettings},!0),kh.log("Settings successfully reset"),Nm(),this.exit()},Km=function(){const e={FortuneWheelItemSets:Mf(Player,"FortuneWheelItemSets","item sets"),FortuneWheelCommands:Mf(Player,"FortuneWheelCommands","commands")},[t,r,n,i]=this.screenParams[this.ids.root].shape,o={[Of.ids.root]:{shape:[95,r,n+(t-95),i]}};this.loadChild(Of,e,Player,o)},Jm=function(){const e=Player.IsRestrained()&&Player.MBSSettings.LockedWhenRestrained,t=document.getElementById(Qm.settingsGrid);for(const r of t.children)for(const t of r.children){const r=t.dataset?.field;r&&r in Player.MBSSettings&&(t.checked=Player.MBSSettings[r],t.disabled=e)}},eg.screen="MBS_PreferenceScreen",eg.ids=Qm,eg.screenParamsDefault={[Xm]:Object.freeze({shape:[525,75,1380,850],visibility:"visible"}),[Qm.resetScreen]:Object.freeze({shape:[0,0,2e3,1e3],visibility:"hidden"})},Bh(dg).then((()=>{if(Th.hookFunction("PreferenceLoad",0,((e,t)=>{t(e),Ym()})),ServerPlayerChatRoom.register({screen:eg.screen,callback:()=>"ChatRoom"===InformationSheetPreviousScreen}),Th.hookFunction("PreferenceClick",0,((e,t)=>{const r=PreferenceSubscreen;t(e),r||PreferenceSubscreen!==eg.screen||(PreferenceExit(),tg.loadChild(eg))})),PreferenceSubscreenList.push(eg.screen),tg=new Zm,"Preference"===CurrentScreen)return Ym()}));const og=32,ag=8,sg=Object.freeze(["Blue","Gold","Gray","Green","Orange","Purple","Red","Yellow"]);function lg(e){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "character" type: '+typeof e);if(!e.IsSimple()&&!e.IsPlayer())throw new Error("Expected a simple or player character")}function ug(e){if(!(e.OnlineSharedSettings?.BlockBodyCosplay??!0))return!0;const t=Hh.getRuleState("alt_allow_changing_appearance");return!(null===t||!e.IsPlayer())&&(t.inEffect&&t.isEnforced&&t.customData.minimumRole>3)}function cg(e){if("string"!=typeof e)throw new TypeError('Invalid "IDs" type: '+typeof e);let t="";for(const r of WheelFortuneOption)e.includes(r.ID)&&(t+=r.ID);return t}function dg(e=!0){return"object"==typeof ServerSocket&&null!==ServerSocket&&(!e||GameVersionFormat.test(GameVersion))}function pg(){return dg()&&void 0!==Player.OnlineSharedSettings}function hg(){return pg()&&void 0!==Player.MBSSettings}const fg=Object.freeze({"PSO Bondage":0,Mummification:1,"Bondage Maid":2,Petrification:3});class mg{constructor(e,t){this.name=null,this.mbsList=e,this.weight=Number.isInteger(t)?no(t,1,9):1}reset(){this.name=null,this.weight=1}isValid(e=null){return!!this.name&&this.mbsList.every(((t,r)=>r===e||t?.name!==this.name))}toString(){return Ah(typeof this,this.toJSON())}}class gg extends mg{get stripLevel(){return this.stripIter.value}set stripLevel(e){const t=this.stripIter.list.indexOf(e);this.stripIter.setPosition(t)}get equipLevel(){return this.equipIter.value}set equipLevel(e){const t=this.equipIter.list.indexOf(e);this.equipIter.setPosition(t)}constructor(e,t){super(e,t),this.itemList=null,this.flags=Object.freeze(Ff.map((e=>Object.seal({...e})))),this.outfitCache=null,this.stripIter=new Nh([qh.NONE,qh.CLOTHES,qh.UNDERWEAR,qh.COSPLAY],qh.UNDERWEAR),this.equipIter=new Nh([qh.NONE,qh.CLOTHES,qh.UNDERWEAR,qh.COSPLAY],qh.UNDERWEAR)}reset(){super.reset(),this.itemList=null,this.outfitCache=null,this.stripLevel=qh.UNDERWEAR,this.equipLevel=qh.UNDERWEAR,Ff.forEach(((e,t)=>Object.assign(this.flags[t],e)))}readSettings(e){if(!(e instanceof yg))throw new TypeError('Invalid "ItemSet" type: '+typeof e);this.name=e.name,this.itemList=e.itemList,this.stripLevel=e.stripLevel,this.equipLevel=e.equipLevel,this.outfitCache=null,this.weight=e.weight,e.flags.forEach(((e,t)=>Object.assign(this.flags[t],e)))}writeSettings(e=null){if(null===this.name||null===this.itemList)throw new Error('Cannot create an ItemSet while "name" or "itemList" is null');return new yg(this.name,this.itemList,this.mbsList,this.stripLevel,this.equipLevel,this.flags,!0,e,this.weight)}loadFromBase64(){if(null===this.outfitCache)return!1;let e,t;try{e=JSON.parse(LZString.decompressFromBase64(this.outfitCache.trim())),t=function(e){if(!vh(e)){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "items" type: '+typeof e);e=[e]}const t=[],r=new Map,n=new Set;return e.forEach(((e,i)=>{let o=null;try{o=AssetGet("Female3DCG",e.Group,e.Name);const r=of(o,e);!n.has(e.Group)&&null!=o&&(o.Group.IsItem()||o.Group.IsAppearance()&&o.Group.AllowNone)&&(n.add(e.Group),t.push(r))}catch(e){let t=`${o?.Group?.Name}${o?.Name}`;t.includes("undefined")&&(t=`Item ${i}`),r.set(t,e)}})),0!==r.size&&kh.log(`Failed to parse ${r.size} of the provided items`,r),t}(e)}catch(e){return kh.warn("Failed to parse outfit code:",e),!1}return 0!==t.length&&(this.itemList=Object.freeze(function(e,t=Uh){const r=Yh(e,t);return Hd(e,(e=>r.get(e.Group)?.priority??1/0))}(t)),!0)}isValid(e=null){return super.isValid(e)&&null!==this.itemList&&this.flags.some((e=>e.enabled))}toJSON(){return{name:this.name,itemList:this.itemList,stripLevel:this.stripLevel,equipLevel:this.equipLevel,flags:this.flags,outfitCache:this.outfitCache}}}class Rg extends mg{readSettings(e){if(!(e instanceof Sg))throw new TypeError('Invalid "command" type: '+typeof e);this.name=e.name,this.weight=e.weight}writeSettings(){if(null===this.name)throw new Error('Cannot create a Command while "name" is null');return new Sg(this.name,this.mbsList,this.weight)}toJSON(){return{name:this.name}}}class vg{get children(){return y(this,rg,"f")}get index(){return this.mbsList.findIndex((e=>e===this))}constructor(e,t,r,n){rg.set(this,null),this.name=e,this.custom=t,this.mbsList=r,this.weight=n}static validate(e){throw new Error("Trying to call an abstract method")}static fromObject(...e){throw new Error("Trying to call an abstract method")}register(){S(this,rg,this.toOptions(),"f")}unregister(){S(this,rg,null,"f")}toString(){return Ah(typeof this,this.toJSON())}}rg=new WeakMap;class bg extends vg{constructor(){super(...arguments),ng.add(this)}register(e=!0){super.register();let t=y(this,ng,"m",ig).call(this);for(const e of this.children){const r=WheelFortuneOption.findIndex((t=>t.ID===e.ID));-1!==r?(WheelFortuneOption[r]=e,e.Default&&!WheelFortuneDefault.includes(e.ID)&&(WheelFortuneDefault+=e.ID)):(WheelFortuneOption.splice(t,0,e),e.Default&&(WheelFortuneDefault+=e.ID)),t+=1}e&&Am([Om.SHARED])}unregister(e=!0){const t=this.children?.map((e=>e.ID))??[];super.unregister(),WheelFortuneOption=WheelFortuneOption.filter((e=>!t.includes(e.ID))),WheelFortuneDefault=Array.from(WheelFortuneDefault).filter((e=>!t.includes(e))).join(""),e&&Am([Om.SHARED])}}ng=new WeakSet,ig=function(){if(this.children?.length){const e=this.children[0].ID,t=WheelFortuneOption.findIndex((t=>t.ID>=e));return-1===t?WheelFortuneOption.length:t}return WheelFortuneOption.length};class yg extends bg{constructor(e,t,r,n,i,o,a,s,l){const u=yg.validate({name:e,itemList:t,mbsList:r,stripLevel:n,equipLevel:i,flags:o,custom:a,preRunCallback:s,weight:l});super(u.name,u.custom,u.mbsList,u.weight),this.itemList=u.itemList,this.stripLevel=u.stripLevel,this.equipLevel=u.equipLevel,this.flags=u.flags,this.preRunCallback=u.preRunCallback}static validate(e){if("string"!=typeof e.name)throw new TypeError('Invalid "name" type: '+typeof e.name);if(!vh(e.itemList))throw new TypeError('Invalid "itemList" type: '+typeof e.itemList);{const t=[],r=[];for(let n of e.itemList){const e=AssetGet("Female3DCG",n.Group,n.Name);null!=e?(e.Group.IsItem()||e.Group.IsAppearance()&&e.Group.AllowNone)&&(n.TypeRecord||void 0===n.Type||(n=Object.freeze({...gc(n,"Type"),TypeRecord:ExtendedItemTypeToRecord(e,n.Type)})),t.push(n)):r.push(`${n.Group}:${n.Name}`)}e.itemList=Object.freeze(t),0!==r.length&&kh.warn(`Found ${r.length} items in wheel of fortune item set "${this.name}": ${r}`)}if(!vh(e.mbsList))throw new TypeError('Invalid "mbsList" type: '+typeof e.mbsList);if(wh(Object.values(qh),e.stripLevel)||(e.stripLevel=qh.UNDERWEAR),wh(Object.values(qh),e.equipLevel)||(e.stripLevel=qh.UNDERWEAR),vh(e.flags)){let t;if(e.flags.every((e=>"string"==typeof e))){t=function(e){return Ff.map(((t,r)=>{const n={...t};return n.enabled=e.includes($f[r]),n}))}(e.flags)}else t=function(e){return Ff.map(((t,r)=>{const n=e[r];if(null===n||"object"!=typeof n||n.type!==t.type)return{...t};const i="boolean"==typeof n.enabled?n.enabled:t.enabled;switch(n.type){case"TimerPasswordPadlock":return Number.isInteger(n.time)&&n.time>=1&&n.time<=86400?{type:n.type,description:t.description,time:n.time,enabled:i}:{...t};case"ExclusivePadlock":case"HighSecurityPadlock":case null:return{type:n.type,description:t.description,enabled:i};default:return{...t}}}))}(e.flags);t.every((e=>!e.enabled))&&(t[0].enabled=!0),e.flags=Object.freeze(t.map((e=>Object.freeze(e))))}else e.flags=Ff;return"boolean"!=typeof e.custom&&(e.custom=!0),null!==e.preRunCallback&&"function"!=typeof e.preRunCallback&&(e.preRunCallback=null),Number.isInteger(e.weight)?e.weight=no(e.weight,1,9):e.weight=1,e}static fromObject(e,t){const r=[t.name,t.itemList,e,t.stripLevel,t.equipLevel,t.flags,t.custom,t.preRunCallback,t.weight];return new yg(...r)}scriptFactory(e=null){const t=this.itemList.map((({Name:e,Group:t})=>AssetGet(Player.AssetFamily,t,e)));return r=>{r=r??Player;const n=Kh(this.equipLevel,r),i=this.itemList.filter(((e,r)=>{const i=t[r];return null!=i&&("Appearance"!==i.Group.Category||n(i))}));Qh(this.name,i,this.stripLevel,e,this.preRunCallback,r??Player)}}getIDs(){const e=[];for(const[t,r]of this.flags.entries())r.enabled&&e.push(t);let t;if(this.custom){if(t=256*(2+Math.floor(this.index/16))+16*this.index,t<0)throw new Error(`Item set "${this.name}" absent from currently selected fortune wheel sets`)}else if(t=256+16*fg[this.name],Number.isNaN(t))throw new Error(`Unknown default item set "${this.name}"`);return Dh(t,e)}toOptions(){const e=this.flags.filter((e=>e.enabled)),t=this.getIDs();return e.map(((e,r)=>{const n=null===e.type?this.name:`${this.name}: ${Nf(e)}`;let i=!0;switch(e.type){case"HighSecurityPadlock":case null:i=!1;break;case"TimerPasswordPadlock":i=4!==r}return{ID:t[r],Color:Id(sg),Script:this.scriptFactory(((...t)=>function(e,t,r){const n=e.type;switch(n){case"TimerPasswordPadlock":Lf(t,e.time,r);break;case"ExclusivePadlock":Hf(t,"ExclusivePadlock",r);break;case"HighSecurityPadlock":InventoryDoesItemAllowLock(t)&&t.Craft&&(t.Craft.Property="Puzzling"),Tf(t,r);break;case null:break;default:throw new Error(`Unknown flag type: ${n}`,e)}}(e,...t))),Description:n,Default:i,Custom:this.custom,Parent:this,Flag:e,Weight:this.weight}}))}toJSON(){return{name:this.name,itemList:this.itemList,stripLevel:this.stripLevel,equipLevel:this.equipLevel,flags:this.flags,custom:this.custom,preRunCallback:this.preRunCallback,weight:this.weight}}}class Sg extends bg{constructor(e,t,r){const n=Sg.validate({name:e,mbsList:t,weight:r});super(n.name,!0,n.mbsList,n.weight)}static validate(e){if("string"!=typeof e.name)throw new TypeError('Invalid "name" type: '+typeof e.name);if(!Array.isArray(e.mbsList))throw new TypeError('Invalid "mbsList" type: '+typeof e.mbsList);return Number.isInteger(e.weight)?e.weight=no(e.weight,1,9):e.weight=1,e}static fromObject(e,t){const r=[t.name,e,t.weight];return new Sg(...r)}toOptions(){const[e]=this.getIDs();return[{ID:e,Color:Id(sg),Description:this.name,Default:!0,Custom:this.custom,Parent:this,Script:void 0,Flag:void 0,Weight:this.weight}]}getIDs(){const e=256*(3+Math.floor(this.index/16))+this.index;return[String.fromCharCode(e)]}toJSON(){return{name:this.name,weight:this.weight}}}let wg=null;function Cg(){return null===wg&&(wg=CharacterLoadSimple("MBSAPI")),wg}var kg=Object.freeze({__proto__:null,getAll:function(){if(!hg())return kh.error("MBS not fully loaded yet"),{};const e=Player.MBSSettings.FortuneWheelItemSets,t={};for(const[r,n]of e.entries())null!==n&&(t[n.name]={name:n.name,index:r,items:af(n.itemList,Cg())});return t},getByIndex:function(e){if("number"!=typeof e)throw new TypeError('Invalid "index" type: '+typeof e);if(!hg())return void kh.error("MBS not fully loaded yet");const t=Player.MBSSettings.FortuneWheelItemSets[e];return null==t?void 0:{name:t.name,index:e,items:af(t.itemList,Cg())}},getByName:function(e){if("string"!=typeof e)throw new TypeError('Invalid "name" type: '+typeof e);if(!hg())return void kh.error("MBS not fully loaded yet");let t=-1;const r=Player.MBSSettings.FortuneWheelItemSets.find(((r,n)=>{const i=r?.name===e;return i&&(t=n),i}));return null==r?void 0:{name:e,index:t,items:af(r.itemList,Cg())}},getIndices:function(){return hg()?Player.MBSSettings.FortuneWheelItemSets.filter((e=>null!==e)).map(((e,t)=>t)):(kh.error("MBS not fully loaded yet"),[])},getNames:function(){return hg()?Player.MBSSettings.FortuneWheelItemSets.filter((e=>null!==e)).map((e=>e.name)):(kh.error("MBS not fully loaded yet"),[])}});const Bg=Object.freeze({backgroundColor:"--mbs-background-color",buttonColor:"--mbs-button-color",buttonHoverColor:"--mbs-hover-color",tooltipColor:"--mbs-tooltip-color",borderColor:"--mbs-border-color",textColor:"--mbs-text-color"}),Pg=Object.freeze({backgroundColor:"white",buttonColor:"white",buttonHoverColor:"cyan",tooltipColor:"lightyellow",borderColor:"black",textColor:"black"});var xg=Object.freeze({__proto__:null,DEFAULT_STYLE:Pg,getStyle:function(){const e=document.querySelector(":root");return e?Sh(yh(Bg).map((([t,r])=>[t,e.style.getPropertyValue(r)||Pg[t]]))):(kh.error(":root selector missing in document"),{...Pg})},setStyle:function(e){if("object"!=typeof e)throw new TypeError(`Invalid style type: "${typeof e}"`);if(null===e)throw new Error("Invalid style value: null");const t=document.querySelector(":root");if(t)for(const[r,n]of yh(Bg)){const i=e[r];void 0!==i&&t.style.setProperty(n,i)}else kh.error(":root selector missing in document")}});const Mg=Object.freeze({major:1,minor:4}),Ig=function(){return hg()?JSON.stringify({log:kh,settings:Player.MBSSettings},void 0,4):JSON.stringify({log:kh,settings:"ERROR: MBS not fully loaded yet"},void 0,4)};Bh(dg).then((()=>{"undefined"!=typeof FUSAM&&"function"==typeof FUSAM.registerDebugMethod&&FUSAM.registerDebugMethod("mbs",Ig)}));const Eg="raises",_g="passes";function Og(e,t,r){if(!t)throw void 0===r?new Error(`${e}`):new Error(`${e}: ${r}`)}function $g(e,t,r){try{t()}catch(t){const n=t;if(n?.message!==r)throw new Error(`${e}: Invalid error message\nExpected error: "${r}"\nObserved error: "${n?.message}"`);return}throw new Error(`${e}: Failed to raise an error`)}function Fg(e,t){try{return t()}catch(t){throw new Error(`${e}: Unexpected error message: ${t}`,{cause:t})}}function Lg(e,t,r,n){if(n=n??Ng,!$u(t,r))throw new Error(`${e}: Passed objects not equal:\nObserved: ${n(t)}\nExpected: ${n(r)}`)}function Tg(e,t,r){if(typeof t!==r)throw new Error(`${e}: Invalid object type "${typeof t}", expected "${r}"`)}function Hg(e,t,r){if(t.length!==r)throw new Error(`${e}: Invalid object length ${t.length}, expected ${r}`)}function Ag(e,t){switch(typeof t){case"undefined":return"__UNDEFINED__";case"function":return"__FUNCTION__";case"symbol":return"__SYMBOL__";default:return t}}function Ng(e){return JSON.stringify(e,Ag,1)}var Dg=Object.freeze({__proto__:null,test_LoopIterator:function(){const e="test_LoopIterator";[{args:[void 0],excMessage:'Invalid "iterable" type: undefined'},{args:[[]],excMessage:'Passed "iterable" must contain at least one element'},{args:[[1],.5],excMessage:'"index" must be an integer: 0.5'},{args:[[0,1],3],excMessage:'"index" must fall in the [0, 1] interval: 3'}].forEach((({args:t,excMessage:r},n)=>{$g(`${e}:constructor:${Eg}:${n}`,(()=>new Nh(...t)),r)}));const t=new Nh([0,1,2,3],0);let r;Lg(`${e}:list:${_g}:0`,t.list,[0,1,2,3]),Lg(`${e}:index:${_g}:0`,t.index,0),Lg(`${e}:value:${_g}:0`,t.index,0),Tg(`${e}:[Symbol.iterator]:${_g}:0`,t[Symbol.iterator],"function"),r=Fg(`${e}:next:${_g}:0`,(()=>t.next(!1))),Lg(`${e}:next:${_g}:0`,r,1),Lg(`${e}:next:${_g}:0`,t.index,0),r=Fg(`${e}:next:${_g}:0`,(()=>t.next())),Lg(`${e}:next:${_g}:0`,r,1),Lg(`${e}:next:${_g}:0`,t.index,1),$g(`${e}:setPosition:${Eg}:0`,(()=>t.setPosition(10)),'"index" must fall in the [0, 3] interval: 10'),Fg(`${e}:setPosition:${_g}:0`,(()=>t.setPosition(0))),Lg(`${e}:setPosition:${_g}:0`,t.index,0),r=Fg(`${e}:previous:${_g}:0`,(()=>t.previous(!1))),Lg(`${e}:previous:${_g}:0`,r,3),Lg(`${e}:previous:${_g}:0`,t.index,0),r=Fg(`${e}:previous:${_g}:0`,(()=>t.previous())),Lg(`${e}:previous:${_g}:0`,r,3),Lg(`${e}:previous:${_g}:0`,t.index,3),r=Fg(`${e}:toString:${_g}:0`,(()=>t.toString())),Tg(`${e}:toString:${_g}:0`,r,"string"),r=Fg(`${e}:toJSON:${_g}:0`,(()=>t.toJSON())),Lg(`${e}:toJSON:${_g}:0`,t.toJSON(),{list:[0,1,2,3],index:3})},test_MBS_VERSION:function(){Tg(`test_MBS_VERSION:${_g}:0`,t,"string")},test_Version:function(){const e="test_Version";[{args:["bob",0,0,!1],excMessage:'Invalid "major" type: string'},{args:[0,"bob",0,!1],excMessage:'Invalid "minor" type: string'},{args:[0,0,"bob",!1],excMessage:'Invalid "micro" type: string'},{args:[0,0,0,"bob"],excMessage:'Invalid "beta" type: string'}].forEach((({args:t,excMessage:r},n)=>{$g(`${e}:constructor:${Eg}:${n}`,(()=>new jh(...t)),r)}));const t=new jh(1,0,5),r=new jh(2,3,1),n=new jh(0,99,5,!0);Lg(`${e}:major:${_g}:0`,t.major,1),Lg(`${e}:minor:${_g}:0`,t.minor,0),Lg(`${e}:micro:${_g}:0`,t.micro,5),Lg(`${e}:beta:${_g}:0`,t.beta,!1),Og(`${e}:equal:${_g}:0`,!t.equal(null)),Og(`${e}:equal:${_g}:1`,t.equal(t)),Og(`${e}:equal:${_g}:2`,!t.equal(r)),Og(`${e}:equal:${_g}:3`,!t.equal(n)),Og(`${e}:greater:${_g}:0`,!t.greater(null)),Og(`${e}:greater:${_g}:1`,!t.greater(t)),Og(`${e}:greater:${_g}:2`,!t.greater(r)),Og(`${e}:greater:${_g}:3`,t.greater(n)),Og(`${e}:lesser:${_g}:0`,!t.lesser(null)),Og(`${e}:lesser:${_g}:1`,!t.lesser(t)),Og(`${e}:lesser:${_g}:2`,t.lesser(r)),Og(`${e}:lesser:${_g}:3`,!t.lesser(n)),Og(`${e}:greaterOrEqual:${_g}:0`,!t.greaterOrEqual(null)),Og(`${e}:greaterOrEqual:${_g}:1`,t.greaterOrEqual(t)),Og(`${e}:greaterOrEqual:${_g}:2`,!t.greaterOrEqual(r)),Og(`${e}:greaterOrEqual:${_g}:3`,t.greaterOrEqual(n)),Og(`${e}:lesserOrEqual:${_g}:0`,!t.lesserOrEqual(null)),Og(`${e}:lesserOrEqual:${_g}:1`,t.lesserOrEqual(t)),Og(`${e}:lesserOrEqual:${_g}:2`,t.lesserOrEqual(r)),Og(`${e}:lesserOrEqual:${_g}:3`,!t.lesserOrEqual(n));let i=Fg(`${e}:fromVersion:${_g}:0`,(()=>jh.fromVersion("1.0.5")));Lg(`${e}:fromVersion:${_g}:0`,i,t),$g(`${e}:fromVersion:${Eg}:0`,(()=>jh.fromVersion(void 0)),'Invalid "version": undefined'),i=Fg(`${e}:fromVersion:${_g}:0`,(()=>jh.fromBCVersion("R109Beta3"))),Lg(`${e}:fromVersion:${_g}:0`,i,new jh(109,0,0,!0)),$g(`${e}:fromVersion:${Eg}:0`,(()=>jh.fromVersion(void 0)),'Invalid "version": undefined'),i=Fg(`${e}:toString:${_g}:0`,(()=>t.toString())),Tg(`${e}:toString:${_g}:0`,i,"string"),i=Fg(`${e}:toJSON:${_g}:0`,(()=>t.toJSON())),Lg(`${e}:toJSON:${_g}:0`,i,{major:1,minor:0,micro:5,beta:!1})},test_generateIDs:function(){const e="test_generateIDs";[{args:[0,void 0],excMessage:'Invalid "indices" type: undefined'},{args:[65535,[5]],excMessage:'"stop" must fall in the [65536, 65535] interval: 65541'}].forEach((({args:t,excMessage:r},n)=>{$g(`${e}:${Eg}:${n}`,(()=>Dh(...t)),r)})),[{args:[80,[0,4,6]],output:["P","T","V"]},{args:[1024,[0,4,1]],output:["Ѐ","Є","Ё"]},{args:[0,[]],output:[]}].forEach((({args:t,output:r},n)=>{const i=Fg(`${e}:${_g}:${n}`,(()=>Dh(...t)));Lg(`${e}:${_g}:${n}`,i,r)}))},test_getRandomPassword:function(){const e="test_getRandomPassword";[{args:[void 0],excMessage:'Invalid "n" type: undefined'}].forEach((({args:t,excMessage:r},n)=>{$g(`${e}:${Eg}:${n}`,(()=>Lh(...t)),r)})),bd(0,9).forEach((t=>{const r=Fg(`${e}:${_g}:${t}`,(()=>Lh(t)));Tg(`${e}:${_g}:${t}`,r,"string"),Hg(`${e}:${_g}:${t}`,r,t)}))},test_isIterable:function(){const e="test_isIterable";[{args:[null],output:!1},{args:[1],output:!1},{args:[[1]],output:!0},{args:[new Set],output:!0}].forEach((({args:t,output:r},n)=>{const i=Fg(`${e}:${_g}:${n}`,(()=>Gh(...t)));Lg(`${e}:${_g}:${n}`,i,r)}))},test_padArray:function(){const e="test_padArray";[{args:[[],.5,null],excMessage:'"n" must be an integer: 0.5'},{args:[void 0,5,null],excMessage:'Invalid "list" type: undefined'}].forEach((({args:t,excMessage:r},n)=>{$g(`${e}:${Eg}:${n}`,(()=>$h(...t)),r)})),[{args:[["a","b","c"],5,"test"],output:["a","b","c","test","test"]},{args:[["a","b","c"],2,"test"],output:["a","b","c"]}].forEach((({args:t,output:r},n)=>{const i=Fg(`${e}:${_g}:${n}`,(()=>$h(...t)));Lg(`${e}:${_g}:${n}`,i,r)}))},test_trimArray:function(){const e="test_trimArray";[{args:[[],.5],excMessage:'"n" must be an integer: 0.5'},{args:[void 0,5],excMessage:'Invalid "list" type: undefined'}].forEach((({args:t,excMessage:r},n)=>{$g(`${e}:${Eg}:${n}`,(()=>Fh(...t)),r)})),[{args:[["a","b","c"],1],output:["a"]},{args:[["a","b","c"],4],output:["a","b","c"]}].forEach((({args:t,output:r},n)=>{const i=Fg(`${e}:${_g}:${n}`,(()=>Fh(...t)));Lg(`${e}:${_g}:${n}`,i,r)}))},test_validateInt:function(){const e="test_validateInt";[{args:[.5,"test"],excMessage:'"test" must be an integer: 0.5'},{args:["test","test"],excMessage:'Invalid "test" type: string'},{args:[5,"test",10],excMessage:'"test" must fall in the [10, Infinity] interval: 5'},{args:[5,"test",0,3],excMessage:'"test" must fall in the [0, 3] interval: 5'}].forEach((({args:t,excMessage:r},n)=>{$g(`${e}:${Eg}:${n}`,(()=>Oh(...t)),r)})),Fg(`${e}:${_g}:0`,(()=>Oh(0,"test")))}});var Gg=Object.freeze({__proto__:null,test_FORTUNE_WHEEL_COLORS:function(){const e="test_FORTUNE_WHEEL_COLORS";Og(`${e}:${_g}:0`,Array.isArray(sg)),Og(`${e}:${_g}:0`,sg.every((e=>"string"==typeof e)))},test_FORTUNE_WHEEL_MAX_SETS:function(){const e="test_FORTUNE_WHEEL_MAX_SETS";Tg(`${e}:${_g}:0`,og,"number"),Og(`${e}:${_g}:0`,Number.isInteger(og)),Og(`${e}:${_g}:0`,og>=0)},test_canChangeCosplay:function(){const e="test_canChangeCosplay",t=bd(0,3).map((t=>`${e}${t}`)).map((e=>{const t=CharacterLoadSimple(e);return t.OnlineSharedSettings=t.OnlineSharedSettings??{},t}));try{t[1].OnlineSharedSettings={...t[1].OnlineSharedSettings??{},BlockBodyCosplay:!1},t[2].OnlineSharedSettings={...t[1].OnlineSharedSettings??{},BlockBodyCosplay:!0};[{args:[t[0]],output:!1},{args:[t[1]],output:!0},{args:[t[2]],output:!1}].forEach((({args:t,output:r},n)=>{const i=Fg(`${e}:${_g}:${n}`,(()=>ug(...t)));Lg(`${e}:${_g}:${n}`,i,r)}))}finally{t.forEach((e=>CharacterDelete(e)))}},test_equipHighSecLock:function(){const e="test_equipHighSecLock",t=CharacterLoadSimple(e);try{const r=AssetGet(t.AssetFamily,"ItemArms","LatexArmbinder");if(null==r)throw new Error;const n={Asset:r};Fg(`${e}:${_g}:0`,(()=>Tf(n,t))),Lg(`${e}:${_g}:0`,n.Property?.MemberNumberListKeys,"")}finally{CharacterDelete(t)}},test_equipLock:function(){const e="test_equipLock",t=bd(0,5).map((t=>`${e}-${t}`)).map(CharacterLoadSimple);try{t[4].BlockItems.push({Name:"ExclusivePadlock",Group:"ItemMisc"}),InventoryWear(t[2],"LatexArmbinder","ItemArms"),InventoryLock(t[2],t[2].Appearance.at(-1),"ExclusivePadlock");const r=AssetGet(t[0].AssetFamily,"ItemArms","LatexArmbinder"),n=AssetGet(t[0].AssetFamily,"ItemArms","NylonRope");if(null==r||null==n)throw new Error;const i={Asset:r};[{args:["bob","ExclusivePadlock",t[0]],excMessage:'Invalid "item" type: string'},{args:[i,0,t[0]],excMessage:'Invalid "lockName" type: number'},{args:[i,"bob",t[0]],excMessage:'Invalid "lockName" value: bob'},{args:[i,"ExclusivePadlock",1],excMessage:'Invalid "character" type: number'}].forEach((({args:t,excMessage:r},n)=>{$g(`${e}:${Eg}:${n}`,(()=>Hf(...t)),r)}));[{args:[i,"ExclusivePadlock",t[1]],output:!0},{args:[i,"ExclusivePadlock",t[2]],output:!1},{args:[{Asset:n},"ExclusivePadlock",t[3]],output:!1},{args:[i,"ExclusivePadlock",t[4]],output:!1}].forEach((({args:t,output:r},n)=>{const i=Fg(`${e}:${_g}:${n}`,(()=>Hf(...t)));Lg(`${e}:${_g}:0`,i,r)}))}finally{t.forEach((e=>CharacterDelete(e)))}},test_equipTimerLock:function(){const e="test_equipTimerLock",t=CharacterLoadSimple(e);try{const r=AssetGet(t.AssetFamily,"ItemArms","LatexArmbinder");if(null==r)throw new Error;const n={Asset:r};$g(`${e}:${Eg}:0`,(()=>Lf(n,void 0,t)),'Invalid "seconds" type: undefined'),Fg(`${e}:${_g}:0`,(()=>Lf(n,99,t))),Og(`${e}:${_g}:0`,(n.Property?.RemoveTimer??1/0)<=CurrentTime+198e4),Lg(`${e}:${_g}:0`,n.Property?.RemoveItem,!0),Lg(`${e}:${_g}:0`,n.Property?.LockSet,!0),Tg(`${e}:${_g}:0`,n.Property?.Password,"string")}finally{CharacterDelete(t)}},test_sanitizeWheelFortuneIDs:function(){const e="test_sanitizeWheelFortuneIDs";$g(`${e}:${Eg}:0`,(()=>cg(void 0)),'Invalid "IDs" type: undefined'),[{args:["ABC"],output:"ABC"},{args:["A䀁"],output:"A"}].forEach((({args:t,output:r},n)=>{const i=Fg(`${e}:${_g}:${n}`,(()=>cg(...t)));Lg(`${e}:${_g}:${n}`,i,r)}))},test_settingsLoaded:function(){const e="test_settingsLoaded",t=Fg(`${e}:${_g}:0`,pg);Lg(`${e}:${_g}:0`,t,!0)},test_settingsMBSLoaded:function(){const e="test_settingsMBSLoaded",t=Fg(`${e}:${_g}:0`,hg);Lg(`${e}:${_g}:0`,t,!0)}});const jg=Object.freeze({Mummification:e=>({...e,TypeRecord:void 0})});var Wg=Object.freeze({__proto__:null,test_builtinMBSWheel:function(){const e="test_builtinMBSWheel",t=In(Object.values(am).map((e=>e.children??[]))),r=t.map((e=>e.Description)).map((e=>CharacterLoadSimple(e)));try{t.forEach((t=>{if(!(t.Parent instanceof yg))return;const r=CharacterLoadSimple(t.Description);t.Script(r);for(let n of t.Parent.itemList){const i=InventoryGet(r,n.Group);if(void 0!==n.Equip)continue;Og(`${e}:${t.Description}:${n.Group}:${n.Name}:${_g}`,null!=i);const o=(jg[t.Parent.name]??(e=>e))(of(i.Asset,{...i,Group:i.Asset.Group.Name,Name:i.Asset.Name,Color:void 0===n.Color?void 0:i.Color},!1),r);null!==o&&(n={...n,ItemCallback:void 0,Property:{...o.Property,...n.Property},Equip:void 0,Craft:void 0!==n.Craft&&"HighSecurityPadlock"===t.Flag.type&&InventoryDoesItemAllowLock(i)?{...n.Craft,Property:"Puzzling"}:n.Craft},Lg(`${e}:${t.Description}:${n.Group}:${n.Name}:${_g}`,o,n))}}))}finally{r.forEach((e=>CharacterDelete(e)))}}});const zg=function(){if(!hg())return kh.warn("MBS not fully loaded yet"),!1;const e={...Dg,...Gg,...Wg},t={};for(const[r,n]of yh(e))try{n()}catch(e){t[r]=e}return 0===Object.values(t).length||(kh.warn(t),!1)};Bh(dg).then((()=>{const e={[`${wf.screen}Background`]:wf.background,[`${Bf.screen}Background`]:Bf.background,[`${Of.screen}Background`]:Of.background,[`${eg.screen}Background`]:eg.background,[`${rm.screen}Background`]:rm.background},t=globalThis;Object.assign(t,e)}));const Vg=new Set;Bh(dg).then((()=>{Vg.size?kh.log("Initializing R105 bug fix backports",Hd(Array.from(Vg))):kh.log("No R105 bug fix backports")}));var qg={Blush:"R98"},Ug={Large:"R98",Normal:"R98",Small:"R98",XLarge:"R98"},Kg={BodyWritings:"R103",WombTattoos:"R101"},Jg={FlatMedium:"R98",FlatSmall:"R98",Large:"R98",Normal:"R98",Small:"R98",XLarge:"R98"},Yg={Bandeau1:"R98",Bikini1:"R98",BondageBra1:"R98",Bra1:"R98",Bra10:"R98",Bra2:"R98",Bra7:"R98",Bra8:"R98",Bra9:"R98",BunnySuit:"R98",Bustier1:"R98",Camisole:"R98",ChineseBra1:"R98",ClamShell:"R98",CoconutBra:"R98",CorsetBikini1:"R98",CowPrintedBra:"R98",CuteBikini1:"R98",DominatrixLeotard:"R98",FishnetBikini1:"R98",FlowerBra:"R98",FrameBra1:"R98",FrameBra2:"R98",FullLatexBra:"R98",FullLatexBra2:"R98",HaremBra:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeartTop:"R98",KittyBra1:"R98",LatexBra1:"R98",LatexBunnySuit:"R98",LeatherBreastBinder:"R98",LeatherStrapBra1:"R98",LeatherVestSuit:"R104",MaidBra1:"R98",OuvertPerl1:"R98",Ribbons:"R98",Sarashi1:"R98",SexyBeachBra1:"R98",SexyBikini1:"R98",SexyBikini2:"R98",SexyBikini3:"R98",SexyBikiniBra1:"R98",SleevelessSlimLatexLeotard:"R98",StarHarnessBra:"R98",StrapBra:"R98",StuddedHarness:"R98",Swimsuit1:"R98",Swimsuit2:"R98",Swimsuit3:"R98"},Zg={Band1:"R98",BowBand:"R98",KinkBracelet:"R98",LaceBands:"R98",LesBand:"R98",SpikeBands:"R98",WristWatch:"R103",Wristband:"R98"},Xg={AdmiralTop:"R98",AdultBabyDress1:"R98",AdultBabyDress2:"R98",AdultBabyDress3:"R98",AdultBabyDress4:"R98",BabydollDress1:"R98",Blouse1:"R98",Bodice1:"R98",BodyTowel1:"R98",BondageBustier1:"R98",BondageBustier2:"R98",BondageDress1:"R98",BondageDress2:"R98",BridesmaidDress1:"R98",BusinessSuit:"R101",ButtonShirt:"R98",CheerleaderTop:"R98",ChineseDress1:"R98",ChineseDress2:"R98",CollegeOutfit1:"R98",ComfyTop:"R98",CorsetDress:"R101",CorsetShirt:"R98",CropTop:"R98",CustomTShirt:"R103",Dress2:"R98",Dress3:"R98",DressFur:"R98",EveningGown:"R102",FishnetTop:"R98",FlowerDress:"R98",FrilledShirt:"R98",FurCoat:"R98",FuzzyDress:"R98",Gown1:"R98",Gown2Top:"R98",Gown3:"R98",GrandMage:"R98",HeavyLeatherDress:"R102",Hoodie:"R98",Jacket:"R98",LaceBabydoll:"R98",LatexLacedSuit:"R98",LatexTankTop:"R98",LatexTop:"R98",Laurel:"R98",LeatherBolero:"R98",LeatherCorsetTop1:"R98",LeatherCropTop:"R98",MaidApron1:"R98",MaidApron2:"R98",MaidLatex:"R101",MaidOutfit1:"R98",MaidOutfit2:"R98",MaleTankTop1:"R98",MistressTop:"R98",NunRobes:"R104",NurseUniform:"R98",RetroGirdle:"R98",ReverseBunnySuit:"R98",Robe1:"R98",SeethroughTop:"R98",ShoulderlessTop:"R98",SlaveRags:"R98",SleevelessTop:"R98",SteampunkCorsetTop1:"R98",StudentOutfit1:"R98",StudentOutfit2:"R98",StudentOutfit3:"R98",SummerDress:"R98",SuspenderTop1:"R98",Sweater1:"R98",TShirt1:"R98",TShirt2:"R98",TeacherOutfit1:"R98",TennisShirt1:"R98",VirginKiller1:"R98",WeddingDress1:"R98",WeddingDress2:"R98",Yukata1:"R98",YuletideVelvetWarmth:"R104"},Qg={Bib:"R98",BodyWritings:"R103",Bouquet:"R98",BowBackAccessory:"R104",BugLegs:"R98",BunnyCollarCuffs:"R98",Camera1:"R98",Cape:"R98",CatsuitCollar:"R98",FacePaint:"R98",FrillyApron:"R98",FurBolero:"R98",Glitter:"R98",JewelrySet:"R98",Kissmark:"R98",KissmarkDummy:"R98",LargeBelt:"R98",LatexApron:"R101",LeatherStraps:"R98",Poncho:"R98",Scarf:"R98",StudentOutfit3Bow1:"R98",StudentOutfit3Bow2:"R98",StudentOutfit3Bow3:"R98",StudentOutfit3Scarf:"R98",WombTattoos:"R101",ZipperBelt:"R99"},eR={AdmiralSkirt:"R98",AsymmetricSkirt:"R98",BondageSkirt:"R98",BusinessSkirt:"R98",BusinessTrousers:"R101",CheerleaderSkirt:"R98",ChineseSkirt1:"R98",ClothSkirt1:"R98",CollegeSkirt:"R98",CrossSkirt:"R98",CrossSkirtLight:"R98",ElegantSkirt:"R98",Gown2Skirt:"R98",HaremPants:"R98",HaremPants2:"R98",HulaSkirt:"R98",JeanSkirt:"R98",Jeans1:"R98",Jeans2:"R98",JeansShorts:"R98",LatexPants1:"R98",LatexSkirt1:"R98",LatexSkirt2:"R98",Leggings1:"R98",Leggings2:"R98",LongLeatherSkirt:"R98",LongPleatedSkirt:"R98",LongSkirt1:"R98",MageSkirt:"R98",MistressBottom:"R98",Pajama1:"R98",PantBoots:"R98",PencilSkirt:"R98",PleatedSkirt:"R98",RuffledSkirt:"R98",ShortPencilSkirt:"R98",ShortPlaidSkirt:"R98",Shorts1:"R98",Skirt1:"R98",Skirt2:"R98",Skirt3:"R98",TennisSkirt1:"R98",TulleSkirt:"R98",Tutu:"R98",Waspie1:"R98",Waspie2:"R98",Waspie3:"R98"},tR={ClassicLatexCorset:"R98",Corset1:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",Corset6:"R98",CorsetDress:"R101",LatexCorset1:"R98",LeatherCorsetTop1:"R98",SteampunkCorsetTop1:"R98",Underbust:"R98"},rR={Emoticon:"R98"},nR={Eyebrows1:"R98",Eyebrows2:"R98",Eyebrows7:"R98",Eyebrows8:"R98"},iR={Eyes1:"R98",Eyes10:"R98",Eyes11:"R98",Eyes12:"R98",Eyes13:"R98",Eyes14:"R99",Eyes2:"R98",Eyes3:"R98",Eyes4:"R98",Eyes5:"R98",Eyes6:"R98",Eyes7:"R98",Eyes8:"R98",Eyes9:"R98"},oR={Eyes1:"R98",Eyes10:"R98",Eyes11:"R98",Eyes12:"R98",Eyes13:"R98",Eyes14:"R99",Eyes2:"R98",Eyes3:"R98",Eyes4:"R98",Eyes5:"R98",Eyes6:"R98",Eyes7:"R98",Eyes8:"R98",Eyes9:"R98"},aR={CatEye:"R98",CatEye2:"R98",LargeBlurred:"R98",LargeSolid:"R98",SmallBlurred:"R98",SmallSolid:"R98",SuperstarBlurred:"R98",SuperstarSolid:"R98",Tanuki:"R98",UndershadowedBlurred:"R98",UndershadowedSolid:"R98",Wings:"R98"},sR={BigBeard:"R98",ChinstrapBeard:"R98",Goatee:"R98",MediumBeard:"R98",Moustache:"R98",MoustacheBeard:"R98"},lR={Fluids:"R98"},uR={DropBag:"R98",GarterBelt:"R98",GarterBelt2:"R98",GarterBelt3:"R98",Tentacles:"R98"},cR={CatGlasses:"R98",EyePatch1:"R98",Glasses1:"R98",Glasses2:"R98",Glasses3:"R98",Glasses4:"R98",Glasses5:"R98",Glasses6:"R98",Goggles:"R98",GradientSunglasses:"R98",JokeGlasses:"R98",StreetEyewear:"R100",SunGlasses1:"R98",SunGlasses2:"R98",SunGlassesClear:"R98",VGlasses:"R98"},dR={BikerGloves:"R98",Catsuit:"R98",CheerleaderPomPoms:"R98",CowPrintedGloves:"R98",FingerlessGloves:"R98",FishnetGloves:"R98",Gloves1:"R98",Gloves2:"R98",Gloves3:"R98",GlovesFur:"R98",HaremGlove:"R98",LatexElbowGloves:"R98",LatexShortGloves:"R98",MistressGloves:"R98",SeethroughSuit:"R98",WarmGloves:"R103"},pR={Antennae:"R98",BatWings:"R98",BigLynxEars:"R98",BunnyEars1:"R98",BunnyEars2:"R98",CowEars:"R104",CowHorns:"R98",DildocornHorn:"R98",EarWarmer:"R103",Ears1:"R98",Ears2:"R98",ElfEars:"R98",FoxEars1:"R98",FoxEars2:"R98",FoxEars3:"R98",GiantBow1:"R98",HairFeathers1:"R98",HairFlower1:"R98",Halo:"R98",Headset1:"R101",Horns:"R98",Horns2:"R98",Horns3:"R98",Horns4:"R104",Horns5:"R104",KittenEars1:"R98",KittenEars2:"R98",MouseEars1:"R98",MouseEars2:"R98",PonyEars1:"R98",PuppyEars1:"R98",PuppyEars2:"R98",RaccoonEars1:"R98",Ribbons1:"R98",Ribbons2:"R98",Ribbons3:"R98",Ribbons4:"R98",SuccubusHorns:"R98",UnicornHorn:"R98",WeddingVeil1:"R98",WolfEars1:"R98",WolfEars2:"R98"},hR={Antennae:"R98",BatWings:"R98",BunnyEars1:"R98",BunnyEars2:"R98",CowEars:"R104",CowHorns:"R98",DildocornHorn:"R98",Ears1:"R98",Ears2:"R98",ElfEars:"R98",FoxEars1:"R98",FoxEars2:"R98",FoxEars3:"R98",Horns:"R98",Horns2:"R98",Horns3:"R98",Horns4:"R104",Horns5:"R104",KittenEars1:"R98",KittenEars2:"R98",MouseEars1:"R98",MouseEars2:"R98",PonyEars1:"R98",PuppyEars1:"R98",PuppyEars2:"R98",RaccoonEars1:"R98",SuccubusHorns:"R98",UnicornHorn:"R98",WolfEars1:"R98",WolfEars2:"R98"},fR={EarWarmer:"R103",GiantBow1:"R98",HairFeathers1:"R98",HairFlower1:"R98",Halo:"R98",Headset1:"R101",Ribbons1:"R98",Ribbons2:"R98",Ribbons3:"R98",Ribbons4:"R98",WeddingVeil1:"R98"},mR={HairBack1:"R98",HairBack10:"R98",HairBack10b:"R98",HairBack11:"R98",HairBack12:"R98",HairBack12b:"R98",HairBack13:"R98",HairBack13b:"R98",HairBack14:"R98",HairBack15:"R98",HairBack15b:"R98",HairBack16:"R98",HairBack17:"R98",HairBack18:"R98",HairBack18b:"R98",HairBack19:"R98",HairBack19b:"R98",HairBack1b:"R98",HairBack2:"R98",HairBack20:"R98",HairBack20b:"R98",HairBack21:"R98",HairBack22:"R98",HairBack23:"R98",HairBack24:"R98",HairBack25:"R98",HairBack26:"R98",HairBack27:"R98",HairBack28:"R98",HairBack29:"R98",HairBack2b:"R98",HairBack30:"R98",HairBack31:"R98",HairBack32:"R98",HairBack33:"R98",HairBack34:"R98",HairBack35:"R98",HairBack36:"R98",HairBack37:"R98",HairBack38:"R98",HairBack39:"R98",HairBack4:"R98",HairBack40:"R98",HairBack41:"R98",HairBack42:"R98",HairBack43:"R98",HairBack44:"R98",HairBack45:"R98",HairBack46:"R98",HairBack47:"R98",HairBack48:"R98",HairBack49:"R98",HairBack4b:"R98",HairBack5:"R98",HairBack50:"R98",HairBack51:"R98",HairBack52:"R98",HairBack53:"R98",HairBack54:"R98",HairBack54b:"R98",HairBack55:"R98",HairBack55b:"R98",HairBack56:"R98",HairBack56b:"R98",HairBack57:"R98",HairBack57b:"R98",HairBack57c:"R98",HairBack57d:"R102",HairBack58:"R103",HairBack58b:"R103",HairBack59:"R103",HairBack5b:"R98",HairBack6:"R98",HairBack60:"R103",HairBack61:"R103",HairBack62:"R104",HairBack63:"R104",HairBack6b:"R98",HairBack7:"R98",HairBack7b:"R98",HairBack7c:"R98",HairBack8:"R98",HairBack9:"R98",HairBack9b:"R98",HairNone:"R98"},gR={HairFront1:"R98",HairFront10:"R98",HairFront10b:"R98",HairFront11:"R98",HairFront11b:"R98",HairFront12:"R98",HairFront12b:"R98",HairFront13:"R98",HairFront13b:"R98",HairFront14:"R98",HairFront14b:"R98",HairFront15:"R98",HairFront16:"R98",HairFront17:"R98",HairFront17b:"R98",HairFront18:"R98",HairFront19:"R98",HairFront1b:"R98",HairFront2:"R98",HairFront20:"R98",HairFront21:"R98",HairFront22:"R98",HairFront22b:"R98",HairFront23:"R98",HairFront23b:"R98",HairFront24:"R98",HairFront25:"R98",HairFront26:"R98",HairFront27:"R98",HairFront28:"R98",HairFront28b:"R98",HairFront29:"R98",HairFront29b:"R98",HairFront2b:"R98",HairFront3:"R98",HairFront30:"R98",HairFront31:"R98",HairFront32:"R98",HairFront33:"R98",HairFront33b:"R98",HairFront34:"R98",HairFront35:"R98",HairFront36:"R98",HairFront37:"R98",HairFront37b:"R98",HairFront38:"R98",HairFront38b:"R98",HairFront39:"R98",HairFront39b:"R98",HairFront3b:"R98",HairFront4:"R98",HairFront40:"R98",HairFront40b:"R98",HairFront41:"R98",HairFront41b:"R98",HairFront42:"R98",HairFront42b:"R98",HairFront43:"R98",HairFront43b:"R98",HairFront44:"R98",HairFront44b:"R98",HairFront45:"R98",HairFront45b:"R98",HairFront46:"R98",HairFront46b:"R98",HairFront47:"R98",HairFront47b:"R98",HairFront48:"R98",HairFront48b:"R98",HairFront49:"R98",HairFront4b:"R98",HairFront5:"R98",HairFront50:"R98",HairFront51:"R98",HairFront51b:"R98",HairFront52:"R98",HairFront52b:"R98",HairFront53:"R98",HairFront54:"R103",HairFront55:"R103",HairFront56:"R103",HairFront57:"R104",HairFront5b:"R98",HairFront6:"R98",HairFront6b:"R98",HairFront7:"R98",HairFront7b:"R98",HairFront8:"R98",HairFront8b:"R98",HairFront9:"R98",HairFront9b:"R98"},RR={Default:"R98"},vR={BakerBoyHat:"R98",BallCapBack:"R98",BallCapFront:"R98",Band1:"R98",Band2:"R98",Bandana:"R98",Beanie:"R98",Beret1:"R98",Bonnet1:"R98",Bonnet2:"R98",BunnySuccubus2:"R98",CaptainHat1:"R98",CollegeDunce:"R98",CowboyHat:"R98",Crown1:"R98",Crown2:"R98",Crown3:"R98",Crown4:"R98",Crown5:"R98",FacePaint:"R98",FlowerCrown:"R98",FurHeadband:"R98",HeadTowel1:"R98",LatexHabit:"R98",MaidHairband1:"R98",MaidLatexHairband:"R101",NunHabit:"R98",NunVeil:"R104",NurseCap:"R98",PirateBandana1:"R98",PirateHat:"R98",PoliceWomanHat:"R98",PoppyCrown:"R98",ReindeerBand:"R98",RoseCrown:"R98",Santa1:"R98",SmallHat1:"R98",SwimCap:"R98",Tiara1:"R98",Veil1:"R98",Veil2:"R98",WitchHat1:"R98"},bR={Default:"R98",NoEars:"R98",SmallEars:"R98"},yR={H0900:"R98",H0910:"R98",H0920:"R98",H0930:"R98",H0940:"R98",H0950:"R98",H0960:"R98",H0970:"R98",H0980:"R98",H0990:"R98",H1000:"R98"},SR={BedChains:"R98",BedRopes:"R98",BedStraps:"R98",BedTape:"R98",CeilingChain:"R98",CeilingRope:"R98",Covers:"R98"},wR={ArmbinderJacket:"R98",BitchSuit:"R98",Bolero:"R98",BondageBouquet:"R98",BondageBra:"R98",BoxTieArmbinder:"R98",CanvasStraitjacket1:"R98",CeilingShackles:"R98",Chains:"R98",CollarCuffs:"R98",CollarMetalcuffs:"R103",DuctTape:"R98",FourLimbsShackles:"R98",FullBodyLeatherHarness:"R98",FullBodyShackles:"R98",FullLatexSuit:"R98",FurStraitJacket:"R98",FuturisticArmbinder:"R98",FuturisticCuffs:"R98",FuturisticStraitjacket:"R98",HeavyYoke:"R98",HempRope:"R98",HighSecurityStraitJacket:"R98",HighStyleSteelCuffs:"R98",InflatableStraightLeotard:"R98",LatexArmbinder:"R98",LatexBoxtieLeotard:"R98",LatexButterflyLeotard:"R98",LatexSleevelessLeotard:"R98",LeatherArmSplints:"R98",LeatherArmbinder:"R98",LeatherCuffs:"R98",LeatherDeluxeCuffs:"R98",LeatherStraitJacket:"R98",Manacles:"R98",MedicalBedRestraints:"R98",MermaidSuit:"R98",MetalCuffs:"R98",NylonRope:"R98",OrnateCuffs:"R98",PantyhoseBody:"R98",PantyhoseBodyOpen:"R98",PetCrawler:"R98",Pillory:"R98",PlasticWrap:"R98",PrisonLockdownSuit:"R98",PrisonSJ:"R98",Ribbons:"R98",SeamlessLatexArmbinder:"R98",SeamlessStraitDress:"R98",SeamlessStraitDressOpen:"R98",ShinyArmbinder:"R98",ShinyPetSuit:"R98",ShinyStraitjacket:"R98",SleepSac:"R98",Slime:"R98",SmoothLeatherArmbinder1:"R98",SteelCuffs:"R98",StraitDress:"R98",StraitDressOpen:"R98",StraitJacket:"R98",StraitLeotard:"R98",StrictLeatherPetCrawler:"R98",SturdyLeatherBelts:"R98",Tentacles:"R98",ThinLeatherStraps:"R98",TightJacket:"R98",TightJacketCrotch:"R98",TransportJacket:"R98",UnderBedBondageCuffs:"R98",Web:"R98",WoodenCuffs:"R98",WrappedBlanket:"R98",WristShackles:"R98",Yoke:"R98",Zipties:"R98"},CR={BalletHeels:"R98",BalletHeels1:"R98",BalletWedges:"R98",FuturisticHeels:"R98",FuturisticHeels2:"R98",HighThighBoots:"R98",LeatherFootMitts1:"R98",LeatherToeCuffs:"R98",LockingBoots1:"R98",LockingHeels:"R98",LockingHeels2:"R98",LockingShoes1:"R98",LockingShoes2:"R98",MetalBallet:"R100",MonoHeel:"R98",PonyBoots:"R98",ShortPonyBoots:"R98",Slime:"R98",StrictPonyBoots:"R104",ThighHighLatexHeels:"R98",ToeCuffs:"R98",ToeTape:"R98",ToeTie:"R98",TormentHeels:"R103",Zipties:"R98"},kR={ForbiddenChastityBra:"R98",FuturisticBra:"R98",FuturisticBra2:"R98",LeatherBreastBinder:"R98",MetalChastityBra:"R98",OrnateChastityBra:"R98",PolishedChastityBra:"R98",Ribbons:"R98",TickleBra:"R98"},BR={AnalBeads:"R98",AnalBeads2:"R98",AnalHook:"R98",BlackButtPlug:"R98",BunnyTailPlug1:"R98",BunnyTailPlug2:"R98",BunnyTailVibePlug:"R98",ButtPlugLock:"R98",ButtPump:"R98",Cowtail:"R98",DemonPlug:"R98",EggVibePlugXXL:"R98",FoxTail1:"R98",FoxTail2:"R98",FoxTails:"R98",HollowButtPlug:"R98",HorsetailPlug:"R98",HorsetailPlug1:"R98",InflVibeButtPlug:"R98",KittenTail1:"R98",KittenTail2:"R98",LockingVibePlug:"R98",MouseTail1:"R98",MouseTail2:"R98",PenisPlug:"R98",PuppyTailPlug:"R98",PuppyTailPlug1:"R98",RaccoonButtPlug:"R98",RaccoonTailPlug:"R98",ShockPlug:"R98",Stitches:"R98",SuccubusButtPlug:"R98",SuccubusHeartButtPlug:"R98",TailButtPlug:"R98",Tentacles:"R98",VibratingButtplug:"R98",VibratingDildoPlug:"R98",WolfTail1:"R98",WolfTail2:"R98",WolfTail3:"R98"},PR={BBQ:"R98",Bed:"R98",BondageBench:"R98",BurlapSack:"R98",Cage:"R98",ChangingTable:"R98",Coffin:"R98",ConcealingCloak:"R98",Crib:"R98",CryoCapsule:"R98",Cushion:"R98",DisplayCase:"R98",DollBox:"R98",Familiar:"R98",FoldingScreen:"R98",FuckMachine:"R98",FurBlanketWrap:"R98",FuturisticCrate:"R98",InflatableBodyBag:"R98",KabeshiriWall:"R98",Kennel:"R98",LittleMonster:"R98",Locker:"R98",LowCage:"R98",LuckyWheel:"R98",MedicalBed:"R98",MilkCan:"R98",Net:"R98",OneBarPrison:"R98",PersonalCage:"R98",PetBed:"R98",PetBowl:"R98",Pole:"R98",SaddleStand:"R98",SmallDisplayCase:"R98",SmallLocker:"R98",SmallWoodenBox:"R98",SmallWoodenBoxOpenHead:"R98",Snowman:"R98",StrapOnSmooth:"R98",StrapOnStuds:"R98",Sybian:"R98",TheDisplayFrame:"R98",TheHangingFrame:"R101",TransportWoodenBox:"R98",Trolley:"R99",VacBedDeluxe:"R98",VacCube:"R98",Vacbed:"R98",VacbedClear:"R98",WaterCell:"R98",WetFloor:"R98",WheelFortune:"R98",WoodenBox:"R98",WoodenBoxOpenHead:"R98",WoodenHorse:"R98",WoodenRack:"R98",WoodenStocks:"R98","X-Cross":"R98"},xR={BluetoothEarbuds:"R98",FuturisticEarphones:"R98",HeadphoneEarPlugs:"R98",Headphones:"R98",HeavyDutyEarPlugs:"R98",LightDutyEarPlugs:"R98"},MR={AnkleShackles:"R98",BallChain:"R98",Chains:"R98",DuctTape:"R98",EscortAnkleCuffs:"R98",FloorShackles:"R98",FuturisticAnkleCuffs:"R98",HeavyAnkleCuffs:"R98",HeavySpreaderMetal:"R98",HempRope:"R98",HighStyleSteelAnkleCuffs:"R98",Irish8Cuffs:"R98",LeatherAnkleCuffs:"R98",LeatherBelt:"R98",LeatherDeluxeAnkleCuffs:"R98",MedicalBedRestraints:"R98",NylonRope:"R98",OrnateAnkleCuffs:"R98",PlasticWrap:"R98",Slime:"R98",SpreaderDildoBar:"R98",SpreaderMetal:"R98",SpreaderVibratingDildoBar:"R98",SteelAnkleCuffs:"R98",SturdyLeatherBelts:"R98",SuspensionCuffs:"R98",Tentacles:"R98",WoodenCuffs:"R98",Zipties:"R98"},IR={Baguette:"R98",Ballgag:"R98",Belt:"R98",Broom:"R98",BunPlush:"R98",CandleWax:"R98",Cane:"R98",CattleProd:"R98",Crop:"R98",ElectricToothbrush:"R98",Feather:"R98",FeatherDuster:"R98",Flogger:"R98",ForSaleSign:"R98",FoxPlush:"R98",Gavel:"R98",GlassEmpty:"R98",GlassFilled:"R98",Hairbrush:"R98",HeartCrop:"R98",IceCube:"R98",Karl:"R98",KeyProp:"R98",LargeDildo:"R98",LongDuster:"R98",LongSock:"R98",Lotion:"R98",MedicalInjector:"R98",Mug:"R98",Paddle:"R98",Panties:"R98",PetPotato:"R98",PetToy:"R98",Phone1:"R98",Phone2:"R98",PlasticWrap:"R98",Popcorn:"R99",PortalTablet:"R98",PotionBottle:"R98",RainbowWand:"R98",RopeCoilLong:"R98",RopeCoilShort:"R98",Ruler:"R98",Scissors:"R98",Shark:"R98",ShockRemote:"R98",ShockWand:"R98",SmallDildo:"R98",SmallVibratingWand:"R98",Smartphone:"R99",Spatula:"R98",Sword:"R98",TapeRoll:"R98",TennisRacket:"R98",Toothbrush:"R98",Towel:"R98",VibeRemote:"R98",VibratingWand:"R98",Vibrator:"R98",WartenbergWheel:"R98",Whip:"R98",WhipPaddle:"R98"},ER={CheerleaderPomPoms:"R98",DuctTape:"R98",ElbowLengthMittens:"R103",FuturisticMittens:"R98",HoofMittens:"R98",LeatherMittens:"R98",PaddedLeatherMittens:"R98",PaddedMittens:"R98",PawMittens:"R98",PolishedMittens:"R98",PonyMittensBinder:"R100",SmoothLeatherMittens1:"R98"},_R={AnimeLenses:"R98",BigMouthHood:"R101",BlackoutLenses:"R98",ClothBlindfold:"R98",DroneMask:"R98",DuctTape:"R98",FrilledSleepMask:"R98",FullBlindfold:"R98",FurScarf:"R98",FuturisticMask:"R98",InteractiveVRHeadset:"R98",InteractiveVisor:"R98",KittyBlindfold:"R98",LatexBlindfold:"R98",LeatherBlindfold:"R98",LeatherSlimMask:"R98",LeatherSlimMaskOpenEyes:"R98",LeatherSlimMaskOpenMouth:"R98",LewdBlindfold:"R98",MedicalPatch:"R98",PaddedBlindfold:"R98",Pantyhose:"R98",PrisonLockdownBlindfold:"R98",Ribbons:"R98",RopeBlindfold:"R98",ScarfBlindfold:"R98",SleepMask:"R98",Slime:"R98",SmallBlindfold:"R98",Snorkel:"R98",Stitches:"R98",StuddedBlindfold:"R98",Tentacles:"R98",WebBlindfold:"R98"},OR={AccentHood:"R98",BigMouthHood:"R101",BlanketHood:"R98",CanvasHood:"R98",CollarHood:"R98",CorsetHood:"R98",CowHood:"R98",CustomLatexHood:"R98",DobermanMask:"R98",DogHood:"R98",DroneMask:"R98",FestivalFoxMask:"R98",FoxHood:"R98",FoxyMask:"R98",Fu:"R104",FuturisticHelmet:"R98",GGTSHelmet:"R98",GP9GasMask:"R98",GasMask:"R98",GwenHood:"R98",HarnessCatMask:"R98",HeadboxSeethrough:"R98",InflatableGagMask:"R98",InflatedBallHood:"R98",KirugumiMask:"R98",KittyHood:"R98",LampHeadHood:"R98",LatexBunny:"R98",LatexDogHood:"R98",LatexDogMask:"R98",LatexHabit:"R98",LatexHoodOpenHair:"R98",LeatherHood:"R98",LeatherHoodOpenEyes:"R98",LeatherHoodOpenMouth:"R98",LeatherHoodSealed:"R98",LeatherHoodSensDep:"R98",OldGasMask:"R98",OpenFaceHood:"R98",OpenMouthPlugHood:"R98",PantyHood:"R98",Pantyhose:"R98",Paperbag:"R104",PolishedSteelHood:"R98",PonyHood:"R98",PumpkinHead:"R98",SackHood:"R98",SensoryDeprivationHood:"R98",Slime:"R98",SpaceMask:"R100",TechnoHelmet1:"R98",VacHood:"R98",ZipperHood:"R98"},$R={Chains:"R98",DuctTape:"R98",FrogtieMetalCuffs:"R103",FrogtieStraps:"R98",FuturisticLegCuffs:"R98",HempRope:"R98",HobbleSkirt:"R98",LeatherBelt:"R98",LeatherDeluxeLegCuffs:"R98",LeatherLegCuffs:"R98",LegBinder:"R98",MedicalBedRestraints:"R98",MermaidTail:"R98",NylonRope:"R98",OrnateLegCuffs:"R98",PlasticWrap:"R98",Ribbons:"R98",SeamlessHobbleSkirt:"R98",SeamlessLegBinder:"R98",ShinyLegBinder:"R98",Slime:"R98",SturdyLeatherBelts:"R98",Tentacles:"R98",Zipties:"R98"},FR={BountySuitcase:"R98",BountySuitcaseEmpty:"R98",BunPlush:"R98",CombinationPadlock:"R98",ExclusivePadlock:"R98",FamilyPadlock:"R98",FamilyPadlockKey:"R98",FoxPlush:"R98",HighSecurityPadlock:"R98",IntricatePadlock:"R98",Karl:"R98",Lockpicks:"R98",LoversPadlock:"R98",LoversPadlockKey:"R98",LoversTimerPadlock:"R98",MetalCuffsKey:"R98",MetalPadlock:"R98",MetalPadlockKey:"R98",MistressPadlock:"R98",MistressPadlockKey:"R98",MistressTimerPadlock:"R98",OwnerPadlock:"R98",OwnerPadlockKey:"R98",OwnerTimerPadlock:"R98",PandoraPadlock:"R98",PandoraPadlockKey:"R98",PasswordPadlock:"R98",PetPost:"R98",PetPotato:"R98",PortalLinkPadlock:"R98",SafewordPadlock:"R98",ServingTray:"R98",TeddyBear:"R98",TimerPadlock:"R98",TimerPasswordPadlock:"R98",WoodenMaidTray:"R98",WoodenMaidTrayFull:"R98",WoodenPaddle:"R98",WoodenSign:"R98"},LR={Ball:"R98",BallGag:"R98",BallGagMask:"R98",BambooGag:"R98",BigMouth:"R98",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CaneGag:"R98",CarrotGag:"R98",ChloroformCloth:"R98",ChopstickGag:"R98",ClothGag:"R98",ClothStuffing:"R98",CropGag:"R98",CupholderGag:"R98",DeepthroatGag:"R98",DentalGag:"R98",DildoGag:"R98",DildoPlugGag:"R98",DogMuzzleExposed:"R98",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FunnelGag:"R98",FurScarf:"R98",FuturisticHarnessBallGag:"R98",FuturisticHarnessPanelGag:"R98",FuturisticMuzzle:"R98",FuturisticPanelGag:"R98",GasMaskGag:"R98",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",HookGagMask:"R98",Kissmark:"R102",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LargeDildo:"R98",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R102",LatexSheathGag:"R98",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",MilkBottle:"R98",ModularGag:"R99",MouthFeatureGag:"R102",MuzzleGag:"R98",OTNPlugGag:"R98",PaciGag:"R98",PacifierGag:"R98",PaddedFaceMask:"R102",PantiesMask:"R98",PantyStuffing:"R98",PlasticWrap:"R98",PlugGag:"R98",PonyGag:"R98",PrisonLockdownGag:"R98",PumpGag:"R98",PumpkinGag:"R98",RegressedMilk:"R98",RegularSleepingPill:"R98",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SockStuffing:"R98",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R102",TechnoGag:"R98",Tentacles:"R98",TonguePiercingGag:"R100",TongueStrapGag:"R98",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98"},TR={Ball:"R103",BallGag:"R98",BallGagMask:"R98",BambooGag:"R103",BigMouth:"R103",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CaneGag:"R103",CarrotGag:"R98",ChloroformCloth:"R98",ChopstickGag:"R103",ClothGag:"R98",ClothStuffing:"R103",CropGag:"R103",CupholderGag:"R98",DeepthroatGag:"R103",DentalGag:"R103",DildoGag:"R98",DildoPlugGag:"R103",DogMuzzleExposed:"R103",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FunnelGag:"R103",FurScarf:"R98",FuturisticHarnessBallGag:"R101",FuturisticHarnessPanelGag:"R101",FuturisticMuzzle:"R98",FuturisticPanelGag:"R101",GasMaskGag:"R98",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",HookGagMask:"R103",Kissmark:"R102",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LargeDildo:"R103",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R102",LatexSheathGag:"R103",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",MilkBottle:"R103",ModularGag:"R99",MouthFeatureGag:"R98",MuzzleGag:"R98",OTNPlugGag:"R103",PaciGag:"R98",PacifierGag:"R103",PaddedFaceMask:"R102",PantiesMask:"R98",PantyStuffing:"R103",PlasticWrap:"R98",PlugGag:"R103",PonyGag:"R98",PrisonLockdownGag:"R98",PumpGag:"R103",PumpkinGag:"R98",RegressedMilk:"R98",RegularSleepingPill:"R103",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SockStuffing:"R103",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R102",TechnoGag:"R103",Tentacles:"R98",TonguePiercingGag:"R103",TongueStrapGag:"R103",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98"},HR={Ball:"R103",BallGag:"R98",BallGagMask:"R98",BambooGag:"R103",BigMouth:"R103",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CaneGag:"R103",CarrotGag:"R98",ChloroformCloth:"R98",ChopstickGag:"R103",ClothGag:"R98",ClothStuffing:"R103",CropGag:"R103",CupholderGag:"R98",DeepthroatGag:"R103",DentalGag:"R103",DildoGag:"R98",DildoPlugGag:"R103",DogMuzzleExposed:"R103",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FunnelGag:"R103",FurScarf:"R98",FuturisticHarnessBallGag:"R101",FuturisticHarnessPanelGag:"R101",FuturisticMuzzle:"R98",FuturisticPanelGag:"R101",GasMaskGag:"R98",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",HookGagMask:"R103",Kissmark:"R98",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LargeDildo:"R103",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R98",LatexSheathGag:"R103",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",MilkBottle:"R103",ModularGag:"R99",MouthFeatureGag:"R102",MuzzleGag:"R98",OTNPlugGag:"R103",PaciGag:"R98",PacifierGag:"R103",PaddedFaceMask:"R98",PantiesMask:"R98",PantyStuffing:"R103",PlasticWrap:"R98",PlugGag:"R103",PonyGag:"R98",PrisonLockdownGag:"R98",PumpGag:"R103",PumpkinGag:"R98",RegressedMilk:"R98",RegularSleepingPill:"R103",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SockStuffing:"R103",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R98",TechnoGag:"R103",Tentacles:"R98",TonguePiercingGag:"R103",TongueStrapGag:"R103",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98"},AR={AutoShockCollar:"R98",BatCollar:"R98",BonedNeckCorset:"R98",BordelleCollar:"R98",ClubSlaveCollar:"R98",ComboHarness:"R98",DogCollar:"R98",ExtendablePostureCollar:"R99",FuturisticCollar:"R98",GothicCollar:"R98",HeartCollar:"R98",HeartLinkChoker:"R98",HighCollar:"R98",HighSecurityCollar:"R98",HighStyleSteelCollar:"R98",LatexCollar1:"R98",LatexCollar2:"R98",LatexPostureCollar:"R98",LatexRingCollar:"R99",LeatherChoker:"R98",LeatherCollar:"R98",LeatherCollarBell:"R98",LeatherCollarBow:"R98",LeatherCorsetCollar:"R98",LeatherDeluxeCollar:"R98",LoveLeatherCollar:"R98",MaidCollar:"R98",NeckRope:"R98",NobleCorsetCollar:"R98",NylonCollar:"R98",OrnateCollar:"R98",PaddedBeltCollar:"R99",PetCollar:"R98",PetSuitShockCollar:"R98",PostureCollar:"R98",ShinySteelCollar:"R98",ShockCollar:"R98",SlaveCollar:"R98",SlenderSteelCollar:"R98",SpikeCollar:"R98",SpikedChoker:"R99",SteelPostureCollar:"R98",StrictPostureCollar:"R98",TechnoCollar:"R98"},NR={CollarAutoShockUnit:"R98",CollarBell:"R98",CollarBow:"R98",CollarButterfly:"R98",CollarCowBell:"R98",CollarFlower:"R98",CollarLapis:"R98",CollarMoon:"R98",CollarNameTag:"R98",CollarNameTagLivestock:"R98",CollarNameTagLover:"R98",CollarNameTagOval:"R98",CollarNameTagPet:"R98",CollarPentagram:"R98",CollarPupBone:"R98",CollarRose:"R98",CollarShockUnit:"R98",CollarSun:"R98",CustomCollarTag:"R98",ElectronicTag:"R98",Key:"R98"},DR={ChainLeash:"R98",CollarChainLong:"R98",CollarChainMedium:"R98",CollarChainShort:"R98",CollarLeash:"R98",CollarRopeLong:"R98",CollarRopeMedium:"R98",CollarRopeShort:"R98",PetPost:"R98",Post:"R98"},GR={BellClamps:"R98",ChainClamp:"R98",ChainTassles:"R98",ChopStickNippleClamps:"R98",Clothespins:"R98",HeartPasties:"R98",KittyPasties:"R98",LactationPump:"R98",NippleClamp:"R98",NippleClamps2:"R98",NippleSuctionCups:"R98",NippleTape:"R98",NippleVibe:"R98",NippleWeightClamps:"R98",PlateClamps:"R98",ScrewClamps:"R98",ShockClamps:"R98",StretchClovers:"R98",TapedVibeEggs:"R98",VibeNippleClamp:"R98",VibratorRemote:"R98"},jR={BarbellPiercing:"R98",BellPiercing:"R98",CrossedStraightPiercing:"R98",NecklacePiercingChain:"R98",NippleAccessory1:"R98",NippleAccessory2:"R98",NippleAccessory3:"R98",NippleChastityPiercing1:"R98",NippleChastityPiercing2:"R98",RoundPiercing:"R98",StraightPiercing:"R98",VibeHeartPiercings:"R98"},WR={BarbelPiercing:"R98",ClownNose:"R99",DuctTape:"R98",NoseHook:"R98",NosePlugs:"R98",NoseRing:"R98",PigNose:"R98",PigNoseHook:"R98"},zR={BulkyDiaper:"R98",DiaperHarness:"R98",ForbiddenChastityBelt:"R98",FuturisticChastityBelt:"R98",FuturisticTrainingBelt:"R98",HarnessPanties1:"R98",HarnessPanties2:"R98",HeavyDutyBelt:"R98",HempRope:"R98",HybridChastityBelt:"R98",LeatherChastityBelt:"R98",LeatherStrapPanties1:"R98",LoveChastityBelt:"R98",MetalChastityBelt:"R98",ModularChastityBelt:"R99",ObedienceBelt:"R98",OrnateChastityBelt:"R98",PelvisChainLeash:"R98",PolishedChastityBelt:"R98",PoofyDiaper:"R98",PortalPanties:"R98",Ribbons:"R98",SciFiPleasurePanties:"R98",SleekLeatherChastityBelt:"R98",SteelChastityPanties:"R98",StraponPanties:"R98",StuddedChastityBelt:"R98"},VR={Script:"R98"},qR={AdultBabyHarness:"R98",ClassicLatexCorset:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",CrotchChain:"R98",FuturisticHarness:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeavyLatexCorset:"R98",HempRopeHarness:"R98",HighSecurityHarness:"R98",LatexCorset1:"R98",LeatherBreastBinder:"R98",LeatherChestHarness1:"R98",LeatherHarness:"R98",LeatherStrapBra1:"R98",LeatherStrapHarness:"R98",LockingSwimsuit:"R98",LockingSwimsuit2:"R98",NavelBar1:"R98",NylonRopeHarness:"R98",Ribbons:"R98",StuddedHarness:"R98",ThinLeatherStraps:"R98",Underbust:"R98"},UR={AdultBabyHarness:"R98",ClassicLatexCorset:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",CrotchChain:"R98",FuturisticHarness:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeavyLatexCorset:"R98",HempRopeHarness:"R98",HighSecurityHarness:"R98",LatexCorset1:"R98",LeatherBreastBinder:"R98",LeatherChestHarness1:"R98",LeatherHarness:"R98",LeatherStrapBra1:"R98",LeatherStrapHarness:"R98",LockingSwimsuit:"R98",LockingSwimsuit2:"R98",NavelBar1:"R98",NylonRopeHarness:"R98",Ribbons:"R98",StuddedHarness:"R98",ThinLeatherStraps:"R98",Underbust:"R98"},KR={BasicCockring:"R98",BenWaBalls:"R98",ChastityPouch:"R98",ClitAndDildoVibratorbelt:"R98",ClitSuctionCup:"R98",ClitoralStimulator:"R98",DoubleEndDildo:"R98",FlatChastityCage:"R98",FullCasingCage:"R103",FullLatexSuitWand:"R98",FuturisticVibrator:"R98",HeavyWeightClamp:"R98",HempRopeBelt:"R98",InflatableVibeDildo:"R98",InflatableVibratingPanties:"R98",LatexNulge:"R104",LockingCockring:"R104",LoversVibrator:"R98",LoversVibratorRemote:"R98",PenisDildo:"R98",PlasticChastityCage1:"R98",PlasticChastityCage2:"R98",ShockDildo:"R98",Stitches:"R98",TapeStrips:"R98",TechnoChastityCage:"R98",VibeEggPenisBase:"R98",VibratingDildo:"R98",VibratingEgg:"R98",VibratingLatexPanties:"R98",VibratorRemote:"R98",WandBelt:"R98",WiredEgg:"R98"},JR={AdornedClitPiercing:"R98",BarbellClitPiercing:"R98",ChastityClitPiercing:"R98",ChastityClitShield:"R98",ClitRing:"R98",CockRingLeash:"R103",HighSecurityVulvaShield:"R98",JewelClitPiercing:"R98",RoundClitPiercing:"R98",StraightClitPiercing:"R98",TapedClitEgg:"R98",UrethralSound:"R103",VibeEggGlans:"R98",VibeHeartClitPiercing:"R98"},YR={JewelrySet:"R98"},ZR={BandAnklet:"R98",LegFur:"R103",Ribbon:"R98",Ribbon1:"R98"},XR={CatsuitGloves:"R100",Claws:"R99",Fingernails:"R99",Rings:"R98"},QR={AnimeLenses:"R99",BunnyMask1:"R98",BunnyMask2:"R98",BunnyMask3:"R98",ButterflyMask:"R98",DominoMask:"R98",DroneMask:"R98",FacePaint:"R98",FaceVeil:"R98",FestivalFoxMask:"R98",FoxMask:"R98",FuturisticVisor:"R98",Glitter:"R98",HeadHarness:"R98",Kissmark:"R98",KittyMask1:"R98",KittyMask2:"R98",KittyMask3:"R98",LaceMask1:"R98",LaceMask2:"R98",LatexMuzzleMask:"R99",MedicalMask:"R98",OpenFaceHood:"R98",PetNose:"R98",ShinobiMask:"R98",SwimCap:"R98",VenetianMask:"R98"},ev={Discreet:"R98",Full:"R98",Regular:"R98"},tv={Bandana:"R98",BlackHeart:"R98",BodyChainNecklace:"R98",CatsuitCollar:"R98",ChokerTattoo:"R98",ElegantHeartNecklace:"R98",FlowerGarland:"R98",FurScarf:"R98",IDCard:"R98",Necklace1:"R98",Necklace2:"R98",Necklace3:"R98",Necklace4:"R98",NecklaceBallGag:"R98",NecklaceButterfly:"R98",NecklaceKey:"R98",NecklaceLock:"R98",NecklaceRope:"R98"},rv={Nipples1:"R98",Nipples2:"R98",Nipples3:"R98"},nv={Bikini1:"R98",BoxerShorts:"R98",Briefs:"R98",BulkyDiaper:"R98",CatsuitPanties:"R98",ChinesePanties1:"R98",CockSock:"R98",CowPrintedPanties:"R98",CrotchPanties1:"R98",Diapers1:"R98",Diapers2:"R98",Diapers3:"R98",Diapers4:"R98",FloralPanties2:"R98",FlowerPanties:"R98",HarnessPanties1:"R98",HarnessPanties2:"R98",Jockstrap:"R98",KittyPanties1:"R98",LatexCrotchlessPanties:"R98",LatexPanties1:"R98",LatexPanties2:"R98",LeatherStrapPanties1:"R98",MaidPanties1:"R98",MaidPanties2:"R98",MaleCatsuitPanties:"R98",MicroThong:"R98",Panties1:"R98",Panties11:"R98",Panties12:"R98",Panties13:"R98",Panties14:"R98",Panties15:"R98",Panties16:"R98",Panties7:"R98",Panties8:"R98",PearlPanties1:"R98",PilotPanties:"R98",PoofyDiaper:"R98",RedBowPanties:"R98",SexyBeachPanties1:"R98",StringPanties1:"R98",StringPasty1:"R98",StringThong:"R98",SunstripePanties1:"R98",Thong:"R98",WrapPanties1:"R98",ZipPanties1:"R98"},iv={HeHim:"R98",SheHer:"R98"},ov={Penis:"R98",Pussy1:"R98",Pussy2:"R98",Pussy3:"R98"},av={BandAnklet:"R98",LegFur:"R103",Ribbon:"R98",Ribbon1:"R98"},sv={CatsuitGloves:"R100",Claws:"R99",Fingernails:"R99",Rings:"R98"},lv={AnkleBoots1:"R98",AnkleStrapShoes:"R98",BalletHeels1:"R98",BarefootSandals1:"R98",Boots1:"R98",Clogs:"R99",DeluxeBoots:"R98",DutyShoes:"R98",Flippers:"R98",FuturisticHeels2:"R98",FuzzyBoots:"R98",Geta:"R98",Heels1:"R98",Heels2:"R98",Heels3:"R98",LatexAnkleShoes:"R98",LatexHeels:"R98",MaryShoes:"R102",MistressBoots:"R98",PawBoots:"R98",PonyBoots:"R98",Sandals:"R98",SandalsRS:"R98",Shoes1:"R98",Shoes2:"R98",Shoes4:"R98",Shoes5:"R98",Sneakers1:"R98",Sneakers2:"R98",SneakersSport:"R98",SocialHeels:"R98",StilettoHeels:"R98",StreetBoots:"R98",StrictPonyBoots:"R104",TallerBoots:"R100",ThighBoots:"R98",ThighHighLatexHeels:"R98",WesternBoots:"R98",WoollyBootsTall:"R98"},uv={CowPrintedSocks:"R98",FootlessSocks1:"R98",GradientPantyhose:"R98",HaremStockings:"R98",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",Pantyhose1:"R98",Pantyhose2:"R98",ReverseBunnySuit:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98",YuletideVelvetWarmth:"R104"},cv={CowPrintedSocks:"R98",FootlessSocks1:"R98",HaremStockings:"R98",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",LooseSocks:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98"},dv={CowPrintedSocks:"R98",FootlessSocks1:"R98",HaremStockings:"R98",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",LooseSocks:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98"},pv={Blouse1:"R98",Catsuit:"R98",FishnetTop:"R98",LatexCatsuit:"R98",MaleSeamlessCatsuit:"R98",PilotSuit:"R98",ReverseBunnySuit:"R98",SeamlessCatsuit:"R98",SeethroughSuit:"R98",SeethroughSuitZip:"R98",SleevelessCatsuit:"R98",SleevelessSlimLatexLeotard:"R98"},hv={Catsuit:"R98",CatsuitPanties:"R98",LatexCatsuit:"R98",MaleCatsuitPanties:"R98",MaleSeamlessCatsuit:"R98",Pantyhose1:"R98",Pantyhose2:"R98",PilotPanties:"R98",PilotSuit:"R98",ReverseBunnySuit:"R98",SeamlessCatsuit:"R98",SeethroughSuit:"R98",SeethroughSuitZip:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98"},fv={BunnyTailStrap:"R98",CowtailStrap:"R98",DemonPlug:"R98",DragonTailStrap1:"R98",DragonTailStrap2Left:"R104",DragonTailStrap2Right:"R104",FoxTailStrap1:"R98",FoxTailStrap2:"R98",FoxTailsStrap:"R98",HorseTailStrap:"R98",HorseTailStrap1:"R98",KittenTailStrap1:"R98",KittenTailStrap2:"R98",LionTailStrap:"R98",MouseTailStrap1:"R98",MouseTailStrap2:"R98",PuppyTailStrap:"R98",PuppyTailStrap1:"R98",RaccoonStrap:"R98",RaccoonTailStrap:"R98",SuccubusHeartTailStrap:"R98",SuccubusTailStrap:"R98",TailStrap:"R98",Tentacles:"R98",WolfTailStrap1:"R98",WolfTailStrap2:"R98",WolfTailStrap3:"R98"},mv={AngelFeather:"R98",AngelWings:"R98",BatWings:"R98",BeeWings:"R98",CyberWings:"R98",DevilWings:"R98",FairyWings:"R98",FallenAngelWings:"R98",PixieWings:"R98",SteampunkWings:"R98",SuccubusFeather:"R98",SuccubusWings:"R98"},gv={Blush:qg,BodyLower:Ug,BodyMarkings:Kg,BodyUpper:Jg,Bra:Yg,Bracelet:Zg,Cloth:Xg,ClothAccessory:Qg,ClothLower:eR,Corset:tR,Emoticon:rR,Eyebrows:nR,Eyes:iR,Eyes2:oR,EyeShadow:aR,FacialHair:sR,Fluids:lR,Garters:uR,Glasses:cR,Gloves:dR,HairAccessory1:pR,HairAccessory2:hR,HairAccessory3:fR,HairBack:mR,HairFront:gR,Hands:RR,Hat:vR,Head:bR,Height:yR,ItemAddon:SR,ItemArms:wR,ItemBoots:CR,ItemBreast:kR,ItemButt:BR,ItemDevices:PR,ItemEars:xR,ItemFeet:MR,ItemHandheld:IR,ItemHands:ER,ItemHead:_R,ItemHood:OR,ItemLegs:$R,ItemMisc:FR,ItemMouth:LR,ItemMouth2:TR,ItemMouth3:HR,ItemNeck:AR,ItemNeckAccessories:NR,ItemNeckRestraints:DR,ItemNipples:GR,ItemNipplesPiercings:jR,ItemNose:WR,ItemPelvis:zR,ItemScript:VR,ItemTorso:qR,ItemTorso2:UR,ItemVulva:KR,ItemVulvaPiercings:JR,Jewelry:YR,LeftAnklet:ZR,LeftHand:XR,Mask:QR,Mouth:ev,Necklace:tv,Nipples:rv,Panties:nv,Pronouns:iv,Pussy:ov,RightAnklet:av,RightHand:sv,Shoes:lv,Socks:uv,SocksLeft:cv,SocksRight:dv,Suit:pv,SuitLower:hv,TailStraps:fv,Wings:mv},Rv=Object.freeze({__proto__:null,Blush:qg,BodyLower:Ug,BodyMarkings:Kg,BodyUpper:Jg,Bra:Yg,Bracelet:Zg,Cloth:Xg,ClothAccessory:Qg,ClothLower:eR,Corset:tR,Emoticon:rR,EyeShadow:aR,Eyebrows:nR,Eyes:iR,Eyes2:oR,FacialHair:sR,Fluids:lR,Garters:uR,Glasses:cR,Gloves:dR,HairAccessory1:pR,HairAccessory2:hR,HairAccessory3:fR,HairBack:mR,HairFront:gR,Hands:RR,Hat:vR,Head:bR,Height:yR,ItemAddon:SR,ItemArms:wR,ItemBoots:CR,ItemBreast:kR,ItemButt:BR,ItemDevices:PR,ItemEars:xR,ItemFeet:MR,ItemHandheld:IR,ItemHands:ER,ItemHead:_R,ItemHood:OR,ItemLegs:$R,ItemMisc:FR,ItemMouth:LR,ItemMouth2:TR,ItemMouth3:HR,ItemNeck:AR,ItemNeckAccessories:NR,ItemNeckRestraints:DR,ItemNipples:GR,ItemNipplesPiercings:jR,ItemNose:WR,ItemPelvis:zR,ItemScript:VR,ItemTorso:qR,ItemTorso2:UR,ItemVulva:KR,ItemVulvaPiercings:JR,Jewelry:YR,LeftAnklet:ZR,LeftHand:XR,Mask:QR,Mouth:ev,Necklace:tv,Nipples:rv,Panties:nv,Pronouns:iv,Pussy:ov,RightAnklet:av,RightHand:sv,Shoes:lv,Socks:uv,SocksLeft:cv,SocksRight:dv,Suit:pv,SuitLower:hv,TailStraps:fv,Wings:mv,default:gv});let vv;const bv={};Bh(dg).then((()=>{kh.log("Initializing new item screen hooks");const e=GameVersionFormat.exec(GameVersion);if(null==e)return void kh.error(`Invalid BC version: "${GameVersion}"`);vv=Number.parseInt(e[1]);for(const[e,t]of yh(Rv))for(const[r,n]of yh(t))if(n===`R${vv}`){const t=AssetGet("Female3DCG",e,r);if(null==t)continue;t.Group.Name===t.DynamicGroupName&&(bv[`${t.Group.Name}${t.Name}`]=t)}const t=Shop2Vars;Object.defineProperty(Shop2Vars,"MBS_ShowAllVersions",{get:()=>!("MBS_VersionFilter"in Shop2Vars.Filters)}),Shop2.Elements.MBS_VersionHeader={Coords:[345,475,0,0],Mode:new Set(["Preview","Buy","Sell"]),Draw:(e,t)=>{DrawText("Filter by BC version",e,t,Shop2Vars.DropdownState!==ShopDropdownState.NONE?"Gray":"White")}},Shop2.Elements.MBS_ShowCurrentVersion={Coords:[135,Shop2Consts.Grid.y+320,200,90],Mode:new Set(["Preview","Buy","Sell"]),Draw:(...e)=>{Shop2Vars.DropdownState!==ShopDropdownState.NONE?DrawButton(...e,`Version R${vv}`,"Gray",void 0,void 0,!0):t.MBS_ShowAllVersions?DrawButton(...e,`Version R${vv}`,"White"):DrawButton(...e,`Version R${vv}`,"Cyan")},Click:()=>{t.MBS_ShowAllVersions&&(Shop2Vars.Filters.MBS_VersionFilter=e=>bv[`${e.Asset.Group.Name}${e.Asset.Name}`]?["Buy","Sell","Preview"]:[],Shop2.ApplyItemFilters())}},Shop2.Elements.MBS_ShowAllVersions={Coords:[355,Shop2Consts.Grid.y+320,200,90],Mode:new Set(["Preview","Buy","Sell"]),Draw:(...e)=>{Shop2Vars.DropdownState!==ShopDropdownState.NONE?DrawButton(...e,"All versions","Gray",void 0,void 0,!0):t.MBS_ShowAllVersions?DrawButton(...e,"All versions","Cyan"):DrawButton(...e,"All versions","White")},Click:()=>{t.MBS_ShowAllVersions||(delete Shop2Vars.Filters.MBS_VersionFilter,Shop2.ApplyItemFilters())}},Th.hookFunction("Shop2Load",0,((e,t)=>{0===Shop2InitVars.Items.length&&(Shop2InitVars.Items=Shop2.ParseAssets(Asset.filter((e=>e.Group.Name===e.DynamicGroupName&&(bv[`${e.Group.Name}${e.Name}`]||(Shop2Consts.BuyGroups[e.BuyGroup]?.Value??e.Value)>0)&&!ShopHideGenderedAsset(e))).sort(((e,t)=>e.Group.Category.localeCompare(t.Group.Category)||e.Group.Description.localeCompare(t.Group.Description)||e.Description.localeCompare(t.Description))))),t(e)}))}));const yv=Th.getOriginalHash,Sv=t;return kh.log(`Initializing MBS version ${t}`),Bh((()=>dg(!1))).then((()=>{!function(e){const t=jh.fromBCVersion(e),r=jh.fromBCVersion("R104");if(t.lesser(r))throw new Error(`BC ${GameVersion} detected; MBS requires version R104 or later`);kh.log(`Detected BC ${GameVersion}`)}(GameVersion),function(){const e={};for(const[t,r]of Object.entries(Wh)){const n=Th.getOriginalHash(t);r.has(n)||(e[t]=n)}const t=Object.values(e).length;0!==t&&kh.warn(`Found ${t} patched functions with an unknown hash`,e)}(),document.body.appendChild(p("style",{id:"mbs-style",children:":root {\n  --mbs-background-color: white;\n  --mbs-button-color: white;\n  --mbs-hover-color: cyan;\n  --mbs-tooltip-color: lightyellow;\n  --mbs-border-color: black;\n  --mbs-text-color: black;\n  --mbs-font-small: min(3.5dvh, 1.75dvw);\n  --mbs-font-large: min(5dvh, 2.5dvw);\n  --mbs-font-family: arial, sans-serif;\n}\n\n.mbs-button {\n  background-origin: content-box;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  height: 100%;\n  overflow: clip;\n  padding-left: min(2dvh, 1dvw);\n  padding-right: min(2dvh, 1dvw);\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 100%;\n}\n.mbs-button:hover {\n  background-color: var(--mbs-hover-color);\n}\n.mbs-button:disabled {\n  background-color: var(--mbs-button-color);\n  filter: brightness(60%);\n}\n\n.mbs-button-tooltip {\n  background-color: var(--mbs-tooltip-color) !important;\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  bottom: -10%;\n  box-shadow: min(0.4dvh, 0.2dvw) min(0.4dvh, 0.2dvw) min(2dvh, 1dvw) 0 rgba(0, 0, 0, 0.5);\n  line-height: 1.4;\n  padding: min(1dvh, 0.5dvw) min(2dvh, 1dvw);\n  position: relative;\n  text-align: center;\n  visibility: hidden;\n  white-space: nowrap;\n  width: fit-content;\n  z-index: 1;\n}\n\n.mbs-button-div {\n  display: grid;\n  grid-template-columns: min(9dvh, 4.5dvw);\n  grid-template-rows: min(9dvh, 4.5dvw) auto;\n}\n.mbs-button-div .mbs-button-tooltip {\n  justify-self: center;\n}\n.mbs-button-div .mbs-button {\n  height: inherit;\n  width: inherit;\n}\n.mbs-button-div .mbs-button:hover + .mbs-button-tooltip {\n  visibility: visible;\n}\n\n.mbs-timer {\n  height: min(6dvh, 3dvw);\n  text-align: center;\n  width: min(21dvh, 10.5dvw);\n}\n\n.mbs-dropdown-button {\n  border: unset !important;\n  padding-bottom: min(1dvh, 0.5dvw);\n  padding-top: min(1dvh, 0.5dvw);\n}\n.mbs-dropdown-button:nth-child(even) {\n  filter: brightness(85%);\n}\n\n.mbs-dropdown-content {\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  overflow-y: scroll;\n  position: absolute;\n  visibility: hidden;\n  z-index: 1;\n}\n\n.mbs-dropdown:hover .mbs-dropdown-content {\n  visibility: visible;\n}\n\n.mbs-screen {\n  display: grid;\n  position: fixed;\n  text-align: center;\n  user-select: none;\n  visibility: hidden;\n  grid-gap: min(2dvh, 1dvw);\n}\n.mbs-screen h1, .mbs-screen h2, .mbs-screen p, .mbs-screen ul {\n  align-items: center;\n  align-self: center;\n  color: var(--mbs-text-color);\n  font-family: var(--mbs-font-family);\n}\n.mbs-screen h1 {\n  font-size: var(--mbs-font-large);\n}\n.mbs-screen h2 {\n  margin: min(1dvh, 0.5dvw);\n}\n.mbs-screen ul {\n  margin: 0;\n  text-align: left;\n}\n.mbs-screen p, .mbs-screen h2, .mbs-screen ul, .mbs-screen span {\n  font-size: var(--mbs-font-small);\n}\n.mbs-screen div, .mbs-screen input {\n  background-color: var(--mbs-background-color);\n  color: var(--mbs-text-color);\n  font-family: var(--mbs-font-family);\n  font-size: var(--mbs-font-small);\n}\n.mbs-screen button {\n  background-color: var(--mbs-button-color);\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  color: var(--mbs-text-color);\n  font-family: var(--mbs-font-family);\n  font-size: var(--mbs-font-small);\n}\n.mbs-screen input {\n  box-sizing: border-box;\n  padding: unset;\n}\n.mbs-screen input:invalid {\n  background-color: #fbb;\n  box-shadow: 0 0 3px 2px #c22;\n}\n.mbs-screen input[type=checkbox] {\n  border: min(0.3dvh, 0.15dvw) solid var(--mbs-border-color);\n  height: min(7dvh, 3.5dvw);\n  width: min(7dvh, 3.5dvw);\n}\n.mbs-screen input[type=checkbox]:hover {\n  background-color: var(--mbs-hover-color);\n}\n.mbs-screen input[type=checkbox]:disabled {\n  background-color: var(--mbs-background-color);\n  filter: brightness(60%);\n}\n.mbs-screen input[type=checkbox]::before {\n  height: min(4.6dvh, 2.3dvw);\n  width: min(4.6dvh, 2.3dvw);\n}".toString()}))})),e.API_VERSION=Mg,e.MBS_VERSION=Sv,e._getFunctionHash=yv,e._toItemBundles=af,e._unpackSettings=Tm,e.css=xg,e.getDebug=Ig,e.runTests=zg,e.wheelOutfits=kg,e}({});
//# sourceMappingURL=mbs.js.map
