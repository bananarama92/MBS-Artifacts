/*!
 * MBS: Maid's Bondage Scripts
 *
 * Copyright (C) 2023-2024 Bananarama92
 *
 * This program is free software: you can redistribute it and/or modify it under the terms of
 * the GNU General Public License as published by the Free Software Foundation,
 * either version 3 of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program.
 * If not, see https://www.gnu.org/licenses/.
 */
var mbs=function(e){"use strict";const t="1.5.0";var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i={},o={};Object.defineProperty(o,"__esModule",{value:!0});o.setAttributes=void 0;function a(e,t){for(const n of Object.keys(e))n in t&&(t[n]=e[n])}o.setAttributes=function(e,t){for(const n of Object.keys(t)){if("__source"===n||"__self"===n)continue;const r=t[n];if(n.startsWith("on")){const t=n.replace(/Capture$/,""),i=n!==t,o=t.toLowerCase().substring(2);e.addEventListener(o,r,i)}else"style"===n&&"string"!=typeof r?a(r,e.style):"dangerouslySetInnerHTML"===n?e.innerHTML=r:!0===r?e.setAttribute(n,n):(r||0===r)&&e.setAttribute(n,r.toString())}};var s={};Object.defineProperty(s,"__esModule",{value:!0});s.createDomElement=s.applyChildren=void 0;function l(e,t){t instanceof Element?e.appendChild(t):"string"==typeof t||"number"==typeof t?e.appendChild(document.createTextNode(t.toString())):console.warn("Unknown type to append: ",t)}s.applyChildren=function e(t,n){for(const r of n)(r||0===r)&&(Array.isArray(r)?e(t,r):l(t,r))};s.createDomElement=function(e,t){const n=(null==t?void 0:t.is)?{is:t.is}:void 0;return(null==t?void 0:t.xmlns)?document.createElementNS(t.xmlns,e,n):document.createElement(e,n)},Object.defineProperty(i,"__esModule",{value:!0});i.jsxDEV=h=i.jsxs=p=i.jsx=void 0;const u=o,c=s;function d(e,t){if("function"==typeof e)return e(t);const{children:n,...r}=t,i=(0,c.createDomElement)(e,r);return r&&(0,u.setAttributes)(i,r),(0,c.applyChildren)(i,[n]),i}var p=i.jsx=d,h=i.jsxs=d;i.jsxDEV=d;var f={},m={};Object.defineProperty(m,"__esModule",{value:!0});m.h=m.createElement=void 0;const g=o,R=s;function v(e,t,...n){if("function"==typeof e)return e({...t,children:n});const r=(0,R.createDomElement)(e,t);return t&&(0,g.setAttributes)(r,t),(0,R.applyChildren)(r,n),r}m.createElement=v;m.h=v;var y={};Object.defineProperty(y,"__esModule",{value:!0}),function(e){var t=n&&n.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=n&&n.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),r(m,e),r(i,e),r(y,e)}(f);Object.create;Object.create;function b(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function S(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}"function"==typeof SuppressedError&&SuppressedError;var w="object"==typeof global&&global&&global.Object===Object&&global,C="object"==typeof self&&self&&self.Object===Object&&self,k=w||C||Function("return this")(),B=k.Symbol,P=Object.prototype,x=P.hasOwnProperty,I=P.toString,M=B?B.toStringTag:void 0;var E=Object.prototype.toString;var O="[object Null]",_="[object Undefined]",$=B?B.toStringTag:void 0;function F(e){return null==e?void 0===e?_:O:$&&$ in Object(e)?function(e){var t=x.call(e,M),n=e[M];try{e[M]=void 0;var r=!0}catch(e){}var i=I.call(e);return r&&(t?e[M]=n:delete e[M]),i}(e):function(e){return E.call(e)}(e)}function L(e){return null!=e&&"object"==typeof e}var H="[object Symbol]";function T(e){return"symbol"==typeof e||L(e)&&F(e)==H}var A=NaN;function N(e){return"number"==typeof e?e:T(e)?A:+e}function D(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var j=Array.isArray,W=1/0,G=B?B.prototype:void 0,z=G?G.toString:void 0;function V(e){if("string"==typeof e)return e;if(j(e))return D(e,V)+"";if(T(e))return z?z.call(e):"";var t=e+"";return"0"==t&&1/e==-W?"-0":t}function q(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=V(n),r=V(r)):(n=N(n),r=N(r)),i=e(n,r)}return i}}var U=q((function(e,t){return e+t}),0),K=/\s/;function J(e){for(var t=e.length;t--&&K.test(e.charAt(t)););return t}var Y=/^\s+/;function Z(e){return e?e.slice(0,J(e)+1).replace(Y,""):e}function X(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Q=NaN,ee=/^[-+]0x[0-9a-f]+$/i,te=/^0b[01]+$/i,ne=/^0o[0-7]+$/i,re=parseInt;function ie(e){if("number"==typeof e)return e;if(T(e))return Q;if(X(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=X(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Z(e);var n=te.test(e);return n||ne.test(e)?re(e.slice(2),n?2:8):ee.test(e)?Q:+e}var oe=1/0,ae=17976931348623157e292;function se(e){return e?(e=ie(e))===oe||e===-oe?(e<0?-1:1)*ae:e==e?e:0:0===e?e:0}function le(e){var t=se(e),n=t%1;return t==t?n?t-n:t:0}function ue(e){return e}var ce="[object AsyncFunction]",de="[object Function]",pe="[object GeneratorFunction]",he="[object Proxy]";function fe(e){if(!X(e))return!1;var t=F(e);return t==de||t==pe||t==ce||t==he}var me,ge=k["__core-js_shared__"],Re=(me=/[^.]+$/.exec(ge&&ge.keys&&ge.keys.IE_PROTO||""))?"Symbol(src)_1."+me:"";var ve=Function.prototype.toString;function ye(e){if(null!=e){try{return ve.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var be=/^\[object .+?Constructor\]$/,Se=Function.prototype,we=Object.prototype,Ce=Se.toString,ke=we.hasOwnProperty,Be=RegExp("^"+Ce.call(ke).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Pe(e){return!(!X(e)||function(e){return!!Re&&Re in e}(e))&&(fe(e)?Be:be).test(ye(e))}function xe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Pe(n)?n:void 0}var Ie=xe(k,"WeakMap"),Me=Ie&&new Ie,Ee=Me?function(e,t){return Me.set(e,t),e}:ue,Oe=Object.create,_e=function(){function e(){}return function(t){if(!X(t))return{};if(Oe)return Oe(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function $e(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=_e(e.prototype),r=e.apply(n,t);return X(r)?r:n}}var Fe=1;function Le(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var He=Math.max;function Te(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,l=t.length,u=He(o-a,0),c=Array(l+u),d=!r;++s<l;)c[s]=t[s];for(;++i<a;)(d||i<o)&&(c[n[i]]=e[i]);for(;u--;)c[s++]=e[i++];return c}var Ae=Math.max;function Ne(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,l=-1,u=t.length,c=Ae(o-s,0),d=Array(c+u),p=!r;++i<c;)d[i]=e[i];for(var h=i;++l<u;)d[h+l]=t[l];for(;++a<s;)(p||i<o)&&(d[h+n[a]]=e[i++]);return d}function De(){}var je=4294967295;function We(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=je,this.__views__=[]}function Ge(){}We.prototype=_e(De.prototype),We.prototype.constructor=We;var ze=Me?function(e){return Me.get(e)}:Ge,Ve={},qe=Object.prototype.hasOwnProperty;function Ue(e){for(var t=e.name+"",n=Ve[t],r=qe.call(Ve,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Ke(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Je(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function Ye(e){if(e instanceof We)return e.clone();var t=new Ke(e.__wrapped__,e.__chain__);return t.__actions__=Je(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}Ke.prototype=_e(De.prototype),Ke.prototype.constructor=Ke;var Ze=Object.prototype.hasOwnProperty;function Xe(e){if(L(e)&&!j(e)&&!(e instanceof We)){if(e instanceof Ke)return e;if(Ze.call(e,"__wrapped__"))return Ye(e)}return new Ke(e)}function Qe(e){var t=Ue(e),n=Xe[t];if("function"!=typeof n||!(t in We.prototype))return!1;if(e===n)return!0;var r=ze(n);return!!r&&e===r[0]}Xe.prototype=De.prototype,Xe.prototype.constructor=Xe;var et=Date.now;function tt(e){var t=0,n=0;return function(){var r=et(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var nt=tt(Ee),rt=/\{\n\/\* \[wrapped with (.+)\] \*/,it=/,? & /;var ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function at(e){return function(){return e}}var st=function(){try{var e=xe(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),lt=st?function(e,t){return st(e,"toString",{configurable:!0,enumerable:!1,value:at(t),writable:!0})}:ue,ut=tt(lt);function ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function dt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function pt(e){return e!=e}function ht(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):dt(e,pt,n)}function ft(e,t){return!!(null==e?0:e.length)&&ht(e,t,0)>-1}var mt=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function gt(e,t,n){var r=t+"";return ut(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ot,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return ct(mt,(function(n){var r="_."+n[0];t&n[1]&&!ft(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(rt);return t?t[1].split(it):[]}(r),n)))}var Rt=1,vt=2,yt=4,bt=8,St=32,wt=64;function Ct(e,t,n,r,i,o,a,s,l,u){var c=t&bt;t|=c?St:wt,(t&=~(c?wt:St))&yt||(t&=~(Rt|vt));var d=[e,t,i,c?o:void 0,c?a:void 0,c?void 0:o,c?void 0:a,s,l,u],p=n.apply(void 0,d);return Qe(e)&&nt(p,d),p.placeholder=r,gt(p,e,t)}function kt(e){return e.placeholder}var Bt=9007199254740991,Pt=/^(?:0|[1-9]\d*)$/;function xt(e,t){var n=typeof e;return!!(t=null==t?Bt:t)&&("number"==n||"symbol"!=n&&Pt.test(e))&&e>-1&&e%1==0&&e<t}var It=Math.min;var Mt="__lodash_placeholder__";function Et(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==Mt||(e[n]=Mt,o[i++]=n)}return o}var Ot=1,_t=2,$t=8,Ft=16,Lt=128,Ht=512;function Tt(e,t,n,r,i,o,a,s,l,u){var c=t&Lt,d=t&Ot,p=t&_t,h=t&($t|Ft),f=t&Ht,m=p?void 0:$e(e);return function g(){for(var R=arguments.length,v=Array(R),y=R;y--;)v[y]=arguments[y];if(h)var b=kt(g),S=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(v,b);if(r&&(v=Te(v,r,i,h)),o&&(v=Ne(v,o,a,h)),R-=S,h&&R<u){var w=Et(v,b);return Ct(e,t,Tt,g.placeholder,n,v,w,s,l,u-R)}var C=d?n:this,B=p?C[e]:e;return R=v.length,s?v=function(e,t){for(var n=e.length,r=It(t.length,n),i=Je(e);r--;){var o=t[r];e[r]=xt(o,n)?i[o]:void 0}return e}(v,s):f&&R>1&&v.reverse(),c&&l<R&&(v.length=l),this&&this!==k&&this instanceof g&&(B=m||$e(B)),B.apply(C,v)}}var At=1;var Nt="__lodash_placeholder__",Dt=1,jt=2,Wt=4,Gt=8,zt=128,Vt=256,qt=Math.min;var Ut="Expected a function",Kt=1,Jt=2,Yt=8,Zt=16,Xt=32,Qt=64,en=Math.max;function tn(e,t,n,r,i,o,a,s){var l=t&Jt;if(!l&&"function"!=typeof e)throw new TypeError(Ut);var u=r?r.length:0;if(u||(t&=~(Xt|Qt),r=i=void 0),a=void 0===a?a:en(le(a),0),s=void 0===s?s:le(s),u-=i?i.length:0,t&Qt){var c=r,d=i;r=i=void 0}var p=l?void 0:ze(e),h=[e,t,n,r,i,c,d,o,a,s];if(p&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<(Dt|jt|zt),a=r==zt&&n==Gt||r==zt&&n==Vt&&e[7].length<=t[8]||r==(zt|Vt)&&t[7].length<=t[8]&&n==Gt;if(!o&&!a)return e;r&Dt&&(e[2]=t[2],i|=n&Dt?0:Wt);var s=t[3];if(s){var l=e[3];e[3]=l?Te(l,s,t[4]):s,e[4]=l?Et(e[3],Nt):t[4]}(s=t[5])&&(l=e[5],e[5]=l?Ne(l,s,t[6]):s,e[6]=l?Et(e[5],Nt):t[6]),(s=t[7])&&(e[7]=s),r&zt&&(e[8]=null==e[8]?t[8]:qt(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(h,p),e=h[0],t=h[1],n=h[2],r=h[3],i=h[4],!(s=h[9]=void 0===h[9]?l?0:e.length:en(h[9]-u,0))&&t&(Yt|Zt)&&(t&=~(Yt|Zt)),t&&t!=Kt)f=t==Yt||t==Zt?function(e,t,n){var r=$e(e);return function i(){for(var o=arguments.length,a=Array(o),s=o,l=kt(i);s--;)a[s]=arguments[s];var u=o<3&&a[0]!==l&&a[o-1]!==l?[]:Et(a,l);return(o-=u.length)<n?Ct(e,t,Tt,i.placeholder,void 0,a,u,void 0,void 0,n-o):Le(this&&this!==k&&this instanceof i?r:e,this,a)}}(e,t,s):t!=Xt&&t!=(Kt|Xt)||i.length?Tt.apply(void 0,h):function(e,t,n,r){var i=t&At,o=$e(e);return function t(){for(var a=-1,s=arguments.length,l=-1,u=r.length,c=Array(u+s),d=this&&this!==k&&this instanceof t?o:e;++l<u;)c[l]=r[l];for(;s--;)c[l++]=arguments[++a];return Le(d,i?n:this,c)}}(e,t,n,r);else var f=function(e,t,n){var r=t&Fe,i=$e(e);return function t(){return(this&&this!==k&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return gt((p?Ee:nt)(f,h),e,t)}var nn=128;function rn(e,t,n){return t=n?void 0:t,t=e&&null==t?e.length:t,tn(e,nn,void 0,void 0,void 0,void 0,t)}function on(e,t,n){"__proto__"==t&&st?st(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function an(e,t){return e===t||e!=e&&t!=t}var sn=Object.prototype.hasOwnProperty;function ln(e,t,n){var r=e[t];sn.call(e,t)&&an(r,n)&&(void 0!==n||t in e)||on(e,t,n)}function un(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?on(n,s,l):ln(n,s,l)}return n}var cn=Math.max;function dn(e,t,n){return t=cn(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=cn(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),Le(e,this,s)}}function pn(e,t){return ut(dn(e,t,ue),e+"")}var hn=9007199254740991;function fn(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=hn}function mn(e){return null!=e&&fn(e.length)&&!fe(e)}function gn(e,t,n){if(!X(n))return!1;var r=typeof t;return!!("number"==r?mn(n)&&xt(t,n.length):"string"==r&&t in n)&&an(n[t],e)}function Rn(e){return pn((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&gn(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}var vn=Object.prototype;function yn(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||vn)}function bn(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Sn(e){return L(e)&&"[object Arguments]"==F(e)}var wn=Object.prototype,Cn=wn.hasOwnProperty,kn=wn.propertyIsEnumerable,Bn=Sn(function(){return arguments}())?Sn:function(e){return L(e)&&Cn.call(e,"callee")&&!kn.call(e,"callee")};function Pn(){return!1}var xn="object"==typeof e&&e&&!e.nodeType&&e,In=xn&&"object"==typeof module&&module&&!module.nodeType&&module,Mn=In&&In.exports===xn?k.Buffer:void 0,En=(Mn?Mn.isBuffer:void 0)||Pn,On={};function _n(e){return function(t){return e(t)}}On["[object Float32Array]"]=On["[object Float64Array]"]=On["[object Int8Array]"]=On["[object Int16Array]"]=On["[object Int32Array]"]=On["[object Uint8Array]"]=On["[object Uint8ClampedArray]"]=On["[object Uint16Array]"]=On["[object Uint32Array]"]=!0,On["[object Arguments]"]=On["[object Array]"]=On["[object ArrayBuffer]"]=On["[object Boolean]"]=On["[object DataView]"]=On["[object Date]"]=On["[object Error]"]=On["[object Function]"]=On["[object Map]"]=On["[object Number]"]=On["[object Object]"]=On["[object RegExp]"]=On["[object Set]"]=On["[object String]"]=On["[object WeakMap]"]=!1;var $n="object"==typeof e&&e&&!e.nodeType&&e,Fn=$n&&"object"==typeof module&&module&&!module.nodeType&&module,Ln=Fn&&Fn.exports===$n&&w.process,Hn=function(){try{var e=Fn&&Fn.require&&Fn.require("util").types;return e||Ln&&Ln.binding&&Ln.binding("util")}catch(e){}}(),Tn=Hn&&Hn.isTypedArray,An=Tn?_n(Tn):function(e){return L(e)&&fn(e.length)&&!!On[F(e)]},Nn=Object.prototype.hasOwnProperty;function Dn(e,t){var n=j(e),r=!n&&Bn(e),i=!n&&!r&&En(e),o=!n&&!r&&!i&&An(e),a=n||r||i||o,s=a?bn(e.length,String):[],l=s.length;for(var u in e)!t&&!Nn.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||xt(u,l))||s.push(u);return s}function jn(e,t){return function(n){return e(t(n))}}var Wn=jn(Object.keys,Object),Gn=Object.prototype.hasOwnProperty;function zn(e){if(!yn(e))return Wn(e);var t=[];for(var n in Object(e))Gn.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Vn(e){return mn(e)?Dn(e):zn(e)}var qn=Object.prototype.hasOwnProperty,Un=Rn((function(e,t){if(yn(t)||mn(t))un(t,Vn(t),e);else for(var n in t)qn.call(t,n)&&ln(e,n,t[n])}));var Kn=Object.prototype.hasOwnProperty;function Jn(e){if(!X(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=yn(e),n=[];for(var r in e)("constructor"!=r||!t&&Kn.call(e,r))&&n.push(r);return n}function Yn(e){return mn(e)?Dn(e,!0):Jn(e)}var Zn=Rn((function(e,t){un(t,Yn(t),e)})),Xn=Rn((function(e,t,n,r){un(t,Yn(t),e,r)})),Qn=Rn((function(e,t,n,r){un(t,Vn(t),e,r)})),er=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tr=/^\w*$/;function nr(e,t){if(j(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!T(e))||(tr.test(e)||!er.test(e)||null!=t&&e in Object(t))}var rr=xe(Object,"create");var ir=Object.prototype.hasOwnProperty;var or=Object.prototype.hasOwnProperty;function ar(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function sr(e,t){for(var n=e.length;n--;)if(an(e[n][0],t))return n;return-1}ar.prototype.clear=function(){this.__data__=rr?rr(null):{},this.size=0},ar.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ar.prototype.get=function(e){var t=this.__data__;if(rr){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ir.call(t,e)?t[e]:void 0},ar.prototype.has=function(e){var t=this.__data__;return rr?void 0!==t[e]:or.call(t,e)},ar.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=rr&&void 0===t?"__lodash_hash_undefined__":t,this};var lr=Array.prototype.splice;function ur(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ur.prototype.clear=function(){this.__data__=[],this.size=0},ur.prototype.delete=function(e){var t=this.__data__,n=sr(t,e);return!(n<0)&&(n==t.length-1?t.pop():lr.call(t,n,1),--this.size,!0)},ur.prototype.get=function(e){var t=this.__data__,n=sr(t,e);return n<0?void 0:t[n][1]},ur.prototype.has=function(e){return sr(this.__data__,e)>-1},ur.prototype.set=function(e,t){var n=this.__data__,r=sr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var cr=xe(k,"Map");function dr(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function pr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pr.prototype.clear=function(){this.size=0,this.__data__={hash:new ar,map:new(cr||ur),string:new ar}},pr.prototype.delete=function(e){var t=dr(this,e).delete(e);return this.size-=t?1:0,t},pr.prototype.get=function(e){return dr(this,e).get(e)},pr.prototype.has=function(e){return dr(this,e).has(e)},pr.prototype.set=function(e,t){var n=dr(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var hr="Expected a function";function fr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(hr);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(fr.Cache||pr),n}fr.Cache=pr;var mr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gr=/\\(\\)?/g,Rr=function(e){var t=fr(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(mr,(function(e,n,r,i){t.push(r?i.replace(gr,"$1"):n||e)})),t}));function vr(e){return null==e?"":V(e)}function yr(e,t){return j(e)?e:nr(e,t)?[e]:Rr(vr(e))}var br=1/0;function Sr(e){if("string"==typeof e||T(e))return e;var t=e+"";return"0"==t&&1/e==-br?"-0":t}function wr(e,t){for(var n=0,r=(t=yr(t,e)).length;null!=e&&n<r;)e=e[Sr(t[n++])];return n&&n==r?e:void 0}function Cr(e,t,n){var r=null==e?void 0:wr(e,t);return void 0===r?n:r}function kr(e,t){for(var n=-1,r=t.length,i=Array(r),o=null==e;++n<r;)i[n]=o?void 0:Cr(e,t[n]);return i}function Br(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Pr=B?B.isConcatSpreadable:void 0;function xr(e){return j(e)||Bn(e)||!!(Pr&&e&&e[Pr])}function Ir(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=xr),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?Ir(s,t-1,n,r,i):Br(i,s):r||(i[i.length]=s)}return i}function Mr(e){return(null==e?0:e.length)?Ir(e,1):[]}function Er(e){return ut(dn(e,void 0,Mr),e+"")}var Or=Er(kr),_r=jn(Object.getPrototypeOf,Object),$r="[object Object]",Fr=Function.prototype,Lr=Object.prototype,Hr=Fr.toString,Tr=Lr.hasOwnProperty,Ar=Hr.call(Object);function Nr(e){if(!L(e)||F(e)!=$r)return!1;var t=_r(e);if(null===t)return!0;var n=Tr.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Hr.call(n)==Ar}var Dr="[object DOMException]",jr="[object Error]";function Wr(e){if(!L(e))return!1;var t=F(e);return t==jr||t==Dr||"string"==typeof e.message&&"string"==typeof e.name&&!Nr(e)}var Gr=pn((function(e,t){try{return Le(e,void 0,t)}catch(e){return Wr(e)?e:new Error(e)}})),zr="Expected a function";function Vr(e,t){var n;if("function"!=typeof t)throw new TypeError(zr);return e=le(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var qr=pn((function(e,t,n){var r=1;if(n.length){var i=Et(n,kt(qr));r|=32}return tn(e,r,t,n,i)}));qr.placeholder={};var Ur=Er((function(e,t){return ct(t,(function(t){t=Sr(t),on(e,t,qr(e[t],e))})),e})),Kr=pn((function(e,t,n){var r=3;if(n.length){var i=Et(n,kt(Kr));r|=32}return tn(t,r,e,n,i)}));function Jr(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}function Yr(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Jr(e,t,n)}Kr.placeholder={};var Zr=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Xr(e){return Zr.test(e)}var Qr="\\ud800-\\udfff",ei="["+Qr+"]",ti="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ni="\\ud83c[\\udffb-\\udfff]",ri="[^"+Qr+"]",ii="(?:\\ud83c[\\udde6-\\uddff]){2}",oi="[\\ud800-\\udbff][\\udc00-\\udfff]",ai="(?:"+ti+"|"+ni+")"+"?",si="[\\ufe0e\\ufe0f]?",li=si+ai+("(?:\\u200d(?:"+[ri,ii,oi].join("|")+")"+si+ai+")*"),ui="(?:"+[ri+ti+"?",ti,ii,oi,ei].join("|")+")",ci=RegExp(ni+"(?="+ni+")|"+ui+li,"g");function di(e){return Xr(e)?function(e){return e.match(ci)||[]}(e):function(e){return e.split("")}(e)}function pi(e){return function(t){var n=Xr(t=vr(t))?di(t):void 0,r=n?n[0]:t.charAt(0),i=n?Yr(n,1).join(""):t.slice(1);return r[e]()+i}}var hi=pi("toUpperCase");function fi(e){return hi(vr(e).toLowerCase())}function mi(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function gi(e){return function(t){return null==e?void 0:e[t]}}var Ri=gi({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),vi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yi=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");function bi(e){return(e=vr(e))&&e.replace(vi,Ri).replace(yi,"")}var Si=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var wi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Ci="\\ud800-\\udfff",ki="\\u2700-\\u27bf",Bi="a-z\\xdf-\\xf6\\xf8-\\xff",Pi="A-Z\\xc0-\\xd6\\xd8-\\xde",xi="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ii="["+xi+"]",Mi="\\d+",Ei="["+ki+"]",Oi="["+Bi+"]",_i="[^"+Ci+xi+Mi+ki+Bi+Pi+"]",$i="(?:\\ud83c[\\udde6-\\uddff]){2}",Fi="[\\ud800-\\udbff][\\udc00-\\udfff]",Li="["+Pi+"]",Hi="(?:"+Oi+"|"+_i+")",Ti="(?:"+Li+"|"+_i+")",Ai="(?:['’](?:d|ll|m|re|s|t|ve))?",Ni="(?:['’](?:D|LL|M|RE|S|T|VE))?",Di="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",ji="[\\ufe0e\\ufe0f]?",Wi=ji+Di+("(?:\\u200d(?:"+["[^"+Ci+"]",$i,Fi].join("|")+")"+ji+Di+")*"),Gi="(?:"+[Ei,$i,Fi].join("|")+")"+Wi,zi=RegExp([Li+"?"+Oi+"+"+Ai+"(?="+[Ii,Li,"$"].join("|")+")",Ti+"+"+Ni+"(?="+[Ii,Li+Hi,"$"].join("|")+")",Li+"?"+Hi+"+"+Ai,Li+"+"+Ni,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mi,Gi].join("|"),"g");function Vi(e,t,n){return e=vr(e),void 0===(t=n?void 0:t)?function(e){return wi.test(e)}(e)?function(e){return e.match(zi)||[]}(e):function(e){return e.match(Si)||[]}(e):e.match(t)||[]}var qi=RegExp("['’]","g");function Ui(e){return function(t){return mi(Vi(bi(t).replace(qi,"")),e,"")}}var Ki=Ui((function(e,t,n){return t=t.toLowerCase(),e+(n?fi(t):t)}));var Ji=k.isFinite,Yi=Math.min;function Zi(e){var t=Math[e];return function(e,n){if(e=ie(e),(n=null==n?0:Yi(le(n),292))&&Ji(e)){var r=(vr(e)+"e").split("e");return+((r=(vr(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Xi=Zi("ceil");function Qi(e){var t=Xe(e);return t.__chain__=!0,t}var eo=Math.ceil,to=Math.max;function no(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function ro(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=ie(n))==n?n:0),void 0!==t&&(t=(t=ie(t))==t?t:0),no(ie(e),t,n)}function io(e){var t=this.__data__=new ur(e);this.size=t.size}function oo(e,t){return e&&un(t,Vn(t),e)}io.prototype.clear=function(){this.__data__=new ur,this.size=0},io.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},io.prototype.get=function(e){return this.__data__.get(e)},io.prototype.has=function(e){return this.__data__.has(e)},io.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ur){var r=n.__data__;if(!cr||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new pr(r)}return n.set(e,t),this.size=n.size,this};var ao="object"==typeof e&&e&&!e.nodeType&&e,so=ao&&"object"==typeof module&&module&&!module.nodeType&&module,lo=so&&so.exports===ao?k.Buffer:void 0,uo=lo?lo.allocUnsafe:void 0;function co(e,t){if(t)return e.slice();var n=e.length,r=uo?uo(n):new e.constructor(n);return e.copy(r),r}function po(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function ho(){return[]}var fo=Object.prototype.propertyIsEnumerable,mo=Object.getOwnPropertySymbols,go=mo?function(e){return null==e?[]:(e=Object(e),po(mo(e),(function(t){return fo.call(e,t)})))}:ho;var Ro=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Br(t,go(e)),e=_r(e);return t}:ho;function vo(e,t,n){var r=t(e);return j(e)?r:Br(r,n(e))}function yo(e){return vo(e,Vn,go)}function bo(e){return vo(e,Yn,Ro)}var So=xe(k,"DataView"),wo=xe(k,"Promise"),Co=xe(k,"Set"),ko="[object Map]",Bo="[object Promise]",Po="[object Set]",xo="[object WeakMap]",Io="[object DataView]",Mo=ye(So),Eo=ye(cr),Oo=ye(wo),_o=ye(Co),$o=ye(Ie),Fo=F;(So&&Fo(new So(new ArrayBuffer(1)))!=Io||cr&&Fo(new cr)!=ko||wo&&Fo(wo.resolve())!=Bo||Co&&Fo(new Co)!=Po||Ie&&Fo(new Ie)!=xo)&&(Fo=function(e){var t=F(e),n="[object Object]"==t?e.constructor:void 0,r=n?ye(n):"";if(r)switch(r){case Mo:return Io;case Eo:return ko;case Oo:return Bo;case _o:return Po;case $o:return xo}return t});var Lo=Fo,Ho=Object.prototype.hasOwnProperty;var To=k.Uint8Array;function Ao(e){var t=new e.constructor(e.byteLength);return new To(t).set(new To(e)),t}var No=/\w*$/;var Do=B?B.prototype:void 0,jo=Do?Do.valueOf:void 0;function Wo(e,t){var n=t?Ao(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Go="[object Boolean]",zo="[object Date]",Vo="[object Map]",qo="[object Number]",Uo="[object RegExp]",Ko="[object Set]",Jo="[object String]",Yo="[object Symbol]",Zo="[object ArrayBuffer]",Xo="[object DataView]",Qo="[object Float32Array]",ea="[object Float64Array]",ta="[object Int8Array]",na="[object Int16Array]",ra="[object Int32Array]",ia="[object Uint8Array]",oa="[object Uint8ClampedArray]",aa="[object Uint16Array]",sa="[object Uint32Array]";function la(e,t,n){var r,i=e.constructor;switch(t){case Zo:return Ao(e);case Go:case zo:return new i(+e);case Xo:return function(e,t){var n=t?Ao(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case Qo:case ea:case ta:case na:case ra:case ia:case oa:case aa:case sa:return Wo(e,n);case Vo:return new i;case qo:case Jo:return new i(e);case Uo:return function(e){var t=new e.constructor(e.source,No.exec(e));return t.lastIndex=e.lastIndex,t}(e);case Ko:return new i;case Yo:return r=e,jo?Object(jo.call(r)):{}}}function ua(e){return"function"!=typeof e.constructor||yn(e)?{}:_e(_r(e))}var ca=Hn&&Hn.isMap,da=ca?_n(ca):function(e){return L(e)&&"[object Map]"==Lo(e)};var pa=Hn&&Hn.isSet,ha=pa?_n(pa):function(e){return L(e)&&"[object Set]"==Lo(e)},fa=1,ma=2,ga=4,Ra="[object Arguments]",va="[object Function]",ya="[object GeneratorFunction]",ba="[object Object]",Sa={};function wa(e,t,n,r,i,o){var a,s=t&fa,l=t&ma,u=t&ga;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!X(e))return e;var c=j(e);if(c){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Ho.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!s)return Je(e,a)}else{var d=Lo(e),p=d==va||d==ya;if(En(e))return co(e,s);if(d==ba||d==Ra||p&&!i){if(a=l||p?{}:ua(e),!s)return l?function(e,t){return un(e,Ro(e),t)}(e,function(e,t){return e&&un(t,Yn(t),e)}(a,e)):function(e,t){return un(e,go(e),t)}(e,oo(a,e))}else{if(!Sa[d])return i?e:{};a=la(e,d,s)}}o||(o=new io);var h=o.get(e);if(h)return h;o.set(e,a),ha(e)?e.forEach((function(r){a.add(wa(r,t,n,r,e,o))})):da(e)&&e.forEach((function(r,i){a.set(i,wa(r,t,n,i,e,o))}));var f=c?void 0:(u?l?bo:yo:l?Yn:Vn)(e);return ct(f||e,(function(r,i){f&&(r=e[i=r]),ln(a,i,wa(r,t,n,i,e,o))})),a}Sa[Ra]=Sa["[object Array]"]=Sa["[object ArrayBuffer]"]=Sa["[object DataView]"]=Sa["[object Boolean]"]=Sa["[object Date]"]=Sa["[object Float32Array]"]=Sa["[object Float64Array]"]=Sa["[object Int8Array]"]=Sa["[object Int16Array]"]=Sa["[object Int32Array]"]=Sa["[object Map]"]=Sa["[object Number]"]=Sa[ba]=Sa["[object RegExp]"]=Sa["[object Set]"]=Sa["[object String]"]=Sa["[object Symbol]"]=Sa["[object Uint8Array]"]=Sa["[object Uint8ClampedArray]"]=Sa["[object Uint16Array]"]=Sa["[object Uint32Array]"]=!0,Sa["[object Error]"]=Sa[va]=Sa["[object WeakMap]"]=!1;var Ca=4;function ka(e){return wa(e,Ca)}var Ba=1,Pa=4;function xa(e){return wa(e,Ba|Pa)}function Ia(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new pr;++t<n;)this.add(e[t])}function Ma(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Ea(e,t){return e.has(t)}Ia.prototype.add=Ia.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ia.prototype.has=function(e){return this.__data__.has(e)};var Oa=1,_a=2;function $a(e,t,n,r,i,o){var a=n&Oa,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(e),c=o.get(t);if(u&&c)return u==t&&c==e;var d=-1,p=!0,h=n&_a?new Ia:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var f=e[d],m=t[d];if(r)var g=a?r(m,f,d,t,e,o):r(f,m,d,e,t,o);if(void 0!==g){if(g)continue;p=!1;break}if(h){if(!Ma(t,(function(e,t){if(!Ea(h,t)&&(f===e||i(f,e,n,r,o)))return h.push(t)}))){p=!1;break}}else if(f!==m&&!i(f,m,n,r,o)){p=!1;break}}return o.delete(e),o.delete(t),p}function Fa(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function La(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Ha=1,Ta=2,Aa="[object Boolean]",Na="[object Date]",Da="[object Error]",ja="[object Map]",Wa="[object Number]",Ga="[object RegExp]",za="[object Set]",Va="[object String]",qa="[object Symbol]",Ua="[object ArrayBuffer]",Ka="[object DataView]",Ja=B?B.prototype:void 0,Ya=Ja?Ja.valueOf:void 0;var Za=1,Xa=Object.prototype.hasOwnProperty;var Qa=1,es="[object Arguments]",ts="[object Array]",ns="[object Object]",rs=Object.prototype.hasOwnProperty;function is(e,t,n,r,i,o){var a=j(e),s=j(t),l=a?ts:Lo(e),u=s?ts:Lo(t),c=(l=l==es?ns:l)==ns,d=(u=u==es?ns:u)==ns,p=l==u;if(p&&En(e)){if(!En(t))return!1;a=!0,c=!1}if(p&&!c)return o||(o=new io),a||An(e)?$a(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case Ka:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ua:return!(e.byteLength!=t.byteLength||!o(new To(e),new To(t)));case Aa:case Na:case Wa:return an(+e,+t);case Da:return e.name==t.name&&e.message==t.message;case Ga:case Va:return e==t+"";case ja:var s=Fa;case za:var l=r&Ha;if(s||(s=La),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=Ta,a.set(e,t);var c=$a(s(e),s(t),r,i,o,a);return a.delete(e),c;case qa:if(Ya)return Ya.call(e)==Ya.call(t)}return!1}(e,t,l,n,r,i,o);if(!(n&Qa)){var h=c&&rs.call(e,"__wrapped__"),f=d&&rs.call(t,"__wrapped__");if(h||f){var m=h?e.value():e,g=f?t.value():t;return o||(o=new io),i(m,g,n,r,o)}}return!!p&&(o||(o=new io),function(e,t,n,r,i,o){var a=n&Za,s=yo(e),l=s.length;if(l!=yo(t).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in t:Xa.call(t,c)))return!1}var d=o.get(e),p=o.get(t);if(d&&p)return d==t&&p==e;var h=!0;o.set(e,t),o.set(t,e);for(var f=a;++u<l;){var m=e[c=s[u]],g=t[c];if(r)var R=a?r(g,m,c,t,e,o):r(m,g,c,e,t,o);if(!(void 0===R?m===g||i(m,g,n,r,o):R)){h=!1;break}f||(f="constructor"==c)}if(h&&!f){var v=e.constructor,y=t.constructor;v==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(h=!1)}return o.delete(e),o.delete(t),h}(e,t,n,r,i,o))}function os(e,t,n,r,i){return e===t||(null==e||null==t||!L(e)&&!L(t)?e!=e&&t!=t:is(e,t,n,r,os,i))}var as=1,ss=2;function ls(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var l=(s=n[i])[0],u=e[l],c=s[1];if(a&&s[2]){if(void 0===u&&!(l in e))return!1}else{var d=new io;if(r)var p=r(u,c,l,e,t,d);if(!(void 0===p?os(c,u,as|ss,r,d):p))return!1}}return!0}function us(e){return e==e&&!X(e)}function cs(e){for(var t=Vn(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,us(i)]}return t}function ds(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function ps(e){var t=cs(e);return 1==t.length&&t[0][2]?ds(t[0][0],t[0][1]):function(n){return n===e||ls(n,e,t)}}function hs(e,t){return null!=e&&t in Object(e)}function fs(e,t,n){for(var r=-1,i=(t=yr(t,e)).length,o=!1;++r<i;){var a=Sr(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&fn(i)&&xt(a,i)&&(j(e)||Bn(e))}function ms(e,t){return null!=e&&fs(e,t,hs)}var gs=1,Rs=2;function vs(e,t){return nr(e)&&us(t)?ds(Sr(e),t):function(n){var r=Cr(n,e);return void 0===r&&r===t?ms(n,e):os(t,r,gs|Rs)}}function ys(e){return function(t){return null==t?void 0:t[e]}}function bs(e){return nr(e)?ys(Sr(e)):function(e){return function(t){return wr(t,e)}}(e)}function Ss(e){return"function"==typeof e?e:null==e?ue:"object"==typeof e?j(e)?vs(e[0],e[1]):ps(e):bs(e)}function ws(e,t,n){var r=n.length;if(null==e)return!r;for(e=Object(e);r--;){var i=n[r],o=t[i],a=e[i];if(void 0===a&&!(i in e)||!o(a))return!1}return!0}function Cs(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function ks(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}var Bs=ks();function Ps(e,t){return e&&Bs(e,t,Vn)}function xs(e,t){return function(n,r){if(null==n)return n;if(!mn(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Object(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}var Is=xs(Ps);function Ms(e,t,n,r){return Is(e,(function(e,i,o){t(r,e,n(e),o)})),r}function Es(e,t){return function(n,r){var i=j(n)?Cs:Ms,o=t?t():{};return i(n,e,Ss(r),o)}}var Os=Object.prototype.hasOwnProperty,_s=Es((function(e,t,n){Os.call(e,n)?++e[n]:on(e,n,1)}));function $s(e,t,n){var r=tn(e,8,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return r.placeholder=$s.placeholder,r}$s.placeholder={};function Fs(e,t,n){var r=tn(e,16,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return r.placeholder=Fs.placeholder,r}Fs.placeholder={};var Ls=function(){return k.Date.now()},Hs="Expected a function",Ts=Math.max,As=Math.min;function Ns(e,t,n){var r,i,o,a,s,l,u=0,c=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError(Hs);function h(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function f(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=o}function m(){var e=Ls();if(f(e))return g(e);s=setTimeout(m,function(e){var n=t-(e-l);return d?As(n,o-(e-u)):n}(e))}function g(e){return s=void 0,p&&r?h(e):(r=i=void 0,a)}function R(){var e=Ls(),n=f(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return function(e){return u=e,s=setTimeout(m,t),c?h(e):a}(l);if(d)return clearTimeout(s),s=setTimeout(m,t),h(l)}return void 0===s&&(s=setTimeout(m,t)),a}return t=ie(t)||0,X(n)&&(c=!!n.leading,o=(d="maxWait"in n)?Ts(ie(n.maxWait)||0,t):o,p="trailing"in n?!!n.trailing:p),R.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},R.flush=function(){return void 0===s?a:g(Ls())},R}var Ds=Object.prototype,js=Ds.hasOwnProperty,Ws=pn((function(e,t){e=Object(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&gn(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=Yn(o),s=-1,l=a.length;++s<l;){var u=a[s],c=e[u];(void 0===c||an(c,Ds[u])&&!js.call(e,u))&&(e[u]=o[u])}return e}));function Gs(e,t,n){(void 0!==n&&!an(e[t],n)||void 0===n&&!(t in e))&&on(e,t,n)}function zs(e){return L(e)&&mn(e)}function Vs(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function qs(e){return un(e,Yn(e))}function Us(e,t,n,r,i){e!==t&&Bs(t,(function(o,a){if(i||(i=new io),X(o))!function(e,t,n,r,i,o,a){var s=Vs(e,n),l=Vs(t,n),u=a.get(l);if(u)Gs(e,n,u);else{var c=o?o(s,l,n+"",e,t,a):void 0,d=void 0===c;if(d){var p=j(l),h=!p&&En(l),f=!p&&!h&&An(l);c=l,p||h||f?j(s)?c=s:zs(s)?c=Je(s):h?(d=!1,c=co(l,!0)):f?(d=!1,c=Wo(l,!0)):c=[]:Nr(l)||Bn(l)?(c=s,Bn(s)?c=qs(s):X(s)&&!fe(s)||(c=ua(l))):d=!1}d&&(a.set(l,c),i(c,l,r,o,a),a.delete(l)),Gs(e,n,c)}}(e,t,a,n,Us,r,i);else{var s=r?r(Vs(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),Gs(e,a,s)}}),Yn)}function Ks(e,t,n,r,i,o){return X(e)&&X(t)&&(o.set(t,e),Us(e,t,void 0,Ks,o),o.delete(t)),e}var Js=Rn((function(e,t,n,r){Us(e,t,n,r)})),Ys=pn((function(e){return e.push(void 0,Ks),Le(Js,void 0,e)}));function Zs(e,t,n){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,n)}),t)}var Xs=pn((function(e,t){return Zs(e,1,t)})),Qs=pn((function(e,t,n){return Zs(e,ie(t)||0,n)}));function el(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var tl=200;function nl(e,t,n,r){var i=-1,o=ft,a=!0,s=e.length,l=[],u=t.length;if(!s)return l;n&&(t=D(t,_n(n))),r?(o=el,a=!1):t.length>=tl&&(o=Ea,a=!1,t=new Ia(t));e:for(;++i<s;){var c=e[i],d=null==n?c:n(c);if(c=r||0!==c?c:0,a&&d==d){for(var p=u;p--;)if(t[p]===d)continue e;l.push(c)}else o(t,d,r)||l.push(c)}return l}var rl=pn((function(e,t){return zs(e)?nl(e,Ir(t,1,zs,!0)):[]}));function il(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var ol=pn((function(e,t){var n=il(t);return zs(n)&&(n=void 0),zs(e)?nl(e,Ir(t,1,zs,!0),Ss(n)):[]})),al=pn((function(e,t){var n=il(t);return zs(n)&&(n=void 0),zs(e)?nl(e,Ir(t,1,zs,!0),void 0,n):[]})),sl=q((function(e,t){return e/t}),1);function ll(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Jr(e,r?0:o,r?o+1:i):Jr(e,r?o+1:0,r?i:o)}function ul(e){return"function"==typeof e?e:ue}function cl(e,t){return(j(e)?ct:Is)(e,ul(t))}function dl(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}var pl=ks(!0);function hl(e,t){return e&&pl(e,t,Vn)}var fl=xs(hl,!0);function ml(e,t){return(j(e)?dl:fl)(e,ul(t))}function gl(e){return function(t){var n=Lo(t);return"[object Map]"==n?Fa(t):"[object Set]"==n?function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}(t):function(e,t){return D(t,(function(t){return[t,e[t]]}))}(t,e(t))}}var Rl=gl(Vn),vl=gl(Yn),yl=gi({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),bl=/[&<>"']/g,Sl=RegExp(bl.source);function wl(e){return(e=vr(e))&&Sl.test(e)?e.replace(bl,yl):e}var Cl=/[\\^$.*+?()[\]{}|]/g,kl=RegExp(Cl.source);function Bl(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Pl(e,t){var n=!0;return Is(e,(function(e,r,i){return n=!!t(e,r,i)})),n}var xl=4294967295;function Il(e){return e?no(le(e),0,xl):0}function Ml(e,t){var n=[];return Is(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function El(e){return function(t,n,r){var i=Object(t);if(!mn(t)){var o=Ss(n);t=Vn(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:void 0}}var Ol=Math.max;function _l(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:le(n);return i<0&&(i=Ol(r+i,0)),dt(e,Ss(t),i)}var $l=El(_l);function Fl(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}var Ll=Math.max,Hl=Math.min;function Tl(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=le(n),i=n<0?Ll(r+i,0):Hl(i,r-1)),dt(e,Ss(t),i,!0)}var Al=El(Tl);function Nl(e){return e&&e.length?e[0]:void 0}function Dl(e,t){var n=-1,r=mn(e)?Array(e.length):[];return Is(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function jl(e,t){return(j(e)?D:Dl)(e,Ss(t))}var Wl=1/0;var Gl=1/0;var zl=Zi("floor");function Vl(e){return Er((function(t){var n=t.length,r=n,i=Ke.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new TypeError("Expected a function");if(i&&!a&&"wrapper"==Ue(o))var a=new Ke([],!0)}for(r=a?r:n;++r<n;){var s=Ue(o=t[r]),l="wrapper"==s?ze(o):void 0;a=l&&Qe(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?a[Ue(l[0])].apply(a,l[3]):1==o.length&&Qe(o)?a[s]():a.thru(o)}return function(){var e=arguments,r=e[0];if(a&&1==e.length&&j(r))return a.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}var ql=Vl(),Ul=Vl(!0);function Kl(e,t){return po(t,(function(t){return fe(e[t])}))}var Jl=Object.prototype.hasOwnProperty,Yl=Es((function(e,t,n){Jl.call(e,n)?e[n].push(t):on(e,n,[t])}));function Zl(e,t){return e>t}function Xl(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ie(t),n=ie(n)),e(t,n)}}var Ql=Xl(Zl),eu=Xl((function(e,t){return e>=t})),tu=Object.prototype.hasOwnProperty;function nu(e,t){return null!=e&&tu.call(e,t)}var ru=Math.max,iu=Math.min;var ou="[object String]";function au(e){return"string"==typeof e||!j(e)&&L(e)&&F(e)==ou}function su(e,t){return D(t,(function(t){return e[t]}))}function lu(e){return null==e?[]:su(e,Vn(e))}var uu=Math.max;var cu=Math.max;var du=Math.min;function pu(e,t,n){for(var r=n?el:ft,i=e[0].length,o=e.length,a=o,s=Array(o),l=1/0,u=[];a--;){var c=e[a];a&&t&&(c=D(c,_n(t))),l=du(c.length,l),s[a]=!n&&(t||i>=120&&c.length>=120)?new Ia(a&&c):void 0}c=e[0];var d=-1,p=s[0];e:for(;++d<i&&u.length<l;){var h=c[d],f=t?t(h):h;if(h=n||0!==h?h:0,!(p?Ea(p,f):r(u,f,n))){for(a=o;--a;){var m=s[a];if(!(m?Ea(m,f):r(e[a],f,n)))continue e}p&&p.push(f),u.push(h)}}return u}function hu(e){return zs(e)?e:[]}var fu=pn((function(e){var t=D(e,hu);return t.length&&t[0]===e[0]?pu(t):[]})),mu=pn((function(e){var t=il(e),n=D(e,hu);return t===il(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?pu(n,Ss(t)):[]})),gu=pn((function(e){var t=il(e),n=D(e,hu);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?pu(n,void 0,t):[]}));function Ru(e,t){return function(n,r){return function(e,t,n,r){return Ps(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}var vu=Object.prototype.toString,yu=Ru((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=vu.call(t)),e[t]=n}),at(ue)),bu=Object.prototype,Su=bu.hasOwnProperty,wu=bu.toString,Cu=Ru((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=wu.call(t)),Su.call(e,t)?e[t].push(n):e[t]=[n]}),Ss);function ku(e,t){return t.length<2?e:wr(e,Jr(t,0,-1))}function Bu(e,t,n){var r=null==(e=ku(e,t=yr(t,e)))?e:e[Sr(il(t))];return null==r?void 0:Le(r,e,n)}var Pu=pn(Bu),xu=pn((function(e,t,n){var r=-1,i="function"==typeof t,o=mn(e)?Array(e.length):[];return Is(e,(function(e){o[++r]=i?Le(t,e,n):Bu(e,t,n)})),o}));var Iu=Hn&&Hn.isArrayBuffer,Mu=Iu?_n(Iu):function(e){return L(e)&&"[object ArrayBuffer]"==F(e)};var Eu=Hn&&Hn.isDate,Ou=Eu?_n(Eu):function(e){return L(e)&&"[object Date]"==F(e)};var _u=Object.prototype.hasOwnProperty;function $u(e,t){return os(e,t)}var Fu=k.isFinite;function Lu(e){return"number"==typeof e&&e==le(e)}var Hu="[object Number]";function Tu(e){return"number"==typeof e||L(e)&&F(e)==Hu}var Au=ge?fe:Pn;var Nu=Hn&&Hn.isRegExp,Du=Nu?_n(Nu):function(e){return L(e)&&"[object RegExp]"==F(e)},ju=9007199254740991;var Wu=Array.prototype.join;var Gu=Ui((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),zu=Es((function(e,t,n){on(e,n,t)}));var Vu=Math.max,qu=Math.min;var Uu=Ui((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ku=pi("toLowerCase");function Ju(e,t){return e<t}var Yu=Xl(Ju),Zu=Xl((function(e,t){return e<=t}));function Xu(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(void 0===s?a==a&&!T(a):n(a,s)))var s=a,l=o}return l}function Qu(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}var ec=NaN;function tc(e,t){var n=null==e?0:e.length;return n?Qu(e,t)/n:ec}var nc=Rn((function(e,t,n){Us(e,t,n)})),rc=pn((function(e,t){return function(n){return Bu(n,e,t)}})),ic=pn((function(e,t){return function(n){return Bu(e,n,t)}}));function oc(e,t,n){var r=Vn(t),i=Kl(t,r),o=!(X(n)&&"chain"in n&&!n.chain),a=fe(e);return ct(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Je(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Br([this.value()],arguments))})})),e}var ac=q((function(e,t){return e*t}),1),sc="Expected a function";function lc(e){if("function"!=typeof e)throw new TypeError(sc);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var uc="[object Map]",cc="[object Set]",dc=B?B.iterator:void 0;function pc(e){if(!e)return[];if(mn(e))return au(e)?di(e):Je(e);if(dc&&e[dc])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[dc]());var t=Lo(e);return(t==uc?Fa:t==cc?La:lu)(e)}function hc(e,t){var n=e.length;if(n)return xt(t+=t<0?n:0,n)?e[t]:void 0}function fc(e,t){return null==(e=ku(e,t=yr(t,e)))||delete e[Sr(il(t))]}function mc(e){return Nr(e)?void 0:e}var gc=Er((function(e,t){var n={};if(null==e)return n;var r=!1;t=D(t,(function(t){return t=yr(t,e),r||(r=t.length>1),t})),un(e,bo(e),n),r&&(n=wa(n,7,mc));for(var i=t.length;i--;)fc(n,t[i]);return n}));function Rc(e,t,n,r){if(!X(e))return e;for(var i=-1,o=(t=yr(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var l=Sr(t[i]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=a){var c=s[l];void 0===(u=r?r(c,l,s):void 0)&&(u=X(c)?c:xt(t[i+1])?[]:{})}ln(s,l,u),s=s[l]}return e}function vc(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=wr(e,a);n(s,a)&&Rc(o,yr(a,e),s)}return o}function yc(e,t){if(null==e)return{};var n=D(bo(e),(function(e){return[e]}));return t=Ss(t),vc(e,n,(function(e,n){return t(e,n[0])}))}function bc(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=T(e),a=void 0!==t,s=null===t,l=t==t,u=T(t);if(!s&&!u&&!o&&e>t||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&e<t||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}function Sc(e,t,n){t=t.length?D(t,(function(e){return j(e)?function(t){return wr(t,1===e.length?e[0]:e)}:e})):[ue];var r=-1;t=D(t,_n(Ss));var i=Dl(e,(function(e,n,i){var o=D(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var l=bc(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function wc(e){return Er((function(t){return t=D(t,_n(Ss)),pn((function(n){var r=this;return e(t,(function(e){return Le(e,r,n)}))}))}))}var Cc=wc(D),kc=pn,Bc=Math.min,Pc=kc((function(e,t){var n=(t=1==t.length&&j(t[0])?D(t[0],_n(Ss)):D(Ir(t,1),_n(Ss))).length;return pn((function(r){for(var i=-1,o=Bc(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Le(e,this,r)}))})),xc=wc(Bl),Ic=wc(Ma),Mc=9007199254740991,Ec=Math.floor;function Oc(e,t){var n="";if(!e||t<1||t>Mc)return n;do{t%2&&(n+=e),(t=Ec(t/2))&&(e+=e)}while(t);return n}var _c=ys("length"),$c="\\ud800-\\udfff",Fc="["+$c+"]",Lc="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Hc="\\ud83c[\\udffb-\\udfff]",Tc="[^"+$c+"]",Ac="(?:\\ud83c[\\udde6-\\uddff]){2}",Nc="[\\ud800-\\udbff][\\udc00-\\udfff]",Dc="(?:"+Lc+"|"+Hc+")"+"?",jc="[\\ufe0e\\ufe0f]?",Wc=jc+Dc+("(?:\\u200d(?:"+[Tc,Ac,Nc].join("|")+")"+jc+Dc+")*"),Gc="(?:"+[Tc+Lc+"?",Lc,Ac,Nc,Fc].join("|")+")",zc=RegExp(Hc+"(?="+Hc+")|"+Gc+Wc,"g");function Vc(e){return Xr(e)?function(e){for(var t=zc.lastIndex=0;zc.test(e);)++t;return t}(e):_c(e)}var qc=Math.ceil;function Uc(e,t){var n=(t=void 0===t?" ":V(t)).length;if(n<2)return n?Oc(t,e):t;var r=Oc(t,qc(e/Vc(t)));return Xr(t)?Yr(di(r),0,e).join(""):r.slice(0,e)}var Kc=Math.ceil,Jc=Math.floor;var Yc=/^\s+/,Zc=k.parseInt;var Xc=pn((function(e,t){return tn(e,32,void 0,t,Et(t,kt(Xc)))}));Xc.placeholder={};var Qc=pn((function(e,t){return tn(e,64,void 0,t,Et(t,kt(Qc)))}));Qc.placeholder={};var ed=Es((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var td=Er((function(e,t){return null==e?{}:function(e,t){return vc(e,t,(function(t,n){return ms(e,n)}))}(e,t)}));function nd(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}var rd=Array.prototype.splice;function id(e,t,n,r){var i=r?nd:ht,o=-1,a=t.length,s=e;for(e===t&&(t=Je(t)),n&&(s=D(e,_n(n)));++o<a;)for(var l=0,u=t[o],c=n?n(u):u;(l=i(s,c,l,r))>-1;)s!==e&&rd.call(s,l,1),rd.call(e,l,1);return e}function od(e,t){return e&&e.length&&t&&t.length?id(e,t):e}var ad=pn(od);var sd=Array.prototype.splice;function ld(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;xt(i)?sd.call(e,i,1):fc(e,i)}}return e}var ud=Er((function(e,t){var n=null==e?0:e.length,r=kr(e,t);return ld(e,D(t,(function(e){return xt(e,n)?+e:e})).sort(bc)),r})),cd=Math.floor,dd=Math.random;function pd(e,t){return e+cd(dd()*(t-e+1))}var hd=parseFloat,fd=Math.min,md=Math.random;var gd=Math.ceil,Rd=Math.max;function vd(e){return function(t,n,r){return r&&"number"!=typeof r&&gn(t,n,r)&&(n=r=void 0),t=se(t),void 0===n?(n=t,t=0):n=se(n),function(e,t,n,r){for(var i=-1,o=Rd(gd((t-e)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=e,e+=n;return a}(t,n,r=void 0===r?t<n?1:-1:se(r),e)}}var yd=vd(),bd=vd(!0),Sd=Er((function(e,t){return tn(e,256,void 0,void 0,void 0,t)}));function wd(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Cd(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}var kd=Array.prototype.reverse;function Bd(e){return null==e?e:kd.call(e)}var Pd=Zi("round");function xd(e){var t=e.length;return t?e[pd(0,t-1)]:void 0}function Id(e){return xd(lu(e))}function Md(e){return(j(e)?xd:Id)(e)}function Ed(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var o=pd(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}function Od(e,t){return Ed(Je(e),no(t,0,e.length))}function _d(e,t){var n=lu(e);return Ed(n,no(t,0,n.length))}function $d(e){return Ed(Je(e))}function Fd(e){return Ed(lu(e))}var Ld=Ui((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));function Hd(e,t){var n;return Is(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}var Td=pn((function(e,t){if(null==e)return[];var n=t.length;return n>1&&gn(e,t[0],t[1])?t=[]:n>2&&gn(t[0],t[1],t[2])&&(t=[t[0]]),Sc(e,Ir(t,1),[])})),Ad=4294967294,Nd=Math.floor,Dd=Math.min;function jd(e,t,n,r){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=n(t))!=t,s=null===t,l=T(t),u=void 0===t;i<o;){var c=Nd((i+o)/2),d=n(e[c]),p=void 0!==d,h=null===d,f=d==d,m=T(d);if(a)var g=r||f;else g=u?f&&(r||p):s?f&&p&&(r||!h):l?f&&p&&!h&&(r||!m):!h&&!m&&(r?d<=t:d<t);g?i=c+1:o=c}return Dd(o,Ad)}var Wd=2147483647;function Gd(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=Wd){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!T(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return jd(e,t,ue,n)}function zd(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!an(s,l)){var l=s;o[i++]=0===a?0:a}}return o}var Vd=Math.max;var qd=Ui((function(e,t,n){return e+(n?" ":"")+hi(t)}));var Ud=q((function(e,t){return e-t}),0);function Kd(e,t){return e&&e.length?Qu(e,Ss(t)):0}var Jd=Object.prototype,Yd=Jd.hasOwnProperty;function Zd(e,t,n,r){return void 0===e||an(e,Jd[n])&&!Yd.call(r,n)?t:e}var Xd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function Qd(e){return"\\"+Xd[e]}var ep=/<%=([\s\S]+?)%>/g,tp={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:ep,variable:"",imports:{_:{escape:wl}}},np=/\b__p \+= '';/g,rp=/\b(__p \+=) '' \+/g,ip=/(__e\(.*?\)|\b__t\)) \+\n'';/g,op=/[()=,{}\[\]\/\s]/,ap=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sp=/($^)/,lp=/['\n\r\u2028\u2029\\]/g,up=Object.prototype.hasOwnProperty;function cp(e,t){return t(e)}var dp=4294967295,pp=Math.min;function hp(e,t){var n=e;return n instanceof We&&(n=n.value()),mi(t,(function(e,t){return t.func.apply(t.thisArg,Br([e],t.args))}),n)}function fp(){return hp(this.__wrapped__,this.__actions__)}var mp=9007199254740991;function gp(e,t){for(var n=e.length;n--&&ht(t,e[n],0)>-1;);return n}function Rp(e,t){for(var n=-1,r=e.length;++n<r&&ht(t,e[n],0)>-1;);return n}var vp=/^\s+/;var yp=/\w*$/;var bp=gi({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Sp=/&(?:amp|lt|gt|quot|#39);/g,wp=RegExp(Sp.source);var Cp=Co&&1/La(new Co([,-0]))[1]==1/0?function(e){return new Co(e)}:Ge,kp=200;function Bp(e,t,n){var r=-1,i=ft,o=e.length,a=!0,s=[],l=s;if(n)a=!1,i=el;else if(o>=kp){var u=t?null:Cp(e);if(u)return La(u);a=!1,i=Ea,l=new Ia}else l=t?[]:s;e:for(;++r<o;){var c=e[r],d=t?t(c):c;if(c=n||0!==c?c:0,a&&d==d){for(var p=l.length;p--;)if(l[p]===d)continue e;t&&l.push(d),s.push(c)}else i(l,d,n)||(l!==s&&l.push(d),s.push(c))}return s}var Pp=pn((function(e){return Bp(Ir(e,1,zs,!0))})),xp=pn((function(e){var t=il(e);return zs(t)&&(t=void 0),Bp(Ir(e,1,zs,!0),Ss(t))})),Ip=pn((function(e){var t=il(e);return t="function"==typeof t?t:void 0,Bp(Ir(e,1,zs,!0),void 0,t)}));var Mp=0;var Ep=Math.max;function Op(e){if(!e||!e.length)return[];var t=0;return e=po(e,(function(e){if(zs(e))return t=Ep(e.length,t),!0})),bn(t,(function(t){return D(e,ys(t))}))}function _p(e,t){if(!e||!e.length)return[];var n=Op(e);return null==t?n:D(n,(function(e){return Le(t,void 0,e)}))}function $p(e,t,n,r){return Rc(e,t,n(wr(e,t)),r)}var Fp=Ui((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}));var Lp=pn((function(e,t){return zs(e)?nl(e,t):[]}));var Hp=Er((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return kr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof We&&xt(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:cp,args:[i],thisArg:void 0}),new Ke(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));function Tp(e,t,n){var r=e.length;if(r<2)return r?Bp(e[0]):[];for(var i=-1,o=Array(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=nl(o[i]||a,e[s],t,n));return Bp(Ir(o,1),t,n)}var Ap=pn((function(e){return Tp(po(e,zs))})),Np=pn((function(e){var t=il(e);return zs(t)&&(t=void 0),Tp(po(e,zs),Ss(t))})),Dp=pn((function(e){var t=il(e);return t="function"==typeof t?t:void 0,Tp(po(e,zs),void 0,t)})),jp=pn(Op);function Wp(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:void 0;n(a,e[r],s)}return a}var Gp=pn((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,_p(e,n)})),zp={chunk:function(e,t,n){t=(n?gn(e,t,n):void 0===t)?1:to(le(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,a=Array(eo(r/t));i<r;)a[o++]=Jr(e,i,i+=t);return a},compact:function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},concat:function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Br(j(n)?Je(n):[n],Ir(t,1))},difference:rl,differenceBy:ol,differenceWith:al,drop:function(e,t,n){var r=null==e?0:e.length;return r?Jr(e,(t=n||void 0===t?1:le(t))<0?0:t,r):[]},dropRight:function(e,t,n){var r=null==e?0:e.length;return r?Jr(e,0,(t=r-(t=n||void 0===t?1:le(t)))<0?0:t):[]},dropRightWhile:function(e,t){return e&&e.length?ll(e,Ss(t),!0,!0):[]},dropWhile:function(e,t){return e&&e.length?ll(e,Ss(t),!0):[]},fill:function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&gn(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=le(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:le(r))<0&&(r+=i),r=n>r?0:Il(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},findIndex:_l,findLastIndex:Tl,first:Nl,flatten:Mr,flattenDeep:function(e){return(null==e?0:e.length)?Ir(e,Gl):[]},flattenDepth:function(e,t){return(null==e?0:e.length)?Ir(e,t=void 0===t?1:le(t)):[]},fromPairs:function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},head:Nl,indexOf:function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:le(n);return i<0&&(i=cu(r+i,0)),ht(e,t,i)},initial:function(e){return(null==e?0:e.length)?Jr(e,0,-1):[]},intersection:fu,intersectionBy:mu,intersectionWith:gu,join:function(e,t){return null==e?"":Wu.call(e,t)},last:il,lastIndexOf:function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=le(n))<0?Vu(r+i,0):qu(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):dt(e,pt,i,!0)},nth:function(e,t){return e&&e.length?hc(e,le(t)):void 0},pull:ad,pullAll:od,pullAllBy:function(e,t,n){return e&&e.length&&t&&t.length?id(e,t,Ss(n)):e},pullAllWith:function(e,t,n){return e&&e.length&&t&&t.length?id(e,t,void 0,n):e},pullAt:ud,remove:function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=Ss(t);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return ld(e,i),n},reverse:Bd,slice:function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&gn(e,t,n)?(t=0,n=r):(t=null==t?0:le(t),n=void 0===n?r:le(n)),Jr(e,t,n)):[]},sortedIndex:function(e,t){return Gd(e,t)},sortedIndexBy:function(e,t,n){return jd(e,t,Ss(n))},sortedIndexOf:function(e,t){var n=null==e?0:e.length;if(n){var r=Gd(e,t);if(r<n&&an(e[r],t))return r}return-1},sortedLastIndex:function(e,t){return Gd(e,t,!0)},sortedLastIndexBy:function(e,t,n){return jd(e,t,Ss(n),!0)},sortedLastIndexOf:function(e,t){if(null==e?0:e.length){var n=Gd(e,t,!0)-1;if(an(e[n],t))return n}return-1},sortedUniq:function(e){return e&&e.length?zd(e):[]},sortedUniqBy:function(e,t){return e&&e.length?zd(e,Ss(t)):[]},tail:function(e){var t=null==e?0:e.length;return t?Jr(e,1,t):[]},take:function(e,t,n){return e&&e.length?Jr(e,0,(t=n||void 0===t?1:le(t))<0?0:t):[]},takeRight:function(e,t,n){var r=null==e?0:e.length;return r?Jr(e,(t=r-(t=n||void 0===t?1:le(t)))<0?0:t,r):[]},takeRightWhile:function(e,t){return e&&e.length?ll(e,Ss(t),!1,!0):[]},takeWhile:function(e,t){return e&&e.length?ll(e,Ss(t)):[]},union:Pp,unionBy:xp,unionWith:Ip,uniq:function(e){return e&&e.length?Bp(e):[]},uniqBy:function(e,t){return e&&e.length?Bp(e,Ss(t)):[]},uniqWith:function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Bp(e,void 0,t):[]},unzip:Op,unzipWith:_p,without:Lp,xor:Ap,xorBy:Np,xorWith:Dp,zip:jp,zipObject:function(e,t){return Wp(e||[],t||[],ln)},zipObjectDeep:function(e,t){return Wp(e||[],t||[],Rc)},zipWith:Gp},Vp={countBy:_s,each:cl,eachRight:ml,every:function(e,t,n){var r=j(e)?Bl:Pl;return n&&gn(e,t,n)&&(t=void 0),r(e,Ss(t))},filter:function(e,t){return(j(e)?po:Ml)(e,Ss(t))},find:$l,findLast:Al,flatMap:function(e,t){return Ir(jl(e,t),1)},flatMapDeep:function(e,t){return Ir(jl(e,t),Wl)},flatMapDepth:function(e,t,n){return n=void 0===n?1:le(n),Ir(jl(e,t),n)},forEach:cl,forEachRight:ml,groupBy:Yl,includes:function(e,t,n,r){e=mn(e)?e:lu(e),n=n&&!r?le(n):0;var i=e.length;return n<0&&(n=uu(i+n,0)),au(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&ht(e,t,n)>-1},invokeMap:xu,keyBy:zu,map:jl,orderBy:function(e,t,n,r){return null==e?[]:(j(t)||(t=null==t?[]:[t]),j(n=r?void 0:n)||(n=null==n?[]:[n]),Sc(e,t,n))},partition:ed,reduce:function(e,t,n){var r=j(e)?mi:wd,i=arguments.length<3;return r(e,Ss(t),n,i,Is)},reduceRight:function(e,t,n){var r=j(e)?Cd:wd,i=arguments.length<3;return r(e,Ss(t),n,i,fl)},reject:function(e,t){return(j(e)?po:Ml)(e,lc(Ss(t)))},sample:Md,sampleSize:function(e,t,n){return t=(n?gn(e,t,n):void 0===t)?1:le(t),(j(e)?Od:_d)(e,t)},shuffle:function(e){return(j(e)?$d:Fd)(e)},size:function(e){if(null==e)return 0;if(mn(e))return au(e)?Vc(e):e.length;var t=Lo(e);return"[object Map]"==t||"[object Set]"==t?e.size:zn(e).length},some:function(e,t,n){var r=j(e)?Ma:Hd;return n&&gn(e,t,n)&&(t=void 0),r(e,Ss(t))},sortBy:Td},qp=Ls,Up={after:function(e,t){if("function"!=typeof t)throw new TypeError("Expected a function");return e=le(e),function(){if(--e<1)return t.apply(this,arguments)}},ary:rn,before:Vr,bind:qr,bindKey:Kr,curry:$s,curryRight:Fs,debounce:Ns,defer:Xs,delay:Qs,flip:function(e){return tn(e,512)},memoize:fr,negate:lc,once:function(e){return Vr(2,e)},overArgs:Pc,partial:Xc,partialRight:Qc,rearg:Sd,rest:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return pn(e,t=void 0===t?t:le(t))},spread:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=null==t?0:Vd(le(t),0),pn((function(n){var r=n[t],i=Yr(n,0,t);return r&&Br(i,r),Le(e,this,i)}))},throttle:function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return X(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ns(e,t,{leading:r,maxWait:t,trailing:i})},unary:function(e){return rn(e,1)},wrap:function(e,t){return Xc(ul(t),e)}},Kp={castArray:function(){if(!arguments.length)return[];var e=arguments[0];return j(e)?e:[e]},clone:ka,cloneDeep:xa,cloneDeepWith:function(e,t){return wa(e,5,t="function"==typeof t?t:void 0)},cloneWith:function(e,t){return wa(e,4,t="function"==typeof t?t:void 0)},conformsTo:function(e,t){return null==t||ws(e,t,Vn(t))},eq:an,gt:Ql,gte:eu,isArguments:Bn,isArray:j,isArrayBuffer:Mu,isArrayLike:mn,isArrayLikeObject:zs,isBoolean:function(e){return!0===e||!1===e||L(e)&&"[object Boolean]"==F(e)},isBuffer:En,isDate:Ou,isElement:function(e){return L(e)&&1===e.nodeType&&!Nr(e)},isEmpty:function(e){if(null==e)return!0;if(mn(e)&&(j(e)||"string"==typeof e||"function"==typeof e.splice||En(e)||An(e)||Bn(e)))return!e.length;var t=Lo(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(yn(e))return!zn(e).length;for(var n in e)if(_u.call(e,n))return!1;return!0},isEqual:$u,isEqualWith:function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?os(e,t,void 0,n):!!r},isError:Wr,isFinite:function(e){return"number"==typeof e&&Fu(e)},isFunction:fe,isInteger:Lu,isLength:fn,isMap:da,isMatch:function(e,t){return e===t||ls(e,t,cs(t))},isMatchWith:function(e,t,n){return n="function"==typeof n?n:void 0,ls(e,t,cs(t),n)},isNaN:function(e){return Tu(e)&&e!=+e},isNative:function(e){if(Au(e))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pe(e)},isNil:function(e){return null==e},isNull:function(e){return null===e},isNumber:Tu,isObject:X,isObjectLike:L,isPlainObject:Nr,isRegExp:Du,isSafeInteger:function(e){return Lu(e)&&e>=-9007199254740991&&e<=ju},isSet:ha,isString:au,isSymbol:T,isTypedArray:An,isUndefined:function(e){return void 0===e},isWeakMap:function(e){return L(e)&&"[object WeakMap]"==Lo(e)},isWeakSet:function(e){return L(e)&&"[object WeakSet]"==F(e)},lt:Yu,lte:Zu,toArray:pc,toFinite:se,toInteger:le,toLength:Il,toNumber:ie,toPlainObject:qs,toSafeInteger:function(e){return e?no(le(e),-9007199254740991,mp):0===e?e:0},toString:vr},Jp={add:U,ceil:Xi,divide:sl,floor:zl,max:function(e){return e&&e.length?Xu(e,ue,Zl):void 0},maxBy:function(e,t){return e&&e.length?Xu(e,Ss(t),Zl):void 0},mean:function(e){return tc(e,ue)},meanBy:function(e,t){return tc(e,Ss(t))},min:function(e){return e&&e.length?Xu(e,ue,Ju):void 0},minBy:function(e,t){return e&&e.length?Xu(e,Ss(t),Ju):void 0},multiply:ac,round:Pd,subtract:Ud,sum:function(e){return e&&e.length?Qu(e,ue):0},sumBy:Kd},Yp=ro,Zp=function(e,t,n){return t=se(t),void 0===n?(n=t,t=0):n=se(n),function(e,t,n){return e>=iu(t,n)&&e<ru(t,n)}(e=ie(e),t,n)},Xp=function(e,t,n){if(n&&"boolean"!=typeof n&&gn(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=se(e),void 0===t?(t=e,e=0):t=se(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=md();return fd(e+i*(t-e+hd("1e-"+((i+"").length-1))),t)}return pd(e,t)},Qp={assign:Un,assignIn:Zn,assignInWith:Xn,assignWith:Qn,at:Or,create:function(e,t){var n=_e(e);return null==t?n:oo(n,t)},defaults:Ws,defaultsDeep:Ys,entries:Rl,entriesIn:vl,extend:Zn,extendWith:Xn,findKey:function(e,t){return Fl(e,Ss(t),Ps)},findLastKey:function(e,t){return Fl(e,Ss(t),hl)},forIn:function(e,t){return null==e?e:Bs(e,ul(t),Yn)},forInRight:function(e,t){return null==e?e:pl(e,ul(t),Yn)},forOwn:function(e,t){return e&&Ps(e,ul(t))},forOwnRight:function(e,t){return e&&hl(e,ul(t))},functions:function(e){return null==e?[]:Kl(e,Vn(e))},functionsIn:function(e){return null==e?[]:Kl(e,Yn(e))},get:Cr,has:function(e,t){return null!=e&&fs(e,t,nu)},hasIn:ms,invert:yu,invertBy:Cu,invoke:Pu,keys:Vn,keysIn:Yn,mapKeys:function(e,t){var n={};return t=Ss(t),Ps(e,(function(e,r,i){on(n,t(e,r,i),e)})),n},mapValues:function(e,t){var n={};return t=Ss(t),Ps(e,(function(e,r,i){on(n,r,t(e,r,i))})),n},merge:nc,mergeWith:Js,omit:gc,omitBy:function(e,t){return yc(e,lc(Ss(t)))},pick:td,pickBy:yc,result:function(e,t,n){var r=-1,i=(t=yr(t,e)).length;for(i||(i=1,e=void 0);++r<i;){var o=null==e?void 0:e[Sr(t[r])];void 0===o&&(r=i,o=n),e=fe(o)?o.call(e):o}return e},set:function(e,t,n){return null==e?e:Rc(e,t,n)},setWith:function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Rc(e,t,n,r)},toPairs:Rl,toPairsIn:vl,transform:function(e,t,n){var r=j(e),i=r||En(e)||An(e);if(t=Ss(t),null==n){var o=e&&e.constructor;n=i?r?new o:[]:X(e)&&fe(o)?_e(_r(e)):{}}return(i?ct:Ps)(e,(function(e,r,i){return t(n,e,r,i)})),n},unset:function(e,t){return null==e||fc(e,t)},update:function(e,t,n){return null==e?e:$p(e,t,ul(n))},updateWith:function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:$p(e,t,ul(n),r)},values:lu,valuesIn:function(e){return null==e?[]:su(e,Yn(e))}},eh={at:Hp,chain:Qi,commit:function(){return new Ke(this.value(),this.__chain__)},lodash:Xe,next:function(){void 0===this.__values__&&(this.__values__=pc(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},plant:function(e){for(var t,n=this;n instanceof De;){var r=Ye(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},reverse:function(){var e=this.__wrapped__;if(e instanceof We){var t=e;return this.__actions__.length&&(t=new We(this)),(t=t.reverse()).__actions__.push({func:cp,args:[Bd],thisArg:void 0}),new Ke(t,this.__chain__)}return this.thru(Bd)},tap:function(e,t){return t(e),e},thru:cp,toIterator:function(){return this},toJSON:fp,value:fp,valueOf:fp,wrapperChain:function(){return Qi(this)}},th={camelCase:Ki,capitalize:fi,deburr:bi,endsWith:function(e,t,n){e=vr(e),t=V(t);var r=e.length,i=n=void 0===n?r:no(le(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},escape:wl,escapeRegExp:function(e){return(e=vr(e))&&kl.test(e)?e.replace(Cl,"\\$&"):e},kebabCase:Gu,lowerCase:Uu,lowerFirst:Ku,pad:function(e,t,n){e=vr(e);var r=(t=le(t))?Vc(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Uc(Jc(i),n)+e+Uc(Kc(i),n)},padEnd:function(e,t,n){e=vr(e);var r=(t=le(t))?Vc(e):0;return t&&r<t?e+Uc(t-r,n):e},padStart:function(e,t,n){e=vr(e);var r=(t=le(t))?Vc(e):0;return t&&r<t?Uc(t-r,n)+e:e},parseInt:function(e,t,n){return n||null==t?t=0:t&&(t=+t),Zc(vr(e).replace(Yc,""),t||0)},repeat:function(e,t,n){return t=(n?gn(e,t,n):void 0===t)?1:le(t),Oc(vr(e),t)},replace:function(){var e=arguments,t=vr(e[0]);return e.length<3?t:t.replace(e[1],e[2])},snakeCase:Ld,split:function(e,t,n){return n&&"number"!=typeof n&&gn(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=vr(e))&&("string"==typeof t||null!=t&&!Du(t))&&!(t=V(t))&&Xr(e)?Yr(di(e),0,n):e.split(t,n):[]},startCase:qd,startsWith:function(e,t,n){return e=vr(e),n=null==n?0:no(le(n),0,e.length),t=V(t),e.slice(n,n+t.length)==t},template:function(e,t,n){var r=tp.imports._.templateSettings||tp;n&&gn(e,t,n)&&(t=void 0),e=vr(e),t=Xn({},t,r,Zd);var i,o,a=Xn({},t.imports,r.imports,Zd),s=Vn(a),l=su(a,s),u=0,c=t.interpolate||sp,d="__p += '",p=RegExp((t.escape||sp).source+"|"+c.source+"|"+(c===ep?ap:sp).source+"|"+(t.evaluate||sp).source+"|$","g"),h=up.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(p,(function(t,n,r,a,s,l){return r||(r=a),d+=e.slice(u,l).replace(lp,Qd),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),d+="';\n";var f=up.call(t,"variable")&&t.variable;if(f){if(op.test(f))throw new Error("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(np,""):d).replace(rp,"$1").replace(ip,"$1;"),d="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Gr((function(){return Function(s,h+"return "+d).apply(void 0,l)}));if(m.source=d,Wr(m))throw m;return m},templateSettings:tp,toLower:function(e){return vr(e).toLowerCase()},toUpper:function(e){return vr(e).toUpperCase()},trim:function(e,t,n){if((e=vr(e))&&(n||void 0===t))return Z(e);if(!e||!(t=V(t)))return e;var r=di(e),i=di(t);return Yr(r,Rp(r,i),gp(r,i)+1).join("")},trimEnd:function(e,t,n){if((e=vr(e))&&(n||void 0===t))return e.slice(0,J(e)+1);if(!e||!(t=V(t)))return e;var r=di(e);return Yr(r,0,gp(r,di(t))+1).join("")},trimStart:function(e,t,n){if((e=vr(e))&&(n||void 0===t))return e.replace(vp,"");if(!e||!(t=V(t)))return e;var r=di(e);return Yr(r,Rp(r,di(t))).join("")},truncate:function(e,t){var n=30,r="...";if(X(t)){var i="separator"in t?t.separator:i;n="length"in t?le(t.length):n,r="omission"in t?V(t.omission):r}var o=(e=vr(e)).length;if(Xr(e)){var a=di(e);o=a.length}if(n>=o)return e;var s=n-Vc(r);if(s<1)return r;var l=a?Yr(a,0,s).join(""):e.slice(0,s);if(void 0===i)return l+r;if(a&&(s+=l.length-s),Du(i)){if(e.slice(s).search(i)){var u,c=l;for(i.global||(i=RegExp(i.source,vr(yp.exec(i))+"g")),i.lastIndex=0;u=i.exec(c);)var d=u.index;l=l.slice(0,void 0===d?s:d)}}else if(e.indexOf(V(i),s)!=s){var p=l.lastIndexOf(i);p>-1&&(l=l.slice(0,p))}return l+r},unescape:function(e){return(e=vr(e))&&wp.test(e)?e.replace(Sp,bp):e},upperCase:Fp,upperFirst:hi,words:Vi},nh={attempt:Gr,bindAll:Ur,cond:function(e){var t=null==e?0:e.length,n=Ss;return e=t?D(e,(function(e){if("function"!=typeof e[1])throw new TypeError("Expected a function");return[n(e[0]),e[1]]})):[],pn((function(n){for(var r=-1;++r<t;){var i=e[r];if(Le(i[0],this,n))return Le(i[1],this,n)}}))},conforms:function(e){return function(e){var t=Vn(e);return function(n){return ws(n,e,t)}}(wa(e,1))},constant:at,defaultTo:function(e,t){return null==e||e!=e?t:e},flow:ql,flowRight:Ul,identity:ue,iteratee:function(e){return Ss("function"==typeof e?e:wa(e,1))},matches:function(e){return ps(wa(e,1))},matchesProperty:function(e,t){return vs(e,wa(t,1))},method:rc,methodOf:ic,mixin:oc,noop:Ge,nthArg:function(e){return e=le(e),pn((function(t){return hc(t,e)}))},over:Cc,overEvery:xc,overSome:Ic,property:bs,propertyOf:function(e){return function(t){return null==e?void 0:wr(e,t)}},range:yd,rangeRight:bd,stubArray:ho,stubFalse:Pn,stubObject:function(){return{}},stubString:function(){return""},stubTrue:function(){return!0},times:function(e,t){if((e=le(e))<1||e>9007199254740991)return[];var n=dp,r=pp(e,dp);t=ul(t),e-=dp;for(var i=bn(r,t);++n<e;)t(n);return i},toPath:function(e){return j(e)?D(e,Sr):T(e)?[e]:Je(Rr(vr(e)))},uniqueId:function(e){var t=++Mp;return vr(e)+t}};var rh=Math.max,ih=Math.min;var oh=Math.min;
/**
	 * @license
	 * Lodash (Custom Build) <https://lodash.com/>
	 * Build: `lodash modularize exports="es" -o ./`
	 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	 * Released under MIT license <https://lodash.com/license>
	 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 */
var ah,sh=4294967295,lh=Array.prototype,uh=Object.prototype.hasOwnProperty,ch=B?B.iterator:void 0,dh=Math.max,ph=Math.min,hh=function(e){return function(t,n,r){if(null==r){var i=X(n),o=i&&Vn(n),a=o&&o.length&&Kl(n,o);(a?a.length:i)||(r=n,n=t,t=this)}return e(t,n,r)}}(oc);Xe.after=Up.after,Xe.ary=Up.ary,Xe.assign=Qp.assign,Xe.assignIn=Qp.assignIn,Xe.assignInWith=Qp.assignInWith,Xe.assignWith=Qp.assignWith,Xe.at=Qp.at,Xe.before=Up.before,Xe.bind=Up.bind,Xe.bindAll=nh.bindAll,Xe.bindKey=Up.bindKey,Xe.castArray=Kp.castArray,Xe.chain=eh.chain,Xe.chunk=zp.chunk,Xe.compact=zp.compact,Xe.concat=zp.concat,Xe.cond=nh.cond,Xe.conforms=nh.conforms,Xe.constant=nh.constant,Xe.countBy=Vp.countBy,Xe.create=Qp.create,Xe.curry=Up.curry,Xe.curryRight=Up.curryRight,Xe.debounce=Up.debounce,Xe.defaults=Qp.defaults,Xe.defaultsDeep=Qp.defaultsDeep,Xe.defer=Up.defer,Xe.delay=Up.delay,Xe.difference=zp.difference,Xe.differenceBy=zp.differenceBy,Xe.differenceWith=zp.differenceWith,Xe.drop=zp.drop,Xe.dropRight=zp.dropRight,Xe.dropRightWhile=zp.dropRightWhile,Xe.dropWhile=zp.dropWhile,Xe.fill=zp.fill,Xe.filter=Vp.filter,Xe.flatMap=Vp.flatMap,Xe.flatMapDeep=Vp.flatMapDeep,Xe.flatMapDepth=Vp.flatMapDepth,Xe.flatten=zp.flatten,Xe.flattenDeep=zp.flattenDeep,Xe.flattenDepth=zp.flattenDepth,Xe.flip=Up.flip,Xe.flow=nh.flow,Xe.flowRight=nh.flowRight,Xe.fromPairs=zp.fromPairs,Xe.functions=Qp.functions,Xe.functionsIn=Qp.functionsIn,Xe.groupBy=Vp.groupBy,Xe.initial=zp.initial,Xe.intersection=zp.intersection,Xe.intersectionBy=zp.intersectionBy,Xe.intersectionWith=zp.intersectionWith,Xe.invert=Qp.invert,Xe.invertBy=Qp.invertBy,Xe.invokeMap=Vp.invokeMap,Xe.iteratee=nh.iteratee,Xe.keyBy=Vp.keyBy,Xe.keys=Vn,Xe.keysIn=Qp.keysIn,Xe.map=Vp.map,Xe.mapKeys=Qp.mapKeys,Xe.mapValues=Qp.mapValues,Xe.matches=nh.matches,Xe.matchesProperty=nh.matchesProperty,Xe.memoize=Up.memoize,Xe.merge=Qp.merge,Xe.mergeWith=Qp.mergeWith,Xe.method=nh.method,Xe.methodOf=nh.methodOf,Xe.mixin=hh,Xe.negate=lc,Xe.nthArg=nh.nthArg,Xe.omit=Qp.omit,Xe.omitBy=Qp.omitBy,Xe.once=Up.once,Xe.orderBy=Vp.orderBy,Xe.over=nh.over,Xe.overArgs=Up.overArgs,Xe.overEvery=nh.overEvery,Xe.overSome=nh.overSome,Xe.partial=Up.partial,Xe.partialRight=Up.partialRight,Xe.partition=Vp.partition,Xe.pick=Qp.pick,Xe.pickBy=Qp.pickBy,Xe.property=nh.property,Xe.propertyOf=nh.propertyOf,Xe.pull=zp.pull,Xe.pullAll=zp.pullAll,Xe.pullAllBy=zp.pullAllBy,Xe.pullAllWith=zp.pullAllWith,Xe.pullAt=zp.pullAt,Xe.range=nh.range,Xe.rangeRight=nh.rangeRight,Xe.rearg=Up.rearg,Xe.reject=Vp.reject,Xe.remove=zp.remove,Xe.rest=Up.rest,Xe.reverse=zp.reverse,Xe.sampleSize=Vp.sampleSize,Xe.set=Qp.set,Xe.setWith=Qp.setWith,Xe.shuffle=Vp.shuffle,Xe.slice=zp.slice,Xe.sortBy=Vp.sortBy,Xe.sortedUniq=zp.sortedUniq,Xe.sortedUniqBy=zp.sortedUniqBy,Xe.split=th.split,Xe.spread=Up.spread,Xe.tail=zp.tail,Xe.take=zp.take,Xe.takeRight=zp.takeRight,Xe.takeRightWhile=zp.takeRightWhile,Xe.takeWhile=zp.takeWhile,Xe.tap=eh.tap,Xe.throttle=Up.throttle,Xe.thru=cp,Xe.toArray=Kp.toArray,Xe.toPairs=Qp.toPairs,Xe.toPairsIn=Qp.toPairsIn,Xe.toPath=nh.toPath,Xe.toPlainObject=Kp.toPlainObject,Xe.transform=Qp.transform,Xe.unary=Up.unary,Xe.union=zp.union,Xe.unionBy=zp.unionBy,Xe.unionWith=zp.unionWith,Xe.uniq=zp.uniq,Xe.uniqBy=zp.uniqBy,Xe.uniqWith=zp.uniqWith,Xe.unset=Qp.unset,Xe.unzip=zp.unzip,Xe.unzipWith=zp.unzipWith,Xe.update=Qp.update,Xe.updateWith=Qp.updateWith,Xe.values=Qp.values,Xe.valuesIn=Qp.valuesIn,Xe.without=zp.without,Xe.words=th.words,Xe.wrap=Up.wrap,Xe.xor=zp.xor,Xe.xorBy=zp.xorBy,Xe.xorWith=zp.xorWith,Xe.zip=zp.zip,Xe.zipObject=zp.zipObject,Xe.zipObjectDeep=zp.zipObjectDeep,Xe.zipWith=zp.zipWith,Xe.entries=Qp.toPairs,Xe.entriesIn=Qp.toPairsIn,Xe.extend=Qp.assignIn,Xe.extendWith=Qp.assignInWith,hh(Xe,Xe),Xe.add=Jp.add,Xe.attempt=nh.attempt,Xe.camelCase=th.camelCase,Xe.capitalize=th.capitalize,Xe.ceil=Jp.ceil,Xe.clamp=Yp,Xe.clone=Kp.clone,Xe.cloneDeep=Kp.cloneDeep,Xe.cloneDeepWith=Kp.cloneDeepWith,Xe.cloneWith=Kp.cloneWith,Xe.conformsTo=Kp.conformsTo,Xe.deburr=th.deburr,Xe.defaultTo=nh.defaultTo,Xe.divide=Jp.divide,Xe.endsWith=th.endsWith,Xe.eq=Kp.eq,Xe.escape=th.escape,Xe.escapeRegExp=th.escapeRegExp,Xe.every=Vp.every,Xe.find=Vp.find,Xe.findIndex=zp.findIndex,Xe.findKey=Qp.findKey,Xe.findLast=Vp.findLast,Xe.findLastIndex=zp.findLastIndex,Xe.findLastKey=Qp.findLastKey,Xe.floor=Jp.floor,Xe.forEach=Vp.forEach,Xe.forEachRight=Vp.forEachRight,Xe.forIn=Qp.forIn,Xe.forInRight=Qp.forInRight,Xe.forOwn=Qp.forOwn,Xe.forOwnRight=Qp.forOwnRight,Xe.get=Qp.get,Xe.gt=Kp.gt,Xe.gte=Kp.gte,Xe.has=Qp.has,Xe.hasIn=Qp.hasIn,Xe.head=zp.head,Xe.identity=ue,Xe.includes=Vp.includes,Xe.indexOf=zp.indexOf,Xe.inRange=Zp,Xe.invoke=Qp.invoke,Xe.isArguments=Kp.isArguments,Xe.isArray=j,Xe.isArrayBuffer=Kp.isArrayBuffer,Xe.isArrayLike=Kp.isArrayLike,Xe.isArrayLikeObject=Kp.isArrayLikeObject,Xe.isBoolean=Kp.isBoolean,Xe.isBuffer=Kp.isBuffer,Xe.isDate=Kp.isDate,Xe.isElement=Kp.isElement,Xe.isEmpty=Kp.isEmpty,Xe.isEqual=Kp.isEqual,Xe.isEqualWith=Kp.isEqualWith,Xe.isError=Kp.isError,Xe.isFinite=Kp.isFinite,Xe.isFunction=Kp.isFunction,Xe.isInteger=Kp.isInteger,Xe.isLength=Kp.isLength,Xe.isMap=Kp.isMap,Xe.isMatch=Kp.isMatch,Xe.isMatchWith=Kp.isMatchWith,Xe.isNaN=Kp.isNaN,Xe.isNative=Kp.isNative,Xe.isNil=Kp.isNil,Xe.isNull=Kp.isNull,Xe.isNumber=Kp.isNumber,Xe.isObject=X,Xe.isObjectLike=Kp.isObjectLike,Xe.isPlainObject=Kp.isPlainObject,Xe.isRegExp=Kp.isRegExp,Xe.isSafeInteger=Kp.isSafeInteger,Xe.isSet=Kp.isSet,Xe.isString=Kp.isString,Xe.isSymbol=Kp.isSymbol,Xe.isTypedArray=Kp.isTypedArray,Xe.isUndefined=Kp.isUndefined,Xe.isWeakMap=Kp.isWeakMap,Xe.isWeakSet=Kp.isWeakSet,Xe.join=zp.join,Xe.kebabCase=th.kebabCase,Xe.last=il,Xe.lastIndexOf=zp.lastIndexOf,Xe.lowerCase=th.lowerCase,Xe.lowerFirst=th.lowerFirst,Xe.lt=Kp.lt,Xe.lte=Kp.lte,Xe.max=Jp.max,Xe.maxBy=Jp.maxBy,Xe.mean=Jp.mean,Xe.meanBy=Jp.meanBy,Xe.min=Jp.min,Xe.minBy=Jp.minBy,Xe.stubArray=nh.stubArray,Xe.stubFalse=nh.stubFalse,Xe.stubObject=nh.stubObject,Xe.stubString=nh.stubString,Xe.stubTrue=nh.stubTrue,Xe.multiply=Jp.multiply,Xe.nth=zp.nth,Xe.noop=nh.noop,Xe.now=qp,Xe.pad=th.pad,Xe.padEnd=th.padEnd,Xe.padStart=th.padStart,Xe.parseInt=th.parseInt,Xe.random=Xp,Xe.reduce=Vp.reduce,Xe.reduceRight=Vp.reduceRight,Xe.repeat=th.repeat,Xe.replace=th.replace,Xe.result=Qp.result,Xe.round=Jp.round,Xe.sample=Vp.sample,Xe.size=Vp.size,Xe.snakeCase=th.snakeCase,Xe.some=Vp.some,Xe.sortedIndex=zp.sortedIndex,Xe.sortedIndexBy=zp.sortedIndexBy,Xe.sortedIndexOf=zp.sortedIndexOf,Xe.sortedLastIndex=zp.sortedLastIndex,Xe.sortedLastIndexBy=zp.sortedLastIndexBy,Xe.sortedLastIndexOf=zp.sortedLastIndexOf,Xe.startCase=th.startCase,Xe.startsWith=th.startsWith,Xe.subtract=Jp.subtract,Xe.sum=Jp.sum,Xe.sumBy=Jp.sumBy,Xe.template=th.template,Xe.times=nh.times,Xe.toFinite=Kp.toFinite,Xe.toInteger=le,Xe.toLength=Kp.toLength,Xe.toLower=th.toLower,Xe.toNumber=Kp.toNumber,Xe.toSafeInteger=Kp.toSafeInteger,Xe.toString=Kp.toString,Xe.toUpper=th.toUpper,Xe.trim=th.trim,Xe.trimEnd=th.trimEnd,Xe.trimStart=th.trimStart,Xe.truncate=th.truncate,Xe.unescape=th.unescape,Xe.uniqueId=nh.uniqueId,Xe.upperCase=th.upperCase,Xe.upperFirst=th.upperFirst,Xe.each=Vp.forEach,Xe.eachRight=Vp.forEachRight,Xe.first=zp.head,hh(Xe,(ah={},Ps(Xe,(function(e,t){uh.call(Xe.prototype,t)||(ah[t]=e)})),ah),{chain:!1}),Xe.VERSION="4.17.21",(Xe.templateSettings=th.templateSettings).imports._=Xe,ct(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Xe[e].placeholder=Xe})),ct(["drop","take"],(function(e,t){We.prototype[e]=function(n){n=void 0===n?1:dh(le(n),0);var r=this.__filtered__&&!t?new We(this):this.clone();return r.__filtered__?r.__takeCount__=ph(n,r.__takeCount__):r.__views__.push({size:ph(n,sh),type:e+(r.__dir__<0?"Right":"")}),r},We.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),ct(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;We.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ss(e),type:n}),t.__filtered__=t.__filtered__||r,t}})),ct(["head","last"],(function(e,t){var n="take"+(t?"Right":"");We.prototype[e]=function(){return this[n](1).value()[0]}})),ct(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");We.prototype[e]=function(){return this.__filtered__?new We(this):this[n](1)}})),We.prototype.compact=function(){return this.filter(ue)},We.prototype.find=function(e){return this.filter(e).head()},We.prototype.findLast=function(e){return this.reverse().find(e)},We.prototype.invokeMap=pn((function(e,t){return"function"==typeof e?new We(this):this.map((function(n){return Bu(n,e,t)}))})),We.prototype.reject=function(e){return this.filter(lc(Ss(e)))},We.prototype.slice=function(e,t){e=le(e);var n=this;return n.__filtered__&&(e>0||t<0)?new We(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=le(t))<0?n.dropRight(-t):n.take(t-e)),n)},We.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},We.prototype.toArray=function(){return this.take(sh)},Ps(We.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Xe[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(Xe.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,s=t instanceof We,l=a[0],u=s||j(t),c=function(e){var t=i.apply(Xe,Br([e],a));return r&&d?t[0]:t};u&&n&&"function"==typeof l&&1!=l.length&&(s=u=!1);var d=this.__chain__,p=!!this.__actions__.length,h=o&&!d,f=s&&!p;if(!o&&u){t=f?t:new We(this);var m=e.apply(t,a);return m.__actions__.push({func:cp,args:[c],thisArg:void 0}),new Ke(m,d)}return h&&f?e.apply(this,a):(m=this.thru(c),h?r?m.value()[0]:m.value():m)})})),ct(["pop","push","shift","sort","splice","unshift"],(function(e){var t=lh[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Xe.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(j(i)?i:[],e)}return this[n]((function(n){return t.apply(j(n)?n:[],e)}))}})),Ps(We.prototype,(function(e,t){var n=Xe[t];if(n){var r=n.name+"";uh.call(Ve,r)||(Ve[r]=[]),Ve[r].push({name:t,func:n})}})),Ve[Tt(void 0,2).name]=[{name:"wrapper",func:void 0}],We.prototype.clone=function(){var e=new We(this.__wrapped__);return e.__actions__=Je(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Je(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Je(this.__views__),e},We.prototype.reverse=function(){if(this.__filtered__){var e=new We(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},We.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=j(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=ih(t,e+a);break;case"takeRight":e=rh(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,c=this.__iteratees__,d=c.length,p=0,h=oh(l,this.__takeCount__);if(!n||!r&&i==l&&h==l)return hp(e,this.__actions__);var f=[];e:for(;l--&&p<h;){for(var m=-1,g=e[u+=t];++m<d;){var R=c[m],v=R.iteratee,y=R.type,b=v(g);if(2==y)g=b;else if(!b){if(1==y)continue e;break e}}f[p++]=g}return f},Xe.prototype.at=eh.at,Xe.prototype.chain=eh.wrapperChain,Xe.prototype.commit=eh.commit,Xe.prototype.next=eh.next,Xe.prototype.plant=eh.plant,Xe.prototype.reverse=eh.reverse,Xe.prototype.toJSON=Xe.prototype.valueOf=Xe.prototype.value=eh.value,Xe.prototype.first=Xe.prototype.head,ch&&(Xe.prototype[ch]=eh.toIterator)
/**
	 * @license
	 * Lodash (Custom Build) <https://lodash.com/>
	 * Build: `lodash modularize exports="es" -o ./`
	 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	 * Released under MIT license <https://lodash.com/license>
	 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 */;var fh={};!function(e){!function(){const t="1.2.0";function n(e){alert("Mod ERROR:\n"+e);const t=new Error(e);throw console.error(t),t}const r=new TextEncoder;function i(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function o(e){const t=new Set;return e.filter((e=>!t.has(e)&&t.add(e)))}const a=new Map,s=new Set;function l(e){s.has(e)||(s.add(e),console.warn(e))}function u(e){const t=[],n=new Map,r=new Set;for(const i of h.values()){const o=i.patching.get(e.name);if(o){t.push(...o.hooks);for(const[t,a]of o.patches.entries())n.has(t)&&n.get(t)!==a&&l(`ModSDK: Mod '${i.name}' is patching function ${e.name} with same pattern that is already applied by different mod, but with different pattern:\nPattern:\n${t}\nPatch1:\n${n.get(t)||""}\nPatch2:\n${a}`),n.set(t,a),r.add(i.name)}}t.sort(((e,t)=>t.priority-e.priority));const i=function(e,t){if(0===t.size)return e;let n=e.toString().replaceAll("\r\n","\n");for(const[r,i]of t.entries())n.includes(r)||l(`ModSDK: Patching ${e.name}: Patch ${r} not applied`),n=n.replaceAll(r,i);return(0,eval)(`(${n})`)}(e.original,n);let o=function(t){var n,o;const a=null===(o=(n=R.errorReporterHooks).hookChainExit)||void 0===o?void 0:o.call(n,e.name,r),s=i.apply(this,t);return null==a||a(),s};for(let n=t.length-1;n>=0;n--){const r=t[n],i=o;o=function(t){var n,o;const a=null===(o=(n=R.errorReporterHooks).hookEnter)||void 0===o?void 0:o.call(n,e.name,r.mod),s=r.hook.apply(this,[t,e=>{if(1!==arguments.length||!Array.isArray(t))throw new Error(`Mod ${r.mod} failed to call next hook: Expected args to be array, got ${typeof e}`);return i.call(this,e)}]);return null==a||a(),s}}return{hooks:t,patches:n,patchesSources:r,enter:o,final:i}}function c(e,t=!1){let n=a.get(e);if(n)t&&(n.precomputed=u(n));else{let t=window;const o=e.split(".");for(let n=0;n<o.length-1;n++)if(t=t[o[n]],!i(t))throw new Error(`ModSDK: Function ${e} to be patched not found; ${o.slice(0,n+1).join(".")} is not object`);const s=t[o[o.length-1]];if("function"!=typeof s)throw new Error(`ModSDK: Function ${e} to be patched not found`);const l=function(e){let t=-1;for(const n of r.encode(e)){let e=255&(t^n);for(let t=0;t<8;t++)e=1&e?-306674912^e>>>1:e>>>1;t=t>>>8^e}return(~t>>>0).toString(16).padStart(8,"0").toUpperCase()}(s.toString().replaceAll("\r\n","\n")),c={name:e,original:s,originalHash:l};n=Object.assign(Object.assign({},c),{precomputed:u(c),router:()=>{},context:t,contextProperty:o[o.length-1]}),n.router=function(e){return function(...t){return e.precomputed.enter.apply(this,[t])}}(n),a.set(e,n),t[n.contextProperty]=n.router}return n}function d(){for(const e of a.values())e.precomputed=u(e)}function p(){const e=new Map;for(const[t,n]of a)e.set(t,{name:t,original:n.original,originalHash:n.originalHash,sdkEntrypoint:n.router,currentEntrypoint:n.context[n.contextProperty],hookedByMods:o(n.precomputed.hooks.map((e=>e.mod))),patchedByMods:Array.from(n.precomputed.patchesSources)});return e}const h=new Map;function f(e){h.get(e.name)!==e&&n(`Failed to unload mod '${e.name}': Not registered`),h.delete(e.name),e.loaded=!1,d()}function m(e,t){e&&"object"==typeof e||n("Failed to register mod: Expected info object, got "+typeof e),"string"==typeof e.name&&e.name||n("Failed to register mod: Expected name to be non-empty string, got "+typeof e.name);let r=`'${e.name}'`;"string"==typeof e.fullName&&e.fullName||n(`Failed to register mod ${r}: Expected fullName to be non-empty string, got ${typeof e.fullName}`),r=`'${e.fullName} (${e.name})'`,"string"!=typeof e.version&&n(`Failed to register mod ${r}: Expected version to be string, got ${typeof e.version}`),e.repository||(e.repository=void 0),void 0!==e.repository&&"string"!=typeof e.repository&&n(`Failed to register mod ${r}: Expected repository to be undefined or string, got ${typeof e.version}`),null==t&&(t={}),t&&"object"==typeof t||n(`Failed to register mod ${r}: Expected options to be undefined or object, got ${typeof t}`);const o=!0===t.allowReplace,a=h.get(e.name);a&&(a.allowReplace&&o||n(`Refusing to load mod ${r}: it is already loaded and doesn't allow being replaced.\nWas the mod loaded multiple times?`),f(a));const s=e=>{let t=p.patching.get(e.name);return t||(t={hooks:[],patches:new Map},p.patching.set(e.name,t)),t},l=(e,t)=>(...i)=>{var o,a;const s=null===(a=(o=R.errorReporterHooks).apiEndpointEnter)||void 0===a?void 0:a.call(o,e,p.name);p.loaded||n(`Mod ${r} attempted to call SDK function after being unloaded`);const l=t(...i);return null==s||s(),l},u={unload:l("unload",(()=>f(p))),hookFunction:l("hookFunction",((e,t,i)=>{"string"==typeof e&&e||n(`Mod ${r} failed to patch a function: Expected function name string, got ${typeof e}`);const o=c(e),a=s(o);"number"!=typeof t&&n(`Mod ${r} failed to hook function '${e}': Expected priority number, got ${typeof t}`),"function"!=typeof i&&n(`Mod ${r} failed to hook function '${e}': Expected hook function, got ${typeof i}`);const l={mod:p.name,priority:t,hook:i};return a.hooks.push(l),d(),()=>{const e=a.hooks.indexOf(l);e>=0&&(a.hooks.splice(e,1),d())}})),patchFunction:l("patchFunction",((e,t)=>{"string"==typeof e&&e||n(`Mod ${r} failed to patch a function: Expected function name string, got ${typeof e}`);const o=c(e),a=s(o);i(t)||n(`Mod ${r} failed to patch function '${e}': Expected patches object, got ${typeof t}`);for(const[i,o]of Object.entries(t))"string"==typeof o?a.patches.set(i,o):null===o?a.patches.delete(i):n(`Mod ${r} failed to patch function '${e}': Invalid format of patch '${i}'`);d()})),removePatches:l("removePatches",(e=>{"string"==typeof e&&e||n(`Mod ${r} failed to patch a function: Expected function name string, got ${typeof e}`);const t=c(e);s(t).patches.clear(),d()})),callOriginal:l("callOriginal",((e,t,i)=>{"string"==typeof e&&e||n(`Mod ${r} failed to call a function: Expected function name string, got ${typeof e}`);const o=c(e);return Array.isArray(t)||n(`Mod ${r} failed to call a function: Expected args array, got ${typeof t}`),o.original.apply(null!=i?i:globalThis,t)})),getOriginalHash:l("getOriginalHash",(e=>("string"==typeof e&&e||n(`Mod ${r} failed to get hash: Expected function name string, got ${typeof e}`),c(e).originalHash)))},p={name:e.name,fullName:e.fullName,version:e.version,repository:e.repository,allowReplace:o,api:u,loaded:!0,patching:new Map};return h.set(e.name,p),Object.freeze(u)}function g(){const e=[];for(const t of h.values())e.push({name:t.name,fullName:t.fullName,version:t.version,repository:t.repository});return e}let R;const v=void 0===window.bcModSdk?window.bcModSdk=function(){const e={version:t,apiVersion:1,registerMod:m,getModsInfo:g,getPatchingInfo:p,errorReporterHooks:Object.seal({apiEndpointEnter:null,hookEnter:null,hookChainExit:null})};return R=e,Object.freeze(e)}():(i(window.bcModSdk)||n("Failed to init Mod SDK: Name already in use"),1!==window.bcModSdk.apiVersion&&n(`Failed to init Mod SDK: Different version already loaded ('1.2.0' vs '${window.bcModSdk.version}')`),window.bcModSdk.version!==t&&alert(`Mod SDK warning: Loading different but compatible versions ('1.2.0' vs '${window.bcModSdk.version}')\nOne of mods you are using is using an old version of SDK. It will work for now but please inform author to update`),window.bcModSdk);Object.defineProperty(e,"__esModule",{value:!0}),e.default=v}()}(fh);var mh,gh,Rh,vh,yh,bh,Sh=r(fh);const wh=Object.freeze(["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]),Ch=/^(v?)([0-9]+)\.([0-9]+)\.([0-9]+)(\.\S+)?$/;mh=new WeakSet,gh=function(e,t){const n=new Date(Date.now());console[e]("MBS:",...t),this.push({date:n,level:e,args:t})};const kh=new class extends Array{constructor(){super(...arguments),mh.add(this)}debug(...e){b(this,mh,"m",gh).call(this,"debug",e)}log(...e){b(this,mh,"m",gh).call(this,"log",e)}warn(...e){b(this,mh,"m",gh).call(this,"warn",e)}error(...e){b(this,mh,"m",gh).call(this,"error",e)}toJSON(){return this.map((e=>({date:e.date.toUTCString(),level:e.level,args:e.args.map((e=>e instanceof Map||e instanceof Set?Array.from(e):e))})))}};function Bh(e,t,n=-1/0,r=1/0){if(!(Number.isInteger(e)&&e>=n&&e<=r))throw"number"!=typeof e?new TypeError(`Invalid "${t}" type: ${typeof e}`):Number.isInteger(e)?new RangeError(`"${t}" must fall in the [${n}, ${r}] interval: ${e}`):new Error(`"${t}" must be an integer: ${e}`)}function Ph(e,t,n){if(Bh(t,"n",0),!Array.isArray(e))throw new TypeError('Invalid "list" type: '+typeof e);const r=t-e.length;return r>0&&e.push(...Array(r).fill(n)),e}function xh(e,t){if(Bh(t,"n",0),!Array.isArray(e))throw new TypeError('Invalid "list" type: '+typeof e);const n=e.length-t;return n>0&&e.splice(t,n),e}function Ih(e){return Bh(e,"n",0,8),yd(0,e).map((e=>Md(wh))).join("")}async function Mh(e,t=100){for(;!e();)await new Promise((e=>setTimeout(e,t)));return!0}const Eh=Sh.registerMod({name:"MBS",fullName:"Maid's Bondage Scripts",repository:"https://github.com/bananarama92/MBS",version:t});Rh=new WeakMap;const Oh=new class{constructor(){Rh.set(this,null)}get modName(){return"MBS"}getRuleState(e){return null===b(this,Rh,"f")&&"undefined"!=typeof bcx&&S(this,Rh,bcx.getModApi("MBS"),"f"),b(this,Rh,"f")?.getRuleState(e)??null}};function _h(e,t){let n=`${e}(`;return n+=Object.values(t).map((e=>String(e))).join(", "),n+=")",n}class $h{get index(){return b(this,yh,"f")}set index(e){this.setPosition(e)}get value(){return b(this,vh,"f")[b(this,yh,"f")]}get list(){return b(this,vh,"f")}constructor(e,t=0){if(vh.set(this,void 0),yh.set(this,void 0),!Lh(e))throw new TypeError('Invalid "iterable" type: '+typeof e);const n=Object.freeze([...e]);if(0===n.length)throw new Error('Passed "iterable" must contain at least one element');Bh(t,"index",0,n.length-1),S(this,vh,n,"f"),S(this,yh,t,"f")}*[(vh=new WeakMap,yh=new WeakMap,Symbol.iterator)](){for(;;)yield this.next()}next(e=!0){const t=(b(this,yh,"f")+1)%b(this,vh,"f").length;return e&&S(this,yh,t,"f"),b(this,vh,"f")[t]}previous(e=!0){const t=(b(this,yh,"f")+b(this,vh,"f").length-1)%b(this,vh,"f").length;return e&&S(this,yh,t,"f"),b(this,vh,"f")[t]}setPosition(e){Bh(e,"index",0,b(this,vh,"f").length-1),S(this,yh,e,"f")}toString(){return _h(typeof this,this.toJSON())}toJSON(){return{list:this.list,index:this.index}}}function Fh(e,t){if(Bh(e,"start",0,65535),!Th(t))throw new TypeError('Invalid "indices" type: '+typeof t);const n=e+Math.max(0,...t)+1;Bh(n,"stop",e+1,65535);const r=yd(e,n);return t.map((e=>String.fromCharCode(r[e])))}function Lh(e){return Symbol.iterator in Object(e)}class Hh{constructor(e=0,t=0,n=0,r=!1){if(bh.set(this,void 0),Bh(e,"major",0,65535),Bh(t,"minor",0,65535),Bh(n,"micro",0,65535),"boolean"!=typeof r)throw new TypeError('Invalid "beta" type: '+typeof r);this.major=e,this.minor=t,this.micro=n,this.beta=r,S(this,bh,[e,t,n].map((e=>String.fromCharCode(e)))+String.fromCharCode(r?0:1),"f"),Object.freeze(this)}equal(e){return e instanceof Hh&&this.valueOf()===e.valueOf()}greater(e){return e instanceof Hh&&this.valueOf()>e.valueOf()}lesser(e){return e instanceof Hh&&this.valueOf()<e.valueOf()}greaterOrEqual(e){return e instanceof Hh&&this.valueOf()>=e.valueOf()}lesserOrEqual(e){return e instanceof Hh&&this.valueOf()<=e.valueOf()}static fromVersion(e){const t=Ch.exec(e);if(null===t)throw new Error(`Invalid "version": ${e}`);return new Hh(Number(t[2]),Number(t[3]),Number(t[4]),void 0!==t[5])}static fromBCVersion(e){const t=GameVersionFormat.exec(e);if(null===t)throw new Error(`Invalid BC version: "${e}"`);return new Hh(Number(t[1]),0,0,void 0!==t[2])}toString(){return _h(typeof this,this.toJSON())}valueOf(){return b(this,bh,"f")}toJSON(){return{major:this.major,minor:this.minor,micro:this.micro,beta:this.beta}}}function Th(e){return Array.isArray(e)}function Ah(e){return Object.keys(e)}function Nh(e){return Object.entries(e)}function Dh(e){return Object.fromEntries(e)}function jh(e,t){return e.includes(t)}function Wh(e){return Number.isInteger(e)}bh=new WeakMap;const Gh=Object.freeze(Object.fromEntries([["CraftingSaveServer",["025B434F"]],["CraftingClick",["FF1A7B21","5A1B4ACC"]],["CraftingRun",["5BE6E125","4018E748"]],["MainHallRun",["735A1207","D587AD40"]],["MainHallClick",["7A6D741A"]],["ServerPlayerIsInChatRoom",["E3771112"]],["WheelFortuneLoad",["204D57D4"]],["WheelFortuneClick",["21CCD6B4"]],["WheelFortuneRun",["A59DA22A","150059B6"]],["WheelFortuneMouseUp",["1465BDFA"]],["WheelFortuneMouseDown",["306C80B6"]],["WheelFortuneCustomizeLoad",["97F0A81E"]]].map((e=>{const[t,n]=e,r=new Set(n.filter((e=>null!=e)));return[t,Object.freeze(r)]}))));function zh(e,t,n){if(bR(t),null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);ExtendedItemSetOptionByRecord(t,e,n,{refresh:!1,push:!1})}function Vh(e,t,n){const r={Asset:e};return ExtendedItemInit(t,r,!1,!1),n&&zh(r,t,n),r.Property??{}}const qh=Object.freeze({NONE:0,CLOTHES:1,UNDERWEAR:2,COSPLAY:3,ALL:4});let Uh;function Kh(e,t){switch(e){case qh.NONE:return()=>!1;case qh.CLOTHES:return e=>e.Group.AllowNone&&!e.BodyCosplay&&!e.Group.Underwear;case qh.UNDERWEAR:return e=>e.Group.AllowNone&&!e.BodyCosplay;case qh.COSPLAY:return e=>!SR(t)?e.Group.AllowNone&&!e.BodyCosplay:e.Group.AllowNone;case qh.ALL:return e=>!!SR(t)||e.Group.AllowNone&&!e.BodyCosplay;default:throw new Error(`Invalid "stripLevel" value: ${e}`)}}function Jh(e,t){if(void 0===t)return[-1,!1];if(void 0!==t.priority&&void 0!==t.blocksSubSet)return[t.priority,t.blocksSubSet];if(0===t.block.size)return t.priority=0,t.blocksSubSet=!1,[t.priority,t.blocksSubSet];{const n=[];for(const r of t.block)n.push(Jh(e,e.get(r)));return t.priority=1+Math.max(0,...n.map((e=>e[0]))),t.blocksSubSet=t.superSet&&n.some((e=>e[1])),[t.priority,t.blocksSubSet]}}function Yh(e,t,n=[]){if(!Th(e))throw new TypeError('Invalid "itemList" type: '+typeof e);const r=new Map;[e,n].forEach(((e,n)=>{for(const{Group:i,Name:o,TypeRecord:a}of e){if(r.has(i))continue;const e=AssetGet(t.AssetFamily,i,o);if(null==e)throw new Error(`Unknown asset: ${i}${o}`);if("Item"!==e.Group.Category)continue;const s=Vh(e,t,a),l={superSet:1===n,block:new Set(...e.Block??[],...s.Block??[])};(e.Effect?.includes("Enclose")||s.Effect?.includes("Enclose"))&&(l.priority=AssetGroup.length,l.blocksSubSet=l.superSet),r.set(i,l)}}));for(const[e,t]of r)Jh(r,t);return r}Mh(CR).then((()=>Uh=CharacterLoadSimple("MBSDummy")));const Zh=new Map;function Xh(e,t){const n=InventoryGetLock(e);if(!InventoryItemHasEffect(e,"Lock"))return!0;if("Decoy"===e.Craft?.Property){if(null==n)return!1;return!["OwnerOnly","LoverOnly","FamilyOnly"].some((t=>n.Asset[t]||e.Asset[t]))}const r=Oh.getRuleState("block_keyuse_self"),i=t.IsPlayer()&&r?.inEffect&&r?.isEnforced;switch(n?.Asset?.Name){case"SafewordPadlock":return!0;case"MetalPadlock":case"MistressPadlock":case"MistressTimerPadlock":case"PandoraPadlock":{if(i||LogQuery("KeyDeposit","Cell"))return!1;let e=Zh.get(`${t.ID}:${n.Asset.Name}`);return void 0===e&&(e=t.Inventory.some((e=>e.Asset.Name===`${n.Asset.Name}Key`)),Zh.set(`${t.ID}:${n.Asset.Name}`,e)),e}case"TimerPasswordPadlock":case"PasswordPadlock":case"CombinationPadlock":return Number(e.Property?.LockMemberNumber)===t.MemberNumber;case"HighSecurityPadlock":{const n=(e?.Property?.MemberNumberListKeys??"").split(",").map(Number);return!i&&jh(n,t.MemberNumber)}default:return!1}}function Qh(e,t,n,r=null,i=null,o=Player){if(!Th(t))throw new TypeError('Invalid "itemList" type: '+typeof t);if(function(e){const t=e.Appearance.find((e=>InventoryItemHasEffect(e,"Enclose")));return null!=t&&!Xh(t,e)}(o))return void kh.log(`Failed to equip all "${e}" wheel of fortune items: cannot unlock enclosing item`);!function(e,t){bR(t);const n=Kh(e,t),r=t.Appearance;for(let e=r.length-1;e>=0;e--){const t=r[e].Asset;t.Group.AllowNone&&"Appearance"===t.Group.Category&&n(t)&&r.splice(e,1)}}(n,o),"function"==typeof i&&(t=i(t,o));const a=function(e,t,n){const r=Yh(e,n,t);return t.filter((e=>r.get(e.Group)?.blocksSubSet))}(t,o.Appearance.map((e=>({Group:e.Asset.Group.Name,Name:e.Asset.Name,TypeRecord:e.Property?.TypeRecord,NoEquip:!0}))),o);Zh.clear();const s={},l=new Set,u=o.IsPlayer()&&LogQuery("ClubSlave","Management");for(const{Name:e,Group:n,Equip:r,NoEquip:i}of[...a,...t]){const t=AssetGet(o.AssetFamily,n,e),a=InventoryGet(o,n),c="function"!=typeof r||r(o);if(null!=t)if(c){const e={InventoryGroupIsBlockedForCharacter:InventoryGroupIsBlockedForCharacter(o,n,!1),InventoryGroupIsBlockedByOwnerRule:InventoryGroupIsBlockedByOwnerRule(o,n),"Locked item equipped":null!=a&&!Xh(a,o)};i||(e.InventoryBlockedOrLimited=InventoryBlockedOrLimited(o,{Asset:t}),e.InventoryChatRoomAllow=!InventoryChatRoomAllow(t.Category??[]),e["Blocked via Club Slave Collar"]=u&&"Appearance"===t.Group.Category);const r=Nh(e).filter((e=>e[1]));0!==r.length?s[t.Description]=r.map((e=>e[0])):null!=a&&InventoryRemove(o,n,!1)}else l.add(n);else s[e]=["Unknown asset"]}for(const{Name:e,Group:n,Craft:i,ItemCallback:a,Color:u,TypeRecord:c,Property:d}of t){const t=AssetGet(o.AssetFamily,n,e),p=s[t?.Description??e];if(null==t||void 0!==p||l.has(n))continue;if(!InventoryAllow(o,t,t.Prerequisite,!1)){s[t.Description]=["InventoryAllow"];continue}const h=[...u??t.DefaultColor],f=CharacterAppearanceSetItem(o,n,t,h,SkillGetWithRatio(o,"Bondage"),o.MemberNumber,!1);null!=f&&(c&&zh(f,o,c),void 0!==i&&(f.Craft=xa(i),InventoryCraft(o,o,n,f.Craft,!1,!1)),f.Property=Object.assign(f.Property??{},xa(d)),"function"==typeof a&&a(f,o),"function"==typeof r&&r(f,o))}if(CharacterRefresh(o,!1,!1),o.IsPlayer()){ChatRoomCharacterUpdate(o);const t=Object.values(s).length;0!==t&&kh.log(`Failed to equip ${t} "${e}" wheel of fortune items`,s)}}function ef(e,t,n){if("string"!=typeof t||!DynamicDrawTextRegex.test(t))return!1;const r=`${n.Group.Name}${n.Name}`,[i,o]=Nh(TextItemDataLookup).find((([e])=>e.includes(r)))??["",null];return null!==o&&t.length<=(o.maxLength[e]??-1)}const tf=Object.freeze({OverridePriority:(e,t)=>{if(Wh(e))return!0;if(CommonIsObject(e)){const n=t.Layer.map((e=>e.Name));return Nh(e).every((([e,t])=>n.includes(e)&&Wh(t)))}return!1},Opacity:(e,t)=>"number"==typeof e&&e<=t.MaxOpacity&&e>=t.MinOpacity,Text:(e,t)=>ef("Text",e,t),Text2:(e,t)=>ef("Text2",e,t),Text3:(e,t)=>ef("Text3",e,t),ShowText:(e,t)=>"boolean"==typeof e,TriggerValues:(e,t)=>"string"==typeof e&&e.split(",").length===ItemVulvaFuturisticVibratorTriggers.length,AccessMode:(e,t)=>"string"==typeof e&&ItemVulvaFuturisticVibratorAccessModes.includes(e),PunishOrgasm:(e,t)=>"boolean"==typeof e,PunishStandup:(e,t)=>"boolean"==typeof e,Texts:(e,t)=>!!Array.isArray(e)&&(!(e.length<ItemDevicesLuckyWheelMinTexts||e.length>ItemDevicesLuckyWheelMaxTexts)&&e.every((e=>"string"==typeof e&&e.length<=ItemDevicesLuckyWheelMaxTextLength))),TargetAngle:(e,t)=>"number"==typeof e&&e>=0&&e<=360,OverrideHeight:function(e,t){const n=VariableHeightDataLookup[`${t.Group.Name}${t.Name}`];if(void 0===n)return!1;const r=e;return null!==r&&"object"==typeof r&&Number.isInteger(r.Priority)&&"number"==typeof r.Height&&r.Height<=n.maxHeight&&r.Height>=n.minHeight&&(null==r.HeightRatioProportion||"number"==typeof r.HeightRatioProportion&&r.HeightRatioProportion>=0&&r.HeightRatioProportion<=1)},PunishStruggle:(e,t)=>"boolean"==typeof e,PunishStruggleOther:(e,t)=>"boolean"==typeof e,PunishRequiredSpeechWord:(e,t)=>"string"==typeof e&&e.length<=70,PunishProhibitedSpeechWords:(e,t)=>"string"==typeof e&&e.length<=70,PunishSpeech:(e,t)=>Wh(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PunishRequiredSpeech:(e,t)=>Wh(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PunishProhibitedSpeech:(e,t)=>Wh(e)&&e>=0&&e<FuturisticTrainingBeltSpeechPunishments.length,PublicModeCurrent:(e,t)=>Wh(e)&&e>=0&&e<FuturisticTrainingBeltModes.length,PublicModePermission:(e,t)=>Wh(e)&&e>=0&&e<FuturisticTrainingBeltPermissions.length,ShockLevel:(e,t)=>Wh(e)&&e>=0&&e<=2,PortalLinkCode:(e,t)=>"string"==typeof e&&PortalLinkCodeRegex.test(e)});function nf(e,t){if(null===t||"object"!=typeof t)return{};const n=new Set(["OverridePriority"]);if(e.Archetype){const r=ExtendedItemGatherOptions({Asset:e,Property:t});for(const e of r){"VariableHeightOption"===e.OptionType&&n.add("OverrideHeight");for(const t of Ah(e.ParentData.baselineProperty??{}))CraftingPropertyExclude.has(t)||n.add(t)}}const r={};for(const[i,o]of Nh(t)){const t=tf[i];null!=o&&n.has(i)&&void 0!==t&&(t(o,e)&&(r[i]=o))}return r}const rf=Object.freeze(new Map([["Unknown asset",e=>null==e],["Unsupported owner-only asset",e=>e?.OwnerOnly],["Unsupported lovers-only asset",e=>e?.LoverOnly],["Unsupported D/S family-only asset",e=>e?.FamilyOnly],["Unsupported disabled asset",e=>!e?.Enable],["Unsupported script-asset",e=>"Script"===e?.Group?.Category]]));function of(e,t,n=!0){for(const[n,r]of rf)if(r(e))throw new Error(`${n}: ${t.Group}${t.Name}`);let r,i;"string"==typeof t.Color?r=[t.Color]:Array.isArray(t.Color)&&t.Color.every((e=>"string"==typeof e))&&(r=[...t.Color]),null!==t.Craft&&"object"==typeof t.Craft&&(i=Object.assign(xa(t.Craft),{TypeRecord:void 0,OverridePriority:null,Lock:""}),CraftingValidate(i,e,!1));const o=t.Property??{};let a;return CommonIsObject(o.TypeRecord)?a=Object.freeze({...o.TypeRecord}):"string"==typeof o.Type||null===o.Type?a=ExtendedItemTypeToRecord(e,o.Type):"string"==typeof o.Mode&&(a=ExtendedItemTypeToRecord(e,o.Mode)),Object.freeze({Name:t.Name,Group:t.Group,Custom:n,Property:Object.freeze(nf(e,t.Property)),TypeRecord:a,Color:r,Craft:Object.freeze(i),ItemCallback:void 0,Equip:void 0})}function af(e,t){if(!Th(e))throw new TypeError('Invalid "items" type: '+typeof e);return e.map((e=>function(e,t){const{Group:n,Name:r,Color:i,Craft:o,TypeRecord:a,Property:s}=e,l=AssetGet(t.AssetFamily,n,r);if(null==l)throw new Error(`Unknown asset: ${n}${r}`);return{Group:n,Name:r,Color:ka(i),Craft:ka(o),Property:Object.assign(Vh(l,t,a),xa(s))}}(e,t)))}var sf;class lf{get screen(){return this.constructor.screen}get ids(){return this.constructor.ids}get rootParams(){return this.screenParams[this.constructor.ids.root]}constructor(e,t,n){this.parent=e,this.screenParams=nc(xa(t),n??{}),this.child=null}resize(e){const t=MainCanvas.canvas.clientHeight/1e3,n=MainCanvas.canvas.clientWidth/2e3;for(const[r,{shape:i,visibility:o}]of Nh(this.screenParams)){const a={left:`${MainCanvas.canvas.offsetLeft+i[0]*n}px`,top:`${MainCanvas.canvas.offsetTop+i[1]*t}px`,width:`${i[2]*n}px`,height:`${i[3]*t}px`};e&&(a.fontFamily=CommonGetFontName(),a.visibility=o);const s=document.getElementById(r);Object.assign(s.style,a)}}unload(){for(const e of Ah(this.screenParams)){const t=document.getElementById(e);null!==t&&(t.style.visibility="hidden")}}exit(){for(const e of Ah(this.screenParams))ElementRemove(e)}load(){const e=CurrentScreen;CurrentScreenFunctions?.Unload?.(),ControllerIsActive()&&ControllerClearAreas(),CurrentScreen=this.screen,CurrentScreenFunctions=this.getFunctions(),CurrentDarkFactor=1,CommonGetFont.clearCache(),CommonGetFontName.clearCache(),CurrentScreenFunctions?.Resize?.(!0),"ChatSearch"!=e&&"ChatCreate"!=e||ChatRoomStimulationMessage("Walk")}loadChild(e,...t){return this.child&&this.child.exit(),this.child=new e(this,...t),this.child.load(),this.child}exitScreens(e){let t=this.parent,n=this.child;for(;null!=n?.child;)n=n.child;for(;n&&n!==this;)n.child=null,n.exit(),n=n.parent;if(e)for(;null!==t&&!(t instanceof uf);)t.child=null,t.exit(),t=t.parent;null!==t&&(t.load(),t.child=null)}getFunctions(){return{Run:this.run?.bind(this)??CommonNoop,Click:this.click?.bind(this)??CommonNoop,Load:this.load.bind(this),Unload:this.unload?.bind(this),Resize:this.resize?.bind(this),Exit:this.exit.bind(this)}}}lf.background="Sheet",lf.screen="",lf.screenParamsDefault={};class uf extends lf{constructor(e,t,n,r){super(e,uf.screenParamsDefault,null),this.module=t,this.background=n,this.screenFunctions=Object.freeze({...r})}run(e){return this.screenFunctions.Run(e)}click(e){return this.screenFunctions.Click(e)}load(){return this.screenFunctions.Load?.()}unload(){return this.screenFunctions.Unload?.()}resize(e){return this.screenFunctions.Resize?.(e)}keyDown(e){return this.screenFunctions.KeyDown?.(e)??!1}exit(){return this.screenFunctions.Exit?.()}}uf.screenParamsDefault={};const cf=Object.freeze({NONE:0,SAVE:1,DELETE:2});class df extends lf{get index(){return b(this,sf,"f")}set index(e){Bh(e,"index",0,this.mbsList.length-1),S(this,sf,e,"f")}get mbsObject(){return this.mbsList[b(this,sf,"f")]}hasStorageSpace(){return null!==this.mbsList[this.index]||this.dataSize.value<=this.dataSize.max*this.dataSize.marigin}constructor(e,t,n,r,i,o){super(e,i,o),sf.set(this,0),this.character=r,this.mbsList=t,this.index=n,this.dataSize=Object.seal({value:0,valueRecord:{},max:fm,marigin:.9})}load(){const e=mm(this.character.OnlineSharedSettings);this.dataSize.value=Kd(Object.values(e),(e=>Number.isNaN(e)?0:e)),this.dataSize.valueRecord=e,super.load()}exit(e=!0,t=cf.NONE){if(super.exit(),!this.character.IsPlayer())return this.exitScreens(e);switch(t){case cf.NONE:break;case cf.SAVE:this.settings.isValid(this.index)&&this.hasStorageSpace()&&(this.mbsList[this.index]=this.settings.writeSettings(),this.mbsList[this.index]?.register());break;case cf.DELETE:{const e=this.mbsList[this.index];this.mbsList[this.index]=null,e?.unregister();break}default:throw new Error(`Unsupported action: ${t}`)}this.exitScreens(e)}}sf=new WeakMap;var pf,hf,ff,mf,gf;const Rf=Object.freeze({[qh.NONE]:"None",[qh.CLOTHES]:"Clothes",[qh.UNDERWEAR]:"Clothes and underwear",[qh.COSPLAY]:"Clothes, underwear and cosplay items",[qh.ALL]:"Clothes, underwear, cosplay items and body"});function vf(e){e=ro(e,60,14400);const t={h:0,m:0,s:0};return t.h=Math.floor(e/3600),e-=3600*t.h,t.m=Math.floor(e/60),e-=60*t.m,t.s=e,`${t.h.toString().padStart(2,"0")}:${t.m.toString().padStart(2,"0")}:${t.s.toString().padStart(2,"0")}`}function yf(e,t,n){return h("div",{id:e.inputID,class:"mbs-dropdown",onWheel:n=>{const r=document.getElementById(e.buttonID);if(r.disabled)return;let i;if(n.deltaY<0)i=ro(t[e.level]-1,qh.NONE,qh.COSPLAY);else{if(!(n.deltaY>0))return;i=ro(t[e.level]+1,qh.NONE,qh.COSPLAY)}t[e.level]=i,r.innerText=Rf[t[e.level]]},children:[p("button",{class:"mbs-button",disabled:n,id:e.buttonID,children:Rf[qh.UNDERWEAR]}),h("div",{class:"mbs-dropdown-content",id:e.dropdownID,children:[" ",Object.values(Rf).slice(0,4).map(((r,i)=>p("button",{class:"mbs-button mbs-dropdown-button",disabled:n,"data-level":i,id:e.optionID+i.toString(),onClick:n=>{const r=n.target;t[e.level]=ro(Number.parseInt(r.dataset.level),qh.NONE,qh.COSPLAY);document.getElementById(e.buttonID).innerText=Rf[t[e.level]]},children:r})))," "]})]})}const bf="mbs-fwitemset",Sf=Object.freeze({root:bf,styles:`${bf}-style`,delete:`${bf}-delete`,deleteButton:`${bf}-delete-button`,deleteTooltip:`${bf}-delete-tooltip`,accept:`${bf}-accept`,acceptButton:`${bf}-accept-button`,acceptTooltip:`${bf}-accept-tooltip`,cancel:`${bf}-cancel`,cancelButton:`${bf}-cancel-button`,cancelTooltip:`${bf}-cancel-tooltip`,exit:`${bf}-exit`,exitButton:`${bf}-exit-button`,exitTooltip:`${bf}-exit-tooltip`,header:`${bf}-header`,midDiv:`${bf}-mid-grid`,botDiv:`${bf}-bot-grid`,outfitName:`${bf}-outfit-name`,outfitInput:`${bf}-outfit-input`,outfitDiv:`${bf}-outfit-div`,outfitButton:`${bf}-outfit-button`,outfitTooltip:`${bf}-outfit-tooltip`,stripHeader:`${bf}-strip-header`,stripInput:`${bf}-strip-dropdown`,stripButton:`${bf}-strip-dropdown-button`,stripDropdown:`${bf}-strip-dropdown-content`,stripOption:`${bf}-strip-dropdown-option`,equipHeader:`${bf}-equip-header`,equipInput:`${bf}-equip-dropdown`,equipButton:`${bf}-equip-dropdown-button`,equipDropdown:`${bf}-equip-dropdown-content`,equipOption:`${bf}-equip-dropdown-option`,weightHeader:`${bf}-weight-header`,weightInput:`${bf}-weight-input`,lockHeader:`${bf}-lock-header`,lockGrid:`${bf}-lock-grid`,lockContainer:`${bf}-lock-container`,lockCheckbox:`${bf}-lock-checkbox`,lockTimer:`${bf}-lock-timer`});class wf extends df{constructor(e,t,n,r,i=null){const o=!r.IsPlayer();super(e,t,n,r,wf.screenParamsDefault,i),pf.add(this),this.settings=new IR(t),this.preview=CharacterLoadSimple("MBSFortuneWheelPreview"),document.body.appendChild(h("div",{id:Sf.root,class:"HideOnPopup mbs-screen","screen-generated":this.screen,children:[p("style",{id:Sf.styles,children:'#mbs-fwitemset {\n  grid-template: "delete header accept cancel exit" min(9vh, 4.5vw) "midDiv midDiv midDiv midDiv midDiv" max-content "botDiv botDiv botDiv botDiv botDiv" auto/min(9vh, 4.5vw) auto min(9vh, 4.5vw) min(9vh, 4.5vw) min(9vh, 4.5vw);\n}\n\n#mbs-fwitemset-delete {\n  grid-area: delete;\n}\n\n#mbs-fwitemset-header {\n  grid-area: header;\n  margin-left: min(20vh, 10vw);\n}\n\n#mbs-fwitemset-accept {\n  grid-area: accept;\n}\n\n#mbs-fwitemset-cancel {\n  grid-area: cancel;\n}\n\n#mbs-fwitemset-exit {\n  grid-area: exit;\n}\n\n#mbs-fwitemset-mid-grid {\n  display: grid;\n  grid-area: midDiv;\n  grid-template: "name ." min(10vh, 5vw) "outfitCode outfitCodeButton" min(7vh, 3.5vw)/min(78vh, 39vw) auto;\n  margin-left: 35%;\n  grid-gap: min(2vh, 1vw) min(6vh, 3vw);\n}\n\n#mbs-fwitemset-outfit-name {\n  align-self: end;\n  grid-area: name;\n  height: min(7vh, 3.5vw);\n}\n\n#mbs-fwitemset-outfit-input {\n  grid-area: outfitCode;\n  height: min(7vh, 3.5vw);\n}\n\n#mbs-fwitemset-outfit-div {\n  grid-area: outfitCodeButton;\n  grid-template-columns: min(27vh, 13.5vw);\n  grid-template-rows: min(7vh, 3.5vw) auto;\n}\n\n#mbs-fwitemset-bot-grid {\n  display: grid;\n  grid-area: botDiv;\n  margin-left: 35%;\n  grid-gap: min(2vh, 1vw) min(8vh, 4vw);\n  align-items: end;\n  grid-template: "headerStrip headerLock" min(7vh, 3.5vw) "configStrip gridLock" min(7vh, 3.5vw) "headerEquip gridLock" min(7vh, 3.5vw) "configEquip gridLock" min(7vh, 3.5vw) "headerWeight gridLock" min(7vh, 3.5vw) "configWeight gridLock" min(7vh, 3.5vw)/min(40vh, 20vw) auto;\n  overflow: hidden;\n  text-align: left;\n}\n\n#mbs-fwitemset-strip-header {\n  grid-area: headerStrip;\n}\n\n#mbs-fwitemset-strip-input {\n  align-self: start;\n  grid-area: configStrip;\n}\n\n#mbs-fwitemset-equip-header {\n  grid-area: headerEquip;\n}\n\n#mbs-fwitemset-equip-input {\n  align-self: start;\n  grid-area: configEquip;\n}\n\n#mbs-fwitemset-weight-header {\n  grid-area: headerWeight;\n}\n\n#mbs-fwitemset-weight-input {\n  align-self: start;\n  grid-area: configWeight;\n  width: min(7vh, 3.5vw);\n}\n\n#mbs-fwitemset-lock-header {\n  grid-area: headerLock;\n}\n\n#mbs-fwitemset-lock-grid {\n  align-self: start;\n  display: grid;\n  grid-area: gridLock;\n  grid-template-columns: 5fr 5fr;\n  overflow-y: scroll;\n  grid-gap: min(2vh, 1vw);\n}\n\n.mbs-fwitemset-lock-container {\n  align-items: center;\n  display: grid;\n  word-wrap: break-word;\n  grid-template-columns: 1.5fr 8.5fr;\n  grid-gap: min(2vh, 1vw);\n}\n\n.mbs-timer {\n  height: min(5vh, 2.5vw);\n  text-align: center;\n  width: min(21vh, 10.5vw);\n}\n\n#mbs-fwitemset-strip-dropdown-button, #mbs-fwitemset-equip-dropdown-button {\n  height: min(7vh, 3.5vw);\n}\n\n#mbs-fwitemset-strip-dropdown-content, #mbs-fwitemset-equip-dropdown-content {\n  width: min(80vh, 40vw);\n}'.toString()}),p("h1",{id:Sf.header,children:`Customize wheel of fortune item set ${this.index}`}),h("div",{id:Sf.delete,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:Sf.deleteButton,style:{backgroundImage:"url('./Icons/Trash.png')"},onClick:()=>this.exit(!1,cf.DELETE),disabled:o}),p("div",{class:"mbs-button-tooltip",id:Sf.deleteTooltip,style:{justifySelf:"left"},children:"Delete item set"})]}),h("div",{id:Sf.accept,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:Sf.acceptButton,style:{backgroundImage:"url('./Icons/Accept.png')"},onClick:()=>this.exit(!1,cf.SAVE),disabled:!0}),p("div",{class:"mbs-button-tooltip",id:Sf.acceptTooltip,style:{justifySelf:"right"},children:"Save item set:\\nMissing outfit"})]}),h("div",{id:Sf.cancel,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:Sf.cancelButton,style:{backgroundImage:"url('./Icons/Cancel.png')"},onClick:()=>this.exit(!1,cf.NONE)}),p("div",{class:"mbs-button-tooltip",id:Sf.cancelTooltip,style:{justifySelf:"right"},children:"Cancel"})]}),h("div",{id:Sf.exit,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:Sf.exitButton,style:{backgroundImage:"url('./Icons/Exit.png')"},onClick:()=>this.exit(!0,cf.NONE)}),p("div",{class:"mbs-button-tooltip",id:Sf.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),h("div",{id:Sf.midDiv,children:[p("input",{type:"text",id:Sf.outfitName,placeholder:"Name",disabled:o,maxLength:70,onInput:e=>{this.settings.name=e.target.value,b(this,pf,"m",ff).call(this,Sf.acceptButton)},onFocus:e=>e.target.select()}),p("input",{type:"text",id:Sf.outfitInput,placeholder:"Outfit code",disabled:o,onInput:e=>{this.settings.outfitCache=e.target.value,b(this,pf,"m",ff).call(this,Sf.outfitButton)},onFocus:e=>e.target.select()}),h("div",{id:Sf.outfitDiv,class:"mbs-button-div",children:[p("button",{class:"mbs-button",disabled:!0,id:Sf.outfitButton,onClick:()=>b(this,pf,"m",ff).call(this,Sf.acceptButton,!0),children:"Parse"}),p("div",{class:"mbs-button-tooltip",id:Sf.outfitTooltip,children:"Parse the outfit code"})]})]}),h("div",{id:Sf.botDiv,children:[p("div",{id:Sf.stripHeader,children:"Clothing strip level:"}),p("div",{id:Sf.equipHeader,children:"Clothing equip level:"}),p("div",{id:Sf.weightHeader,children:"Wheel option weight:"}),p("div",{id:Sf.lockHeader,children:"Enabled lock types:"}),p("input",{type:"number",id:Sf.weightInput,min:1,max:9,value:1,disabled:o,onInput:e=>{const t=e.target;this.settings.weight=ro(Number.parseInt(t.value,10),1,9)},onWheel:e=>{const t=e.target;if(!t.disabled){if(e.deltaY<0)t.stepUp(1);else{if(!(e.deltaY>0))return;t.stepDown(1)}this.settings.weight=ro(Number.parseInt(t.value,10),1,9)}},onFocus:e=>e.target.select()}),yf({inputID:Sf.stripInput,buttonID:Sf.stripButton,optionID:Sf.stripOption,dropdownID:Sf.stripDropdown,level:"stripLevel"},this.settings,o),yf({inputID:Sf.equipInput,buttonID:Sf.equipButton,optionID:Sf.equipOption,dropdownID:Sf.equipDropdown,level:"equipLevel"},this.settings,o),h("div",{id:Sf.lockGrid,children:[" ",this.settings.flags.map(((e,t)=>{let n;if("TimerPasswordPadlock"===e.type)n=function(e,t,n){return p("input",{type:"time",class:"mbs-timer",id:Sf.lockTimer+t.toString(),disabled:n,min:"00:01:00",max:"04:00:00",step:1,value:vf(e.time),onInput:t=>{const n=t.target,[r,i,o]=n.value.split(":").map((e=>Number.parseInt(e,10)));e.time=ro(3600*r+60*i+o,60,14400)},onWheel:t=>{const n=t.target;if(n.disabled)return;if(t.deltaY<0)n.stepUp(120);else{if(!(t.deltaY>0))return;n.stepDown(120)}const[r,i,o]=n.value.split(":").map((e=>Number.parseInt(e,10)));e.time=ro(3600*r+60*i+o,60,14400)}})}(e,t,o);else n=e.description;return h("div",{class:Sf.lockContainer,id:Sf.lockContainer+t.toString(),children:[p("input",{type:"checkbox",class:Sf.lockCheckbox,id:Sf.lockCheckbox+t.toString(),disabled:o,checked:e.enabled,onClick:()=>{e.enabled=!e.enabled,b(this,pf,"m",ff).call(this,Sf.acceptButton)}}),n]})}))," "]})]})]}))}load(){super.load();const e=this.mbsObject;if(null!==e){this.settings.readSettings(e),this.settings.outfitCache=LZString.compressToBase64(JSON.stringify(af(e.itemList,this.preview))),ElementValue(Sf.outfitName,e.name),ElementValue(Sf.weightInput,e.weight.toString()),ElementValue(Sf.outfitInput,this.settings.outfitCache);for(const[e,t]of this.settings.flags.entries()){if(document.getElementById(`${Sf.lockCheckbox}${e}`).checked=t.enabled,"TimerPasswordPadlock"===t.type)ElementValue(`${Sf.lockTimer}${e}`,vf(t.time))}const t=document.getElementById(Sf.equipButton),n=document.getElementById(Sf.stripButton);t.innerText=Rf[this.settings.equipLevel],n.innerText=Rf[this.settings.stripLevel],b(this,pf,"m",ff).call(this,Sf.acceptButton,!0),b(this,pf,"m",ff).call(this,Sf.outfitButton)}else this.settings.reset(),b(this,pf,"m",ff).call(this,Sf.acceptButton),b(this,pf,"m",ff).call(this,Sf.outfitButton);b(this,pf,"m",gf).call(this)}run(){DrawCharacter(this.preview,300,175,.78,!1)}exit(e,t){CharacterDelete(this.preview),super.exit(e,t)}}pf=new WeakSet,hf=function(){return this.settings.isValid(this.index)&&this.hasStorageSpace()},ff=function(e,t=!1){const n=document.getElementById(e),r=!this.character.IsPlayer();switch(e){case Sf.acceptButton:if(t){const e=this.settings.loadFromBase64();n.disabled=r||!(e&&b(this,pf,"m",hf).call(this)),!r&&e&&b(this,pf,"m",gf).call(this)}else n.disabled=r||!(null!==this.settings.itemList&&b(this,pf,"m",hf).call(this));b(this,pf,"m",mf).call(this,Sf.acceptTooltip);break;case Sf.outfitButton:n.disabled=r||!this.settings.outfitCache,b(this,pf,"m",mf).call(this,Sf.outfitTooltip);break;default:throw new Error(`Unsupported tooltip type: ${e}`)}},mf=function(e){const t=document.getElementById(e);switch(e){case Sf.acceptTooltip:{const e="Save item set";this.settings.loadFromBase64()?b(this,pf,"m",hf).call(this)?t.innerText=e:this.settings.name?this.settings.flags.every((e=>!e.enabled))?t.innerText=`${e}:\nMust enable at least one lock type`:this.hasStorageSpace()?t.innerText=`${e}:\nMax allowed OnlineSharedSettings storage size exceeded (${gm(this.dataSize.value)} / ${gm(this.dataSize.max)}`:t.innerText=`${e}:\nDuplicate name`:t.innerText=`${e}:\nMissing name`:t.innerText=`${e}:\nMissing outfit`;break}case Sf.outfitTooltip:{const e="Parse outfit code";this.settings.outfitCache?t.innerText=e:t.innerText=`${e}:\nMissing code`;break}default:throw new Error(`Unsupported tooltip type: ${e}`)}},gf=function(){if(this.preview.Appearance=[...this.character.Appearance],this.preview.OnlineSharedSettings=this.character.OnlineSharedSettings,CharacterReleaseTotal(this.preview),null===this.settings.itemList)return;const e=Kh(this.settings.equipLevel,this.preview),t=this.preview.AssetFamily;Qh("MBSPreview",this.settings.itemList.filter((({Name:n,Group:r})=>{const i=AssetGet(t,r,n);return null!=i&&("Appearance"!==i.Group.Category||e(i))})),this.settings.stripLevel,null,null,this.preview)},wf.ids=Sf,wf.screen="MBS_FWItemSetScreen",wf.background="Sheet",wf.screenParamsDefault={[bf]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};const Cf="mbs-fwcommand",kf=Object.freeze({root:Cf,styles:`${Cf}-style`,delete:`${Cf}-delete`,deleteButton:`${Cf}-delete-button`,deleteTooltip:`${Cf}-delete-tooltip`,accept:`${Cf}-accept`,acceptButton:`${Cf}-accept-button`,acceptTooltip:`${Cf}-accept-tooltip`,cancel:`${Cf}-cancel`,cancelButton:`${Cf}-cancel-button`,cancelTooltip:`${Cf}-cancel-tooltip`,exit:`${Cf}-exit`,exitButton:`${Cf}-exit-button`,exitTooltip:`${Cf}-exit-tooltip`,header:`${Cf}-header`,commandInput:`${Cf}-command-input`,weightHeader:`${Cf}-weight-header`,weightInput:`${Cf}-weight-input`});class Bf extends df{constructor(e,t,n,r,i=null){super(e,t,n,r,Bf.screenParamsDefault,i),this.settings=new MR(t);const o=!r.IsPlayer();document.body.appendChild(h("div",{id:kf.root,class:"HideOnPopup mbs-screen","screen-generated":this.screen,children:[p("style",{id:kf.styles,children:'#mbs-fwcommand {\n  grid-template: "delete header accept cancel exit" min(9vh, 4.5vw) "commandInput commandInput commandInput commandInput commandInput" min(9vh, 4.5vw) "weightHeader weightHeader weightHeader weightHeader weightHeader" min(7vh, 3.5vw) "weightInput weightInput weightInput weightInput weightInput" min(7vh, 3.5vw)/min(9vh, 4.5vw) auto min(9vh, 4.5vw) min(9vh, 4.5vw) min(9vh, 4.5vw);\n}\n\n#mbs-fwcommand-delete {\n  grid-area: delete;\n}\n\n#mbs-fwcommand-header {\n  grid-area: header;\n  margin-left: min(20vh, 10vw);\n}\n\n#mbs-fwcommand-accept {\n  grid-area: accept;\n}\n\n#mbs-fwcommand-cancel {\n  grid-area: cancel;\n}\n\n#mbs-fwcommand-exit {\n  grid-area: exit;\n}\n\n#mbs-fwcommand-command-input {\n  grid-area: commandInput;\n  height: min(7vh, 3.5vw);\n  place-self: self-end center;\n  width: 50%;\n}\n\n#mbs-fwcommand-weight-header {\n  align-self: self-end;\n  grid-area: weightHeader;\n}\n\n#mbs-fwcommand-weight-input {\n  grid-area: weightInput;\n  place-self: start center;\n  width: min(7vh, 3.5vw);\n}'.toString()}),p("h1",{id:kf.header,children:`Customize wheel of fortune command ${this.index}`}),h("div",{id:kf.delete,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:kf.deleteButton,style:{backgroundImage:"url('./Icons/Trash.png')"},onClick:()=>this.exit(!1,cf.DELETE),disabled:o}),p("div",{class:"mbs-button-tooltip",id:kf.deleteTooltip,style:{justifySelf:"left"},children:"Delete command"})]}),h("div",{id:kf.accept,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:kf.acceptButton,style:{backgroundImage:"url('./Icons/Accept.png')"},onClick:()=>this.exit(!1,cf.SAVE),disabled:!0}),p("div",{class:"mbs-button-tooltip",id:kf.acceptTooltip,style:{justifySelf:"right"},children:"Save command"})]}),h("div",{id:kf.cancel,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:kf.cancelButton,style:{backgroundImage:"url('./Icons/Cancel.png')"},onClick:()=>this.exit(!1,cf.NONE)}),p("div",{class:"mbs-button-tooltip",id:kf.cancelTooltip,style:{justifySelf:"right"},children:"Cancel"})]}),h("div",{id:kf.exit,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:kf.exitButton,style:{backgroundImage:"url('./Icons/Exit.png')"},onClick:()=>this.exit(!0,cf.NONE)}),p("div",{class:"mbs-button-tooltip",id:kf.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),p("input",{type:"text",id:kf.commandInput,placeholder:"Role play command",disabled:o,maxLength:70,onInput:e=>{this.settings.name=e.target.value;document.getElementById(kf.acceptButton).disabled=this.settings.name.length>0},onFocus:e=>e.target.select()}),p("div",{id:kf.weightHeader,children:"Wheel option weight:"}),p("input",{type:"number",id:kf.weightInput,min:1,max:9,value:1,disabled:o,onInput:e=>{const t=e.target;this.settings.weight=ro(Number.parseInt(t.value,10),1,9)},onWheel:e=>{const t=e.target;if(!t.disabled){if(e.deltaY<0)t.stepUp(1);else{if(!(e.deltaY>0))return;t.stepDown(1)}this.settings.weight=ro(Number.parseInt(t.value,10),1,9)}},onFocus:e=>e.target.select()})]}))}load(){if(super.load(),null!==this.mbsObject){this.settings.readSettings(this.mbsObject),ElementValue(kf.commandInput,this.mbsObject.name),ElementValue(kf.weightInput,this.mbsObject.weight.toString());document.getElementById(kf.acceptButton).disabled=this.character.IsPlayer()}else this.settings.reset()}}Bf.screen="MBS_FWCommandScreen",Bf.background="Sheet",Bf.screenParamsDefault={[Cf]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};var Pf,xf;function If(e,t,n){const r=Sm(e.OnlineSharedSettings?.MBS,"OnlineSharedSettings",!1);let i,o=void 0===r?void 0:r[t];if(Array.isArray(o)||(void 0!==o&&kh.warn(`Failed to load "${e.AccountName}" wheel of fortune ${n}`),o=Array(RR).fill(null)),e.IsPlayer())i=Player.MBSSettings[t];else{const e=[];i=ym("FortuneWheelItemSets"===t?_R.fromObject:$R.fromObject,o,e),e.forEach((e=>console.warn(e)))}return i.forEach((e=>e?.register(!1))),i}function Mf(e,t){return p("button",{class:"mbs-button",id:Of.button+t.toString(),style:{height:"min(7vh, 3.5vw)"},onClick:()=>{if(t<RR){const n={[wf.ids.root]:{shape:e.rootParams.shape}};return e.loadChild(wf,e.wheelStruct.FortuneWheelItemSets,t,e.character,n)}return e.loadChild(Bf,e.wheelStruct.FortuneWheelCommands,t-RR,e.character)}})}const Ef="mbs-fwselect",Of=Object.freeze({root:Ef,styles:`${Ef}-style`,exit:`${Ef}-exit`,exitButton:`${Ef}-exit-button`,exitTooltip:`${Ef}-exit-tooltip`,storage:`${Ef}-storage`,storageInner:`${Ef}-storage-cover`,storageTooltip:`${Ef}-storage-tooltip`,storageFooter:`${Ef}-storage-footer`,buttonOuterGrid:`${Ef}-button-grid-outer`,buttonInnerGrid0:`${Ef}-button-grid-inner0`,buttonInnerGrid1:`${Ef}-button-grid-inner1`,button:`${Ef}-button`,itemSets:`${Ef}-header0`,commandSets:`${Ef}-header1`});class _f extends lf{get wheelList(){return[...this.wheelStruct.FortuneWheelItemSets,...this.wheelStruct.FortuneWheelCommands]}constructor(e,t,n,r=null){super(e,_f.screenParamsDefault,r),Pf.add(this),this.wheelStruct=t,this.character=n,this.dataSize=Object.seal({value:0,valueRecord:{},max:fm,marigin:.9});const i=this.character.IsPlayer();document.body.appendChild(h("div",{id:Of.root,class:"HideOnPopup mbs-screen","screen-generated":this.screen,children:[p("style",{id:Of.styles,children:'#mbs-fwselect {\n  grid-template: ". buttonOuterGrid exit" min(9vh, 4.5vw) "storage buttonOuterGrid ." auto "storageFooter buttonOuterGrid ." min(14vh, 7vw)/min(30vh, 15vw) auto min(20vh, 10vw);\n}\n\n#mbs-fwselect-exit {\n  grid-area: exit;\n  height: min(9vh, 4.5vw);\n  justify-self: end;\n  width: min(9vh, 4.5vw);\n}\n\n#mbs-fwselect-storage {\n  background-image: linear-gradient(180deg, #d80000, #d80000 10%, #00d800 60%, #00d800) !important;\n  border: min(0.3vh, 0.15vw) solid var(--mbs-border-color);\n  display: grid;\n  grid-area: storage;\n  height: 100%;\n  justify-self: center;\n  width: 35%;\n}\n#mbs-fwselect-storage h2 {\n  margin: 0;\n}\n#mbs-fwselect-storage ul {\n  margin: 0;\n  text-align: left;\n}\n#mbs-fwselect-storage #mbs-fwselect-storage-tooltip {\n  bottom: unset;\n  left: 15%;\n  position: absolute;\n  visibility: hidden;\n}\n#mbs-fwselect-storage:hover #mbs-fwselect-storage-tooltip {\n  visibility: visible;\n}\n\n#mbs-fwselect-storage-cover {\n  width: 100%;\n}\n\n#mbs-fwselect-storage-footer {\n  grid-area: storageFooter;\n  height: min(7vh, 3.5vw);\n  padding-top: min(1vh, 0.5vw);\n}\n\n#mbs-fwselect-button-grid-outer {\n  display: grid;\n  grid-area: buttonOuterGrid;\n  grid-template-rows: min(9vh, 4.5vw) auto min(9vh, 4.5vw) auto;\n  height: 94%;\n  overflow-y: scroll;\n  padding-left: min(2vh, 1vw);\n  padding-right: min(2vh, 1vw);\n}\n\n#mbs-fwselect-button-grid-inner0, #mbs-fwselect-button-grid-inner1 {\n  display: grid;\n  grid-template-columns: minmax(0, 4fr) minmax(0, 4fr);\n  grid-gap: min(2vh, 1vw);\n  padding-bottom: min(2vh, 1vw);\n  padding-top: min(2vh, 1vw);\n}\n\n#mbs-fwselect-header0, #mbs-fwselect-header1 {\n  background-color: var(--mbs-background-color);\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  position: sticky;\n  top: 0%;\n}'.toString()}),h("div",{id:Of.buttonOuterGrid,children:[p("h1",{id:Of.itemSets,"z-index":1,children:i?"Fortune wheel item sets":`${this.character.Nickname??this.character.Name}'s fortune wheel item sets`}),p("div",{id:Of.buttonInnerGrid0,children:yd(0,RR).map((e=>Mf(this,e)))}),p("h1",{id:Of.commandSets,"z-index":1,children:i?"Fortune wheel commands":`${this.character.Nickname??this.character.Name}'s fortune wheel commands`}),p("div",{id:Of.buttonInnerGrid1,children:yd(RR,2*RR).map((e=>Mf(this,e)))})]}),h("div",{id:Of.exit,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:Of.exitButton,onClick:this.exit.bind(this),style:{backgroundImage:"url('./Icons/Exit.png')"}}),p("span",{class:"mbs-button-tooltip",id:Of.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),h("div",{id:Of.storage,children:[p("div",{id:Of.storageInner}),h("div",{id:Of.storageTooltip,class:"mbs-button-tooltip",children:[p("h2",{id:Of.storageTooltip+"-header",children:"OnlineSharedSettings Data Usage"}),p("ul",{id:Of.storageTooltip+"-list"})]})]}),p("div",{id:Of.storageFooter})]}))}load(){const e=mm(this.character.OnlineSharedSettings);this.dataSize.value=Kd(Object.values(e),(e=>Number.isNaN(e)?0:e)),this.dataSize.valueRecord=e,b(this,Pf,"m",xf).call(this),super.load()}exit(){super.exit(),this.exitScreens(!1)}}Pf=new WeakSet,xf=function(){const e=this.character.IsPlayer();for(const[t,n]of this.wheelList.entries()){const r=document.getElementById(`${Of.button}${t}`);r.innerText=`${(t%RR).toString().padStart(2)}: ${n?.name??"<Empty>"}`,r.disabled=null===n&&!e}const t=document.getElementById(Of.storage),n=document.getElementById(Of.storageInner),r=document.getElementById(Of.storageFooter);if(e){const e=ro(gm(this.dataSize.value),0,9999),i=100*e/(fm/1e3);r.innerText=`${e} / ${fm/1e3} KB`,n.style.height=100-i+"%",n.style.backgroundColor="var(--mbs-background-color)",n.style.borderBottom="min(0.3vh, 0.15vw) solid var(--mbs-border-color)",i>=90&&(t.style.boxShadow="0 0 min(2vh, 1vw) red");const o=/\W/g;let a=Object.entries(this.dataSize.valueRecord).map((([e,t])=>[e.replaceAll(o,""),Number.isNaN(t)?"Unknown":`${gm(t)} KB`]));a.length>=11&&(a=a.slice(0,10),a.push(["...",""]));const s=document.getElementById(Of.storageTooltip+"-list");s.innerHTML="";for(const[e,t]of a)s.appendChild(h("li",{children:[p("span",{style:{float:"left"},children:e}),p("span",{style:{float:"right",paddingLeft:"min(7vh, 3.5vw)"},children:t})]}))}else{const e=document.getElementById(Of.storageTooltip);r.innerText=`- / ${fm/1e3} KB`,n.style.height="100%",n.style.backgroundColor="gray",e.style.display="none"}},_f.ids=Of,_f.screen="MBS_FWSelectScreen",_f.background="Sheet",_f.screenParamsDefault={[Ef]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};const $f=Object.freeze(["Exclusive","5 Minutes","15 Minutes","1 Hour","4 Hours","High Security"]),Ff=Object.freeze([Object.freeze({type:"ExclusivePadlock",description:"Exclusive",enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:300,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:900,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:3600,enabled:!0}),Object.freeze({type:"TimerPasswordPadlock",description:"Timer",time:14400,enabled:!1}),Object.freeze({type:"HighSecurityPadlock",description:"High security",enabled:!1}),Object.freeze({type:null,description:"No lock",enabled:!1})]);function Lf(e,t,n){Bh(t,"seconds",60,14400),Tf(e,"TimerPasswordPadlock",n)&&(null==e.Property&&(e.Property={}),e.Property.RemoveTimer=CurrentTime+1e3*t,e.Property.RemoveItem=!0,e.Property.LockSet=!0,e.Property.Password=Ih(8))}function Hf(e,t){Tf(e,"HighSecurityPadlock",t),null==e.Property&&(e.Property={}),e.Property.MemberNumberListKeys=""}function Tf(e,t,n){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);if("string"!=typeof t)throw new TypeError('Invalid "lockName" type: '+typeof t);bR(n);const r=AssetGet(n.AssetFamily,"ItemMisc",t);if(null==r)throw new Error(`Invalid "lockName" value: ${t}`);return!(null!=InventoryGetLock(e)||!InventoryDoesItemAllowLock(e)||InventoryBlockedOrLimited(n,{Asset:r}))&&(InventoryLock(n,e,{Asset:r},null,!1),!0)}function Af(e,t){return e.forEach(((e,n)=>{e.enabled=t.includes(n)})),e}function Nf(e){switch(e.type){case"ExclusivePadlock":return"Exclusive";case"HighSecurityPadlock":return"High Security";case"TimerPasswordPadlock":return`${Math.floor(e.time/60)} Minutes`;case null:return"No Lock";default:throw new Error(`Invalid flag type: ${e.type}`)}}var Df,jf,Wf,Gf,zf,Vf,qf,Uf;let Kf;const Jf=Object.freeze({builtinBC:0,builtinMBS:1,customMBS:2});let Yf,Zf,Xf,Qf;Mh(CR).then((()=>{Kf=new TextCache("Screens/MiniGame/WheelFortune/Text_WheelFortune.csv","MISSING VALUE FOR TAG: ")}));const em="mbs-fwpreset",tm=Object.freeze({root:em,styles:`${em}-style`,delete:`${em}-delete`,deleteButton:`${em}-delete-button`,deleteTooltip:`${em}-delete-tooltip`,accept:`${em}-accept`,acceptButton:`${em}-accept-button`,acceptTooltip:`${em}-accept-tooltip`,save:`${em}-save`,saveButton:`${em}-save-button`,saveTooltip:`${em}-save-tooltip`,exit:`${em}-exit`,exitButton:`${em}-exit-button`,exitTooltip:`${em}-exit-tooltip`,header:`${em}-header`,midDiv:`${em}-mid-div`,nameDiv:`${em}-name-div`,nameHeader:`${em}-name-header`,nameInput:`${em}-name-input`,nameDropdown:`${em}-name-dropdown`,nameDropdownDiv:`${em}-name-dropdown-div`,nameDropdownContent:`${em}-name-dropdown-content`,builtinBC:`${em}-builtin-bc`,builtinBCColor:`${em}-builtin-bc-color`,builtinBCTooltip:`${em}-builtin-bc-tooltip`,builtinBCTooltipHeader:`${em}-builtin-bc-tooltip-header`,builtinBCTooltipList:`${em}-builtin-bc-tooltip-list`,builtinBCDiv:`${em}-builtin-bc-div`,builtinBCHeader:`${em}-builtin-bc-header`,builtinMBS:`${em}-builtin-mbs`,builtinMBSColor:`${em}-builtin-mbs-color`,builtinMBSTooltip:`${em}-builtin-mbs-button-tooltip`,builtinMBSTooltipHeader:`${em}-builtin-mbs-button-tooltip-header`,builtinMBSTooltipList:`${em}-builtin-mbs-button-tooltip-list`,builtinMBSDiv:`${em}-builtin-mbs-div`,builtinMBSHeader:`${em}-builtin-mbs-header`,customMBS:`${em}-custom-mbs`,customMBSColor:`${em}-custom-mbs-color`,customMBSTooltip:`${em}-custom-mbs-button-tooltip`,customMBSTooltipHeader:`${em}-custom-mbs-button-tooltip-header`,customMBSTooltipList:`${em}-custom-mbs-button-tooltip-list`,customMBSDiv:`${em}-custom-mbs-div`,customMBSHeader:`${em}-custom-mbs-header`});class nm extends lf{get index(){return b(this,jf,"f")}set index(e){Bh(e,"index",0,this.presets.length-1),b(this,jf,"f")!==e&&(S(this,jf,e,"f"),b(this,Df,"m",Uf).call(this))}constructor(e,t,n=null){!function(){if(void 0!==Yf)return;const e=/^([a-zA-Z0-9_\s]+) for ([0-9]+) (minutes|hours)$/,t=WheelFortuneOption.filter((e=>void 0===e.Custom)),n=new Set,r={};for(const i of t){const t=Kf.get(`Option${i.ID}`),o=e.exec(t);if(!o){r[i.ID]={header:t,type:Jf.builtinBC},n.add(t);continue}const[a,s]=[o[1],o[3]];let l=Number.parseInt(o[2]);"hours"===s&&(l*=60),n.add(a),r[i.ID]={header:a,description:`${l} Minutes`,type:Jf.builtinBC}}Yf=Array.from(n),Zf=Object.fromEntries(Object.entries(r).map((([e,t])=>[e,{...t,index:Yf.indexOf(t.header)}])));const i=256;Xf=Object.fromEntries(am.flatMap(((e,t)=>e.flags.map(((n,r)=>[String.fromCharCode(i+16*t+r),{header:e.name,description:Nf(n),index:t,type:Jf.builtinMBS}]))))),Qf=Object.fromEntries(yd(512,1536).map(((e,t)=>{const n=String.fromCharCode(e),r=Math.floor(t/i);let o;switch(r){case 0:case 2:o=(0===r?0:16)+Math.floor(t%i/16);break;case 1:case 3:o=(1===r?0:16)+Math.floor(t%i/16)+32;break;default:throw new RangeError(`Index ${t} lies out of the [0, 2**10) range`)}return[n,{header:"<Empty>",type:Jf.customMBS,index:o}]})))}(),super(e,nm.screenParamsDefault,n),Df.add(this),this.activePreset={name:"<PLACEHOLDER>",ids:new Set},jf.set(this,0),this.presets=t,this.queueServer=new Set,this.idMapping={...xa(Zf),...xa(Xf),...xa(Qf)},document.body.appendChild(h("div",{id:tm.root,class:"HideOnPopup mbs-screen","screen-generated":this.screen,children:[p("style",{id:tm.styles,children:'#mbs-fwpreset {\n  grid-template: "delete header accept save exit" min(9vh, 4.5vw) "mid mid mid mid mid" auto/min(9vh, 4.5vw) auto min(9vh, 4.5vw) min(9vh, 4.5vw) min(9vh, 4.5vw);\n}\n\n#mbs-fwpreset-delete {\n  grid-area: delete;\n}\n\n#mbs-fwpreset-header {\n  grid-area: header;\n  margin-left: min(20vh, 10vw);\n}\n\n#mbs-fwpreset-accept {\n  grid-area: accept;\n}\n\n#mbs-fwpreset-save {\n  grid-area: save;\n}\n\n#mbs-fwpreset-exit {\n  grid-area: exit;\n}\n\n#mbs-fwpreset-mid-div {\n  display: grid;\n  grid-area: mid;\n  text-align: center;\n  grid-gap: min(2vh, 1vw);\n  grid-template: "name-header builtin-bc-header builtin-mbs-header custom-mbs-header" min(9vh, 4.5vw) "name builtin-bc builtin-mbs custom-mbs" auto/auto min-content min-content min-content;\n  justify-items: center;\n  justify-self: center;\n  width: 100%;\n}\n#mbs-fwpreset-mid-div > p {\n  text-wrap: nowrap;\n}\n\n#mbs-fwpreset-name-header {\n  grid-area: name-header;\n}\n\n#mbs-fwpreset-builtin-bc-header {\n  grid-area: builtin-bc-header;\n}\n\n#mbs-fwpreset-builtin-mbs-header {\n  grid-area: builtin-mbs-header;\n}\n\n#mbs-fwpreset-custom-mbs-header {\n  grid-area: custom-mbs-header;\n}\n\n.mbs-fwpreset-grid {\n  display: grid;\n  grid-gap: min(1.2vh, 0.6vw);\n  grid-auto-flow: column;\n  grid-template-rows: repeat(8, min(7vh, 3.5vw));\n  width: fit-content;\n}\n\n#mbs-fwpreset-name-div {\n  grid-area: name;\n}\n\n#mbs-fwpreset-name-input {\n  height: min(7vh, 3.5vw);\n  width: min(35vh, 17.5vw);\n}\n\n#mbs-fwpreset-name-dropdown-div {\n  height: min(7vh, 3.5vw);\n  position: relative;\n  text-wrap: auto;\n  top: 5%;\n  width: min(36vh, 18vw);\n}\n\n#mbs-fwpreset-builtin-bc-div {\n  grid-area: builtin-bc;\n  grid-template-columns: repeat(4, min(7vh, 3.5vw));\n}\n\n#mbs-fwpreset-builtin-mbs-div {\n  grid-area: builtin-mbs;\n  grid-template-columns: min(7vh, 3.5vw);\n}\n\n#mbs-fwpreset-custom-mbs-div {\n  grid-area: custom-mbs;\n  grid-template-columns: repeat(8, min(7vh, 3.5vw));\n}\n\n.mbs-fwpreset-color {\n  border: unset !important;\n  height: 84%;\n  left: 4%;\n  position: relative;\n  top: 4%;\n  width: 84%;\n}\n.mbs-fwpreset-color[data-color=red] {\n  background-color: red;\n}\n.mbs-fwpreset-color[data-color=green] {\n  background-color: green;\n}\n.mbs-fwpreset-color:focus {\n  filter: brightness(60%);\n}\n.mbs-fwpreset-color + .mbs-button-tooltip {\n  z-index: 2;\n}\n.mbs-fwpreset-color:focus + .mbs-button-tooltip {\n  visibility: visible;\n  z-index: 1;\n}\n\n.mbs-fwpreset {\n  border: min(0.3vh, 0.15vw) solid var(--mbs-border-color);\n  display: grid;\n  grid-template-columns: min(7vh, 3.5vw);\n  grid-template-rows: min(7vh, 3.5vw) auto;\n}\n.mbs-fwpreset h2 {\n  margin: 0;\n}\n.mbs-fwpreset ul {\n  margin: 0;\n  text-align: left;\n}\n.mbs-fwpreset:hover .mbs-fwpreset-color {\n  filter: brightness(60%);\n}\n.mbs-fwpreset:hover .mbs-button-tooltip {\n  visibility: visible;\n}'.toString()}),h("h1",{id:tm.header,children:["Wheel of Fortune preset ",this.index]}),h("div",{id:tm.delete,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:tm.deleteButton,style:{backgroundImage:"url('./Icons/Trash.png')"},onClick:this.deletePreset.bind(this),disabled:!0}),p("div",{class:"mbs-button-tooltip",id:tm.deleteTooltip,style:{justifySelf:"left"},children:"Delete the current preset"})]}),h("div",{id:tm.accept,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:tm.acceptButton,style:{backgroundImage:"url('./Icons/Accept.png')"},onClick:this.equipPreset.bind(this),disabled:!0}),p("div",{class:"mbs-button-tooltip",id:tm.acceptTooltip,style:{justifySelf:"right"},children:"Equip the current preset"})]}),h("div",{id:tm.save,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:tm.saveButton,style:{backgroundImage:"url('./Icons/Save.png')"},onClick:this.savePreset.bind(this)}),p("div",{class:"mbs-button-tooltip",id:tm.saveTooltip,style:{justifySelf:"right"},children:"Save the current preset"})]}),h("div",{id:tm.exit,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:tm.exitButton,style:{backgroundImage:"url('./Icons/Exit.png')"},onClick:()=>this.exit(!1)}),p("div",{class:"mbs-button-tooltip",id:tm.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),h("div",{id:tm.midDiv,children:[p("p",{id:tm.nameHeader,children:"Preset Name"}),p("p",{id:tm.builtinBCHeader,children:"Builtin BC Options"}),p("p",{id:tm.builtinMBSHeader,children:"Builtin MBS Options"}),p("p",{id:tm.customMBSHeader,children:"Custom MBS Options"}),h("div",{id:tm.nameDiv,children:[p("input",{type:"text",id:tm.nameInput,maxLength:20,onFocus:e=>e.target.select(),onInput:e=>this.activePreset.name=e.target.value}),h("div",{id:tm.nameDropdownDiv,class:"mbs-dropdown",onWheel:e=>this.index=ro(this.index+Math.sign(e.deltaY),0,this.presets.length-1),children:[p("button",{class:"mbs-button",id:tm.nameDropdown}),h("div",{class:"mbs-dropdown-content",id:tm.nameDropdownContent,children:[" ",Object.values(this.presets).map(((e,t)=>p("button",{class:"mbs-button mbs-dropdown-button",id:tm.nameDropdown+t.toString(),onClick:()=>this.index=t,children:`${t}: ${e?.name??"<Empty>"}`})))," "]})]})]}),p("div",{id:tm.builtinBCDiv,class:"mbs-fwpreset-grid",children:b(this,Df,"m",zf).call(this,Jf.builtinBC)}),p("div",{id:tm.builtinMBSDiv,class:"mbs-fwpreset-grid",children:b(this,Df,"m",zf).call(this,Jf.builtinMBS)}),p("div",{id:tm.customMBSDiv,class:"mbs-fwpreset-grid",children:b(this,Df,"m",zf).call(this,Jf.customMBS)})]})]}))}savePreset(){const e=this.presets[this.index],t={name:this.activePreset.name,ids:wR(Array.from(this.activePreset.ids).sort().join(""))};t.name===e?.name&&t.ids===e?.ids||(this.presets[this.index]=t,this.queueServer.add(Rm.SETTINGS),b(this,Df,"m",qf).call(this))}equipPreset(){const e=wR(Array.from(this.activePreset.ids).sort().join(""));Player.OnlineSharedSettings&&Player.OnlineSharedSettings.WheelFortune!==e&&(Player.OnlineSharedSettings.WheelFortune=e,this.queueServer.add(Rm.SHARED))}deletePreset(){null!==this.presets[this.index]&&(this.queueServer.add(Rm.SETTINGS),this.presets[this.index]=null,b(this,Df,"m",Uf).call(this))}load(){super.load(),b(this,Df,"m",Wf).call(this),b(this,Df,"m",Uf).call(this)}exit(e=!0){super.exit(),this.queueServer.size&&Cm(Array.from(this.queueServer),!0),this.exitScreens(e)}}function rm(e,t,n){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "item" type: '+typeof e);if(!Th(n))throw new TypeError('Invalid "indices" type: '+typeof n);if(null===t||"object"!=typeof t)throw new TypeError('Invalid "character" type: '+typeof t);if(!t.IsSimple()&&!t.IsPlayer())throw new Error("Expected a simple or player character");const r=t.Appearance.find((e=>"HairFront"===e.Asset.Group.Name));if(void 0===r)return;const i=Math.max(0,...n);let o;"string"==typeof e.Color?e.Color=o=Ph([e.Color],i,"Default"):Array.isArray(e.Color)&&0!==e.Color.length?o=e.Color:e.Color=o=Array(i).fill("Default"),"string"==typeof r.Color?n.forEach((e=>o[e]=r.Color)):Array.isArray(r.Color)&&r.Color.length>=1&&n.forEach((e=>o[e]=r.Color[0]))}function im(e,t){if(null===t||"object"!=typeof t)throw new TypeError('Invalid "character" type: '+typeof t);if(!t.IsSimple()&&!t.IsPlayer())throw new Error("Expected a simple or player character");if(SR(t)){!function(e,t,n){if(!Th(e))throw new TypeError('Invalid "groupNames" type: '+typeof e);if("string"!=typeof n)throw new TypeError('Invalid "color" type: '+typeof e);for(const r of e){const e=InventoryGet(t,r);null!=e&&(e.Color=Array(e.Asset.ColorableLayerCount).fill(n))}}(["HairAccessory1","HairAccessory2","HairAccessory3","HairBack","HairFront","BodyUpper","BodyLower","Wings","TailStraps","Nipples","Blush","Mouth"],t,"#484747")}return e}let om,am,sm,lm,um;jf=new WeakMap,Df=new WeakSet,Wf=function(){const e=[...Player.MBSSettings.FortuneWheelItemSets,...Player.MBSSettings.FortuneWheelCommands];for(const[t,n]of e.entries()){let e=512;if(e+=t<32?t>=16?16*(16+t):16*t:t>=48?16*t:16*(16+t),n instanceof _R)for(const[t,r]of n.flags.entries()){const i=String.fromCharCode(e+t);this.idMapping[i].description=Nf(r),this.idMapping[i].header=n.name}else if(n instanceof $R){const t=String.fromCharCode(e);this.idMapping[t].header=n.name,delete this.idMapping[t].description}else for(const t of yd(16)){const n=String.fromCharCode(e+t);this.idMapping[n].header="<Empty>",delete this.idMapping[n].description}}},Gf=function(e,t,n,r){const i=e.toString();return h("div",{id:r.root+i,class:"mbs-fwpreset",children:[p("button",{id:r.color+i,class:"mbs-fwpreset-color","data-color":"red",onClick:e=>e.target.focus()}),h("div",{id:r.tooltip+i,class:"mbs-button-tooltip",style:{justifySelf:n},children:[p("h2",{id:r.tooltipHeader+i,"data-prefix":t??""}),p("ul",{id:r.tooltipList+i})]})]})},zf=function(e){let t,n,r;const i=b(this,Df,"m",Vf).call(this,e);switch(e){case Jf.builtinBC:t=Yf,n="left";break;case Jf.builtinMBS:t=am,n="center";break;case Jf.customMBS:t=[...Player.MBSSettings.FortuneWheelItemSets,...Player.MBSSettings.FortuneWheelCommands],n="right",r=(e,t)=>t>=RR?`Command Set ${t-32}: `:`Item Set ${t}: `;break;default:throw new Error(`Unknown type: ${e}`)}return t.map(((e,t)=>b(this,Df,"m",Gf).call(this,t,r?.(e,t),n,i)))},Vf=function(e){switch(e){case Jf.builtinBC:return{root:tm.builtinBC,color:tm.builtinBCColor,tooltip:tm.builtinBCTooltip,tooltipHeader:tm.builtinBCTooltipHeader,tooltipList:tm.builtinBCTooltipList};case Jf.builtinMBS:return{root:tm.builtinMBS,color:tm.builtinMBSColor,tooltip:tm.builtinMBSTooltip,tooltipHeader:tm.builtinMBSTooltipHeader,tooltipList:tm.builtinMBSTooltipList};case Jf.customMBS:return{root:tm.customMBS,color:tm.customMBSColor,tooltip:tm.customMBSTooltip,tooltipHeader:tm.customMBSTooltipHeader,tooltipList:tm.customMBSTooltipList};default:throw new Error(`Unknown type: ${e}`)}},qf=function(){const e=this.presets[b(this,jf,"f")],t=document.getElementById(tm.nameInput),n=document.getElementById(tm.nameDropdown),r=document.getElementById(`${tm.nameDropdown}${this.index}`);t.placeholder=`Preset ${this.index}`,r.innerText=n.innerText=`${b(this,jf,"f")}: ${this.activePreset.name}`;const i=document.getElementById(tm.deleteButton),o=document.getElementById(tm.deleteTooltip),a=document.getElementById(tm.acceptButton),s=document.getElementById(tm.acceptTooltip),l=document.getElementById(tm.header);null===e?(t.value="",i.disabled=!0,a.disabled=!0,o.innerText="Delete the current preset:\nunsaved preset",s.innerText="Equip the current preset:\nunsaved preset",l.innerText=`Wheel of Fortune preset ${this.index} (unsaved)`):(t.value=e.name,i.disabled=!1,a.disabled=!1,o.innerText="Delete the current preset",s.innerText="Equip the current preset",l.innerText=`Wheel of Fortune preset ${this.index}`)},Uf=function(){const e=this.presets[b(this,jf,"f")];this.activePreset=null!==e?{name:e.name,ids:new Set(e.ids)}:{name:"<Empty>",ids:new Set(Player.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault)},b(this,Df,"m",qf).call(this);const t={[Jf.builtinBC]:{},[Jf.builtinMBS]:{},[Jf.customMBS]:{}};for(const[e,{type:n,index:r,description:i,header:o}]of Object.entries(this.idMapping)){const a=this.activePreset.ids.has(e),s=t[n][r]??={header:o,enabled:a,description:[]};s.enabled||=a,i&&a&&s.description.push(i)}for(const e of Object.values(Jf)){const n=b(this,Df,"m",Vf).call(this,e);for(const[r,i]of Object.entries(t[e])){document.getElementById(`${n.color}${r}`).dataset.color=i.enabled?"green":"red";const e=document.getElementById(`${n.tooltipHeader}${r}`);e.innerText=(e.dataset.prefix??"")+i.header;const t=document.getElementById(`${n.tooltipList}${r}`);t.innerHTML="";for(const e of i.description)t.appendChild(p("li",{children:e}))}}},nm.background="Sheet",nm.screen=`MBS_${nm.name}`,nm.ids=tm,nm.screenParamsDefault={[em]:Object.freeze({shape:[80,60,1840,880],visibility:"visible"})};class cm extends uf{constructor(){super(null,"WheelFortune","MiniGame",{Run:WheelFortuneRun,Click:WheelFortuneClick,Exit:WheelFortuneExit,Load:()=>{CommonSetScreen("MiniGame","WheelFortune"),WheelFortuneLoad()}}),this.character=Player,this.FortuneWheelItemSets=Array(RR).fill(null),this.FortuneWheelCommands=Array(RR).fill(null),this.weightedIDs=this.character.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault}initialize(){if(null==WheelFortuneCharacter)throw new Error("Cannot load the fortune wheel UI while `WheelFortuneCharacter == null`");WheelFortuneOption=[...sm],WheelFortuneDefault=lm,this.character=WheelFortuneCharacter,this.FortuneWheelItemSets=If(WheelFortuneCharacter,"FortuneWheelItemSets","item sets"),this.FortuneWheelCommands=If(WheelFortuneCharacter,"FortuneWheelCommands","commands"),this.weightedIDs=function(e){const t=Array.from(e).flatMap((e=>{const t=WheelFortuneOption.find((t=>t.ID===e));return void 0===t?[]:Array(t.Weight??1).fill(e)}));if(0===t.length)return Array.from(e.length>0?e:WheelFortuneDefault).sort(Math.random).join();const n=[];for(;n.length<50;)n.push(...Td(t,Math.random));return n.join("")}(this.character.OnlineSharedSettings?.WheelFortune??WheelFortuneDefault)}}function dm(){if(um.initialize(),null!=TextScreenCache)for(const{Description:e,Custom:t,ID:n}of WheelFortuneOption)void 0!==e&&(TextScreenCache.cache[`Option${n}`]=t?`*${e}`:e)}cm.screen="WheelFortune",Mh(CR).then((()=>{const e={exit:[1830,60,90,90],roll:[1720,60,90,90],select:[1610,60,90,90],preset:[1500,60,90,90]};if(kh.log("Initializing wheel of fortune hooks"),!function(){const e=String.fromCharCode(256),t=WheelFortuneOption.find((t=>void 0===t.Custom&&t.ID>=e));return void 0===t||(kh.warn("Aborting wheel of fortune hook initialization: Found one or more builtin wheel of fortune option-IDs outside of the extended ASCII range",t),!1)}())return;const t={'DrawTextWrap(TextGet((WheelFortuneVelocity == 0) ? (WheelFortuneForced ? "Forced" : "Title") : "Wait"), 1375, 200, 550, 200, "White");':";"};"E9E5F3D6"===Eh.getOriginalHash("WheelFortuneRun")?(t['DrawButton(1770, 25, 90, 90, "", BackColor, "Icons/Random.png", TextGet("Random"));']=";",t["DrawButton(1885, 25, 90, 90"]=`DrawButton(${e.exit.join(", ")}`):t['DrawButton(1720, 60, 90, 90, "", BackColor, "Icons/Random.png", TextGet("Random"));']=";";const n={};"16991349"===Eh.getOriginalHash("WheelFortuneClick")&&(n["MouseIn(1885, 25, 90, 90)"]=`MouseIn(${e.exit.join(", ")})`,n["MouseIn(1770, 25, 90, 90)"]=`MouseIn(${e.roll.join(", ")})`),Eh.patchFunction("WheelFortuneRun",t),Eh.patchFunction("WheelFortuneClick",n),Eh.hookFunction("WheelFortuneLoad",11,((e,t)=>(dm(),t(e)))),Eh.hookFunction("WheelFortuneCustomizeLoad",0,((e,t)=>{if(null!=TextScreenCache)for(const{Description:e,Custom:t,ID:n}of WheelFortuneOption)void 0!==e&&(TextScreenCache.cache[`Option${n}`]=t?`*${e}`:e);return t(e)})),Eh.hookFunction("WheelFortuneRun",0,((t,n)=>{const r=Player.MBSSettings.RollWhenRestrained||!Player.IsRestrained();r||(WheelFortuneForced=!1),n(t);const i=0===WheelFortuneVelocity,o=i?"White":"Silver",a=WheelFortuneCharacter?.Nickname??WheelFortuneCharacter?.Name,s=WheelFortuneCharacter?.IsPlayer()?"MBS: Configure custom options":`MBS: View ${a}'s option config`;DrawButton(...e.select,"",o,"Icons/Crafting.png",s,!i);const l=!(0!==WheelFortuneVelocity||!WheelFortuneCharacter?.IsPlayer()),u=l?"White":"Silver",c=WheelFortuneCharacter?.Nickname??WheelFortuneCharacter?.Name,d=WheelFortuneCharacter?.IsPlayer()?"MBS: Configure option presets":`MBS: View ${c}'s option presets`;DrawButton(...e.preset,"",u,"Icons/Crafting.png",d,!l);const p=0==WheelFortuneVelocity&&r?"White":"Silver";DrawButton(...e.roll,"",p,"Icons/Random.png",r?TextGet("Random"):"MBS: Cannot spin while restrained",!r);let h="";h=0!==WheelFortuneVelocity?TextGet("Wait"):r?WheelFortuneForced?TextGet("Forced"):TextGet("Title"):"MBS: Cannot spin the wheel of fortune while restrained",DrawTextWrap(h,1375,200,550,200,"White")})),Eh.hookFunction("WheelFortuneClick",0,((t,n)=>{if(Player.MBSSettings.RollWhenRestrained||!Player.IsRestrained()||(WheelFortuneForced=!1,!MouseIn(...e.roll))){if(0===WheelFortuneVelocity&&MouseIn(...e.select)){const e={FortuneWheelItemSets:um.FortuneWheelItemSets,FortuneWheelCommands:um.FortuneWheelCommands};um.loadChild(_f,e,um.character)}else 0===WheelFortuneVelocity&&MouseIn(...e.preset)&&WheelFortuneCharacter?.IsPlayer()&&um.loadChild(nm,WheelFortuneCharacter.MBSSettings.FortuneWheelPresets);return n(t)}})),Eh.hookFunction("WheelFortuneMouseUp",11,((e,t)=>{!Player.MBSSettings.RollWhenRestrained&&Player.IsRestrained()||t(e)})),Eh.hookFunction("WheelFortuneMouseDown",11,((e,t)=>{!Player.MBSSettings.RollWhenRestrained&&Player.IsRestrained()||t(e)}));const r="undefined"!=typeof WheelFortuneDrawWheel?"WheelFortuneDrawWheel":"WheelFortuneDraw";Eh.hookFunction(r,11,(([e,...t],n)=>n([um.weightedIDs,...t]))),um=new cm,Mh(BR).then((()=>{kh.log("Initializing wheel of fortune module"),om=function(){const e=Dh(Nh({leash_candy:[{Name:"ReverseBunnySuit",Group:"Suit",ItemCallback:(e,t)=>rm(e,t,[0,1])},{Name:"Catsuit",Group:"SuitLower",ItemCallback:(e,t)=>rm(e,t,[0,1])},{Name:"FaceVeil",Group:"Mask",Color:["#000","Default"],ItemCallback:(e,t)=>rm(e,t,[1])},{Name:"FuturisticMittens",Group:"ItemHands",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Mittens"},ItemCallback:(e,t)=>rm(e,t,[0,1])},{Name:"InteractiveVRHeadset",Group:"ItemHead",TypeRecord:{b:3,f:3,g:1},Craft:{Property:"Secure",Name:"Permanent PSO Headset"},ItemCallback:(e,t)=>rm(e,t,[0])},{Name:"LargeDildo",Group:"ItemMouth",Craft:{Property:"Secure",Name:"Permanent PSO Dildo",Description:"Specially made to fill a PSOs mouth and throat"}},{Name:"LatexBallMuzzleGag",Group:"ItemMouth2",Craft:{Property:"Secure",Name:"Permanent PSO Muzzle",Description:"Forcing the dildo in and keeping it secure"}},{Name:"FuturisticMuzzle",Group:"ItemMouth3",TypeRecord:{n:1,h:0,s:3},Craft:{Property:"Secure",Name:"Permanent PSO Muzzle",Description:"Keeping your cries muffled"},ItemCallback:(e,t)=>rm(e,t,[3])},{Name:"FuturisticVibrator",Group:"ItemVulva",TypeRecord:{vibrating:9},Craft:{Property:"Secure",Name:"Permanent PSO Vibe",Description:"Specially made to fill a PSO"}},{Name:"SciFiPleasurePanties",Group:"ItemPelvis",TypeRecord:{c:3,i:4,o:1,s:2},Craft:{Property:"Secure",Name:"Permanent PSO Panties",Description:"No escape and no Orgasms"},ItemCallback:(e,t)=>rm(e,t,[0,2,4,5])},{Name:"BonedNeckCorset",Group:"ItemNeck",Color:["#222222","#888888","#AA2121","#AA2121","#888888"],TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Permanent PSO Collar"},ItemCallback:(e,t)=>rm(e,t,[2,3])},{Name:"CollarChainShort",Group:"ItemNeckRestraints",Craft:{Property:"Secure",Name:"Permanent PSO Chain",Description:"To keep a PSO on their knees"},Property:{OverridePriority:7},ItemCallback:(e,t)=>rm(e,t,[0])},{Name:"StrictLeatherPetCrawler",Group:"ItemArms",Craft:{Property:"Secure",Name:"Permanent PSO Suit",Description:"Extra tight and unremovable"}},{Name:"HeavyLatexCorset",Group:"ItemTorso",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Corset",Description:"Extra tight and specially molded"}},{Name:"FuturisticHarness",Group:"ItemTorso2",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Harness",Description:"Special harness that constantly shrinks...."},Property:{OverridePriority:23},ItemCallback:(e,t)=>rm(e,t,[0,1,2])},{Name:"FuturisticEarphones",Group:"ItemEars",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Earphones"},Color:["#0F0F0F","Default","Default"],ItemCallback:(e,t)=>rm(e,t,[1])},{Name:"CeilingChain",Group:"ItemAddon",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Permanent PSO Chain",Description:"Never to escape"},ItemCallback:(e,t)=>rm(e,t,[0])},{Name:"RoundPiercing",Group:"ItemNipplesPiercings",TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Permanent PSO Piercings"},Color:["#000000","Default","Default"],ItemCallback:(e,t)=>rm(e,t,[1,2])},{Name:"CollarAutoShockUnit",Group:"ItemNeckAccessories",TypeRecord:{s:2,y:0},Craft:{Property:"Secure",Name:"Permanent PSO Shock Unit"}},{Name:"FrogtieStraps",Group:"ItemLegs",Craft:{Property:"Secure",Name:"Permanent PSO Straps",Description:"To keep a PSO on their knees"},ItemCallback:(e,t)=>rm(e,t,[2])},{Name:"DroneMask",Group:"ItemHood",TypeRecord:{m:0,e:0,p:1,g:0,s:1,h:2,j:0},Craft:{Property:"Thin",Name:"Permanent PSO Mask"},ItemCallback:(e,t)=>rm(e,t,[2])}],mummy:[{Name:"DuctTape",Group:"ItemFeet",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{rm(e,t,[0]);const n=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],r=(n?.options??[]).map((e=>e.Property.TypeRecord));0!==r.length&&zh(e,t,Md(r)??{})}},{Name:"DuctTape",Group:"ItemLegs",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{rm(e,t,[0]);const n=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],r=(n?.options??[]).map((e=>e.Property.TypeRecord));0!==r.length&&zh(e,t,Md(r)??{})}},{Name:"DuctTape",Group:"ItemHands",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>rm(e,t,[0])},{Name:"DuctTape",Group:"ItemArms",TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{rm(e,t,[0]);const n=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],r=(n?.options??[]).map((e=>e.Property.TypeRecord));0!==r.length&&zh(e,t,Md(r)??{})}},{Name:"LargeDildo",Group:"ItemMouth",Craft:{Property:"Large",Name:"Rubber Mouth Sealant",Description:"A rubber mass molded to shape of your mouth"}},{Name:"DuctTape",Group:"ItemMouth2",TypeRecord:{typed:0},Craft:{Property:"Large",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},ItemCallback:(e,t)=>{rm(e,t,[0]);const n=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],r=(n?.options??[]).map((e=>e.Property.TypeRecord));r.length<2||zh(e,t,Md(r.slice(1))??{})}},{Name:"DuctTape",Group:"ItemMouth3",TypeRecord:{typed:0},Craft:{Property:"Large",Name:"Mummy Wrappings",Description:"A bundle of resilient cloth wrappings"},Equip:()=>Math.random()>.5,ItemCallback:(e,t)=>{rm(e,t,[0]);const n=TypedItemDataLookup[`${e.Asset.Group.Name}${e.Asset.Name}`],r=(n?.options??[]).map((e=>e.Property.TypeRecord));0!==r.length&&zh(e,t,Md(r)??{})}}],maid:[{Name:"LaceBands",Group:"Bracelet",Color:["#aaaaaa","#151515"]},{Name:"MaidOutfit2",Group:"Cloth",Color:["#0C0C0C","#919194","#9C9C9F"]},{Name:"CatsuitCollar",Group:"ClothAccessory",Color:["#0E0E0E"]},{Name:"MaidHairband1",Group:"Hat",Color:["#979797"]},{Name:"Socks6",Group:"Socks",Color:["#0D0D0D","#919194"]},{Name:"HeartTop",Group:"Bra",Color:["#0E0E0E"]},{Name:"FuturisticHeels2",Group:"Shoes",Color:["#101010","Default","#F1FAFF","#898989","#898989"],TypeRecord:{typed:1}},{Name:"MaidCollar",Group:"ItemNeck",Color:["#DCDCDC","#1B1B1B","Default"],Craft:{Property:"Secure",Name:"Maid Collar",Description:"A tight fitting yet comfortable collar"}},{Name:"FuturisticMittens",Group:"ItemHands",Color:["#FFFFFF","#FFFFFF","#2E2E2E","#050505"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Maid Mittens",Description:"For keeping a maid out of trouble"}},{Name:"FuturisticHeels2",Group:"ItemBoots",Color:["#101010","#101010","Default","#F1FAFF","#898989","#898989","#898989"],TypeRecord:{typed:1},Craft:{Property:"Secure",Name:"Maid Heels",Description:"For keeping a maid on their toes"}},{Name:"WiredEgg",Group:"ItemVulva",Color:["Default","#141414"],TypeRecord:{vibrating:1},Craft:{Property:"Arousing",Name:"Maid Teaser",Description:"A little reminder to keep a maid on edge"},Property:{OverridePriority:21}},{Name:"StraitLeotard",Group:"ItemArms",Color:["#FFFFFF","#1A1A1A","#FFFFFF"],TypeRecord:{cl:1,co:1,np:0,vp:0},Craft:{Property:"Secure",Name:"Maid Jacket",Description:"For keeping a maid out of trouble"}},{Name:"LeatherAnkleCuffs",Group:"ItemFeet",Color:["#969696","#191919","#969696"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Maid Cuffs",Description:"For keeping a maid out of trouble"}},{Name:"BallGag",Group:"ItemMouth",TypeRecord:{typed:2},Craft:{Property:"Large",Name:"Maid Silencer",Description:"Silence is golden"}}],statue:[{Name:"ReverseBunnySuit",Group:"SuitLower",Color:["#1B1B1B"],Equip:e=>SR(e)},{Name:"SeamlessCatsuit",Group:"SuitLower",Color:["#484747"],Equip:e=>!SR(e)},{Name:"SeamlessCatsuit",Group:"Suit",Color:["#484747"],Equip:e=>!SR(e)},{Name:"ReverseBunnySuit",Group:"Cloth",Color:["#1B1B1B","#1B1B1B"]},{Name:"BondageSkirt",Group:"ClothLower",Color:["#484747","#333333","#333333"]},{Name:"CatsuitCollar",Group:"ClothAccessory",Color:["#484747"]},{Name:"HighCollar",Group:"ItemNeck",Color:["#363636","#717171"],Craft:{Property:"Secure",Name:"Statue Neck"}},{Name:"LargeDildo",Group:"ItemMouth",Color:["#333333"],Craft:{Property:"Large",Name:"Mouth Sealant"},Property:{OverridePriority:27}},{Name:"LatexPostureCollar",Group:"ItemMouth2",Color:["Default"],Craft:{Property:"Large",Name:"Mouth Sealant"},Property:{OverridePriority:28}},{Name:"LatexBallMuzzleGag",Group:"ItemMouth3",Color:["#A1A1A1"],Craft:{Property:"Large",Name:"Mouth Sealant"}},{Name:"KirugumiMask",Group:"ItemHood",Color:["#484747","#484747","#484747","#484747"],TypeRecord:{e:0,m:3,b:0,br:0,op:0,ms:0},Craft:{Property:"Secure",Name:"Statue's Visage"}},{Name:"MonoHeel",Group:"ItemBoots",Color:["#737070","#737070","#101010"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Statue Base"}},{Name:"FuturisticMittens",Group:"ItemHands",Color:["#767676","#5F5F5F","#3C3C3C","#4F4F4F"],TypeRecord:{typed:0},Craft:{Property:"Secure",Name:"Statue Hands"}},{Name:"SmoothLeatherArmbinder1",Group:"ItemArms",Color:["#191919","#3D3D3D","#191919","#191919","#191919"],Craft:{Property:"Secure",Name:"Statue Arms"}}]}).map((([e,t])=>{const n=Object.freeze(t.map((t=>{let n;if(null!==t.Craft&&"object"==typeof t.Craft){const r=AssetGet(Player.AssetFamily,t.Group,t.Name);if(null==r)throw new Error(`Invalid ${e} item: ${t.Group}${t.Name}`);n={...t.Craft,Item:t.Name,Private:!0,Lock:"",TypeRecord:void 0,Name:t.Craft.Name||r.Description,MemberNumber:void 0,MemberName:""},CraftingValidate(n,r,!1)}return Object.freeze({...t,Custom:!1,Property:Object.freeze(t.Property??{}),TypeRecord:t.TypeRecord,Craft:Object.freeze(n),Color:t.Color,ItemCallback:t.ItemCallback,Equip:t.Equip})})));return[e,n]})));return Object.freeze(e)}(),am=Object.freeze([new _R("PSO Bondage",om.leash_candy,Player.MBSSettings.FortuneWheelItemSets,qh.UNDERWEAR,qh.UNDERWEAR,Af(Ff.map(ka),[0,1,2,3,4,5]),!1),new _R("Mummification",om.mummy,Player.MBSSettings.FortuneWheelItemSets,qh.CLOTHES,qh.UNDERWEAR,Af(Ff.map(ka),[3]),!1),new _R("Bondage Maid",om.maid,Player.MBSSettings.FortuneWheelItemSets,qh.UNDERWEAR,qh.UNDERWEAR,Af(Ff.map(ka),[0,1,2,3]),!1),new _R("Petrification",om.statue,Player.MBSSettings.FortuneWheelItemSets,qh.UNDERWEAR,qh.UNDERWEAR,Af(Ff.map(ka),[0,1,2,3]),!1,im)]),am.forEach((e=>e.register(!1))),sm=Object.freeze(WheelFortuneOption.filter((e=>!e.Custom))),lm=WheelFortuneDefault,Cm([Rm.SHARED])})),"WheelFortune"===CurrentScreen&&dm()}));const pm=80,hm=160;Mh(CR).then((()=>{kh.log("Initializing crafting hooks"),Eh.patchFunction("CraftingClick",{"if (CraftingOffset < 0) CraftingOffset = 80 - 20;":"if (CraftingOffset < 0) CraftingOffset = 160 - 20;","if (CraftingOffset >= 80) CraftingOffset = 0;":"if (CraftingOffset >= 160) CraftingOffset = 0;"}),Eh.patchFunction("CraftingRun",{"/ ${80 / 20}.":"/ 8."}),Mh(BR).then((()=>{kh.log("Initializing crafting cache"),Eh.hookFunction("CraftingSaveServer",0,((e,t)=>{const n=Player.Crafting;Player.Crafting=n?.slice(0,pm),t(e),Player.Crafting=n;const r=null==(i=Player.Crafting?Player.Crafting.slice(pm):null)?"":i.map((e=>e?.Item?CraftingSerialize(e):"")).join(CraftingSerializeItemSep);var i;r!=Player.MBSSettings.CraftingCache&&(Player.MBSSettings.CraftingCache=r,Cm([Rm.SETTINGS]))})),function(e,t){if(e.Crafting??=[],Ph(e.Crafting,pm,null),!t)return;const n=LZString.compressToUTF16(t),r=CraftingDecompressServerData(n),i=new Set(e.Crafting.map((e=>JSON.stringify(e))));let o=!1;for(const[e,t]of r.entries())if(null!=t)e:switch(CraftingValidate(t)){case CraftingStatusType.OK:{const n=JSON.stringify(t);i.has(n)&&(kh.warn(`Filtering duplicate crafting item ${pm+e}: "${t.Name} (${t.Item})"`),r[e]=null);break e}case CraftingStatusType.ERROR:{const n=JSON.stringify(t);i.has(n)?(kh.warn(`Filtering duplicate crafting item ${pm+e}:"${t.Name} (${t.Item})"`),r[e]=null):o=!0;break e}case CraftingStatusType.CRITICAL_ERROR:kh.error(`Removing corrupt crafting item ${pm+e}: "${t?.Name} (${t?.Item})"`),r[e]=null}for(const t of r)if(e.Crafting.length>=hm){if(null==t)continue;if(e.Crafting.includes(null,pm))kh.warn("Found more than 160 crafting items, trimming down [80, 160)-interval null entries"),e.Crafting=e.Crafting.filter(((e,t)=>t<pm||null!=e));else{if(!e.Crafting.includes(null)){const t=e.Crafting.length-hm;kh.error(`Found more than 160 crafting items, the last ${t} will be deleted`);break}kh.warn("Found more than 160 crafting items, trimming down [0, 80)-interval null entries"),e.Crafting=e.Crafting.filter((e=>null!=e))}}else e.Crafting.push(t);o&&e.IsPlayer()&&CraftingSaveServer()}(Player,Player.MBSSettings.CraftingCache)}))}));const fm=18e4;function mm(e){const t=[],n=CommonIsObject(e)?e:{};for(const[e,r]of Object.entries(n))try{const n=JSON.stringify(r??"");t.push([e,(new TextEncoder).encode(n).byteLength])}catch{t.push([e,NaN])}return Object.fromEntries(t.sort((([e,t],[n,r])=>{t=Math.round(t/100),r=Math.round(r/100);const i=Number.isNaN(t),o=Number.isNaN(r);return t===r||i&&o?e.localeCompare(n):i||o?o?-1:1:r-t})))}function gm(e){return Math.round(e/100)/10}const Rm=Object.freeze({SETTINGS:0,SHARED:1});function vm(){const e=function(){const e=Hh.fromVersion(t),n=`#v${e.major}${e.minor}${e.micro}`;return e.beta?["blob/devel",""]:["blob/main",n]}();return`https://github.com/bananarama92/MBS/${e[0]}/CHANGELOG.md${e[1]}`}function ym(e,t,n){Array.isArray(t)?t.length>RR&&(xh(t,RR),n.push([`Trimming too long wheel of fortune item list: ${t.length}/${RR}`])):(t=[],n.push(["Re-initializing invalid wheel of fortune item list: "+typeof t]));const r=Object.seal(Array(RR).fill(null));return t.forEach(((t,i)=>{if(null!==t)try{(r[i]=e(r,t)).register(!1)}catch(e){n.push([`Failed to load corrupted custom wheel of fortune item ${i}`,e])}})),r}function bm(e,t){Array.isArray(e)?e.length>vR&&(xh(e,vR),t.push([`Trimming too long wheel of fortune preset list: ${e.length}/${vR}`])):(e=[],t.push(["Re-initializing invalid wheel of fortune preset list: "+typeof e]));const n=Object.seal(Array(vR).fill(null));return e.forEach(((e,r)=>{if(null===e)return;if(Array.isArray(e)||"object"!=typeof e||"string"!=typeof e.ids)return void t.push([`Failed to load corrupted custom wheel of fortune preset ${r}`]);const{name:i,ids:o}=e;n[r]={name:"string"==typeof i&&i.length>0&&i.length<=20?i:`Preset ${r}`,ids:o}})),n}function Sm(e,t,n=!0){let r=null;try{if(e&&"string"==typeof e){let t=LZString.decompressFromUTF16(e);t||(t=LZString.decompressFromBase64(e)),r=JSON.parse(t||"null")}}catch(e){n&&kh.warn(`failed to load corrupted MBS ${t}`,e)}return null!==r&&"object"==typeof r?r:{}}function wm(e=null,n=!0){if(void 0===Player.OnlineSharedSettings)throw new Error('"Player.OnlineSharedSettings" still uninitialized');e??={...Sm(Player.OnlineSettings?.MBS,"OnlineSettings"),...Sm(Player.ExtensionSettings.MBS,"ExtensionSettings"),...Sm(Player.OnlineSharedSettings.MBS,"OnlineSharedSettings")},void 0!==e.Version&&function(e){if(void 0===e)return kh.log("Detecting first-time MBS initialization"),!1;const n=Hh.fromVersion(t);let r;try{r=Hh.fromVersion(e)}catch(t){return kh.warn(`Failed to parse previous MBS version: ${e}`),!1}return n.greater(r)?(kh.log(`Upgrading MBS from ${e} to ${t}`),!0):!!n.lesser(r)&&(kh.warn(`Downgrading MBS from ${e} to ${t}`),!1)}(Player.OnlineSharedSettings.MBSVersion??Player.OnlineSettings?.MBSVersion)&&function(){const e=`New MBS version detected: ${t}\n\nSee below for the updated changelog:\n${vm()}`;"number"==typeof Player.MemberNumber&&ServerAccountBeep({MemberNumber:Player.MemberNumber,MemberName:"MBS",ChatRoomName:"MBS Changelog",Private:!0,Message:e,ChatRoomSpace:"",BeepType:""})}();let r=!1;void 0!==Player.OnlineSettings?.MBSVersion&&(delete Player.OnlineSettings.MBSVersion,r=!0),Player.OnlineSettings?.MBS&&(delete Player.OnlineSettings.MBS,r=!0),r&&ServerAccountUpdate.QueueData({OnlineSettings:Player.OnlineSettings});const i=function(e){const n={Version:[],CraftingCache:[],FortuneWheelItemSets:[],FortuneWheelCommands:[],FortuneWheelPresets:[],LockedWhenRestrained:[],RollWhenRestrained:[]},r={CraftingCache:"",LockedWhenRestrained:!1,RollWhenRestrained:!0};for(const[t,i]of Nh(r))void 0!==e[t]&&(typeof e[t]!=typeof i?n[t]=[[`Invalid type, expected a ${typeof i}: ${typeof n[t]}`]]:r[t]=e[t]);return{settings:{Version:t,CraftingCache:r.CraftingCache,FortuneWheelItemSets:ym(_R.fromObject,e.FortuneWheelSets??e.FortuneWheelItemSets??[],n.FortuneWheelItemSets),FortuneWheelCommands:ym($R.fromObject,e.FortuneWheelCommands??[],n.FortuneWheelCommands),FortuneWheelPresets:bm(e.FortuneWheelPresets??[],n.FortuneWheelPresets),LockedWhenRestrained:r.LockedWhenRestrained,RollWhenRestrained:r.RollWhenRestrained},ok:0===Kd(Object.values(n).map((e=>e.length))),err:Dh(Nh(n).filter((([e,t])=>t.length>0)))}}(e);return(i.ok||n)&&(Player.MBSSettings=i.settings),i.ok||(kh.warn("Encountered and fixed one or more errors while parsing MBS settings",i.err),n&&function(e){const t=Dh(Nh(e).map((([e,t])=>[e,t.map((e=>e.join(", ")))]))),n=`Encountered one or more errors while parsing MBS settings:\n\n${JSON.stringify(t,void 0,4)}`;"number"==typeof Player.MemberNumber&&ServerAccountBeep({MemberNumber:Player.MemberNumber,MemberName:"MBS",ChatRoomName:"MBS Settings Error",Private:!0,Message:n,ChatRoomSpace:"",BeepType:""})}(i.err)),Player.OnlineSharedSettings.WheelFortune??=WheelFortuneDefault,i}function Cm(e,n=!0){if(void 0===Player.OnlineSharedSettings)throw new Error("Player.OnlineSharedSettings is still uninitialized");const r={};if(e.includes(Rm.SETTINGS)){const e=gc(Player.MBSSettings,"FortuneWheelItemSets","FortuneWheelCommands");Player.ExtensionSettings.MBS=LZString.compressToUTF16(JSON.stringify(e)),n&&(r["ExtensionSettings.MBS"]=Player.ExtensionSettings.MBS)}if(e.includes(Rm.SHARED)){const e=Object.freeze({FortuneWheelItemSets:Player.MBSSettings.FortuneWheelItemSets,FortuneWheelCommands:Player.MBSSettings.FortuneWheelCommands});Player.OnlineSharedSettings.MBS=LZString.compressToUTF16(JSON.stringify(e)),Player.OnlineSharedSettings.MBSVersion=t,n&&(Player.OnlineSharedSettings.WheelFortune=wR(Player.OnlineSharedSettings.WheelFortune),r.OnlineSharedSettings=Player.OnlineSharedSettings)}n&&ServerAccountUpdate.QueueData(r)}function km(){const e=["ExtensionSettings","OnlineSharedSettings"];for(const t of e){const e=mm(Player[t]),n=Object.fromEntries(Object.entries(e).map((([e,t])=>[e,gm(t)]))),r=gm(Kd(Object.values(e),(e=>Number.isNaN(e)?0:e)));r>=.9*fm/1e3?kh.warn(`Total ${t} data usage at ${r} / ${fm/1e3} KB`,n):kh.log(`Total ${t} data usage at ${r} / ${fm/1e3} KB`,n)}}const Bm=Object.freeze({OK:0,ERROR:1,EMPTY_SETTINGS:2,WARN:3});Mh(kR).then((()=>{wm(),Cm([Rm.SETTINGS,Rm.SHARED],!1),kh.log("Initializing settings module"),km()}));var Pm={Blush:"R98"},xm={Large:"R98",Normal:"R98",Small:"R98",XLarge:"R98"},Im={WombTattoos:"R101"},Mm={FlatMedium:"R98",FlatSmall:"R98",Large:"R98",Normal:"R98",Small:"R98",XLarge:"R98"},Em={Bandeau1:"R98",Bikini1:"R98",BondageBra1:"R98",Bra1:"R98",Bra10:"R98",Bra2:"R98",Bra7:"R98",Bra8:"R98",Bra9:"R98",BunnySuit:"R98",Bustier1:"R98",Camisole:"R98",ChineseBra1:"R98",ClamShell:"R98",CoconutBra:"R98",CorsetBikini1:"R98",CowPrintedBra:"R98",CuteBikini1:"R98",DominatrixLeotard:"R98",FishnetBikini1:"R98",FlowerBra:"R98",FrameBra1:"R98",FrameBra2:"R98",FullLatexBra:"R98",FullLatexBra2:"R98",HaremBra:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeartTop:"R98",KittyBra1:"R98",LatexBra1:"R98",LatexBunnySuit:"R98",LeatherBreastBinder:"R98",LeatherStrapBra1:"R98",MaidBra1:"R98",OuvertPerl1:"R98",Ribbons:"R98",Sarashi1:"R98",SexyBeachBra1:"R98",SexyBikini1:"R98",SexyBikini2:"R98",SexyBikini3:"R98",SexyBikiniBra1:"R98",SleevelessSlimLatexLeotard:"R98",StarHarnessBra:"R98",StrapBra:"R98",StuddedHarness:"R98",Swimsuit1:"R98",Swimsuit2:"R98",Swimsuit3:"R98"},Om={Band1:"R98",BowBand:"R98",KinkBracelet:"R98",LaceBands:"R98",LesBand:"R98",SpikeBands:"R98",Wristband:"R98"},_m={AdmiralTop:"R98",AdultBabyDress1:"R98",AdultBabyDress2:"R98",AdultBabyDress3:"R98",AdultBabyDress4:"R98",BabydollDress1:"R98",Blouse1:"R98",Bodice1:"R98",BodyTowel1:"R98",BondageBustier1:"R98",BondageBustier2:"R98",BondageDress1:"R98",BondageDress2:"R98",BridesmaidDress1:"R98",BusinessSuit:"R101",ButtonShirt:"R98",CheerleaderTop:"R98",ChineseDress1:"R98",ChineseDress2:"R98",CollegeOutfit1:"R98",ComfyTop:"R98",CorsetDress:"R101",CorsetShirt:"R98",CropTop:"R98",Dress2:"R98",Dress3:"R98",DressFur:"R98",EveningGown:"R102",FishnetTop:"R98",FlowerDress:"R98",FrilledShirt:"R98",FurCoat:"R98",FuzzyDress:"R98",Gown1:"R98",Gown2Top:"R98",Gown3:"R98",GrandMage:"R98",HeavyLeatherDress:"R102",Hoodie:"R98",Jacket:"R98",LaceBabydoll:"R98",LatexLacedSuit:"R98",LatexTankTop:"R98",LatexTop:"R98",Laurel:"R98",LeatherBolero:"R98",LeatherCorsetTop1:"R98",LeatherCropTop:"R98",MaidApron1:"R98",MaidApron2:"R98",MaidLatex:"R101",MaidOutfit1:"R98",MaidOutfit2:"R98",MaleTankTop1:"R98",MistressTop:"R98",NurseUniform:"R98",RetroGirdle:"R98",ReverseBunnySuit:"R98",Robe1:"R98",SeethroughTop:"R98",ShoulderlessTop:"R98",SlaveRags:"R98",SleevelessTop:"R98",SteampunkCorsetTop1:"R98",StudentOutfit1:"R98",StudentOutfit2:"R98",StudentOutfit3:"R98",SummerDress:"R98",SuspenderTop1:"R98",Sweater1:"R98",TShirt1:"R98",TShirt2:"R98",TeacherOutfit1:"R98",TennisShirt1:"R98",VirginKiller1:"R98",WeddingDress1:"R98",WeddingDress2:"R98",Yukata1:"R98"},$m={Bib:"R98",Bouquet:"R98",BugLegs:"R98",BunnyCollarCuffs:"R98",Camera1:"R98",Cape:"R98",CatsuitCollar:"R98",FacePaint:"R98",FrillyApron:"R98",FurBolero:"R98",Glitter:"R98",JewelrySet:"R98",Kissmark:"R98",KissmarkDummy:"R98",LargeBelt:"R98",LatexApron:"R101",LeatherStraps:"R98",Poncho:"R98",Scarf:"R98",StudentOutfit3Bow1:"R98",StudentOutfit3Bow2:"R98",StudentOutfit3Bow3:"R98",StudentOutfit3Scarf:"R98",WombTattoos:"R101",ZipperBelt:"R99"},Fm={AdmiralSkirt:"R98",AsymmetricSkirt:"R98",BondageSkirt:"R98",BusinessSkirt:"R98",BusinessTrousers:"R101",CheerleaderSkirt:"R98",ChineseSkirt1:"R98",ClothSkirt1:"R98",CollegeSkirt:"R98",CrossSkirt:"R98",CrossSkirtLight:"R98",ElegantSkirt:"R98",Gown2Skirt:"R98",HaremPants:"R98",HaremPants2:"R98",HulaSkirt:"R98",JeanSkirt:"R98",Jeans1:"R98",Jeans2:"R98",JeansShorts:"R98",LatexPants1:"R98",LatexSkirt1:"R98",LatexSkirt2:"R98",Leggings1:"R98",Leggings2:"R98",LongLeatherSkirt:"R98",LongPleatedSkirt:"R98",LongSkirt1:"R98",MageSkirt:"R98",MistressBottom:"R98",Pajama1:"R98",PantBoots:"R98",PencilSkirt:"R98",PleatedSkirt:"R98",RuffledSkirt:"R98",ShortPencilSkirt:"R98",ShortPlaidSkirt:"R98",Shorts1:"R98",Skirt1:"R98",Skirt2:"R98",Skirt3:"R98",TennisSkirt1:"R98",TulleSkirt:"R98",Tutu:"R98",Waspie1:"R98",Waspie2:"R98",Waspie3:"R98"},Lm={ClassicLatexCorset:"R98",Corset1:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",Corset6:"R98",CorsetDress:"R101",LatexCorset1:"R98",LeatherCorsetTop1:"R98",SteampunkCorsetTop1:"R98",Underbust:"R98"},Hm={Emoticon:"R98"},Tm={Eyebrows1:"R98",Eyebrows2:"R98",Eyebrows7:"R98",Eyebrows8:"R98"},Am={Eyes1:"R98",Eyes10:"R98",Eyes11:"R98",Eyes12:"R98",Eyes13:"R98",Eyes14:"R99",Eyes2:"R98",Eyes3:"R98",Eyes4:"R98",Eyes5:"R98",Eyes6:"R98",Eyes7:"R98",Eyes8:"R98",Eyes9:"R98"},Nm={Eyes1:"R98",Eyes10:"R98",Eyes11:"R98",Eyes12:"R98",Eyes13:"R98",Eyes14:"R99",Eyes2:"R98",Eyes3:"R98",Eyes4:"R98",Eyes5:"R98",Eyes6:"R98",Eyes7:"R98",Eyes8:"R98",Eyes9:"R98"},Dm={CatEye:"R98",CatEye2:"R98",LargeBlurred:"R98",LargeSolid:"R98",SmallBlurred:"R98",SmallSolid:"R98",SuperstarBlurred:"R98",SuperstarSolid:"R98",Tanuki:"R98",UndershadowedBlurred:"R98",UndershadowedSolid:"R98",Wings:"R98"},jm={BigBeard:"R98",ChinstrapBeard:"R98",Goatee:"R98",MediumBeard:"R98",Moustache:"R98",MoustacheBeard:"R98"},Wm={Fluids:"R98"},Gm={DropBag:"R98",GarterBelt:"R98",GarterBelt2:"R98",GarterBelt3:"R98",Tentacles:"R98"},zm={CatGlasses:"R98",EyePatch1:"R98",Glasses1:"R98",Glasses2:"R98",Glasses3:"R98",Glasses4:"R98",Glasses5:"R98",Glasses6:"R98",Goggles:"R98",GradientSunglasses:"R98",JokeGlasses:"R98",StreetEyewear:"R100",SunGlasses1:"R98",SunGlasses2:"R98",SunGlassesClear:"R98",VGlasses:"R98"},Vm={BikerGloves:"R98",Catsuit:"R98",CheerleaderPomPoms:"R98",CowPrintedGloves:"R98",FingerlessGloves:"R98",FishnetGloves:"R98",Gloves1:"R98",Gloves2:"R98",Gloves3:"R98",GlovesFur:"R98",HaremGlove:"R98",LatexElbowGloves:"R98",LatexShortGloves:"R98",MistressGloves:"R98",SeethroughSuit:"R98"},qm={Antennae:"R98",BatWings:"R98",BigLynxEars:"R98",BunnyEars1:"R98",BunnyEars2:"R98",CowHorns:"R98",DildocornHorn:"R98",Ears1:"R98",Ears2:"R98",ElfEars:"R98",FoxEars1:"R98",FoxEars2:"R98",FoxEars3:"R98",GiantBow1:"R98",HairFeathers1:"R98",HairFlower1:"R98",Halo:"R98",Headset1:"R101",Horns:"R98",Horns2:"R98",Horns3:"R98",KittenEars1:"R98",KittenEars2:"R98",MouseEars1:"R98",MouseEars2:"R98",PonyEars1:"R98",PuppyEars1:"R98",PuppyEars2:"R98",RaccoonEars1:"R98",Ribbons1:"R98",Ribbons2:"R98",Ribbons3:"R98",Ribbons4:"R98",SuccubusHorns:"R98",UnicornHorn:"R98",WeddingVeil1:"R98",WolfEars1:"R98",WolfEars2:"R98"},Um={Antennae:"R98",BatWings:"R98",BunnyEars1:"R98",BunnyEars2:"R98",CowHorns:"R98",DildocornHorn:"R98",Ears1:"R98",Ears2:"R98",ElfEars:"R98",FoxEars1:"R98",FoxEars2:"R98",FoxEars3:"R98",Horns:"R98",Horns2:"R98",Horns3:"R98",KittenEars1:"R98",KittenEars2:"R98",MouseEars1:"R98",MouseEars2:"R98",PonyEars1:"R98",PuppyEars1:"R98",PuppyEars2:"R98",RaccoonEars1:"R98",SuccubusHorns:"R98",UnicornHorn:"R98",WolfEars1:"R98",WolfEars2:"R98"},Km={GiantBow1:"R98",HairFeathers1:"R98",HairFlower1:"R98",Halo:"R98",Headset1:"R101",Ribbons1:"R98",Ribbons2:"R98",Ribbons3:"R98",Ribbons4:"R98",WeddingVeil1:"R98"},Jm={HairBack1:"R98",HairBack10:"R98",HairBack10b:"R98",HairBack11:"R98",HairBack12:"R98",HairBack12b:"R98",HairBack13:"R98",HairBack13b:"R98",HairBack14:"R98",HairBack15:"R98",HairBack15b:"R98",HairBack16:"R98",HairBack17:"R98",HairBack18:"R98",HairBack18b:"R98",HairBack19:"R98",HairBack19b:"R98",HairBack1b:"R98",HairBack2:"R98",HairBack20:"R98",HairBack20b:"R98",HairBack21:"R98",HairBack22:"R98",HairBack23:"R98",HairBack24:"R98",HairBack25:"R98",HairBack26:"R98",HairBack27:"R98",HairBack28:"R98",HairBack29:"R98",HairBack2b:"R98",HairBack30:"R98",HairBack31:"R98",HairBack32:"R98",HairBack33:"R98",HairBack34:"R98",HairBack35:"R98",HairBack36:"R98",HairBack37:"R98",HairBack38:"R98",HairBack39:"R98",HairBack4:"R98",HairBack40:"R98",HairBack41:"R98",HairBack42:"R98",HairBack43:"R98",HairBack44:"R98",HairBack45:"R98",HairBack46:"R98",HairBack47:"R98",HairBack48:"R98",HairBack49:"R98",HairBack4b:"R98",HairBack5:"R98",HairBack50:"R98",HairBack51:"R98",HairBack52:"R98",HairBack53:"R98",HairBack54:"R98",HairBack54b:"R98",HairBack55:"R98",HairBack55b:"R98",HairBack56:"R98",HairBack56b:"R98",HairBack57:"R98",HairBack57b:"R98",HairBack57c:"R98",HairBack57d:"R102",HairBack5b:"R98",HairBack6:"R98",HairBack6b:"R98",HairBack7:"R98",HairBack7b:"R98",HairBack7c:"R98",HairBack8:"R98",HairBack9:"R98",HairBack9b:"R98",HairNone:"R98"},Ym={HairFront1:"R98",HairFront10:"R98",HairFront10b:"R98",HairFront11:"R98",HairFront11b:"R98",HairFront12:"R98",HairFront12b:"R98",HairFront13:"R98",HairFront13b:"R98",HairFront14:"R98",HairFront14b:"R98",HairFront15:"R98",HairFront16:"R98",HairFront17:"R98",HairFront17b:"R98",HairFront18:"R98",HairFront19:"R98",HairFront1b:"R98",HairFront2:"R98",HairFront20:"R98",HairFront21:"R98",HairFront22:"R98",HairFront22b:"R98",HairFront23:"R98",HairFront23b:"R98",HairFront24:"R98",HairFront25:"R98",HairFront26:"R98",HairFront27:"R98",HairFront28:"R98",HairFront28b:"R98",HairFront29:"R98",HairFront29b:"R98",HairFront2b:"R98",HairFront3:"R98",HairFront30:"R98",HairFront31:"R98",HairFront32:"R98",HairFront33:"R98",HairFront33b:"R98",HairFront34:"R98",HairFront35:"R98",HairFront36:"R98",HairFront37:"R98",HairFront37b:"R98",HairFront38:"R98",HairFront38b:"R98",HairFront39:"R98",HairFront39b:"R98",HairFront3b:"R98",HairFront4:"R98",HairFront40:"R98",HairFront40b:"R98",HairFront41:"R98",HairFront41b:"R98",HairFront42:"R98",HairFront42b:"R98",HairFront43:"R98",HairFront43b:"R98",HairFront44:"R98",HairFront44b:"R98",HairFront45:"R98",HairFront45b:"R98",HairFront46:"R98",HairFront46b:"R98",HairFront47:"R98",HairFront47b:"R98",HairFront48:"R98",HairFront48b:"R98",HairFront49:"R98",HairFront4b:"R98",HairFront5:"R98",HairFront50:"R98",HairFront51:"R98",HairFront51b:"R98",HairFront52:"R98",HairFront52b:"R98",HairFront53:"R98",HairFront5b:"R98",HairFront6:"R98",HairFront6b:"R98",HairFront7:"R98",HairFront7b:"R98",HairFront8:"R98",HairFront8b:"R98",HairFront9:"R98",HairFront9b:"R98"},Zm={Default:"R98"},Xm={BakerBoyHat:"R98",BallCapBack:"R98",BallCapFront:"R98",Band1:"R98",Band2:"R98",Bandana:"R98",Beanie:"R98",Beret1:"R98",Bonnet1:"R98",Bonnet2:"R98",BunnySuccubus2:"R98",CaptainHat1:"R98",CollegeDunce:"R98",CowboyHat:"R98",Crown1:"R98",Crown2:"R98",Crown3:"R98",Crown4:"R98",Crown5:"R98",FacePaint:"R98",FlowerCrown:"R98",FurHeadband:"R98",HeadTowel1:"R98",LatexHabit:"R98",MaidHairband1:"R98",MaidLatexHairband:"R101",NunHabit:"R98",NurseCap:"R98",PirateBandana1:"R98",PirateHat:"R98",PoliceWomanHat:"R98",PoppyCrown:"R98",ReindeerBand:"R98",RoseCrown:"R98",Santa1:"R98",SmallHat1:"R98",SwimCap:"R98",Tiara1:"R98",Veil1:"R98",Veil2:"R98",WitchHat1:"R98"},Qm={Default:"R98",NoEars:"R98",SmallEars:"R98"},eg={H0900:"R98",H0910:"R98",H0920:"R98",H0930:"R98",H0940:"R98",H0950:"R98",H0960:"R98",H0970:"R98",H0980:"R98",H0990:"R98",H1000:"R98"},tg={BedChains:"R98",BedRopes:"R98",BedStraps:"R98",BedTape:"R98",CeilingChain:"R98",CeilingRope:"R98",Covers:"R98"},ng={ArmbinderJacket:"R98",BitchSuit:"R98",Bolero:"R98",BondageBouquet:"R98",BondageBra:"R98",BoxTieArmbinder:"R98",CanvasStraitjacket1:"R98",CeilingShackles:"R98",Chains:"R98",CollarCuffs:"R98",DuctTape:"R98",FourLimbsShackles:"R98",FullBodyLeatherHarness:"R98",FullBodyShackles:"R98",FullLatexSuit:"R98",FurStraitJacket:"R98",FuturisticArmbinder:"R98",FuturisticCuffs:"R98",FuturisticStraitjacket:"R98",HeavyYoke:"R98",HempRope:"R98",HighSecurityStraitJacket:"R98",HighStyleSteelCuffs:"R98",InflatableStraightLeotard:"R98",LatexArmbinder:"R98",LatexBoxtieLeotard:"R98",LatexButterflyLeotard:"R98",LatexSleevelessLeotard:"R98",LeatherArmSplints:"R98",LeatherArmbinder:"R98",LeatherCuffs:"R98",LeatherDeluxeCuffs:"R98",LeatherStraitJacket:"R98",Manacles:"R98",MedicalBedRestraints:"R98",MermaidSuit:"R98",MetalCuffs:"R98",NylonRope:"R98",OrnateCuffs:"R98",PantyhoseBody:"R98",PantyhoseBodyOpen:"R98",PetCrawler:"R98",Pillory:"R98",PlasticWrap:"R98",PrisonLockdownSuit:"R98",PrisonSJ:"R98",Ribbons:"R98",SeamlessLatexArmbinder:"R98",SeamlessStraitDress:"R98",SeamlessStraitDressOpen:"R98",ShinyArmbinder:"R98",ShinyPetSuit:"R98",ShinyStraitjacket:"R98",SleepSac:"R98",Slime:"R98",SmoothLeatherArmbinder1:"R98",SteelCuffs:"R98",StraitDress:"R98",StraitDressOpen:"R98",StraitJacket:"R98",StraitLeotard:"R98",StrictLeatherPetCrawler:"R98",SturdyLeatherBelts:"R98",Tentacles:"R98",ThinLeatherStraps:"R98",TightJacket:"R98",TightJacketCrotch:"R98",TransportJacket:"R98",UnderBedBondageCuffs:"R98",Web:"R98",WoodenCuffs:"R98",WrappedBlanket:"R98",WristShackles:"R98",Yoke:"R98",Zipties:"R98"},rg={BalletHeels:"R98",BalletHeels1:"R98",BalletWedges:"R98",FuturisticHeels:"R98",FuturisticHeels2:"R98",HighThighBoots:"R98",LeatherFootMitts1:"R98",LeatherToeCuffs:"R98",LockingBoots1:"R98",LockingHeels:"R98",LockingHeels2:"R98",LockingShoes1:"R98",LockingShoes2:"R98",MetalBallet:"R100",MonoHeel:"R98",PonyBoots:"R98",ShortPonyBoots:"R98",Slime:"R98",ThighHighLatexHeels:"R98",ToeCuffs:"R98",ToeTape:"R98",ToeTie:"R98",Zipties:"R98"},ig={ForbiddenChastityBra:"R98",FuturisticBra:"R98",FuturisticBra2:"R98",LeatherBreastBinder:"R98",MetalChastityBra:"R98",OrnateChastityBra:"R98",PolishedChastityBra:"R98",Ribbons:"R98",TickleBra:"R98"},og={AnalBeads:"R98",AnalBeads2:"R98",AnalHook:"R98",BlackButtPlug:"R98",BunnyTailPlug1:"R98",BunnyTailPlug2:"R98",BunnyTailVibePlug:"R98",ButtPlugLock:"R98",ButtPump:"R98",Cowtail:"R98",DemonPlug:"R98",EggVibePlugXXL:"R98",FoxTail1:"R98",FoxTail2:"R98",FoxTails:"R98",HollowButtPlug:"R98",HorsetailPlug:"R98",HorsetailPlug1:"R98",InflVibeButtPlug:"R98",KittenTail1:"R98",KittenTail2:"R98",LockingVibePlug:"R98",MouseTail1:"R98",MouseTail2:"R98",PenisPlug:"R98",PuppyTailPlug:"R98",PuppyTailPlug1:"R98",RaccoonButtPlug:"R98",RaccoonTailPlug:"R98",ShockPlug:"R98",Stitches:"R98",SuccubusButtPlug:"R98",SuccubusHeartButtPlug:"R98",TailButtPlug:"R98",Tentacles:"R98",VibratingButtplug:"R98",VibratingDildoPlug:"R98",WolfTail1:"R98",WolfTail2:"R98",WolfTail3:"R98"},ag={BBQ:"R98",Bed:"R98",BondageBench:"R98",BurlapSack:"R98",Cage:"R98",ChangingTable:"R98",Coffin:"R98",ConcealingCloak:"R98",Crib:"R98",CryoCapsule:"R98",Cushion:"R98",DisplayCase:"R98",DollBox:"R98",Familiar:"R98",FoldingScreen:"R98",FuckMachine:"R98",FurBlanketWrap:"R98",FuturisticCrate:"R98",InflatableBodyBag:"R98",KabeshiriWall:"R98",Kennel:"R98",LittleMonster:"R98",Locker:"R98",LowCage:"R98",LuckyWheel:"R98",MedicalBed:"R98",MilkCan:"R98",Net:"R98",OneBarPrison:"R98",PersonalCage:"R98",PetBed:"R98",PetBowl:"R98",Pole:"R98",SaddleStand:"R98",SmallDisplayCase:"R98",SmallLocker:"R98",SmallWoodenBox:"R98",SmallWoodenBoxOpenHead:"R98",Snowman:"R98",StrapOnSmooth:"R98",StrapOnStuds:"R98",Sybian:"R98",TheDisplayFrame:"R98",TheHangingFrame:"R101",TransportWoodenBox:"R98",Trolley:"R99",VacBedDeluxe:"R98",VacCube:"R98",Vacbed:"R98",VacbedClear:"R98",WaterCell:"R98",WetFloor:"R98",WheelFortune:"R98",WoodenBox:"R98",WoodenBoxOpenHead:"R98",WoodenHorse:"R98",WoodenRack:"R98",WoodenStocks:"R98","X-Cross":"R98"},sg={BluetoothEarbuds:"R98",FuturisticEarphones:"R98",HeadphoneEarPlugs:"R98",Headphones:"R98",HeavyDutyEarPlugs:"R98",LightDutyEarPlugs:"R98"},lg={AnkleShackles:"R98",BallChain:"R98",Chains:"R98",DuctTape:"R98",EscortAnkleCuffs:"R98",FloorShackles:"R98",FuturisticAnkleCuffs:"R98",HeavyAnkleCuffs:"R98",HeavySpreaderMetal:"R98",HempRope:"R98",HighStyleSteelAnkleCuffs:"R98",Irish8Cuffs:"R98",LeatherAnkleCuffs:"R98",LeatherBelt:"R98",LeatherDeluxeAnkleCuffs:"R98",MedicalBedRestraints:"R98",NylonRope:"R98",OrnateAnkleCuffs:"R98",PlasticWrap:"R98",Slime:"R98",SpreaderDildoBar:"R98",SpreaderMetal:"R98",SpreaderVibratingDildoBar:"R98",SteelAnkleCuffs:"R98",SturdyLeatherBelts:"R98",SuspensionCuffs:"R98",Tentacles:"R98",WoodenCuffs:"R98",Zipties:"R98"},ug={Baguette:"R98",Ballgag:"R98",Belt:"R98",Broom:"R98",BunPlush:"R98",CandleWax:"R98",Cane:"R98",CattleProd:"R98",Crop:"R98",ElectricToothbrush:"R98",Feather:"R98",FeatherDuster:"R98",Flogger:"R98",ForSaleSign:"R98",FoxPlush:"R98",Gavel:"R98",GlassEmpty:"R98",GlassFilled:"R98",Hairbrush:"R98",HeartCrop:"R98",IceCube:"R98",Karl:"R98",KeyProp:"R98",LargeDildo:"R98",LongDuster:"R98",LongSock:"R98",Lotion:"R98",MedicalInjector:"R98",Mug:"R98",Paddle:"R98",Panties:"R98",PetPotato:"R98",PetToy:"R98",Phone1:"R98",Phone2:"R98",PlasticWrap:"R98",Popcorn:"R99",PortalTablet:"R98",PotionBottle:"R98",RainbowWand:"R98",RopeCoilLong:"R98",RopeCoilShort:"R98",Ruler:"R98",Scissors:"R98",Shark:"R98",ShockRemote:"R98",ShockWand:"R98",SmallDildo:"R98",SmallVibratingWand:"R98",Smartphone:"R99",Spatula:"R98",Sword:"R98",TapeRoll:"R98",TennisRacket:"R98",Toothbrush:"R98",Towel:"R98",VibeRemote:"R98",VibratingWand:"R98",Vibrator:"R98",WartenbergWheel:"R98",Whip:"R98",WhipPaddle:"R98"},cg={CheerleaderPomPoms:"R98",DuctTape:"R98",FuturisticMittens:"R98",HoofMittens:"R98",LeatherMittens:"R98",PaddedLeatherMittens:"R98",PaddedMittens:"R98",PawMittens:"R98",PolishedMittens:"R98",PonyMittensBinder:"R100",SmoothLeatherMittens1:"R98"},dg={AnimeLenses:"R98",BigMouthHood:"R101",BlackoutLenses:"R98",ClothBlindfold:"R98",DroneMask:"R98",DuctTape:"R98",FrilledSleepMask:"R98",FullBlindfold:"R98",FurScarf:"R98",FuturisticMask:"R98",InteractiveVRHeadset:"R98",InteractiveVisor:"R98",KittyBlindfold:"R98",LatexBlindfold:"R98",LeatherBlindfold:"R98",LeatherSlimMask:"R98",LeatherSlimMaskOpenEyes:"R98",LeatherSlimMaskOpenMouth:"R98",LewdBlindfold:"R98",MedicalPatch:"R98",PaddedBlindfold:"R98",Pantyhose:"R98",PrisonLockdownBlindfold:"R98",Ribbons:"R98",RopeBlindfold:"R98",ScarfBlindfold:"R98",SleepMask:"R98",Slime:"R98",SmallBlindfold:"R98",Snorkel:"R98",Stitches:"R98",StuddedBlindfold:"R98",Tentacles:"R98",WebBlindfold:"R98"},pg={AccentHood:"R98",BigMouthHood:"R101",BlanketHood:"R98",CanvasHood:"R98",CollarHood:"R98",CorsetHood:"R98",CowHood:"R98",CustomLatexHood:"R98",DobermanMask:"R98",DogHood:"R98",DroneMask:"R98",FestivalFoxMask:"R98",FoxHood:"R98",FoxyMask:"R98",FuturisticHelmet:"R98",GGTSHelmet:"R98",GP9GasMask:"R98",GasMask:"R98",GwenHood:"R98",HarnessCatMask:"R98",HeadboxSeethrough:"R98",InflatableGagMask:"R98",InflatedBallHood:"R98",KirugumiMask:"R98",KittyHood:"R98",LampHeadHood:"R98",LatexBunny:"R98",LatexDogHood:"R98",LatexDogMask:"R98",LatexHabit:"R98",LatexHoodOpenHair:"R98",LeatherHood:"R98",LeatherHoodOpenEyes:"R98",LeatherHoodOpenMouth:"R98",LeatherHoodSealed:"R98",LeatherHoodSensDep:"R98",OldGasMask:"R98",OpenFaceHood:"R98",OpenMouthPlugHood:"R98",PantyHood:"R98",Pantyhose:"R98",PolishedSteelHood:"R98",PonyHood:"R98",PumpkinHead:"R98",SackHood:"R98",SensoryDeprivationHood:"R98",Slime:"R98",SpaceMask:"R100",TechnoHelmet1:"R98",VacHood:"R98",ZipperHood:"R98"},hg={Chains:"R98",DuctTape:"R98",FrogtieStraps:"R98",FuturisticLegCuffs:"R98",HempRope:"R98",HobbleSkirt:"R98",LeatherBelt:"R98",LeatherDeluxeLegCuffs:"R98",LeatherLegCuffs:"R98",LegBinder:"R98",MedicalBedRestraints:"R98",MermaidTail:"R98",NylonRope:"R98",OrnateLegCuffs:"R98",PlasticWrap:"R98",Ribbons:"R98",SeamlessHobbleSkirt:"R98",SeamlessLegBinder:"R98",ShinyLegBinder:"R98",Slime:"R98",SturdyLeatherBelts:"R98",Tentacles:"R98",Zipties:"R98"},fg={BountySuitcase:"R98",BountySuitcaseEmpty:"R98",BunPlush:"R98",CombinationPadlock:"R98",ExclusivePadlock:"R98",FamilyPadlock:"R98",FamilyPadlockKey:"R98",FoxPlush:"R98",HighSecurityPadlock:"R98",IntricatePadlock:"R98",Karl:"R98",Lockpicks:"R98",LoversPadlock:"R98",LoversPadlockKey:"R98",LoversTimerPadlock:"R98",MetalCuffsKey:"R98",MetalPadlock:"R98",MetalPadlockKey:"R98",MistressPadlock:"R98",MistressPadlockKey:"R98",MistressTimerPadlock:"R98",OwnerPadlock:"R98",OwnerPadlockKey:"R98",OwnerTimerPadlock:"R98",PandoraPadlock:"R98",PandoraPadlockKey:"R98",PasswordPadlock:"R98",PetPost:"R98",PetPotato:"R98",PortalLinkPadlock:"R98",SafewordPadlock:"R98",ServingTray:"R98",TeddyBear:"R98",TimerPadlock:"R98",TimerPasswordPadlock:"R98",WoodenMaidTray:"R98",WoodenMaidTrayFull:"R98",WoodenPaddle:"R98",WoodenSign:"R98"},mg={Ball:"R98",BallGag:"R98",BallGagMask:"R98",BambooGag:"R98",BigMouth:"R98",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CaneGag:"R98",CarrotGag:"R98",ChloroformCloth:"R98",ChopstickGag:"R98",ClothGag:"R98",ClothStuffing:"R98",CropGag:"R98",CupholderGag:"R98",DeepthroatGag:"R98",DentalGag:"R98",DildoGag:"R98",DildoPlugGag:"R98",DogMuzzleExposed:"R98",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FunnelGag:"R98",FurScarf:"R98",FuturisticHarnessBallGag:"R98",FuturisticHarnessPanelGag:"R98",FuturisticMuzzle:"R98",FuturisticPanelGag:"R98",GasMaskGag:"R98",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",HookGagMask:"R98",Kissmark:"R102",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LargeDildo:"R98",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R102",LatexSheathGag:"R98",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",MilkBottle:"R98",ModularGag:"R99",MouthFeatureGag:"R102",MuzzleGag:"R98",OTNPlugGag:"R98",PaciGag:"R98",PacifierGag:"R98",PaddedFaceMask:"R102",PantiesMask:"R98",PantyStuffing:"R98",PlasticWrap:"R98",PlugGag:"R98",PonyGag:"R98",PrisonLockdownGag:"R98",PumpGag:"R98",PumpkinGag:"R98",RegressedMilk:"R98",RegularSleepingPill:"R98",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SockStuffing:"R98",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R102",TechnoGag:"R98",Tentacles:"R98",TonguePiercingGag:"R100",TongueStrapGag:"R98",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98"},gg={BallGag:"R98",BallGagMask:"R98",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CarrotGag:"R98",ChloroformCloth:"R98",ClothGag:"R98",CupholderGag:"R98",DildoGag:"R98",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FurScarf:"R98",FuturisticHarnessBallGag:"R101",FuturisticHarnessPanelGag:"R101",FuturisticMuzzle:"R98",FuturisticPanelGag:"R101",GasMaskGag:"R98",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",Kissmark:"R102",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R102",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",ModularGag:"R99",MouthFeatureGag:"R98",MuzzleGag:"R98",PaciGag:"R98",PaddedFaceMask:"R102",PantiesMask:"R98",PlasticWrap:"R98",PonyGag:"R98",PrisonLockdownGag:"R98",PumpkinGag:"R98",RegressedMilk:"R98",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R102",Tentacles:"R98",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98"},Rg={BallGag:"R98",BallGagMask:"R98",BitGag:"R98",BoneGag:"R98",CageMuzzle:"R98",CarrotGag:"R98",ChloroformCloth:"R98",ClothGag:"R98",CupholderGag:"R98",DildoGag:"R98",DuctTape:"R98",DusterGag:"R98",FoxyHarnessPanelGag:"R98",FurScarf:"R98",FuturisticHarnessBallGag:"R101",FuturisticHarnessPanelGag:"R101",FuturisticMuzzle:"R98",FuturisticPanelGag:"R101",GasMaskGag:"R98",HarnessBallGag:"R98",HarnessBallGag1:"R98",HarnessPacifierGag:"R98",HarnessPanelGag:"R98",HarnessPonyBits:"R98",Kissmark:"R98",KittyGag:"R98",KittyHarnessPanelGag:"R98",KittyMuzzleGag:"R98",LatexBallMuzzleGag:"R98",LatexMuzzleMask:"R99",LatexPostureCollar:"R98",LatexRespirator:"R98",LeatherCorsetCollar:"R98",LewdGag:"R98",LipGag:"R98",MedicalMask:"R98",ModularGag:"R99",MouthFeatureGag:"R102",MuzzleGag:"R98",PaciGag:"R98",PaddedFaceMask:"R98",PantiesMask:"R98",PlasticWrap:"R98",PonyGag:"R98",PrisonLockdownGag:"R98",PumpkinGag:"R98",RegressedMilk:"R98",Ribbons:"R98",RingGag:"R98",RopeBallGag:"R98",RopeGag:"R98",ScarfGag:"R98",ShoeGag:"R98",Slime:"R98",SpiderGag:"R98",SteelMuzzleGag:"R98",StitchedMuzzleGag:"R98",Stitches:"R98",Tentacles:"R98",WebGag:"R98",WiffleGag:"R98",XLBoneGag:"R98"},vg={AutoShockCollar:"R98",BatCollar:"R98",BonedNeckCorset:"R98",BordelleCollar:"R98",ClubSlaveCollar:"R98",ComboHarness:"R98",DogCollar:"R98",ExtendablePostureCollar:"R99",FuturisticCollar:"R98",GothicCollar:"R98",HeartCollar:"R98",HeartLinkChoker:"R98",HighCollar:"R98",HighSecurityCollar:"R98",HighStyleSteelCollar:"R98",LatexCollar1:"R98",LatexCollar2:"R98",LatexPostureCollar:"R98",LatexRingCollar:"R99",LeatherChoker:"R98",LeatherCollar:"R98",LeatherCollarBell:"R98",LeatherCollarBow:"R98",LeatherCorsetCollar:"R98",LeatherDeluxeCollar:"R98",LoveLeatherCollar:"R98",MaidCollar:"R98",NeckRope:"R98",NobleCorsetCollar:"R98",NylonCollar:"R98",OrnateCollar:"R98",PaddedBeltCollar:"R99",PetCollar:"R98",PetSuitShockCollar:"R98",PostureCollar:"R98",ShinySteelCollar:"R98",ShockCollar:"R98",SlaveCollar:"R98",SlenderSteelCollar:"R98",SpikeCollar:"R98",SpikedChoker:"R99",SteelPostureCollar:"R98",StrictPostureCollar:"R98",TechnoCollar:"R98"},yg={CollarAutoShockUnit:"R98",CollarBell:"R98",CollarBow:"R98",CollarButterfly:"R98",CollarCowBell:"R98",CollarFlower:"R98",CollarLapis:"R98",CollarMoon:"R98",CollarNameTag:"R98",CollarNameTagLivestock:"R98",CollarNameTagLover:"R98",CollarNameTagOval:"R98",CollarNameTagPet:"R98",CollarPentagram:"R98",CollarPupBone:"R98",CollarRose:"R98",CollarShockUnit:"R98",CollarSun:"R98",CustomCollarTag:"R98",ElectronicTag:"R98",Key:"R98"},bg={ChainLeash:"R98",CollarChainLong:"R98",CollarChainMedium:"R98",CollarChainShort:"R98",CollarLeash:"R98",CollarRopeLong:"R98",CollarRopeMedium:"R98",CollarRopeShort:"R98",PetPost:"R98",Post:"R98"},Sg={BellClamps:"R98",ChainClamp:"R98",ChainTassles:"R98",ChopStickNippleClamps:"R98",Clothespins:"R98",HeartPasties:"R98",KittyPasties:"R98",LactationPump:"R98",NippleClamp:"R98",NippleClamps2:"R98",NippleSuctionCups:"R98",NippleTape:"R98",NippleVibe:"R98",NippleWeightClamps:"R98",PlateClamps:"R98",ScrewClamps:"R98",ShockClamps:"R98",StretchClovers:"R98",TapedVibeEggs:"R98",VibeNippleClamp:"R98",VibratorRemote:"R98"},wg={BarbellPiercing:"R98",BellPiercing:"R98",CrossedStraightPiercing:"R98",NecklacePiercingChain:"R98",NippleAccessory1:"R98",NippleAccessory2:"R98",NippleAccessory3:"R98",NippleChastityPiercing1:"R98",NippleChastityPiercing2:"R98",RoundPiercing:"R98",StraightPiercing:"R98",VibeHeartPiercings:"R98"},Cg={BarbelPiercing:"R98",ClownNose:"R99",DuctTape:"R98",NoseHook:"R98",NosePlugs:"R98",NoseRing:"R98",PigNose:"R98",PigNoseHook:"R98"},kg={BulkyDiaper:"R98",DiaperHarness:"R98",ForbiddenChastityBelt:"R98",FuturisticChastityBelt:"R98",FuturisticTrainingBelt:"R98",HarnessPanties1:"R98",HarnessPanties2:"R98",HeavyDutyBelt:"R98",HempRope:"R98",HybridChastityBelt:"R98",LeatherChastityBelt:"R98",LeatherStrapPanties1:"R98",LoveChastityBelt:"R98",MetalChastityBelt:"R98",ModularChastityBelt:"R99",ObedienceBelt:"R98",OrnateChastityBelt:"R98",PelvisChainLeash:"R98",PolishedChastityBelt:"R98",PoofyDiaper:"R98",PortalPanties:"R98",Ribbons:"R98",SciFiPleasurePanties:"R98",SleekLeatherChastityBelt:"R98",SteelChastityPanties:"R98",StraponPanties:"R98",StuddedChastityBelt:"R98"},Bg={Script:"R98"},Pg={AdultBabyHarness:"R98",ClassicLatexCorset:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",CrotchChain:"R98",FuturisticHarness:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeavyLatexCorset:"R98",HempRopeHarness:"R98",HighSecurityHarness:"R98",LatexCorset1:"R98",LeatherBreastBinder:"R98",LeatherChestHarness1:"R98",LeatherHarness:"R98",LeatherStrapBra1:"R98",LeatherStrapHarness:"R98",LockingSwimsuit:"R98",LockingSwimsuit2:"R98",NavelBar1:"R98",NylonRopeHarness:"R98",Ribbons:"R98",StuddedHarness:"R98",ThinLeatherStraps:"R98",Underbust:"R98"},xg={AdultBabyHarness:"R98",ClassicLatexCorset:"R98",Corset2:"R98",Corset3:"R98",Corset4:"R98",Corset5:"R98",CrotchChain:"R98",FuturisticHarness:"R98",HarnessBra1:"R98",HarnessBra2:"R98",HeavyLatexCorset:"R98",HempRopeHarness:"R98",HighSecurityHarness:"R98",LatexCorset1:"R98",LeatherBreastBinder:"R98",LeatherChestHarness1:"R98",LeatherHarness:"R98",LeatherStrapBra1:"R98",LeatherStrapHarness:"R98",LockingSwimsuit:"R98",LockingSwimsuit2:"R98",NavelBar1:"R98",NylonRopeHarness:"R98",Ribbons:"R98",StuddedHarness:"R98",ThinLeatherStraps:"R98",Underbust:"R98"},Ig={BasicCockring:"R98",BenWaBalls:"R98",ChastityPouch:"R98",ClitAndDildoVibratorbelt:"R98",ClitSuctionCup:"R98",ClitoralStimulator:"R98",DoubleEndDildo:"R98",FlatChastityCage:"R98",FullLatexSuitWand:"R98",FuturisticVibrator:"R98",HeavyWeightClamp:"R98",HempRopeBelt:"R98",InflatableVibeDildo:"R98",InflatableVibratingPanties:"R98",LoversVibrator:"R98",LoversVibratorRemote:"R98",PenisDildo:"R98",PlasticChastityCage1:"R98",PlasticChastityCage2:"R98",ShockDildo:"R98",Stitches:"R98",TapeStrips:"R98",TechnoChastityCage:"R98",VibeEggPenisBase:"R98",VibratingDildo:"R98",VibratingEgg:"R98",VibratingLatexPanties:"R98",VibratorRemote:"R98",WandBelt:"R98",WiredEgg:"R98"},Mg={AdornedClitPiercing:"R98",BarbellClitPiercing:"R98",ChastityClitPiercing:"R98",ChastityClitShield:"R98",ClitRing:"R98",HighSecurityVulvaShield:"R98",JewelClitPiercing:"R98",RoundClitPiercing:"R98",StraightClitPiercing:"R98",TapedClitEgg:"R98",VibeEggGlans:"R98",VibeHeartClitPiercing:"R98"},Eg={JewelrySet:"R98"},Og={BandAnklet:"R98",Ribbon:"R98",Ribbon1:"R98"},_g={CatsuitGloves:"R100",Claws:"R99",Fingernails:"R99",Rings:"R98"},$g={AnimeLenses:"R99",BunnyMask1:"R98",BunnyMask2:"R98",BunnyMask3:"R98",ButterflyMask:"R98",DominoMask:"R98",DroneMask:"R98",FacePaint:"R98",FaceVeil:"R98",FestivalFoxMask:"R98",FoxMask:"R98",FuturisticVisor:"R98",Glitter:"R98",HeadHarness:"R98",Kissmark:"R98",KittyMask1:"R98",KittyMask2:"R98",KittyMask3:"R98",LaceMask1:"R98",LaceMask2:"R98",LatexMuzzleMask:"R99",MedicalMask:"R98",OpenFaceHood:"R98",PetNose:"R98",ShinobiMask:"R98",SwimCap:"R98",VenetianMask:"R98"},Fg={Discreet:"R98",Full:"R98",Regular:"R98"},Lg={Bandana:"R98",BlackHeart:"R98",BodyChainNecklace:"R98",CatsuitCollar:"R98",ChokerTattoo:"R98",ElegantHeartNecklace:"R98",FlowerGarland:"R98",FurScarf:"R98",IDCard:"R98",Necklace1:"R98",Necklace2:"R98",Necklace3:"R98",Necklace4:"R98",NecklaceBallGag:"R98",NecklaceButterfly:"R98",NecklaceKey:"R98",NecklaceLock:"R98",NecklaceRope:"R98"},Hg={Nipples1:"R98",Nipples2:"R98",Nipples3:"R98"},Tg={Bikini1:"R98",BoxerShorts:"R98",Briefs:"R98",BulkyDiaper:"R98",CatsuitPanties:"R98",ChinesePanties1:"R98",CockSock:"R98",CowPrintedPanties:"R98",CrotchPanties1:"R98",Diapers1:"R98",Diapers2:"R98",Diapers3:"R98",Diapers4:"R98",FloralPanties2:"R98",FlowerPanties:"R98",HarnessPanties1:"R98",HarnessPanties2:"R98",Jockstrap:"R98",KittyPanties1:"R98",LatexCrotchlessPanties:"R98",LatexPanties1:"R98",LatexPanties2:"R98",LeatherStrapPanties1:"R98",MaidPanties1:"R98",MaidPanties2:"R98",MaleCatsuitPanties:"R98",MicroThong:"R98",Panties1:"R98",Panties11:"R98",Panties12:"R98",Panties13:"R98",Panties14:"R98",Panties15:"R98",Panties16:"R98",Panties7:"R98",Panties8:"R98",PearlPanties1:"R98",PilotPanties:"R98",PoofyDiaper:"R98",RedBowPanties:"R98",SexyBeachPanties1:"R98",StringPanties1:"R98",StringPasty1:"R98",StringThong:"R98",SunstripePanties1:"R98",Thong:"R98",WrapPanties1:"R98",ZipPanties1:"R98"},Ag={HeHim:"R98",SheHer:"R98"},Ng={Penis:"R98",Pussy1:"R98",Pussy2:"R98",Pussy3:"R98"},Dg={BandAnklet:"R98",Ribbon:"R98",Ribbon1:"R98"},jg={CatsuitGloves:"R100",Claws:"R99",Fingernails:"R99",Rings:"R98"},Wg={AnkleBoots1:"R98",AnkleStrapShoes:"R98",BalletHeels1:"R98",BarefootSandals1:"R98",Boots1:"R98",Clogs:"R99",DeluxeBoots:"R98",DutyShoes:"R98",Flippers:"R98",FuturisticHeels2:"R98",FuzzyBoots:"R98",Geta:"R98",Heels1:"R98",Heels2:"R98",Heels3:"R98",LatexAnkleShoes:"R98",LatexHeels:"R98",MaryShoes:"R102",MistressBoots:"R98",PawBoots:"R98",PonyBoots:"R98",Sandals:"R98",SandalsRS:"R98",Shoes1:"R98",Shoes2:"R98",Shoes4:"R98",Shoes5:"R98",Sneakers1:"R98",Sneakers2:"R98",SneakersSport:"R98",SocialHeels:"R98",StilettoHeels:"R98",StreetBoots:"R98",TallerBoots:"R100",ThighBoots:"R98",ThighHighLatexHeels:"R98",WesternBoots:"R98",WoollyBootsTall:"R98"},Gg={CowPrintedSocks:"R98",FootlessSocks1:"R98",GradientPantyhose:"R98",HaremStockings:"R98",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",Pantyhose1:"R98",Pantyhose2:"R98",ReverseBunnySuit:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98"},zg={CowPrintedSocks:"R98",FootlessSocks1:"R98",HaremStockings:"R98",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",LooseSocks:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98"},Vg={CowPrintedSocks:"R98",FootlessSocks1:"R98",HaremStockings:"R98",KneePads:"R98",LatexSocks1:"R98",LeatherSocks1:"R98",LooseSocks:"R98",Socks0:"R98",Socks1:"R98",Socks2:"R98",Socks3:"R98",Socks4:"R98",Socks5:"R98",Socks6:"R98",SocksFur:"R98",SocksStriped1:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98",VSocks1:"R98"},qg={Blouse1:"R98",Catsuit:"R98",FishnetTop:"R98",LatexCatsuit:"R98",MaleSeamlessCatsuit:"R98",PilotSuit:"R98",ReverseBunnySuit:"R98",SeamlessCatsuit:"R98",SeethroughSuit:"R98",SeethroughSuitZip:"R98",SleevelessCatsuit:"R98",SleevelessSlimLatexLeotard:"R98"},Ug={Catsuit:"R98",CatsuitPanties:"R98",LatexCatsuit:"R98",MaleCatsuitPanties:"R98",MaleSeamlessCatsuit:"R98",Pantyhose1:"R98",Pantyhose2:"R98",PilotPanties:"R98",PilotSuit:"R98",ReverseBunnySuit:"R98",SeamlessCatsuit:"R98",SeethroughSuit:"R98",SeethroughSuitZip:"R98",Stockings1:"R98",Stockings2:"R98",Stockings3:"R98",Stockings4:"R98"},Kg={BunnyTailStrap:"R98",CowtailStrap:"R98",DemonPlug:"R98",DragonTailStrap1:"R98",FoxTailStrap1:"R98",FoxTailStrap2:"R98",FoxTailsStrap:"R98",HorseTailStrap:"R98",HorseTailStrap1:"R98",KittenTailStrap1:"R98",KittenTailStrap2:"R98",LionTailStrap:"R98",MouseTailStrap1:"R98",MouseTailStrap2:"R98",PuppyTailStrap:"R98",PuppyTailStrap1:"R98",RaccoonStrap:"R98",RaccoonTailStrap:"R98",SuccubusHeartTailStrap:"R98",SuccubusTailStrap:"R98",TailStrap:"R98",Tentacles:"R98",WolfTailStrap1:"R98",WolfTailStrap2:"R98",WolfTailStrap3:"R98"},Jg={AngelFeather:"R98",AngelWings:"R98",BatWings:"R98",BeeWings:"R98",CyberWings:"R98",DevilWings:"R98",FairyWings:"R98",FallenAngelWings:"R98",PixieWings:"R98",SteampunkWings:"R98",SuccubusFeather:"R98",SuccubusWings:"R98"},Yg={Blush:Pm,BodyLower:xm,BodyMarkings:Im,BodyUpper:Mm,Bra:Em,Bracelet:Om,Cloth:_m,ClothAccessory:$m,ClothLower:Fm,Corset:Lm,Emoticon:Hm,Eyebrows:Tm,Eyes:Am,Eyes2:Nm,EyeShadow:Dm,FacialHair:jm,Fluids:Wm,Garters:Gm,Glasses:zm,Gloves:Vm,HairAccessory1:qm,HairAccessory2:Um,HairAccessory3:Km,HairBack:Jm,HairFront:Ym,Hands:Zm,Hat:Xm,Head:Qm,Height:eg,ItemAddon:tg,ItemArms:ng,ItemBoots:rg,ItemBreast:ig,ItemButt:og,ItemDevices:ag,ItemEars:sg,ItemFeet:lg,ItemHandheld:ug,ItemHands:cg,ItemHead:dg,ItemHood:pg,ItemLegs:hg,ItemMisc:fg,ItemMouth:mg,ItemMouth2:gg,ItemMouth3:Rg,ItemNeck:vg,ItemNeckAccessories:yg,ItemNeckRestraints:bg,ItemNipples:Sg,ItemNipplesPiercings:wg,ItemNose:Cg,ItemPelvis:kg,ItemScript:Bg,ItemTorso:Pg,ItemTorso2:xg,ItemVulva:Ig,ItemVulvaPiercings:Mg,Jewelry:Eg,LeftAnklet:Og,LeftHand:_g,Mask:$g,Mouth:Fg,Necklace:Lg,Nipples:Hg,Panties:Tg,Pronouns:Ag,Pussy:Ng,RightAnklet:Dg,RightHand:jg,Shoes:Wg,Socks:Gg,SocksLeft:zg,SocksRight:Vg,Suit:qg,SuitLower:Ug,TailStraps:Kg,Wings:Jg},Zg=Object.freeze({__proto__:null,Blush:Pm,BodyLower:xm,BodyMarkings:Im,BodyUpper:Mm,Bra:Em,Bracelet:Om,Cloth:_m,ClothAccessory:$m,ClothLower:Fm,Corset:Lm,Emoticon:Hm,EyeShadow:Dm,Eyebrows:Tm,Eyes:Am,Eyes2:Nm,FacialHair:jm,Fluids:Wm,Garters:Gm,Glasses:zm,Gloves:Vm,HairAccessory1:qm,HairAccessory2:Um,HairAccessory3:Km,HairBack:Jm,HairFront:Ym,Hands:Zm,Hat:Xm,Head:Qm,Height:eg,ItemAddon:tg,ItemArms:ng,ItemBoots:rg,ItemBreast:ig,ItemButt:og,ItemDevices:ag,ItemEars:sg,ItemFeet:lg,ItemHandheld:ug,ItemHands:cg,ItemHead:dg,ItemHood:pg,ItemLegs:hg,ItemMisc:fg,ItemMouth:mg,ItemMouth2:gg,ItemMouth3:Rg,ItemNeck:vg,ItemNeckAccessories:yg,ItemNeckRestraints:bg,ItemNipples:Sg,ItemNipplesPiercings:wg,ItemNose:Cg,ItemPelvis:kg,ItemScript:Bg,ItemTorso:Pg,ItemTorso2:xg,ItemVulva:Ig,ItemVulvaPiercings:Mg,Jewelry:Eg,LeftAnklet:Og,LeftHand:_g,Mask:$g,Mouth:Fg,Necklace:Lg,Nipples:Hg,Panties:Tg,Pronouns:Ag,Pussy:Ng,RightAnklet:Dg,RightHand:jg,Shoes:Wg,Socks:Gg,SocksLeft:zg,SocksRight:Vg,Suit:qg,SuitLower:Ug,TailStraps:Kg,Wings:Jg,default:Yg});let Xg;const Qg={};Mh(CR).then((()=>{kh.log("Initializing new item screen hooks");const e=GameVersionFormat.exec(GameVersion);if(null==e)return void kh.error(`Invalid BC version: "${GameVersion}"`);Xg=Number.parseInt(e[1]);for(const[e,t]of Nh(Zg))for(const[n,r]of Nh(t))if(r===`R${Xg}`){const t=AssetGet("Female3DCG",e,n);if(null==t)continue;t.Group.Name===t.DynamicGroupName&&(Qg[`${t.Group.Name}${t.Name}`]=t)}"735A1207"===Eh.getOriginalHash("MainHallRun")&&"7A6D741A"===Eh.getOriginalHash("MainHallClick")&&(Eh.patchFunction("MainHallRun",{'DrawText(TextGet("OnlinePlayers") + " " + CurrentOnlinePlayers.toString(), 1740, 950, "White", "Black");':'DrawText(TextGet("OnlinePlayers") + " " + CurrentOnlinePlayers.toString(), 1630, 950, "White", "Black");'}),Eh.hookFunction("MainHallRun",0,((e,t)=>{t(e),null==MainHallStartEventTimer&&null==MainHallNextEventTimer&&DrawButton(1665,900,90,90,"","White","Icons/Changelog.png",`MBS: Show new R${Xg} items`)})),Eh.hookFunction("MainHallClick",0,((e,t)=>{if(null==MainHallStartEventTimer&&null==MainHallNextEventTimer&&MouseIn(1665,900,90,90))return Shop2Vars.Mode="Preview",Shop2Vars.Filters.MBS_VersionFilter=e=>Qg[`${e.Asset.Group.Name}${e.Asset.Name}`]?["Buy","Sell","Preview"]:[],Shop2.Init(void 0,["Room","MainHall"]),void(ServerBeep={Message:'The MBS "Show new items" button will be removed in R103; use the Club Shop or /shop chat command instead',Timer:CommonTime()+1e4});t(e)})));const t=Shop2Vars;Object.defineProperty(Shop2Vars,"MBS_ShowAllVersions",{get:()=>!("MBS_VersionFilter"in Shop2Vars.Filters)}),Shop2.Elements.MBS_VersionHeader={Coords:[345,315,0,0],Mode:new Set(["Preview","Buy","Sell"]),Run:(e,t,n)=>DrawText("Filter by BC version",t,n,Shop2Vars.DisplayDropdown?"Gray":"White")},Shop2.Elements.MBS_ShowCurrentVersion={Coords:[135,Shop2Consts.Grid.y+160,200,90],Mode:new Set(["Preview","Buy","Sell"]),Run:(e,...n)=>{Shop2Vars.DisplayDropdown?DrawButton(...n,`Version R${Xg}`,"Gray",void 0,void 0,!0):t.MBS_ShowAllVersions?DrawButton(...n,`Version R${Xg}`,"White"):DrawButton(...n,`Version R${Xg}`,"Cyan")},Click:()=>{t.MBS_ShowAllVersions&&(Shop2Vars.Filters.MBS_VersionFilter=e=>Qg[`${e.Asset.Group.Name}${e.Asset.Name}`]?["Buy","Sell","Preview"]:[],Shop2.ApplyItemFilters())}},Shop2.Elements.MBS_ShowAllVersions={Coords:[355,Shop2Consts.Grid.y+160,200,90],Mode:new Set(["Preview","Buy","Sell"]),Run:(e,...n)=>{Shop2Vars.DisplayDropdown?DrawButton(...n,"All versions","Gray",void 0,void 0,!0):t.MBS_ShowAllVersions?DrawButton(...n,"All versions","Cyan"):DrawButton(...n,"All versions","White")},Click:()=>{t.MBS_ShowAllVersions||(delete Shop2Vars.Filters.MBS_VersionFilter,Shop2.ApplyItemFilters())}},Eh.hookFunction("Shop2Load",0,((e,t)=>{0===Shop2InitVars.Items.length&&(Shop2InitVars.Items=Shop2.ParseAssets(Asset.filter((e=>e.Group.Name===e.DynamicGroupName&&(Qg[`${e.Group.Name}${e.Name}`]||(Shop2Consts.BuyGroups[e.BuyGroup]?.Value??e.Value)>0)&&!ShopHideGenderedAsset(e))).sort(((e,t)=>e.Group.Description.localeCompare(t.Group.Description)||e.Description.localeCompare(t.Description))))),t(e)}))}));var eR,tR,nR,rR,iR,oR,aR,sR;function lR(){null!=TextScreenCache&&(TextScreenCache.cache[`Homepage${pR.screen}`]="MBS Settings");const e=new Image;e.addEventListener("error",(()=>DrawGetImageOnError(e,!1))),e.src="Icons/Maid.png",DrawCacheImage.set(`Icons/${pR.screen}.png`,e)}class uR extends uf{constructor(){super(null,"Character","Preference",{Run:PreferenceRun,Click:PreferenceClick,Exit:PreferenceExit,Load:()=>CommonSetScreen("Character","Preference")})}}uR.screen="Preference";const cR="mbs-preference",dR=Object.freeze({root:cR,styles:`${cR}-style`,header:`${cR}-header`,exit:`${cR}-exit`,exitButton:`${cR}-exit-button`,exitTooltip:`${cR}-exit-tooltip`,settingsGrid:`${cR}-settings`,settingsPair:`${cR}-settings-pair`,itemsButton:`${cR}-items-button`,itemsHeader:`${cR}-items-header`,wheelButton:`${cR}-wheel-button`,wheelHeader:`${cR}-wheel-header`,rollCheckbox:`${cR}-roll-checkbox`,rollHeader:`${cR}-roll-header`,lockCheckbox:`${cR}-lock-checkbox`,lockHeader:`${cR}-lock-header`,miscGrid:`${cR}-misc`,reset:`${cR}-reset`,resetButton:`${cR}-reset-button`,resetTooltip:`${cR}-reset-tooltip`,resetScreen:`${cR}-reset-screen`,resetBackground:`${cR}-reset-background`,resetGrid:`${cR}-reset-grid`,resetAccept:`${cR}-reset-accept`,resetCancel:`${cR}-reset-cancel`,import:`${cR}-import`,importButton:`${cR}-import-button`,importTooltip:`${cR}-import-tooltip`,export:`${cR}-export`,exportButton:`${cR}-export-button`,exportTooltip:`${cR}-export-tooltip`,changelog:`${cR}-changelog`,changelogButton:`${cR}-changelog-button`,changelogTooltip:`${cR}-changelog-tooltip`});class pR extends lf{constructor(e,n=null){if(super(e,pR.screenParamsDefault,n),eR.add(this),document.body.appendChild(h("div",{id:dR.root,class:"HideOnPopup mbs-screen","screen-generated":this.screen,children:[p("style",{id:dR.styles,children:'#mbs-preference {\n  grid-template: "header header exit" min(9vh, 4.5vw) "settings misc misc" auto/auto min(29vh, 14.5vw) min(9vh, 4.5vw);\n}\n\n#mbs-preference-header {\n  grid-area: header;\n}\n\n#mbs-preference-exit {\n  grid-area: exit;\n}\n\n.mbs-preference-settings-pair {\n  grid-column-gap: min(3vh, 1.5vw);\n  align-items: center;\n  display: grid;\n  grid-template-columns: min(9vh, 4.5vw) auto;\n  text-align: left;\n}\n.mbs-preference-settings-pair button {\n  height: min(9vh, 4.5vw);\n  width: min(9vh, 4.5vw);\n}\n\n#mbs-preference-settings {\n  display: grid;\n  grid-area: settings;\n  height: fit-content;\n  overflow: hidden scroll;\n}\n\n#mbs-preference-misc {\n  align-self: self-end;\n  display: grid;\n  grid-gap: min(2vh, 1vw);\n  grid-area: misc;\n  grid-template: "reset reset" min(9vh, 4.5vw) "import export" min(9vh, 4.5vw) "changelog changelog" min(9vh, 4.5vw)/auto auto;\n}\n#mbs-preference-misc button {\n  background-origin: padding-box;\n  background-position: left;\n  background-size: min(7vh, 3.5vw) min(7vh, 3.5vw);\n}\n\n#mbs-preference-reset {\n  grid-area: reset;\n  grid-template-columns: min(40vh, 20vw);\n}\n#mbs-preference-reset button:not(:hover) {\n  background-color: pink;\n}\n\n#mbs-preference-import {\n  grid-area: import;\n  grid-template-columns: min(19vh, 9.5vw);\n}\n\n#mbs-preference-export {\n  grid-area: export;\n  grid-template-columns: min(19vh, 9.5vw);\n}\n\n#mbs-preference-changelog {\n  grid-area: changelog;\n  grid-template-columns: min(40vh, 20vw);\n}\n\n#mbs-preference-reset-screen {\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 2;\n}\n\n#mbs-preference-reset-background {\n  background: url("https://bananarama92.github.io/MBS/main/images/SheetMBS.png") var(--mbs-background-color);\n  background-blend-mode: multiply;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: contain;\n  box-sizing: border-box;\n  height: 80%;\n  justify-self: center;\n  mask-image: url("https://bananarama92.github.io/MBS/main/images/SheetMBS.png");\n  mask-position: center;\n  mask-repeat: no-repeat;\n  mask-size: contain;\n  padding: min(6vh, 3vw);\n  padding-top: min(3vh, 1.5vw);\n  position: relative;\n  width: 80%;\n  word-break: break-word;\n}\n\n#mbs-preference-reset-grid {\n  display: grid;\n  grid-template-columns: auto auto;\n  justify-items: center;\n  padding-top: min(10vh, 5vw);\n}\n#mbs-preference-reset-grid .mbs-button {\n  height: min(9vh, 4.5vw);\n  width: min(27vh, 13.5vw);\n}'.toString()}),p("h1",{id:dR.header,children:`Maid's Bondage Scripts ${t}`}),h("div",{id:dR.exit,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:dR.exitButton,onClick:this.exit.bind(this),style:{backgroundImage:"url('./Icons/Exit.png')"}}),p("span",{class:"mbs-button-tooltip",id:dR.exitTooltip,style:{justifySelf:"right"},children:"Exit"})]}),h("div",{id:dR.settingsGrid,children:[h("div",{class:"mbs-preference-settings-pair",id:dR.settingsPair+"0",children:[p("button",{class:"mbs-button",id:dR.itemsButton,style:{backgroundImage:"url('./Icons/Changelog.png')"},onClick:b(this,eR,"m",aR).bind(this)}),p("p",{id:dR.itemsHeader,children:`Show new R${Xg} items`})]}),h("div",{class:"mbs-preference-settings-pair",id:dR.settingsPair+"1",children:[p("button",{class:"mbs-button",id:dR.wheelButton,style:{backgroundImage:"url('./Icons/Crafting.png')"},onClick:b(this,eR,"m",sR).bind(this)}),p("p",{id:dR.wheelHeader,children:"Configure the wheel of fortune"})]}),h("div",{class:"mbs-preference-settings-pair",id:dR.settingsPair+"2",children:[p("input",{type:"checkbox",id:dR.rollCheckbox,onClick:()=>{Player.MBSSettings.RollWhenRestrained=!Player.MBSSettings.RollWhenRestrained,Cm([Rm.SETTINGS])}}),p("p",{id:dR.rollHeader,children:"Allow wheel rolling while restrained"})]}),h("div",{class:"mbs-preference-settings-pair",id:dR.settingsPair+"3",children:[p("input",{type:"checkbox",id:dR.lockCheckbox,onClick:()=>{Player.MBSSettings.LockedWhenRestrained=!Player.MBSSettings.LockedWhenRestrained,Cm([Rm.SETTINGS])}}),p("p",{id:dR.lockHeader,children:"Lock MBS settings while restrained"})]})]}),h("div",{id:dR.miscGrid,children:[h("div",{id:dR.reset,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:dR.resetButton,style:{backgroundImage:"url('./Icons/ServiceBell.png')"},onClick:b(this,eR,"m",rR).bind(this),children:"Reset MBS"}),p("span",{class:"mbs-button-tooltip",id:dR.resetTooltip,children:"Clear all MBS data"})]}),h("div",{id:dR.import,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:dR.importButton,onClick:b(this,eR,"m",tR).bind(this),children:"Import"}),p("span",{class:"mbs-button-tooltip",id:dR.importTooltip,children:"Import MBS settings"})]}),h("div",{id:dR.export,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:dR.exportButton,onClick:b(this,eR,"m",nR).bind(this),children:"Export"}),p("span",{class:"mbs-button-tooltip",id:dR.exportTooltip,children:"Export MBS settings"})]}),h("div",{id:dR.changelog,class:"mbs-button-div",children:[p("button",{class:"mbs-button",id:dR.changelogButton,style:{backgroundImage:"url('./Icons/Changelog.png')"},onClick:()=>open(vm(),"_blank"),children:"Latest Changes"}),p("span",{class:"mbs-button-tooltip",id:dR.changelogTooltip,children:"Open the MBS changelog"})]})]})]})),document.body.appendChild(p("div",{id:dR.resetScreen,class:"HideOnPopup mbs-screen","screen-generated":pR.screen,children:h("div",{id:dR.resetBackground,children:[p("h1",{children:"MBS data reset"}),p("p",{children:p("strong",{children:"- Warning -"})}),h("p",{children:["If you confirm, ",p("i",{children:"all"})," MBS data (including settings, overrides, and current states) will be permanently reset!"]}),p("p",{children:"You will be able to continue using MBS, but all of your configuration will be reset to default!"}),p("p",{children:p("strong",{children:"This action cannot be undone!"})}),h("div",{id:dR.resetGrid,children:[p("button",{class:"mbs-button",onClick:b(this,eR,"m",oR).bind(this),disabled:!0,id:dR.resetAccept,children:"Confirm (10)"}),p("button",{class:"mbs-button",onClick:this.exit.bind(this),id:dR.resetCancel,children:"Cancel"})]})]})})),"735A1207"!==Eh.getOriginalHash("MainHallRun")||"7A6D741A"!==Eh.getOriginalHash("MainHallClick")){const e=document.getElementById(dR.settingsGrid),t=document.getElementById(`${dR.settingsPair}0`);e.removeChild(t)}}load(){const e={[dR.lockCheckbox]:"LockedWhenRestrained",[dR.rollCheckbox]:"RollWhenRestrained"},t=Player.IsRestrained()&&Player.MBSSettings.LockedWhenRestrained;for(const[n,r]of Object.entries(e)){const e=document.getElementById(n);e.checked=Player.MBSSettings[r],e.disabled=t}super.load()}run(){DrawCharacter(Player,50,50,.9)}exit(){const e=document.getElementById(dR.resetScreen);"visible"===e.style.visibility?e.style.visibility="hidden":(super.exit(),this.exitScreens(!1))}}let hR;var fR,mR,gR;eR=new WeakSet,tR=function(){const e=prompt("Please paste MBS settings.\nImporting settings will overwrite existing settings. Are you sure?");if(!e)return;const t=function(e){kh.log("Importing new MBS settings");let t=null,n=null;try{t=JSON.parse(LZString.decompressFromBase64(e.trim())||"{}")}catch(e){n=e}if(n||null===t||"object"!=typeof t||Th(t))return kh.error("Aborting, failed to parse corrupted MBS settings",n),{status:Bm.ERROR,ok:!1};if(0===Object.keys(t).length)return kh.error("Aborting, detected empty or corrupted MBS settings"),{status:Bm.EMPTY_SETTINGS,ok:!1};const r=wm(t,!1);return r.ok?(Cm([Rm.SETTINGS,Rm.SHARED],!0),km(),{status:Bm.OK,...r}):{status:Bm.WARN,...r}}(e);switch(t.status){case Bm.OK:return kh.log("Settings successfully updated"),alert("Settings successfully updated!");case Bm.ERROR:return alert("ERROR: Detected corrupted MBS settings.\nNo changes were made.");case Bm.EMPTY_SETTINGS:return alert("ERROR: Detected empty or corrupted MBS settings.\nNo changes were made.");case Bm.WARN:return void(confirm("WARNING: MBS successfully parsed the settings but found one or more invalid fields; please check the browser console for more details.\nAre you sure you want to continue?")&&(Player.MBSSettings=t.settings,Cm([Rm.SETTINGS,Rm.SHARED],!0),km(),kh.log("Settings successfully updated"),alert("Settings successfully updated!")));default:throw new Error(`Unknown status type: ${t.status}`)}},nR=function(){const e=LZString.compressToBase64(JSON.stringify(Player.MBSSettings));navigator.clipboard.writeText(e),alert("MBS settings copied to clipboard.")},rR=function(){const e=document.getElementById(dR.resetScreen),t=document.getElementById(dR.resetAccept);e.style.visibility="visible",t.disabled=!0,b(this,eR,"m",iR).call(this,t)},iR=async function(e){let t=9;for(;t>=0;)await new Promise((e=>setTimeout(e,1e3))),e.innerText=`Confirm (${t})`,t--;e.innerText="Confirm",e.disabled=!1},oR=function(){delete Player.ExtensionSettings.MBS,void 0!==Player.OnlineSharedSettings&&(delete Player.OnlineSharedSettings.MBSVersion,delete Player.OnlineSharedSettings.MBS,Player.OnlineSharedSettings.WheelFortune=lm),WheelFortuneOption=WheelFortuneOption.filter((e=>!0!==e.Custom)),WheelFortuneDefault=lm,Player.Crafting=Player.Crafting?.slice(0,pm),Player.MBSSettings=Object.seal({Version:t,CraftingCache:"",FortuneWheelItemSets:Object.seal(Array(RR).fill(null)),FortuneWheelCommands:Object.seal(Array(RR).fill(null)),LockedWhenRestrained:!1,RollWhenRestrained:!0,FortuneWheelPresets:Object.seal(Array(vR).fill(null))}),ServerAccountUpdate.QueueData({ExtensionSettings:Player.ExtensionSettings,OnlineSharedSettings:Player.OnlineSharedSettings},!0),kh.log("Settings successfully reset"),km(),this.exit()},aR=function(){const e=ServerPlayerIsInChatRoom()?ChatRoomData?.Background:void 0,t=ServerPlayerIsInChatRoom()?["Online","ChatRoom"]:["Character","Preference"];this.exit(),PreferenceExit(),Shop2Vars.Mode="Preview",Shop2Vars.Filters.MBS_VersionFilter=e=>Qg[`${e.Asset.Group.Name}${e.Asset.Name}`]?["Buy","Sell","Preview"]:[],Shop2.Init(e,t),ServerBeep={Message:'The MBS "Show new items" button will be removed in R103; use the Club Shop or /shop chat command instead',Timer:CommonTime()+1e4}},sR=function(){const e={FortuneWheelItemSets:If(Player,"FortuneWheelItemSets","item sets"),FortuneWheelCommands:If(Player,"FortuneWheelCommands","commands")},[t,n,r,i]=this.screenParams[this.ids.root].shape,o={[_f.ids.root]:{shape:[95,n,r+(t-95),i]}};this.loadChild(_f,e,Player,o)},pR.screen="MBS_PreferenceScreen",pR.ids=dR,pR.screenParamsDefault={[cR]:Object.freeze({shape:[525,75,1380,850],visibility:"visible"}),[dR.resetScreen]:Object.freeze({shape:[0,0,2e3,1e3],visibility:"hidden"})},Mh(CR).then((()=>{Eh.hookFunction("PreferenceLoad",0,((e,t)=>{t(e),lR()})),Eh.hookFunction("ServerPlayerIsInChatRoom",0,((e,t)=>CurrentScreen==pR.screen&&"ChatRoom"==InformationSheetPreviousScreen||t(e))),Eh.hookFunction("PreferenceClick",0,((e,t)=>{const n=PreferenceSubscreen;t(e),n||PreferenceSubscreen!==pR.screen||(PreferenceExit(),hR.loadChild(pR))})),PreferenceSubscreenList.push(pR.screen),hR=new uR,"Preference"===CurrentScreen&&lR()}));const RR=32,vR=8,yR=Object.freeze(["Blue","Gold","Gray","Green","Orange","Purple","Red","Yellow"]);function bR(e){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "character" type: '+typeof e);if(!e.IsSimple()&&!e.IsPlayer())throw new Error("Expected a simple or player character")}function SR(e){if(!(e.OnlineSharedSettings?.BlockBodyCosplay??!0))return!0;const t=Oh.getRuleState("alt_allow_changing_appearance");return!(null===t||!e.IsPlayer())&&(t.inEffect&&t.isEnforced&&t.customData.minimumRole>3)}function wR(e){if("string"!=typeof e)throw new TypeError('Invalid "IDs" type: '+typeof e);let t="";for(const n of WheelFortuneOption)e.includes(n.ID)&&(t+=n.ID);return t}function CR(e=!0){return"object"==typeof MainCanvas&&(!e||GameVersionFormat.test(GameVersion))}function kR(){return CR()&&void 0!==Player.OnlineSharedSettings}function BR(){return kR()&&void 0!==Player.MBSSettings}const PR=Object.freeze({"PSO Bondage":0,Mummification:1,"Bondage Maid":2,Petrification:3});class xR{constructor(e,t){this.name=null,this.mbsList=e,this.weight=Number.isInteger(t)?ro(t,1,9):1}reset(){this.name=null,this.weight=1}isValid(e=null){return!!this.name&&this.mbsList.every(((t,n)=>n===e||t?.name!==this.name))}toString(){return _h(typeof this,this.toJSON())}}class IR extends xR{get stripLevel(){return this.stripIter.value}set stripLevel(e){const t=this.stripIter.list.indexOf(e);this.stripIter.setPosition(t)}get equipLevel(){return this.equipIter.value}set equipLevel(e){const t=this.equipIter.list.indexOf(e);this.equipIter.setPosition(t)}constructor(e,t){super(e,t),this.itemList=null,this.flags=Object.freeze(Ff.map((e=>Object.seal({...e})))),this.outfitCache=null,this.stripIter=new $h([qh.NONE,qh.CLOTHES,qh.UNDERWEAR,qh.COSPLAY],qh.UNDERWEAR),this.equipIter=new $h([qh.NONE,qh.CLOTHES,qh.UNDERWEAR,qh.COSPLAY],qh.UNDERWEAR)}reset(){super.reset(),this.itemList=null,this.outfitCache=null,this.stripLevel=qh.UNDERWEAR,this.equipLevel=qh.UNDERWEAR,Ff.forEach(((e,t)=>Object.assign(this.flags[t],e)))}readSettings(e){if(!(e instanceof _R))throw new TypeError('Invalid "ItemSet" type: '+typeof e);this.name=e.name,this.itemList=e.itemList,this.stripLevel=e.stripLevel,this.equipLevel=e.equipLevel,this.outfitCache=null,this.weight=e.weight,e.flags.forEach(((e,t)=>Object.assign(this.flags[t],e)))}writeSettings(e=null){if(null===this.name||null===this.itemList)throw new Error('Cannot create an ItemSet while "name" or "itemList" is null');return new _R(this.name,this.itemList,this.mbsList,this.stripLevel,this.equipLevel,this.flags,!0,e,this.weight)}loadFromBase64(){if(null===this.outfitCache)return!1;let e,t;try{e=JSON.parse(LZString.decompressFromBase64(this.outfitCache.trim())),t=function(e){if(!Th(e)){if(null===e||"object"!=typeof e)throw new TypeError('Invalid "items" type: '+typeof e);e=[e]}const t=[],n=new Map,r=new Set;return e.forEach(((e,i)=>{let o=null;try{o=AssetGet("Female3DCG",e.Group,e.Name);const n=of(o,e);!r.has(e.Group)&&null!=o&&(o.Group.IsItem()||o.Group.IsAppearance()&&o.Group.AllowNone)&&(r.add(e.Group),t.push(n))}catch(e){let t=`${o?.Group?.Name}${o?.Name}`;t.includes("undefined")&&(t=`Item ${i}`),n.set(t,e)}})),0!==n.size&&kh.log(`Failed to parse ${n.size} of the provided items`,n),t}(e)}catch(e){return kh.warn("Failed to parse outfit code:",e),!1}return 0!==t.length&&(this.itemList=Object.freeze(function(e,t=Uh){const n=Yh(e,t);return Td(e,(e=>n.get(e.Group)?.priority??1/0))}(t)),!0)}isValid(e=null){return super.isValid(e)&&null!==this.itemList&&this.flags.some((e=>e.enabled))}toJSON(){return{name:this.name,itemList:this.itemList,stripLevel:this.stripLevel,equipLevel:this.equipLevel,flags:this.flags,outfitCache:this.outfitCache}}}class MR extends xR{readSettings(e){if(!(e instanceof $R))throw new TypeError('Invalid "command" type: '+typeof e);this.name=e.name,this.weight=e.weight}writeSettings(){if(null===this.name)throw new Error('Cannot create a Command while "name" is null');return new $R(this.name,this.mbsList,this.weight)}toJSON(){return{name:this.name}}}class ER{get children(){return b(this,fR,"f")}get index(){return this.mbsList.findIndex((e=>e===this))}constructor(e,t,n,r){fR.set(this,null),this.name=e,this.custom=t,this.mbsList=n,this.weight=r}static validate(e){throw new Error("Trying to call an abstract method")}static fromObject(...e){throw new Error("Trying to call an abstract method")}register(){S(this,fR,this.toOptions(),"f")}unregister(){S(this,fR,null,"f")}toString(){return _h(typeof this,this.toJSON())}}fR=new WeakMap;class OR extends ER{constructor(){super(...arguments),mR.add(this)}register(e=!0){super.register();let t=b(this,mR,"m",gR).call(this);for(const e of this.children){const n=WheelFortuneOption.findIndex((t=>t.ID===e.ID));-1!==n?(WheelFortuneOption[n]=e,e.Default&&!WheelFortuneDefault.includes(e.ID)&&(WheelFortuneDefault+=e.ID)):(WheelFortuneOption.splice(t,0,e),e.Default&&(WheelFortuneDefault+=e.ID)),t+=1}e&&Cm([Rm.SHARED])}unregister(e=!0){const t=this.children?.map((e=>e.ID))??[];super.unregister(),WheelFortuneOption=WheelFortuneOption.filter((e=>!t.includes(e.ID))),WheelFortuneDefault=Array.from(WheelFortuneDefault).filter((e=>!t.includes(e))).join(""),e&&Cm([Rm.SHARED])}}mR=new WeakSet,gR=function(){if(this.children?.length){const e=this.children[0].ID,t=WheelFortuneOption.findIndex((t=>t.ID>=e));return-1===t?WheelFortuneOption.length:t}return WheelFortuneOption.length};class _R extends OR{constructor(e,t,n,r,i,o,a,s,l){const u=_R.validate({name:e,itemList:t,mbsList:n,stripLevel:r,equipLevel:i,flags:o,custom:a,preRunCallback:s,weight:l});super(u.name,u.custom,u.mbsList,u.weight),this.itemList=u.itemList,this.stripLevel=u.stripLevel,this.equipLevel=u.equipLevel,this.flags=u.flags,this.preRunCallback=u.preRunCallback}static validate(e){if("string"!=typeof e.name)throw new TypeError('Invalid "name" type: '+typeof e.name);if(!Th(e.itemList))throw new TypeError('Invalid "itemList" type: '+typeof e.itemList);{const t=[],n=[];for(let r of e.itemList){const e=AssetGet("Female3DCG",r.Group,r.Name);null!=e?(e.Group.IsItem()||e.Group.IsAppearance()&&e.Group.AllowNone)&&(r.TypeRecord||void 0===r.Type||(r=Object.freeze({...gc(r,"Type"),TypeRecord:ExtendedItemTypeToRecord(e,r.Type)})),t.push(r)):n.push(`${r.Group}:${r.Name}`)}e.itemList=Object.freeze(t),0!==n.length&&kh.warn(`Found ${n.length} items in wheel of fortune item set "${this.name}": ${n}`)}if(!Th(e.mbsList))throw new TypeError('Invalid "mbsList" type: '+typeof e.mbsList);if(jh(Object.values(qh),e.stripLevel)||(e.stripLevel=qh.UNDERWEAR),jh(Object.values(qh),e.equipLevel)||(e.stripLevel=qh.UNDERWEAR),Th(e.flags)){let t;if(e.flags.every((e=>"string"==typeof e))){t=function(e){return Ff.map(((t,n)=>{const r={...t};return r.enabled=e.includes($f[n]),r}))}(e.flags)}else t=function(e){return Ff.map(((t,n)=>{const r=e[n];if(null===r||"object"!=typeof r||r.type!==t.type)return{...t};const i="boolean"==typeof r.enabled?r.enabled:t.enabled;switch(r.type){case"TimerPasswordPadlock":return Number.isInteger(r.time)&&r.time>=1&&r.time<=86400?{type:r.type,description:t.description,time:r.time,enabled:i}:{...t};case"ExclusivePadlock":case"HighSecurityPadlock":case null:return{type:r.type,description:t.description,enabled:i};default:return{...t}}}))}(e.flags);t.every((e=>!e.enabled))&&(t[0].enabled=!0),e.flags=Object.freeze(t.map((e=>Object.freeze(e))))}else e.flags=Ff;return"boolean"!=typeof e.custom&&(e.custom=!0),null!==e.preRunCallback&&"function"!=typeof e.preRunCallback&&(e.preRunCallback=null),Number.isInteger(e.weight)?e.weight=ro(e.weight,1,9):e.weight=1,e}static fromObject(e,t){const n=[t.name,t.itemList,e,t.stripLevel,t.equipLevel,t.flags,t.custom,t.preRunCallback,t.weight];return new _R(...n)}scriptFactory(e=null){const t=this.itemList.map((({Name:e,Group:t})=>AssetGet(Player.AssetFamily,t,e)));return n=>{n=n??Player;const r=Kh(this.equipLevel,n),i=this.itemList.filter(((e,n)=>{const i=t[n];return null!=i&&("Appearance"!==i.Group.Category||r(i))}));Qh(this.name,i,this.stripLevel,e,this.preRunCallback,n??Player)}}getIDs(){const e=[];for(const[t,n]of this.flags.entries())n.enabled&&e.push(t);let t;if(this.custom){if(t=256*(2+Math.floor(this.index/16))+16*this.index,t<0)throw new Error(`Item set "${this.name}" absent from currently selected fortune wheel sets`)}else if(t=256+16*PR[this.name],Number.isNaN(t))throw new Error(`Unknown default item set "${this.name}"`);return Fh(t,e)}toOptions(){const e=this.flags.filter((e=>e.enabled)),t=this.getIDs();return e.map(((e,n)=>{const r=null===e.type?this.name:`${this.name}: ${Nf(e)}`;let i=!0;switch(e.type){case"HighSecurityPadlock":case null:i=!1;break;case"TimerPasswordPadlock":i=4!==n}return{ID:t[n],Color:Md(yR),Script:this.scriptFactory(((...t)=>function(e,t,n){const r=e.type;switch(r){case"TimerPasswordPadlock":Lf(t,e.time,n);break;case"ExclusivePadlock":Tf(t,"ExclusivePadlock",n);break;case"HighSecurityPadlock":InventoryDoesItemAllowLock(t)&&t.Craft&&(t.Craft.Property="Puzzling"),Hf(t,n);break;case null:break;default:throw new Error(`Unknown flag type: ${r}`,e)}}(e,...t))),Description:r,Default:i,Custom:this.custom,Parent:this,Flag:e,Weight:this.weight}}))}toJSON(){return{name:this.name,itemList:this.itemList,stripLevel:this.stripLevel,equipLevel:this.equipLevel,flags:this.flags,custom:this.custom,preRunCallback:this.preRunCallback,weight:this.weight}}}class $R extends OR{constructor(e,t,n){const r=$R.validate({name:e,mbsList:t,weight:n});super(r.name,!0,r.mbsList,r.weight)}static validate(e){if("string"!=typeof e.name)throw new TypeError('Invalid "name" type: '+typeof e.name);if(!Array.isArray(e.mbsList))throw new TypeError('Invalid "mbsList" type: '+typeof e.mbsList);return Number.isInteger(e.weight)?e.weight=ro(e.weight,1,9):e.weight=1,e}static fromObject(e,t){const n=[t.name,e,t.weight];return new $R(...n)}toOptions(){const[e]=this.getIDs();return[{ID:e,Color:Md(yR),Description:this.name,Default:!0,Custom:this.custom,Parent:this,Script:void 0,Flag:void 0,Weight:this.weight}]}getIDs(){const e=256*(3+Math.floor(this.index/16))+this.index;return[String.fromCharCode(e)]}toJSON(){return{name:this.name,weight:this.weight}}}let FR=null;function LR(){return null===FR&&(FR=CharacterLoadSimple("MBSAPI")),FR}var HR=Object.freeze({__proto__:null,getAll:function(){if(!BR())return kh.error("MBS not fully loaded yet"),{};const e=Player.MBSSettings.FortuneWheelItemSets,t={};for(const[n,r]of e.entries())null!==r&&(t[r.name]={name:r.name,index:n,items:af(r.itemList,LR())});return t},getByIndex:function(e){if("number"!=typeof e)throw new TypeError('Invalid "index" type: '+typeof e);if(!BR())return void kh.error("MBS not fully loaded yet");const t=Player.MBSSettings.FortuneWheelItemSets[e];return null==t?void 0:{name:t.name,index:e,items:af(t.itemList,LR())}},getByName:function(e){if("string"!=typeof e)throw new TypeError('Invalid "name" type: '+typeof e);if(!BR())return void kh.error("MBS not fully loaded yet");let t=-1;const n=Player.MBSSettings.FortuneWheelItemSets.find(((n,r)=>{const i=n?.name===e;return i&&(t=r),i}));return null==n?void 0:{name:e,index:t,items:af(n.itemList,LR())}},getIndices:function(){return BR()?Player.MBSSettings.FortuneWheelItemSets.filter((e=>null!==e)).map(((e,t)=>t)):(kh.error("MBS not fully loaded yet"),[])},getNames:function(){return BR()?Player.MBSSettings.FortuneWheelItemSets.filter((e=>null!==e)).map((e=>e.name)):(kh.error("MBS not fully loaded yet"),[])}});const TR=Object.freeze({backgroundColor:"--mbs-background-color",buttonColor:"--mbs-button-color",buttonHoverColor:"--mbs-hover-color",tooltipColor:"--mbs-tooltip-color",borderColor:"--mbs-border-color",textColor:"--mbs-text-color"}),AR=Object.freeze({backgroundColor:"white",buttonColor:"white",buttonHoverColor:"cyan",tooltipColor:"lightyellow",borderColor:"black",textColor:"black"});var NR=Object.freeze({__proto__:null,DEFAULT_STYLE:AR,getStyle:function(){const e=document.querySelector(":root");return e?Dh(Nh(TR).map((([t,n])=>[t,e.style.getPropertyValue(n)||AR[t]]))):(kh.error(":root selector missing in document"),{...AR})},setStyle:function(e){if("object"!=typeof e)throw new TypeError(`Invalid style type: "${typeof e}"`);if(null===e)throw new Error("Invalid style value: null");const t=document.querySelector(":root");if(t)for(const[n,r]of Nh(TR)){const i=e[n];void 0!==i&&t.style.setProperty(r,i)}else kh.error(":root selector missing in document")}});const DR=Object.freeze({major:1,minor:3}),jR=function(){return BR()?JSON.stringify({log:kh,settings:Player.MBSSettings},void 0,4):JSON.stringify({log:kh,settings:"ERROR: MBS not fully loaded yet"},void 0,4)};Mh(CR).then((()=>{"undefined"!=typeof FUSAM&&"function"==typeof FUSAM.registerDebugMethod&&FUSAM.registerDebugMethod("mbs",jR)}));const WR="raises",GR="passes";function zR(e,t,n){if(!t)throw void 0===n?new Error(`${e}`):new Error(`${e}: ${n}`)}function VR(e,t,n){try{t()}catch(t){const r=t;if(r?.message!==n)throw new Error(`${e}: Invalid error message\nExpected error: "${n}"\nObserved error: "${r?.message}"`);return}throw new Error(`${e}: Failed to raise an error`)}function qR(e,t){try{return t()}catch(t){throw new Error(`${e}: Unexpected error message: ${t}`,{cause:t})}}function UR(e,t,n,r){if(r=r??ZR,!$u(t,n))throw new Error(`${e}: Passed objects not equal:\nObserved: ${r(t)}\nExpected: ${r(n)}`)}function KR(e,t,n){if(typeof t!==n)throw new Error(`${e}: Invalid object type "${typeof t}", expected "${n}"`)}function JR(e,t,n){if(t.length!==n)throw new Error(`${e}: Invalid object length ${t.length}, expected ${n}`)}function YR(e,t){switch(typeof t){case"undefined":return"__UNDEFINED__";case"function":return"__FUNCTION__";case"symbol":return"__SYMBOL__";default:return t}}function ZR(e){return JSON.stringify(e,YR,1)}var XR=Object.freeze({__proto__:null,test_LoopIterator:function(){const e="test_LoopIterator";[{args:[void 0],excMessage:'Invalid "iterable" type: undefined'},{args:[[]],excMessage:'Passed "iterable" must contain at least one element'},{args:[[1],.5],excMessage:'"index" must be an integer: 0.5'},{args:[[0,1],3],excMessage:'"index" must fall in the [0, 1] interval: 3'}].forEach((({args:t,excMessage:n},r)=>{VR(`${e}:constructor:${WR}:${r}`,(()=>new $h(...t)),n)}));const t=new $h([0,1,2,3],0);let n;UR(`${e}:list:${GR}:0`,t.list,[0,1,2,3]),UR(`${e}:index:${GR}:0`,t.index,0),UR(`${e}:value:${GR}:0`,t.index,0),KR(`${e}:[Symbol.iterator]:${GR}:0`,t[Symbol.iterator],"function"),n=qR(`${e}:next:${GR}:0`,(()=>t.next(!1))),UR(`${e}:next:${GR}:0`,n,1),UR(`${e}:next:${GR}:0`,t.index,0),n=qR(`${e}:next:${GR}:0`,(()=>t.next())),UR(`${e}:next:${GR}:0`,n,1),UR(`${e}:next:${GR}:0`,t.index,1),VR(`${e}:setPosition:${WR}:0`,(()=>t.setPosition(10)),'"index" must fall in the [0, 3] interval: 10'),qR(`${e}:setPosition:${GR}:0`,(()=>t.setPosition(0))),UR(`${e}:setPosition:${GR}:0`,t.index,0),n=qR(`${e}:previous:${GR}:0`,(()=>t.previous(!1))),UR(`${e}:previous:${GR}:0`,n,3),UR(`${e}:previous:${GR}:0`,t.index,0),n=qR(`${e}:previous:${GR}:0`,(()=>t.previous())),UR(`${e}:previous:${GR}:0`,n,3),UR(`${e}:previous:${GR}:0`,t.index,3),n=qR(`${e}:toString:${GR}:0`,(()=>t.toString())),KR(`${e}:toString:${GR}:0`,n,"string"),n=qR(`${e}:toJSON:${GR}:0`,(()=>t.toJSON())),UR(`${e}:toJSON:${GR}:0`,t.toJSON(),{list:[0,1,2,3],index:3})},test_MBS_VERSION:function(){KR(`test_MBS_VERSION:${GR}:0`,t,"string")},test_Version:function(){const e="test_Version";[{args:["bob",0,0,!1],excMessage:'Invalid "major" type: string'},{args:[0,"bob",0,!1],excMessage:'Invalid "minor" type: string'},{args:[0,0,"bob",!1],excMessage:'Invalid "micro" type: string'},{args:[0,0,0,"bob"],excMessage:'Invalid "beta" type: string'}].forEach((({args:t,excMessage:n},r)=>{VR(`${e}:constructor:${WR}:${r}`,(()=>new Hh(...t)),n)}));const t=new Hh(1,0,5),n=new Hh(2,3,1),r=new Hh(0,99,5,!0);UR(`${e}:major:${GR}:0`,t.major,1),UR(`${e}:minor:${GR}:0`,t.minor,0),UR(`${e}:micro:${GR}:0`,t.micro,5),UR(`${e}:beta:${GR}:0`,t.beta,!1),zR(`${e}:equal:${GR}:0`,!t.equal(null)),zR(`${e}:equal:${GR}:1`,t.equal(t)),zR(`${e}:equal:${GR}:2`,!t.equal(n)),zR(`${e}:equal:${GR}:3`,!t.equal(r)),zR(`${e}:greater:${GR}:0`,!t.greater(null)),zR(`${e}:greater:${GR}:1`,!t.greater(t)),zR(`${e}:greater:${GR}:2`,!t.greater(n)),zR(`${e}:greater:${GR}:3`,t.greater(r)),zR(`${e}:lesser:${GR}:0`,!t.lesser(null)),zR(`${e}:lesser:${GR}:1`,!t.lesser(t)),zR(`${e}:lesser:${GR}:2`,t.lesser(n)),zR(`${e}:lesser:${GR}:3`,!t.lesser(r)),zR(`${e}:greaterOrEqual:${GR}:0`,!t.greaterOrEqual(null)),zR(`${e}:greaterOrEqual:${GR}:1`,t.greaterOrEqual(t)),zR(`${e}:greaterOrEqual:${GR}:2`,!t.greaterOrEqual(n)),zR(`${e}:greaterOrEqual:${GR}:3`,t.greaterOrEqual(r)),zR(`${e}:lesserOrEqual:${GR}:0`,!t.lesserOrEqual(null)),zR(`${e}:lesserOrEqual:${GR}:1`,t.lesserOrEqual(t)),zR(`${e}:lesserOrEqual:${GR}:2`,t.lesserOrEqual(n)),zR(`${e}:lesserOrEqual:${GR}:3`,!t.lesserOrEqual(r));let i=qR(`${e}:fromVersion:${GR}:0`,(()=>Hh.fromVersion("1.0.5")));UR(`${e}:fromVersion:${GR}:0`,i,t),VR(`${e}:fromVersion:${WR}:0`,(()=>Hh.fromVersion(void 0)),'Invalid "version": undefined'),i=qR(`${e}:fromVersion:${GR}:0`,(()=>Hh.fromBCVersion("R109Beta3"))),UR(`${e}:fromVersion:${GR}:0`,i,new Hh(109,0,0,!0)),VR(`${e}:fromVersion:${WR}:0`,(()=>Hh.fromVersion(void 0)),'Invalid "version": undefined'),i=qR(`${e}:toString:${GR}:0`,(()=>t.toString())),KR(`${e}:toString:${GR}:0`,i,"string"),i=qR(`${e}:toJSON:${GR}:0`,(()=>t.toJSON())),UR(`${e}:toJSON:${GR}:0`,i,{major:1,minor:0,micro:5,beta:!1})},test_generateIDs:function(){const e="test_generateIDs";[{args:[0,void 0],excMessage:'Invalid "indices" type: undefined'},{args:[65535,[5]],excMessage:'"stop" must fall in the [65536, 65535] interval: 65541'}].forEach((({args:t,excMessage:n},r)=>{VR(`${e}:${WR}:${r}`,(()=>Fh(...t)),n)})),[{args:[80,[0,4,6]],output:["P","T","V"]},{args:[1024,[0,4,1]],output:["Ѐ","Є","Ё"]},{args:[0,[]],output:[]}].forEach((({args:t,output:n},r)=>{const i=qR(`${e}:${GR}:${r}`,(()=>Fh(...t)));UR(`${e}:${GR}:${r}`,i,n)}))},test_getRandomPassword:function(){const e="test_getRandomPassword";[{args:[void 0],excMessage:'Invalid "n" type: undefined'}].forEach((({args:t,excMessage:n},r)=>{VR(`${e}:${WR}:${r}`,(()=>Ih(...t)),n)})),yd(0,9).forEach((t=>{const n=qR(`${e}:${GR}:${t}`,(()=>Ih(t)));KR(`${e}:${GR}:${t}`,n,"string"),JR(`${e}:${GR}:${t}`,n,t)}))},test_isIterable:function(){const e="test_isIterable";[{args:[null],output:!1},{args:[1],output:!1},{args:[[1]],output:!0},{args:[new Set],output:!0}].forEach((({args:t,output:n},r)=>{const i=qR(`${e}:${GR}:${r}`,(()=>Lh(...t)));UR(`${e}:${GR}:${r}`,i,n)}))},test_padArray:function(){const e="test_padArray";[{args:[[],.5,null],excMessage:'"n" must be an integer: 0.5'},{args:[void 0,5,null],excMessage:'Invalid "list" type: undefined'}].forEach((({args:t,excMessage:n},r)=>{VR(`${e}:${WR}:${r}`,(()=>Ph(...t)),n)})),[{args:[["a","b","c"],5,"test"],output:["a","b","c","test","test"]},{args:[["a","b","c"],2,"test"],output:["a","b","c"]}].forEach((({args:t,output:n},r)=>{const i=qR(`${e}:${GR}:${r}`,(()=>Ph(...t)));UR(`${e}:${GR}:${r}`,i,n)}))},test_trimArray:function(){const e="test_trimArray";[{args:[[],.5],excMessage:'"n" must be an integer: 0.5'},{args:[void 0,5],excMessage:'Invalid "list" type: undefined'}].forEach((({args:t,excMessage:n},r)=>{VR(`${e}:${WR}:${r}`,(()=>xh(...t)),n)})),[{args:[["a","b","c"],1],output:["a"]},{args:[["a","b","c"],4],output:["a","b","c"]}].forEach((({args:t,output:n},r)=>{const i=qR(`${e}:${GR}:${r}`,(()=>xh(...t)));UR(`${e}:${GR}:${r}`,i,n)}))},test_validateInt:function(){const e="test_validateInt";[{args:[.5,"test"],excMessage:'"test" must be an integer: 0.5'},{args:["test","test"],excMessage:'Invalid "test" type: string'},{args:[5,"test",10],excMessage:'"test" must fall in the [10, Infinity] interval: 5'},{args:[5,"test",0,3],excMessage:'"test" must fall in the [0, 3] interval: 5'}].forEach((({args:t,excMessage:n},r)=>{VR(`${e}:${WR}:${r}`,(()=>Bh(...t)),n)})),qR(`${e}:${GR}:0`,(()=>Bh(0,"test")))}});var QR=Object.freeze({__proto__:null,test_FORTUNE_WHEEL_COLORS:function(){const e="test_FORTUNE_WHEEL_COLORS";zR(`${e}:${GR}:0`,Array.isArray(yR)),zR(`${e}:${GR}:0`,yR.every((e=>"string"==typeof e)))},test_FORTUNE_WHEEL_MAX_SETS:function(){const e="test_FORTUNE_WHEEL_MAX_SETS";KR(`${e}:${GR}:0`,RR,"number"),zR(`${e}:${GR}:0`,Number.isInteger(RR)),zR(`${e}:${GR}:0`,RR>=0)},test_canChangeCosplay:function(){const e="test_canChangeCosplay",t=yd(0,3).map((t=>`${e}${t}`)).map((e=>{const t=CharacterLoadSimple(e);return t.OnlineSharedSettings=t.OnlineSharedSettings??{},t}));try{t[1].OnlineSharedSettings={...t[1].OnlineSharedSettings??{},BlockBodyCosplay:!1},t[2].OnlineSharedSettings={...t[1].OnlineSharedSettings??{},BlockBodyCosplay:!0};[{args:[t[0]],output:!1},{args:[t[1]],output:!0},{args:[t[2]],output:!1}].forEach((({args:t,output:n},r)=>{const i=qR(`${e}:${GR}:${r}`,(()=>SR(...t)));UR(`${e}:${GR}:${r}`,i,n)}))}finally{t.forEach((e=>CharacterDelete(e)))}},test_equipHighSecLock:function(){const e="test_equipHighSecLock",t=CharacterLoadSimple(e);try{const n=AssetGet(t.AssetFamily,"ItemArms","LatexArmbinder");if(null==n)throw new Error;const r={Asset:n};qR(`${e}:${GR}:0`,(()=>Hf(r,t))),UR(`${e}:${GR}:0`,r.Property?.MemberNumberListKeys,"")}finally{CharacterDelete(t)}},test_equipLock:function(){const e="test_equipLock",t=yd(0,5).map((t=>`${e}-${t}`)).map(CharacterLoadSimple);try{t[4].BlockItems.push({Name:"ExclusivePadlock",Group:"ItemMisc"}),InventoryWear(t[2],"LatexArmbinder","ItemArms"),InventoryLock(t[2],t[2].Appearance.at(-1),"ExclusivePadlock");const n=AssetGet(t[0].AssetFamily,"ItemArms","LatexArmbinder"),r=AssetGet(t[0].AssetFamily,"ItemArms","NylonRope");if(null==n||null==r)throw new Error;const i={Asset:n};[{args:["bob","ExclusivePadlock",t[0]],excMessage:'Invalid "item" type: string'},{args:[i,0,t[0]],excMessage:'Invalid "lockName" type: number'},{args:[i,"bob",t[0]],excMessage:'Invalid "lockName" value: bob'},{args:[i,"ExclusivePadlock",1],excMessage:'Invalid "character" type: number'}].forEach((({args:t,excMessage:n},r)=>{VR(`${e}:${WR}:${r}`,(()=>Tf(...t)),n)}));[{args:[i,"ExclusivePadlock",t[1]],output:!0},{args:[i,"ExclusivePadlock",t[2]],output:!1},{args:[{Asset:r},"ExclusivePadlock",t[3]],output:!1},{args:[i,"ExclusivePadlock",t[4]],output:!1}].forEach((({args:t,output:n},r)=>{const i=qR(`${e}:${GR}:${r}`,(()=>Tf(...t)));UR(`${e}:${GR}:0`,i,n)}))}finally{t.forEach((e=>CharacterDelete(e)))}},test_equipTimerLock:function(){const e="test_equipTimerLock",t=CharacterLoadSimple(e);try{const n=AssetGet(t.AssetFamily,"ItemArms","LatexArmbinder");if(null==n)throw new Error;const r={Asset:n};VR(`${e}:${WR}:0`,(()=>Lf(r,void 0,t)),'Invalid "seconds" type: undefined'),qR(`${e}:${GR}:0`,(()=>Lf(r,99,t))),zR(`${e}:${GR}:0`,(r.Property?.RemoveTimer??1/0)<=CurrentTime+198e4),UR(`${e}:${GR}:0`,r.Property?.RemoveItem,!0),UR(`${e}:${GR}:0`,r.Property?.LockSet,!0),KR(`${e}:${GR}:0`,r.Property?.Password,"string")}finally{CharacterDelete(t)}},test_sanitizeWheelFortuneIDs:function(){const e="test_sanitizeWheelFortuneIDs";VR(`${e}:${WR}:0`,(()=>wR(void 0)),'Invalid "IDs" type: undefined'),[{args:["ABC"],output:"ABC"},{args:["A䀁"],output:"A"}].forEach((({args:t,output:n},r)=>{const i=qR(`${e}:${GR}:${r}`,(()=>wR(...t)));UR(`${e}:${GR}:${r}`,i,n)}))},test_settingsLoaded:function(){const e="test_settingsLoaded",t=qR(`${e}:${GR}:0`,kR);UR(`${e}:${GR}:0`,t,!0)},test_settingsMBSLoaded:function(){const e="test_settingsMBSLoaded",t=qR(`${e}:${GR}:0`,BR);UR(`${e}:${GR}:0`,t,!0)}});const ev=Object.freeze({Mummification:e=>({...e,TypeRecord:void 0})});var tv=Object.freeze({__proto__:null,test_builtinMBSWheel:function(){const e="test_builtinMBSWheel",t=Mr(Object.values(am).map((e=>e.children??[]))),n=t.map((e=>e.Description)).map((e=>CharacterLoadSimple(e)));try{t.forEach((t=>{if(!(t.Parent instanceof _R))return;const n=CharacterLoadSimple(t.Description);t.Script(n);for(let r of t.Parent.itemList){const i=InventoryGet(n,r.Group);if(void 0!==r.Equip)continue;zR(`${e}:${t.Description}:${r.Group}:${r.Name}:${GR}`,null!=i);const o=(ev[t.Parent.name]??(e=>e))(of(i.Asset,{...i,Group:i.Asset.Group.Name,Name:i.Asset.Name,Color:void 0===r.Color?void 0:i.Color},!1),n);null!==o&&(r={...r,ItemCallback:void 0,Property:{...o.Property,...r.Property},Equip:void 0,Craft:void 0!==r.Craft&&"HighSecurityPadlock"===t.Flag.type&&InventoryDoesItemAllowLock(i)?{...r.Craft,Property:"Puzzling"}:r.Craft},UR(`${e}:${t.Description}:${r.Group}:${r.Name}:${GR}`,o,r))}}))}finally{n.forEach((e=>CharacterDelete(e)))}}});const nv=function(){if(!BR())return kh.warn("MBS not fully loaded yet"),!1;const e={...XR,...QR,...tv},t={};for(const[n,r]of Nh(e))try{r()}catch(e){t[n]=e}return 0===Object.values(t).length||(kh.warn(t),!1)};Mh(CR).then((()=>{const e={[`${wf.screen}Background`]:wf.background,[`${Bf.screen}Background`]:Bf.background,[`${_f.screen}Background`]:_f.background,[`${pR.screen}Background`]:pR.background,[`${nm.screen}Background`]:nm.background},t=globalThis;Object.assign(t,e)}));const rv=new Set;Mh(CR).then((()=>{if("R102"===GameVersion)if("undefined"==typeof CraftingAssetsPopulate){rv.add(4900);const e=Object.freeze(function(){const e={},t={};for(const n of Asset)n.Group.IsItem()&&!n.IsLock&&n.Wear&&n.Enable&&(n.CraftGroup?(t[n.CraftGroup]??=[],t[n.CraftGroup].push(n)):(e[n.Name]??=[],e[n.Name].push(n)));for(const n of Object.values(t)){const t=new Set(n.map((e=>e.Name)));for(const r of t)e[r]??=[],e[r].push(...n)}return e}()),t=Dh(Asset.filter((e=>e.IsLock)).map((e=>[e.Name,e])));Eh.hookFunction("CraftingAppliesToItem",10,(([t,n])=>(e[t?.Item]??[]).includes(n))),Eh.hookFunction("DialogCanUseCraftedItem",10,(([n,r])=>(e[r?.Item]??[]).some((e=>{if(e.OwnerOnly&&!n.IsOwnedByPlayer())return!1;if(e.LoverOnly&&!n.IsOwnedByPlayer()&&!n.IsLoverOfPlayer())return!1;if(e.FamilyOnly&&!(n.IsOwnedByPlayer()||n.IsLoverOfPlayer()||n.IsFamilyOfPlayer()))return!1;const i=t[r?.Lock];if(null!=i){if(i.OwnerOnly&&!DialogCanUseOwnerLockOn(n))return!1;if(i.LoverOnly&&!DialogCanUseLoverLockOn(n))return!1;if(i.FamilyOnly&&!DialogCanUseFamilyLockOn(n))return!1}return!0}))))}rv.size?kh.log("Initializing R103 bug fix backports",Td(Array.from(rv))):kh.log("No R103 bug fix backports")}));const iv=Eh.getOriginalHash,ov=t;return kh.log(`Initializing MBS version ${t}`),Mh((()=>CR(!1))).then((()=>{!function(e){const t=Hh.fromBCVersion(e),n=Hh.fromBCVersion("R102");if(t.lesser(n))throw new Error(`BC ${GameVersion} detected; MBS requires version R102 or later`);kh.log(`Detected BC ${GameVersion}`)}(GameVersion),function(){const e={};for(const[t,n]of Object.entries(Gh)){const r=Eh.getOriginalHash(t);n.has(r)||(e[t]=r)}const t=Object.values(e).length;0!==t&&kh.warn(`Found ${t} patched functions with an unknown hash`,e)}(),document.body.appendChild(p("style",{id:"mbs-style",children:":root {\n  --mbs-background-color: white;\n  --mbs-button-color: white;\n  --mbs-hover-color: cyan;\n  --mbs-tooltip-color: lightyellow;\n  --mbs-border-color: black;\n  --mbs-text-color: black;\n  --mbs-font-small: min(3.5vh, 1.75vw);\n  --mbs-font-large: min(5vh, 2.5vw);\n  --mbs-font-family: arial, sans-serif;\n}\n\n.mbs-button {\n  background-origin: content-box;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  height: 100%;\n  overflow: clip;\n  padding-left: min(2vh, 1vw);\n  padding-right: min(2vh, 1vw);\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 100%;\n}\n.mbs-button:hover {\n  background-color: var(--mbs-hover-color);\n}\n.mbs-button:disabled {\n  background-color: var(--mbs-button-color);\n  filter: brightness(60%);\n}\n\n.mbs-button-tooltip {\n  background-color: var(--mbs-tooltip-color) !important;\n  border: min(0.3vh, 0.15vw) solid var(--mbs-border-color);\n  bottom: -10%;\n  box-shadow: min(0.4vh, 0.2vw) min(0.4vh, 0.2vw) min(2vh, 1vw) 0 rgba(0, 0, 0, 0.5);\n  line-height: 1.4;\n  padding: min(1vh, 0.5vw) min(2vh, 1vw) min(1vh, 0.5vw) min(2vh, 1vw);\n  position: relative;\n  text-align: center;\n  visibility: hidden;\n  white-space: nowrap;\n  width: fit-content;\n  z-index: 1;\n}\n\n.mbs-button-div {\n  display: grid;\n  grid-template-columns: min(9vh, 4.5vw);\n  grid-template-rows: min(9vh, 4.5vw) auto;\n}\n.mbs-button-div .mbs-button-tooltip {\n  justify-self: center;\n}\n.mbs-button-div .mbs-button {\n  height: inherit;\n  width: inherit;\n}\n.mbs-button-div .mbs-button:hover + .mbs-button-tooltip {\n  visibility: visible;\n}\n\n.mbs-timer {\n  height: min(6vh, 3vw);\n  text-align: center;\n  width: min(21vh, 10.5vw);\n}\n\n.mbs-dropdown-button {\n  border: unset !important;\n  padding-bottom: min(1vh, 0.5vw);\n  padding-top: min(1vh, 0.5vw);\n}\n.mbs-dropdown-button:nth-child(even) {\n  filter: brightness(85%);\n}\n\n.mbs-dropdown-content {\n  border: min(0.3vh, 0.15vw) solid var(--mbs-border-color);\n  overflow-y: scroll;\n  position: absolute;\n  visibility: hidden;\n  z-index: 1;\n}\n\n.mbs-dropdown:hover .mbs-dropdown-content {\n  visibility: visible;\n}\n\n.mbs-screen {\n  display: grid;\n  position: fixed;\n  text-align: center;\n  user-select: none;\n  visibility: hidden;\n  grid-gap: min(2vh, 1vw);\n}\n.mbs-screen h1, .mbs-screen h2, .mbs-screen p, .mbs-screen ul {\n  align-items: center;\n  align-self: center;\n  color: var(--mbs-text-color);\n  font-family: var(--mbs-font-family);\n}\n.mbs-screen h1 {\n  font-size: var(--mbs-font-large);\n}\n.mbs-screen p, .mbs-screen h2, .mbs-screen ul {\n  font-size: var(--mbs-font-small);\n}\n.mbs-screen div, .mbs-screen input {\n  background-color: var(--mbs-background-color);\n  color: var(--mbs-text-color);\n  font-family: var(--mbs-font-family);\n  font-size: var(--mbs-font-small);\n}\n.mbs-screen button {\n  background-color: var(--mbs-button-color);\n  border: min(0.3vh, 0.15vw) solid var(--mbs-border-color);\n  color: var(--mbs-text-color);\n  font-family: var(--mbs-font-family);\n  font-size: var(--mbs-font-small);\n}\n.mbs-screen input:invalid {\n  background-color: #fbb;\n  box-shadow: 0 0 3px 2px #c22;\n}\n.mbs-screen input[type=checkbox] {\n  border: min(0.3vh, 0.15vw) solid var(--mbs-border-color);\n  height: min(7vh, 3.5vw);\n  width: min(7vh, 3.5vw);\n}\n.mbs-screen input[type=checkbox]:hover {\n  background-color: var(--mbs-hover-color);\n}\n.mbs-screen input[type=checkbox]:disabled {\n  background-color: var(--mbs-background-color);\n  filter: brightness(60%);\n}\n.mbs-screen input[type=checkbox]::before {\n  height: min(4.6vh, 2.3vw);\n  width: min(4.6vh, 2.3vw);\n}".toString()}))})),e.API_VERSION=DR,e.MBS_VERSION=ov,e._getFunctionHash=iv,e._toItemBundles=af,e._unpackSettings=Sm,e.css=NR,e.getDebug=jR,e.runTests=nv,e.wheelOutfits=HR,e}({});
//# sourceMappingURL=mbs.js.map
